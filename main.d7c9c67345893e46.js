"use strict";(self.webpackChunkrpg_psicoleigos=self.webpackChunkrpg_psicoleigos||[]).push([[179],{6217:(Wt,ze,j)=>{j.d(ze,{nm:()=>zi});var T=j(2122);j(4650),j(259);var ot=j(5861),Xe=j(9681),qe=j(4859),Mt=j(2090),Se=j(1877);const Ie=new Map,tt={activated:!1,tokenObservers:[]},it={initialized:!1,enabled:!1};function vt(Pe){return Ie.get(Pe)||Object.assign({},tt)}function Pt(){return it}const Ue="https://content-firebaseappcheck.googleapis.com/v1",rt="exchangeDebugToken",ct={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class kt{constructor(_e,Be,ht,Lt,tn){if(this.operation=_e,this.retryPolicy=Be,this.getWaitDuration=ht,this.lowerBound=Lt,this.upperBound=tn,this.pending=null,this.nextErrorWaitInterval=Lt,Lt>tn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(_e){var Be=this;return(0,ot.Z)(function*(){Be.stop();try{Be.pending=new Mt.BH,yield function Et(Pe){return new Promise(_e=>{setTimeout(_e,Pe)})}(Be.getNextRun(_e)),Be.pending.resolve(),yield Be.pending.promise,Be.pending=new Mt.BH,yield Be.operation(),Be.pending.resolve(),yield Be.pending.promise,Be.process(!0).catch(()=>{})}catch(ht){Be.retryPolicy(ht)?Be.process(!1).catch(()=>{}):Be.stop()}})()}getNextRun(_e){if(_e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Be=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Be}}}const Gt=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vn(Pe,_e){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,ot.Z)(function*({url:Pe,body:_e},Be){const ht={"Content-Type":"application/json"},Lt=Be.getImmediate({optional:!0});if(Lt){const gr=yield Lt.getHeartbeatsHeader();gr&&(ht["X-Firebase-Client"]=gr)}const tn={method:"POST",body:JSON.stringify(_e),headers:ht};let An,wr;try{An=yield fetch(Pe,tn)}catch(gr){throw Gt.create("fetch-network-error",{originalErrorMessage:gr?.message})}if(200!==An.status)throw Gt.create("fetch-status-error",{httpStatus:An.status});try{wr=yield An.json()}catch(gr){throw Gt.create("fetch-parse-error",{originalErrorMessage:gr?.message})}const Pn=wr.ttl.match(/^([\d.]+)(s)$/);if(!Pn||!Pn[2]||isNaN(Number(Pn[1])))throw Gt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${wr.ttl}`});const co=1e3*Number(Pn[1]),Lr=Date.now();return{token:wr.token,expireTimeMillis:Lr+co,issuedAtTimeMillis:Lr}})).apply(this,arguments)}const Nn="firebase-app-check-database",er=1,tr="firebase-app-check-store";let Sn=null;function ni(Pe,_e){return yn.apply(this,arguments)}function yn(){return(yn=(0,ot.Z)(function*(Pe,_e){const ht=(yield function Ut(){return Sn||(Sn=new Promise((Pe,_e)=>{try{const Be=indexedDB.open(Nn,er);Be.onsuccess=ht=>{Pe(ht.target.result)},Be.onerror=ht=>{var Lt;_e(Gt.create("storage-open",{originalErrorMessage:null===(Lt=ht.target.error)||void 0===Lt?void 0:Lt.message}))},Be.onupgradeneeded=ht=>{0===ht.oldVersion&&ht.target.result.createObjectStore(tr,{keyPath:"compositeKey"})}}catch(Be){_e(Gt.create("storage-open",{originalErrorMessage:Be?.message}))}}),Sn)}()).transaction(tr,"readwrite"),tn=ht.objectStore(tr).put({compositeKey:Pe,value:_e});return new Promise((An,wr)=>{tn.onsuccess=Pn=>{An()},ht.onerror=Pn=>{var co;wr(Gt.create("storage-set",{originalErrorMessage:null===(co=Pn.target.error)||void 0===co?void 0:co.message}))}})})).apply(this,arguments)}const or=new Se.Yd("@firebase/app-check");function Zr(Pe,_e){return(0,Mt.hl)()?function fi(Pe,_e){return ni(function rr(Pe){return`${Pe.options.appId}-${Pe.name}`}(Pe),_e)}(Pe,_e).catch(Be=>{or.warn(`Failed to write token to IndexedDB. Error: ${Be}`)}):Promise.resolve()}function xn(){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,ot.Z)(function*(){const Pe=Pt();if(Pe.enabled&&Pe.token)return Pe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Rt={error:"UNKNOWN_ERROR"};function ft(Pe){return Mt.US.encodeString(JSON.stringify(Pe),!1)}function Ht(Pe){return rn.apply(this,arguments)}function rn(){return(rn=(0,ot.Z)(function*(Pe,_e=!1){const Be=Pe.app;!function wt(Pe){if(!vt(Pe).activated)throw Gt.create("use-before-activation",{appName:Pe.name})}(Be);const ht=vt(Be);let tn,Lt=ht.token;if(Lt&&!te(Lt)&&(ht.token=void 0,Lt=void 0),!Lt){const Pn=yield ht.cachedTokenPromise;Pn&&(te(Pn)?Lt=Pn:yield Zr(Be,void 0))}if(!_e&&Lt&&te(Lt))return{token:Lt.token};let wr,An=!1;if(function Kr(){return Pt().enabled}()){ht.exchangeTokenPromise||(ht.exchangeTokenPromise=Vn(function Fn(Pe,_e){const{projectId:Be,appId:ht,apiKey:Lt}=Pe.options;return{url:`${Ue}/projects/${Be}/apps/${ht}:${rt}?key=${Lt}`,body:{debug_token:_e}}}(Be,yield xn()),Pe.heartbeatServiceProvider).finally(()=>{ht.exchangeTokenPromise=void 0}),An=!0);const Pn=yield ht.exchangeTokenPromise;return yield Zr(Be,Pn),ht.token=Pn,{token:Pn.token}}try{ht.exchangeTokenPromise||(ht.exchangeTokenPromise=ht.provider.getToken().finally(()=>{ht.exchangeTokenPromise=void 0}),An=!0),Lt=yield vt(Be).exchangeTokenPromise}catch(Pn){"appCheck/throttled"===Pn.code?or.warn(Pn.message):or.error(Pn),tn=Pn}return Lt?tn?wr=te(Lt)?{token:Lt.token,internalError:tn}:re(tn):(wr={token:Lt.token},ht.token=Lt,yield Zr(Be,Lt)):wr=re(tn),An&&function me(Pe,_e){const Be=vt(Pe).tokenObservers;for(const ht of Be)try{"EXTERNAL"===ht.type&&null!=_e.error?ht.error(_e.error):ht.next(_e)}catch{}}(Be,wr),wr})).apply(this,arguments)}function fn(Pe,_e){const Be=vt(Pe),ht=Be.tokenObservers.filter(Lt=>Lt.next!==_e);0===ht.length&&Be.tokenRefresher&&Be.tokenRefresher.isRunning()&&Be.tokenRefresher.stop(),Be.tokenObservers=ht}function cr(Pe){const{app:_e}=Pe,Be=vt(_e);let ht=Be.tokenRefresher;ht||(ht=function ve(Pe){const{app:_e}=Pe;return new kt((0,ot.Z)(function*(){let ht;if(ht=vt(_e).token?yield Ht(Pe,!0):yield Ht(Pe),ht.error)throw ht.error;if(ht.internalError)throw ht.internalError}),()=>!0,()=>{const Be=vt(_e);if(Be.token){let ht=Be.token.issuedAtTimeMillis+.5*(Be.token.expireTimeMillis-Be.token.issuedAtTimeMillis)+3e5;return ht=Math.min(ht,Be.token.expireTimeMillis-3e5),Math.max(0,ht-Date.now())}return 0},ct.RETRIAL_MIN_WAIT,ct.RETRIAL_MAX_WAIT)}(Pe),Be.tokenRefresher=ht),!ht.isRunning()&&Be.isTokenAutoRefreshEnabled&&ht.start()}function te(Pe){return Pe.expireTimeMillis-Date.now()>0}function re(Pe){return{token:ft(Rt),error:Pe}}class Q{constructor(_e,Be){this.app=_e,this.heartbeatServiceProvider=Be}_delete(){const{tokenObservers:_e}=vt(this.app);for(const Be of _e)fn(this.app,Be.next);return Promise.resolve()}}const Qt="app-check-internal";!function Mn(){(0,Xe._registerComponent)(new qe.wA("app-check",Pe=>function xe(Pe,_e){return new Q(Pe,_e)}(Pe.getProvider("app").getImmediate(),Pe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Pe,_e,Be)=>{Pe.getProvider(Qt).initialize()})),(0,Xe._registerComponent)(new qe.wA(Qt,Pe=>function ae(Pe){return{getToken:_e=>Ht(Pe,_e),addTokenListener:_e=>function mn(Pe,_e,Be,ht){const{app:Lt}=Pe,tn=vt(Lt);if(tn.tokenObservers=[...tn.tokenObservers,{next:Be,error:ht,type:_e}],tn.token&&te(tn.token)){const wr=tn.token;Promise.resolve().then(()=>{Be({token:wr.token}),cr(Pe)}).catch(()=>{})}tn.cachedTokenPromise.then(()=>cr(Pe))}(Pe,"INTERNAL",_e),removeTokenListener:_e=>fn(Pe.app,_e)}}(Pe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.6.4")}();class zi{constructor(){return(0,T.vb)("app-check")}}typeof window<"u"&&window},1205:(Wt,ze,j)=>{j.d(ze,{zQ:()=>Ue,ww:()=>nt,rT:()=>it,f7:()=>Kt,L6:()=>Ie,_Q:()=>tt,lh:()=>vt,Qv:()=>Se,nw:()=>Pt});var T=j(4650),Y=j(7579),h=j(9646),ye=j(9751),Ae=j(8996),Ce=j(6451),Fe=j(5363),Re=j(3900),De=j(4004),pe=j(6063);class de extends Y.x{constructor(rt=1/0,ct=1/0,st=pe.l){super(),this._bufferSize=rt,this._windowTime=ct,this._timestampProvider=st,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ct===1/0,this._bufferSize=Math.max(1,rt),this._windowTime=Math.max(1,ct)}next(rt){const{isStopped:ct,_buffer:st,_infiniteTimeWindow:kt,_timestampProvider:Et,_windowTime:on}=this;ct||(st.push(rt),!kt&&st.push(Et.now()+on)),this._trimBuffer(),super.next(rt)}_subscribe(rt){this._throwIfClosed(),this._trimBuffer();const ct=this._innerSubscribe(rt),{_infiniteTimeWindow:st,_buffer:kt}=this,Et=kt.slice();for(let on=0;on<Et.length&&!rt.closed;on+=st?1:2)rt.next(Et[on]);return this._checkFinalizedStatuses(rt),ct}_trimBuffer(){const{_bufferSize:rt,_timestampProvider:ct,_buffer:st,_infiniteTimeWindow:kt}=this,Et=(kt?1:2)*rt;if(rt<1/0&&Et<st.length&&st.splice(0,st.length-Et),!kt){const on=ct.now();let Gt=0;for(let $t=1;$t<st.length&&st[$t]<=on;$t+=2)Gt=$t;Gt&&st.splice(0,Gt+1)}}}var Te=j(3099);function Ye(We,rt,ct){let st,kt=!1;return We&&"object"==typeof We?({bufferSize:st=1/0,windowTime:rt=1/0,refCount:kt=!1,scheduler:ct}=We):st=We??1/0,(0,Te.B)({connector:()=>new de(st,rt,ct),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:kt})}var Je=j(590),mt=j(576);function It(We,rt){return(0,mt.m)(rt)?(0,Re.w)(()=>We,rt):(0,Re.w)(()=>We)}var Ze=j(9468),at=j(9300),ge=j(2122),ut=j(2011),ot=j(6895),Xe=j(6217),qe=j(9260);const Se=new T.OlP("angularfire2.auth.use-emulator"),Ie=new T.OlP("angularfire2.auth.settings"),tt=new T.OlP("angularfire2.auth.tenant-id"),it=new T.OlP("angularfire2.auth.langugage-code"),vt=new T.OlP("angularfire2.auth.use-device-language"),Kt=new T.OlP("angularfire.auth.persistence"),Pt=(We,rt,ct,st,kt,Et,on,Gt)=>(0,ut.cc)(`${We.name}.auth`,"AngularFireAuth",We.name,()=>{const $t=rt.runOutsideAngular(()=>We.auth());if(ct&&$t.useEmulator(...ct),st&&($t.tenantId=st),$t.languageCode=kt,Et&&$t.useDeviceLanguage(),on)for(const[wt,En]of Object.entries(on))$t.settings[wt]=En;return Gt&&$t.setPersistence(Gt),$t},[ct,st,kt,Et,on,Gt]);let Ue=(()=>{class We{constructor(ct,st,kt,Et,on,Gt,$t,wt,En,Rn,Vn,Gn){const Wr=new Y.x,Zn=(0,h.of)(void 0).pipe((0,Fe.Q)(on.outsideAngular),(0,Re.w)(()=>Et.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,De.U)(()=>(0,ut.on)(ct,Et,st)),(0,De.U)(Fn=>Pt(Fn,Et,Gt,wt,En,Rn,$t,Vn)),Ye({bufferSize:1,refCount:!1}));if((0,ot.PM)(kt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,h.of)(null);else{Zn.pipe((0,Je.P)()).subscribe();const Nn=Zn.pipe((0,Re.w)(Xt=>Xt.getRedirectResult().then(Sn=>Sn,()=>null)),ge.iC,Ye({bufferSize:1,refCount:!1})),er=Zn.pipe((0,Re.w)(Xt=>new ye.y(Sn=>({unsubscribe:Et.runOutsideAngular(()=>Xt.onAuthStateChanged(Ut=>Sn.next(Ut),Ut=>Sn.error(Ut),()=>Sn.complete()))})))),tr=Zn.pipe((0,Re.w)(Xt=>new ye.y(Sn=>({unsubscribe:Et.runOutsideAngular(()=>Xt.onIdTokenChanged(Ut=>Sn.next(Ut),Ut=>Sn.error(Ut),()=>Sn.complete()))}))));this.authState=Nn.pipe(It(er),(0,Ze.R)(on.outsideAngular),(0,Fe.Q)(on.insideAngular)),this.user=Nn.pipe(It(tr),(0,Ze.R)(on.outsideAngular),(0,Fe.Q)(on.insideAngular)),this.idToken=this.user.pipe((0,Re.w)(Xt=>Xt?(0,Ae.D)(Xt.getIdToken()):(0,h.of)(null))),this.idTokenResult=this.user.pipe((0,Re.w)(Xt=>Xt?(0,Ae.D)(Xt.getIdTokenResult()):(0,h.of)(null))),this.credential=(0,Ce.T)(Nn,Wr,this.authState.pipe((0,at.h)(Xt=>!Xt))).pipe((0,De.U)(Xt=>Xt?.user?Xt:null),(0,Ze.R)(on.outsideAngular),(0,Fe.Q)(on.insideAngular))}return(0,ut.pX)(this,Zn,Et,{spy:{apply:(Fn,Nn,er)=>{(Fn.startsWith("signIn")||Fn.startsWith("createUser"))&&er.then(tr=>Wr.next(tr))}}})}}return We.\u0275fac=function(ct){return new(ct||We)(T.LFG(ut.Dh),T.LFG(ut.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(ge.HU),T.LFG(Se,8),T.LFG(Ie,8),T.LFG(tt,8),T.LFG(it,8),T.LFG(vt,8),T.LFG(Kt,8),T.LFG(Xe.nm,8))},We.\u0275prov=T.Yz7({token:We,factory:We.\u0275fac,providedIn:"any"}),We})(),nt=(()=>{class We{constructor(){qe.Z.registerVersion("angularfire",ge.q4.full,"auth-compat")}}return We.\u0275fac=function(ct){return new(ct||We)},We.\u0275mod=T.oAB({type:We}),We.\u0275inj=T.cJS({providers:[Ue]}),We})()},3101:(Wt,ze,j)=>{j.d(ze,{ST:()=>gc,yb:()=>yy});var T=j(4650),Y=j(4986),h=j(9751),ye=j(8996),Ae=j(9646),Ce=j(2122),Fe=j(8675),Re=j(4482),De=j(5403);function pe(){return(0,Re.e)((l,e)=>{let i,u=!1;l.subscribe((0,De.x)(e,p=>{const _=i;i=p,u&&e.next([_,p]),u=!0}))})}var Ie,de=j(4004),Te=j(5026),Ye=j(1884),Je=j(9300),mt=j(2011),It=j(6895),at=(j(9568),j(3942)),ge=j(5861),ut=j(9681),ot=j(4859),Xe=j(1877),qe=j(2090),Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Se={},tt=tt||{},it=Mt||self;function vt(){}function Kt(l){var e=typeof l;return"array"==(e="object"!=e?e:l?Array.isArray(l)?"array":e:"null")||"object"==e&&"number"==typeof l.length}function Pt(l){var e=typeof l;return"object"==e&&null!=l||"function"==e}var nt="closure_uid_"+(1e9*Math.random()>>>0),We=0;function rt(l,e,i){return l.call.apply(l.bind,arguments)}function ct(l,e,i){if(!l)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,u),l.apply(e,p)}}return function(){return l.apply(e,arguments)}}function st(l,e,i){return(st=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rt:ct).apply(null,arguments)}function kt(l,e){var i=Array.prototype.slice.call(arguments,1);return function(){var u=i.slice();return u.push.apply(u,arguments),l.apply(this,u)}}function Et(l,e){function i(){}i.prototype=e.prototype,l.X=e.prototype,l.prototype=new i,l.prototype.constructor=l,l.Wb=function(u,p,_){for(var w=Array(arguments.length-2),O=2;O<arguments.length;O++)w[O-2]=arguments[O];return e.prototype[p].apply(u,w)}}function on(){this.s=this.s,this.o=this.o}on.prototype.s=!1,on.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ue(l){Object.prototype.hasOwnProperty.call(l,nt)&&l[nt]||(l[nt]=++We)}(this)},on.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $t=Array.prototype.indexOf?function(l,e){return Array.prototype.indexOf.call(l,e,void 0)}:function(l,e){if("string"==typeof l)return"string"!=typeof e||1!=e.length?-1:l.indexOf(e,0);for(let i=0;i<l.length;i++)if(i in l&&l[i]===e)return i;return-1};function wt(l){const e=l.length;if(0<e){const i=Array(e);for(let u=0;u<e;u++)i[u]=l[u];return i}return[]}function En(l,e){for(let i=1;i<arguments.length;i++){const u=arguments[i];if(Kt(u)){const p=l.length||0,_=u.length||0;l.length=p+_;for(let w=0;w<_;w++)l[p+w]=u[w]}else l.push(u)}}function Rn(l,e){this.type=l,this.g=this.target=e,this.defaultPrevented=!1}Rn.prototype.h=function(){this.defaultPrevented=!0};var Vn=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var l=!1,e=Object.defineProperty({},"passive",{get:function(){l=!0}});try{it.addEventListener("test",vt,e),it.removeEventListener("test",vt,e)}catch{}return l}();function Gn(l){return/^[\s\xa0]*$/.test(l)}var Wr=String.prototype.trim?function(l){return l.trim()}:function(l){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(l)[1]};function Zn(l,e){return l<e?-1:l>e?1:0}function Fn(){var l=it.navigator;return l&&(l=l.userAgent)?l:""}function Nn(l){return-1!=Fn().indexOf(l)}function er(l){return er[" "](l),l}er[" "]=vt;var ni,l,Xt=Nn("Opera"),Sn=Nn("Trident")||Nn("MSIE"),Ut=Nn("Edge"),ti=Ut||Sn,fi=Nn("Gecko")&&!(-1!=Fn().toLowerCase().indexOf("webkit")&&!Nn("Edge"))&&!(Nn("Trident")||Nn("MSIE"))&&!Nn("Edge"),kr=-1!=Fn().toLowerCase().indexOf("webkit")&&!Nn("Edge");function Yr(){var l=it.document;return l?l.documentMode:void 0}e:{var yn="",nn=(l=Fn(),fi?/rv:([^\);]+)(\)|;)/.exec(l):Ut?/Edge\/([\d\.]+)/.exec(l):Sn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(l):kr?/WebKit\/(\S+)/.exec(l):Xt?/(?:Version)[ \/]?(\S+)/.exec(l):void 0);if(nn&&(yn=nn?nn[1]:""),Sn){var cn=Yr();if(null!=cn&&cn>parseFloat(yn)){ni=String(cn);break e}}ni=yn}var rr={};var Zr=it.document&&Sn&&(Yr()||parseInt(ni,10))||void 0;function yr(l,e){if(Rn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var i=this.type=l.type,u=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=e,e=l.relatedTarget){if(fi){e:{try{er(e.nodeName);var p=!0;break e}catch{}p=!1}p||(e=null)}}else"mouseover"==i?e=l.fromElement:"mouseout"==i&&(e=l.toElement);this.relatedTarget=e,u?(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:pn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&yr.X.h.call(this)}}Et(yr,Rn);var pn={2:"touch",3:"pen",4:"mouse"};yr.prototype.h=function(){yr.X.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Kr="closure_listenable_"+(1e6*Math.random()|0),xn=0;function Ii(l,e,i,u,p){this.listener=l,this.proxy=null,this.src=e,this.type=i,this.capture=!!u,this.ha=p,this.key=++xn,this.ba=this.ea=!1}function Cr(l){l.ba=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Rt(l,e,i){for(const u in l)e.call(i,l[u],u,l)}function ft(l){const e={};for(const i in l)e[i]=l[i];return e}const Ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rn(l,e){let i,u;for(let p=1;p<arguments.length;p++){for(i in u=arguments[p],u)l[i]=u[i];for(let _=0;_<Ht.length;_++)i=Ht[_],Object.prototype.hasOwnProperty.call(u,i)&&(l[i]=u[i])}}function mn(l){this.src=l,this.g={},this.h=0}function fn(l,e){var i=e.type;if(i in l.g){var _,u=l.g[i],p=$t(u,e);(_=0<=p)&&Array.prototype.splice.call(u,p,1),_&&(Cr(e),0==l.g[i].length&&(delete l.g[i],l.h--))}}function cr(l,e,i,u){for(var p=0;p<l.length;++p){var _=l[p];if(!_.ba&&_.listener==e&&_.capture==!!i&&_.ha==u)return p}return-1}mn.prototype.add=function(l,e,i,u,p){var _=l.toString();(l=this.g[_])||(l=this.g[_]=[],this.h++);var w=cr(l,e,u,p);return-1<w?(e=l[w],i||(e.ea=!1)):((e=new Ii(e,this.src,_,!!u,p)).ea=i,l.push(e)),e};var ve="closure_lm_"+(1e6*Math.random()|0),me={};function te(l,e,i,u,p){if(u&&u.once)return xe(l,e,i,u,p);if(Array.isArray(e)){for(var _=0;_<e.length;_++)te(l,e[_],i,u,p);return null}return i=en(i),l&&l[Kr]?l.N(e,i,Pt(u)?!!u.capture:!!u,p):re(l,e,i,!1,u,p)}function re(l,e,i,u,p,_){if(!e)throw Error("Invalid event type");var w=Pt(p)?!!p.capture:!!p,O=et(l);if(O||(l[ve]=O=new mn(l)),(i=O.add(e,i,u,w,_)).proxy)return i;if(u=function Q(){const e=Oe;return function l(i){return e.call(l.src,l.listener,i)}}(),i.proxy=u,u.src=l,u.listener=i,l.addEventListener)Vn||(p=w),void 0===p&&(p=!1),l.addEventListener(e.toString(),u,p);else if(l.attachEvent)l.attachEvent(oe(e.toString()),u);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(u)}return i}function xe(l,e,i,u,p){if(Array.isArray(e)){for(var _=0;_<e.length;_++)xe(l,e[_],i,u,p);return null}return i=en(i),l&&l[Kr]?l.O(e,i,Pt(u)?!!u.capture:!!u,p):re(l,e,i,!0,u,p)}function ae(l,e,i,u,p){if(Array.isArray(e))for(var _=0;_<e.length;_++)ae(l,e[_],i,u,p);else u=Pt(u)?!!u.capture:!!u,i=en(i),l&&l[Kr]?(l=l.i,(e=String(e).toString())in l.g&&-1<(i=cr(_=l.g[e],i,u,p))&&(Cr(_[i]),Array.prototype.splice.call(_,i,1),0==_.length&&(delete l.g[e],l.h--))):l&&(l=et(l))&&(e=l.g[e.toString()],l=-1,e&&(l=cr(e,i,u,p)),(i=-1<l?e[l]:null)&&he(i))}function he(l){if("number"!=typeof l&&l&&!l.ba){var e=l.src;if(e&&e[Kr])fn(e.i,l);else{var i=l.type,u=l.proxy;e.removeEventListener?e.removeEventListener(i,u,l.capture):e.detachEvent?e.detachEvent(oe(i),u):e.addListener&&e.removeListener&&e.removeListener(u),(i=et(e))?(fn(i,l),0==i.h&&(i.src=null,e[ve]=null)):Cr(l)}}}function oe(l){return l in me?me[l]:me[l]="on"+l}function Oe(l,e){if(l.ba)l=!0;else{e=new yr(e,this);var i=l.listener,u=l.ha||l.src;l.ea&&he(l),l=i.call(u,e)}return l}function et(l){return(l=l[ve])instanceof mn?l:null}var pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function en(l){return"function"==typeof l?l:(l[pt]||(l[pt]=function(e){return l.handleEvent(e)}),l[pt])}function Bt(){on.call(this),this.i=new mn(this),this.P=this,this.I=null}function Cn(l,e){var i,u=l.I;if(u)for(i=[];u;u=u.I)i.push(u);if(l=l.P,u=e.type||e,"string"==typeof e)e=new Rn(e,l);else if(e instanceof Rn)e.target=e.target||l;else{var p=e;rn(e=new Rn(u,l),p)}if(p=!0,i)for(var _=i.length-1;0<=_;_--){var w=e.g=i[_];p=Qs(w,u,!0,e)&&p}if(p=Qs(w=e.g=l,u,!0,e)&&p,p=Qs(w,u,!1,e)&&p,i)for(_=0;_<i.length;_++)p=Qs(w=e.g=i[_],u,!1,e)&&p}function Qs(l,e,i,u){if(!(e=l.i.g[String(e)]))return!0;e=e.concat();for(var p=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ba&&w.capture==i){var O=w.listener,B=w.ha||w.src;w.ea&&fn(l.i,w),p=!1!==O.call(B,u)&&p}}return p&&!u.defaultPrevented}Et(Bt,on),Bt.prototype[Kr]=!0,Bt.prototype.removeEventListener=function(l,e,i,u){ae(this,l,e,i,u)},Bt.prototype.M=function(){if(Bt.X.M.call(this),this.i){var e,l=this.i;for(e in l.g){for(var i=l.g[e],u=0;u<i.length;u++)Cr(i[u]);delete l.g[e],l.h--}}this.I=null},Bt.prototype.N=function(l,e,i,u){return this.i.add(String(l),e,!1,i,u)},Bt.prototype.O=function(l,e,i,u){return this.i.add(String(l),e,!0,i,u)};var os=it.JSON.stringify;function ca(){var l=Ui;let e=null;return l.g&&(e=l.g,l.g=l.g.next,l.g||(l.h=null),e.next=null),e}var Xn,Qr=new class{constructor(l,e){this.i=l,this.j=e,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}(()=>new ps,l=>l.reset());class ps{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function ks(l){it.setTimeout(()=>{throw l},0)}function No(l,e){Xn||function Vr(){var l=it.Promise.resolve(void 0);Xn=function(){l.then($i)}}(),Fr||(Xn(),Fr=!0),Ui.add(l,e)}var Fr=!1,Ui=new class qo{constructor(){this.h=this.g=null}add(e,i){const u=Qr.get();u.set(e,i),this.h?this.h.next=u:this.g=u,this.h=u}};function $i(){for(var l;l=ca();){try{l.h.call(l.g)}catch(i){ks(i)}var e=Qr;e.j(l),100>e.h&&(e.h++,l.next=e.g,e.g=l)}Fr=!1}function si(l,e){Bt.call(this),this.h=l||1,this.g=e||it,this.j=st(this.lb,this),this.l=Date.now()}function ri(l){l.ca=!1,l.R&&(l.g.clearTimeout(l.R),l.R=null)}function yi(l,e,i){if("function"==typeof l)i&&(l=st(l,i));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=st(l.handleEvent,l)}return 2147483647<Number(e)?-1:it.setTimeout(l,e||0)}function Ci(l){l.g=yi(()=>{l.g=null,l.i&&(l.i=!1,Ci(l))},l.j);const e=l.h;l.h=null,l.m.apply(null,e)}Et(si,Bt),(Ie=si.prototype).ca=!1,Ie.R=null,Ie.lb=function(){if(this.ca){var l=Date.now()-this.l;0<l&&l<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-l):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Cn(this,"tick"),this.ca&&(ri(this),this.start()))}},Ie.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ie.M=function(){si.X.M.call(this),ri(this),delete this.g};class Qt extends on{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ci(this)}M(){super.M(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(l){on.call(this),this.h=l,this.g={}}Et(Mn,on);var vr=[];function vi(l,e,i,u){Array.isArray(i)||(i&&(vr[0]=i.toString()),i=vr);for(var p=0;p<i.length;p++){var _=te(e,i[p],u||l.handleEvent,!1,l.h||l);if(!_)break;l.g[_.key]=_}}function zi(l){Rt(l.g,function(e,i){this.g.hasOwnProperty(i)&&he(e)},l),l.g={}}function br(){this.g=!0}function ai(l,e,i,u){l.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ln(l,e){if(!l.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(l=0;l<i.length;l++)if(Array.isArray(i[l])){var u=i[l];if(!(2>u.length)){var p=u[1];if(Array.isArray(p)&&!(1>p.length)){var _=p[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<p.length;w++)p[w]=""}}}return os(i)}catch{return e}}(l,i)+(u?" "+u:"")})}Mn.prototype.M=function(){Mn.X.M.call(this),zi(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},br.prototype.Aa=function(){this.g=!1},br.prototype.info=function(){};var As={},Mo=null;function Yo(){return Mo=Mo||new Bt}function Ro(l){Rn.call(this,As.Pa,l)}function Ti(l){const e=Yo();Cn(e,new Ro(e))}function uo(l,e){Rn.call(this,As.STAT_EVENT,l),this.stat=e}function jr(l){const e=Yo();Cn(e,new uo(e,l))}function bi(l,e){Rn.call(this,As.Qa,l),this.size=e}function Os(l,e){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){l()},e)}As.Pa="serverreachability",Et(Ro,Rn),As.STAT_EVENT="statevent",Et(uo,Rn),As.Qa="timingevent",Et(bi,Rn);var Pe={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_e={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Be(){}function Lt(){}Be.prototype.h=null;var Pn,tn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function An(){Rn.call(this,"d")}function wr(){Rn.call(this,"c")}function co(){}function Lr(l,e,i,u){this.l=l,this.j=e,this.m=i,this.U=u||1,this.S=new Mn(this),this.O=Fs,this.T=new si(l=ti?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}Et(An,Rn),Et(wr,Rn),Et(co,Be),co.prototype.g=function(){return new XMLHttpRequest},co.prototype.i=function(){return{}},Pn=new co;var Fs=45e3,Ls={},Wi={};function Us(l,e,i){l.K=1,l.v=Bi(Vs(e)),l.s=i,l.P=!0,Xa(l,null)}function Xa(l,e){l.F=Date.now(),xo(l),l.A=Vs(l.v);var i=l.A,u=l.U;Array.isArray(u)||(u=[String(u)]),Qo(i.i,"t",u),l.C=0,i=l.l.H,l.h=new gr,l.g=Cl(l.l,i?e:null,!l.s),0<l.N&&(l.L=new Qt(st(l.La,l,l.g),l.N)),vi(l.S,l.g,"readystatechange",l.ib),e=l.H?ft(l.H):{},l.s?(l.u||(l.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",l.g.da(l.A,l.u,l.s,e)):(l.u="GET",l.g.da(l.A,l.u,null,e)),Ti(),function oi(l,e,i,u,p,_){l.info(function(){if(l.g)if(_)for(var w="",O=_.split("&"),B=0;B<O.length;B++){var z=O[B].split("=");if(1<z.length){var ne=z[0];z=z[1];var be=ne.split("_");w=2<=be.length&&"type"==be[1]?w+(ne+"=")+z+"&":w+(ne+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+u+") [attempt "+p+"]: "+e+"\n"+i+"\n"+w})}(l.j,l.u,l.A,l.m,l.U,l.s)}function gs(l){return!!l.g&&"GET"==l.u&&2!=l.K&&l.l.Da}function da(l,e,i){let p,u=!0;for(;!l.I&&l.C<i.length;){if(p=ho(l,i),p==Wi){4==e&&(l.o=4,jr(14),u=!1),ai(l.j,l.m,null,"[Incomplete Response]");break}if(p==Ls){l.o=4,jr(15),ai(l.j,l.m,i,"[Invalid Chunk]"),u=!1;break}ai(l.j,l.m,p,null),el(l,p)}gs(l)&&p!=Wi&&p!=Ls&&(l.h.g="",l.C=0),4!=e||0!=i.length||l.h.h||(l.o=1,jr(16),u=!1),l.i=l.i&&u,u?0<i.length&&!l.$&&(l.$=!0,(e=l.l).g==l&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),Va(e),e.K=!0,jr(11))):(ai(l.j,l.m,i,"[Invalid Chunked Response]"),Ki(l),ko(l))}function ho(l,e){var i=l.C,u=e.indexOf("\n",i);return-1==u?Wi:(i=Number(e.substring(i,u)),isNaN(i)?Ls:(u+=1)+i>e.length?Wi:(e=e.substr(u,i),l.C=u+i,e))}function xo(l){l.V=Date.now()+l.O,ha(l,l.O)}function ha(l,e){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Os(st(l.gb,l),e)}function Po(l){l.B&&(it.clearTimeout(l.B),l.B=null)}function ko(l){0==l.l.G||l.I||ul(l.l,l)}function Ki(l){Po(l);var e=l.L;e&&"function"==typeof e.na&&e.na(),l.L=null,ri(l.T),zi(l.S),l.g&&(e=l.g,l.g=null,e.abort(),e.na())}function el(l,e){try{var i=l.l;if(0!=i.G&&(i.g==l||gi(i.h,l)))if(!l.J&&gi(i.h,l)&&3==i.G){try{var u=i.Fa.g.parse(e)}catch{u=null}if(Array.isArray(u)&&3==u.length){var p=u;if(0==p[0]){e:if(!i.u){if(i.g){if(!(i.g.F+3e3<l.F))break e;Ga(i),Ji(i)}ba(i),jr(18)}}else i.Ba=p[1],0<i.Ba-i.T&&37500>p[2]&&i.L&&0==i.A&&!i.v&&(i.v=Os(st(i.cb,i),6e3));if(1>=Gs(i.h)&&i.ja){try{i.ja()}catch{}i.ja=void 0}}else vo(i,11)}else if((l.J||i.g==l)&&Ga(i),!Gn(e))for(p=i.Fa.g.parse(e),e=0;e<p.length;e++){let z=p[e];if(i.T=z[0],z=z[1],2==i.G)if("c"==z[0]){i.I=z[1],i.ka=z[2];const ne=z[3];null!=ne&&(i.ma=ne,i.j.info("VER="+i.ma));const be=z[4];null!=be&&(i.Ca=be,i.j.info("SVER="+i.Ca));const Le=z[5];null!=Le&&"number"==typeof Le&&0<Le&&(i.J=u=1.5*Le,i.j.info("backChannelRequestTimeoutMs_="+u)),u=i;const gt=l.g;if(gt){const Nt=gt.g?gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nt){var _=u.h;_.g||-1==Nt.indexOf("spdy")&&-1==Nt.indexOf("quic")&&-1==Nt.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(fa(_,_.h),_.h=null))}if(u.D){const Zt=gt.g?gt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zt&&(u.za=Zt,Tr(u.F,u.D,Zt))}}i.G=3,i.l&&i.l.xa(),i.$&&(i.P=Date.now()-l.F,i.j.info("Handshake RTT: "+i.P+"ms"));var w=l;if((u=i).sa=lu(u,u.H?u.ka:null,u.V),w.J){sl(u.h,w);var O=w,B=u.J;B&&O.setTimeout(B),O.B&&(Po(O),xo(O)),u.g=w}else yo(u);0<i.i.length&&Ba(i)}else"stop"!=z[0]&&"close"!=z[0]||vo(i,7);else 3==i.G&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?vo(i,7):ea(i):"noop"!=z[0]&&i.l&&i.l.wa(z),i.A=0)}Ti()}catch{}}function Gu(l,e){if(l.forEach&&"function"==typeof l.forEach)l.forEach(e,void 0);else if(Kt(l)||"string"==typeof l)Array.prototype.forEach.call(l,e,void 0);else for(var i=function ms(l){if(l.oa&&"function"==typeof l.oa)return l.oa();if(!l.W||"function"!=typeof l.W){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(Kt(l)||"string"==typeof l){var e=[];l=l.length;for(var i=0;i<l;i++)e.push(i);return e}e=[],i=0;for(const u in l)e[i++]=u;return e}}}(l),u=function Bs(l){if(l.W&&"function"==typeof l.W)return l.W();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(Kt(l)){for(var e=[],i=l.length,u=0;u<i;u++)e.push(l[u]);return e}for(u in e=[],i=0,l)e[i++]=l[u];return e}(l),p=u.length,_=0;_<p;_++)e.call(void 0,u[_],i&&i[_],l)}(Ie=Lr.prototype).setTimeout=function(l){this.O=l},Ie.ib=function(l){l=l.target;const e=this.L;e&&3==eo(l)?e.l():this.La(l)},Ie.La=function(l){try{if(l==this.g)e:{const ne=eo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ne)&&(3!=ne||ti||this.g&&(this.h.h||this.g.fa()||al(this.g)))){this.I||4!=ne||7==e||Ti(),Po(this);var i=this.g.aa();this.Y=i;t:if(gs(this)){var u=al(this.g);l="";var p=u.length,_=4==eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ki(this),ko(this);var w="";break t}this.h.i=new it.TextDecoder}for(e=0;e<p;e++)this.h.h=!0,l+=this.h.i.decode(u[e],{stream:_&&e==p-1});u.splice(0,p),this.h.g+=l,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==i,function Gr(l,e,i,u,p,_,w){l.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+p+"]: "+e+"\n"+i+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.U,ne,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,B=this.g;if((O=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gn(O)){var z=O;break t}}z=null}if(!(i=z)){this.i=!1,this.o=3,jr(12),Ki(this),ko(this);break e}ai(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,el(this,i)}this.P?(da(this,ne,w),ti&&this.i&&3==ne&&(vi(this.S,this.T,"tick",this.hb),this.T.start())):(ai(this.j,this.m,w,null),el(this,w)),4==ne&&Ki(this),this.i&&!this.I&&(4==ne?ul(this.l,this):(this.i=!1,xo(this)))}else 400==i&&0<w.indexOf("Unknown SID")?(this.o=3,jr(12)):(this.o=0,jr(13)),Ki(this),ko(this)}}}catch{}},Ie.hb=function(){if(this.g){var l=eo(this.g),e=this.g.fa();this.C<e.length&&(Po(this),da(this,l,e),this.i&&4!=l&&xo(this))}},Ie.cancel=function(){this.I=!0,Ki(this)},Ie.gb=function(){this.B=null;const l=Date.now();0<=l-this.V?(function xa(l,e){l.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ti(),jr(17)),Ki(this),this.o=2,ko(this)):ha(this,this.V-l)};var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(l,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,l instanceof Fo){this.h=void 0!==e?e:l.h,fo(this,l.j),this.s=l.s,this.g=l.g,Pa(this,l.m),this.l=l.l,e=l.i;var i=new qi;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),ru(this,i),this.o=l.o}else l&&(i=String(l).match(tl))?(this.h=!!e,fo(this,i[1]||"",!0),this.s=Lo(i[2]||""),this.g=Lo(i[3]||"",!0),Pa(this,i[4]),this.l=Lo(i[5]||"",!0),ru(this,i[6]||"",!0),this.o=Lo(i[7]||"")):(this.h=!!e,this.i=new qi(null,this.h))}function Vs(l){return new Fo(l)}function fo(l,e,i){l.j=i?Lo(e,!0):e,l.j&&(l.j=l.j.replace(/:$/,""))}function Pa(l,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);l.m=e}else l.m=null}function ru(l,e,i){e instanceof qi?(l.i=e,function Yi(l,e){e&&!l.j&&(_s(l),l.i=null,l.g.forEach(function(i,u){var p=u.toLowerCase();u!=p&&(mr(this,u),Qo(this,p,i))},l)),l.j=e}(l.i,l.h)):(i||(e=Ns(e,iu)),l.i=new qi(e,l.h))}function Tr(l,e,i){l.i.set(e,i)}function Bi(l){return Tr(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Lo(l,e){return l?e?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ns(l,e,i){return"string"==typeof l?(l=encodeURI(l).replace(e,nl),i&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function nl(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Fo.prototype.toString=function(){var l=[],e=this.j;e&&l.push(Ns(e,Js,!0),":");var i=this.g;return(i||"file"==e)&&(l.push("//"),(e=this.s)&&l.push(Ns(e,Js,!0),"@"),l.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&l.push(":",String(i))),(i=this.l)&&(this.g&&"/"!=i.charAt(0)&&l.push("/"),l.push(Ns(i,"/"==i.charAt(0)?kl:Zo,!0))),(i=this.i.toString())&&l.push("?",i),(i=this.o)&&l.push("#",Ns(i,su)),l.join("")};var Js=/[#\/\?@]/g,Zo=/[#\?:]/g,kl=/[#\?]/g,iu=/[#\?@]/g,su=/#/g;function qi(l,e){this.h=this.g=null,this.i=l||null,this.j=!!e}function _s(l){l.g||(l.g=new Map,l.h=0,l.i&&function as(l,e){if(l){l=l.split("&");for(var i=0;i<l.length;i++){var u=l[i].indexOf("="),p=null;if(0<=u){var _=l[i].substring(0,u);p=l[i].substring(u+1)}else _=l[i];e(_,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(l.i,function(e,i){l.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function mr(l,e){_s(l),e=Ur(l,e),l.g.has(e)&&(l.i=null,l.h-=l.g.get(e).length,l.g.delete(e))}function rl(l,e){return _s(l),e=Ur(l,e),l.g.has(e)}function Qo(l,e,i){mr(l,e),0<i.length&&(l.i=null,l.g.set(Ur(l,e),wt(i)),l.h+=i.length)}function Ur(l,e){return e=String(e),l.j&&(e=e.toLowerCase()),e}function pi(l){this.l=l||ou,l=it.PerformanceNavigationTiming?0<(l=it.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(it.g&&it.g.Ga&&it.g.Ga()&&it.g.Ga().$b),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ie=qi.prototype).add=function(l,e){_s(this),this.i=null,l=Ur(this,l);var i=this.g.get(l);return i||this.g.set(l,i=[]),i.push(e),this.h+=1,this},Ie.forEach=function(l,e){_s(this),this.g.forEach(function(i,u){i.forEach(function(p){l.call(e,p,u,this)},this)},this)},Ie.oa=function(){_s(this);const l=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let u=0;u<e.length;u++){const p=l[u];for(let _=0;_<p.length;_++)i.push(e[u])}return i},Ie.W=function(l){_s(this);let e=[];if("string"==typeof l)rl(this,l)&&(e=e.concat(this.g.get(Ur(this,l))));else{l=Array.from(this.g.values());for(let i=0;i<l.length;i++)e=e.concat(l[i])}return e},Ie.set=function(l,e){return _s(this),this.i=null,rl(this,l=Ur(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[e]),this.h+=1,this},Ie.get=function(l,e){return l&&0<(l=this.W(l)).length?String(l[0]):e},Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var u=e[i];const _=encodeURIComponent(String(u)),w=this.W(u);for(u=0;u<w.length;u++){var p=_;""!==w[u]&&(p+="="+encodeURIComponent(String(w[u]))),l.push(p)}}return this.i=l.join("&")};var ou=10;function il(l){return!!l.h||!!l.g&&l.g.size>=l.j}function Gs(l){return l.h?1:l.g?l.g.size:0}function gi(l,e){return l.h?l.h==e:!!l.g&&l.g.has(e)}function fa(l,e){l.g?l.g.add(e):l.h=e}function sl(l,e){l.h&&l.h==e?l.h=null:l.g&&l.g.has(e)&&l.g.delete(e)}function Xs(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let e=l.i;for(const i of l.g.values())e=e.concat(i.D);return e}return wt(l.i)}function Zi(){}function ka(){this.g=new Zi}function Fl(l,e,i){const u=i||"";try{Gu(l,function(p,_){let w=p;Pt(p)&&(w=os(p)),e.push(u+_+"="+encodeURIComponent(w))})}catch(p){throw e.push(u+"type="+encodeURIComponent("_badmap")),p}}function go(l,e,i,u,p){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,p(u)}catch{}}function pa(l){this.l=l.ac||null,this.j=l.jb||!1}function Il(l,e){Bt.call(this),this.D=l,this.u=e,this.m=void 0,this.readyState=ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pi.prototype.cancel=function(){if(this.i=Xs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}},Zi.prototype.stringify=function(l){return it.JSON.stringify(l,void 0)},Zi.prototype.parse=function(l){return it.JSON.parse(l,void 0)},Et(pa,Be),pa.prototype.g=function(){return new Il(this.l,this.j)},pa.prototype.i=function(l){return function(){return l}}({}),Et(Il,Bt);var ga=0;function Ll(l){l.j.read().then(l.Ta.bind(l)).catch(l.ga.bind(l))}function Jo(l){l.readyState=4,l.l=null,l.j=null,l.A=null,Fa(l)}function Fa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}(Ie=Il.prototype).open=function(l,e){if(this.readyState!=ga)throw this.abort(),Error("Error reopening a connection");this.C=l,this.B=e,this.readyState=1,Fa(this)},Ie.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};l&&(e.body=l),(this.D||it).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jo(this)),this.readyState=ga},Ie.Wa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof it.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ll(this)}else l.text().then(this.Va.bind(this),this.ga.bind(this))},Ie.Ta=function(l){if(this.g){if(this.u&&l.value)this.response.push(l.value);else if(!this.u){var e=l.value?l.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!l.done}))&&(this.response=this.responseText+=e)}l.done?Jo(this):Fa(this),3==this.readyState&&Ll(this)}},Ie.Va=function(l){this.g&&(this.response=this.responseText=l,Jo(this))},Ie.Ua=function(l){this.g&&(this.response=l,Jo(this))},Ie.ga=function(){this.g&&Jo(this)},Ie.setRequestHeader=function(l,e){this.v.append(l,e)},Ie.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},Ie.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],e=this.h.entries();for(var i=e.next();!i.done;)l.push((i=i.value)[0]+": "+i[1]),i=e.next();return l.join("\r\n")},Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}});var mi=it.JSON.parse;function dt(l){Bt.call(this),this.headers=new Map,this.u=l||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ir,this.K=this.L=!1}Et(dt,Bt);var ir="",ol=/^https?$/i,mo=["POST","PUT"];function La(l,e){l.h=!1,l.g&&(l.l=!0,l.g.abort(),l.l=!1),l.j=e,l.m=5,ma(l),Ua(l)}function ma(l){l.D||(l.D=!0,Cn(l,"complete"),Cn(l,"error"))}function Qi(l){if(l.h&&typeof tt<"u"&&(!l.C[1]||4!=eo(l)||2!=l.aa()))if(l.v&&4==eo(l))yi(l.Ha,0,l);else if(Cn(l,"readystatechange"),4==eo(l)){l.h=!1;try{const O=l.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var u;if(u=0===O){var p=String(l.H).match(tl)[1]||null;if(!p&&it.self&&it.self.location){var _=it.self.location.protocol;p=_.substr(0,_.length-1)}u=!ol.test(p?p.toLowerCase():"")}i=u}if(i)Cn(l,"complete"),Cn(l,"success");else{l.m=6;try{var w=2<eo(l)?l.g.statusText:""}catch{w=""}l.j=w+" ["+l.aa()+"]",ma(l)}}finally{Ua(l)}}}function Ua(l,e){if(l.g){_a(l);const i=l.g,u=l.C[0]?vt:null;l.g=null,l.C=null,e||Cn(l,"ready");try{i.onreadystatechange=u}catch{}}}function _a(l){l.g&&l.K&&(l.g.ontimeout=null),l.A&&(it.clearTimeout(l.A),l.A=null)}function eo(l){return l.g?l.g.readyState:0}function al(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.J){case ir:case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ll(l){let e="";return Rt(l,function(i,u){e+=u,e+=":",e+=i,e+="\r\n"}),e}function Jr(l,e,i){e:{for(u in i){var u=!1;break e}u=!0}u||(i=ll(i),"string"==typeof l?null!=i&&encodeURIComponent(String(i)):Tr(l,e,i))}function Si(l,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[l]||e}function Xo(l){this.Ca=0,this.i=[],this.j=new br,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Si("failFast",!1,l),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Si("baseRetryDelayMs",5e3,l),this.bb=Si("retryDelaySeedMs",1e4,l),this.$a=Si("forwardChannelMaxRetries",2,l),this.ta=Si("forwardChannelRequestTimeoutMs",2e4,l),this.ra=l&&l.xmlHttpFactory||void 0,this.Da=l&&l.Zb||!1,this.J=void 0,this.H=l&&l.supportsCrossDomainXhr||!1,this.I="",this.h=new pi(l&&l.concurrentRequestLimit),this.Fa=new ka,this.O=l&&l.fastHandshake||!1,this.N=l&&l.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=l&&l.Xb||!1,l&&l.Aa&&this.j.Aa(),l&&l.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&l&&l.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ea(l){if(Uo(l),3==l.G){var e=l.U++,i=Vs(l.F);Tr(i,"SID",l.I),Tr(i,"RID",e),Tr(i,"TYPE","terminate"),_o(l,i),(e=new Lr(l,l.j,e,void 0)).K=2,e.v=Bi(Vs(i)),i=!1,it.navigator&&it.navigator.sendBeacon&&(i=it.navigator.sendBeacon(e.v.toString(),"")),!i&&it.Image&&((new Image).src=e.v,i=!0),i||(e.g=Cl(e.l,null),e.g.da(e.v)),e.F=Date.now(),xo(e)}ju(l)}function Ji(l){l.g&&(Va(l),l.g.cancel(),l.g=null)}function Uo(l){Ji(l),l.u&&(it.clearTimeout(l.u),l.u=null),Ga(l),l.h.cancel(),l.m&&("number"==typeof l.m&&it.clearTimeout(l.m),l.m=null)}function Ba(l){il(l.h)||l.m||(l.m=!0,No(l.Ja,l),l.C=0)}function ya(l,e){var i;i=e?e.m:l.U++;const u=Vs(l.F);Tr(u,"SID",l.I),Tr(u,"RID",i),Tr(u,"AID",l.T),_o(l,u),l.o&&l.s&&Jr(u,l.o,l.s),i=new Lr(l,l.j,i,l.C+1),null===l.o&&(i.H=l.s),e&&(l.i=e.D.concat(l.i)),e=va(l,i,1e3),i.setTimeout(Math.round(.5*l.ta)+Math.round(.5*l.ta*Math.random())),fa(l.h,i),Us(i,u,e)}function _o(l,e){l.ia&&Rt(l.ia,function(i,u){Tr(e,u,i)}),l.l&&Gu({},function(i,u){Tr(e,u,i)})}function va(l,e,i){i=Math.min(l.i.length,i);var u=l.l?st(l.l.Ra,l.l,l):null;e:{var p=l.i;let _=-1;for(;;){const w=["count="+i];-1==_?0<i?(_=p[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let O=!0;for(let B=0;B<i;B++){let z=p[B].h;const ne=p[B].g;if(z-=_,0>z)_=Math.max(0,p[B].h-100),O=!1;else try{Fl(ne,w,"req"+z+"_")}catch{u&&u(ne)}}if(O){u=w.join("&");break e}}}return l=l.i.splice(0,i),e.D=l,u}function yo(l){l.g||l.u||(l.Z=1,No(l.Ia,l),l.A=0)}function ba(l){return!(l.g||l.u||3<=l.A||(l.Z++,l.u=Os(st(l.Ia,l),au(l,l.A)),l.A++,0))}function Va(l){null!=l.B&&(it.clearTimeout(l.B),l.B=null)}function wa(l){l.g=new Lr(l,l.j,"rpc",l.Z),null===l.o&&(l.g.H=l.s),l.g.N=0;var e=Vs(l.sa);Tr(e,"RID","rpc"),Tr(e,"SID",l.I),Tr(e,"CI",l.L?"0":"1"),Tr(e,"AID",l.T),Tr(e,"TYPE","xmlhttp"),_o(l,e),l.o&&l.s&&Jr(e,l.o,l.s),l.J&&l.g.setTimeout(l.J);var i=l.g;l=l.ka,i.K=1,i.v=Bi(Vs(e)),i.s=null,i.P=!0,Xa(i,l)}function Ga(l){null!=l.v&&(it.clearTimeout(l.v),l.v=null)}function ul(l,e){var i=null;if(l.g==e){Ga(l),Va(l),l.g=null;var u=2}else{if(!gi(l.h,e))return;i=e.D,sl(l.h,e),u=1}if(0!=l.G)if(l.pa=e.Y,e.i)if(1==u){i=e.s?e.s.length:0,e=Date.now()-e.F;var p=l.C;Cn(u=Yo(),new bi(u,i)),Ba(l)}else yo(l);else if(3==(p=e.o)||0==p&&0<l.pa||!(1==u&&function Ul(l,e){return!(Gs(l.h)>=l.h.j-(l.m?1:0)||(l.m?(l.i=e.D.concat(l.i),0):1==l.G||2==l.G||l.C>=(l.Za?0:l.$a)||(l.m=Os(st(l.Ja,l,e),au(l,l.C)),l.C++,0)))}(l,e)||2==u&&ba(l)))switch(i&&0<i.length&&(e=l.h,e.i=e.i.concat(i)),p){case 1:vo(l,5);break;case 4:vo(l,10);break;case 3:vo(l,6);break;default:vo(l,2)}}function au(l,e){let i=l.Xa+Math.floor(Math.random()*l.bb);return l.l||(i*=2),i*e}function vo(l,e){if(l.j.info("Error code "+e),2==e){var i=null;l.l&&(i=null);var u=st(l.kb,l);i||(i=new Fo("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||fo(i,"https"),Bi(i)),function Dn(l,e){const i=new br;if(it.Image){const u=new Image;u.onload=kt(go,i,u,"TestLoadImage: loaded",!0,e),u.onerror=kt(go,i,u,"TestLoadImage: error",!1,e),u.onabort=kt(go,i,u,"TestLoadImage: abort",!1,e),u.ontimeout=kt(go,i,u,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=l}else e(!1)}(i.toString(),u)}else jr(2);l.G=0,l.l&&l.l.va(e),ju(l),Uo(l)}function ju(l){if(l.G=0,l.la=[],l.l){const e=Xs(l.h);(0!=e.length||0!=l.i.length)&&(En(l.la,e),En(l.la,l.i),l.h.i.length=0,wt(l.i),l.i.length=0),l.l.ua()}}function lu(l,e,i){var u=i instanceof Fo?Vs(i):new Fo(i,void 0);if(""!=u.g)e&&(u.g=e+"."+u.g),Pa(u,u.m);else{var p=it.location;u=p.protocol,e=e?e+"."+p.hostname:p.hostname,p=+p.port;var _=new Fo(null,void 0);u&&fo(_,u),e&&(_.g=e),p&&Pa(_,p),i&&(_.l=i),u=_}return e=l.za,(i=l.D)&&e&&Tr(u,i,e),Tr(u,"VER",l.ma),_o(l,u),u}function Cl(l,e,i){if(e&&!l.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dt(i&&l.Da&&!l.ra?new pa({jb:!0}):l.ra)).Ka(l.H),e}function Hu(){}function li(){if(Sn&&!(10<=Number(Zr)))throw Error("Environmental error: no available transport.")}function Xr(l,e){Bt.call(this),this.g=new Xo(e),this.l=l,this.h=e&&e.messageUrlParams||null,l=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.s=l,l=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(l?l["X-WebChannel-Content-Type"]=e.messageContentType:l={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(l?l["X-WebChannel-Client-Profile"]=e.ya:l={"X-WebChannel-Client-Profile":e.ya}),this.g.S=l,(l=e&&e.Yb)&&!Gn(l)&&(this.g.o=l),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gn(e)&&(this.g.D=e,null!==(l=this.h)&&e in l&&e in(l=this.h)&&delete l[e]),this.j=new ui(this)}function Hr(l){An.call(this);var e=l.__sm__;if(e){e:{for(const i in e){l=i;break e}l=void 0}(this.i=l)&&(l=this.i,e=null!==e&&l in e?e[l]:void 0),this.data=e}else this.data=l}function Bl(){wr.call(this),this.status=1}function ui(l){this.g=l}(Ie=dt.prototype).Ka=function(l){this.L=l},Ie.da=function(l,e,i,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+l);e=e?e.toUpperCase():"GET",this.H=l,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pn.g(),this.C=function ht(l){return l.h||(l.h=l.i())}(this.u?this.u:Pn),this.g.onreadystatechange=st(this.Ha,this);try{this.F=!0,this.g.open(e,String(l),!0),this.F=!1}catch(_){return void La(this,_)}if(l=i||"",i=new Map(this.headers),u)if(Object.getPrototypeOf(u)===Object.prototype)for(var p in u)i.set(p,u[p]);else{if("function"!=typeof u.keys||"function"!=typeof u.get)throw Error("Unknown input type for opt_headers: "+String(u));for(const _ of u.keys())i.set(_,u.get(_))}u=Array.from(i.keys()).find(_=>"content-type"==_.toLowerCase()),p=it.FormData&&l instanceof it.FormData,!(0<=$t(mo,e))||u||p||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of i)this.g.setRequestHeader(_,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_a(this),0<this.B&&((this.K=function Mi(l){return Sn&&function or(){return function tr(l){var e=rr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=l(9)}(function(){let l=0;const e=Wr(String(ni)).split("."),i=Wr("9").split("."),u=Math.max(e.length,i.length);for(let w=0;0==l&&w<u;w++){var p=e[w]||"",_=i[w]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==p[0].length&&0==_[0].length)break;l=Zn(0==p[1].length?0:parseInt(p[1],10),0==_[1].length?0:parseInt(_[1],10))||Zn(0==p[2].length,0==_[2].length)||Zn(p[2],_[2]),p=p[3],_=_[3]}while(0==l)}return 0<=l})}()&&"number"==typeof l.timeout&&void 0!==l.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=st(this.qa,this)):this.A=yi(this.qa,this.B,this)),this.v=!0,this.g.send(l),this.v=!1}catch(_){La(this,_)}},Ie.qa=function(){typeof tt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cn(this,"timeout"),this.abort(8))},Ie.abort=function(l){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=l||7,Cn(this,"complete"),Cn(this,"abort"),Ua(this))},Ie.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ua(this,!0)),dt.X.M.call(this)},Ie.Ha=function(){this.s||(this.F||this.v||this.l?Qi(this):this.fb())},Ie.fb=function(){Qi(this)},Ie.aa=function(){try{return 2<eo(this)?this.g.status:-1}catch{return-1}},Ie.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ie.Sa=function(l){if(this.g){var e=this.g.responseText;return l&&0==e.indexOf(l)&&(e=e.substring(l.length)),mi(e)}},Ie.Ea=function(){return this.m},Ie.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ie=Xo.prototype).ma=8,Ie.G=1,Ie.Ja=function(l){if(this.m)if(this.m=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const p=new Lr(this,this.j,l,void 0);let _=this.s;if(this.S&&(_?(_=ft(_),rn(_,this.S)):_=this.S),null!==this.o||this.N||(p.H=_,_=null),this.O)e:{for(var e=0,i=0;i<this.i.length;i++){var u=this.i[i];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(e+=u)){e=i;break e}if(4096===e||i===this.i.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=va(this,p,e),Tr(i=Vs(this.F),"RID",l),Tr(i,"CVER",22),this.D&&Tr(i,"X-HTTP-Session-Id",this.D),_o(this,i),_&&(this.N?e="headers="+encodeURIComponent(String(ll(_)))+"&"+e:this.o&&Jr(i,this.o,_)),fa(this.h,p),this.Ya&&Tr(i,"TYPE","init"),this.O?(Tr(i,"$req",e),Tr(i,"SID","null"),p.Z=!0,Us(p,i,null)):Us(p,i,e),this.G=2}}else 3==this.G&&(l?ya(this,l):0==this.i.length||il(this.h)||ya(this))},Ie.Ia=function(){if(this.u=null,wa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var l=2*this.P;this.j.info("BP detection timer enabled: "+l),this.B=Os(st(this.eb,this),l)}},Ie.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,jr(10),Ji(this),wa(this))},Ie.cb=function(){null!=this.v&&(this.v=null,Ji(this),ba(this),jr(19))},Ie.kb=function(l){l?(this.j.info("Successfully pinged google.com"),jr(2)):(this.j.info("Failed to ping google.com"),jr(1))},(Ie=Hu.prototype).xa=function(){},Ie.wa=function(){},Ie.va=function(){},Ie.ua=function(){},Ie.Ra=function(){},li.prototype.g=function(l,e){return new Xr(l,e)},Et(Xr,Bt),Xr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var l=this.g,e=this.l,i=this.h||void 0;jr(0),l.V=e,l.ia=i||{},l.L=l.Y,l.F=lu(l,null,l.V),Ba(l)},Xr.prototype.close=function(){ea(this.g)},Xr.prototype.u=function(l){var e=this.g;if("string"==typeof l){var i={};i.__data__=l,l=i}else this.v&&((i={}).__data__=os(l),l=i);e.i.push(new class{constructor(l,e){this.h=l,this.g=e}}(e.ab++,l)),3==e.G&&Ba(e)},Xr.prototype.M=function(){this.g.l=null,delete this.j,ea(this.g),delete this.g,Xr.X.M.call(this)},Et(Hr,An),Et(Bl,wr),Et(ui,Hu),ui.prototype.xa=function(){Cn(this.g,"a")},ui.prototype.wa=function(l){Cn(this.g,new Hr(l))},ui.prototype.va=function(l){Cn(this.g,new Bl)},ui.prototype.ua=function(){Cn(this.g,"b")},li.prototype.createWebChannel=li.prototype.g,Xr.prototype.send=Xr.prototype.u,Xr.prototype.open=Xr.prototype.m,Xr.prototype.close=Xr.prototype.close,Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,_e.COMPLETE="complete",Lt.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",Bt.prototype.listen=Bt.prototype.N,dt.prototype.listenOnce=dt.prototype.O,dt.prototype.getLastError=dt.prototype.Oa,dt.prototype.getLastErrorCode=dt.prototype.Ea,dt.prototype.getStatus=dt.prototype.aa,dt.prototype.getResponseJson=dt.prototype.Sa,dt.prototype.getResponseText=dt.prototype.fa,dt.prototype.send=dt.prototype.da,dt.prototype.setWithCredentials=dt.prototype.Ka;var Ic=Se.createWebChannelTransport=function(){return new li},ud=Se.getStatEventTarget=function(){return Yo()},Vl=Se.ErrorCode=Pe,uu=Se.EventType=_e,cl=Se.Event=As,Ea=Se.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},R=Se.FetchXmlHttpFactory=pa,$=Se.WebChannel=Lt,L=Se.XhrIo=dt;const J="@firebase/firestore";class ce{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ce.UNAUTHENTICATED=new ce(null),ce.GOOGLE_CREDENTIALS=new ce("google-credentials-uid"),ce.FIRST_PARTY=new ce("first-party-uid"),ce.MOCK_USER=new ce("mock-user");let Ve="9.18.0";const bt=new Xe.Yd("@firebase/firestore");function un(){return bt.logLevel}function lt(l,...e){if(bt.logLevel<=Xe.in.DEBUG){const i=e.map(zn);bt.debug(`Firestore (${Ve}): ${l}`,...i)}}function dn(l,...e){if(bt.logLevel<=Xe.in.ERROR){const i=e.map(zn);bt.error(`Firestore (${Ve}): ${l}`,...i)}}function jn(l,...e){if(bt.logLevel<=Xe.in.WARN){const i=e.map(zn);bt.warn(`Firestore (${Ve}): ${l}`,...i)}}function zn(l){if("string"==typeof l)return l;try{return JSON.stringify(l)}catch{return l}}function Ct(l="Unexpected state"){const e=`FIRESTORE (${Ve}) INTERNAL ASSERTION FAILED: `+l;throw dn(e),new Error(e)}function Ft(l,e){l||Ct()}function St(l,e){return l}const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends qe.ZR{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}class ys{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(ce.UNAUTHENTICATED))}shutdown(){}}class ja{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Bo{constructor(e){this.t=e,this.currentUser=ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){var u=this;let p=this.i;const _=z=>this.i!==p?(p=this.i,i(z)):Promise.resolve();let w=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Er,e.enqueueRetryable(()=>_(this.currentUser))};const O=()=>{const z=w;e.enqueueRetryable((0,ge.Z)(function*(){yield z.promise,yield _(u.currentUser)}))},B=z=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(z=>B(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?B(z):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Er)}},0),O()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(u=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(Ft("string"==typeof u.accessToken),new ys(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new ce(e)}}class Da{constructor(e,i,u,p){this.h=e,this.l=i,this.m=u,this.g=p,this.type="FirstParty",this.user=ce.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class cd{constructor(e,i,u,p){this.h=e,this.l=i,this.m=u,this.g=p}getToken(){return Promise.resolve(new Da(this.h,this.l,this.m,this.g))}start(e,i){e.enqueueRetryable(()=>i(ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $u{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,i){const u=_=>{null!=_.error&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.A;return this.A=_.token,lt("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?i(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>u(_))};const p=_=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>p(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?p(_):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(Ft("string"==typeof i.token),this.A=i.token,new Vo(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bo(l){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(l);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let u=0;u<l;u++)i[u]=Math.floor(256*Math.random());return i}class Tl{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let u="";for(;u.length<20;){const p=bo(40);for(let _=0;_<p.length;++_)u.length<20&&p[_]<i&&(u+=e.charAt(p[_]%e.length))}return u}}function On(l,e){return l<e?-1:l>e?1:0}function Ia(l,e,i){return l.length===e.length&&l.every((u,p)=>i(u,e[p]))}function du(l){return l+"\0"}class ar{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new _t(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new _t(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new _t(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _t(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ar.fromMillis(Date.now())}static fromDate(e){return ar.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),u=Math.floor(1e6*(e-1e3*i));return new ar(i,u)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?On(this.nanoseconds,e.nanoseconds):On(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gn(e)}static min(){return new gn(new ar(0,0))}static max(){return new gn(new ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ha{constructor(e,i,u){void 0===i?i=0:i>e.length&&Ct(),void 0===u?u=e.length-i:u>e.length-i&&Ct(),this.segments=e,this.offset=i,this.len=u}get length(){return this.len}isEqual(e){return 0===Ha.comparator(this,e)}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ha?e.forEach(u=>{i.push(u)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,u=this.limit();i<u;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const u=Math.min(e.length,i.length);for(let p=0;p<u;p++){const _=e.get(p),w=i.get(p);if(_<w)return-1;if(_>w)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class kn extends Ha{construct(e,i,u){return new kn(e,i,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const u of e){if(u.indexOf("//")>=0)throw new _t(Ke.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);i.push(...u.split("/").filter(p=>p.length>0))}return new kn(i)}static emptyPath(){return new kn([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Ha{construct(e,i,u){return new Hn(e,i,u)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hn(["__name__"])}static fromServerFormat(e){const i=[];let u="",p=0;const _=()=>{if(0===u.length)throw new _t(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(u),u=""};let w=!1;for(;p<e.length;){const O=e[p];if("\\"===O){if(p+1===e.length)throw new _t(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[p+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new _t(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);u+=B,p+=2}else"`"===O?(w=!w,p++):"."!==O||w?(u+=O,p++):(_(),p++)}if(_(),w)throw new _t(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(i)}static emptyPath(){return new Hn([])}}class zt{constructor(e){this.path=e}static fromPath(e){return new zt(kn.fromString(e))}static fromName(e){return new zt(kn.fromString(e).popFirst(5))}static empty(){return new zt(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return kn.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zt(new kn(e.slice()))}}class wo{constructor(e,i,u,p){this.indexId=e,this.collectionGroup=i,this.fields=u,this.indexState=p}}function vs(l){return l.fields.find(e=>2===e.kind)}function Vi(l){return l.fields.filter(e=>2!==e.kind)}wo.UNKNOWN_ID=-1;class Nr{constructor(e,i){this.fieldPath=e,this.kind=i}}class Gi{constructor(e,i){this.sequenceNumber=e,this.offset=i}static empty(){return new Gi(0,Oi.min())}}function zu(l,e){const i=l.toTimestamp().seconds,u=l.toTimestamp().nanoseconds+1,p=gn.fromTimestamp(1e9===u?new ar(i+1,0):new ar(i,u));return new Oi(p,zt.empty(),e)}function Wa(l){return new Oi(l.readTime,l.key,-1)}class Oi{constructor(e,i,u){this.readTime=e,this.documentKey=i,this.largestBatchId=u}static min(){return new Oi(gn.min(),zt.empty(),-1)}static max(){return new Oi(gn.max(),zt.empty(),-1)}}function to(l,e){let i=l.readTime.compareTo(e.readTime);return 0!==i?i:(i=zt.comparator(l.documentKey,e.documentKey),0!==i?i:On(l.largestBatchId,e.largestBatchId))}const Wu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class js{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hs(l){return Go.apply(this,arguments)}function Go(){return Go=(0,ge.Z)(function*(l){if(l.code!==Ke.FAILED_PRECONDITION||l.message!==Wu)throw l;lt("LocalStore","Unexpectedly lost primary lease")}),Go.apply(this,arguments)}class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new Qe((u,p)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(u,p)},this.catchCallback=_=>{this.wrapFailure(i,_).next(u,p)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof Qe?i:Qe.resolve(i)}catch(i){return Qe.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):Qe.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):Qe.reject(i)}static resolve(e){return new Qe((i,u)=>{i(e)})}static reject(e){return new Qe((i,u)=>{u(e)})}static waitFor(e){return new Qe((i,u)=>{let p=0,_=0,w=!1;e.forEach(O=>{++p,O.next(()=>{++_,w&&_===p&&i()},B=>u(B))}),w=!0,_===p&&i()})}static or(e){let i=Qe.resolve(!1);for(const u of e)i=i.next(p=>p?Qe.resolve(p):u());return i}static forEach(e,i){const u=[];return e.forEach((p,_)=>{u.push(i.call(this,p,_))}),this.waitFor(u)}static mapArray(e,i){return new Qe((u,p)=>{const _=e.length,w=new Array(_);let O=0;for(let B=0;B<_;B++){const z=B;i(e[z]).next(ne=>{w[z]=ne,++O,O===_&&u(w)},ne=>p(ne))}})}static doWhile(e,i){return new Qe((u,p)=>{const _=()=>{!0===e()?i().next(()=>{_()},p):u()};_()})}}class ta{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.P=new Er,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{i.error?this.P.reject(new Ku(e,i.error)):this.P.resolve()},this.transaction.onerror=u=>{const p=hu(u.target.error);this.P.reject(new Ku(e,p))}}static open(e,i,u,p){try{return new ta(i,e.transaction(p,u))}catch(_){throw new Ku(i,_)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const i=this.transaction.objectStore(e);return new $r(i)}}class Eo{constructor(e,i,u){this.name=e,this.version=i,this.S=u,12.2===Eo.D((0,qe.z$)())&&dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return lt("SimpleDb","Removing database:",e),Ta(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,qe.hl)())return!1;if(Eo.N())return!0;const e=(0,qe.z$)(),i=Eo.D(e),u=0<i&&i<10,p=Eo.k(e),_=0<p&&p<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||u||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,i){return e.store(i)}static D(e){const i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(u)}static k(e){const i=e.match(/Android ([\d.]+)/i),u=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(u)}O(e){var i=this;return(0,ge.Z)(function*(){return i.db||(lt("SimpleDb","Opening database:",i.name),i.db=yield new Promise((u,p)=>{const _=indexedDB.open(i.name,i.version);_.onsuccess=w=>{u(w.target.result)},_.onblocked=()=>{p(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const O=w.target.error;p("VersionError"===O.name?new _t(Ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new _t(Ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Ku(e,O))},_.onupgradeneeded=w=>{lt("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',w.oldVersion),i.S.F(w.target.result,_.transaction,w.oldVersion,i.version).next(()=>{lt("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.B&&(i.db.onversionchange=u=>i.B(u)),i.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,u,p){var _=this;return(0,ge.Z)(function*(){const w="readonly"===i;let O=0;for(;;){++O;try{_.db=yield _.O(e);const B=ta.open(_.db,e,w?"readonly":"readwrite",u),z=p(B).next(ne=>(B.V(),ne)).catch(ne=>(B.abort(ne),Qe.reject(ne))).toPromise();return z.catch(()=>{}),yield B.v,z}catch(B){const z=B,ne="FirebaseError"!==z.name&&O<3;if(lt("SimpleDb","Transaction failed with error:",z.message,"Retrying:",ne),_.close(),!ne)return Promise.reject(z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ca{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Ta(this.q.delete())}}class Ku extends _t{constructor(e,i){super(Ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function bs(l){return"IndexedDbTransactionError"===l.name}class $r{constructor(e){this.store=e}put(e,i){let u;return void 0!==i?(lt("SimpleDb","PUT",this.store.name,e,i),u=this.store.put(i,e)):(lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),u=this.store.put(e)),Ta(u)}add(e){return lt("SimpleDb","ADD",this.store.name,e,e),Ta(this.store.add(e))}get(e){return Ta(this.store.get(e)).next(i=>(void 0===i&&(i=null),lt("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return lt("SimpleDb","DELETE",this.store.name,e),Ta(this.store.delete(e))}count(){return lt("SimpleDb","COUNT",this.store.name),Ta(this.store.count())}W(e,i){const u=this.options(e,i);if(u.index||"function"!=typeof this.store.getAll){const p=this.cursor(u),_=[];return this.H(p,(w,O)=>{_.push(O)}).next(()=>_)}{const p=this.store.getAll(u.range);return new Qe((_,w)=>{p.onerror=O=>{w(O.target.error)},p.onsuccess=O=>{_(O.target.result)}})}}J(e,i){const u=this.store.getAll(e,null===i?void 0:i);return new Qe((p,_)=>{u.onerror=w=>{_(w.target.error)},u.onsuccess=w=>{p(w.target.result)}})}Y(e,i){lt("SimpleDb","DELETE ALL",this.store.name);const u=this.options(e,i);u.Z=!1;const p=this.cursor(u);return this.H(p,(_,w,O)=>O.delete())}X(e,i){let u;i?u=e:(u={},i=e);const p=this.cursor(u);return this.H(p,i)}tt(e){const i=this.cursor({});return new Qe((u,p)=>{i.onerror=_=>{const w=hu(_.target.error);p(w)},i.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(O=>{O?w.continue():u()}):u()}})}H(e,i){const u=[];return new Qe((p,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const O=w.target.result;if(!O)return void p();const B=new Ca(O),z=i(O.primaryKey,O.value,B);if(z instanceof Qe){const ne=z.catch(be=>(B.done(),Qe.reject(be)));u.push(ne)}B.isDone?p():null===B.G?O.continue():O.continue(B.G)}}).next(()=>Qe.waitFor(u))}options(e,i){let u;return void 0!==e&&("string"==typeof e?u=e:i=e),{index:u,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){const u=this.store.index(e.index);return e.Z?u.openKeyCursor(e.range,i):u.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}function Ta(l){return new Qe((e,i)=>{l.onsuccess=u=>{e(u.target.result)},l.onerror=u=>{const p=hu(u.target.error);i(p)}})}let _h=!1;function hu(l){const e=Eo.D((0,qe.z$)());if(e>=12.2&&e<13){const i="An internal error was encountered in the Indexed Database server";if(l.message.indexOf(i)>=0){const u=new _t("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _h||(_h=!0,setTimeout(()=>{throw u},0)),u}}return l}class hl{constructor(e,i){this.asyncQueue=e,this.et=i,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var i=this;lt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){i.task=null;try{lt("IndexBackiller",`Documents written: ${yield i.et.st()}`)}catch(u){bs(u)?lt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",u):yield Hs(u)}yield i.nt(6e4)}))}}class dd{constructor(e,i){this.localStore=e,this.persistence=i}st(e=50){var i=this;return(0,ge.Z)(function*(){return i.persistence.runTransaction("Backfill Indexes","readwrite-primary",u=>i.it(u,e))})()}it(e,i){const u=new Set;let p=i,_=!0;return Qe.doWhile(()=>!0===_&&p>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!u.has(w))return lt("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,p).next(O=>{p-=O,u.add(w)});_=!1})).next(()=>i-p)}rt(e,i,u){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,i).next(p=>this.localStore.localDocuments.getNextDocuments(e,i,p,u).next(_=>{const w=_.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(p,_)).next(O=>(lt("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,i,O))).next(()=>w.size)}))}ot(e,i){let u=e;return i.changes.forEach((p,_)=>{const w=Wa(_);to(w,u)>0&&(u=w)}),new Oi(u.readTime,u.documentKey,Math.max(i.batchId,e.largestBatchId))}}let Xi=(()=>{class l{constructor(i,u){this.previousValue=i,u&&(u.sequenceNumberHandler=p=>this.ut(p),this.ct=p=>u.writeSequenceNumber(p))}ut(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.ct&&this.ct(i),i}}return l.at=-1,l})();class fu{constructor(e,i,u,p,_,w,O,B){this.databaseId=e,this.appId=i,this.persistenceKey=u,this.host=p,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=O,this.useFetchStreams=B}}class qr{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new qr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qr&&e.projectId===this.projectId&&e.database===this.database}}function Sl(l){let e=0;for(const i in l)Object.prototype.hasOwnProperty.call(l,i)&&e++;return e}function no(l,e){for(const i in l)Object.prototype.hasOwnProperty.call(l,i)&&e(i,l[i])}function Al(l){for(const e in l)if(Object.prototype.hasOwnProperty.call(l,e))return!1;return!0}function Ri(l){return null==l}function ro(l){return 0===l&&1/l==-1/0}function pu(l){return"number"==typeof l&&Number.isInteger(l)&&!ro(l)&&l<=Number.MAX_SAFE_INTEGER&&l>=Number.MIN_SAFE_INTEGER}class C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class E{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(u){try{return atob(u)}catch(p){throw p instanceof DOMException?new C("Invalid base64 string: "+p):p}}(e);return new E(i)}static fromUint8Array(e){const i=function(u){let p="";for(let _=0;_<u.length;++_)p+=String.fromCharCode(u[_]);return p}(e);return new E(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let u=0;u<e.length;u++)i[u]=e.charCodeAt(u);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return On(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}E.EMPTY_BYTE_STRING=new E("");const x=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function V(l){if(Ft(!!l),"string"==typeof l){let e=0;const i=x.exec(l);if(Ft(!!i),i[1]){let p=i[1];p=(p+"000000000").substr(0,9),e=Number(p)}const u=new Date(l);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:K(l.seconds),nanos:K(l.nanos)}}function K(l){return"number"==typeof l?l:"string"==typeof l?Number(l):0}function ee(l){return"string"==typeof l?E.fromBase64String(l):E.fromUint8Array(l)}function Ne(l){var e,i;return"server_timestamp"===(null===(i=((null===(e=l?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function yt(l){const e=l.mapValue.fields.__previous_value__;return Ne(e)?yt(e):e}function Yt(l){const e=V(l.mapValue.fields.__local_write_time__.timestampValue);return new ar(e.seconds,e.nanos)}const qt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qn={nullValue:"NULL_VALUE"};function ei(l){return"nullValue"in l?0:"booleanValue"in l?1:"integerValue"in l||"doubleValue"in l?2:"timestampValue"in l?3:"stringValue"in l?5:"bytesValue"in l?6:"referenceValue"in l?7:"geoPointValue"in l?8:"arrayValue"in l?9:"mapValue"in l?Ne(l)?4:Ot(l)?9007199254740991:10:Ct()}function _i(l,e){if(l===e)return!0;const i=ei(l);if(i!==ei(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return l.booleanValue===e.booleanValue;case 4:return Yt(l).isEqual(Yt(e));case 3:return function(u,p){if("string"==typeof u.timestampValue&&"string"==typeof p.timestampValue&&u.timestampValue.length===p.timestampValue.length)return u.timestampValue===p.timestampValue;const _=V(u.timestampValue),w=V(p.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(l,e);case 5:return l.stringValue===e.stringValue;case 6:return p=e,ee(l.bytesValue).isEqual(ee(p.bytesValue));case 7:return l.referenceValue===e.referenceValue;case 8:return function(u,p){return K(u.geoPointValue.latitude)===K(p.geoPointValue.latitude)&&K(u.geoPointValue.longitude)===K(p.geoPointValue.longitude)}(l,e);case 2:return function(u,p){if("integerValue"in u&&"integerValue"in p)return K(u.integerValue)===K(p.integerValue);if("doubleValue"in u&&"doubleValue"in p){const _=K(u.doubleValue),w=K(p.doubleValue);return _===w?ro(_)===ro(w):isNaN(_)&&isNaN(w)}return!1}(l,e);case 9:return Ia(l.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:return function(u,p){const _=u.mapValue.fields||{},w=p.mapValue.fields||{};if(Sl(_)!==Sl(w))return!1;for(const O in _)if(_.hasOwnProperty(O)&&(void 0===w[O]||!_i(_[O],w[O])))return!1;return!0}(l,e);default:return Ct()}var p}function $s(l,e){return void 0!==(l.values||[]).find(i=>_i(i,e))}function zs(l,e){if(l===e)return 0;const i=ei(l),u=ei(e);if(i!==u)return On(i,u);switch(i){case 0:case 9007199254740991:return 0;case 1:return On(l.booleanValue,e.booleanValue);case 2:return function(p,_){const w=K(p.integerValue||p.doubleValue),O=K(_.integerValue||_.doubleValue);return w<O?-1:w>O?1:w===O?0:isNaN(w)?isNaN(O)?0:-1:1}(l,e);case 3:return Ws(l.timestampValue,e.timestampValue);case 4:return Ws(Yt(l),Yt(e));case 5:return On(l.stringValue,e.stringValue);case 6:return function(p,_){const w=ee(p),O=ee(_);return w.compareTo(O)}(l.bytesValue,e.bytesValue);case 7:return function(p,_){const w=p.split("/"),O=_.split("/");for(let B=0;B<w.length&&B<O.length;B++){const z=On(w[B],O[B]);if(0!==z)return z}return On(w.length,O.length)}(l.referenceValue,e.referenceValue);case 8:return function(p,_){const w=On(K(p.latitude),K(_.latitude));return 0!==w?w:On(K(p.longitude),K(_.longitude))}(l.geoPointValue,e.geoPointValue);case 9:return function(p,_){const w=p.values||[],O=_.values||[];for(let B=0;B<w.length&&B<O.length;++B){const z=zs(w[B],O[B]);if(z)return z}return On(w.length,O.length)}(l.arrayValue,e.arrayValue);case 10:return function(p,_){if(p===qt.mapValue&&_===qt.mapValue)return 0;if(p===qt.mapValue)return 1;if(_===qt.mapValue)return-1;const w=p.fields||{},O=Object.keys(w),B=_.fields||{},z=Object.keys(B);O.sort(),z.sort();for(let ne=0;ne<O.length&&ne<z.length;++ne){const be=On(O[ne],z[ne]);if(0!==be)return be;const Le=zs(w[O[ne]],B[z[ne]]);if(0!==Le)return Le}return On(O.length,z.length)}(l.mapValue,e.mapValue);default:throw Ct()}}function Ws(l,e){if("string"==typeof l&&"string"==typeof e&&l.length===e.length)return On(l,e);const i=V(l),u=V(e),p=On(i.seconds,u.seconds);return 0!==p?p:On(i.nanos,u.nanos)}function Ol(l){return pl(l)}function pl(l){return"nullValue"in l?"null":"booleanValue"in l?""+l.booleanValue:"integerValue"in l?""+l.integerValue:"doubleValue"in l?""+l.doubleValue:"timestampValue"in l?function(u){const p=V(u);return`time(${p.seconds},${p.nanos})`}(l.timestampValue):"stringValue"in l?l.stringValue:"bytesValue"in l?ee(l.bytesValue).toBase64():"referenceValue"in l?zt.fromName(l.referenceValue).toString():"geoPointValue"in l?`geo(${(e=l.geoPointValue).latitude},${e.longitude})`:"arrayValue"in l?function(u){let p="[",_=!0;for(const w of u.values||[])_?_=!1:p+=",",p+=pl(w);return p+"]"}(l.arrayValue):"mapValue"in l?function(u){const p=Object.keys(u.fields||{}).sort();let _="{",w=!0;for(const O of p)w?w=!1:_+=",",_+=`${O}:${pl(u.fields[O])}`;return _+"}"}(l.mapValue):Ct();var e}function jo(l,e){return{referenceValue:`projects/${l.projectId}/databases/${l.database}/documents/${e.path.canonicalString()}`}}function F(l){return!!l&&"integerValue"in l}function G(l){return!!l&&"arrayValue"in l}function Z(l){return!!l&&"nullValue"in l}function fe(l){return!!l&&"doubleValue"in l&&isNaN(Number(l.doubleValue))}function ke(l){return!!l&&"mapValue"in l}function $e(l){if(l.geoPointValue)return{geoPointValue:Object.assign({},l.geoPointValue)};if(l.timestampValue&&"object"==typeof l.timestampValue)return{timestampValue:Object.assign({},l.timestampValue)};if(l.mapValue){const e={mapValue:{fields:{}}};return no(l.mapValue.fields,(i,u)=>e.mapValue.fields[i]=$e(u)),e}if(l.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(l.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=$e(l.arrayValue.values[i]);return e}return Object.assign({},l)}function Ot(l){return"__max__"===(((l.mapValue||{}).fields||{}).__type__||{}).stringValue}function hn(l){return"nullValue"in l?qn:"booleanValue"in l?{booleanValue:!1}:"integerValue"in l||"doubleValue"in l?{doubleValue:NaN}:"timestampValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in l?{stringValue:""}:"bytesValue"in l?{bytesValue:""}:"referenceValue"in l?jo(qr.empty(),zt.empty()):"geoPointValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in l?{arrayValue:{}}:"mapValue"in l?{mapValue:{}}:Ct()}function bn(l){return"nullValue"in l?{booleanValue:!1}:"booleanValue"in l?{doubleValue:NaN}:"integerValue"in l||"doubleValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in l?{stringValue:""}:"stringValue"in l?{bytesValue:""}:"bytesValue"in l?jo(qr.empty(),zt.empty()):"referenceValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in l?{arrayValue:{}}:"arrayValue"in l?{mapValue:{}}:"mapValue"in l?qt:Ct()}function Tn(l,e){const i=zs(l.value,e.value);return 0!==i?i:l.inclusive&&!e.inclusive?-1:!l.inclusive&&e.inclusive?1:0}function Qn(l,e){const i=zs(l.value,e.value);return 0!==i?i:l.inclusive&&!e.inclusive?1:!l.inclusive&&e.inclusive?-1:0}class wn{constructor(e,i){this.position=e,this.inclusive=i}}function Ho(l,e,i){let u=0;for(let p=0;p<l.position.length;p++){const _=e[p],w=l.position[p];if(u=_.field.isKeyField()?zt.comparator(zt.fromName(w.referenceValue),i.key):zs(w,i.data.field(_.field)),"desc"===_.dir&&(u*=-1),0!==u)break}return u}function ws(l,e){if(null===l)return null===e;if(null===e||l.inclusive!==e.inclusive||l.position.length!==e.position.length)return!1;for(let i=0;i<l.position.length;i++)if(!_i(l.position[i],e.position[i]))return!1;return!0}class jl{}class dr extends jl{constructor(e,i,u){super(),this.field=e,this.op=i,this.value=u}static create(e,i,u){return e.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(e,i,u):new Ff(e,i,u):"array-contains"===i?new Tc(e,u):"in"===i?new Ym(e,u):"not-in"===i?new Zy(e,u):"array-contains-any"===i?new Lf(e,u):new dr(e,i,u)}static createKeyFieldInFilter(e,i,u){return"in"===i?new Yy(e,u):new bh(e,u)}matches(e){const i=e.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(zs(i,this.value)):null!==i&&ei(this.value)===ei(i)&&this.matchesComparison(zs(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Mr extends jl{constructor(e,i){super(),this.filters=e,this.op=i,this.ft=null}static create(e,i){return new Mr(e,i)}matches(e){return Ms(this)?void 0===this.filters.find(i=>!i.matches(e)):void 0!==this.filters.find(i=>i.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(i=>i.isInequality());return null!==e?e.field:null}dt(e){for(const i of this.getFlattenedFilters())if(e(i))return i;return null}}function Ms(l){return"and"===l.op}function na(l){return"or"===l.op}function Cc(l){return hd(l)&&Ms(l)}function hd(l){for(const e of l.filters)if(e instanceof Mr)return!1;return!0}function yh(l){if(l instanceof dr)return l.field.canonicalString()+l.op.toString()+Ol(l.value);if(Cc(l))return l.filters.map(e=>yh(e)).join(",");{const e=l.filters.map(i=>yh(i)).join(",");return`${l.op}(${e})`}}function vh(l,e){return l instanceof dr?(i=l,(u=e)instanceof dr&&i.op===u.op&&i.field.isEqual(u.field)&&_i(i.value,u.value)):l instanceof Mr?function(i,u){return u instanceof Mr&&i.op===u.op&&i.filters.length===u.filters.length&&i.filters.reduce((p,_,w)=>p&&vh(_,u.filters[w]),!0)}(l,e):void Ct();var i,u}function kf(l,e){const i=l.filters.concat(e);return Mr.create(i,l.op)}function qm(l){return l instanceof dr?`${(e=l).field.canonicalString()} ${e.op} ${Ol(e.value)}`:l instanceof Mr?function(e){return e.op.toString()+" {"+e.getFilters().map(qm).join(" ,")+"}"}(l):"Filter";var e}class Ff extends dr{constructor(e,i,u){super(e,i,u),this.key=zt.fromName(u.referenceValue)}matches(e){const i=zt.comparator(e.key,this.key);return this.matchesComparison(i)}}class Yy extends dr{constructor(e,i){super(e,"in",i),this.keys=tg(0,i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class bh extends dr{constructor(e,i){super(e,"not-in",i),this.keys=tg(0,i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function tg(l,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(u=>zt.fromName(u.referenceValue))}class Tc extends dr{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return G(i)&&$s(i.arrayValue,this.value)}}class Ym extends dr{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return null!==i&&$s(this.value.arrayValue,i)}}class Zy extends dr{constructor(e,i){super(e,"not-in",i)}matches(e){if($s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return null!==i&&!$s(this.value.arrayValue,i)}}class Lf extends dr{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!G(i)||!i.arrayValue.values)&&i.arrayValue.values.some(u=>$s(this.value.arrayValue,u))}}class fd{constructor(e,i="asc"){this.field=e,this.dir=i}}function Qy(l,e){return l.dir===e.dir&&l.field.isEqual(e.field)}class ls{constructor(e,i){this.comparator=e,this.root=i||Do.EMPTY}insert(e,i){return new ls(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Do.BLACK,null,null))}remove(e){return new ls(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Do.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const u=this.comparator(e,i.key);if(0===u)return i.value;u<0?i=i.left:u>0&&(i=i.right)}return null}indexOf(e){let i=0,u=this.root;for(;!u.isEmpty();){const p=this.comparator(e,u.key);if(0===p)return i+u.left.size;p<0?u=u.left:(i+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,u)=>(e(i,u),!1))}toString(){const e=[];return this.inorderTraversal((i,u)=>(e.push(`${i}:${u}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,i,u,p){this.isReverse=p,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=i?u(e.key,i):1,i&&p&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Do{constructor(e,i,u,p,_){this.key=e,this.value=i,this.color=u??Do.RED,this.left=p??Do.EMPTY,this.right=_??Do.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,u,p,_){return new Do(e??this.key,i??this.value,u??this.color,p??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,u){let p=this;const _=u(e,p.key);return p=_<0?p.copy(null,null,null,p.left.insert(e,i,u),null):0===_?p.copy(null,i,null,null,null):p.copy(null,null,null,null,p.right.insert(e,i,u)),p.fixUp()}removeMin(){if(this.left.isEmpty())return Do.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let u,p=this;if(i(e,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(e,i),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===i(e,p.key)){if(p.right.isEmpty())return Do.EMPTY;u=p.right.min(),p=p.copy(u.key,u.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(e,i))}return p.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Do.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Do.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}Do.EMPTY=null,Do.RED=!0,Do.BLACK=!1,Do.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(l,e,i,u,p){return this}insert(l,e,i){return new Do(l,e)}remove(l,e){return this}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ci{constructor(e){this.comparator=e,this.data=new ls(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,u)=>(e(i),!1))}forEachInRange(e,i){const u=this.data.getIteratorFrom(e[0]);for(;u.hasNext();){const p=u.getNext();if(this.comparator(p.key,e[1])>=0)return;i(p.key)}}forEachWhile(e,i){let u;for(u=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Uf(this.data.getIterator())}getIteratorFrom(e){return new Uf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(u=>{i=i.add(u)}),i}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const i=this.data.getIterator(),u=e.data.getIterator();for(;i.hasNext();){const p=i.getNext().key,_=u.getNext().key;if(0!==this.comparator(p,_))return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new ci(this.comparator);return i.data=e,i}}class Uf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gu(l){return l.hasNext()?l.getNext():void 0}class $o{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new $o([])}unionWith(e){let i=new ci(Hn.comparator);for(const u of this.fields)i=i.add(u);for(const u of e)i=i.add(u);return new $o(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(i,u)=>i.isEqual(u))}}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let u=0;u<e.length-1;++u)if(i=(i.mapValue.fields||{})[e.get(u)],!ke(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=$e(i)}setAll(e){let i=Hn.emptyPath(),u={},p=[];e.forEach((w,O)=>{if(!i.isImmediateParentOf(O)){const B=this.getFieldsMap(i);this.applyChanges(B,u,p),u={},p=[],i=O.popLast()}w?u[O.lastSegment()]=$e(w):p.push(O.lastSegment())});const _=this.getFieldsMap(i);this.applyChanges(_,u,p)}delete(e){const i=this.field(e.popLast());ke(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let u=0;u<e.length;++u){let p=i.mapValue.fields[e.get(u)];ke(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},i.mapValue.fields[e.get(u)]=p),i=p}return i.mapValue.fields}applyChanges(e,i,u){no(i,(p,_)=>e[p]=_);for(const p of u)delete e[p]}clone(){return new Es($e(this.value))}}function Bf(l){const e=[];return no(l.fields,(i,u)=>{const p=new Hn([i]);if(ke(u)){const _=Bf(u.mapValue).fields;if(0===_.length)e.push(p);else for(const w of _)e.push(p.child(w))}else e.push(p)}),new $o(e)}class Rr{constructor(e,i,u,p,_,w,O){this.key=e,this.documentType=i,this.version=u,this.readTime=p,this.createTime=_,this.data=w,this.documentState=O}static newInvalidDocument(e){return new Rr(e,0,gn.min(),gn.min(),gn.min(),Es.empty(),0)}static newFoundDocument(e,i,u,p){return new Rr(e,1,i,gn.min(),u,p,0)}static newNoDocument(e,i){return new Rr(e,2,i,gn.min(),gn.min(),Es.empty(),0)}static newUnknownDocument(e,i){return new Rr(e,3,i,gn.min(),gn.min(),Es.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zm{constructor(e,i=null,u=[],p=[],_=null,w=null,O=null){this.path=e,this.collectionGroup=i,this.orderBy=u,this.filters=p,this.limit=_,this.startAt=w,this.endAt=O,this._t=null}}function Vf(l,e=null,i=[],u=[],p=null,_=null,w=null){return new Zm(l,e,i,u,p,_,w)}function Hl(l){const e=St(l);if(null===e._t){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(u=>yh(u)).join(","),i+="|ob:",i+=e.orderBy.map(u=>{return(p=u).field.canonicalString()+p.dir;var p}).join(","),Ri(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(u=>Ol(u)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(u=>Ol(u)).join(",")),e._t=i}return e._t}function Sc(l,e){if(l.limit!==e.limit||l.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<l.orderBy.length;i++)if(!Qy(l.orderBy[i],e.orderBy[i]))return!1;if(l.filters.length!==e.filters.length)return!1;for(let i=0;i<l.filters.length;i++)if(!vh(l.filters[i],e.filters[i]))return!1;return l.collectionGroup===e.collectionGroup&&!!l.path.isEqual(e.path)&&!!ws(l.startAt,e.startAt)&&ws(l.endAt,e.endAt)}function mu(l){return zt.isDocumentKey(l.path)&&null===l.collectionGroup&&0===l.filters.length}function wh(l,e){return l.filters.filter(i=>i instanceof dr&&i.field.isEqual(e))}function Gf(l,e,i){let u=qn,p=!0;for(const _ of wh(l,e)){let w=qn,O=!0;switch(_.op){case"<":case"<=":w=hn(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,O=!1;break;case"!=":case"not-in":w=qn}Tn({value:u,inclusive:p},{value:w,inclusive:O})<0&&(u=w,p=O)}if(null!==i)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=i.position[_];Tn({value:u,inclusive:p},{value:w,inclusive:i.inclusive})<0&&(u=w,p=i.inclusive);break}return{value:u,inclusive:p}}function ng(l,e,i){let u=qt,p=!0;for(const _ of wh(l,e)){let w=qt,O=!0;switch(_.op){case">=":case">":w=bn(_.value),O=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,O=!1;break;case"!=":case"not-in":w=qt}Qn({value:u,inclusive:p},{value:w,inclusive:O})>0&&(u=w,p=O)}if(null!==i)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=i.position[_];Qn({value:u,inclusive:p},{value:w,inclusive:i.inclusive})>0&&(u=w,p=i.inclusive);break}return{value:u,inclusive:p}}class qa{constructor(e,i=null,u=[],p=[],_=null,w="F",O=null,B=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=u,this.filters=p,this.limit=_,this.limitType=w,this.startAt=O,this.endAt=B,this.wt=null,this.gt=null}}function rg(l,e,i,u,p,_,w,O){return new qa(l,e,i,u,p,_,w,O)}function Yu(l){return new qa(l)}function Io(l){return 0===l.filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())}function gd(l){return l.explicitOrderBy.length>0?l.explicitOrderBy[0].field:null}function md(l){for(const e of l.filters){const i=e.getFirstInequalityField();if(null!==i)return i}return null}function _d(l){return null!==l.collectionGroup}function es(l){const e=St(l);if(null===e.wt){e.wt=[];const i=md(e),u=gd(e);if(null!==i&&null===u)i.isKeyField()||e.wt.push(new fd(i)),e.wt.push(new fd(Hn.keyField(),"asc"));else{let p=!1;for(const _ of e.explicitOrderBy)e.wt.push(_),_.field.isKeyField()&&(p=!0);if(!p){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new fd(Hn.keyField(),_))}}}return e.wt}function Rs(l){const e=St(l);if(!e.gt)if("F"===e.limitType)e.gt=Vf(e.path,e.collectionGroup,es(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const _ of es(e))i.push(new fd(_.field,"desc"===_.dir?"asc":"desc"));const u=e.endAt?new wn(e.endAt.position,e.endAt.inclusive):null,p=e.startAt?new wn(e.startAt.position,e.startAt.inclusive):null;e.gt=Vf(e.path,e.collectionGroup,i,e.filters,e.limit,u,p)}return e.gt}function yd(l,e){e.getFirstInequalityField(),md(l);const i=l.filters.concat([e]);return new qa(l.path,l.collectionGroup,l.explicitOrderBy.slice(),i,l.limit,l.limitType,l.startAt,l.endAt)}function vd(l,e,i){return new qa(l.path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),e,i,l.startAt,l.endAt)}function Eh(l,e){return Sc(Rs(l),Rs(e))&&l.limitType===e.limitType}function A(l){return`${Hl(Rs(l))}|lt:${l.limitType}`}function v(l){return`Query(target=${function(e){let i=e.path.canonicalString();return null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(u=>qm(u)).join(", ")}]`),Ri(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(u=>{return`${(p=u).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(u=>Ol(u)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(u=>Ol(u)).join(",")),`Target(${i})`}(Rs(l))}; limitType=${l.limitType})`}function b(l,e){return e.isFoundDocument()&&function(i,u){const p=u.key.path;return null!==i.collectionGroup?u.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(p):zt.isDocumentKey(i.path)?i.path.isEqual(p):i.path.isImmediateParentOf(p)}(l,e)&&function(i,u){for(const p of es(i))if(!p.field.isKeyField()&&null===u.data.field(p.field))return!1;return!0}(l,e)&&function(i,u){for(const p of i.filters)if(!p.matches(u))return!1;return!0}(l,e)&&(u=e,!((i=l).startAt&&!function(p,_,w){const O=Ho(p,_,w);return p.inclusive?O<=0:O<0}(i.startAt,es(i),u)||i.endAt&&!function(p,_,w){const O=Ho(p,_,w);return p.inclusive?O>=0:O>0}(i.endAt,es(i),u)));var i,u}function M(l){return l.collectionGroup||(l.path.length%2==1?l.path.lastSegment():l.path.get(l.path.length-2))}function q(l){return(e,i)=>{let u=!1;for(const p of es(l)){const _=se(p,e,i);if(0!==_)return _;u=u||p.field.isKeyField()}return 0}}function se(l,e,i){const u=l.field.isKeyField()?zt.comparator(e.key,i.key):function(p,_,w){const O=_.data.field(p),B=w.data.field(p);return null!==O&&null!==B?zs(O,B):Ct()}(l.field,e,i);switch(l.dir){case"asc":return u;case"desc":return-1*u;default:return Ct()}}function je(l,e){if(l.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ro(e)?"-0":e}}function At(l){return{integerValue:""+l}}function an(l,e){return pu(e)?At(e):je(l,e)}class In{constructor(){this._=void 0}}function nr(l,e,i){return l instanceof zo?function(u,p){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return p&&(_.fields.__previous_value__=p),{mapValue:_}}(i,e):l instanceof Ya?Dh(l,e):l instanceof ra?bd(l,e):function(u,p){const _=gl(u,p),w=Ih(_)+Ih(u.It);return F(_)&&F(u.It)?At(w):je(u.Tt,w)}(l,e)}function xi(l,e,i){return l instanceof Ya?Dh(l,e):l instanceof ra?bd(l,e):i}function gl(l,e){return l instanceof _u?F(i=e)||(u=i)&&"doubleValue"in u?e:{integerValue:0}:null;var u,i}class zo extends In{}class Ya extends In{constructor(e){super(),this.elements=e}}function Dh(l,e){const i=Zu(e);for(const u of l.elements)i.some(p=>_i(p,u))||i.push(u);return{arrayValue:{values:i}}}class ra extends In{constructor(e){super(),this.elements=e}}function bd(l,e){let i=Zu(e);for(const u of l.elements)i=i.filter(p=>!_i(p,u));return{arrayValue:{values:i}}}class _u extends In{constructor(e,i){super(),this.Tt=e,this.It=i}}function Ih(l){return K(l.integerValue||l.doubleValue)}function Zu(l){return G(l)&&l.arrayValue.values?l.arrayValue.values.slice():[]}class Ac{constructor(e,i){this.field=e,this.transform=i}}class ig{constructor(e,i){this.version=e,this.transformResults=i}}class Pi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(l,e){return void 0!==l.updateTime?e.isFoundDocument()&&e.version.isEqual(l.updateTime):void 0===l.exists||l.exists===e.isFoundDocument()}class Ch{}function Qm(l,e){if(!l.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return l.isNoDocument()?new wd(l.key,Pi.none()):new Sh(l.key,l.data,Pi.none());{const i=l.data,u=Es.empty();let p=new ci(Hn.comparator);for(let _ of e.fields)if(!p.has(_)){let w=i.field(_);null===w&&_.length>1&&(_=_.popLast(),w=i.field(_)),null===w?u.delete(_):u.set(_,w),p=p.add(_)}return new Qu(l.key,u,new $o(p.toArray()),Pi.none())}}function Jm(l,e,i){l instanceof Sh?function(u,p,_){const w=u.value.clone(),O=Nc(u.fieldTransforms,p,_.transformResults);w.setAll(O),p.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(l,e,i):l instanceof Qu?function(u,p,_){if(!Oc(u.precondition,p))return void p.convertToUnknownDocument(_.version);const w=Nc(u.fieldTransforms,p,_.transformResults),O=p.data;O.setAll(e_(u)),O.setAll(w),p.convertToFoundDocument(_.version,O).setHasCommittedMutations()}(l,e,i):e.convertToNoDocument(i.version).setHasCommittedMutations()}function Th(l,e,i,u){return l instanceof Sh?function(p,_,w,O){if(!Oc(p.precondition,_))return w;const B=p.value.clone(),z=t_(p.fieldTransforms,O,_);return B.setAll(z),_.convertToFoundDocument(_.version,B).setHasLocalMutations(),null}(l,e,i,u):l instanceof Qu?function(p,_,w,O){if(!Oc(p.precondition,_))return w;const B=t_(p.fieldTransforms,O,_),z=_.data;return z.setAll(e_(p)),z.setAll(B),_.convertToFoundDocument(_.version,z).setHasLocalMutations(),null===w?null:w.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(ne=>ne.field))}(l,e,i,u):(w=i,Oc(l.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):w);var _,w}function Xm(l,e){let i=null;for(const u of l.fieldTransforms){const p=e.data.field(u.field),_=gl(u.transform,p||null);null!=_&&(null===i&&(i=Es.empty()),i.set(u.field,_))}return i||null}function Jy(l,e){return l.type===e.type&&!!l.key.isEqual(e.key)&&!!l.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(i=l.fieldTransforms)&&void 0===u||i&&u&&Ia(i,u,(p,_)=>function jf(l,e){return l.field.isEqual(e.field)&&(u=e.transform,(i=l.transform)instanceof Ya&&u instanceof Ya||i instanceof ra&&u instanceof ra?Ia(i.elements,u.elements,_i):i instanceof _u&&u instanceof _u?_i(i.It,u.It):i instanceof zo&&u instanceof zo);var i,u}(p,_))))&&(0===l.type?l.value.isEqual(e.value):1!==l.type||l.data.isEqual(e.data)&&l.fieldMask.isEqual(e.fieldMask));var i,u}class Sh extends Ch{constructor(e,i,u,p=[]){super(),this.key=e,this.value=i,this.precondition=u,this.fieldTransforms=p,this.type=0}getFieldMask(){return null}}class Qu extends Ch{constructor(e,i,u,p,_=[]){super(),this.key=e,this.data=i,this.fieldMask=u,this.precondition=p,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function e_(l){const e=new Map;return l.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const u=l.data.field(i);e.set(i,u)}}),e}function Nc(l,e,i){const u=new Map;Ft(l.length===i.length);for(let p=0;p<i.length;p++){const _=l[p],w=_.transform,O=e.data.field(_.field);u.set(_.field,xi(w,O,i[p]))}return u}function t_(l,e,i){const u=new Map;for(const p of l){const _=p.transform,w=i.data.field(p.field);u.set(p.field,nr(_,w,e))}return u}class wd extends Ch{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n_ extends Ch{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eE{constructor(e){this.count=e}}var us,zr;function r_(l){switch(l){default:return Ct();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function i_(l){if(void 0===l)return dn("GRPC error has no .code"),Ke.UNKNOWN;switch(l){case us.OK:return Ke.OK;case us.CANCELLED:return Ke.CANCELLED;case us.UNKNOWN:return Ke.UNKNOWN;case us.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case us.INTERNAL:return Ke.INTERNAL;case us.UNAVAILABLE:return Ke.UNAVAILABLE;case us.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case us.NOT_FOUND:return Ke.NOT_FOUND;case us.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case us.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case us.ABORTED:return Ke.ABORTED;case us.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case us.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case us.DATA_LOSS:return Ke.DATA_LOSS;default:return Ct()}}(zr=us||(us={}))[zr.OK=0]="OK",zr[zr.CANCELLED=1]="CANCELLED",zr[zr.UNKNOWN=2]="UNKNOWN",zr[zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zr[zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zr[zr.NOT_FOUND=5]="NOT_FOUND",zr[zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",zr[zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",zr[zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",zr[zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zr[zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zr[zr.ABORTED=10]="ABORTED",zr[zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",zr[zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",zr[zr.INTERNAL=13]="INTERNAL",zr[zr.UNAVAILABLE=14]="UNAVAILABLE",zr[zr.DATA_LOSS=15]="DATA_LOSS";class Ju{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),u=this.inner[i];if(void 0!==u)for(const[p,_]of u)if(this.equalsFn(p,e))return _}has(e){return void 0!==this.get(e)}set(e,i){const u=this.mapKeyFn(e),p=this.inner[u];if(void 0===p)return this.inner[u]=[[e,i]],void this.innerSize++;for(let _=0;_<p.length;_++)if(this.equalsFn(p[_][0],e))return void(p[_]=[e,i]);p.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),u=this.inner[i];if(void 0===u)return!1;for(let p=0;p<u.length;p++)if(this.equalsFn(u[p][0],e))return 1===u.length?delete this.inner[i]:u.splice(p,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(i,u)=>{for(const[p,_]of u)e(p,_)})}isEmpty(){return Al(this.inner)}size(){return this.innerSize}}const s_=new ls(zt.comparator);function Sa(){return s_}const Hf=new ls(zt.comparator);function Mc(...l){let e=Hf;for(const i of l)e=e.insert(i.key,i);return e}function o_(l){let e=Hf;return l.forEach((i,u)=>e=e.insert(i,u.overlayedDocument)),e}function Nl(){return Ed()}function sg(){return Ed()}function Ed(){return new Ju(l=>l.toString(),(l,e)=>l.isEqual(e))}const $f=new ls(zt.comparator),ob=new ci(zt.comparator);function lr(...l){let e=ob;for(const i of l)e=e.add(i);return e}const tE=new ci(On);function og(){return tE}class zf{constructor(e,i,u,p,_){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=u,this.documentUpdates=p,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,i,u){const p=new Map;return p.set(e,Wf.createSynthesizedTargetChangeForCurrentChange(e,i,u)),new zf(gn.min(),p,og(),Sa(),lr())}}class Wf{constructor(e,i,u,p,_){this.resumeToken=e,this.current=i,this.addedDocuments=u,this.modifiedDocuments=p,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,i,u){return new Wf(u,i,lr(),lr(),lr())}}class xs{constructor(e,i,u,p){this.Et=e,this.removedTargetIds=i,this.key=u,this.At=p}}class Ah{constructor(e,i){this.targetId=e,this.Rt=i}}class Dd{constructor(e,i,u=E.EMPTY_BYTE_STRING,p=null){this.state=e,this.targetIds=i,this.resumeToken=u,this.cause=p}}class $l{constructor(){this.Pt=0,this.vt=Id(),this.bt=E.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=lr(),i=lr(),u=lr();return this.vt.forEach((p,_)=>{switch(_){case 0:e=e.add(p);break;case 2:i=i.add(p);break;case 1:u=u.add(p);break;default:Ct()}}),new Wf(this.bt,this.Vt,e,i,u)}kt(){this.St=!1,this.vt=Id()}$t(e,i){this.St=!0,this.vt=this.vt.insert(e,i)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class Ds{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Sa(),this.Kt=ts(),this.Gt=new ci(On)}Qt(e){for(const i of e.Et)e.At&&e.At.isFoundDocument()?this.jt(i,e.At):this.zt(i,e.key,e.At);for(const i of e.removedTargetIds)this.zt(i,e.key,e.At)}Wt(e){this.forEachTarget(e,i=>{const u=this.Ht(i);switch(e.state){case 0:this.Jt(i)&&u.xt(e.resumeToken);break;case 1:u.Ft(),u.Dt||u.kt(),u.xt(e.resumeToken);break;case 2:u.Ft(),u.Dt||this.removeTarget(i);break;case 3:this.Jt(i)&&(u.Bt(),u.xt(e.resumeToken));break;case 4:this.Jt(i)&&(this.Yt(i),u.xt(e.resumeToken));break;default:Ct()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.qt.forEach((u,p)=>{this.Jt(p)&&i(p)})}Zt(e){const i=e.targetId,u=e.Rt.count,p=this.Xt(i);if(p){const _=p.target;if(mu(_))if(0===u){const w=new zt(_.path);this.zt(i,w,Rr.newNoDocument(w,gn.min()))}else Ft(1===u);else this.te(i)!==u&&(this.Yt(i),this.Gt=this.Gt.add(i))}}ee(e){const i=new Map;this.qt.forEach((_,w)=>{const O=this.Xt(w);if(O){if(_.current&&mu(O.target)){const B=new zt(O.target.path);null!==this.Ut.get(B)||this.ne(w,B)||this.zt(w,B,Rr.newNoDocument(B,e))}_.Ct&&(i.set(w,_.Nt()),_.kt())}});let u=lr();this.Kt.forEach((_,w)=>{let O=!0;w.forEachWhile(B=>{const z=this.Xt(B);return!z||2===z.purpose||(O=!1,!1)}),O&&(u=u.add(_))}),this.Ut.forEach((_,w)=>w.setReadTime(e));const p=new zf(e,i,this.Gt,this.Ut,u);return this.Ut=Sa(),this.Kt=ts(),this.Gt=new ci(On),p}jt(e,i){if(!this.Jt(e))return;const u=this.ne(e,i.key)?2:0;this.Ht(e).$t(i.key,u),this.Ut=this.Ut.insert(i.key,i),this.Kt=this.Kt.insert(i.key,this.se(i.key).add(e))}zt(e,i,u){if(!this.Jt(e))return;const p=this.Ht(e);this.ne(e,i)?p.$t(i,1):p.Mt(i),this.Kt=this.Kt.insert(i,this.se(i).delete(e)),u&&(this.Ut=this.Ut.insert(i,u))}removeTarget(e){this.qt.delete(e)}te(e){const i=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let i=this.qt.get(e);return i||(i=new $l,this.qt.set(e,i)),i}se(e){let i=this.Kt.get(e);return i||(i=new ci(On),this.Kt=this.Kt.insert(e,i)),i}Jt(e){const i=null!==this.Xt(e);return i||lt("WatchChangeAggregator","Detected inactive target",e),i}Xt(e){const i=this.qt.get(e);return i&&i.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new $l),this.Lt.getRemoteKeysForTarget(e).forEach(i=>{this.zt(e,i,null)})}ne(e,i){return this.Lt.getRemoteKeysForTarget(e).has(i)}}function ts(){return new ls(zt.comparator)}function Id(){return new ls(zt.comparator)}const Xy={asc:"ASCENDING",desc:"DESCENDING"},Rc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ab={and:"AND",or:"OR"};class a_{constructor(e,i){this.databaseId=e,this.yt=i}}function Xu(l,e){return l.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ec(l,e){return l.yt?e.toBase64():e.toUint8Array()}function ev(l,e){return Xu(l,e.toTimestamp())}function cs(l){return Ft(!!l),gn.fromTimestamp(function(e){const i=V(e);return new ar(i.seconds,i.nanos)}(l))}function ag(l,e){return(i=l,new kn(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function lg(l){const e=kn.fromString(l);return Ft(Qf(e)),e}function Kf(l,e){return ag(l.databaseId,e.path)}function yu(l,e){const i=lg(e);if(i.get(1)!==l.databaseId.projectId)throw new _t(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+l.databaseId.projectId);if(i.get(3)!==l.databaseId.database)throw new _t(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+l.databaseId.database);return new zt(tc(i))}function Cd(l,e){return ag(l.databaseId,e)}function io(l){const e=lg(l);return 4===e.length?kn.emptyPath():tc(e)}function qf(l){return new kn(["projects",l.databaseId.projectId,"databases",l.databaseId.database]).canonicalString()}function tc(l){return Ft(l.length>4&&"documents"===l.get(4)),l.popFirst(5)}function Td(l,e,i){return{name:Kf(l,e),fields:i.value.mapValue.fields}}function Sd(l,e,i){const u=yu(l,e.name),p=cs(e.updateTime),_=e.createTime?cs(e.createTime):gn.min(),w=new Es({mapValue:{fields:e.fields}}),O=Rr.newFoundDocument(u,p,_,w);return i&&O.setHasCommittedMutations(),i?O.setHasCommittedMutations():O}function Oh(l,e){let i;if(e instanceof Sh)i={update:Td(l,e.key,e.value)};else if(e instanceof wd)i={delete:Kf(l,e.key)};else if(e instanceof Qu)i={update:Td(l,e.key,e.data),updateMask:cb(e.fieldMask)};else{if(!(e instanceof n_))return Ct();i={verify:Kf(l,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(u=>function(p,_){const w=_.transform;if(w instanceof zo)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Ya)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof ra)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof _u)return{fieldPath:_.field.canonicalString(),increment:w.It};throw Ct()}(0,u))),e.precondition.isNone||(i.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:ev(l,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Ct()),i;var p}function l_(l,e){const i=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?Pi.updateTime(cs(p.updateTime)):void 0!==p.exists?Pi.exists(p.exists):Pi.none():Pi.none(),u=e.updateTransforms?e.updateTransforms.map(p=>function(_,w){let O=null;"setToServerValue"in w?(Ft("REQUEST_TIME"===w.setToServerValue),O=new zo):"appendMissingElements"in w?O=new Ya(w.appendMissingElements.values||[]):"removeAllFromArray"in w?O=new ra(w.removeAllFromArray.values||[]):"increment"in w?O=new _u(_,w.increment):Ct();const B=Hn.fromServerFormat(w.fieldPath);return new Ac(B,O)}(l,p)):[];var p;if(e.update){const p=yu(l,e.update.name),_=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new $o((e.updateMask.fieldPaths||[]).map(z=>Hn.fromServerFormat(z)));return new Qu(p,_,w,i,u)}return new Sh(p,_,i,u)}if(e.delete){const p=yu(l,e.delete);return new wd(p,i)}if(e.verify){const p=yu(l,e.verify);return new n_(p,i)}return Ct()}function Yf(l,e){return{documents:[Cd(l,e.path)]}}function u_(l,e){const i={structuredQuery:{}},u=e.path;null!==e.collectionGroup?(i.parent=Cd(l,u),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=Cd(l,u.popLast()),i.structuredQuery.from=[{collectionId:u.lastSegment()}]);const p=function(B){if(0!==B.length)return vu(Mr.create(B,"and"))}(e.filters);p&&(i.structuredQuery.where=p);const _=function(B){if(0!==B.length)return B.map(z=>{return{field:rc((ne=z).field),direction:ug(ne.dir)};var ne})}(e.orderBy);_&&(i.structuredQuery.orderBy=_);const w=(z=e.limit,l.yt||Ri(z)?z:{value:z});var z,O,B;return null!==w&&(i.structuredQuery.limit=w),e.startAt&&(i.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(i.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),i}function c_(l){let e=io(l.parent);const i=l.structuredQuery,u=i.from?i.from.length:0;let p=null;if(u>0){Ft(1===u);const ne=i.from[0];ne.allDescendants?p=ne.collectionId:e=e.child(ne.collectionId)}let _=[];i.where&&(_=function(ne){const be=ub(ne);return be instanceof Mr&&Cc(be)?be.getFilters():[be]}(i.where));let w=[];i.orderBy&&(w=i.orderBy.map(ne=>{return new fd(xc((be=ne).field),function(Le){switch(Le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(be.direction));var be}));let O=null;i.limit&&(O=function(ne){let be;return be="object"==typeof ne?ne.value:ne,Ri(be)?null:be}(i.limit));let B=null;var ne;i.startAt&&(B=new wn((ne=i.startAt).values||[],!!ne.before));let z=null;return i.endAt&&(z=function(ne){return new wn(ne.values||[],!ne.before)}(i.endAt)),rg(e,p,w,_,O,"F",B,z)}function ub(l){return void 0!==l.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=xc(e.unaryFilter.field);return dr.create(i,"==",{doubleValue:NaN});case"IS_NULL":const u=xc(e.unaryFilter.field);return dr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=xc(e.unaryFilter.field);return dr.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=xc(e.unaryFilter.field);return dr.create(_,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(l):void 0!==l.fieldFilter?dr.create(xc((e=l).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==l.compositeFilter?function(e){return Mr.create(e.compositeFilter.filters.map(i=>ub(i)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ct()}}(e.compositeFilter.op))}(l):Ct();var e}function ug(l){return Xy[l]}function nc(l){return Rc[l]}function Zf(l){return ab[l]}function rc(l){return{fieldPath:l.canonicalString()}}function xc(l){return Hn.fromServerFormat(l.fieldPath)}function vu(l){return l instanceof dr?function(e){if("=="===e.op){if(fe(e.value))return{unaryFilter:{field:rc(e.field),op:"IS_NAN"}};if(Z(e.value))return{unaryFilter:{field:rc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fe(e.value))return{unaryFilter:{field:rc(e.field),op:"IS_NOT_NAN"}};if(Z(e.value))return{unaryFilter:{field:rc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rc(e.field),op:nc(e.op),value:e.value}}}(l):l instanceof Mr?function(e){const i=e.getFilters().map(u=>vu(u));return 1===i.length?i[0]:{compositeFilter:{op:Zf(e.op),filters:i}}}(l):Ct()}function cb(l){const e=[];return l.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function Qf(l){return l.length>=4&&"projects"===l.get(0)&&"databases"===l.get(2)}function Wo(l){let e="";for(let i=0;i<l.length;i++)e.length>0&&(e=cg(e)),e=h_(l.get(i),e);return cg(e)}function h_(l,e){let i=e;const u=l.length;for(let p=0;p<u;p++){const _=l.charAt(p);switch(_){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=_}}return i}function cg(l){return l+"\x01\x01"}function ic(l){const e=l.length;if(Ft(e>=2),2===e)return Ft("\x01"===l.charAt(0)&&"\x01"===l.charAt(1)),kn.emptyPath();const i=e-2,u=[];let p="";for(let _=0;_<e;){const w=l.indexOf("\x01",_);switch((w<0||w>i)&&Ct(),l.charAt(w+1)){case"\x01":const O=l.substring(_,w);let B;0===p.length?B=O:(p+=O,B=p,p=""),u.push(B);break;case"\x10":p+=l.substring(_,w),p+="\0";break;case"\x11":p+=l.substring(_,w+1);break;default:Ct()}_=w+2}return new kn(u)}const db=["userId","batchId"];function Jf(l,e){return[l,Wo(e)]}function tv(l,e,i){return[l,Wo(e),i]}const Ad={},nv=["prefixPath","collectionGroup","readTime","documentId"],iE=["prefixPath","collectionGroup","documentId"],hb=["collectionGroup","readTime","prefixPath","documentId"],Xf=["canonicalId","targetId"],so=["targetId","path"],Pc=["path","targetId"],rv=["collectionId","parent"],Ks=["indexId","uid"],fb=["uid","sequenceNumber"],dg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ep=["indexId","uid","orderedDocumentKey"],iv=["userId","collectionPath","documentId"],pb=["userId","collectionPath","largestBatchId"],gb=["userId","collectionGroup","largestBatchId"],sv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mb=[...sv,"documentOverlays"],f_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_b=f_,yb=[..._b,"indexConfiguration","indexState","indexEntries"];class bu extends js{constructor(e,i){super(),this.re=e,this.currentSequenceNumber=i}}function qs(l,e){const i=St(l);return Eo.M(i.re,e)}class Od{constructor(e,i,u,p){this.batchId=e,this.localWriteTime=i,this.baseMutations=u,this.mutations=p}applyToRemoteDocument(e,i){const u=i.mutationResults;for(let p=0;p<this.mutations.length;p++){const _=this.mutations[p];_.key.isEqual(e.key)&&Jm(_,e,u[p])}}applyToLocalView(e,i){for(const u of this.baseMutations)u.key.isEqual(e.key)&&(i=Th(u,e,i,this.localWriteTime));for(const u of this.mutations)u.key.isEqual(e.key)&&(i=Th(u,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const u=sg();return this.mutations.forEach(p=>{const _=e.get(p.key),w=_.overlayedDocument;let O=this.applyToLocalView(w,_.mutatedFields);O=i.has(p.key)?null:O;const B=Qm(w,O);null!==B&&u.set(p.key,B),w.isValidDocument()||w.convertToNoDocument(gn.min())}),u}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),lr())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(i,u)=>Jy(i,u))&&Ia(this.baseMutations,e.baseMutations,(i,u)=>Jy(i,u))}}class hg{constructor(e,i,u,p){this.batch=e,this.commitVersion=i,this.mutationResults=u,this.docVersions=p}static from(e,i,u){Ft(e.mutations.length===u.length);let p=$f;const _=e.mutations;for(let w=0;w<_.length;w++)p=p.insert(_[w].key,u[w].version);return new hg(e,i,u,p)}}class fg{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ml{constructor(e,i,u,p,_=gn.min(),w=gn.min(),O=E.EMPTY_BYTE_STRING){this.target=e,this.targetId=i,this.purpose=u,this.sequenceNumber=p,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=O}withSequenceNumber(e){return new ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,i){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ov{constructor(e){this.oe=e}}function kc(l,e){const i=e.key,u={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())u.document={name:Kf(p=l.oe,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:Xu(p,_.version.toTimestamp()),createTime:Xu(p,_.createTime.toTimestamp())};else if(e.isNoDocument())u.noDocument={path:i.path.toArray(),readTime:Mh(e.version)};else{if(!e.isUnknownDocument())return Ct();u.unknownDocument={path:i.path.toArray(),version:Mh(e.version)}}var p,_;return u}function Nh(l){const e=l.toTimestamp();return[e.seconds,e.nanoseconds]}function Mh(l){const e=l.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sc(l){const e=new ar(l.seconds,l.nanoseconds);return gn.fromTimestamp(e)}function fr(l,e){const i=(e.baseMutations||[]).map(_=>l_(l.oe,_));for(let _=0;_<e.mutations.length-1;++_)_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(e.mutations[_].updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_);const u=e.mutations.map(_=>l_(l.oe,_)),p=ar.fromMillis(e.localWriteTimeMs);return new Od(e.batchId,p,i,u)}function Nd(l){const e=sc(l.readTime),i=void 0!==l.lastLimboFreeSnapshotVersion?sc(l.lastLimboFreeSnapshotVersion):gn.min();let u;var p;return void 0!==l.query.documents?(Ft(1===(p=l.query).documents.length),u=Rs(Yu(io(p.documents[0])))):u=Rs(c_(l.query)),new ml(u,l.targetId,0,l.lastListenSequenceNumber,e,i,E.fromBase64String(l.resumeToken))}function tp(l,e){const i=Mh(e.snapshotVersion),u=Mh(e.lastLimboFreeSnapshotVersion);let p;p=mu(e.target)?Yf(l.oe,e.target):u_(l.oe,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hl(e.target),readTime:i,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:u,query:p}}function gg(l){const e=c_({parent:l.parent,structuredQuery:l.structuredQuery});return"LAST"===l.limitType?vd(e,e.limit,"L"):e}function zl(l,e){return new fg(e.largestBatchId,l_(l.oe,e.overlayMutation))}function av(l,e){const i=e.path.lastSegment();return[l,Wo(e.path.popLast()),i]}function np(l,e,i,u){return{indexId:l,uid:e.uid||"",sequenceNumber:i,readTime:Mh(u.readTime),documentKey:Wo(u.documentKey.path),largestBatchId:u.largestBatchId}}class Rh{getBundleMetadata(e,i){return rp(e).get(i).next(u=>{if(u)return{id:(p=u).bundleId,createTime:sc(p.createTime),version:p.version};var p})}saveBundleMetadata(e,i){return rp(e).put({bundleId:(u=i).id,createTime:Mh(cs(u.createTime)),version:u.version});var u}getNamedQuery(e,i){return Md(e).get(i).next(u=>{if(u)return{name:(p=u).name,query:gg(p.bundledQuery),readTime:sc(p.readTime)};var p})}saveNamedQuery(e,i){return Md(e).put({name:(u=i).name,readTime:Mh(cs(u.readTime)),bundledQuery:u.bundledQuery});var u}}function rp(l){return qs(l,"bundles")}function Md(l){return qs(l,"namedQueries")}class Fc{constructor(e,i){this.Tt=e,this.userId=i}static ue(e,i){return new Fc(e,i.uid||"")}getOverlay(e,i){return Wl(e).get(av(this.userId,i)).next(u=>u?zl(this.Tt,u):null)}getOverlays(e,i){const u=Nl();return Qe.forEach(i,p=>this.getOverlay(e,p).next(_=>{null!==_&&u.set(p,_)})).next(()=>u)}saveOverlays(e,i,u){const p=[];return u.forEach((_,w)=>{const O=new fg(i,w);p.push(this.ce(e,O))}),Qe.waitFor(p)}removeOverlaysForBatchId(e,i,u){const p=new Set;i.forEach(w=>p.add(Wo(w.getCollectionPath())));const _=[];return p.forEach(w=>{const O=IDBKeyRange.bound([this.userId,w,u],[this.userId,w,u+1],!1,!0);_.push(Wl(e).Y("collectionPathOverlayIndex",O))}),Qe.waitFor(_)}getOverlaysForCollection(e,i,u){const p=Nl(),_=Wo(i),w=IDBKeyRange.bound([this.userId,_,u],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Wl(e).W("collectionPathOverlayIndex",w).next(O=>{for(const B of O){const z=zl(this.Tt,B);p.set(z.getKey(),z)}return p})}getOverlaysForCollectionGroup(e,i,u,p){const _=Nl();let w;const O=IDBKeyRange.bound([this.userId,i,u],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Wl(e).X({index:"collectionGroupOverlayIndex",range:O},(B,z,ne)=>{const be=zl(this.Tt,z);_.size()<p||be.largestBatchId===w?(_.set(be.getKey(),be),w=be.largestBatchId):ne.done()}).next(()=>_)}ce(e,i){return Wl(e).put(function(u,p,_){const[w,O,B]=av(p,_.mutation.key);return{userId:p,collectionPath:O,documentId:B,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Oh(u.oe,_.mutation)}}(this.Tt,this.userId,i))}}function Wl(l){return qs(l,"documentOverlays")}class Lc{constructor(){}ae(e,i){this.he(e,i),i.le()}he(e,i){if("nullValue"in e)this.fe(i,5);else if("booleanValue"in e)this.fe(i,10),i.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(i,15),i.de(K(e.integerValue));else if("doubleValue"in e){const u=K(e.doubleValue);isNaN(u)?this.fe(i,13):(this.fe(i,15),ro(u)?i.de(0):i.de(u))}else if("timestampValue"in e){const u=e.timestampValue;this.fe(i,20),"string"==typeof u?i._e(u):(i._e(`${u.seconds||""}`),i.de(u.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,i),this.me(i);else if("bytesValue"in e)this.fe(i,30),i.ge(ee(e.bytesValue)),this.me(i);else if("referenceValue"in e)this.ye(e.referenceValue,i);else if("geoPointValue"in e){const u=e.geoPointValue;this.fe(i,45),i.de(u.latitude||0),i.de(u.longitude||0)}else"mapValue"in e?Ot(e)?this.fe(i,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,i),this.me(i)):"arrayValue"in e?(this.Ie(e.arrayValue,i),this.me(i)):Ct()}we(e,i){this.fe(i,25),this.Te(e,i)}Te(e,i){i._e(e)}pe(e,i){const u=e.fields||{};this.fe(i,55);for(const p of Object.keys(u))this.we(p,i),this.he(u[p],i)}Ie(e,i){const u=e.values||[];this.fe(i,50);for(const p of u)this.he(p,i)}ye(e,i){this.fe(i,37),zt.fromName(e).path.forEach(u=>{this.fe(i,60),this.Te(u,i)})}fe(e,i){e.de(i)}me(e){e.de(2)}}function mg(l){if(0===l)return 8;let e=0;return!(l>>4)&&(e+=4,l<<=4),!(l>>6)&&(e+=2,l<<=2),!(l>>7)&&(e+=1),e}function p_(l){const e=64-function(i){let u=0;for(let p=0;p<8;++p){const _=mg(255&i[p]);if(u+=_,8!==_)break}return u}(l);return Math.ceil(e/8)}Lc.Ee=new Lc;class lv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const i=e[Symbol.iterator]();let u=i.next();for(;!u.done;)this.Re(u.value),u=i.next();this.Pe()}ve(e){const i=e[Symbol.iterator]();let u=i.next();for(;!u.done;)this.be(u.value),u=i.next();this.Ve()}Se(e){for(const i of e){const u=i.charCodeAt(0);if(u<128)this.Re(u);else if(u<2048)this.Re(960|u>>>6),this.Re(128|63&u);else if(i<"\ud800"||"\udbff"<i)this.Re(480|u>>>12),this.Re(128|63&u>>>6),this.Re(128|63&u);else{const p=i.codePointAt(0);this.Re(240|p>>>18),this.Re(128|63&p>>>12),this.Re(128|63&p>>>6),this.Re(128|63&p)}}this.Pe()}De(e){for(const i of e){const u=i.charCodeAt(0);if(u<128)this.be(u);else if(u<2048)this.be(960|u>>>6),this.be(128|63&u);else if(i<"\ud800"||"\udbff"<i)this.be(480|u>>>12),this.be(128|63&u>>>6),this.be(128|63&u);else{const p=i.codePointAt(0);this.be(240|p>>>18),this.be(128|63&p>>>12),this.be(128|63&p>>>6),this.be(128|63&p)}}this.Ve()}Ce(e){const i=this.xe(e),u=p_(i);this.Ne(1+u),this.buffer[this.position++]=255&u;for(let p=i.length-u;p<i.length;++p)this.buffer[this.position++]=255&i[p]}ke(e){const i=this.xe(e),u=p_(i);this.Ne(1+u),this.buffer[this.position++]=~(255&u);for(let p=i.length-u;p<i.length;++p)this.buffer[this.position++]=~(255&i[p])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const i=function(p){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,p,!1),new Uint8Array(_.buffer)}(e),u=0!=(128&i[0]);i[0]^=u?255:128;for(let p=1;p<i.length;++p)i[p]^=u?255:0;return i}Re(e){const i=255&e;0===i?(this.Me(0),this.Me(255)):255===i?(this.Me(255),this.Me(0)):this.Me(i)}be(e){const i=255&e;0===i?(this.Fe(0),this.Fe(255)):255===i?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const i=e+this.position;if(i<=this.buffer.length)return;let u=2*this.buffer.length;u<i&&(u=i);const p=new Uint8Array(u);p.set(this.buffer),this.buffer=p}}class g_{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class xh{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class ip{constructor(){this.Le=new lv,this.qe=new g_(this.Le),this.Ue=new xh(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Rd{constructor(e,i,u,p){this.indexId=e,this.documentKey=i,this.arrayValue=u,this.directionalValue=p}Ge(){const e=this.directionalValue.length,i=0===e||255===this.directionalValue[e-1]?e+1:e,u=new Uint8Array(i);return u.set(this.directionalValue,0),i!==e?u.set([0],this.directionalValue.length):++u[u.length-1],new Rd(this.indexId,this.documentKey,this.arrayValue,u)}}function Uc(l,e){let i=l.indexId-e.indexId;return 0!==i?i:(i=_g(l.arrayValue,e.arrayValue),0!==i?i:(i=_g(l.directionalValue,e.directionalValue),0!==i?i:zt.comparator(l.documentKey,e.documentKey)))}function _g(l,e){for(let i=0;i<l.length&&i<e.length;++i){const u=l[i]-e[i];if(0!==u)return u}return l.length-e.length}class vb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const i of e.filters){const u=i;u.isInequality()?this.ze=u:this.je.push(u)}}We(e){Ft(e.collectionGroup===this.collectionId);const i=vs(e);if(void 0!==i&&!this.He(i))return!1;const u=Vi(e);let p=0,_=0;for(;p<u.length&&this.He(u[p]);++p);if(p===u.length)return!0;if(void 0!==this.ze){const w=u[p];if(!this.Je(this.ze,w)||!this.Ye(this.Qe[_++],w))return!1;++p}for(;p<u.length;++p)if(_>=this.Qe.length||!this.Ye(this.Qe[_++],u[p]))return!1;return!0}He(e){for(const i of this.je)if(this.Je(i,e))return!0;return!1}Je(e,i){return!(void 0===e||!e.field.isEqual(i.fieldPath))&&2===i.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,i){return!!e.field.isEqual(i.fieldPath)&&(0===i.kind&&"asc"===e.dir||1===i.kind&&"desc"===e.dir)}}function m_(l){var e,i;if(Ft(l instanceof dr||l instanceof Mr),l instanceof dr){if(l instanceof Ym){const p=(null===(i=null===(e=l.value.arrayValue)||void 0===e?void 0:e.values)||void 0===i?void 0:i.map(_=>dr.create(l.field,"==",_)))||[];return Mr.create(p,"or")}return l}const u=l.filters.map(p=>m_(p));return Mr.create(u,l.op)}function bb(l){if(0===l.getFilters().length)return[];const e=Bc(m_(l));return Ft(__(e)),yg(e)||uv(e)?[e]:e.getFilters()}function yg(l){return l instanceof dr}function uv(l){return l instanceof Mr&&Cc(l)}function __(l){return yg(l)||uv(l)||function(e){if(e instanceof Mr&&na(e)){for(const i of e.getFilters())if(!yg(i)&&!uv(i))return!1;return!0}return!1}(l)}function Bc(l){if(Ft(l instanceof dr||l instanceof Mr),l instanceof dr)return l;if(1===l.filters.length)return Bc(l.filters[0]);const e=l.filters.map(u=>Bc(u));let i=Mr.create(e,l.op);return i=oc(i),__(i)?i:(Ft(i instanceof Mr),Ft(Ms(i)),Ft(i.filters.length>1),i.filters.reduce((u,p)=>vg(u,p)))}function vg(l,e){let i;return Ft(l instanceof dr||l instanceof Mr),Ft(e instanceof dr||e instanceof Mr),i=l instanceof dr?e instanceof dr?Mr.create([l,e],"and"):Vc(l,e):e instanceof dr?Vc(e,l):function(u,p){if(Ft(u.filters.length>0&&p.filters.length>0),Ms(u)&&Ms(p))return kf(u,p.getFilters());const _=na(u)?u:p,w=na(u)?p:u,O=_.filters.map(B=>vg(B,w));return Mr.create(O,"or")}(l,e),oc(i)}function Vc(l,e){if(Ms(e))return kf(e,l.getFilters());{const i=e.filters.map(u=>vg(l,u));return Mr.create(i,"or")}}function oc(l){if(Ft(l instanceof dr||l instanceof Mr),l instanceof dr)return l;const e=l.getFilters();if(1===e.length)return oc(e[0]);if(hd(l))return l;const i=e.map(p=>oc(p)),u=[];return i.forEach(p=>{p instanceof dr?u.push(p):p instanceof Mr&&(p.op===l.op?u.push(...p.filters):u.push(p))}),1===u.length?u[0]:Mr.create(u,l.op)}class wb{constructor(){this.Ze=new sp}addToCollectionParentIndex(e,i){return this.Ze.add(i),Qe.resolve()}getCollectionParents(e,i){return Qe.resolve(this.Ze.getEntries(i))}addFieldIndex(e,i){return Qe.resolve()}deleteFieldIndex(e,i){return Qe.resolve()}getDocumentsMatchingTarget(e,i){return Qe.resolve(null)}getIndexType(e,i){return Qe.resolve(0)}getFieldIndexes(e,i){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,i){return Qe.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,i){return Qe.resolve(Oi.min())}updateCollectionGroup(e,i,u){return Qe.resolve()}updateIndexEntries(e,i){return Qe.resolve()}}class sp{constructor(){this.index={}}add(e){const i=e.lastSegment(),u=e.popLast(),p=this.index[i]||new ci(kn.comparator),_=!p.has(u);return this.index[i]=p.add(u),_}has(e){const i=e.lastSegment(),u=e.popLast(),p=this.index[i];return p&&p.has(u)}getEntries(e){return(this.index[e]||new ci(kn.comparator)).toArray()}}const bg=new Uint8Array(0);class Eb{constructor(e,i){this.user=e,this.databaseId=i,this.Xe=new sp,this.tn=new Ju(u=>Hl(u),(u,p)=>Sc(u,p)),this.uid=e.uid||""}addToCollectionParentIndex(e,i){if(!this.Xe.has(i)){const u=i.lastSegment(),p=i.popLast();e.addOnCommittedListener(()=>{this.Xe.add(i)});const _={collectionId:u,parent:Wo(p)};return Db(e).put(_)}return Qe.resolve()}getCollectionParents(e,i){const u=[],p=IDBKeyRange.bound([i,""],[du(i),""],!1,!0);return Db(e).W(p).next(_=>{for(const w of _){if(w.collectionId!==i)break;u.push(ic(w.parent))}return u})}addFieldIndex(e,i){const u=wg(e),p={indexId:(w=i).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var w;delete p.indexId;const _=u.add(p);if(i.indexState){const w=Ph(e);return _.next(O=>{w.put(np(O,this.user,i.indexState.sequenceNumber,i.indexState.offset))})}return _.next()}deleteFieldIndex(e,i){const u=wg(e),p=Ph(e),_=op(e);return u.delete(i.indexId).next(()=>p.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,i){const u=op(e);let p=!0;const _=new Map;return Qe.forEach(this.en(i),w=>this.nn(e,w).next(O=>{p&&(p=!!O),_.set(w,O)})).next(()=>{if(p){let w=lr();const O=[];return Qe.forEach(_,(B,z)=>{var ne;lt("IndexedDbIndexManager",`Using index ${ne=B,`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map(hr=>`${hr.fieldPath}:${hr.kind}`).join(",")}`} to execute ${Hl(i)}`);const be=function(hr,hs){const xr=vs(hs);if(void 0===xr)return null;for(const Sr of wh(hr,xr.fieldPath))switch(Sr.op){case"array-contains-any":return Sr.value.arrayValue.values||[];case"array-contains":return[Sr.value]}return null}(z,B),Le=function(hr,hs){const xr=new Map;for(const Sr of Vi(hs))for(const Zs of wh(hr,Sr.fieldPath))switch(Zs.op){case"==":case"in":xr.set(Sr.fieldPath.canonicalString(),Zs.value);break;case"not-in":case"!=":return xr.set(Sr.fieldPath.canonicalString(),Zs.value),Array.from(xr.values())}return null}(z,B),gt=function(hr,hs){const xr=[];let Sr=!0;for(const Zs of Vi(hs)){const mc=0===Zs.kind?Gf(hr,Zs.fieldPath,hr.startAt):ng(hr,Zs.fieldPath,hr.startAt);xr.push(mc.value),Sr&&(Sr=mc.inclusive)}return new wn(xr,Sr)}(z,B),Nt=function(hr,hs){const xr=[];let Sr=!0;for(const Zs of Vi(hs)){const mc=0===Zs.kind?ng(hr,Zs.fieldPath,hr.endAt):Gf(hr,Zs.fieldPath,hr.endAt);xr.push(mc.value),Sr&&(Sr=mc.inclusive)}return new wn(xr,Sr)}(z,B),Zt=this.sn(B,z,gt),_n=this.sn(B,z,Nt),ii=this.rn(B,z,Le),Cs=this.on(B.indexId,be,Zt,gt.inclusive,_n,Nt.inclusive,ii);return Qe.forEach(Cs,hr=>u.J(hr,i.limit).next(hs=>{hs.forEach(xr=>{const Sr=zt.fromSegments(xr.documentKey);w.has(Sr)||(w=w.add(Sr),O.push(Sr))})}))}).next(()=>O)}return Qe.resolve(null)})}en(e){let i=this.tn.get(e);return i||(i=0===e.filters.length?[e]:bb(Mr.create(e.filters,"and")).map(u=>Vf(e.path,e.collectionGroup,e.orderBy,u.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,i),i)}on(e,i,u,p,_,w,O){const B=(null!=i?i.length:1)*Math.max(u.length,_.length),z=B/(null!=i?i.length:1),ne=[];for(let be=0;be<B;++be){const Le=i?this.un(i[be/z]):bg,gt=this.cn(e,Le,u[be%z],p),Nt=this.an(e,Le,_[be%z],w),Zt=O.map(_n=>this.cn(e,Le,_n,!0));ne.push(...this.createRange(gt,Nt,Zt))}return ne}cn(e,i,u,p){const _=new Rd(e,zt.empty(),i,u);return p?_:_.Ge()}an(e,i,u,p){const _=new Rd(e,zt.empty(),i,u);return p?_.Ge():_}nn(e,i){const u=new vb(i),p=null!=i.collectionGroup?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(e,p).next(_=>{let w=null;for(const O of _)u.We(O)&&(!w||O.fields.length>w.fields.length)&&(w=O);return w})}getIndexType(e,i){let u=2;const p=this.en(i);return Qe.forEach(p,_=>this.nn(e,_).next(w=>{w?0!==u&&w.fields.length<function(O){let B=new ci(Hn.comparator),z=!1;for(const ne of O.filters)for(const be of ne.getFlattenedFilters())be.field.isKeyField()||("array-contains"===be.op||"array-contains-any"===be.op?z=!0:B=B.add(be.field));for(const ne of O.orderBy)ne.field.isKeyField()||(B=B.add(ne.field));return B.size+(z?1:0)}(_)&&(u=1):u=0})).next(()=>null!==i.limit&&p.length>1&&2===u?1:u)}hn(e,i){const u=new ip;for(const p of Vi(e)){const _=i.data.field(p.fieldPath);if(null==_)return null;const w=u.Ke(p.kind);Lc.Ee.ae(_,w)}return u.Be()}un(e){const i=new ip;return Lc.Ee.ae(e,i.Ke(0)),i.Be()}ln(e,i){const u=new ip;return Lc.Ee.ae(jo(this.databaseId,i),u.Ke(function(p){const _=Vi(p);return 0===_.length?0:_[_.length-1].kind}(e))),u.Be()}rn(e,i,u){if(null===u)return[];let p=[];p.push(new ip);let _=0;for(const w of Vi(e)){const O=u[_++];for(const B of p)if(this.fn(i,w.fieldPath)&&G(O))p=this.dn(p,w,O);else{const z=B.Ke(w.kind);Lc.Ee.ae(O,z)}}return this._n(p)}sn(e,i,u){return this.rn(e,i,u.position)}_n(e){const i=[];for(let u=0;u<e.length;++u)i[u]=e[u].Be();return i}dn(e,i,u){const p=[...e],_=[];for(const w of u.arrayValue.values||[])for(const O of p){const B=new ip;B.seed(O.Be()),Lc.Ee.ae(w,B.Ke(i.kind)),_.push(B)}return _}fn(e,i){return!!e.filters.find(u=>u instanceof dr&&u.field.isEqual(i)&&("in"===u.op||"not-in"===u.op))}getFieldIndexes(e,i){const u=wg(e),p=Ph(e);return(i?u.W("collectionGroupIndex",IDBKeyRange.bound(i,i)):u.W()).next(_=>{const w=[];return Qe.forEach(_,O=>p.get([O.indexId,this.uid]).next(B=>{w.push(function(z,ne){const be=ne?new Gi(ne.sequenceNumber,new Oi(sc(ne.readTime),new zt(ic(ne.documentKey)),ne.largestBatchId)):Gi.empty(),Le=z.fields.map(([gt,Nt])=>new Nr(Hn.fromServerFormat(gt),Nt));return new wo(z.indexId,z.collectionGroup,Le,be)}(O,B))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(i=>0===i.length?null:(i.sort((u,p)=>{const _=u.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==_?_:On(u.collectionGroup,p.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(e,i,u){const p=wg(e),_=Ph(e);return this.wn(e).next(w=>p.W("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(O=>Qe.forEach(O,B=>_.put(np(B.indexId,this.user,w,u)))))}updateIndexEntries(e,i){const u=new Map;return Qe.forEach(i,(p,_)=>{const w=u.get(p.collectionGroup);return(w?Qe.resolve(w):this.getFieldIndexes(e,p.collectionGroup)).next(O=>(u.set(p.collectionGroup,O),Qe.forEach(O,B=>this.mn(e,p,B).next(z=>{const ne=this.gn(_,B);return z.isEqual(ne)?Qe.resolve():this.yn(e,_,B,z,ne)}))))})}pn(e,i,u,p){return op(e).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.ln(u,i.key),documentKey:i.key.path.toArray()})}In(e,i,u,p){return op(e).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.ln(u,i.key),i.key.path.toArray()])}mn(e,i,u){const p=op(e);let _=new ci(Uc);return p.X({index:"documentKeyIndex",range:IDBKeyRange.only([u.indexId,this.uid,this.ln(u,i)])},(w,O)=>{_=_.add(new Rd(u.indexId,i,O.arrayValue,O.directionalValue))}).next(()=>_)}gn(e,i){let u=new ci(Uc);const p=this.hn(i,e);if(null==p)return u;const _=vs(i);if(null!=_){const w=e.data.field(_.fieldPath);if(G(w))for(const O of w.arrayValue.values||[])u=u.add(new Rd(i.indexId,e.key,this.un(O),p))}else u=u.add(new Rd(i.indexId,e.key,bg,p));return u}yn(e,i,u,p,_){lt("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);const w=[];return function(O,B,z,ne,be){const Le=O.getIterator(),gt=B.getIterator();let Nt=gu(Le),Zt=gu(gt);for(;Nt||Zt;){let _n=!1,ii=!1;if(Nt&&Zt){const Cs=z(Nt,Zt);Cs<0?ii=!0:Cs>0&&(_n=!0)}else null!=Nt?ii=!0:_n=!0;_n?(ne(Zt),Zt=gu(gt)):ii?(be(Nt),Nt=gu(Le)):(Nt=gu(Le),Zt=gu(gt))}}(p,_,Uc,O=>{w.push(this.pn(e,i,u,O))},O=>{w.push(this.In(e,i,u,O))}),Qe.waitFor(w)}wn(e){let i=1;return Ph(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(u,p,_)=>{_.done(),i=p.sequenceNumber+1}).next(()=>i)}createRange(e,i,u){u=u.sort((w,O)=>Uc(w,O)).filter((w,O,B)=>!O||0!==Uc(w,B[O-1]));const p=[];p.push(e);for(const w of u){const O=Uc(w,e),B=Uc(w,i);if(0===O)p[0]=e.Ge();else if(O>0&&B<0)p.push(w),p.push(w.Ge());else if(B>0)break}p.push(i);const _=[];for(let w=0;w<p.length;w+=2){if(this.Tn(p[w],p[w+1]))return[];_.push(IDBKeyRange.bound([p[w].indexId,this.uid,p[w].arrayValue,p[w].directionalValue,bg,[]],[p[w+1].indexId,this.uid,p[w+1].arrayValue,p[w+1].directionalValue,bg,[]]))}return _}Tn(e,i){return Uc(e,i)>0}getMinOffsetFromCollectionGroup(e,i){return this.getFieldIndexes(e,i).next(y_)}getMinOffset(e,i){return Qe.mapArray(this.en(i),u=>this.nn(e,u).next(p=>p||Ct())).next(y_)}}function Db(l){return qs(l,"collectionParents")}function op(l){return qs(l,"indexEntries")}function wg(l){return qs(l,"indexConfiguration")}function Ph(l){return qs(l,"indexState")}function y_(l){Ft(0!==l.length);let e=l[0].indexState.offset,i=e.largestBatchId;for(let u=1;u<l.length;u++){const p=l[u].indexState.offset;to(p,e)<0&&(e=p),i<p.largestBatchId&&(i=p.largestBatchId)}return new Oi(e.readTime,e.documentKey,i)}const Ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Aa{constructor(e,i,u){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=u}static withCacheSize(e){return new Aa(e,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ap(l,e,i){const u=l.store("mutations"),p=l.store("documentMutations"),_=[],w=IDBKeyRange.only(i.batchId);let O=0;const B=u.X({range:w},(ne,be,Le)=>(O++,Le.delete()));_.push(B.next(()=>{Ft(1===O)}));const z=[];for(const ne of i.mutations){const be=tv(e,ne.key.path,i.batchId);_.push(p.delete(be)),z.push(ne.key)}return Qe.waitFor(_).next(()=>z)}function v_(l){if(!l)return 0;let e;if(l.document)e=l.document;else if(l.unknownDocument)e=l.unknownDocument;else{if(!l.noDocument)throw Ct();e=l.noDocument}return JSON.stringify(e).length}Aa.DEFAULT_COLLECTION_PERCENTILE=10,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Aa.DEFAULT=new Aa(41943040,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Aa.DISABLED=new Aa(-1,0,0);class b_{constructor(e,i,u,p){this.userId=e,this.Tt=i,this.indexManager=u,this.referenceDelegate=p,this.En={}}static ue(e,i,u,p){Ft(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new b_(_,i,u,p)}checkEmpty(e){let i=!0;const u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xd(e).X({index:"userMutationsIndex",range:u},(p,_,w)=>{i=!1,w.done()}).next(()=>i)}addMutationBatch(e,i,u,p){const _=lp(e),w=xd(e);return w.add({}).next(O=>{Ft("number"==typeof O);const B=new Od(O,i,u,p),z=function(Le,gt,Nt){const Zt=Nt.baseMutations.map(ii=>Oh(Le.oe,ii)),_n=Nt.mutations.map(ii=>Oh(Le.oe,ii));return{userId:gt,batchId:Nt.batchId,localWriteTimeMs:Nt.localWriteTime.toMillis(),baseMutations:Zt,mutations:_n}}(this.Tt,this.userId,B),ne=[];let be=new ci((Le,gt)=>On(Le.canonicalString(),gt.canonicalString()));for(const Le of p){const gt=tv(this.userId,Le.key.path,O);be=be.add(Le.key.path.popLast()),ne.push(w.put(z)),ne.push(_.put(gt,Ad))}return be.forEach(Le=>{ne.push(this.indexManager.addToCollectionParentIndex(e,Le))}),e.addOnCommittedListener(()=>{this.En[O]=B.keys()}),Qe.waitFor(ne).next(()=>B)})}lookupMutationBatch(e,i){return xd(e).get(i).next(u=>u?(Ft(u.userId===this.userId),fr(this.Tt,u)):null)}An(e,i){return this.En[i]?Qe.resolve(this.En[i]):this.lookupMutationBatch(e,i).next(u=>{if(u){const p=u.keys();return this.En[i]=p,p}return null})}getNextMutationBatchAfterBatchId(e,i){const u=i+1,p=IDBKeyRange.lowerBound([this.userId,u]);let _=null;return xd(e).X({index:"userMutationsIndex",range:p},(w,O,B)=>{O.userId===this.userId&&(Ft(O.batchId>=u),_=fr(this.Tt,O)),B.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let u=-1;return xd(e).X({index:"userMutationsIndex",range:i,reverse:!0},(p,_,w)=>{u=_.batchId,w.done()}).next(()=>u)}getAllMutationBatches(e){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xd(e).W("userMutationsIndex",i).next(u=>u.map(p=>fr(this.Tt,p)))}getAllMutationBatchesAffectingDocumentKey(e,i){const u=Jf(this.userId,i.path),p=IDBKeyRange.lowerBound(u),_=[];return lp(e).X({range:p},(w,O,B)=>{const[z,ne,be]=w,Le=ic(ne);if(z===this.userId&&i.path.isEqual(Le))return xd(e).get(be).next(gt=>{if(!gt)throw Ct();Ft(gt.userId===this.userId),_.push(fr(this.Tt,gt))});B.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,i){let u=new ci(On);const p=[];return i.forEach(_=>{const w=Jf(this.userId,_.path),O=IDBKeyRange.lowerBound(w),B=lp(e).X({range:O},(z,ne,be)=>{const[Le,gt,Nt]=z,Zt=ic(gt);Le===this.userId&&_.path.isEqual(Zt)?u=u.add(Nt):be.done()});p.push(B)}),Qe.waitFor(p).next(()=>this.Rn(e,u))}getAllMutationBatchesAffectingQuery(e,i){const u=i.path,p=u.length+1,_=Jf(this.userId,u),w=IDBKeyRange.lowerBound(_);let O=new ci(On);return lp(e).X({range:w},(B,z,ne)=>{const[be,Le,gt]=B,Nt=ic(Le);be===this.userId&&u.isPrefixOf(Nt)?Nt.length===p&&(O=O.add(gt)):ne.done()}).next(()=>this.Rn(e,O))}Rn(e,i){const u=[],p=[];return i.forEach(_=>{p.push(xd(e).get(_).next(w=>{if(null===w)throw Ct();Ft(w.userId===this.userId),u.push(fr(this.Tt,w))}))}),Qe.waitFor(p).next(()=>u)}removeMutationBatch(e,i){return ap(e.re,this.userId,i).next(u=>(e.addOnCommittedListener(()=>{this.Pn(i.batchId)}),Qe.forEach(u,p=>this.referenceDelegate.markPotentiallyOrphaned(e,p))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return Qe.resolve();const u=IDBKeyRange.lowerBound([this.userId]),p=[];return lp(e).X({range:u},(_,w,O)=>{if(_[0]===this.userId){const B=ic(_[1]);p.push(B)}else O.done()}).next(()=>{Ft(0===p.length)})})}containsKey(e,i){return Cb(e,this.userId,i)}vn(e){return cv(e).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cb(l,e,i){const u=Jf(e,i.path),p=u[1],_=IDBKeyRange.lowerBound(u);let w=!1;return lp(l).X({range:_,Z:!0},(O,B,z)=>{const[ne,be,Le]=O;ne===e&&be===p&&(w=!0),z.done()}).next(()=>w)}function xd(l){return qs(l,"mutations")}function lp(l){return qs(l,"documentMutations")}function cv(l){return qs(l,"mutationQueues")}class kh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new kh(0)}static Sn(){return new kh(-1)}}class up{constructor(e,i){this.referenceDelegate=e,this.Tt=i}allocateTargetId(e){return this.Dn(e).next(i=>{const u=new kh(i.highestTargetId);return i.highestTargetId=u.next(),this.Cn(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(i=>gn.fromTimestamp(new ar(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,u){return this.Dn(e).next(p=>(p.highestListenSequenceNumber=i,u&&(p.lastRemoteSnapshotVersion=u.toTimestamp()),i>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=i),this.Cn(e,p)))}addTargetData(e,i){return this.xn(e,i).next(()=>this.Dn(e).next(u=>(u.targetCount+=1,this.Nn(i,u),this.Cn(e,u))))}updateTargetData(e,i){return this.xn(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>_l(e).delete(i.targetId)).next(()=>this.Dn(e)).next(u=>(Ft(u.targetCount>0),u.targetCount-=1,this.Cn(e,u)))}removeTargets(e,i,u){let p=0;const _=[];return _l(e).X((w,O)=>{const B=Nd(O);B.sequenceNumber<=i&&null===u.get(B.targetId)&&(p++,_.push(this.removeTargetData(e,B)))}).next(()=>Qe.waitFor(_)).next(()=>p)}forEachTarget(e,i){return _l(e).X((u,p)=>{const _=Nd(p);i(_)})}Dn(e){return Tb(e).get("targetGlobalKey").next(i=>(Ft(null!==i),i))}Cn(e,i){return Tb(e).put("targetGlobalKey",i)}xn(e,i){return _l(e).put(tp(this.Tt,i))}Nn(e,i){let u=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,u=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,u=!0),u}getTargetCount(e){return this.Dn(e).next(i=>i.targetCount)}getTargetData(e,i){const u=Hl(i),p=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]);let _=null;return _l(e).X({range:p,index:"queryTargetsIndex"},(w,O,B)=>{const z=Nd(O);Sc(i,z.target)&&(_=z,B.done())}).next(()=>_)}addMatchingKeys(e,i,u){const p=[],_=Pd(e);return i.forEach(w=>{const O=Wo(w.path);p.push(_.put({targetId:u,path:O})),p.push(this.referenceDelegate.addReference(e,u,w))}),Qe.waitFor(p)}removeMatchingKeys(e,i,u){const p=Pd(e);return Qe.forEach(i,_=>{const w=Wo(_.path);return Qe.waitFor([p.delete([u,w]),this.referenceDelegate.removeReference(e,u,_)])})}removeMatchingKeysForTargetId(e,i){const u=Pd(e),p=IDBKeyRange.bound([i],[i+1],!1,!0);return u.delete(p)}getMatchingKeysForTargetId(e,i){const u=IDBKeyRange.bound([i],[i+1],!1,!0),p=Pd(e);let _=lr();return p.X({range:u,Z:!0},(w,O,B)=>{const z=ic(w[1]),ne=new zt(z);_=_.add(ne)}).next(()=>_)}containsKey(e,i){const u=Wo(i.path),p=IDBKeyRange.bound([u],[du(u)],!1,!0);let _=0;return Pd(e).X({index:"documentTargetsIndex",Z:!0,range:p},([w,O],B,z)=>{0!==w&&(_++,z.done())}).next(()=>_>0)}ie(e,i){return _l(e).get(i).next(u=>u?Nd(u):null)}}function _l(l){return qs(l,"targets")}function Tb(l){return qs(l,"targetGlobal")}function Pd(l){return qs(l,"targetDocuments")}function sE([l,e],[i,u]){const p=On(l,i);return 0===p?On(e,u):p}class Sb{constructor(e){this.kn=e,this.buffer=new ci(sE),this.$n=0}Mn(){return++this.$n}On(e){const i=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(i);else{const u=this.buffer.last();sE(i,u)<0&&(this.buffer=this.buffer.delete(u).add(i))}}get maxValue(){return this.buffer.last()[0]}}class Ab{constructor(e,i,u){this.garbageCollector=e,this.asyncQueue=i,this.localStore=u,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var i=this;lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){i.Fn=null;try{yield i.localStore.collectGarbage(i.garbageCollector)}catch(u){bs(u)?lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Hs(u)}yield i.Bn(3e5)}))}}class wu{constructor(e,i){this.Ln=e,this.params=i}calculateTargetCount(e,i){return this.Ln.qn(e).next(u=>Math.floor(i/100*u))}nthSequenceNumber(e,i){if(0===i)return Qe.resolve(Xi.at);const u=new Sb(i);return this.Ln.forEachTarget(e,p=>u.On(p.sequenceNumber)).next(()=>this.Ln.Un(e,p=>u.On(p))).next(()=>u.maxValue)}removeTargets(e,i,u){return this.Ln.removeTargets(e,i,u)}removeOrphanedDocuments(e,i){return this.Ln.removeOrphanedDocuments(e,i)}collect(e,i){return-1===this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(Ib)):this.getCacheSize(e).next(u=>u<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ib):this.Kn(e,i))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,i){let u,p,_,w,O,B,z;const ne=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(be=>(be>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${be}`),p=this.params.maximumSequenceNumbersToCollect):p=be,w=Date.now(),this.nthSequenceNumber(e,p))).next(be=>(u=be,O=Date.now(),this.removeTargets(e,u,i))).next(be=>(_=be,B=Date.now(),this.removeOrphanedDocuments(e,u))).next(be=>(z=Date.now(),un()<=Xe.in.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ne}ms\n\tDetermined least recently used ${p} in `+(O-w)+`ms\n\tRemoved ${_} targets in `+(B-O)+`ms\n\tRemoved ${be} documents in `+(z-B)+`ms\nTotal Duration: ${z-ne}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:_,documentsRemoved:be})))}}class ji{constructor(e,i){this.db=e,this.garbageCollector=new wu(this,i)}qn(e){const i=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(u=>i.next(p=>u+p))}Gn(e){let i=0;return this.Un(e,u=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}Un(e,i){return this.Qn(e,(u,p)=>i(p))}addReference(e,i,u){return kd(e,u)}removeReference(e,i,u){return kd(e,u)}removeTargets(e,i,u){return this.db.getTargetCache().removeTargets(e,i,u)}markPotentiallyOrphaned(e,i){return kd(e,i)}jn(e,i){return function(u,p){let _=!1;return cv(u).tt(w=>Cb(u,w,p).next(O=>(O&&(_=!0),Qe.resolve(!O)))).next(()=>_)}(e,i)}removeOrphanedDocuments(e,i){const u=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let _=0;return this.Qn(e,(w,O)=>{if(O<=i){const B=this.jn(e,w).next(z=>{if(!z)return _++,u.getEntry(e,w).next(()=>(u.removeEntry(w,gn.min()),Pd(e).delete([0,Wo(w.path)])))});p.push(B)}}).next(()=>Qe.waitFor(p)).next(()=>u.apply(e)).next(()=>_)}removeTarget(e,i){const u=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,u)}updateLimboDocument(e,i){return kd(e,i)}Qn(e,i){const u=Pd(e);let p,_=Xi.at;return u.X({index:"documentTargetsIndex"},([w,O],{path:B,sequenceNumber:z})=>{0===w?(_!==Xi.at&&i(new zt(ic(p)),_),_=z,p=B):_=Xi.at}).next(()=>{_!==Xi.at&&i(new zt(ic(p)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kd(l,e){return Pd(l).put((u=l.currentSequenceNumber,{targetId:0,path:Wo(e.path),sequenceNumber:u}));var u}class w_{constructor(){this.changes=new Ju(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const u=this.changes.get(i);return void 0!==u?Qe.resolve(u):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Eg{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,i,u){return Fh(e).put(u)}removeEntry(e,i,u){return Fh(e).delete(function(p,_){const w=p.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Nh(_),w[w.length-1]]}(i,u))}updateMetadata(e,i){return this.getMetadata(e).next(u=>(u.byteSize+=i,this.zn(e,u)))}getEntry(e,i){let u=Rr.newInvalidDocument(i);return Fh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Eu(i))},(p,_)=>{u=this.Wn(i,_)}).next(()=>u)}Hn(e,i){let u={size:0,document:Rr.newInvalidDocument(i)};return Fh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Eu(i))},(p,_)=>{u={document:this.Wn(i,_),size:v_(_)}}).next(()=>u)}getEntries(e,i){let u=Sa();return this.Jn(e,i,(p,_)=>{const w=this.Wn(p,_);u=u.insert(p,w)}).next(()=>u)}Yn(e,i){let u=Sa(),p=new ls(zt.comparator);return this.Jn(e,i,(_,w)=>{const O=this.Wn(_,w);u=u.insert(_,O),p=p.insert(_,v_(w))}).next(()=>({documents:u,Zn:p}))}Jn(e,i,u){if(i.isEmpty())return Qe.resolve();let p=new ci(E_);i.forEach(B=>p=p.add(B));const _=IDBKeyRange.bound(Eu(p.first()),Eu(p.last())),w=p.getIterator();let O=w.getNext();return Fh(e).X({index:"documentKeyIndex",range:_},(B,z,ne)=>{const be=zt.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;O&&E_(O,be)<0;)u(O,null),O=w.getNext();O&&O.isEqual(be)&&(u(O,z),O=w.hasNext()?w.getNext():null),O?ne.j(Eu(O)):ne.done()}).next(()=>{for(;O;)u(O,null),O=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,i,u,p){const _=i.path,w=[_.popLast().toArray(),_.lastSegment(),Nh(u.readTime),u.documentKey.path.isEmpty()?"":u.documentKey.path.lastSegment()],O=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fh(e).W(IDBKeyRange.bound(w,O,!0)).next(B=>{let z=Sa();for(const ne of B){const be=this.Wn(zt.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);be.isFoundDocument()&&(b(i,be)||p.has(be.key))&&(z=z.insert(be.key,be))}return z})}getAllFromCollectionGroup(e,i,u,p){let _=Sa();const w=cp(i,u),O=cp(i,Oi.max());return Fh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,O,!0)},(B,z,ne)=>{const be=this.Wn(zt.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);_=_.insert(be.key,be),_.size===p&&ne.done()}).next(()=>_)}newChangeBuffer(e){return new Ob(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return Za(e).get("remoteDocumentGlobalKey").next(i=>(Ft(!!i),i))}zn(e,i){return Za(e).put("remoteDocumentGlobalKey",i)}Wn(e,i){if(i){const u=function pg(l,e){let i;if(e.document)i=Sd(l.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const u=zt.fromSegments(e.noDocument.path),p=sc(e.noDocument.readTime);i=Rr.newNoDocument(u,p),e.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ct();{const u=zt.fromSegments(e.unknownDocument.path),p=sc(e.unknownDocument.version);i=Rr.newUnknownDocument(u,p)}}return e.readTime&&i.setReadTime(function(u){const p=new ar(u[0],u[1]);return gn.fromTimestamp(p)}(e.readTime)),i}(this.Tt,i);if(!u.isNoDocument()||!u.version.isEqual(gn.min()))return u}return Rr.newInvalidDocument(e)}}function dv(l){return new Eg(l)}class Ob extends w_{constructor(e,i){super(),this.Xn=e,this.trackRemovals=i,this.ts=new Ju(u=>u.toString(),(u,p)=>u.isEqual(p))}applyChanges(e){const i=[];let u=0,p=new ci((_,w)=>On(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const O=this.ts.get(_);if(i.push(this.Xn.removeEntry(e,_,O.readTime)),w.isValidDocument()){const B=kc(this.Xn.Tt,w);p=p.add(_.path.popLast());const z=v_(B);u+=z-O.size,i.push(this.Xn.addEntry(e,_,B))}else if(u-=O.size,this.trackRemovals){const B=kc(this.Xn.Tt,w.convertToNoDocument(gn.min()));i.push(this.Xn.addEntry(e,_,B))}}),p.forEach(_=>{i.push(this.Xn.indexManager.addToCollectionParentIndex(e,_))}),i.push(this.Xn.updateMetadata(e,u)),Qe.waitFor(i)}getFromCache(e,i){return this.Xn.Hn(e,i).next(u=>(this.ts.set(i,{size:u.size,readTime:u.document.readTime}),u.document))}getAllFromCache(e,i){return this.Xn.Yn(e,i).next(({documents:u,Zn:p})=>(p.forEach((_,w)=>{this.ts.set(_,{size:w,readTime:u.get(_).readTime})}),u))}}function Za(l){return qs(l,"remoteDocumentGlobal")}function Fh(l){return qs(l,"remoteDocumentsV14")}function Eu(l){const e=l.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cp(l,e){const i=e.documentKey.path.toArray();return[l,Nh(e.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function E_(l,e){const i=l.path.toArray(),u=e.path.toArray();let p=0;for(let _=0;_<i.length-2&&_<u.length-2;++_)if(p=On(i[_],u[_]),p)return p;return p=On(i.length,u.length),p||(p=On(i[i.length-2],u[u.length-2]),p||On(i[i.length-1],u[u.length-1]))}class Nb{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class hv{constructor(e,i,u,p){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=u,this.indexManager=p}getDocument(e,i){let u=null;return this.documentOverlayCache.getOverlay(e,i).next(p=>(u=p,this.remoteDocumentCache.getEntry(e,i))).next(p=>(null!==u&&Th(u.mutation,p,$o.empty(),ar.now()),p))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(u=>this.getLocalViewOfDocuments(e,u,lr()).next(()=>u))}getLocalViewOfDocuments(e,i,u=lr()){const p=Nl();return this.populateOverlays(e,p,i).next(()=>this.computeViews(e,i,p,u).next(_=>{let w=Mc();return _.forEach((O,B)=>{w=w.insert(O,B.overlayedDocument)}),w}))}getOverlayedDocuments(e,i){const u=Nl();return this.populateOverlays(e,u,i).next(()=>this.computeViews(e,i,u,lr()))}populateOverlays(e,i,u){const p=[];return u.forEach(_=>{i.has(_)||p.push(_)}),this.documentOverlayCache.getOverlays(e,p).next(_=>{_.forEach((w,O)=>{i.set(w,O)})})}computeViews(e,i,u,p){let _=Sa();const w=Ed(),O=Ed();return i.forEach((B,z)=>{const ne=u.get(z.key);p.has(z.key)&&(void 0===ne||ne.mutation instanceof Qu)?_=_.insert(z.key,z):void 0!==ne?(w.set(z.key,ne.mutation.getFieldMask()),Th(ne.mutation,z,ne.mutation.getFieldMask(),ar.now())):w.set(z.key,$o.empty())}),this.recalculateAndSaveOverlays(e,_).next(B=>(B.forEach((z,ne)=>w.set(z,ne)),i.forEach((z,ne)=>{var be;return O.set(z,new Nb(ne,null!==(be=w.get(z))&&void 0!==be?be:null))}),O))}recalculateAndSaveOverlays(e,i){const u=Ed();let p=new ls((w,O)=>w-O),_=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(w=>{for(const O of w)O.keys().forEach(B=>{const z=i.get(B);if(null===z)return;let ne=u.get(B)||$o.empty();ne=O.applyToLocalView(z,ne),u.set(B,ne);const be=(p.get(O.batchId)||lr()).add(B);p=p.insert(O.batchId,be)})}).next(()=>{const w=[],O=p.getReverseIterator();for(;O.hasNext();){const B=O.getNext(),z=B.key,ne=B.value,be=sg();ne.forEach(Le=>{if(!_.has(Le)){const gt=Qm(i.get(Le),u.get(Le));null!==gt&&be.set(Le,gt),_=_.add(Le)}}),w.push(this.documentOverlayCache.saveOverlays(e,z,be))}return Qe.waitFor(w)}).next(()=>u)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(u=>this.recalculateAndSaveOverlays(e,u))}getDocumentsMatchingQuery(e,i,u){return zt.isDocumentKey((p=i).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,i.path):_d(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,u):this.getDocumentsMatchingCollectionQuery(e,i,u);var p}getNextDocuments(e,i,u,p){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,u,p).next(_=>{const w=p-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,u.largestBatchId,p-_.size):Qe.resolve(Nl());let O=-1,B=_;return w.next(z=>Qe.forEach(z,(ne,be)=>(O<be.largestBatchId&&(O=be.largestBatchId),_.get(ne)?Qe.resolve():this.remoteDocumentCache.getEntry(e,ne).next(Le=>{B=B.insert(ne,Le)}))).next(()=>this.populateOverlays(e,z,_)).next(()=>this.computeViews(e,B,z,lr())).next(ne=>({batchId:O,changes:o_(ne)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new zt(i)).next(u=>{let p=Mc();return u.isFoundDocument()&&(p=p.insert(u.key,u)),p})}getDocumentsMatchingCollectionGroupQuery(e,i,u){const p=i.collectionGroup;let _=Mc();return this.indexManager.getCollectionParents(e,p).next(w=>Qe.forEach(w,O=>{const B=(z=i,ne=O.child(p),new qa(ne,null,z.explicitOrderBy.slice(),z.filters.slice(),z.limit,z.limitType,z.startAt,z.endAt));var z,ne;return this.getDocumentsMatchingCollectionQuery(e,B,u).next(z=>{z.forEach((ne,be)=>{_=_.insert(ne,be)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,i,u){let p;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,u.largestBatchId).next(_=>(p=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,u,p))).next(_=>{p.forEach((O,B)=>{const z=B.getKey();null===_.get(z)&&(_=_.insert(z,Rr.newInvalidDocument(z)))});let w=Mc();return _.forEach((O,B)=>{const z=p.get(O);void 0!==z&&Th(z.mutation,B,$o.empty(),ar.now()),b(i,B)&&(w=w.insert(O,B))}),w})}}class fv{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,i){return Qe.resolve(this.es.get(i))}saveBundleMetadata(e,i){var u;return this.es.set(i.id,{id:(u=i).id,version:u.version,createTime:cs(u.createTime)}),Qe.resolve()}getNamedQuery(e,i){return Qe.resolve(this.ns.get(i))}saveNamedQuery(e,i){return this.ns.set(i.name,{name:(u=i).name,query:gg(u.bundledQuery),readTime:cs(u.readTime)}),Qe.resolve();var u}}class Mb{constructor(){this.overlays=new ls(zt.comparator),this.ss=new Map}getOverlay(e,i){return Qe.resolve(this.overlays.get(i))}getOverlays(e,i){const u=Nl();return Qe.forEach(i,p=>this.getOverlay(e,p).next(_=>{null!==_&&u.set(p,_)})).next(()=>u)}saveOverlays(e,i,u){return u.forEach((p,_)=>{this.ce(e,i,_)}),Qe.resolve()}removeOverlaysForBatchId(e,i,u){const p=this.ss.get(u);return void 0!==p&&(p.forEach(_=>this.overlays=this.overlays.remove(_)),this.ss.delete(u)),Qe.resolve()}getOverlaysForCollection(e,i,u){const p=Nl(),_=i.length+1,w=new zt(i.child("")),O=this.overlays.getIteratorFrom(w);for(;O.hasNext();){const B=O.getNext().value,z=B.getKey();if(!i.isPrefixOf(z.path))break;z.path.length===_&&B.largestBatchId>u&&p.set(B.getKey(),B)}return Qe.resolve(p)}getOverlaysForCollectionGroup(e,i,u,p){let _=new ls((z,ne)=>z-ne);const w=this.overlays.getIterator();for(;w.hasNext();){const z=w.getNext().value;if(z.getKey().getCollectionGroup()===i&&z.largestBatchId>u){let ne=_.get(z.largestBatchId);null===ne&&(ne=Nl(),_=_.insert(z.largestBatchId,ne)),ne.set(z.getKey(),z)}}const O=Nl(),B=_.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((z,ne)=>O.set(z,ne)),!(O.size()>=p)););return Qe.resolve(O)}ce(e,i,u){const p=this.overlays.get(u.key);if(null!==p){const w=this.ss.get(p.largestBatchId).delete(u.key);this.ss.set(p.largestBatchId,w)}this.overlays=this.overlays.insert(u.key,new fg(i,u));let _=this.ss.get(i);void 0===_&&(_=lr(),this.ss.set(i,_)),this.ss.set(i,_.add(u.key))}}class Gc{constructor(){this.rs=new ci(ns.os),this.us=new ci(ns.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,i){const u=new ns(e,i);this.rs=this.rs.add(u),this.us=this.us.add(u)}hs(e,i){e.forEach(u=>this.addReference(u,i))}removeReference(e,i){this.ls(new ns(e,i))}fs(e,i){e.forEach(u=>this.removeReference(u,i))}ds(e){const i=new zt(new kn([])),u=new ns(i,e),p=new ns(i,e+1),_=[];return this.us.forEachInRange([u,p],w=>{this.ls(w),_.push(w.key)}),_}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const i=new zt(new kn([])),u=new ns(i,e),p=new ns(i,e+1);let _=lr();return this.us.forEachInRange([u,p],w=>{_=_.add(w.key)}),_}containsKey(e){const i=new ns(e,0),u=this.rs.firstAfterOrEqual(i);return null!==u&&e.isEqual(u.key)}}class ns{constructor(e,i){this.key=e,this.gs=i}static os(e,i){return zt.comparator(e.key,i.key)||On(e.gs,i.gs)}static cs(e,i){return On(e.gs,i.gs)||zt.comparator(e.key,i.key)}}class Jn{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.ys=1,this.ps=new ci(ns.os)}checkEmpty(e){return Qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,i,u,p){const _=this.ys;this.ys++;const w=new Od(_,i,u,p);this.mutationQueue.push(w);for(const O of p)this.ps=this.ps.add(new ns(O.key,_)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return Qe.resolve(w)}lookupMutationBatch(e,i){return Qe.resolve(this.Is(i))}getNextMutationBatchAfterBatchId(e,i){const p=this.Ts(i+1),_=p<0?0:p;return Qe.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const u=new ns(i,0),p=new ns(i,Number.POSITIVE_INFINITY),_=[];return this.ps.forEachInRange([u,p],w=>{const O=this.Is(w.gs);_.push(O)}),Qe.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,i){let u=new ci(On);return i.forEach(p=>{const _=new ns(p,0),w=new ns(p,Number.POSITIVE_INFINITY);this.ps.forEachInRange([_,w],O=>{u=u.add(O.gs)})}),Qe.resolve(this.Es(u))}getAllMutationBatchesAffectingQuery(e,i){const u=i.path,p=u.length+1;let _=u;zt.isDocumentKey(_)||(_=_.child(""));const w=new ns(new zt(_),0);let O=new ci(On);return this.ps.forEachWhile(B=>{const z=B.key.path;return!!u.isPrefixOf(z)&&(z.length===p&&(O=O.add(B.gs)),!0)},w),Qe.resolve(this.Es(O))}Es(e){const i=[];return e.forEach(u=>{const p=this.Is(u);null!==p&&i.push(p)}),i}removeMutationBatch(e,i){Ft(0===this.As(i.batchId,"removed")),this.mutationQueue.shift();let u=this.ps;return Qe.forEach(i.mutations,p=>{const _=new ns(p.key,i.batchId);return u=u.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,p.key)}).next(()=>{this.ps=u})}Pn(e){}containsKey(e,i){const u=new ns(i,0),p=this.ps.firstAfterOrEqual(u);return Qe.resolve(i.isEqual(p&&p.key))}performConsistencyCheck(e){return Qe.resolve()}As(e,i){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const i=this.Ts(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class dp{constructor(e){this.Rs=e,this.docs=new ls(zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const u=i.key,p=this.docs.get(u),_=p?p.size:0,w=this.Rs(i);return this.docs=this.docs.insert(u,{document:i.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const u=this.docs.get(i);return Qe.resolve(u?u.document.mutableCopy():Rr.newInvalidDocument(i))}getEntries(e,i){let u=Sa();return i.forEach(p=>{const _=this.docs.get(p);u=u.insert(p,_?_.document.mutableCopy():Rr.newInvalidDocument(p))}),Qe.resolve(u)}getDocumentsMatchingQuery(e,i,u,p){let _=Sa();const w=i.path,O=new zt(w.child("")),B=this.docs.getIteratorFrom(O);for(;B.hasNext();){const{key:z,value:{document:ne}}=B.getNext();if(!w.isPrefixOf(z.path))break;z.path.length>w.length+1||to(Wa(ne),u)<=0||(p.has(ne.key)||b(i,ne))&&(_=_.insert(ne.key,ne.mutableCopy()))}return Qe.resolve(_)}getAllFromCollectionGroup(e,i,u,p){Ct()}Ps(e,i){return Qe.forEach(this.docs,u=>i(u))}newChangeBuffer(e){return new D_(this)}getSize(e){return Qe.resolve(this.size)}}class D_ extends w_{constructor(e){super(),this.Xn=e}applyChanges(e){const i=[];return this.changes.forEach((u,p)=>{p.isValidDocument()?i.push(this.Xn.addEntry(e,p)):this.Xn.removeEntry(u)}),Qe.waitFor(i)}getFromCache(e,i){return this.Xn.getEntry(e,i)}getAllFromCache(e,i){return this.Xn.getEntries(e,i)}}class hp{constructor(e){this.persistence=e,this.vs=new Ju(i=>Hl(i),Sc),this.lastRemoteSnapshotVersion=gn.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Gc,this.targetCount=0,this.Ss=kh.Vn()}forEachTarget(e,i){return this.vs.forEach((u,p)=>i(p)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,i,u){return u&&(this.lastRemoteSnapshotVersion=u),i>this.bs&&(this.bs=i),Qe.resolve()}xn(e){this.vs.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Ss=new kh(i),this.highestTargetId=i),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,i){return this.xn(i),this.targetCount+=1,Qe.resolve()}updateTargetData(e,i){return this.xn(i),Qe.resolve()}removeTargetData(e,i){return this.vs.delete(i.target),this.Vs.ds(i.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,i,u){let p=0;const _=[];return this.vs.forEach((w,O)=>{O.sequenceNumber<=i&&null===u.get(O.targetId)&&(this.vs.delete(w),_.push(this.removeMatchingKeysForTargetId(e,O.targetId)),p++)}),Qe.waitFor(_).next(()=>p)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,i){const u=this.vs.get(i)||null;return Qe.resolve(u)}addMatchingKeys(e,i,u){return this.Vs.hs(i,u),Qe.resolve()}removeMatchingKeys(e,i,u){this.Vs.fs(i,u);const p=this.persistence.referenceDelegate,_=[];return p&&i.forEach(w=>{_.push(p.markPotentiallyOrphaned(e,w))}),Qe.waitFor(_)}removeMatchingKeysForTargetId(e,i){return this.Vs.ds(i),Qe.resolve()}getMatchingKeysForTargetId(e,i){const u=this.Vs.ws(i);return Qe.resolve(u)}containsKey(e,i){return Qe.resolve(this.Vs.containsKey(i))}}class jc{constructor(e,i){this.Ds={},this.overlays={},this.Cs=new Xi(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new hp(this),this.indexManager=new wb,this.remoteDocumentCache=new dp(u=>this.referenceDelegate.ks(u)),this.Tt=new ov(i),this.$s=new fv(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new Mb,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let u=this.Ds[e.toKey()];return u||(u=new Jn(i,this.referenceDelegate),this.Ds[e.toKey()]=u),u}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,i,u){lt("MemoryPersistence","Starting transaction:",e);const p=new pv(this.Cs.next());return this.referenceDelegate.Ms(),u(p).next(_=>this.referenceDelegate.Os(p).next(()=>_)).toPromise().then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e,i){return Qe.or(Object.values(this.Ds).map(u=>()=>u.containsKey(e,i)))}}class pv extends js{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Bs=new Gc,this.Ls=null}static qs(e){return new Dg(e)}get Us(){if(this.Ls)return this.Ls;throw Ct()}addReference(e,i,u){return this.Bs.addReference(u,i),this.Us.delete(u.toString()),Qe.resolve()}removeReference(e,i,u){return this.Bs.removeReference(u,i),this.Us.add(u.toString()),Qe.resolve()}markPotentiallyOrphaned(e,i){return this.Us.add(i.toString()),Qe.resolve()}removeTarget(e,i){this.Bs.ds(i.targetId).forEach(p=>this.Us.add(p.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,i.targetId).next(p=>{p.forEach(_=>this.Us.add(_.toString()))}).next(()=>u.removeTargetData(e,i))}Ms(){this.Ls=new Set}Os(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Us,u=>{const p=zt.fromPath(u);return this.Ks(e,p).next(_=>{_||i.removeEntry(p,gn.min())})}).next(()=>(this.Ls=null,i.apply(e)))}updateLimboDocument(e,i){return this.Ks(e,i).next(u=>{u?this.Us.delete(i.toString()):this.Us.add(i.toString())})}ks(e){return 0}Ks(e,i){return Qe.or([()=>Qe.resolve(this.Bs.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Fs(e,i)])}}class oE{constructor(e){this.Tt=e}F(e,i,u,p){const _=new ta("createOrUpgrade",i);var O;u<1&&p>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0}),O.createObjectStore("documentMutations"),gv(e),function(O){O.createObjectStore("remoteDocuments")}(e));let w=Qe.resolve();return u<3&&p>=3&&(0!==u&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),gv(e)),w=w.next(()=>function(O){const B=O.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",z)}(_))),u<4&&p>=4&&(0!==u&&(w=w.next(()=>function(O,B){return B.store("mutations").W().next(z=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0});const ne=B.store("mutations"),be=z.map(Le=>ne.put(Le));return Qe.waitFor(be)})}(e,_))),w=w.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),u<5&&p>=5&&(w=w.next(()=>this.Gs(_))),u<6&&p>=6&&(w=w.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(_)))),u<7&&p>=7&&(w=w.next(()=>this.js(_))),u<8&&p>=8&&(w=w.next(()=>this.zs(e,_))),u<9&&p>=9&&(w=w.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),u<10&&p>=10&&(w=w.next(()=>this.Ws(_))),u<11&&p>=11&&(w=w.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),u<12&&p>=12&&(w=w.next(()=>{!function(O){const B=O.createObjectStore("documentOverlays",{keyPath:iv});B.createIndex("collectionPathOverlayIndex",pb,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",gb,{unique:!1})}(e)})),u<13&&p>=13&&(w=w.next(()=>function(O){const B=O.createObjectStore("remoteDocumentsV14",{keyPath:nv});B.createIndex("documentKeyIndex",iE),B.createIndex("collectionGroupIndex",hb)}(e)).next(()=>this.Hs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),u<14&&p>=14&&(w=w.next(()=>this.Js(e,_))),u<15&&p>=15&&(w=w.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:Ks}).createIndex("sequenceNumberIndex",fb,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:dg}).createIndex("documentKeyIndex",ep,{unique:!1})}(e))),w}Qs(e){let i=0;return e.store("remoteDocuments").X((u,p)=>{i+=v_(p)}).next(()=>{const u={byteSize:i};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",u)})}Gs(e){const i=e.store("mutationQueues"),u=e.store("mutations");return i.W().next(p=>Qe.forEach(p,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return u.W("userMutationsIndex",w).next(O=>Qe.forEach(O,B=>{Ft(B.userId===_.userId);const z=fr(this.Tt,B);return ap(e,_.userId,z).next(()=>{})}))}))}js(e){const i=e.store("targetDocuments"),u=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(p=>{const _=[];return u.X((w,O)=>{const B=new kn(w),z=[0,Wo(B)];_.push(i.get(z).next(ne=>ne?Qe.resolve():i.put({targetId:0,path:Wo(B),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>Qe.waitFor(_))})}zs(e,i){e.createObjectStore("collectionParents",{keyPath:rv});const u=i.store("collectionParents"),p=new sp,_=w=>{if(p.add(w)){const O=w.lastSegment(),B=w.popLast();return u.put({collectionId:O,parent:Wo(B)})}};return i.store("remoteDocuments").X({Z:!0},(w,O)=>{const B=new kn(w);return _(B.popLast())}).next(()=>i.store("documentMutations").X({Z:!0},([w,O,B],z)=>{const ne=ic(O);return _(ne.popLast())}))}Ws(e){const i=e.store("targets");return i.X((u,p)=>{const _=Nd(p),w=tp(this.Tt,_);return i.put(w)})}Hs(e,i){const u=i.store("remoteDocuments"),p=[];return u.X((_,w)=>{const O=i.store("remoteDocumentsV14"),B=(z=w,z.document?new zt(kn.fromString(z.document.name).popFirst(5)):z.noDocument?zt.fromSegments(z.noDocument.path):z.unknownDocument?zt.fromSegments(z.unknownDocument.path):Ct()).path.toArray();var z;const ne={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};p.push(O.put(ne))}).next(()=>Qe.waitFor(p))}Js(e,i){const u=i.store("mutations"),p=dv(this.Tt),_=new jc(Dg.qs,this.Tt.oe);return u.W().next(w=>{const O=new Map;return w.forEach(B=>{var z;let ne=null!==(z=O.get(B.userId))&&void 0!==z?z:lr();fr(this.Tt,B).keys().forEach(be=>ne=ne.add(be)),O.set(B.userId,ne)}),Qe.forEach(O,(B,z)=>{const ne=new ce(z),be=Fc.ue(this.Tt,ne),Le=_.getIndexManager(ne),gt=b_.ue(ne,this.Tt,Le,_.referenceDelegate);return new hv(p,gt,be,Le).recalculateAndSaveOverlaysForDocumentKeys(new bu(i,Xi.at),B).next()})})}}function gv(l){l.createObjectStore("targetDocuments",{keyPath:so}).createIndex("documentTargetsIndex",Pc,{unique:!0}),l.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xf,{unique:!0}),l.createObjectStore("targetGlobal")}const mv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _v{constructor(e,i,u,p,_,w,O,B,z,ne,be=15){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=u,this.Ys=_,this.window=w,this.document=O,this.Zs=z,this.Xs=ne,this.ti=be,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=Le=>Promise.resolve(),!_v.C())throw new _t(Ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ji(this,p),this.oi=i+"main",this.Tt=new ov(B),this.ui=new Eo(this.oi,this.ti,new oE(this.Tt)),this.Ns=new up(this.referenceDelegate,this.Tt),this.remoteDocumentCache=dv(this.Tt),this.$s=new Rh,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ne&&dn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _t(Ke.FAILED_PRECONDITION,mv);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Xi(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var i=this;return this.ri=function(){var u=(0,ge.Z)(function*(p){if(i.started)return e(p)});return function(p){return u.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var i=(0,ge.Z)(function*(u){null===u.newVersion&&(yield e())});return function(u){return i.apply(this,arguments)}}())}setNetworkEnabled(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,ge.Z)(function*(){i.started&&(yield i.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ig(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(i=>{i||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(i=>this.isPrimary&&!i?this.mi(e).next(()=>!1):!!i&&this.gi(e).next(()=>!0))).catch(e=>{if(bs(e))return lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return I_(e).get("owner").next(i=>Qe.resolve(this.yi(i)))}pi(e){return Ig(e).delete(this.clientId)}Ii(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const i=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",u=>{const p=qs(u,"clientMetadata");return p.W().next(_=>{const w=e.Ei(_,18e5),O=_.filter(B=>-1===w.indexOf(B));return Qe.forEach(O,B=>p.delete(B.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ci)for(const u of i)e.ci.removeItem(e.Ai(u.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?Qe.resolve(!0):I_(e).get("owner").next(i=>{if(null!==i&&this.Ti(i.leaseTimestampMs,5e3)&&!this.Ri(i.ownerId)){if(this.yi(i)&&this.networkEnabled)return!0;if(!this.yi(i)){if(!i.allowTabSynchronization)throw new _t(Ke.FAILED_PRECONDITION,mv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ig(e).W().next(u=>void 0===this.Ei(u,5e3).find(p=>!(this.clientId===p.clientId||!(!this.networkEnabled&&p.networkEnabled||!this.inForeground&&p.inForeground&&this.networkEnabled===p.networkEnabled))))}).next(i=>(this.isPrimary!==i&&lt("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],i=>{const u=new bu(i,Xi.at);return e.mi(u).next(()=>e.pi(u))}),e.ui.close(),e.Vi()})()}Ei(e,i){return e.filter(u=>this.Ti(u.updateTimeMs,i)&&!this.Ri(u.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Ig(e).W().next(i=>this.Ei(i,18e5).map(u=>u.clientId)))}get started(){return this.xs}getMutationQueue(e,i){return b_.ue(e,this.Tt,i,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Eb(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Fc.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,i,u){lt("IndexedDbPersistence","Starting transaction:",e);const p="readonly"===i?"readonly":"readwrite",_=15===(w=this.ti)?yb:14===w?_b:13===w?f_:12===w?mb:11===w?sv:void Ct();var w;let O;return this.ui.runTransaction(e,p,_,B=>(O=new bu(B,this.Cs?this.Cs.next():Xi.at),"readwrite-primary"===i?this._i(O).next(z=>!!z||this.wi(O)).next(z=>{if(!z)throw dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new _t(Ke.FAILED_PRECONDITION,Wu);return u(O)}).next(z=>this.gi(O).next(()=>z)):this.Di(O).next(()=>u(O)))).then(B=>(O.raiseOnCommittedEvent(),B))}Di(e){return I_(e).get("owner").next(i=>{if(null!==i&&this.Ti(i.leaseTimestampMs,5e3)&&!this.Ri(i.ownerId)&&!this.yi(i)&&!(this.Xs||this.allowTabSynchronization&&i.allowTabSynchronization))throw new _t(Ke.FAILED_PRECONDITION,mv)})}gi(e){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return I_(e).put("owner",i)}static C(){return Eo.C()}mi(e){const i=I_(e);return i.get("owner").next(u=>this.yi(u)?(lt("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):Qe.resolve())}Ti(e,i){const u=Date.now();return!(e<u-i||e>u&&(dn(`Detected an update time that is in the future: ${e} > ${u}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const i=/(?:Version|Mobile)\/1[456]/;(0,qe.G6)()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var i;try{const u=null!==(null===(i=this.ci)||void 0===i?void 0:i.getItem(this.Ai(e)));return lt("IndexedDbPersistence",`Client '${e}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return dn("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){dn("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function I_(l){return qs(l,"owner")}function Ig(l){return qs(l,"clientMetadata")}function C_(l,e){let i=l.projectId;return l.isDefaultDatabase||(i+="."+l.database),"firestore/"+e+"/"+i+"/"}class Hc{constructor(e,i,u,p){this.targetId=e,this.fromCache=i,this.Ci=u,this.xi=p}static Ni(e,i){let u=lr(),p=lr();for(const _ of i.docChanges)switch(_.type){case 0:u=u.add(_.doc.key);break;case 1:p=p.add(_.doc.key)}return new Hc(e,i.fromCache,u,p)}}class Rb{constructor(){this.ki=!1}initialize(e,i){this.$i=e,this.indexManager=i,this.ki=!0}getDocumentsMatchingQuery(e,i,u,p){return this.Mi(e,i).next(_=>_||this.Oi(e,i,p,u)).next(_=>_||this.Fi(e,i))}Mi(e,i){if(Io(i))return Qe.resolve(null);let u=Rs(i);return this.indexManager.getIndexType(e,u).next(p=>0===p?null:(null!==i.limit&&1===p&&(i=vd(i,null,"F"),u=Rs(i)),this.indexManager.getDocumentsMatchingTarget(e,u).next(_=>{const w=lr(..._);return this.$i.getDocuments(e,w).next(O=>this.indexManager.getMinOffset(e,u).next(B=>{const z=this.Bi(i,O);return this.Li(i,z,w,B.readTime)?this.Mi(e,vd(i,null,"F")):this.qi(e,z,i,B)}))})))}Oi(e,i,u,p){return Io(i)||p.isEqual(gn.min())?this.Fi(e,i):this.$i.getDocuments(e,u).next(_=>{const w=this.Bi(i,_);return this.Li(i,w,u,p)?this.Fi(e,i):(un()<=Xe.in.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),v(i)),this.qi(e,w,i,zu(p,-1)))})}Bi(e,i){let u=new ci(q(e));return i.forEach((p,_)=>{b(e,_)&&(u=u.add(_))}),u}Li(e,i,u,p){if(null===e.limit)return!1;if(u.size!==i.size)return!0;const _="F"===e.limitType?i.last():i.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(p)>0)}Fi(e,i){return un()<=Xe.in.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",v(i)),this.$i.getDocumentsMatchingQuery(e,i,Oi.min())}qi(e,i,u,p){return this.$i.getDocumentsMatchingQuery(e,u,p).next(_=>(i.forEach(w=>{_=_.insert(w.key,w)}),_))}}class yv{constructor(e,i,u,p){this.persistence=e,this.Ui=i,this.Tt=p,this.Ki=new ls(On),this.Gi=new Ju(_=>Hl(_),Sc),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(u)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hv(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ki))}}function T_(l,e,i,u){return new yv(l,e,i,u)}function xb(l,e){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,ge.Z)(function*(l,e){const i=St(l);return yield i.persistence.runTransaction("Handle user change","readonly",u=>{let p;return i.mutationQueue.getAllMutationBatches(u).next(_=>(p=_,i.zi(e),i.mutationQueue.getAllMutationBatches(u))).next(_=>{const w=[],O=[];let B=lr();for(const z of p){w.push(z.batchId);for(const ne of z.mutations)B=B.add(ne.key)}for(const z of _){O.push(z.batchId);for(const ne of z.mutations)B=B.add(ne.key)}return i.localDocuments.getDocuments(u,B).next(z=>({Wi:z,removedBatchIds:w,addedBatchIds:O}))})})}),Pb.apply(this,arguments)}function aE(l){const e=St(l);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Ns.getLastRemoteSnapshotVersion(i))}function S_(l,e,i){let u=lr(),p=lr();return i.forEach(_=>u=u.add(_)),e.getEntries(l,u).next(_=>{let w=Sa();return i.forEach((O,B)=>{const z=_.get(O);B.isFoundDocument()!==z.isFoundDocument()&&(p=p.add(O)),B.isNoDocument()&&B.version.isEqual(gn.min())?(e.removeEntry(O,B.readTime),w=w.insert(O,B)):!z.isValidDocument()||B.version.compareTo(z.version)>0||0===B.version.compareTo(z.version)&&z.hasPendingWrites?(e.addEntry(B),w=w.insert(O,B)):lt("LocalStore","Ignoring outdated watch update for ",O,". Current version:",z.version," Watch version:",B.version)}),{Hi:w,Ji:p}})}function kb(l,e){const i=St(l);return i.persistence.runTransaction("Get next mutation batch","readonly",u=>(void 0===e&&(e=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(u,e)))}function Fd(l,e){const i=St(l);return i.persistence.runTransaction("Allocate target","readwrite",u=>{let p;return i.Ns.getTargetData(u,e).next(_=>_?(p=_,Qe.resolve(p)):i.Ns.allocateTargetId(u).next(w=>(p=new ml(e,w,0,u.currentSequenceNumber),i.Ns.addTargetData(u,p).next(()=>p))))}).then(u=>{const p=i.Ki.get(u.targetId);return(null===p||u.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(i.Ki=i.Ki.insert(u.targetId,u),i.Gi.set(e,u.targetId)),u})}function Ml(l,e,i){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,ge.Z)(function*(l,e,i){const u=St(l),p=u.Ki.get(e),_=i?"readwrite":"readwrite-primary";try{i||(yield u.persistence.runTransaction("Release target",_,w=>u.persistence.referenceDelegate.removeTarget(w,p)))}catch(w){if(!bs(w))throw w;lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}u.Ki=u.Ki.remove(e),u.Gi.delete(p.target)}),Lh.apply(this,arguments)}function fp(l,e,i){const u=St(l);let p=gn.min(),_=lr();return u.persistence.runTransaction("Execute query","readonly",w=>function(O,B,z){const ne=St(O),be=ne.Gi.get(z);return void 0!==be?Qe.resolve(ne.Ki.get(be)):ne.Ns.getTargetData(B,z)}(u,w,Rs(e)).next(O=>{if(O)return p=O.lastLimboFreeSnapshotVersion,u.Ns.getMatchingKeysForTargetId(w,O.targetId).next(B=>{_=B})}).next(()=>u.Ui.getDocumentsMatchingQuery(w,e,i?p:gn.min(),i?_:lr())).next(O=>(Cg(u,M(e),O),{documents:O,Yi:_})))}function $c(l,e){const i=St(l),u=St(i.Ns),p=i.Ki.get(e);return p?Promise.resolve(p.target):i.persistence.runTransaction("Get target data","readonly",_=>u.ie(_,e).next(w=>w?w.target:null))}function Fb(l,e){const i=St(l),u=i.Qi.get(e)||gn.min();return i.persistence.runTransaction("Get new document changes","readonly",p=>i.ji.getAllFromCollectionGroup(p,e,zu(u,-1),Number.MAX_SAFE_INTEGER)).then(p=>(Cg(i,e,p),p))}function Cg(l,e,i){let u=l.Qi.get(e)||gn.min();i.forEach((p,_)=>{_.readTime.compareTo(u)>0&&(u=_.readTime)}),l.Qi.set(e,u)}function bv(){return bv=(0,ge.Z)(function*(l,e,i,u){const p=St(l);let _=lr(),w=Sa();for(const z of i){const ne=e.Zi(z.metadata.name);z.document&&(_=_.add(ne));const be=e.Xi(z);be.setReadTime(e.tr(z.metadata.readTime)),w=w.insert(ne,be)}const O=p.ji.newChangeBuffer({trackRemovals:!0}),B=yield Fd(p,(z=u,Rs(Yu(kn.fromString(`__bundle__/docs/${z}`)))));var z;return p.persistence.runTransaction("Apply bundle documents","readwrite",z=>S_(z,O,w).next(ne=>(O.apply(z),ne)).next(ne=>p.Ns.removeMatchingKeysForTargetId(z,B.targetId).next(()=>p.Ns.addMatchingKeys(z,_,B.targetId)).next(()=>p.localDocuments.getLocalViewOfDocuments(z,ne.Hi,ne.Ji)).next(()=>ne.Hi)))}),bv.apply(this,arguments)}function Lb(l,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,ge.Z)(function*(l,e,i=lr()){const u=yield Fd(l,Rs(gg(e.bundledQuery))),p=St(l);return p.persistence.runTransaction("Save named query","readwrite",_=>{const w=cs(e.readTime);if(u.snapshotVersion.compareTo(w)>=0)return p.$s.saveNamedQuery(_,e);const O=u.withResumeToken(E.EMPTY_BYTE_STRING,w);return p.Ki=p.Ki.insert(O.targetId,O),p.Ns.updateTargetData(_,O).next(()=>p.Ns.removeMatchingKeysForTargetId(_,u.targetId)).next(()=>p.Ns.addMatchingKeys(_,i,u.targetId)).next(()=>p.$s.saveNamedQuery(_,e))})}),Tg.apply(this,arguments)}function wv(l,e){return`firestore_clients_${l}_${e}`}function Ud(l,e,i){let u=`firestore_mutations_${l}_${i}`;return e.isAuthenticated()&&(u+=`_${e.uid}`),u}function A_(l,e){return`firestore_targets_${l}_${e}`}class pp{constructor(e,i,u,p){this.user=e,this.batchId=i,this.state=u,this.error=p}static er(e,i,u){const p=JSON.parse(u);let _,w="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return w&&p.error&&(w="string"==typeof p.error.message&&"string"==typeof p.error.code,w&&(_=new _t(p.error.code,p.error.message))),w?new pp(e,i,p.state,_):(dn("SharedClientState",`Failed to parse mutation state for ID '${i}': ${u}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uh{constructor(e,i,u){this.targetId=e,this.state=i,this.error=u}static er(e,i){const u=JSON.parse(i);let p,_="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return _&&u.error&&(_="string"==typeof u.error.message&&"string"==typeof u.error.code,_&&(p=new _t(u.error.code,u.error.message))),_?new Uh(e,u.state,p):(dn("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bh{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static er(e,i){const u=JSON.parse(i);let p="object"==typeof u&&u.activeTargetIds instanceof Array,_=og();for(let w=0;p&&w<u.activeTargetIds.length;++w)p=pu(u.activeTargetIds[w]),_=_.add(u.activeTargetIds[w]);return p?new Bh(e,_):(dn("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}}class Ev{constructor(e,i){this.clientId=e,this.onlineState=i}static er(e){const i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new Ev(i.clientId,i.onlineState):(dn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Vh{constructor(){this.activeTargetIds=og()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O_{constructor(e,i,u,p,_){this.window=e,this.Ys=i,this.persistenceKey=u,this.rr=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ls(On),this.started=!1,this.hr=[];const w=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.lr=wv(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Vh),this._r=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const i=yield e.syncEngine.Si();for(const p of i){if(p===e.rr)continue;const _=e.getItem(wv(e.persistenceKey,p));if(_){const w=Bh.er(p,_);w&&(e.ar=e.ar.insert(w.clientId,w))}}e.pr();const u=e.storage.getItem(e.gr);if(u){const p=e.Ir(u);p&&e.Tr(p)}for(const p of e.hr)e.cr(p);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let i=!1;return this.ar.forEach((u,p)=>{p.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,i,u){this.Ar(e,i,u),this.Rr(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(A_(this.persistenceKey,e));if(u){const p=Uh.er(e,u);p&&(i=p.state)}}return this.Pr.sr(e),this.pr(),i}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(A_(this.persistenceKey,e))}updateQueryState(e,i,u){this.vr(e,i,u)}handleUserChange(e,i,u){i.forEach(p=>{this.Rr(p)}),this.currentUser=e,u.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const i=this.storage.getItem(e);return lt("SharedClientState","READ",e,i),i}setItem(e,i){lt("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){lt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var i=this;const u=e;if(u.storageArea===this.storage){if(lt("SharedClientState","EVENT",u.key,u.newValue),u.key===this.lr)return void dn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,ge.Z)(function*(){if(i.started){if(null!==u.key)if(i._r.test(u.key)){if(null==u.newValue){const p=i.Sr(u.key);return i.Dr(p,null)}{const p=i.Cr(u.key,u.newValue);if(p)return i.Dr(p.clientId,p)}}else if(i.wr.test(u.key)){if(null!==u.newValue){const p=i.Nr(u.key,u.newValue);if(p)return i.kr(p)}}else if(i.mr.test(u.key)){if(null!==u.newValue){const p=i.$r(u.key,u.newValue);if(p)return i.Mr(p)}}else if(u.key===i.gr){if(null!==u.newValue){const p=i.Ir(u.newValue);if(p)return i.Tr(p)}}else if(u.key===i.dr){const p=function(_){let w=Xi.at;if(null!=_)try{const O=JSON.parse(_);Ft("number"==typeof O),w=O}catch(O){dn("SharedClientState","Failed to read sequence number from WebStorage",O)}return w}(u.newValue);p!==Xi.at&&i.sequenceNumberHandler(p)}else if(u.key===i.yr){const p=i.Or(u.newValue);yield Promise.all(p.map(_=>i.syncEngine.Fr(_)))}}else i.hr.push(u)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,i,u){const p=new pp(this.currentUser,e,i,u),_=Ud(this.persistenceKey,this.currentUser,e);this.setItem(_,p.nr())}Rr(e){const i=Ud(this.persistenceKey,this.currentUser,e);this.removeItem(i)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,i,u){const p=A_(this.persistenceKey,e),_=new Uh(e,i,u);this.setItem(p,_.nr())}Vr(e){const i=JSON.stringify(Array.from(e));this.setItem(this.yr,i)}Sr(e){const i=this._r.exec(e);return i?i[1]:null}Cr(e,i){const u=this.Sr(e);return Bh.er(u,i)}Nr(e,i){const u=this.wr.exec(e),p=Number(u[1]);return pp.er(new ce(void 0!==u[2]?u[2]:null),p,i)}$r(e,i){const u=this.mr.exec(e),p=Number(u[1]);return Uh.er(p,i)}Ir(e){return Ev.er(e)}Or(e){return JSON.parse(e)}kr(e){var i=this;return(0,ge.Z)(function*(){if(e.user.uid===i.currentUser.uid)return i.syncEngine.Br(e.batchId,e.state,e.error);lt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,i){const u=i?this.ar.insert(e,i):this.ar.remove(e),p=this.Er(this.ar),_=this.Er(u),w=[],O=[];return _.forEach(B=>{p.has(B)||w.push(B)}),p.forEach(B=>{_.has(B)||O.push(B)}),this.syncEngine.qr(w,O).then(()=>{this.ar=u})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let i=og();return e.forEach((u,p)=>{i=i.unionWith(p.activeTargetIds)}),i}}class Dv{constructor(){this.Ur=new Vh,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,u){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,i,u){this.Kr[e]=i}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Vh,Promise.resolve()}handleUserChange(e,i,u){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gh{Gr(e){}shutdown(){}}class Sg{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jh=null;function Hh(){return null===jh?jh=268435456+Math.round(2147483648*Math.random()):jh++,"0x"+jh.toString(16)}const Iv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ub{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const oo="WebChannelConnection";class zc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,i,u,p,_){const w=Hh(),O=this.fo(e,i);lt("RestConnection",`Sending RPC '${e}' ${w}:`,O,u);const B={};return this._o(B,p,_),this.wo(e,O,B,u).then(z=>(lt("RestConnection",`Received RPC '${e}' ${w}: `,z),z),z=>{throw jn("RestConnection",`RPC '${e}' ${w} failed with error: `,z,"url: ",O,"request:",u),z})}mo(e,i,u,p,_,w){return this.lo(e,i,u,p,_)}_o(e,i,u){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ve,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((p,_)=>e[_]=p),u&&u.headers.forEach((p,_)=>e[_]=p)}fo(e,i){return`${this.co}/v1/${i}:${Iv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,i,u,p){const _=Hh();return new Promise((w,O)=>{const B=new L;B.setWithCredentials(!0),B.listenOnce(uu.COMPLETE,()=>{try{switch(B.getLastErrorCode()){case Vl.NO_ERROR:const ne=B.getResponseJson();lt(oo,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(ne)),w(ne);break;case Vl.TIMEOUT:lt(oo,`RPC '${e}' ${_} timed out`),O(new _t(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case Vl.HTTP_ERROR:const be=B.getStatus();if(lt(oo,`RPC '${e}' ${_} failed with status:`,be,"response text:",B.getResponseText()),be>0){let Le=B.getResponseJson();Array.isArray(Le)&&(Le=Le[0]);const gt=Le?.error;if(gt&&gt.status&&gt.message){const Nt=function(Zt){const _n=Zt.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(_n)>=0?_n:Ke.UNKNOWN}(gt.status);O(new _t(Nt,gt.message))}else O(new _t(Ke.UNKNOWN,"Server responded with status "+B.getStatus()))}else O(new _t(Ke.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{lt(oo,`RPC '${e}' ${_} completed.`)}});const z=JSON.stringify(p);lt(oo,`RPC '${e}' ${_} sending request:`,p),B.send(i,"POST",z,u,15)})}yo(e,i,u){const p=Hh(),_=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=Ic(),O=ud(),B={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(B.xmlHttpFactory=new R({})),this._o(B.initMessageHeaders,i,u),B.encodeInitMessageHeaders=!0;const z=_.join("");lt(oo,`Creating RPC '${e}' stream ${p}: ${z}`,B);const ne=w.createWebChannel(z,B);let be=!1,Le=!1;const gt=new Ub({Yr:Zt=>{Le?lt(oo,`Not sending because RPC '${e}' stream ${p} is closed:`,Zt):(be||(lt(oo,`Opening RPC '${e}' stream ${p} transport.`),ne.open(),be=!0),lt(oo,`RPC '${e}' stream ${p} sending:`,Zt),ne.send(Zt))},Zr:()=>ne.close()}),Nt=(Zt,_n,ii)=>{Zt.listen(_n,Cs=>{try{ii(Cs)}catch(hr){setTimeout(()=>{throw hr},0)}})};return Nt(ne,$.EventType.OPEN,()=>{Le||lt(oo,`RPC '${e}' stream ${p} transport opened.`)}),Nt(ne,$.EventType.CLOSE,()=>{Le||(Le=!0,lt(oo,`RPC '${e}' stream ${p} transport closed`),gt.oo())}),Nt(ne,$.EventType.ERROR,Zt=>{Le||(Le=!0,jn(oo,`RPC '${e}' stream ${p} transport errored:`,Zt),gt.oo(new _t(Ke.UNAVAILABLE,"The operation could not be completed")))}),Nt(ne,$.EventType.MESSAGE,Zt=>{var _n;if(!Le){const ii=Zt.data[0];Ft(!!ii);const hr=ii.error||(null===(_n=ii[0])||void 0===_n?void 0:_n.error);if(hr){lt(oo,`RPC '${e}' stream ${p} received error:`,hr);const hs=hr.status;let xr=function(Zs){const mc=us[Zs];if(void 0!==mc)return i_(mc)}(hs),Sr=hr.message;void 0===xr&&(xr=Ke.INTERNAL,Sr="Unknown error status: "+hs+" with message "+hr.message),Le=!0,gt.oo(new _t(xr,Sr)),ne.close()}else lt(oo,`RPC '${e}' stream ${p} received:`,ii),gt.uo(ii)}}),Nt(O,cl.STAT_EVENT,Zt=>{Zt.stat===Ea.PROXY?lt(oo,`RPC '${e}' stream ${p} detected buffering proxy`):Zt.stat===Ea.NOPROXY&&lt(oo,`RPC '${e}' stream ${p} detected no buffering proxy`)}),setTimeout(()=>{gt.ro()},0),gt}}function gp(){return typeof window<"u"?window:null}function Bd(){return typeof document<"u"?document:null}function Wc(l){return new a_(l,!0)}class $h{constructor(e,i,u=1e3,p=1.5,_=6e4){this.Ys=e,this.timerId=i,this.po=u,this.Io=p,this.To=_,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const i=Math.floor(this.Eo+this.bo()),u=Math.max(0,Date.now()-this.Ro),p=Math.max(0,i-u);p>0&&lt("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Eo} ms, delay with jitter: ${i} ms, last attempt: ${u} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,p,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class Ag{constructor(e,i,u,p,_,w,O,B){this.Ys=e,this.So=u,this.Do=p,this.connection=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=O,this.listener=B,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new $h(e,i)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,ge.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,i){var u=this;return(0,ge.Z)(function*(){u.Uo(),u.Ko(),u.ko.cancel(),u.Co++,4!==e?u.ko.reset():i&&i.code===Ke.RESOURCE_EXHAUSTED?(dn(i.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),u.ko.Po()):i&&i.code===Ke.UNAUTHENTICATED&&3!==u.state&&(u.authCredentialsProvider.invalidateToken(),u.appCheckCredentialsProvider.invalidateToken()),null!==u.stream&&(u.Go(),u.stream.close(),u.stream=null),u.state=e,yield u.listener.no(i)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),i=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([u,p])=>{this.Co===i&&this.jo(u,p)},u=>{e(()=>{const p=new _t(Ke.UNKNOWN,"Fetching auth token failed: "+u.message);return this.zo(p)})})}jo(e,i){const u=this.Qo(this.Co);this.stream=this.Wo(e,i),this.stream.Xr(()=>{u(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(p=>{u(()=>this.zo(p))}),this.stream.onMessage(p=>{u(()=>this.onMessage(p))})}Oo(){var e=this;this.state=5,this.ko.vo((0,ge.Z)(function*(){e.state=0,e.start()}))}zo(e){return lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return i=>{this.Ys.enqueueAndForget(()=>this.Co===e?i():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Og extends Ag{constructor(e,i,u,p,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,u,p,w),this.Tt=_}Wo(e,i){return this.connection.yo("Listen",e,i)}onMessage(e){this.ko.reset();const i=function rE(l,e){let i;if("targetChange"in e){const u="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:Ct(),p=e.targetChange.targetIds||[],_=function(B,z){return B.yt?(Ft(void 0===z||"string"==typeof z),E.fromBase64String(z||"")):(Ft(void 0===z||z instanceof Uint8Array),E.fromUint8Array(z||new Uint8Array))}(l,e.targetChange.resumeToken),w=e.targetChange.cause,O=w&&function(B){const z=void 0===B.code?Ke.UNKNOWN:i_(B.code);return new _t(z,B.message||"")}(w);i=new Dd(u,p,_,O||null)}else if("documentChange"in e){const u=e.documentChange,p=yu(l,u.document.name),_=cs(u.document.updateTime),w=u.document.createTime?cs(u.document.createTime):gn.min(),O=new Es({mapValue:{fields:u.document.fields}}),B=Rr.newFoundDocument(p,_,w,O);i=new xs(u.targetIds||[],u.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const u=e.documentDelete,p=yu(l,u.document),_=u.readTime?cs(u.readTime):gn.min(),w=Rr.newNoDocument(p,_);i=new xs([],u.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const u=e.documentRemove,p=yu(l,u.document);i=new xs([],u.removedTargetIds||[],p,null)}else{if(!("filter"in e))return Ct();{const u=e.filter,_=new eE(u.count||0);i=new Ah(u.targetId,_)}}var B;return i}(this.Tt,e),u=function(p){if(!("targetChange"in p))return gn.min();const _=p.targetChange;return _.targetIds&&_.targetIds.length?gn.min():_.readTime?cs(_.readTime):gn.min()}(e);return this.listener.Ho(i,u)}Jo(e){const i={};i.database=qf(this.Tt),i.addTarget=function(p,_){let w;const O=_.target;return w=mu(O)?{documents:Yf(p,O)}:{query:u_(p,O)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=ec(p,_.resumeToken):_.snapshotVersion.compareTo(gn.min())>0&&(w.readTime=Xu(p,_.snapshotVersion.toTimestamp())),w}(this.Tt,e);const u=function d_(l,e){const i=function(u,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ct()}}(0,e.purpose);return null==i?null:{"goog-listen-tags":i}}(0,e);u&&(i.labels=u),this.qo(i)}Yo(e){const i={};i.database=qf(this.Tt),i.removeTarget=e,this.qo(i)}}class Ng extends Ag{constructor(e,i,u,p,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,u,p,w),this.Tt=_,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,i){return this.connection.yo("Write",e,i)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const i=function lb(l,e){return l&&l.length>0?(Ft(void 0!==e),l.map(i=>function(u,p){let _=cs(u.updateTime?u.updateTime:p);return _.isEqual(gn.min())&&(_=cs(p)),new ig(_,u.transformResults||[])}(i,e))):[]}(e.writeResults,e.commitTime),u=cs(e.commitTime);return this.listener.eu(u,i)}return Ft(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=qf(this.Tt),this.qo(e)}tu(e){const i={streamToken:this.lastStreamToken,writes:e.map(u=>Oh(this.Tt,u))};this.qo(i)}}class Mg extends class{}{constructor(e,i,u,p){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=u,this.Tt=p,this.iu=!1}ru(){if(this.iu)throw new _t(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,i,u){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.connection.lo(e,i,u,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new _t(Ke.UNKNOWN,p.toString())})}mo(e,i,u,p){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,w])=>this.connection.mo(e,i,u,_,w,p)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new _t(Ke.UNKNOWN,_.toString())})}terminate(){this.iu=!0}}class Cv{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const i=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(dn(i),this.cu=!1):lt("OnlineStateTracker",i)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Tv{constructor(e,i,u,p,_){var w=this;this.localStore=e,this.datastore=i,this.asyncQueue=u,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=_,this.yu.Gr(O=>{u.enqueueAndForget((0,ge.Z)(function*(){var B;Du(w)&&(lt("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,ge.Z)(function*(z){const ne=St(z);ne.mu.add(4),yield Vd(ne),ne.pu.set("Unknown"),ne.mu.delete(4),yield mp(ne)}),function(z){return B.apply(this,arguments)})(w))}))}),this.pu=new Cv(u,p)}}function mp(l){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,ge.Z)(function*(l){if(Du(l))for(const e of l.gu)yield e(!0)}),Rg.apply(this,arguments)}function Vd(l){return xg.apply(this,arguments)}function xg(){return xg=(0,ge.Z)(function*(l){for(const e of l.gu)yield e(!1)}),xg.apply(this,arguments)}function Pg(l,e){const i=St(l);i.wu.has(e.targetId)||(i.wu.set(e.targetId,e),Bb(i)?Sv(i):Gd(i).Mo()&&ia(i,e))}function _p(l,e){const i=St(l),u=Gd(i);i.wu.delete(e),u.Mo()&&M_(i,e),0===i.wu.size&&(u.Mo()?u.Bo():Du(i)&&i.pu.set("Unknown"))}function ia(l,e){l.Iu.Ot(e.targetId),Gd(l).Jo(e)}function M_(l,e){l.Iu.Ot(e),Gd(l).Yo(e)}function Sv(l){l.Iu=new Ds({getRemoteKeysForTarget:e=>l.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>l.wu.get(e)||null}),Gd(l).start(),l.pu.au()}function Bb(l){return Du(l)&&!Gd(l).$o()&&l.wu.size>0}function Du(l){return 0===St(l).mu.size}function Av(l){l.Iu=void 0}function lE(l){return kg.apply(this,arguments)}function kg(){return kg=(0,ge.Z)(function*(l){l.wu.forEach((e,i)=>{ia(l,e)})}),kg.apply(this,arguments)}function Vb(l,e){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,ge.Z)(function*(l,e){Av(l),Bb(l)?(l.pu.fu(e),Sv(l)):l.pu.set("Unknown")}),Fg.apply(this,arguments)}function Ov(l,e,i){return R_.apply(this,arguments)}function R_(){return R_=(0,ge.Z)(function*(l,e,i){if(l.pu.set("Online"),e instanceof Dd&&2===e.state&&e.cause)try{yield(u=(0,ge.Z)(function*(p,_){const w=_.cause;for(const O of _.targetIds)p.wu.has(O)&&(yield p.remoteSyncer.rejectListen(O,w),p.wu.delete(O),p.Iu.removeTarget(O))}),function(p,_){return u.apply(this,arguments)})(l,e)}catch(u){lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),u),yield Wh(l,u)}else if(e instanceof xs?l.Iu.Qt(e):e instanceof Ah?l.Iu.Zt(e):l.Iu.Wt(e),!i.isEqual(gn.min()))try{const u=yield aE(l.localStore);i.compareTo(u)>=0&&(yield function(p,_){const w=p.Iu.ee(_);return w.targetChanges.forEach((O,B)=>{if(O.resumeToken.approximateByteSize()>0){const z=p.wu.get(B);z&&p.wu.set(B,z.withResumeToken(O.resumeToken,_))}}),w.targetMismatches.forEach(O=>{const B=p.wu.get(O);if(!B)return;p.wu.set(O,B.withResumeToken(E.EMPTY_BYTE_STRING,B.snapshotVersion)),M_(p,O);const z=new ml(B.target,O,1,B.sequenceNumber);ia(p,z)}),p.remoteSyncer.applyRemoteEvent(w)}(l,i))}catch(u){lt("RemoteStore","Failed to raise snapshot:",u),yield Wh(l,u)}var u}),R_.apply(this,arguments)}function Wh(l,e,i){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ge.Z)(function*(l,e,i){if(!bs(e))throw e;l.mu.add(1),yield Vd(l),l.pu.set("Offline"),i||(i=()=>aE(l.localStore)),l.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){lt("RemoteStore","Retrying IndexedDB access"),yield i(),l.mu.delete(1),yield mp(l)}))}),Lg.apply(this,arguments)}function x_(l,e){return e().catch(i=>Wh(l,i,e))}function Kh(l){return P_.apply(this,arguments)}function P_(){return P_=(0,ge.Z)(function*(l){const e=St(l),i=Yh(e);let u=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Nv(e);)try{const p=yield kb(e.localStore,u);if(null===p){0===e._u.length&&i.Bo();break}u=p.batchId,Iu(e,p)}catch(p){yield Wh(e,p)}Ug(e)&&k_(e)}),P_.apply(this,arguments)}function Nv(l){return Du(l)&&l._u.length<10}function Iu(l,e){l._u.push(e);const i=Yh(l);i.Mo()&&i.Xo&&i.tu(e.mutations)}function Ug(l){return Du(l)&&!Yh(l).$o()&&l._u.length>0}function k_(l){Yh(l).start()}function Gb(l){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,ge.Z)(function*(l){Yh(l).su()}),Bg.apply(this,arguments)}function jb(l){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,ge.Z)(function*(l){const e=Yh(l);for(const i of l._u)e.tu(i.mutations)}),Vg.apply(this,arguments)}function Hb(l,e,i){return yp.apply(this,arguments)}function yp(){return yp=(0,ge.Z)(function*(l,e,i){const u=l._u.shift(),p=hg.from(u,e,i);yield x_(l,()=>l.remoteSyncer.applySuccessfulWrite(p)),yield Kh(l)}),yp.apply(this,arguments)}function $b(l,e){return F_.apply(this,arguments)}function F_(){return F_=(0,ge.Z)(function*(l,e){var i;e&&Yh(l).Xo&&(yield(i=(0,ge.Z)(function*(u,p){if(r_(_=p.code)&&_!==Ke.ABORTED){const w=u._u.shift();Yh(u).Fo(),yield x_(u,()=>u.remoteSyncer.rejectFailedWrite(w.batchId,p)),yield Kh(u)}var _}),function(u,p){return i.apply(this,arguments)})(l,e)),Ug(l)&&k_(l)}),F_.apply(this,arguments)}function vp(l,e){return qh.apply(this,arguments)}function qh(){return qh=(0,ge.Z)(function*(l,e){const i=St(l);i.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const u=Du(i);i.mu.add(3),yield Vd(i),u&&i.pu.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(e),i.mu.delete(3),yield mp(i)}),qh.apply(this,arguments)}function bp(l,e){return zb.apply(this,arguments)}function zb(){return zb=(0,ge.Z)(function*(l,e){const i=St(l);e?(i.mu.delete(2),yield mp(i)):e||(i.mu.add(2),yield Vd(i),i.pu.set("Unknown"))}),zb.apply(this,arguments)}function Gd(l){return l.Tu||(l.Tu=function(e,i,u){const p=St(e);return p.ru(),new Og(i,p.connection,p.authCredentials,p.appCheckCredentials,p.Tt,u)}(l.datastore,l.asyncQueue,{Xr:lE.bind(null,l),no:Vb.bind(null,l),Ho:Ov.bind(null,l)}),l.gu.push(function(){var e=(0,ge.Z)(function*(i){i?(l.Tu.Fo(),Bb(l)?Sv(l):l.pu.set("Unknown")):(yield l.Tu.stop(),Av(l))});return function(i){return e.apply(this,arguments)}}())),l.Tu}function Yh(l){return l.Eu||(l.Eu=function(e,i,u){const p=St(e);return p.ru(),new Ng(i,p.connection,p.authCredentials,p.appCheckCredentials,p.Tt,u)}(l.datastore,l.asyncQueue,{Xr:Gb.bind(null,l),no:$b.bind(null,l),nu:jb.bind(null,l),eu:Hb.bind(null,l)}),l.gu.push(function(){var e=(0,ge.Z)(function*(i){i?(l.Eu.Fo(),yield Kh(l)):(yield l.Eu.stop(),l._u.length>0&&(lt("RemoteStore",`Stopping write stream with ${l._u.length} pending writes`),l._u=[]))});return function(i){return e.apply(this,arguments)}}())),l.Eu}class wp{constructor(e,i,u,p,_){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=u,this.op=p,this.removalCallback=_,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,i,u,p,_){const w=Date.now()+u,O=new wp(e,i,w,p,_);return O.start(u),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _t(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jd(l,e){if(dn("AsyncQueue",`${e}: ${l}`),bs(l))return new _t(Ke.UNAVAILABLE,`${e}: ${l}`);throw l}class Zh{constructor(e){this.comparator=e?(i,u)=>e(i,u)||zt.comparator(i.key,u.key):(i,u)=>zt.comparator(i.key,u.key),this.keyedMap=Mc(),this.sortedSet=new ls(this.comparator)}static emptySet(e){return new Zh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,u)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Zh)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),u=e.sortedSet.getIterator();for(;i.hasNext();){const p=i.getNext().key,_=u.getNext().key;if(!p.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){const u=new Zh;return u.comparator=this.comparator,u.keyedMap=e,u.sortedSet=i,u}}class Mv{constructor(){this.Au=new ls(zt.comparator)}track(e){const i=e.doc.key,u=this.Au.get(i);u?0!==e.type&&3===u.type?this.Au=this.Au.insert(i,e):3===e.type&&1!==u.type?this.Au=this.Au.insert(i,{type:u.type,doc:e.doc}):2===e.type&&2===u.type?this.Au=this.Au.insert(i,{type:2,doc:e.doc}):2===e.type&&0===u.type?this.Au=this.Au.insert(i,{type:0,doc:e.doc}):1===e.type&&0===u.type?this.Au=this.Au.remove(i):1===e.type&&2===u.type?this.Au=this.Au.insert(i,{type:1,doc:u.doc}):0===e.type&&1===u.type?this.Au=this.Au.insert(i,{type:2,doc:e.doc}):Ct():this.Au=this.Au.insert(i,e)}Ru(){const e=[];return this.Au.inorderTraversal((i,u)=>{e.push(u)}),e}}class Hd{constructor(e,i,u,p,_,w,O,B,z){this.query=e,this.docs=i,this.oldDocs=u,this.docChanges=p,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=O,this.excludesMetadataChanges=B,this.hasCachedResults=z}static fromInitialDocuments(e,i,u,p,_){const w=[];return i.forEach(O=>{w.push({type:0,doc:O})}),new Hd(e,i,Zh.emptySet(i),w,u,p,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,u=e.docChanges;if(i.length!==u.length)return!1;for(let p=0;p<i.length;p++)if(i[p].type!==u[p].type||!i[p].doc.isEqual(u[p].doc))return!1;return!0}}class ac{constructor(){this.Pu=void 0,this.listeners=[]}}class L_{constructor(){this.queries=new Ju(e=>A(e),Eh),this.onlineState="Unknown",this.vu=new Set}}function Ep(l,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,ge.Z)(function*(l,e){const i=St(l),u=e.query;let p=!1,_=i.queries.get(u);if(_||(p=!0,_=new ac),p)try{_.Pu=yield i.onListen(u)}catch(w){const O=jd(w,`Initialization of query '${v(e.query)}' failed`);return void e.onError(O)}i.queries.set(u,_),_.listeners.push(e),e.bu(i.onlineState),_.Pu&&e.Vu(_.Pu)&&xv(i)}),Qh.apply(this,arguments)}function Rv(l,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ge.Z)(function*(l,e){const i=St(l),u=e.query;let p=!1;const _=i.queries.get(u);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),p=0===_.listeners.length)}if(p)return i.queries.delete(u),i.onUnlisten(u)}),Dp.apply(this,arguments)}function Wb(l,e){const i=St(l);let u=!1;for(const p of e){const w=i.queries.get(p.query);if(w){for(const O of w.listeners)O.Vu(p)&&(u=!0);w.Pu=p}}u&&xv(i)}function uE(l,e,i){const u=St(l),p=u.queries.get(e);if(p)for(const _ of p.listeners)_.onError(i);u.queries.delete(e)}function xv(l){l.vu.forEach(e=>{e.next()})}class Jh{constructor(e,i,u){this.query=e,this.Su=i,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=u||{}}Vu(e){if(!this.options.includeMetadataChanges){const u=[];for(const p of e.docChanges)3!==p.type&&u.push(p);e=new Hd(e.query,e.docs,e.oldDocs,u,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Du?this.xu(e)&&(this.Su.next(e),i=!0):this.Nu(e,this.onlineState)&&(this.ku(e),i=!0),this.Cu=e,i}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let i=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),i=!0),i}Nu(e,i){return!e.fromCache||(!this.options.$u||!("Offline"!==i))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===i)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class cE{constructor(e,i){this.Mu=e,this.byteLength=i}Ou(){return"metadata"in this.Mu}}class dE{constructor(e){this.Tt=e}Zi(e){return yu(this.Tt,e)}Xi(e){return e.metadata.exists?Sd(this.Tt,e.document,!1):Rr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return cs(e)}}class hE{constructor(e,i,u){this.Fu=e,this.localStore=i,this.Tt=u,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kb(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++i;const u=kn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(u.get(u.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}Lu(e){const i=new Map,u=new dE(this.Tt);for(const p of e)if(p.metadata.queries){const _=u.Zi(p.metadata.name);for(const w of p.metadata.queries){const O=(i.get(w)||lr()).add(_);i.set(w,O)}}return i}complete(){var e=this;return(0,ge.Z)(function*(){const i=yield function Ld(l,e,i,u){return bv.apply(this,arguments)}(e.localStore,new dE(e.Tt),e.documents,e.Fu.id),u=e.Lu(e.documents);for(const p of e.queries)yield Lb(e.localStore,p,u.get(p.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:i}})()}}function Kb(l){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes}}class U_{constructor(e){this.key=e}}class Pv{constructor(e){this.key=e}}class kv{constructor(e,i){this.query=e,this.Ku=i,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=lr(),this.mutatedKeys=lr(),this.ju=q(e),this.zu=new Zh(this.ju)}get Wu(){return this.Ku}Hu(e,i){const u=i?i.Ju:new Mv,p=i?i.zu:this.zu;let _=i?i.mutatedKeys:this.mutatedKeys,w=p,O=!1;const B="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,z="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(e.inorderTraversal((ne,be)=>{const Le=p.get(ne),gt=b(this.query,be)?be:null,Nt=!!Le&&this.mutatedKeys.has(Le.key),Zt=!!gt&&(gt.hasLocalMutations||this.mutatedKeys.has(gt.key)&&gt.hasCommittedMutations);let _n=!1;Le&&gt?Le.data.isEqual(gt.data)?Nt!==Zt&&(u.track({type:3,doc:gt}),_n=!0):this.Yu(Le,gt)||(u.track({type:2,doc:gt}),_n=!0,(B&&this.ju(gt,B)>0||z&&this.ju(gt,z)<0)&&(O=!0)):!Le&&gt?(u.track({type:0,doc:gt}),_n=!0):Le&&!gt&&(u.track({type:1,doc:Le}),_n=!0,(B||z)&&(O=!0)),_n&&(gt?(w=w.add(gt),_=Zt?_.add(ne):_.delete(ne)):(w=w.delete(ne),_=_.delete(ne)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ne="F"===this.query.limitType?w.last():w.first();w=w.delete(ne.key),_=_.delete(ne.key),u.track({type:1,doc:ne})}return{zu:w,Ju:u,Li:O,mutatedKeys:_}}Yu(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,u){const p=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const _=e.Ju.Ru();_.sort((z,ne)=>function(be,Le){const gt=Nt=>{switch(Nt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return gt(be)-gt(Le)}(z.type,ne.type)||this.ju(z.doc,ne.doc)),this.Zu(u);const w=i?this.Xu():[],O=0===this.Qu.size&&this.current?1:0,B=O!==this.Gu;return this.Gu=O,0!==_.length||B?{snapshot:new Hd(this.query,e.zu,p,_,e.mutatedKeys,0===O,B,!1,!!u&&u.resumeToken.approximateByteSize()>0),tc:w}:{tc:w}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Mv,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(i=>this.Ku=this.Ku.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Ku=this.Ku.delete(i)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=lr(),this.zu.forEach(u=>{this.ec(u.key)&&(this.Qu=this.Qu.add(u.key))});const i=[];return e.forEach(u=>{this.Qu.has(u)||i.push(new Pv(u))}),this.Qu.forEach(u=>{e.has(u)||i.push(new U_(u))}),i}nc(e){this.Ku=e.Yi,this.Qu=lr();const i=this.Hu(e.documents);return this.applyChanges(i,!0)}sc(){return Hd.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class lc{constructor(e,i,u){this.query=e,this.targetId=i,this.view=u}}class uc{constructor(e){this.key=e,this.ic=!1}}class Fv{constructor(e,i,u,p,_,w){this.localStore=e,this.remoteStore=i,this.eventManager=u,this.sharedClientState=p,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.rc={},this.oc=new Ju(O=>A(O),Eh),this.uc=new Map,this.cc=new Set,this.ac=new ls(zt.comparator),this.hc=new Map,this.lc=new Gc,this.fc={},this.dc=new Map,this._c=kh.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function sa(l,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,ge.Z)(function*(l,e){const i=Au(l);let u,p;const _=i.oc.get(e);if(_)u=_.targetId,i.sharedClientState.addLocalQueryTarget(u),p=_.view.sc();else{const w=yield Fd(i.localStore,Rs(e));i.isPrimaryClient&&Pg(i.remoteStore,w);const O=i.sharedClientState.addLocalQueryTarget(w.targetId);u=w.targetId,p=yield cc(i,e,u,"current"===O,w.resumeToken)}return p}),Gg.apply(this,arguments)}function cc(l,e,i,u,p){return Cu.apply(this,arguments)}function Cu(){return Cu=(0,ge.Z)(function*(l,e,i,u,p){l.mc=(be,Le,gt)=>{return(Nt=(0,ge.Z)(function*(Zt,_n,ii,Cs){let hr=_n.view.Hu(ii);hr.Li&&(hr=yield fp(Zt.localStore,_n.query,!1).then(({documents:Sr})=>_n.view.Hu(Sr,hr)));const hs=Cs&&Cs.targetChanges.get(_n.targetId),xr=_n.view.applyChanges(hr,Zt.isPrimaryClient,hs);return Co(Zt,_n.targetId,xr.tc),xr.snapshot}),function(Zt,_n,ii,Cs){return Nt.apply(this,arguments)})(l,be,Le,gt);var Nt};const _=yield fp(l.localStore,e,!0),w=new kv(e,_.Yi),O=w.Hu(_.documents),B=Wf.createSynthesizedTargetChangeForCurrentChange(i,u&&"Offline"!==l.onlineState,p),z=w.applyChanges(O,l.isPrimaryClient,B);Co(l,i,z.tc);const ne=new lc(e,i,w);return l.oc.set(e,ne),l.uc.has(i)?l.uc.get(i).push(e):l.uc.set(i,[e]),z.snapshot}),Cu.apply(this,arguments)}function le(l,e){return dc.apply(this,arguments)}function dc(){return dc=(0,ge.Z)(function*(l,e){const i=St(l),u=i.oc.get(e),p=i.uc.get(u.targetId);if(p.length>1)return i.uc.set(u.targetId,p.filter(_=>!Eh(_,e))),void i.oc.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(u.targetId),i.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Ml(i.localStore,u.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(u.targetId),_p(i.remoteStore,u.targetId),oa(i,u.targetId)}).catch(Hs))):(oa(i,u.targetId),yield Ml(i.localStore,u.targetId,!0))}),dc.apply(this,arguments)}function jg(){return jg=(0,ge.Z)(function*(l,e,i){const u=Tp(l);try{const p=yield function(_,w){const O=St(_),B=ar.now(),z=w.reduce((Le,gt)=>Le.add(gt.key),lr());let ne,be;return O.persistence.runTransaction("Locally write mutations","readwrite",Le=>{let gt=Sa(),Nt=lr();return O.ji.getEntries(Le,z).next(Zt=>{gt=Zt,gt.forEach((_n,ii)=>{ii.isValidDocument()||(Nt=Nt.add(_n))})}).next(()=>O.localDocuments.getOverlayedDocuments(Le,gt)).next(Zt=>{ne=Zt;const _n=[];for(const ii of w){const Cs=Xm(ii,ne.get(ii.key).overlayedDocument);null!=Cs&&_n.push(new Qu(ii.key,Cs,Bf(Cs.value.mapValue),Pi.exists(!0)))}return O.mutationQueue.addMutationBatch(Le,B,_n,w)}).next(Zt=>{be=Zt;const _n=Zt.applyToLocalDocumentSet(ne,Nt);return O.documentOverlayCache.saveOverlays(Le,Zt.batchId,_n)})}).then(()=>({batchId:be.batchId,changes:o_(ne)}))}(u.localStore,e);u.sharedClientState.addPendingMutation(p.batchId),function(_,w,O){let B=_.fc[_.currentUser.toKey()];B||(B=new ls(On)),B=B.insert(w,O),_.fc[_.currentUser.toKey()]=B}(u,p.batchId,i),yield Ys(u,p.changes),yield Kh(u.remoteStore)}catch(p){const _=jd(p,"Failed to persist write");i.reject(_)}}),jg.apply(this,arguments)}function Uv(l,e){return B_.apply(this,arguments)}function B_(){return B_=(0,ge.Z)(function*(l,e){const i=St(l);try{const u=yield function vv(l,e){const i=St(l),u=e.snapshotVersion;let p=i.Ki;return i.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=i.ji.newChangeBuffer({trackRemovals:!0});p=i.Ki;const O=[];e.targetChanges.forEach((ne,be)=>{const Le=p.get(be);if(!Le)return;O.push(i.Ns.removeMatchingKeys(_,ne.removedDocuments,be).next(()=>i.Ns.addMatchingKeys(_,ne.addedDocuments,be)));let gt=Le.withSequenceNumber(_.currentSequenceNumber);var Nt,Zt,_n;e.targetMismatches.has(be)?gt=gt.withResumeToken(E.EMPTY_BYTE_STRING,gn.min()).withLastLimboFreeSnapshotVersion(gn.min()):ne.resumeToken.approximateByteSize()>0&&(gt=gt.withResumeToken(ne.resumeToken,u)),p=p.insert(be,gt),Zt=gt,_n=ne,(0===(Nt=Le).resumeToken.approximateByteSize()||Zt.snapshotVersion.toMicroseconds()-Nt.snapshotVersion.toMicroseconds()>=3e8||_n.addedDocuments.size+_n.modifiedDocuments.size+_n.removedDocuments.size>0)&&O.push(i.Ns.updateTargetData(_,gt))});let B=Sa(),z=lr();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&O.push(i.persistence.referenceDelegate.updateLimboDocument(_,ne))}),O.push(S_(_,w,e.documentUpdates).next(ne=>{B=ne.Hi,z=ne.Ji})),!u.isEqual(gn.min())){const ne=i.Ns.getLastRemoteSnapshotVersion(_).next(be=>i.Ns.setTargetsMetadata(_,_.currentSequenceNumber,u));O.push(ne)}return Qe.waitFor(O).next(()=>w.apply(_)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,B,z)).next(()=>B)}).then(_=>(i.Ki=p,_))}(i.localStore,e);e.targetChanges.forEach((p,_)=>{const w=i.hc.get(_);w&&(Ft(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?w.ic=!0:p.modifiedDocuments.size>0?Ft(w.ic):p.removedDocuments.size>0&&(Ft(w.ic),w.ic=!1))}),yield Ys(i,u,e)}catch(u){yield Hs(u)}}),B_.apply(this,arguments)}function V_(l,e,i){const u=St(l);if(u.isPrimaryClient&&0===i||!u.isPrimaryClient&&1===i){const p=[];u.oc.forEach((_,w)=>{const O=w.view.bu(e);O.snapshot&&p.push(O.snapshot)}),function(_,w){const O=St(_);O.onlineState=w;let B=!1;O.queries.forEach((z,ne)=>{for(const be of ne.listeners)be.bu(w)&&(B=!0)}),B&&xv(O)}(u.eventManager,e),p.length&&u.rc.Ho(p),u.onlineState=e,u.isPrimaryClient&&u.sharedClientState.setOnlineState(e)}}function rs(l,e,i){return wi.apply(this,arguments)}function wi(){return wi=(0,ge.Z)(function*(l,e,i){const u=St(l);u.sharedClientState.updateQueryState(e,"rejected",i);const p=u.hc.get(e),_=p&&p.key;if(_){let w=new ls(zt.comparator);w=w.insert(_,Rr.newNoDocument(_,gn.min()));const O=lr().add(_),B=new zf(gn.min(),new Map,new ci(On),w,O);yield Uv(u,B),u.ac=u.ac.remove(_),u.hc.delete(e),zd(u)}else yield Ml(u.localStore,e,!1).then(()=>oa(u,e,i)).catch(Hs)}),wi.apply(this,arguments)}function Bv(l,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,ge.Z)(function*(l,e){const i=St(l),u=e.batch.batchId;try{const p=yield function FD(l,e){const i=St(l);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const p=e.batch.keys(),_=i.ji.newChangeBuffer({trackRemovals:!0});return function(w,O,B,z){const ne=B.batch,be=ne.keys();let Le=Qe.resolve();return be.forEach(gt=>{Le=Le.next(()=>z.getEntry(O,gt)).next(Nt=>{const Zt=B.docVersions.get(gt);Ft(null!==Zt),Nt.version.compareTo(Zt)<0&&(ne.applyToRemoteDocument(Nt,B),Nt.isValidDocument()&&(Nt.setReadTime(B.commitVersion),z.addEntry(Nt)))})}),Le.next(()=>w.mutationQueue.removeMutationBatch(O,ne))}(i,u,e,_).next(()=>_.apply(u)).next(()=>i.mutationQueue.performConsistencyCheck(u)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(u,p,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,function(w){let O=lr();for(let B=0;B<w.mutationResults.length;++B)w.mutationResults[B].transformResults.length>0&&(O=O.add(w.batch.mutations[B].key));return O}(e))).next(()=>i.localDocuments.getDocuments(u,p))})}(i.localStore,e);Hg(i,u,null),Ip(i,u),i.sharedClientState.updateMutationState(u,"acknowledged"),yield Ys(i,p)}catch(p){yield Hs(p)}}),Xh.apply(this,arguments)}function fE(l,e,i){return ef.apply(this,arguments)}function ef(){return ef=(0,ge.Z)(function*(l,e,i){const u=St(l);try{const p=yield function(_,w){const O=St(_);return O.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let z;return O.mutationQueue.lookupMutationBatch(B,w).next(ne=>(Ft(null!==ne),z=ne.keys(),O.mutationQueue.removeMutationBatch(B,ne))).next(()=>O.mutationQueue.performConsistencyCheck(B)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(B,z,w)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,z)).next(()=>O.localDocuments.getDocuments(B,z))})}(u.localStore,e);Hg(u,e,i),Ip(u,e),u.sharedClientState.updateMutationState(e,"rejected",i),yield Ys(u,p)}catch(p){yield Hs(p)}}),ef.apply(this,arguments)}function G_(){return G_=(0,ge.Z)(function*(l,e){const i=St(l);Du(i.remoteStore)||lt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const u=yield function(_){const w=St(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>w.mutationQueue.getHighestUnacknowledgedBatchId(O))}(i.localStore);if(-1===u)return void e.resolve();const p=i.dc.get(u)||[];p.push(e),i.dc.set(u,p)}catch(u){const p=jd(u,"Initialization of waitForPendingWrites() operation failed");e.reject(p)}}),G_.apply(this,arguments)}function Ip(l,e){(l.dc.get(e)||[]).forEach(i=>{i.resolve()}),l.dc.delete(e)}function Hg(l,e,i){const u=St(l);let p=u.fc[u.currentUser.toKey()];if(p){const _=p.get(e);_&&(i?_.reject(i):_.resolve(),p=p.remove(e)),u.fc[u.currentUser.toKey()]=p}}function oa(l,e,i=null){l.sharedClientState.removeLocalQueryTarget(e);for(const u of l.uc.get(e))l.oc.delete(u),i&&l.rc.gc(u,i);l.uc.delete(e),l.isPrimaryClient&&l.lc.ds(e).forEach(u=>{l.lc.containsKey(u)||tf(l,u)})}function tf(l,e){l.cc.delete(e.path.canonicalString());const i=l.ac.get(e);null!==i&&(_p(l.remoteStore,i),l.ac=l.ac.remove(e),l.hc.delete(i),zd(l))}function Co(l,e,i){for(const u of i)u instanceof U_?(l.lc.addReference(u.key,e),$d(l,u)):u instanceof Pv?(lt("SyncEngine","Document no longer in limbo: "+u.key),l.lc.removeReference(u.key,e),l.lc.containsKey(u.key)||tf(l,u.key)):Ct()}function $d(l,e){const i=e.key,u=i.path.canonicalString();l.ac.get(i)||l.cc.has(u)||(lt("SyncEngine","New document in limbo: "+i),l.cc.add(u),zd(l))}function zd(l){for(;l.cc.size>0&&l.ac.size<l.maxConcurrentLimboResolutions;){const e=l.cc.values().next().value;l.cc.delete(e);const i=new zt(kn.fromString(e)),u=l._c.next();l.hc.set(u,new uc(i)),l.ac=l.ac.insert(i,u),Pg(l.remoteStore,new ml(Rs(Yu(i.path)),u,2,Xi.at))}}function Ys(l,e,i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,ge.Z)(function*(l,e,i){const u=St(l),p=[],_=[],w=[];var O;u.oc.isEmpty()||(u.oc.forEach((O,B)=>{w.push(u.mc(B,e,i).then(z=>{if((z||i)&&u.isPrimaryClient&&u.sharedClientState.updateQueryState(B.targetId,z?.fromCache?"not-current":"current"),z){p.push(z);const ne=Hc.Ni(B.targetId,z);_.push(ne)}}))}),yield Promise.all(w),u.rc.Ho(p),yield(O=(0,ge.Z)(function*(B,z){const ne=St(B);try{yield ne.persistence.runTransaction("notifyLocalViewChanges","readwrite",be=>Qe.forEach(z,Le=>Qe.forEach(Le.Ci,gt=>ne.persistence.referenceDelegate.addReference(be,Le.targetId,gt)).next(()=>Qe.forEach(Le.xi,gt=>ne.persistence.referenceDelegate.removeReference(be,Le.targetId,gt)))))}catch(be){if(!bs(be))throw be;lt("LocalStore","Failed to update sequence numbers: "+be)}for(const be of z){const Le=be.targetId;if(!be.fromCache){const gt=ne.Ki.get(Le),Zt=gt.withLastLimboFreeSnapshotVersion(gt.snapshotVersion);ne.Ki=ne.Ki.insert(Le,Zt)}}}),function(B,z){return O.apply(this,arguments)})(u.localStore,_))}),Cp.apply(this,arguments)}function nf(l,e){return yl.apply(this,arguments)}function yl(){return yl=(0,ge.Z)(function*(l,e){const i=St(l);if(!i.currentUser.isEqual(e)){lt("SyncEngine","User change. New user:",e.toKey());const u=yield xb(i.localStore,e);i.currentUser=e,(p=i).dc.forEach(w=>{w.forEach(O=>{O.reject(new _t(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.dc.clear(),i.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),yield Ys(i,u.Wi)}var p}),yl.apply(this,arguments)}function Wd(l,e){const i=St(l),u=i.hc.get(e);if(u&&u.ic)return lr().add(u.key);{let p=lr();const _=i.uc.get(e);if(!_)return p;for(const w of _){const O=i.oc.get(w);p=p.unionWith(O.view.Wu)}return p}}function Kd(l,e){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,ge.Z)(function*(l,e){const i=St(l),u=yield fp(i.localStore,e.query,!0),p=e.view.nc(u);return i.isPrimaryClient&&Co(i,e.targetId,p.tc),p}),Rl.apply(this,arguments)}function Tu(l,e){return ds.apply(this,arguments)}function ds(){return ds=(0,ge.Z)(function*(l,e){const i=St(l);return Fb(i.localStore,e).then(u=>Ys(i,u))}),ds.apply(this,arguments)}function rf(l,e,i,u){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,ge.Z)(function*(l,e,i,u){const p=St(l),_=yield function(w,O){const B=St(w),z=St(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ne=>z.An(ne,O).next(be=>be?B.localDocuments.getDocuments(ne,be):Qe.resolve(null)))}(p.localStore,e);var O;null!==_?("pending"===i?yield Kh(p.remoteStore):"acknowledged"===i||"rejected"===i?(Hg(p,e,u||null),Ip(p,e),O=e,St(St(p.localStore).mutationQueue).Pn(O)):Ct(),yield Ys(p,_)):lt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Kc.apply(this,arguments)}function $g(){return $g=(0,ge.Z)(function*(l,e){const i=St(l);if(Au(i),Tp(i),!0===e&&!0!==i.wc){const u=i.sharedClientState.getAllActiveQueryTargets(),p=yield j_(i,u.toArray());i.wc=!0,yield bp(i.remoteStore,!0);for(const _ of p)Pg(i.remoteStore,_)}else if(!1===e&&!1!==i.wc){const u=[];let p=Promise.resolve();i.uc.forEach((_,w)=>{i.sharedClientState.isLocalQueryTarget(w)?u.push(w):p=p.then(()=>(oa(i,w),Ml(i.localStore,w,!0))),_p(i.remoteStore,w)}),yield p,yield j_(i,u),function(_){const w=St(_);w.hc.forEach((O,B)=>{_p(w.remoteStore,B)}),w.lc._s(),w.hc=new Map,w.ac=new ls(zt.comparator)}(i),i.wc=!1,yield bp(i.remoteStore,!1)}}),$g.apply(this,arguments)}function j_(l,e,i){return zg.apply(this,arguments)}function zg(){return zg=(0,ge.Z)(function*(l,e,i){const u=St(l),p=[],_=[];for(const w of e){let O;const B=u.uc.get(w);if(B&&0!==B.length){O=yield Fd(u.localStore,Rs(B[0]));for(const z of B){const ne=u.oc.get(z),be=yield Kd(u,ne);be.snapshot&&_.push(be.snapshot)}}else{const z=yield $c(u.localStore,w);O=yield Fd(u.localStore,z),yield cc(u,sf(z),w,!1,O.resumeToken)}p.push(O)}return u.rc.Ho(_),p}),zg.apply(this,arguments)}function sf(l){return rg(l.path,l.collectionGroup,l.orderBy,l.filters,l.limit,"F",l.startAt,l.endAt)}function H_(l){const e=St(l);return St(St(e.localStore).persistence).Si()}function Wg(l,e,i,u){return af.apply(this,arguments)}function af(){return af=(0,ge.Z)(function*(l,e,i,u){const p=St(l);if(p.wc)return void lt("SyncEngine","Ignoring unexpected query state notification.");const _=p.uc.get(e);if(_&&_.length>0)switch(i){case"current":case"not-current":{const w=yield Fb(p.localStore,M(_[0])),O=zf.createSynthesizedRemoteEventForCurrentChange(e,"current"===i,E.EMPTY_BYTE_STRING);yield Ys(p,w,O);break}case"rejected":yield Ml(p.localStore,e,!0),oa(p,e,u);break;default:Ct()}}),af.apply(this,arguments)}function Su(l,e,i){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,ge.Z)(function*(l,e,i){const u=Au(l);if(u.wc){for(const p of e){if(u.uc.has(p)){lt("SyncEngine","Adding an already active target "+p);continue}const _=yield $c(u.localStore,p),w=yield Fd(u.localStore,_);yield cc(u,sf(_),w.targetId,!1,w.resumeToken),Pg(u.remoteStore,w)}for(const p of i)u.uc.has(p)&&(yield Ml(u.localStore,p,!1).then(()=>{_p(u.remoteStore,p),oa(u,p)}).catch(Hs))}}),Kg.apply(this,arguments)}function Au(l){const e=St(l);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rs.bind(null,e),e.rc.Ho=Wb.bind(null,e.eventManager),e.rc.gc=uE.bind(null,e.eventManager),e}function Tp(l){const e=St(l);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fE.bind(null,e),e}class lf{constructor(){this.synchronizeTabs=!1}initialize(e){var i=this;return(0,ge.Z)(function*(){i.Tt=Wc(e.databaseInfo.databaseId),i.sharedClientState=i.Ic(e),i.persistence=i.Tc(e),yield i.persistence.start(),i.localStore=i.Ec(e),i.gcScheduler=i.Ac(e,i.localStore),i.indexBackfillerScheduler=i.Rc(e,i.localStore)})()}Ac(e,i){return null}Rc(e,i){return null}Ec(e){return T_(this.persistence,new Rb,e.initialUser,this.Tt)}Tc(e){return new jc(Dg.qs,this.Tt)}Ic(e){return new Dv}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qg extends lf{constructor(e,i,u){super(),this.Pc=e,this.cacheSizeBytes=i,this.forceOwnership=u,this.synchronizeTabs=!1}initialize(e){var i=()=>super.initialize,u=this;return(0,ge.Z)(function*(){yield i().call(u,e),yield u.Pc.initialize(u,e),yield Tp(u.Pc.syncEngine),yield Kh(u.Pc.remoteStore),yield u.persistence.di(()=>(u.gcScheduler&&!u.gcScheduler.started&&u.gcScheduler.start(),u.indexBackfillerScheduler&&!u.indexBackfillerScheduler.started&&u.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return T_(this.persistence,new Rb,e.initialUser,this.Tt)}Ac(e,i){return new Ab(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,i)}Rc(e,i){const u=new dd(i,this.persistence);return new hl(e.asyncQueue,u)}Tc(e){const i=C_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Aa.withCacheSize(this.cacheSizeBytes):Aa.DEFAULT;return new _v(this.synchronizeTabs,i,e.clientId,u,e.asyncQueue,gp(),Bd(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Dv}}class $_ extends qg{constructor(e,i){super(e,i,!1),this.Pc=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){var i=()=>super.initialize,u=this;return(0,ge.Z)(function*(){yield i().call(u,e);const p=u.Pc.syncEngine;u.sharedClientState instanceof O_&&(u.sharedClientState.syncEngine={Br:rf.bind(null,p),Lr:Wg.bind(null,p),qr:Su.bind(null,p),Si:H_.bind(null,p),Fr:Tu.bind(null,p)},yield u.sharedClientState.start()),yield u.persistence.di(function(){var _=(0,ge.Z)(function*(w){yield function Vv(l,e){return $g.apply(this,arguments)}(u.Pc.syncEngine,w),u.gcScheduler&&(w&&!u.gcScheduler.started?u.gcScheduler.start():w||u.gcScheduler.stop()),u.indexBackfillerScheduler&&(w&&!u.indexBackfillerScheduler.started?u.indexBackfillerScheduler.start():w||u.indexBackfillerScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}Ic(e){const i=gp();if(!O_.C(i))throw new _t(Ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const u=C_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new O_(i,e.asyncQueue,u,e.clientId,e.initialUser)}}class z_{initialize(e,i){var u=this;return(0,ge.Z)(function*(){u.localStore||(u.localStore=e.localStore,u.sharedClientState=e.sharedClientState,u.datastore=u.createDatastore(i),u.remoteStore=u.createRemoteStore(i),u.eventManager=u.createEventManager(i),u.syncEngine=u.createSyncEngine(i,!e.synchronizeTabs),u.sharedClientState.onlineStateHandler=p=>V_(u.syncEngine,p,1),u.remoteStore.remoteSyncer.handleCredentialChange=nf.bind(null,u.syncEngine),yield bp(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(e){return new L_}createDatastore(e){const i=Wc(e.databaseInfo.databaseId),u=new zc(e.databaseInfo);return new Mg(e.authCredentials,e.appCheckCredentials,u,i)}createRemoteStore(e){return i=this.localStore,u=this.datastore,p=e.asyncQueue,_=O=>V_(this.syncEngine,O,0),w=Sg.C()?new Sg:new Gh,new Tv(i,u,p,_,w);var i,u,p,_,w}createSyncEngine(e,i){return function(u,p,_,w,O,B,z){const ne=new Fv(u,p,_,w,O,B);return z&&(ne.wc=!0),ne}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return(e=(0,ge.Z)(function*(i){const u=St(i);lt("RemoteStore","RemoteStore shutting down."),u.mu.add(5),yield Vd(u),u.yu.shutdown(),u.pu.set("Unknown")}),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function Sp(l,e=10240){let i=0;return{read:()=>(0,ge.Z)(function*(){if(i<l.byteLength){const u={value:l.slice(i,i+e),done:!1};return i+=e,u}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class qd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):dn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}class W_{constructor(e,i){this.Vc=e,this.Tt=i,this.metadata=new Er,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(u=>{u&&u.Ou()?this.metadata.resolve(u.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(u?.Mu)}`))},u=>this.metadata.reject(u))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,ge.Z)(function*(){const i=yield e.Cc();if(null===i)return null;const u=e.Sc.decode(i),p=Number(u);isNaN(p)&&e.xc(`length string (${u}) is not valid number`);const _=yield e.Nc(p);return new cE(JSON.parse(_),i.length+p)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,ge.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const i=e.kc();i<0&&e.xc("Reached the end of bundle when a length string is expected.");const u=e.buffer.slice(0,i);return e.buffer=e.buffer.slice(i),u})()}Nc(e){var i=this;return(0,ge.Z)(function*(){for(;i.buffer.length<e;)(yield i.$c())&&i.xc("Reached the end of bundle when more is expected.");const u=i.Sc.decode(i.buffer.slice(0,e));return i.buffer=i.buffer.slice(e),u})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ge.Z)(function*(){const i=yield e.Vc.read();if(!i.done){const u=new Uint8Array(e.buffer.length+i.value.length);u.set(e.buffer),u.set(i.value,e.buffer.length),e.buffer=u}return i.done})()}}class Zb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var i=this;return(0,ge.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new _t(Ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield(p=(0,ge.Z)(function*(_,w){const O=St(_),B=qf(O.Tt)+"/documents",z={documents:w.map(gt=>Kf(O.Tt,gt))},ne=yield O.mo("BatchGetDocuments",B,z,w.length),be=new Map;ne.forEach(gt=>{const Nt=function nE(l,e){return"found"in e?function(i,u){Ft(!!u.found);const p=yu(i,u.found.name),_=cs(u.found.updateTime),w=u.found.createTime?cs(u.found.createTime):gn.min(),O=new Es({mapValue:{fields:u.found.fields}});return Rr.newFoundDocument(p,_,w,O)}(l,e):"missing"in e?function(i,u){Ft(!!u.missing),Ft(!!u.readTime);const p=yu(i,u.missing),_=cs(u.readTime);return Rr.newNoDocument(p,_)}(l,e):Ct()}(O.Tt,gt);be.set(Nt.key.toString(),Nt)});const Le=[];return w.forEach(gt=>{const Nt=be.get(gt.toString());Ft(!!Nt),Le.push(Nt)}),Le}),function(_,w){return p.apply(this,arguments)})(i.datastore,e);var p;return u.forEach(p=>i.recordVersion(p)),u})()}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(e.toString())}delete(e){this.write(new wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;var u;e.mutations.forEach(u=>{i.delete(u.key.toString())}),i.forEach((u,p)=>{const _=zt.fromPath(p);e.mutations.push(new n_(_,e.precondition(_)))}),yield(u=(0,ge.Z)(function*(p,_){const w=St(p),O=qf(w.Tt)+"/documents",B={writes:_.map(z=>Oh(w.Tt,z))};yield w.lo("Commit",O,B)}),function(p,_){return u.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw Ct();i=gn.min()}const u=this.readVersions.get(e.key.toString());if(u){if(!i.isEqual(u))throw new _t(Ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){const i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?i.isEqual(gn.min())?Pi.exists(!1):Pi.updateTime(i):Pi.none()}preconditionForUpdate(e){const i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(gn.min()))throw new _t(Ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(i)}return Pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yg{constructor(e,i,u,p,_){this.asyncQueue=e,this.datastore=i,this.options=u,this.updateFunction=p,this.deferred=_,this.Mc=u.maxAttempts,this.ko=new $h(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,ge.Z)(function*(){const i=new Zb(e.datastore),u=e.Fc(i);u&&u.then(p=>{e.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{e.deferred.resolve(p)}).catch(_=>{e.Bc(_)}))}).catch(p=>{e.Bc(p)})}))}Fc(e){try{const i=this.updateFunction(e);return!Ri(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const i=e.code;return"aborted"===i||"failed-precondition"===i||"already-exists"===i||!r_(i)}return!1}}class Zg{constructor(e,i,u,p){var _=this;this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=u,this.databaseInfo=p,this.user=ce.UNAUTHENTICATED,this.clientId=Tl.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(u,function(){var w=(0,ge.Z)(function*(O){lt("FirestoreClient","Received user=",O.uid),yield _.authCredentialListener(O),_.user=O});return function(O){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(u,w=>(lt("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const i=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),i.resolve()}catch(u){const p=jd(u,"Failed to shutdown persistence");i.reject(p)}})),i.promise}}function Oa(l,e){return uf.apply(this,arguments)}function uf(){return uf=(0,ge.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const i=yield l.getConfiguration();yield e.initialize(i);let u=i.initialUser;l.setCredentialChangeListener(function(){var p=(0,ge.Z)(function*(_){u.isEqual(_)||(yield xb(e.localStore,_),u=_)});return function(_){return p.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>l.terminate()),l.offlineComponents=e}),uf.apply(this,arguments)}function cf(l,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ge.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress();const i=yield Qg(l);lt("FirestoreClient","Initializing OnlineComponentProvider");const u=yield l.getConfiguration();yield e.initialize(i,u),l.setCredentialChangeListener(p=>vp(e.remoteStore,p)),l.setAppCheckTokenChangeListener((p,_)=>vp(e.remoteStore,_)),l.onlineComponents=e}),Ap.apply(this,arguments)}function Qg(l){return df.apply(this,arguments)}function df(){return df=(0,ge.Z)(function*(l){return l.offlineComponents||(lt("FirestoreClient","Using default OfflineComponentProvider"),yield Oa(l,new lf)),l.offlineComponents}),df.apply(this,arguments)}function hf(l){return K_.apply(this,arguments)}function K_(){return K_=(0,ge.Z)(function*(l){return l.onlineComponents||(lt("FirestoreClient","Using default OnlineComponentProvider"),yield cf(l,new z_)),l.onlineComponents}),K_.apply(this,arguments)}function q_(l){return Qg(l).then(e=>e.persistence)}function Op(l){return Qg(l).then(e=>e.localStore)}function vl(l){return hf(l).then(e=>e.remoteStore)}function ff(l){return hf(l).then(e=>e.syncEngine)}function Yd(l){return Np.apply(this,arguments)}function Np(){return Np=(0,ge.Z)(function*(l){const e=yield hf(l),i=e.eventManager;return i.onListen=sa.bind(null,e.syncEngine),i.onUnlisten=le.bind(null,e.syncEngine),i}),Np.apply(this,arguments)}function Z_(l,e,i={}){const u=new Er;return l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(p,_,w,O,B){const z=new qd({next:be=>{_.enqueueAndForget(()=>Rv(p,ne));const Le=be.docs.has(w);!Le&&be.fromCache?B.reject(new _t(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):Le&&be.fromCache&&O&&"server"===O.source?B.reject(new _t(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(be)},error:be=>B.reject(be)}),ne=new Jh(Yu(w.path),z,{includeMetadataChanges:!0,$u:!0});return Ep(p,ne)}(yield Yd(l),l.asyncQueue,e,i,u)})),u.promise}function Q_(l,e,i={}){const u=new Er;return l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(p,_,w,O,B){const z=new qd({next:be=>{_.enqueueAndForget(()=>Rv(p,ne)),be.fromCache&&"server"===O.source?B.reject(new _t(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(be)},error:be=>B.reject(be)}),ne=new Jh(w,z,{includeMetadataChanges:!0,$u:!0});return Ep(p,ne)}(yield Yd(l),l.asyncQueue,e,i,u)})),u.promise}const Rp=new Map;function Zd(l,e,i){if(!i)throw new _t(Ke.INVALID_ARGUMENT,`Function ${l}() cannot be called with an empty ${e}.`)}function Ou(l,e,i,u){if(!0===e&&!0===u)throw new _t(Ke.INVALID_ARGUMENT,`${l} and ${i} cannot be used together.`)}function $v(l){if(!zt.isDocumentKey(l))throw new _t(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${l} has ${l.length}.`)}function zv(l){if(zt.isDocumentKey(l))throw new _t(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${l} has ${l.length}.`)}function Na(l){if(void 0===l)return"undefined";if(null===l)return"null";if("string"==typeof l)return l.length>20&&(l=`${l.substring(0,20)}...`),JSON.stringify(l);if("number"==typeof l||"boolean"==typeof l)return""+l;if("object"==typeof l){if(l instanceof Array)return"an array";{const e=(i=l).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof l?"a function":Ct()}function $n(l,e){if("_delegate"in l&&(l=l._delegate),!(l instanceof e)){if(e.name===l.constructor.name)throw new _t(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Na(l);throw new _t(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return l}function Qd(l,e){if(e<=0)throw new _t(Ke.INVALID_ARGUMENT,`Function ${l}() requires a positive number, but it was: ${e}.`)}class Wv{constructor(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new _t(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _t(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ou("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,i,u,p){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=u,this._app=p,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _t(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new dl;switch(i.type){case"gapi":return new cd(i.client,i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _t(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Rp.get(e);i&&(lt("ComponentProvider","Removing Datastore"),Rp.delete(e),i.terminate())}(this),Promise.resolve()}}class Ei{constructor(e,i,u){this.converter=i,this._key=u,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ei(this.firestore,e,this._key)}}class So{constructor(e,i,u){this.converter=i,this._query=u,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class Nu extends So{constructor(e,i,u){super(e,i,Yu(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ei(this.firestore,null,new zt(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function Jg(l,e,...i){if(l=(0,qe.m9)(l),Zd("collection","path",e),l instanceof Jd){const u=kn.fromString(e,...i);return zv(u),new Nu(l,null,u)}{if(!(l instanceof Ei||l instanceof Nu))throw new _t(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=l._path.child(kn.fromString(e,...i));return zv(u),new Nu(l.firestore,null,u)}}function Is(l,e,...i){if(l=(0,qe.m9)(l),1===arguments.length&&(e=Tl.R()),Zd("doc","path",e),l instanceof Jd){const u=kn.fromString(e,...i);return $v(u),new Ei(l,null,new zt(u))}{if(!(l instanceof Ei||l instanceof Nu))throw new _t(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=l._path.child(kn.fromString(e,...i));return $v(u),new Ei(l.firestore,l instanceof Nu?l.converter:null,new zt(u))}}function X_(l,e){return l=(0,qe.m9)(l),e=(0,qe.m9)(e),(l instanceof Ei||l instanceof Nu)&&(e instanceof Ei||e instanceof Nu)&&l.firestore===e.firestore&&l.path===e.path&&l.converter===e.converter}function ey(l,e){return l=(0,qe.m9)(l),e=(0,qe.m9)(e),l instanceof So&&e instanceof So&&l.firestore===e.firestore&&Eh(l._query,e._query)&&l.converter===e.converter}class Kv{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new $h(this,"async_queue_retry"),this.Hc=()=>{const i=Bd();i&&lt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.ko.Vo()};const e=Bd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const i=Bd();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const i=new Er;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(i){if(!bs(i))throw i;lt("AsyncQueue","Operation failed with retryable error: "+i)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const i=this.qc.then(()=>(this.jc=!0,e().catch(u=>{throw this.Qc=u,this.jc=!1,dn("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(u)),u}).then(u=>(this.jc=!1,u))));return this.qc=i,i}enqueueAfterDelay(e,i,u){this.Jc(),this.Wc.indexOf(e)>-1&&(i=0);const p=wp.createAndSchedule(this,e,i,u,_=>this.Xc(_));return this.Gc.push(p),p}Jc(){this.Qc&&Ct()}verifyOperationInProgress(){}ta(){var e=this;return(0,ge.Z)(function*(){let i;do{i=e.qc,yield i}while(i!==e.qc)})()}ea(e){for(const i of this.Gc)if(i.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((i,u)=>i.targetTimeMs-u.targetTimeMs);for(const i of this.Gc)if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const i=this.Gc.indexOf(e);this.Gc.splice(i,1)}}function xp(l){return function(e,i){if("object"!=typeof e||null===e)return!1;const u=e;for(const p of["next","error","complete"])if(p in u&&"function"==typeof u[p])return!0;return!1}(l)}class Xg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,u){this._progressObserver={next:e,error:i,complete:u}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ki extends Jd{constructor(e,i,u,p){super(e,i,u,p),this.type="firestore",this._queue=new Kv,this._persistenceKey=p?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ty(this),this._firestoreClient.terminate()}}function Ps(l){return l._firestoreClient||ty(l),l._firestoreClient.verifyNotTerminated(),l._firestoreClient}function ty(l){var e;const i=l._freezeSettings(),u=(_=(null===(e=l._app)||void 0===e?void 0:e.options.appId)||"",new fu(l._databaseId,_,l._persistenceKey,(O=i).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var _,O;l._firestoreClient=new Zg(l._authCredentials,l._appCheckCredentials,l._queue,u)}function Xb(l,e,i){const u=new Er;return l.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield Oa(l,i),yield cf(l,e),u.resolve()}catch(p){const _=p;if(!("FirebaseError"===(w=_).name?w.code===Ke.FAILED_PRECONDITION||w.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw _;jn("Error enabling offline persistence. Falling back to persistence disabled: "+_),u.reject(_)}var w})).then(()=>u.promise)}function xl(l){if(l._initialized||l._terminated)throw new _t(Ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(E.fromBase64String(e))}catch(i){throw new _t(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new aa(E.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hc{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new _t(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yc{constructor(e){this._methodName=e}}class _f{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new _t(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new _t(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return On(this._lat,e._lat)||On(this._long,e._long)}}const kp=/^__.*__$/;class tw{constructor(e,i,u){this.data=e,this.fieldMask=i,this.fieldTransforms=u}toMutation(e,i){return null!==this.fieldMask?new Qu(e,this.data,this.fieldMask,i,this.fieldTransforms):new Sh(e,this.data,i,this.fieldTransforms)}}class rm{constructor(e,i,u){this.data=e,this.fieldMask=i,this.fieldTransforms=u}toMutation(e,i){return new Qu(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function im(l){switch(l){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class yf{constructor(e,i,u,p,_,w){this.settings=e,this.databaseId=i,this.Tt=u,this.ignoreUndefinedProperties=p,void 0===_&&this.ia(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new yf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var i;const u=null===(i=this.path)||void 0===i?void 0:i.child(e),p=this.oa({path:u,ca:!1});return p.aa(e),p}ha(e){var i;const u=null===(i=this.path)||void 0===i?void 0:i.child(e),p=this.oa({path:u,ca:!1});return p.ia(),p}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return hm(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(im(this.ra)&&kp.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class qv{constructor(e,i,u){this.databaseId=e,this.ignoreUndefinedProperties=i,this.Tt=u||Wc(e)}wa(e,i,u,p=!1){return new yf({ra:e,methodName:i,_a:u,path:Hn.emptyPath(),ca:!1,da:p},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function xu(l){const e=l._freezeSettings(),i=Wc(l._databaseId);return new qv(l._databaseId,!!e.ignoreUndefinedProperties,i)}function sm(l,e,i,u,p,_={}){const w=l.wa(_.merge||_.mergeFields?2:0,e,i,p);Zv("Data must be an object, but it was:",w,u);const O=um(u,w);let B,z;if(_.merge)B=new $o(w.fieldMask),z=w.fieldTransforms;else if(_.mergeFields){const ne=[];for(const be of _.mergeFields){const Le=Bp(e,be,i);if(!w.contains(Le))throw new _t(Ke.INVALID_ARGUMENT,`Field '${Le}' is specified in your field mask but missing from your input data.`);Qv(ne,Le)||ne.push(Le)}B=new $o(ne),z=w.fieldTransforms.filter(be=>B.covers(be.field))}else B=null,z=w.fieldTransforms;return new tw(new Es(O),B,z)}class vf extends Yc{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function om(l,e,i){return new yf({ra:3,_a:e.settings._a,methodName:l._methodName,ca:i},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class Fp extends Yc{_toFieldTransform(e){return new Ac(e.path,new zo)}isEqual(e){return e instanceof Fp}}class am extends Yc{constructor(e,i){super(e),this.ma=i}_toFieldTransform(e){const i=om(this,e,!0),u=this.ma.map(_=>fc(_,i)),p=new Ya(u);return new Ac(e.path,p)}isEqual(e){return this===e}}class ry extends Yc{constructor(e,i){super(e),this.ma=i}_toFieldTransform(e){const i=om(this,e,!0),u=this.ma.map(_=>fc(_,i)),p=new ra(u);return new Ac(e.path,p)}isEqual(e){return this===e}}class Yv extends Yc{constructor(e,i){super(e),this.ga=i}_toFieldTransform(e){const i=new _u(e.Tt,an(e.Tt,this.ga));return new Ac(e.path,i)}isEqual(e){return this===e}}function Lp(l,e,i,u){const p=l.wa(1,e,i);Zv("Data must be an object, but it was:",p,u);const _=[],w=Es.empty();no(u,(B,z)=>{const ne=dm(e,B,i);z=(0,qe.m9)(z);const be=p.ha(ne);if(z instanceof vf)_.push(ne);else{const Le=fc(z,be);null!=Le&&(_.push(ne),w.set(ne,Le))}});const O=new $o(_);return new rm(w,O,p.fieldTransforms)}function lm(l,e,i,u,p,_){const w=l.wa(1,e,i),O=[Bp(e,u,i)],B=[p];if(_.length%2!=0)throw new _t(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Le=0;Le<_.length;Le+=2)O.push(Bp(e,_[Le])),B.push(_[Le+1]);const z=[],ne=Es.empty();for(let Le=O.length-1;Le>=0;--Le)if(!Qv(z,O[Le])){const gt=O[Le];let Nt=B[Le];Nt=(0,qe.m9)(Nt);const Zt=w.ha(gt);if(Nt instanceof vf)z.push(gt);else{const _n=fc(Nt,Zt);null!=_n&&(z.push(gt),ne.set(gt,_n))}}const be=new $o(z);return new rm(ne,be,w.fieldTransforms)}function Up(l,e,i,u=!1){return fc(i,l.wa(u?4:3,e))}function fc(l,e){if(cm(l=(0,qe.m9)(l)))return Zv("Unsupported field value:",e,l),um(l,e);if(l instanceof Yc)return function(i,u){if(!im(u.ra))throw u.fa(`${i._methodName}() can only be used with update() and set()`);if(!u.path)throw u.fa(`${i._methodName}() is not currently supported inside arrays`);const p=i._toFieldTransform(u);p&&u.fieldTransforms.push(p)}(l,e),null;if(void 0===l&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),l instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(i,u){const p=[];let _=0;for(const w of i){let O=fc(w,u.la(_));null==O&&(O={nullValue:"NULL_VALUE"}),p.push(O),_++}return{arrayValue:{values:p}}}(l,e)}return function(i,u){if(null===(i=(0,qe.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return an(u.Tt,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const p=ar.fromDate(i);return{timestampValue:Xu(u.Tt,p)}}if(i instanceof ar){const p=new ar(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xu(u.Tt,p)}}if(i instanceof _f)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof aa)return{bytesValue:ec(u.Tt,i._byteString)};if(i instanceof Ei){const p=u.databaseId,_=i.firestore._databaseId;if(!_.isEqual(p))throw u.fa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:ag(i.firestore._databaseId||u.databaseId,i._key.path)}}throw u.fa(`Unsupported field value: ${Na(i)}`)}(l,e)}function um(l,e){const i={};return Al(l)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(l,(u,p)=>{const _=fc(p,e.ua(u));null!=_&&(i[u]=_)}),{mapValue:{fields:i}}}function cm(l){return!("object"!=typeof l||null===l||l instanceof Array||l instanceof Date||l instanceof ar||l instanceof _f||l instanceof aa||l instanceof Ei||l instanceof Yc)}function Zv(l,e,i){if(!cm(i)||"object"!=typeof(u=i)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const u=Na(i);throw e.fa("an object"===u?l+" a custom object":l+" "+u)}var u}function Bp(l,e,i){if((e=(0,qe.m9)(e))instanceof hc)return e._internalPath;if("string"==typeof e)return dm(l,e);throw hm("Field path arguments must be of type string or ",l,!1,void 0,i)}const gE=new RegExp("[~\\*/\\[\\]]");function dm(l,e,i){if(e.search(gE)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,l,!1,void 0,i);try{return new hc(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,l,!1,void 0,i)}}function hm(l,e,i,u,p){const _=u&&!u.isEmpty(),w=void 0!==p;let O=`Function ${e}() called with invalid data`;i&&(O+=" (via `toFirestore()`)"),O+=". ";let B="";return(_||w)&&(B+=" (found",_&&(B+=` in field ${u}`),w&&(B+=` in document ${p}`),B+=")"),new _t(Ke.INVALID_ARGUMENT,O+l+B)}function Qv(l,e){return l.some(i=>i.isEqual(e))}class Vp{constructor(e,i,u,p,_){this._firestore=e,this._userDataWriter=i,this._key=u,this._document=p,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class nw extends Vp{data(){return super.data()}}function fm(l,e){return"string"==typeof e?dm(l,e):e instanceof hc?e._internalPath:e._delegate._internalPath}function Jv(l){if("L"===l.limitType&&0===l.explicitOrderBy.length)throw new _t(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class Gp extends pm{}function Xd(l,e,...i){let u=[];e instanceof pm&&u.push(e),u=u.concat(i),function(p){const _=p.filter(O=>O instanceof jp).length,w=p.filter(O=>O instanceof bf).length;if(_>1||_>0&&w>0)throw new _t(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(u);for(const p of u)l=p._apply(l);return l}class bf extends Gp{constructor(e,i,u){super(),this._field=e,this._op=i,this._value=u,this.type="where"}static _create(e,i,u){return new bf(e,i,u)}_apply(e){const i=this._parse(e);return Zc(e._query,i),new So(e.firestore,e.converter,yd(e._query,i))}_parse(e){const i=xu(e.firestore);return function(p,_,w,O,B,z,ne){let be;if(B.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new _t(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){n0(ne,z);const Le=[];for(const gt of ne)Le.push(ay(O,p,gt));be={arrayValue:{values:Le}}}else be=ay(O,p,ne)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||n0(ne,z),be=Up(w,"where",ne,"in"===z||"not-in"===z);return dr.create(B,z,be)}(e._query,0,i,e.firestore._databaseId,this._field,this._op,this._value)}}class jp extends pm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new jp(e,i)}_parse(e){const i=this._queryConstraints.map(u=>u._parse(e)).filter(u=>u.getFilters().length>0);return 1===i.length?i[0]:Mr.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return 0===i.getFilters().length?e:(function(u,p){let _=u;const w=p.getFlattenedFilters();for(const O of w)Zc(_,O),_=yd(_,O)}(e._query,i),new So(e.firestore,e.converter,yd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class eh extends Gp{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new eh(e,i)}_apply(e){const i=function(u,p,_){if(null!==u.startAt)throw new _t(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new _t(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new fd(p,_);return function(O,B){if(null===gd(O)){const z=md(O);null!==z&&gm(0,z,B.field)}}(u,w),w}(e._query,this._field,this._direction);return new So(e.firestore,e.converter,function(u,p){const _=u.explicitOrderBy.concat([p]);return new qa(u.path,u.collectionGroup,_,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,i))}}class wf extends Gp{constructor(e,i,u){super(),this.type=e,this._limit=i,this._limitType=u}static _create(e,i,u){return new wf(e,i,u)}_apply(e){return new So(e.firestore,e.converter,vd(e._query,this._limit,this._limitType))}}class Ef extends Gp{constructor(e,i,u){super(),this.type=e,this._docOrFields=i,this._inclusive=u}static _create(e,i,u){return new Ef(e,i,u)}_apply(e){const i=pc(e,this.type,this._docOrFields,this._inclusive);return new So(e.firestore,e.converter,(p=i,new qa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,p,u.endAt)));var u,p}}class Hp extends Gp{constructor(e,i,u){super(),this.type=e,this._docOrFields=i,this._inclusive=u}static _create(e,i,u){return new Hp(e,i,u)}_apply(e){const i=pc(e,this.type,this._docOrFields,this._inclusive);return new So(e.firestore,e.converter,(p=i,new qa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,p)));var u,p}}function pc(l,e,i,u){if(i[0]=(0,qe.m9)(i[0]),i[0]instanceof Vp)return function(p,_,w,O,B){if(!O)throw new _t(Ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const z=[];for(const ne of es(p))if(ne.field.isKeyField())z.push(jo(_,O.key));else{const be=O.data.field(ne.field);if(Ne(be))throw new _t(Ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ne.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===be){const Le=ne.field.canonicalString();throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Le}' (used as the orderBy) does not exist.`)}z.push(be)}return new wn(z,B)}(l._query,l.firestore._databaseId,e,i[0]._document,u);{const p=xu(l.firestore);return function(_,w,O,B,z,ne){const be=_.explicitOrderBy;if(z.length>be.length)throw new _t(Ke.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Le=[];for(let gt=0;gt<z.length;gt++){const Nt=z[gt];if(be[gt].field.isKeyField()){if("string"!=typeof Nt)throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof Nt}`);if(!_d(_)&&-1!==Nt.indexOf("/"))throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${Nt}' contains a slash.`);const Zt=_.path.child(kn.fromString(Nt));if(!zt.isDocumentKey(Zt))throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${Zt}' is not because it contains an odd number of segments.`);const _n=new zt(Zt);Le.push(jo(w,_n))}else{const Zt=Up(O,B,Nt);Le.push(Zt)}}return new wn(Le,ne)}(l._query,l.firestore._databaseId,p,e,i,u)}}function ay(l,e,i){if("string"==typeof(i=(0,qe.m9)(i))){if(""===i)throw new _t(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_d(e)&&-1!==i.indexOf("/"))throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const u=e.path.child(kn.fromString(i));if(!zt.isDocumentKey(u))throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return jo(l,new zt(u))}if(i instanceof Ei)return jo(l,i._key);throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Na(i)}.`)}function n0(l,e){if(!Array.isArray(l)||0===l.length)throw new _t(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zc(l,e){if(e.isInequality()){const u=md(l),p=e.field;if(null!==u&&!u.isEqual(p))throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${u.toString()}' and '${p.toString()}'`);const _=gd(l);null!==_&&gm(0,p,_)}const i=function(u,p){for(const _ of u)for(const w of _.getFlattenedFilters())if(p.indexOf(w.op)>=0)return w.op;return null}(l.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new _t(Ke.INVALID_ARGUMENT,i===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}function gm(l,e,i){if(!i.isEqual(e))throw new _t(Ke.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class r0{convertValue(e,i="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return K(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ee(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw Ct()}}convertObject(e,i){const u={};return no(e.fields,(p,_)=>{u[p]=this.convertValue(_,i)}),u}convertGeoPoint(e){return new _f(K(e.latitude),K(e.longitude))}convertArray(e,i){return(e.values||[]).map(u=>this.convertValue(u,i))}convertServerTimestamp(e,i){switch(i){case"previous":const u=yt(e);return null==u?null:this.convertValue(u,i);case"estimate":return this.convertTimestamp(Yt(e));default:return null}}convertTimestamp(e){const i=V(e);return new ar(i.seconds,i.nanos)}convertDocumentKey(e,i){const u=kn.fromString(e);Ft(Qf(u));const p=new qr(u.get(1),u.get(3)),_=new zt(u.popFirst(5));return p.isEqual(i)||dn(`Document ${_} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),_}}function $p(l,e,i){let u;return u=l?i&&(i.merge||i.mergeFields)?l.toFirestore(e,i):l.toFirestore(e):e,u}class s0 extends r0{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ei(this.firestore,null,i)}}class Pl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ku extends Vp{constructor(e,i,u,p,_,w){super(e,i,u,p,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const u=this._document.data.field(fm("DocumentSnapshot.get",e));if(null!==u)return this._userDataWriter.convertValue(u,i.serverTimestamps)}}}class Qc extends ku{data(e={}){return super.data(e)}}class Fu{constructor(e,i,u,p){this._firestore=e,this._userDataWriter=i,this._snapshot=p,this.metadata=new Pl(p.hasPendingWrites,p.fromCache),this.query=u}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(u=>{e.call(i,new Qc(this._firestore,this._userDataWriter,u.key,u,new Pl(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new _t(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(u,p){if(u._snapshot.oldDocs.isEmpty()){let _=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new Qc(u._firestore,u._userDataWriter,w.doc.key,w.doc,new Pl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:_++}))}{let _=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>p||3!==w.type).map(w=>{const O=new Qc(u._firestore,u._userDataWriter,w.doc.key,w.doc,new Pl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let B=-1,z=-1;return 0!==w.type&&(B=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),z=_.indexOf(w.doc.key)),{type:is(w.type),doc:O,oldIndex:B,newIndex:z}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function is(l){switch(l){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}function o0(l,e){return l instanceof ku&&e instanceof ku?l._firestore===e._firestore&&l._key.isEqual(e._key)&&(null===l._document?null===e._document:l._document.isEqual(e._document))&&l._converter===e._converter:l instanceof Fu&&e instanceof Fu&&l._firestore===e._firestore&&ey(l.query,e.query)&&l.metadata.isEqual(e.metadata)&&l._snapshot.isEqual(e._snapshot)}class Yl extends r0{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ei(this.firestore,null,i)}}function _m(l,e,i){l=$n(l,Ei);const u=$n(l.firestore,ki),p=$p(l.converter,e,i);return rh(u,[sm(xu(u),"setDoc",l._key,p,null!==l.converter,i).toMutation(l._key,Pi.none())])}function th(l,e,i,...u){l=$n(l,Ei);const p=$n(l.firestore,ki),_=xu(p);let w;return w="string"==typeof(e=(0,qe.m9)(e))||e instanceof hc?lm(_,"updateDoc",l._key,e,i,u):Lp(_,"updateDoc",l._key,e),rh(p,[w.toMutation(l._key,Pi.exists(!0))])}function If(l,...e){var i,u,p;l=(0,qe.m9)(l);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||xp(e[w])||(_=e[w],w++);const O={includeMetadataChanges:_.includeMetadataChanges};if(xp(e[w])){const be=e[w];e[w]=null===(i=be.next)||void 0===i?void 0:i.bind(be),e[w+1]=null===(u=be.error)||void 0===u?void 0:u.bind(be),e[w+2]=null===(p=be.complete)||void 0===p?void 0:p.bind(be)}let B,z,ne;if(l instanceof Ei)z=$n(l.firestore,ki),ne=Yu(l._key.path),B={next:be=>{e[w]&&e[w](ih(z,l,be))},error:e[w+1],complete:e[w+2]};else{const be=$n(l,So);z=$n(be.firestore,ki),ne=be._query;const Le=new Yl(z);B={next:gt=>{e[w]&&e[w](new Fu(z,Le,be,gt))},error:e[w+1],complete:e[w+2]},Jv(l._query)}return function(be,Le,gt,Nt){const Zt=new qd(Nt),_n=new Jh(Le,Zt,gt);return be.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Ep(yield Yd(be),_n)})),()=>{Zt.bc(),be.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Rv(yield Yd(be),_n)}))}}(Ps(z),ne,O,B)}function rh(l,e){return function(i,u){const p=new Er;return i.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function Lv(l,e,i){return jg.apply(this,arguments)}(yield ff(i),u,p)})),p.promise}(Ps(l),e)}function ih(l,e,i){const u=i.docs.get(e._key),p=new Yl(l);return new ku(l,p,e._key,u,new Pl(i.hasPendingWrites,i.fromCache),e.converter)}const ym={maxAttempts:5};class Zl{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=xu(e)}set(e,i,u){this._verifyNotCommitted();const p=Ni(e,this._firestore),_=$p(p.converter,i,u),w=sm(this._dataReader,"WriteBatch.set",p._key,_,null!==p.converter,u);return this._mutations.push(w.toMutation(p._key,Pi.none())),this}update(e,i,u,...p){this._verifyNotCommitted();const _=Ni(e,this._firestore);let w;return w="string"==typeof(i=(0,qe.m9)(i))||i instanceof hc?lm(this._dataReader,"WriteBatch.update",_._key,i,u,p):Lp(this._dataReader,"WriteBatch.update",_._key,i),this._mutations.push(w.toMutation(_._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=Ni(e,this._firestore);return this._mutations=this._mutations.concat(new wd(i._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ni(l,e){if((l=(0,qe.m9)(l)).firestore!==e)throw new _t(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return l}class zp extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=xu(e)}get(e){const i=Ni(e,this._firestore),u=new s0(this._firestore);return this._transaction.lookup([i._key]).then(p=>{if(!p||1!==p.length)return Ct();const _=p[0];if(_.isFoundDocument())return new Vp(this._firestore,u,_.key,_,i.converter);if(_.isNoDocument())return new Vp(this._firestore,u,i._key,null,i.converter);throw Ct()})}set(e,i,u){const p=Ni(e,this._firestore),_=$p(p.converter,i,u),w=sm(this._dataReader,"Transaction.set",p._key,_,null!==p.converter,u);return this._transaction.set(p._key,w),this}update(e,i,u,...p){const _=Ni(e,this._firestore);let w;return w="string"==typeof(i=(0,qe.m9)(i))||i instanceof hc?lm(this._dataReader,"Transaction.update",_._key,i,u,p):Lp(this._dataReader,"Transaction.update",_._key,i),this._transaction.update(_._key,w),this}delete(e){const i=Ni(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){const i=Ni(e,this._firestore),u=new Yl(this._firestore);return super.get(e).then(p=>new ku(this._firestore,u,i._key,p._document,new Pl(!1,!1),i.converter))}}!function(l,e=!0){Ve=ut.SDK_VERSION,(0,ut._registerComponent)(new ot.wA("firestore",(i,{instanceIdentifier:u,options:p})=>{const _=i.getProvider("app").getImmediate(),w=new ki(new Bo(i.getProvider("auth-internal")),new $u(i.getProvider("app-check-internal")),function(O,B){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new _t(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(O.options.projectId,B)}(_,u),_);return p=Object.assign({useFetchStreams:e},p),w._setSettings(p),w},"PUBLIC").setMultipleInstances(!0)),(0,ut.registerVersion)(J,"3.9.0",l),(0,ut.registerVersion)(J,"3.9.0","esm2017")}();function h0(l,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _t("invalid-argument",`Invalid options passed to function ${l}(): You cannot specify both "merge" and "mergeFields".`);return e}function ow(){if(typeof Uint8Array>"u")throw new _t("unimplemented","Uint8Arrays are not available in this environment.")}function aw(){if(!function S(){return typeof atob<"u"}())throw new _t("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Tf{constructor(e){this._delegate=e}static fromBase64String(e){return aw(),new Tf(aa.fromBase64String(e))}static fromUint8Array(e){return ow(),new Tf(aa.fromUint8Array(e))}toBase64(){return aw(),this._delegate.toBase64()}toUint8Array(){return ow(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sf(l){return function lw(l,e){if("object"!=typeof l||null===l)return!1;const i=l;for(const u of e)if(u in i&&"function"==typeof i[u])return!0;return!1}(l,["next","error","complete"])}class f0{enableIndexedDbPersistence(e,i){return function Ma(l,e){xl(l=$n(l,ki));const i=Ps(l),u=l._freezeSettings(),p=new z_;return Xb(i,p,new qg(p,u.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return function tm(l){xl(l=$n(l,ki));const e=Ps(l),i=l._freezeSettings(),u=new z_;return Xb(e,u,new $_(u,i.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qc(l){if(l._initialized&&!l._terminated)throw new _t(Ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return l._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(i=(0,ge.Z)(function*(u){if(!Eo.C())return Promise.resolve();const p=u+"main";yield Eo.delete(p)}),function(u){return i.apply(this,arguments)})(C_(l._databaseId,l._persistenceKey)),e.resolve()}catch(i){e.reject(i)}var i})),e.promise}(e._delegate)}}class td{constructor(e,i,u){this._delegate=i,this._persistenceProvider=u,this.INTERNAL={delete:()=>this.terminate()},e instanceof qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&jn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}useEmulator(e,i,u={}){!function gf(l,e,i,u={}){var p;const _=(l=$n(l,Jd))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&jn("Host has been set in both settings() and useEmulator(), emulator host will be used"),l._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${i}`,ssl:!1})),u.mockUserToken){let w,O;if("string"==typeof u.mockUserToken)w=u.mockUserToken,O=ce.MOCK_USER;else{w=(0,qe.Sg)(u.mockUserToken,null===(p=l._app)||void 0===p?void 0:p.options.projectId);const B=u.mockUserToken.sub||u.mockUserToken.user_id;if(!B)throw new _t(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new ce(B)}l._authCredentials=new ja(new ys(w,O))}}(this._delegate,e,i,u)}enableNetwork(){return function Mu(l){return function Y_(l){return l.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield q_(l),i=yield vl(l);return e.setNetworkEnabled(!0),function(u){const p=St(u);return p.mu.delete(0),mp(p)}(i)}))}(Ps(l=$n(l,ki)))}(this._delegate)}disableNetwork(){return function ew(l){return function To(l){return l.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield q_(l),i=yield vl(l);return e.setNetworkEnabled(!1),(u=(0,ge.Z)(function*(p){const _=St(p);_.mu.add(0),yield Vd(_),_.pu.set("Offline")}),function(p){return u.apply(this,arguments)})(i);var u}))}(Ps(l=$n(l,ki)))}(this._delegate)}enablePersistence(e){let i=!1,u=!1;return e&&(i=!!e.synchronizeTabs,u=!!e.experimentalForceOwningTab,Ou("synchronizeTabs",i,"experimentalForceOwningTab",u)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,u)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nm(l){return function(e){const i=new Er;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function qb(l,e){return G_.apply(this,arguments)}(yield ff(e),i)})),i.promise}(Ps(l=$n(l,ki)))}(this._delegate)}onSnapshotsInSync(e){return function nh(l,e){return function jv(l,e){const i=new qd(e);return l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return u=yield Yd(l),p=i,St(u).vu.add(p),void p.next();var u,p})),()=>{i.bc(),l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return u=yield Yd(l),p=i,void St(u).vu.delete(p);var u,p}))}}(Ps(l=$n(l,ki)),xp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _t("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rd(this,Jg(this._delegate,e))}catch(i){throw la(i,"collection()","Firestore.collection()")}}doc(e){try{return new Qa(this,Is(this._delegate,e))}catch(i){throw la(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ua(this,function Qb(l,e){if(l=$n(l,Jd),Zd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _t(Ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new So(l,null,(i=e,new qa(kn.emptyPath(),i)));var i}(this._delegate,e))}catch(i){throw la(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function vm(l,e,i){l=$n(l,ki);const u=Object.assign(Object.assign({},ym),i);return function(p){if(p.maxAttempts<1)throw new _t(Ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(u),function(p,_,w){const O=new Er;return p.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const B=yield function Gv(l){return hf(l).then(e=>e.datastore)}(p);new Yg(p.asyncQueue,B,w,_,O).run()})),O.promise}(Ps(l),p=>e(new zp(l,p)),u)}(this._delegate,i=>e(new p0(this,i)))}batch(){return Ps(this._delegate),new g0(new Zl(this._delegate,e=>rh(this._delegate,e)))}loadBundle(e){return function Ru(l,e){const i=Ps(l=$n(l,ki)),u=new Xg;return function J_(l,e,i,u){const p=function(_,w){let O;return O="string"==typeof _?(new TextEncoder).encode(_):_,B=function(B,z){if(B instanceof Uint8Array)return Sp(B,z);if(B instanceof ArrayBuffer)return Sp(new Uint8Array(B),z);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new W_(B,w);var B}(i,Wc(e));l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function Yb(l,e,i){const u=St(l);var p;(p=(0,ge.Z)(function*(_,w,O){try{const B=yield w.getMetadata();if(yield function(Le,gt){const Nt=St(Le),Zt=cs(gt.createTime);return Nt.persistence.runTransaction("hasNewerBundle","readonly",_n=>Nt.$s.getBundleMetadata(_n,gt.id)).then(_n=>!!_n&&_n.createTime.compareTo(Zt)>=0)}(_.localStore,B))return yield w.close(),O._completeWith({taskState:"Success",documentsLoaded:(Le=B).totalDocuments,bytesLoaded:Le.totalBytes,totalDocuments:Le.totalDocuments,totalBytes:Le.totalBytes}),Promise.resolve(new Set);O._updateProgress(Kb(B));const z=new hE(B,_.localStore,w.Tt);let ne=yield w.yc();for(;ne;){const Le=yield z.Bu(ne);Le&&O._updateProgress(Le),ne=yield w.yc()}const be=yield z.complete();return yield Ys(_,be.Uu,void 0),yield function(Le,gt){const Nt=St(Le);return Nt.persistence.runTransaction("Save bundle","readwrite",Zt=>Nt.$s.saveBundleMetadata(Zt,gt))}(_.localStore,B),O._completeWith(be.progress),Promise.resolve(be.qu)}catch(B){return jn("SyncEngine",`Loading bundle failed with ${B}`),O._failWith(B),Promise.resolve(new Set)}var Le}),function(_,w,O){return p.apply(this,arguments)})(u,e,i).then(p=>{u.sharedClientState.notifyBundleLoaded(p)})}(yield ff(l),p,u)}))}(i,l._databaseId,e,u),u}(this._delegate,e)}namedQuery(e){return function ql(l,e){return function Hv(l,e){return l.asyncQueue.enqueue((0,ge.Z)(function*(){return function(i,u){const p=St(i);return p.persistence.runTransaction("Get named query","readonly",_=>p.$s.getNamedQuery(_,u))}(yield Op(l),e)}))}(Ps(l=$n(l,ki)),e).then(i=>i?new So(l,null,i.query):null)}(this._delegate,e).then(i=>i?new ua(this,i):null)}}class nd extends r0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tf(new aa(e))}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return Qa.forKey(i,this.firestore,null)}}class p0{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new nd(e)}get(e){const i=id(e);return this._delegate.get(i).then(u=>new Af(this._firestore,new ku(this._firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,i.converter)))}set(e,i,u){const p=id(e);return u?(h0("Transaction.set",u),this._delegate.set(p,i,u)):this._delegate.set(p,i),this}update(e,i,u,...p){const _=id(e);return 2===arguments.length?this._delegate.update(_,i):this._delegate.update(_,i,u,...p),this}delete(e){const i=id(e);return this._delegate.delete(i),this}}class g0{constructor(e){this._delegate=e}set(e,i,u){const p=id(e);return u?(h0("WriteBatch.set",u),this._delegate.set(p,i,u)):this._delegate.set(p,i),this}update(e,i,u,...p){const _=id(e);return 2===arguments.length?this._delegate.update(_,i):this._delegate.update(_,i,u,...p),this}delete(e){const i=id(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class Ql{constructor(e,i,u){this._firestore=e,this._userDataWriter=i,this._delegate=u}fromFirestore(e,i){const u=new Qc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Uu(this._firestore,u),i??{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){const u=Ql.INSTANCES;let p=u.get(e);p||(p=new WeakMap,u.set(e,p));let _=p.get(i);return _||(_=new Ql(e,new nd(e),i),p.set(i,_)),_}}Ql.INSTANCES=new WeakMap;class Qa{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new nd(e)}static forPath(e,i,u){if(e.length%2!=0)throw new _t("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qa(i,new Ei(i._delegate,u,new zt(e)))}static forKey(e,i,u){return new Qa(i,new Ei(i._delegate,u,e))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rd(this.firestore,Jg(this._delegate,e))}catch(i){throw la(i,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qe.m9)(e))instanceof Ei&&X_(this._delegate,e)}set(e,i){i=h0("DocumentReference.set",i);try{return i?_m(this._delegate,e,i):_m(this._delegate,e)}catch(u){throw la(u,"setDoc()","DocumentReference.set()")}}update(e,i,...u){try{return 1===arguments.length?th(this._delegate,e):th(this._delegate,e,i,...u)}catch(p){throw la(p,"updateDoc()","DocumentReference.update()")}}delete(){return function c0(l){return rh($n(l.firestore,ki),[new wd(l._key,Pi.none())])}(this._delegate)}onSnapshot(...e){const i=wm(e),u=hy(e,p=>new Af(this.firestore,new ku(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return If(this._delegate,i,u)}get(e){let i;return i="cache"===e?.source?function a0(l){l=$n(l,Ei);const e=$n(l.firestore,ki),i=Ps(e),u=new Yl(e);return function Mp(l,e){const i=new Er;return l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(u=(0,ge.Z)(function*(p,_,w){try{const O=yield function(B,z){const ne=St(B);return ne.persistence.runTransaction("read document","readonly",be=>ne.localDocuments.getDocument(be,z))}(p,_);O.isFoundDocument()?w.resolve(O):O.isNoDocument()?w.resolve(null):w.reject(new _t(Ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const B=jd(O,`Failed to get document '${_} from cache`);w.reject(B)}}),function(p,_,w){return u.apply(this,arguments)})(yield Op(l),e,i);var u})),i.promise}(i,l._key).then(p=>new ku(e,u,l._key,p,new Pl(null!==p&&p.hasLocalMutations,!0),l.converter))}(this._delegate):"server"===e?.source?function l0(l){l=$n(l,Ei);const e=$n(l.firestore,ki);return Z_(Ps(e),l._key,{source:"server"}).then(i=>ih(e,l,i))}(this._delegate):function ly(l){l=$n(l,Ei);const e=$n(l.firestore,ki);return Z_(Ps(e),l._key).then(i=>ih(e,l,i))}(this._delegate),i.then(u=>new Af(this.firestore,new ku(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)))}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}function la(l,e,i){return l.message=l.message.replace(e,i),l}function wm(l){for(const e of l)if("object"==typeof e&&!Sf(e))return e;return{}}function hy(l,e){var i,u;let p;return p=Sf(l[0])?l[0]:Sf(l[1])?l[1]:"function"==typeof l[0]?{next:l[0],error:l[1],complete:l[2]}:{next:l[1],error:l[2],complete:l[3]},{next:_=>{p.next&&p.next(e(_))},error:null===(i=p.error)||void 0===i?void 0:i.bind(p),complete:null===(u=p.complete)||void 0===u?void 0:u.bind(p)}}class Af{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new Qa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return o0(this._delegate,e._delegate)}}class Uu extends Af{data(e){const i=this._delegate.data(e);return function Ai(l,e){l||Ct()}(void 0!==i),i}}class ua{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new nd(e)}where(e,i,u){try{return new ua(this.firestore,Xd(this._delegate,function mE(l,e,i){const u=e,p=fm("where",l);return bf._create(p,u,i)}(e,i,u)))}catch(p){throw la(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new ua(this.firestore,Xd(this._delegate,function iy(l,e="asc"){const i=e,u=fm("orderBy",l);return eh._create(u,i)}(e,i)))}catch(u){throw la(u,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ua(this.firestore,Xd(this._delegate,function Pu(l){return Qd("limit",l),wf._create("limit",l,"F")}(e)))}catch(i){throw la(i,"limit()","Query.limit()")}}limitToLast(e){try{return new ua(this.firestore,Xd(this._delegate,function sy(l){return Qd("limitToLast",l),wf._create("limitToLast",l,"L")}(e)))}catch(i){throw la(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ua(this.firestore,Xd(this._delegate,function Xv(...l){return Ef._create("startAt",l,!0)}(...e)))}catch(i){throw la(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ua(this.firestore,Xd(this._delegate,function e0(...l){return Ef._create("startAfter",l,!1)}(...e)))}catch(i){throw la(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ua(this.firestore,Xd(this._delegate,function oy(...l){return Hp._create("endBefore",l,!1)}(...e)))}catch(i){throw la(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ua(this.firestore,Xd(this._delegate,function t0(...l){return Hp._create("endAt",l,!0)}(...e)))}catch(i){throw la(i,"endAt()","Query.endAt()")}}isEqual(e){return ey(this._delegate,e._delegate)}get(e){let i;return i="cache"===e?.source?function uy(l){l=$n(l,So);const e=$n(l.firestore,ki),i=Ps(e),u=new Yl(e);return function pf(l,e){const i=new Er;return l.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(u=(0,ge.Z)(function*(p,_,w){try{const O=yield fp(p,_,!0),B=new kv(_,O.Yi),z=B.Hu(O.documents),ne=B.applyChanges(z,!1);w.resolve(ne.snapshot)}catch(O){const B=jd(O,`Failed to execute query '${_} against cache`);w.reject(B)}}),function(p,_,w){return u.apply(this,arguments)})(yield Op(l),e,i);var u})),i.promise}(i,l._query).then(p=>new Fu(e,u,l,p))}(this._delegate):"server"===e?.source?function Jc(l){l=$n(l,So);const e=$n(l.firestore,ki),i=Ps(e),u=new Yl(e);return Q_(i,l._query,{source:"server"}).then(p=>new Fu(e,u,l,p))}(this._delegate):function u0(l){l=$n(l,So);const e=$n(l.firestore,ki),i=Ps(e),u=new Yl(e);return Jv(l._query),Q_(i,l._query).then(p=>new Fu(e,u,l,p))}(this._delegate),i.then(u=>new Kp(this.firestore,new Fu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)))}onSnapshot(...e){const i=wm(e),u=hy(e,p=>new Kp(this.firestore,new Fu(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return If(this._delegate,i,u)}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}class fy{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new Uu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kp{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new ua(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Uu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new fy(this._firestore,i))}forEach(e,i){this._delegate.forEach(u=>{e.call(i,new Uu(this._firestore,u))})}isEqual(e){return o0(this._delegate,e._delegate)}}class rd extends ua{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qa(this.firestore,e):null}doc(e){try{return new Qa(this.firestore,void 0===e?Is(this._delegate):Is(this._delegate,e))}catch(i){throw la(i,"doc()","CollectionReference.doc()")}}add(e){return function Df(l,e){const i=$n(l.firestore,ki),u=Is(l),p=$p(l.converter,e);return rh(i,[sm(xu(l.firestore),"addDoc",u._key,p,null!==l.converter,{}).toMutation(u._key,Pi.exists(!1))]).then(()=>u)}(this._delegate,e).then(i=>new Qa(this.firestore,i))}isEqual(e){return X_(this._delegate,e._delegate)}withConverter(e){return new rd(this.firestore,this._delegate.withConverter(e?Ql.getInstance(this.firestore,e):null))}}function id(l){return $n(l,Ei)}class Of{constructor(...e){this._delegate=new hc(...e)}static documentId(){return new Of(Hn.keyField().canonicalString())}isEqual(e){return(e=(0,qe.m9)(e))instanceof hc&&this._delegate._internalPath.isEqual(e._internalPath)}}class sh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Xc(){return new Fp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sh(e)}static delete(){const e=function iw(){return new vf("deleteField")}();return e._methodName="FieldValue.delete",new sh(e)}static arrayUnion(...e){const i=function Lu(...l){return new am("arrayUnion",l)}(...e);return i._methodName="FieldValue.arrayUnion",new sh(i)}static arrayRemove(...e){const i=function ed(...l){return new ry("arrayRemove",l)}(...e);return i._methodName="FieldValue.arrayRemove",new sh(i)}static increment(e){const i=function d0(l){return new Yv("increment",l)}(e);return i._methodName="FieldValue.increment",new sh(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Em={Firestore:td,GeoPoint:_f,Timestamp:ar,Blob:Tf,Transaction:p0,WriteBatch:g0,DocumentReference:Qa,DocumentSnapshot:Af,Query:ua,QueryDocumentSnapshot:Uu,QuerySnapshot:Kp,CollectionReference:rd,FieldPath:Of,FieldValue:sh,setLogLevel:function Wp(l){!function _r(l){bt.setLogLevel(l)}(l)},CACHE_SIZE_UNLIMITED:-1};!function Dm(l){(function uw(l,e){l.INTERNAL.registerComponent(new ot.wA("firestore-compat",i=>{const u=i.getProvider("app-compat").getImmediate(),p=i.getProvider("firestore").getImmediate();return e(u,p)},"PUBLIC").setServiceProps(Object.assign({},Em)))})(l,(e,i)=>new td(e,i,new f0)),l.registerVersion("@firebase/firestore-compat","0.3.5")}(at.Z);var Jl=j(1205),py=j(6217),cw=j(9260);function qp(l,e){return function dw(l,e=Y.z){return new h.y(i=>{let u;return null!=e?e.schedule(()=>{u=l.onSnapshot({includeMetadataChanges:!0},i)}):u=l.onSnapshot({includeMetadataChanges:!0},i),()=>{u?.()}})}(l,e)}function Im(l,e){return qp(l,e).pipe((0,de.U)(i=>({payload:i,type:"query"})))}function Cm(l,e){return Im(l,e).pipe((0,Fe.O)(void 0),pe(),(0,de.U)(([i,u])=>{const p=u.payload.docChanges(),_=p.map(w=>({type:w.type,payload:w}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,O)=>{const B=p.find(ne=>ne.doc.ref.isEqual(w.ref)),z=i?.payload.docs.find(ne=>ne.ref.isEqual(w.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(w.metadata)||!B&&z&&JSON.stringify(z.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:w}})}),_}))}function gy(l,e,i){return Cm(l,i).pipe((0,Te.R)((u,p)=>function m0(l,e,i){return e.forEach(u=>{i.indexOf(u.type)>-1&&(l=function fw(l,e){switch(e.type){case"added":if(!l[e.newIndex]||!l[e.newIndex].doc.ref.isEqual(e.doc.ref))return Tm(l,e.newIndex,0,e);break;case"modified":if(null==l[e.oldIndex]||l[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=l.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return Tm(l,e.newIndex,1,e)}break;case"removed":if(l[e.oldIndex]&&l[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Tm(l,e.oldIndex,1)}return l}(l,u))}),l}(u,p.map(_=>_.payload),e),[]),(0,Ye.x)(),(0,de.U)(u=>u.map(p=>({type:p.type,payload:p}))))}function Tm(l,e,i,...u){const p=l.slice();return p.splice(e,i,...u),p}function _0(l){return(!l||0===l.length)&&(l=["added","removed","modified"]),l}class y0{constructor(e,i,u){this.ref=e,this.query=i,this.afs=u}stateChanges(e){let i=Cm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,de.U)(u=>u.filter(p=>e.indexOf(p.type)>-1)))),i.pipe((0,Fe.O)(void 0),pe(),(0,Je.h)(([u,p])=>p.length>0||!u),(0,de.U)(([u,p])=>p),Ce.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Te.R)((i,u)=>[...i,...u],[]))}snapshotChanges(e){const i=_0(e);return gy(this.query,i,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return Im(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(i=>i.payload.docs.map(u=>e.idField?Object.assign(Object.assign({},u.data()),{[e.idField]:u.id}):u.data())),Ce.iC)}get(e){return(0,ye.D)(this.query.get(e)).pipe(Ce.iC)}add(e){return this.ref.add(e)}doc(e){return new v0(this.ref.doc(e),this.afs)}}class v0{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const u=this.ref.collection(e),{ref:p,query:_}=_y(u,i);return new y0(p,_,this.afs)}snapshotChanges(){return function hw(l,e){return qp(l,e).pipe((0,Fe.O)(void 0),pe(),(0,de.U)(([i,u])=>u.exists?i?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,de.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,ye.D)(this.ref.get(e)).pipe(Ce.iC)}}class b0{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?Cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(i=>i.filter(u=>e.indexOf(u.type)>-1)),(0,Je.h)(i=>i.length>0),Ce.iC):Cm(this.query,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Te.R)((i,u)=>[...i,...u],[]))}snapshotChanges(e){const i=_0(e);return gy(this.query,i,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return Im(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(u=>u.payload.docs.map(p=>e.idField?Object.assign({[e.idField]:p.id},p.data()):p.data())),Ce.iC)}get(e){return(0,ye.D)(this.query.get(e)).pipe(Ce.iC)}}const Sm=new T.OlP("angularfire2.enableFirestorePersistence"),Am=new T.OlP("angularfire2.firestore.persistenceSettings"),pw=new T.OlP("angularfire2.firestore.settings"),my=new T.OlP("angularfire2.firestore.use-emulator");function _y(l,e=(i=>i)){return{query:e(l),ref:l}}let gc=(()=>{class l{constructor(i,u,p,_,w,O,B,z,ne,be,Le,gt,Nt,Zt,_n,ii,Cs){this.schedulers=B;const hr=(0,mt.on)(i,O,u),hs=ne;be&&(0,Jl.nw)(hr,O,Le,Nt,Zt,_n,gt,ii),[this.firestore,this.persistenceEnabled$]=(0,mt.cc)(`${hr.name}.firestore`,"AngularFirestore",hr.name,()=>{const xr=O.runOutsideAngular(()=>hr.firestore());if(_&&xr.settings(_),hs&&xr.useEmulator(...hs),p&&!(0,It.PM)(w)){const Sr=()=>{try{return(0,ye.D)(xr.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(Zs){return typeof console<"u"&&console.warn(Zs),(0,Ae.of)(!1)}};return[xr,O.runOutsideAngular(Sr)]}return[xr,(0,Ae.of)(!1)]},[_,hs,p])}collection(i,u){let p;p="string"==typeof i?this.firestore.collection(i):i;const{ref:_,query:w}=_y(p,u),O=this.schedulers.ngZone.run(()=>_);return new y0(O,w,this)}collectionGroup(i,u){const p=u||(w=>w),_=this.firestore.collectionGroup(i);return new b0(p(_),this)}doc(i){let u;u="string"==typeof i?this.firestore.doc(i):i;const p=this.schedulers.ngZone.run(()=>u);return new v0(p,this)}createId(){return this.firestore.collection("_").doc().id}}return l.\u0275fac=function(i){return new(i||l)(T.LFG(mt.Dh),T.LFG(mt.xv,8),T.LFG(Sm,8),T.LFG(pw,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Ce.HU),T.LFG(Am,8),T.LFG(my,8),T.LFG(Jl.zQ,8),T.LFG(Jl.Qv,8),T.LFG(Jl.L6,8),T.LFG(Jl._Q,8),T.LFG(Jl.rT,8),T.LFG(Jl.lh,8),T.LFG(Jl.f7,8),T.LFG(py.nm,8))},l.\u0275prov=T.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),yy=(()=>{class l{constructor(){cw.Z.registerVersion("angularfire",Ce.q4.full,"fst-compat")}static enablePersistence(i){return{ngModule:l,providers:[{provide:Sm,useValue:!0},{provide:Am,useValue:i}]}}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({providers:[gc]}),l})()},2011:(Wt,ze,j)=>{j.d(ze,{Dh:()=>Re,GT:()=>Ce,cc:()=>Je,hO:()=>Ye,on:()=>pe,pX:()=>Ae,xv:()=>De});var T=j(4650),Y=j(9260),h=j(2122);Wt=j.hmd(Wt);const ye=["ngOnDestroy"],Ae=(at,ge,ut,ot={})=>new Proxy(at,{get:(Xe,qe)=>ut.runOutsideAngular(()=>{var Mt;if(at[qe])return!(null===(Mt=ot?.spy)||void 0===Mt)&&Mt.get&&ot.spy.get(qe,at[qe]),at[qe];if(ye.indexOf(qe)>-1)return()=>{};const Se=ge.toPromise().then(Ie=>{const tt=Ie&&Ie[qe];return"function"==typeof tt?tt.bind(Ie):tt&&tt.then?tt.then(it=>ut.run(()=>it)):ut.run(()=>tt)});return new Proxy(()=>{},{get:(Ie,tt)=>Se[tt],apply:(Ie,tt,it)=>Se.then(vt=>{var Kt;const Pt=vt&&vt(...it);return!(null===(Kt=ot?.spy)||void 0===Kt)&&Kt.apply&&ot.spy.apply(qe,it,Pt),Pt})})})}),Ce=(at,ge)=>{ge.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(ot=>{Object.defineProperty(at.prototype,ot,Object.getOwnPropertyDescriptor(ut.prototype||ut,ot))})})};class Fe{constructor(ge){return ge}}const Re=new T.OlP("angularfire2.app.options"),De=new T.OlP("angularfire2.app.name");function pe(at,ge,ut){const Xe="object"==typeof ut&&ut||{};Xe.name=Xe.name||"string"==typeof ut&&ut||"[DEFAULT]";const Mt=Y.Z.apps.filter(Se=>Se&&Se.name===Xe.name)[0]||ge.runOutsideAngular(()=>Y.Z.initializeApp(at,Xe));try{JSON.stringify(at)!==JSON.stringify(Mt.options)&&de("error",`${Mt.name} Firebase App already initialized with different options${Wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Fe(Mt)}const de=(at,...ge)=>{(0,T.X6Q)()&&typeof console<"u"&&console[at](...ge)},Te={provide:Fe,useFactory:pe,deps:[Re,T.R0b,[new T.FiY,De]]};let Ye=(()=>{class at{constructor(ut){Y.Z.registerVersion("angularfire",h.q4.full,"core"),Y.Z.registerVersion("angularfire",h.q4.full,"app-compat"),Y.Z.registerVersion("angular",T.q4F.full,ut.toString())}static initializeApp(ut,ot){return{ngModule:at,providers:[{provide:Re,useValue:ut},{provide:De,useValue:ot}]}}}return at.\u0275fac=function(ut){return new(ut||at)(T.LFG(T.Lbi))},at.\u0275mod=T.oAB({type:at}),at.\u0275inj=T.cJS({providers:[Te]}),at})();function Je(at,ge,ut,ot,Xe){const[,qe,Mt]=globalThis.\u0275AngularfireInstanceCache.find(Se=>Se[0]===at)||[];if(qe)return function mt(at,ge){try{return at.toString()===ge.toString()}catch{return at===ge}}(Xe,Mt)||(Ze("error",`${ge} was already initialized on the ${ut} Firebase App with different settings.${It?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Xe,was:Mt})),qe;{const Se=ot();return globalThis.\u0275AngularfireInstanceCache.push([at,Se,Xe]),Se}}const It=!!Wt.hot,Ze=(at,...ge)=>{(0,T.X6Q)()&&typeof console<"u"&&console[at](...ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Wt,ze,j)=>{j.d(ze,{q4:()=>Sl,iC:()=>Ws,fc:()=>$s,HU:()=>qt,vb:()=>ee,JM:()=>K});var T=j(4650),Y=j(259),h=j(5861),ye=j(9681),Ae=j(2090),Ce=j(4859),Fe=j(1877),Re=j(8766);const De="@firebase/installations",pe="0.6.4",de=1e4,Te=`w:${pe}`,Ye="FIS_v2",Je="https://firebaseinstallations.googleapis.com/v1",mt=36e5,ge=new Ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ut(F){return F instanceof Ae.ZR&&F.code.includes("request-failed")}function ot({projectId:F}){return`${Je}/projects/${F}/installations`}function Xe(F){return{token:F.token,requestStatus:2,expiresIn:vt(F.expiresIn),creationTime:Date.now()}}function qe(F,G){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(F,G){const fe=(yield G.json()).error;return ge.create("request-failed",{requestName:F,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Se({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function tt(F){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(F){const G=yield F();return G.status>=500&&G.status<600?F():G})).apply(this,arguments)}function vt(F){return Number(F.replace("s","000"))}function Ue(){return(Ue=(0,h.Z)(function*({appConfig:F,heartbeatServiceProvider:G},{fid:Z}){const fe=ot(F),ke=Se(F),$e=G.getImmediate({optional:!0});if($e){const Tn=yield $e.getHeartbeatsHeader();Tn&&ke.append("x-firebase-client",Tn)}const hn={method:"POST",headers:ke,body:JSON.stringify({fid:Z,authVersion:Ye,appId:F.appId,sdkVersion:Te})},bn=yield tt(()=>fetch(fe,hn));if(bn.ok){const Tn=yield bn.json();return{fid:Tn.fid||Z,registrationStatus:2,refreshToken:Tn.refreshToken,authToken:Xe(Tn.authToken)}}throw yield qe("Create Installation",bn)})).apply(this,arguments)}function nt(F){return new Promise(G=>{setTimeout(G,F)})}const rt=/^[cdef][\w-]{21}$/,ct="";function st(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const Z=function kt(F){return function We(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return rt.test(Z)?Z:ct}catch{return ct}}function Et(F){return`${F.appName}!${F.appId}`}const on=new Map;function Gt(F,G){const Z=Et(F);En(Z,G),function Rn(F,G){const Z=function Gn(){return!Vn&&"BroadcastChannel"in self&&(Vn=new BroadcastChannel("[Firebase] FID Change"),Vn.onmessage=F=>{En(F.data.key,F.data.fid)}),Vn}();Z&&Z.postMessage({key:F,fid:G}),function Wr(){0===on.size&&Vn&&(Vn.close(),Vn=null)}()}(Z,G)}function En(F,G){const Z=on.get(F);if(Z)for(const fe of Z)fe(G)}let Vn=null;const Zn="firebase-installations-database",Fn=1,Nn="firebase-installations-store";let er=null;function tr(){return er||(er=(0,Re.X3)(Zn,Fn,{upgrade:(F,G)=>{0===G&&F.createObjectStore(Nn)}})),er}function Xt(F,G){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(F,G){const Z=Et(F),ke=(yield tr()).transaction(Nn,"readwrite"),$e=ke.objectStore(Nn),Ot=yield $e.get(Z);return yield $e.put(G,Z),yield ke.done,(!Ot||Ot.fid!==G.fid)&&Gt(F,G.fid),G})).apply(this,arguments)}function Ut(F){return ti.apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(F){const G=Et(F),fe=(yield tr()).transaction(Nn,"readwrite");yield fe.objectStore(Nn).delete(G),yield fe.done})).apply(this,arguments)}function fi(F,G){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(F,G){const Z=Et(F),ke=(yield tr()).transaction(Nn,"readwrite"),$e=ke.objectStore(Nn),Ot=yield $e.get(Z),hn=G(Ot);return void 0===hn?yield $e.delete(Z):yield $e.put(hn,Z),yield ke.done,hn&&(!Ot||Ot.fid!==hn.fid)&&Gt(F,hn.fid),hn})).apply(this,arguments)}function Yr(F){return ni.apply(this,arguments)}function ni(){return ni=(0,h.Z)(function*(F){let G;const Z=yield fi(F.appConfig,fe=>{const ke=function yn(F){return Zr(F||{fid:st(),registrationStatus:0})}(fe),$e=function nn(F,G){if(0===G.registrationStatus){if(!navigator.onLine)return{installationEntry:G,registrationPromise:Promise.reject(ge.create("app-offline"))};const Z={fid:G.fid,registrationStatus:1,registrationTime:Date.now()},fe=function cn(F,G){return rr.apply(this,arguments)}(F,Z);return{installationEntry:Z,registrationPromise:fe}}return 1===G.registrationStatus?{installationEntry:G,registrationPromise:or(F)}:{installationEntry:G}}(F,ke);return G=$e.registrationPromise,$e.installationEntry});return Z.fid===ct?{installationEntry:yield G}:{installationEntry:Z,registrationPromise:G}}),ni.apply(this,arguments)}function rr(){return rr=(0,h.Z)(function*(F,G){try{const Z=yield function Pt(F,G){return Ue.apply(this,arguments)}(F,G);return Xt(F.appConfig,Z)}catch(Z){throw ut(Z)&&409===Z.customData.serverCode?yield Ut(F.appConfig):yield Xt(F.appConfig,{fid:G.fid,registrationStatus:0}),Z}}),rr.apply(this,arguments)}function or(F){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(F){let G=yield Ir(F.appConfig);for(;1===G.registrationStatus;)yield nt(100),G=yield Ir(F.appConfig);if(0===G.registrationStatus){const{installationEntry:Z,registrationPromise:fe}=yield Yr(F);return fe||Z}return G})).apply(this,arguments)}function Ir(F){return fi(F,G=>{if(!G)throw ge.create("installation-not-found");return Zr(G)})}function Zr(F){return function yr(F){return 1===F.registrationStatus&&F.registrationTime+de<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function Kr(){return(Kr=(0,h.Z)(function*({appConfig:F,heartbeatServiceProvider:G},Z){const fe=function xn(F,{fid:G}){return`${ot(F)}/${G}/authTokens:generate`}(F,Z),ke=function Ie(F,{refreshToken:G}){const Z=Se(F);return Z.append("Authorization",function Kt(F){return`${Ye} ${F}`}(G)),Z}(F,Z),$e=G.getImmediate({optional:!0});if($e){const Tn=yield $e.getHeartbeatsHeader();Tn&&ke.append("x-firebase-client",Tn)}const hn={method:"POST",headers:ke,body:JSON.stringify({installation:{sdkVersion:Te,appId:F.appId}})},bn=yield tt(()=>fetch(fe,hn));if(bn.ok)return Xe(yield bn.json());throw yield qe("Generate Auth Token",bn)})).apply(this,arguments)}function Ii(F){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,h.Z)(function*(F,G=!1){let Z;const fe=yield fi(F.appConfig,$e=>{if(!fn($e))throw ge.create("not-registered");const Ot=$e.authToken;if(!G&&function cr(F){return 2===F.requestStatus&&!function ve(F){const G=Date.now();return G<F.creationTime||F.creationTime+F.expiresIn<G+mt}(F)}(Ot))return $e;if(1===Ot.requestStatus)return Z=function Rt(F,G){return ft.apply(this,arguments)}(F,G),$e;{if(!navigator.onLine)throw ge.create("app-offline");const hn=function me(F){const G={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:G})}($e);return Z=function rn(F,G){return mn.apply(this,arguments)}(F,hn),hn}});return Z?yield Z:fe.authToken}),Cr.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(F,G){let Z=yield Ht(F.appConfig);for(;1===Z.authToken.requestStatus;)yield nt(100),Z=yield Ht(F.appConfig);const fe=Z.authToken;return 0===fe.requestStatus?Ii(F,G):fe})).apply(this,arguments)}function Ht(F){return fi(F,G=>{if(!fn(G))throw ge.create("not-registered");return function te(F){return 1===F.requestStatus&&F.requestTime+de<Date.now()}(G.authToken)?Object.assign(Object.assign({},G),{authToken:{requestStatus:0}}):G})}function mn(){return mn=(0,h.Z)(function*(F,G){try{const Z=yield function pn(F,G){return Kr.apply(this,arguments)}(F,G),fe=Object.assign(Object.assign({},G),{authToken:Z});return yield Xt(F.appConfig,fe),Z}catch(Z){if(!ut(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const fe=Object.assign(Object.assign({},G),{authToken:{requestStatus:0}});yield Xt(F.appConfig,fe)}else yield Ut(F.appConfig);throw Z}}),mn.apply(this,arguments)}function fn(F){return void 0!==F&&2===F.registrationStatus}function Q(){return(Q=(0,h.Z)(function*(F){const G=F,{installationEntry:Z,registrationPromise:fe}=yield Yr(G);return fe?fe.catch(console.error):Ii(G).catch(console.error),Z.fid})).apply(this,arguments)}function ae(){return ae=(0,h.Z)(function*(F,G=!1){const Z=F;return yield function he(F){return oe.apply(this,arguments)}(Z),(yield Ii(Z,G)).token}),ae.apply(this,arguments)}function oe(){return(oe=(0,h.Z)(function*(F){const{registrationPromise:G}=yield Yr(F);G&&(yield G)})).apply(this,arguments)}function ca(F){return ge.create("missing-app-config-values",{valueName:F})}const qo="installations",ps=F=>{const G=F.getProvider("app").getImmediate(),Z=function os(F){if(!F||!F.options)throw ca("App Configuration");if(!F.name)throw ca("App Name");const G=["projectId","apiKey","appId"];for(const Z of G)if(!F.options[Z])throw ca(Z);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(G);return{app:G,appConfig:Z,heartbeatServiceProvider:(0,ye._getProvider)(G,"heartbeat"),_delete:()=>Promise.resolve()}},ks=F=>{const G=F.getProvider("app").getImmediate(),Z=(0,ye._getProvider)(G,qo).getImmediate();return{getId:()=>function re(F){return Q.apply(this,arguments)}(Z),getToken:ke=>function xe(F){return ae.apply(this,arguments)}(Z,ke)}};(function No(){(0,ye._registerComponent)(new Ce.wA(qo,ps,"PUBLIC")),(0,ye._registerComponent)(new Ce.wA("installations-internal",ks,"PRIVATE"))})(),(0,ye.registerVersion)(De,pe),(0,ye.registerVersion)(De,pe,"esm2017");const Xn="@firebase/remote-config",si=new Ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class uo{constructor(G,Z,fe,ke){this.client=G,this.storage=Z,this.storageCache=fe,this.logger=ke}isCachedDataFresh(G,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-Z,ke=fe<=G;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${G}. Is cache hit: ${ke}.`),ke}fetch(G){var Z=this;return(0,h.Z)(function*(){const[fe,ke]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(ke&&Z.isCachedDataFresh(G.cacheMaxAgeMillis,fe))return ke;G.eTag=ke&&ke.eTag;const $e=yield Z.client.fetch(G),Ot=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===$e.status&&Ot.push(Z.storage.setLastSuccessfulFetchResponse($e)),yield Promise.all(Ot),$e})()}}function jr(F=navigator){return F.languages&&F.languages[0]||F.language}class bi{constructor(G,Z,fe,ke,$e,Ot){this.firebaseInstallations=G,this.sdkVersion=Z,this.namespace=fe,this.projectId=ke,this.apiKey=$e,this.appId=Ot}fetch(G){var Z=this;return(0,h.Z)(function*(){const[fe,ke]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),Ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,hn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":G.eTag||"*"},bn={sdk_version:Z.sdkVersion,app_instance_id:fe,app_instance_id_token:ke,app_id:Z.appId,language_code:jr()},Tn={method:"POST",headers:hn,body:JSON.stringify(bn)},Qn=fetch(Ot,Tn),wn=new Promise((Ms,na)=>{G.signal.addEventListener(()=>{const Cc=new Error("The operation was aborted.");Cc.name="AbortError",na(Cc)})});let Ho;try{yield Promise.race([Qn,wn]),Ho=yield Qn}catch(Ms){let na="fetch-client-network";throw"AbortError"===Ms?.name&&(na="fetch-timeout"),si.create(na,{originalErrorMessage:Ms?.message})}let ws=Ho.status;const jl=Ho.headers.get("ETag")||void 0;let dr,Mr;if(200===Ho.status){let Ms;try{Ms=yield Ho.json()}catch(na){throw si.create("fetch-client-parse",{originalErrorMessage:na?.message})}dr=Ms.entries,Mr=Ms.state}if("INSTANCE_STATE_UNSPECIFIED"===Mr?ws=500:"NO_CHANGE"===Mr?ws=304:("NO_TEMPLATE"===Mr||"EMPTY_CONFIG"===Mr)&&(dr={}),304!==ws&&200!==ws)throw si.create("fetch-status",{httpStatus:ws});return{status:ws,eTag:jl,config:dr}})()}}class _e{constructor(G,Z){this.client=G,this.storage=Z}fetch(G){var Z=this;return(0,h.Z)(function*(){const fe=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(G,fe)})()}attemptFetch(G,{throttleEndTimeMillis:Z,backoffCount:fe}){var ke=this;return(0,h.Z)(function*(){yield function Os(F,G){return new Promise((Z,fe)=>{const ke=Math.max(G-Date.now(),0),$e=setTimeout(Z,ke);F.addEventListener(()=>{clearTimeout($e),fe(si.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(G.signal,Z);try{const $e=yield ke.client.fetch(G);return yield ke.storage.deleteThrottleMetadata(),$e}catch($e){if(!function Pe(F){if(!(F instanceof Ae.ZR&&F.customData))return!1;const G=Number(F.customData.httpStatus);return 429===G||500===G||503===G||504===G}($e))throw $e;const Ot={throttleEndTimeMillis:Date.now()+(0,Ae.$s)(fe),backoffCount:fe+1};return yield ke.storage.setThrottleMetadata(Ot),ke.attemptFetch(G,Ot)}})()}}class Lt{constructor(G,Z,fe,ke,$e){this.app=G,this._client=Z,this._storageCache=fe,this._storage=ke,this._logger=$e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tn(F,G){const Z=F.target.error||void 0;return si.create(G,{originalErrorMessage:Z&&Z?.message})}const An="app_namespace_store";class Lr{constructor(G,Z,fe,ke=function co(){return new Promise((F,G)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=fe=>{G(tn(fe,"storage-open"))},Z.onsuccess=fe=>{F(fe.target.result)},Z.onupgradeneeded=fe=>{0===fe.oldVersion&&fe.target.result.createObjectStore(An,{keyPath:"compositeKey"})}}catch(Z){G(si.create("storage-open",{originalErrorMessage:Z?.message}))}})}()){this.appId=G,this.appName=Z,this.namespace=fe,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(G){return this.set("last_fetch_status",G)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(G){return this.set("last_successful_fetch_timestamp_millis",G)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(G){return this.set("last_successful_fetch_response",G)}getActiveConfig(){return this.get("active_config")}setActiveConfig(G){return this.set("active_config",G)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(G){return this.set("active_config_etag",G)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(G){return this.set("throttle_metadata",G)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(G){var Z=this;return(0,h.Z)(function*(){const fe=yield Z.openDbPromise;return new Promise((ke,$e)=>{const hn=fe.transaction([An],"readonly").objectStore(An),bn=Z.createCompositeKey(G);try{const Tn=hn.get(bn);Tn.onerror=Qn=>{$e(tn(Qn,"storage-get"))},Tn.onsuccess=Qn=>{const wn=Qn.target.result;ke(wn?wn.value:void 0)}}catch(Tn){$e(si.create("storage-get",{originalErrorMessage:Tn?.message}))}})})()}set(G,Z){var fe=this;return(0,h.Z)(function*(){const ke=yield fe.openDbPromise;return new Promise(($e,Ot)=>{const bn=ke.transaction([An],"readwrite").objectStore(An),Tn=fe.createCompositeKey(G);try{const Qn=bn.put({compositeKey:Tn,value:Z});Qn.onerror=wn=>{Ot(tn(wn,"storage-set"))},Qn.onsuccess=()=>{$e()}}catch(Qn){Ot(si.create("storage-set",{originalErrorMessage:Qn?.message}))}})})()}delete(G){var Z=this;return(0,h.Z)(function*(){const fe=yield Z.openDbPromise;return new Promise((ke,$e)=>{const hn=fe.transaction([An],"readwrite").objectStore(An),bn=Z.createCompositeKey(G);try{const Tn=hn.delete(bn);Tn.onerror=Qn=>{$e(tn(Qn,"storage-delete"))},Tn.onsuccess=()=>{ke()}}catch(Tn){$e(si.create("storage-delete",{originalErrorMessage:Tn?.message}))}})})()}createCompositeKey(G){return[this.appId,this.appName,this.namespace,G].join()}}class gr{constructor(G){this.storage=G}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var G=this;return(0,h.Z)(function*(){const Z=G.storage.getLastFetchStatus(),fe=G.storage.getLastSuccessfulFetchTimestampMillis(),ke=G.storage.getActiveConfig(),$e=yield Z;$e&&(G.lastFetchStatus=$e);const Ot=yield fe;Ot&&(G.lastSuccessfulFetchTimestampMillis=Ot);const hn=yield ke;hn&&(G.activeConfig=hn)})()}setLastFetchStatus(G){return this.lastFetchStatus=G,this.storage.setLastFetchStatus(G)}setLastSuccessfulFetchTimestampMillis(G){return this.lastSuccessfulFetchTimestampMillis=G,this.storage.setLastSuccessfulFetchTimestampMillis(G)}setActiveConfig(G){return this.activeConfig=G,this.storage.setActiveConfig(G)}}function Us(){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(){if(!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Fs(){(0,ye._registerComponent)(new Ce.wA("remote-config",function F(G,{instanceIdentifier:Z}){const fe=G.getProvider("app").getImmediate(),ke=G.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw si.create("registration-window");if(!(0,Ae.hl)())throw si.create("indexed-db-unavailable");const{projectId:$e,apiKey:Ot,appId:hn}=fe.options;if(!$e)throw si.create("registration-project-id");if(!Ot)throw si.create("registration-api-key");if(!hn)throw si.create("registration-app-id");const bn=new Lr(hn,fe.name,Z=Z||"firebase"),Tn=new gr(bn),Qn=new Fe.Yd(Xn);Qn.logLevel=Fe.in.ERROR;const wn=new bi(ke,ye.SDK_VERSION,Z,$e,Ot,hn),Ho=new _e(wn,bn),ws=new uo(Ho,bn,Tn,Qn),jl=new Lt(fe,ws,Tn,bn,Qn);return function oi(F){const G=(0,Ae.m9)(F);G._initializePromise||(G._initializePromise=G._storageCache.loadFromStorage().then(()=>{G._isInitializationComplete=!0}))}(jl),jl},"PUBLIC").setMultipleInstances(!0)),(0,ye.registerVersion)(Xn,"0.4.4"),(0,ye.registerVersion)(Xn,"0.4.4","esm2017")}();const gs="/firebase-messaging-sw.js",da="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xo="https://fcmregistrations.googleapis.com/v1",ha="google.c.a.c_id",Po="google.c.a.c_l",ko="google.c.a.ts",Ki="google.c.a.e";var Bs=(()=>{return(F=Bs||(Bs={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Bs;var F})();function ms(F){const G=new Uint8Array(F);return btoa(String.fromCharCode(...G)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gu(F){const Z=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(Z),ke=new Uint8Array(fe.length);for(let $e=0;$e<fe.length;++$e)ke[$e]=fe.charCodeAt($e);return ke}const tl="fcm_token_details_db",as=5,Fo="fcm_token_object_Store";function fo(){return fo=(0,h.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map($e=>$e.name).includes(tl))return null;let G=null;return(yield(0,Re.X3)(tl,as,{upgrade:(fe=(0,h.Z)(function*(ke,$e,Ot,hn){var bn;if($e<2||!ke.objectStoreNames.contains(Fo))return;const Tn=hn.objectStore(Fo),Qn=yield Tn.index("fcmSenderId").get(F);if(yield Tn.clear(),Qn)if(2===$e){const wn=Qn;if(!wn.auth||!wn.p256dh||!wn.endpoint)return;G={token:wn.fcmToken,createTime:null!==(bn=wn.createTime)&&void 0!==bn?bn:Date.now(),subscriptionOptions:{auth:wn.auth,p256dh:wn.p256dh,endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:"string"==typeof wn.vapidKey?wn.vapidKey:ms(wn.vapidKey)}}}else if(3===$e){const wn=Qn;G={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:ms(wn.auth),p256dh:ms(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:ms(wn.vapidKey)}}}else if(4===$e){const wn=Qn;G={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:ms(wn.auth),p256dh:ms(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:ms(wn.vapidKey)}}}}),function($e,Ot,hn,bn){return fe.apply(this,arguments)})})).close(),yield(0,Re.Lj)(tl),yield(0,Re.Lj)("fcm_vapid_details_db"),yield(0,Re.Lj)("undefined"),function Pa(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:G}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof G.auth&&G.auth.length>0&&"string"==typeof G.p256dh&&G.p256dh.length>0&&"string"==typeof G.endpoint&&G.endpoint.length>0&&"string"==typeof G.swScope&&G.swScope.length>0&&"string"==typeof G.vapidKey&&G.vapidKey.length>0}(G)?G:null;var fe}),fo.apply(this,arguments)}const ru="firebase-messaging-database",Tr=1,Bi="firebase-messaging-store";let Lo=null;function Ns(){return Lo||(Lo=(0,Re.X3)(ru,Tr,{upgrade:(F,G)=>{0===G&&F.createObjectStore(Bi)}})),Lo}function nl(F){return Js.apply(this,arguments)}function Js(){return Js=(0,h.Z)(function*(F){const G=qi(F),fe=yield(yield Ns()).transaction(Bi).objectStore(Bi).get(G);if(fe)return fe;{const ke=yield function Vs(F){return fo.apply(this,arguments)}(F.appConfig.senderId);if(ke)return yield Zo(F,ke),ke}}),Js.apply(this,arguments)}function Zo(F,G){return kl.apply(this,arguments)}function kl(){return(kl=(0,h.Z)(function*(F,G){const Z=qi(F),ke=(yield Ns()).transaction(Bi,"readwrite");return yield ke.objectStore(Bi).put(G,Z),yield ke.done,G})).apply(this,arguments)}function su(){return(su=(0,h.Z)(function*(F){const G=qi(F),fe=(yield Ns()).transaction(Bi,"readwrite");yield fe.objectStore(Bi).delete(G),yield fe.done})).apply(this,arguments)}function qi({appConfig:F}){return F.appId}const mr=new Ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rl(F,G){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(F,G){const Z=yield il(F),fe=gi(G),ke={method:"POST",headers:Z,body:JSON.stringify(fe)};let $e;try{$e=yield(yield fetch(ou(F.appConfig),ke)).json()}catch(Ot){throw mr.create("token-subscribe-failed",{errorInfo:Ot?.toString()})}if($e.error)throw mr.create("token-subscribe-failed",{errorInfo:$e.error.message});if(!$e.token)throw mr.create("token-subscribe-no-token");return $e.token})).apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(F,G){const Z=yield il(F),fe=gi(G.subscriptionOptions),ke={method:"PATCH",headers:Z,body:JSON.stringify(fe)};let $e;try{$e=yield(yield fetch(`${ou(F.appConfig)}/${G.token}`,ke)).json()}catch(Ot){throw mr.create("token-update-failed",{errorInfo:Ot?.toString()})}if($e.error)throw mr.create("token-update-failed",{errorInfo:$e.error.message});if(!$e.token)throw mr.create("token-update-no-token");return $e.token})).apply(this,arguments)}function po(F,G){return pi.apply(this,arguments)}function pi(){return(pi=(0,h.Z)(function*(F,G){const fe={method:"DELETE",headers:yield il(F)};try{const $e=yield(yield fetch(`${ou(F.appConfig)}/${G}`,fe)).json();if($e.error)throw mr.create("token-unsubscribe-failed",{errorInfo:$e.error.message})}catch(ke){throw mr.create("token-unsubscribe-failed",{errorInfo:ke?.toString()})}})).apply(this,arguments)}function ou({projectId:F}){return`${xo}/projects/${F}/registrations`}function il(F){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*({appConfig:F,installations:G}){const Z=yield G.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function gi({p256dh:F,auth:G,endpoint:Z,vapidKey:fe}){const ke={web:{endpoint:Z,auth:G,p256dh:F}};return fe!==ho&&(ke.web.applicationPubKey=fe),ke}const fa=6048e5;function Xs(){return Xs=(0,h.Z)(function*(F){const G=yield function Il(F,G){return ga.apply(this,arguments)}(F.swRegistration,F.vapidKey),Z={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:G.endpoint,auth:ms(G.getKey("auth")),p256dh:ms(G.getKey("p256dh"))},fe=yield nl(F.firebaseDependencies);if(fe){if(function Ll(F,G){return G.vapidKey===F.vapidKey&&G.endpoint===F.endpoint&&G.auth===F.auth&&G.p256dh===F.p256dh}(fe.subscriptionOptions,Z))return Date.now()>=fe.createTime+fa?function Fl(F,G){return Dn.apply(this,arguments)}(F,{token:fe.token,createTime:Date.now(),subscriptionOptions:Z}):fe.token;try{yield po(F.firebaseDependencies,fe.token)}catch(ke){console.warn(ke)}return go(F.firebaseDependencies,Z)}return go(F.firebaseDependencies,Z)}),Xs.apply(this,arguments)}function ka(){return ka=(0,h.Z)(function*(F){const G=yield nl(F.firebaseDependencies);G&&(yield po(F.firebaseDependencies,G.token),yield function iu(F){return su.apply(this,arguments)}(F.firebaseDependencies));const Z=yield F.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()}),ka.apply(this,arguments)}function Dn(){return Dn=(0,h.Z)(function*(F,G){try{const Z=yield function Ur(F,G){return Yi.apply(this,arguments)}(F.firebaseDependencies,G),fe=Object.assign(Object.assign({},G),{token:Z,createTime:Date.now()});return yield Zo(F.firebaseDependencies,fe),Z}catch(Z){throw yield function Zi(F){return ka.apply(this,arguments)}(F),Z}}),Dn.apply(this,arguments)}function go(F,G){return pa.apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(F,G){const fe={token:yield rl(F,G),createTime:Date.now(),subscriptionOptions:G};return yield Zo(F,fe),fe.token})).apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(F,G){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gu(G)})})).apply(this,arguments)}function Jo(F){const G={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function Fa(F,G){if(!G.notification)return;F.notification={};const Z=G.notification.title;Z&&(F.notification.title=Z);const fe=G.notification.body;fe&&(F.notification.body=fe);const ke=G.notification.image;ke&&(F.notification.image=ke);const $e=G.notification.icon;$e&&(F.notification.icon=$e)}(G,F),function mi(F,G){G.data&&(F.data=G.data)}(G,F),function dt(F,G){var Z,fe,ke,$e,Ot;if(!(G.fcmOptions||null!==(Z=G.notification)&&void 0!==Z&&Z.click_action))return;F.fcmOptions={};const hn=null!==(ke=null===(fe=G.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==ke?ke:null===($e=G.notification)||void 0===$e?void 0:$e.click_action;hn&&(F.fcmOptions.link=hn);const bn=null===(Ot=G.fcmOptions)||void 0===Ot?void 0:Ot.analytics_label;bn&&(F.fcmOptions.analyticsLabel=bn)}(G,F),G}function ol(F,G){const Z=[];for(let fe=0;fe<F.length;fe++)Z.push(F.charAt(fe)),fe<G.length&&Z.push(G.charAt(fe));return Z.join("")}function Mi(F){return mr.create("missing-app-config-values",{valueName:F})}ol("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ol("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class La{constructor(G,Z,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function mo(F){if(!F||!F.options)throw Mi("App Configuration Object");if(!F.name)throw Mi("App Name");const G=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=F;for(const fe of G)if(!Z[fe])throw Mi(fe);return{appName:F.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(G);this.firebaseDependencies={app:G,appConfig:ke,installations:Z,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function ma(F){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(gs,{scope:da}),F.swRegistration.update().catch(()=>{})}catch(G){throw mr.create("failed-service-worker-registration",{browserErrorMessage:G?.message})}})).apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(F,G){if(!G&&!F.swRegistration&&(yield ma(F)),G||!F.swRegistration){if(!(G instanceof ServiceWorkerRegistration))throw mr.create("invalid-sw-registration");F.swRegistration=G}})).apply(this,arguments)}function al(){return(al=(0,h.Z)(function*(F,G){G?F.vapidKey=G:F.vapidKey||(F.vapidKey=ho)})).apply(this,arguments)}function Jr(){return Jr=(0,h.Z)(function*(F,G){if(!navigator)throw mr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mr.create("permission-blocked");return yield function eo(F,G){return al.apply(this,arguments)}(F,G?.vapidKey),yield function Ua(F,G){return _a.apply(this,arguments)}(F,G?.serviceWorkerRegistration),function sl(F){return Xs.apply(this,arguments)}(F)}),Jr.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(F,G,Z){const fe=function ea(F){switch(F){case Bs.NOTIFICATION_CLICKED:return"notification_open";case Bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(G);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:Z[ha],message_name:Z[Po],message_time:Z[ko],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uo(){return Uo=(0,h.Z)(function*(F,G){const Z=G.data;if(!Z.isFirebaseMessaging)return;F.onMessageHandler&&Z.messageType===Bs.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(Jo(Z)):F.onMessageHandler.next(Jo(Z)));const fe=Z.data;(function ir(F){return"object"==typeof F&&!!F&&ha in F})(fe)&&"1"===fe[Ki]&&(yield function Si(F,G,Z){return Xo.apply(this,arguments)}(F,Z.messageType,fe))}),Uo.apply(this,arguments)}const Ba="@firebase/messaging",ya=F=>{const G=new La(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function Ji(F,G){return Uo.apply(this,arguments)}(G,Z)),G},_o=F=>{const G=F.getProvider("messaging").getImmediate();return{getToken:fe=>function ll(F,G){return Jr.apply(this,arguments)}(G,fe)}};function yo(){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(){try{yield(0,Ae.eu)()}catch{return!1}return typeof window<"u"&&(0,Ae.hl)()&&(0,Ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function va(){(0,ye._registerComponent)(new Ce.wA("messaging",ya,"PUBLIC")),(0,ye._registerComponent)(new Ce.wA("messaging-internal",_o,"PRIVATE")),(0,ye.registerVersion)(Ba,"0.12.4"),(0,ye.registerVersion)(Ba,"0.12.4","esm2017")}();const Cl="analytics",Hu="firebase_id",li="origin",Xr=6e4,Hr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bl="https://www.googletagmanager.com/gtag/js",ui=new Fe.Yd("@firebase/analytics");function Ic(F){return Promise.all(F.map(G=>G.catch(Z=>Z)))}function cl(){return(cl=(0,h.Z)(function*(F,G,Z,fe,ke,$e){const Ot=fe[ke];try{if(Ot)yield G[Ot];else{const bn=(yield Ic(Z)).find(Tn=>Tn.measurementId===ke);bn&&(yield G[bn.appId])}}catch(hn){ui.error(hn)}F("config",ke,$e)})).apply(this,arguments)}function R(){return(R=(0,h.Z)(function*(F,G,Z,fe,ke){try{let $e=[];if(ke&&ke.send_to){let Ot=ke.send_to;Array.isArray(Ot)||(Ot=[Ot]);const hn=yield Ic(Z);for(const bn of Ot){const Tn=hn.find(wn=>wn.measurementId===bn),Qn=Tn&&G[Tn.appId];if(!Qn){$e=[];break}$e.push(Qn)}}0===$e.length&&($e=Object.values(G)),yield Promise.all($e),F("event",fe,ke||{})}catch($e){ui.error($e)}})).apply(this,arguments)}const Ve=new Ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),bt=30,lt=new class _r{constructor(G={},Z=1e3){this.throttleMetadata=G,this.intervalMillis=Z}getThrottleMetadata(G){return this.throttleMetadata[G]}setThrottleMetadata(G,Z){this.throttleMetadata[G]=Z}deleteThrottleMetadata(G){delete this.throttleMetadata[G]}};function dn(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function zn(){return(zn=(0,h.Z)(function*(F){var G;const{appId:Z,apiKey:fe}=F,ke={method:"GET",headers:dn(fe)},$e=Hr.replace("{app-id}",Z),Ot=yield fetch($e,ke);if(200!==Ot.status&&304!==Ot.status){let hn="";try{const bn=yield Ot.json();null!==(G=bn.error)&&void 0!==G&&G.message&&(hn=bn.error.message)}catch{}throw Ve.create("config-fetch-failed",{httpStatus:Ot.status,responseMessage:hn})}return Ot.json()})).apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(F,G=lt,Z){const{appId:fe,apiKey:ke,measurementId:$e}=F.options;if(!fe)throw Ve.create("no-app-id");if(!ke){if($e)return{measurementId:$e,appId:fe};throw Ve.create("no-api-key")}const Ot=G.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},hn=new Er;return setTimeout((0,h.Z)(function*(){hn.abort()}),void 0!==Z?Z:Xr),Ai({appId:fe,apiKey:ke,measurementId:$e},Ot,hn,G)})).apply(this,arguments)}function Ai(F,G,Z){return St.apply(this,arguments)}function St(){return St=(0,h.Z)(function*(F,{throttleEndTimeMillis:G,backoffCount:Z},fe,ke=lt){var $e;const{appId:Ot,measurementId:hn}=F;try{yield function Ke(F,G){return new Promise((Z,fe)=>{const ke=Math.max(G-Date.now(),0),$e=setTimeout(Z,ke);F.addEventListener(()=>{clearTimeout($e),fe(Ve.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(fe,G)}catch(bn){if(hn)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${bn?.message}]`),{appId:Ot,measurementId:hn};throw bn}try{const bn=yield function jn(F){return zn.apply(this,arguments)}(F);return ke.deleteThrottleMetadata(Ot),bn}catch(bn){const Tn=bn;if(!function _t(F){if(!(F instanceof Ae.ZR&&F.customData))return!1;const G=Number(F.customData.httpStatus);return 429===G||500===G||503===G||504===G}(Tn)){if(ke.deleteThrottleMetadata(Ot),hn)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${Tn?.message}]`),{appId:Ot,measurementId:hn};throw bn}const Qn=503===Number(null===($e=Tn?.customData)||void 0===$e?void 0:$e.httpStatus)?(0,Ae.$s)(Z,ke.intervalMillis,bt):(0,Ae.$s)(Z,ke.intervalMillis),wn={throttleEndTimeMillis:Date.now()+Qn,backoffCount:Z+1};return ke.setThrottleMetadata(Ot,wn),ui.debug(`Calling attemptFetch again in ${Qn} millis`),Ai(F,wn,fe,ke)}}),St.apply(this,arguments)}class Er{constructor(){this.listeners=[]}addEventListener(G){this.listeners.push(G)}abort(){this.listeners.forEach(G=>G())}}let ys,On;function ja(){return(ja=(0,h.Z)(function*(F,G,Z,fe,ke){if(ke&&ke.global)F("event",Z,fe);else{const $e=yield G;F("event",Z,Object.assign(Object.assign({},fe),{send_to:$e}))}})).apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(){if(!(0,Ae.hl)())return ui.warn(Ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ae.eu)()}catch(F){return ui.warn(Ve.create("indexeddb-unavailable",{errorInfo:F?.toString()}).message),!1}return!0})).apply(this,arguments)}function kn(){return kn=(0,h.Z)(function*(F,G,Z,fe,ke,$e,Ot){var hn;const bn=function Ct(F){return Ft.apply(this,arguments)}(F);bn.then(ws=>{Z[ws.measurementId]=ws.appId,F.options.measurementId&&ws.measurementId!==F.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${ws.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ws=>ui.error(ws)),G.push(bn);const Tn=function ar(){return gn.apply(this,arguments)}().then(ws=>{if(ws)return fe.getId()}),[Qn,wn]=yield Promise.all([bn,Tn]);(function J(F){const G=window.document.getElementsByTagName("script");for(const Z of Object.values(G))if(Z.src&&Z.src.includes(Bl)&&Z.src.includes(F))return Z;return null})($e)||function ud(F,G){const Z=document.createElement("script");Z.src=`${Bl}?l=${F}&id=${G}`,Z.async=!0,document.head.appendChild(Z)}($e,Qn.measurementId),On&&(ke("consent","default",On),function Ia(F){On=F}(void 0)),ke("js",new Date);const Ho=null!==(hn=Ot?.config)&&void 0!==hn?hn:{};return Ho[li]="firebase",Ho.update=!0,null!=wn&&(Ho[Hu]=wn),ke("config",Qn.measurementId,Ho),ys&&(ke("set",ys),function du(F){ys=F}(void 0)),Qn.measurementId}),kn.apply(this,arguments)}class $a{constructor(G){this.app=G}_delete(){return delete Hn[this.app.options.appId],Promise.resolve()}}let Hn={},zt=[];const wo={};let za,Nr,vs="dataLayer",Vi="gtag",Gl=!1;function Wa(F,G,Z){!function zu(){const F=[];if((0,Ae.ru)()&&F.push("This is a browser extension environment."),(0,Ae.zI)()||F.push("Cookies are not available."),F.length>0){const G=F.map((fe,ke)=>`(${ke+1}) ${fe}`).join(" "),Z=Ve.create("invalid-analytics-context",{errorInfo:G});ui.warn(Z.message)}}();const fe=F.options.appId;if(!fe)throw Ve.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw Ve.create("no-api-key");ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hn[fe])throw Ve.create("already-exists",{id:fe});if(!Gl){!function Vl(F){let G=[];Array.isArray(window[F])?G=window[F]:window[F]=G}(vs);const{wrappedGtag:$e,gtagCore:Ot}=function L(F,G,Z,fe,ke){let $e=function(...Ot){window[fe].push(arguments)};return window[ke]&&"function"==typeof window[ke]&&($e=window[ke]),window[ke]=function $(F,G,Z,fe){function $e(){return $e=(0,h.Z)(function*(Ot,hn,bn){try{"event"===Ot?yield function Ea(F,G,Z,fe,ke){return R.apply(this,arguments)}(F,G,Z,hn,bn):"config"===Ot?yield function uu(F,G,Z,fe,ke,$e){return cl.apply(this,arguments)}(F,G,Z,fe,hn,bn):"consent"===Ot?F("consent","update",bn):F("set",hn)}catch(Tn){ui.error(Tn)}}),$e.apply(this,arguments)}return function ke(Ot,hn,bn){return $e.apply(this,arguments)}}($e,F,G,Z),{gtagCore:$e,wrappedGtag:window[ke]}}(Hn,zt,wo,vs,Vi);Nr=$e,za=Ot,Gl=!0}return Hn[fe]=function Ha(F,G,Z,fe,ke,$e,Ot){return kn.apply(this,arguments)}(F,zt,wo,G,za,vs,Z),new $a(F)}function Wu(){return js.apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(){if((0,Ae.ru)()||!(0,Ae.zI)()||!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch{return!1}})).apply(this,arguments)}const bs="@firebase/analytics";!function Ta(){(0,ye._registerComponent)(new Ce.wA(Cl,(G,{options:Z})=>Wa(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,ye._registerComponent)(new Ce.wA("analytics-internal",function F(G){try{const Z=G.getProvider(Cl).getImmediate();return{logEvent:(fe,ke,$e)=>function Ca(F,G,Z,fe){F=(0,Ae.m9)(F),function dl(F,G,Z,fe,ke){return ja.apply(this,arguments)}(Nr,Hn[F.app.options.appId],G,Z,fe).catch(ke=>ui.error(ke))}(Z,fe,ke,$e)}}catch(Z){throw Ve.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,ye.registerVersion)(bs,"0.9.4"),(0,ye.registerVersion)(bs,"0.9.4","esm2017")}();var _h=j(4408),hl=j(7565);const Xi=new class dd extends hl.v{}(class hu extends _h.o{constructor(G,Z){super(G,Z),this.scheduler=G,this.work=Z}schedule(G,Z=0){return Z>0?super.schedule(G,Z):(this.delay=Z,this.state=G,this.scheduler.flush(this),this)}execute(G,Z){return Z>0||this.closed?super.execute(G,Z):this._execute(G,Z)}requestAsyncId(G,Z,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(G,Z,fe):(G.flush(this),0)}});var Ka=j(4986),fl=j(8505),fu=j(5363),qr=j(9468);const Sl=new T.GfV("7.5.0"),no="__angularfire_symbol__analyticsIsSupportedValue",Al="__angularfire_symbol__analyticsIsSupported",Ri="__angularfire_symbol__remoteConfigIsSupportedValue",ro="__angularfire_symbol__remoteConfigIsSupported",pu="__angularfire_symbol__messagingIsSupportedValue",C="__angularfire_symbol__messagingIsSupported";function K(F,G,Z){if(G){if(1===G.length)return G[0];const $e=G.filter(Ot=>Ot.app===Z);if(1===$e.length)return $e[0]}return Z.container.getProvider(F).getImmediate({optional:!0})}globalThis[Al]||(globalThis[Al]=Wu().then(F=>globalThis[no]=F).catch(()=>globalThis[no]=!1)),globalThis[C]||(globalThis[C]=yo().then(F=>globalThis[pu]=F).catch(()=>globalThis[pu]=!1)),globalThis[ro]||(globalThis[ro]=Us().then(F=>globalThis[Ri]=F).catch(()=>globalThis[Ri]=!1));const ee=(F,G)=>{const Z=G?[G]:(0,Y.C6)(),fe=[];return Z.forEach(ke=>{ke.container.getProvider(F).instances.forEach(Ot=>{fe.includes(Ot)||fe.push(Ot)})}),fe};function Ne(){}class yt{constructor(G,Z=Xi){this.zone=G,this.delegate=Z}now(){return this.delegate.now()}schedule(G,Z,fe){const ke=this.zone;return this.delegate.schedule(function(Ot){ke.runGuarded(()=>{G.apply(this,[Ot])})},Z,fe)}}class Yt{constructor(G){this.zone=G,this.task=null}call(G,Z){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ne,{},Ne,Ne)),Z.pipe((0,fl.b)({next:fe,complete:fe,error:fe})).subscribe(G).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qt=(()=>{class F{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new yt(Zone.current)),this.insideAngular=Z.run(()=>new yt(Zone.current,Ka.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(Z){return new(Z||F)(T.LFG(T.R0b))},F.\u0275prov=T.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function qn(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function $s(F){return F.pipe((0,fu.Q)(qn().outsideAngular))}function Ws(F){return qn(),function Ol(F){return function(Z){return(Z=Z.lift(new Yt(F.ngZone))).pipe((0,qr.R)(F.outsideAngular),(0,fu.Q)(F.insideAngular))}}(qn())(F)}},5114:(Wt,ze,j)=>{j.d(ze,{$:()=>ou,A:()=>de,B:()=>Je,G:()=>ks,H:()=>Ui,J:()=>_e,L:()=>cr,M:()=>Xa,N:()=>xo,P:()=>Ka,Q:()=>ha,R:()=>ta,T:()=>Po,U:()=>ho,V:()=>Bs,W:()=>ms,X:()=>Vs,Y:()=>_s,Z:()=>rl,_:()=>Ur,a:()=>un,a0:()=>sl,a1:()=>Zi,a2:()=>Fl,a3:()=>go,a4:()=>Il,a5:()=>Ll,a6:()=>Fa,a7:()=>mi,a8:()=>ir,a9:()=>ol,aA:()=>ve,aB:()=>bn,aC:()=>$s,aD:()=>_i,aE:()=>Qr,aI:()=>dn,aL:()=>Ki,aa:()=>ma,ab:()=>Ua,ac:()=>eo,af:()=>Si,ag:()=>ea,ah:()=>Ji,ak:()=>Bi,al:()=>wa,an:()=>Bl,ao:()=>cl,ap:()=>tt,aq:()=>et,ar:()=>he,as:()=>ut,at:()=>Hl,au:()=>Ms,av:()=>pt,aw:()=>ot,ax:()=>Se,ay:()=>ws,az:()=>vt,b:()=>Ve,c:()=>pu,d:()=>x,e:()=>S,f:()=>Ol,g:()=>fe,h:()=>F,i:()=>gn,j:()=>Ot,k:()=>Gf,l:()=>$r,m:()=>rg,o:()=>Re,r:()=>_h,s:()=>Ku,u:()=>Xi});var T=j(5861),Y=j(2090),h=j(9681),ye=j(1877),Ae=j(655),Ce=j(4859);const Re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Je=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},mt=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},It=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),at=new ye.Yd("@firebase/auth");function ge(A,...v){at.logLevel<=ye.in.ERROR&&at.error(`Auth (${h.SDK_VERSION}): ${A}`,...v)}function ut(A,...v){throw Mt(A,...v)}function ot(A,...v){return Mt(A,...v)}function Xe(A,v,b){const M=Object.assign(Object.assign({},mt()),{[v]:b});return new Y.LL("auth","Firebase",M).create(v,{appName:A.name})}function qe(A,v,b){if(!(v instanceof b))throw b.name!==v.constructor.name&&ut(A,"argument-error"),Xe(A,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mt(A,...v){if("string"!=typeof A){const b=v[0],M=[...v.slice(1)];return M[0]&&(M[0].appName=A.name),A._errorFactory.create(b,...M)}return It.create(A,...v)}function Se(A,v,...b){if(!A)throw Mt(v,...b)}function Ie(A){const v="INTERNAL ASSERTION FAILED: "+A;throw ge(v),new Error(v)}function tt(A,v){A||Ie(v)}const it=new Map;function vt(A){tt(A instanceof Function,"Expected a class definition");let v=it.get(A);return v?(tt(v instanceof A,"Instance stored in cache mismatched with class"),v):(v=new A,it.set(A,v),v)}function Ue(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function nt(){return"http:"===We()||"https:"===We()}function We(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class st{constructor(v,b){this.shortDelay=v,this.longDelay=b,tt(b>v,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function rt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kt(A,v){tt(A.emulator,"Emulator should always be set here");const{url:b}=A.emulator;return v?`${b}${v.startsWith("/")?v.slice(1):v}`:b}class Et{static initialize(v,b,M){this.fetchImpl=v,b&&(this.headersImpl=b),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gt=new st(3e4,6e4);function $t(A,v){return A.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:A.tenantId}):v}function wt(A,v,b,M){return En.apply(this,arguments)}function En(){return(En=(0,T.Z)(function*(A,v,b,M,q={}){return Rn(A,q,(0,T.Z)(function*(){let se={},je={};M&&("GET"===v?je=M:se={body:JSON.stringify(M)});const At=(0,Y.xO)(Object.assign({key:A.config.apiKey},je)).slice(1),an=yield A._getAdditionalHeaders();return an["Content-Type"]="application/json",A.languageCode&&(an["X-Firebase-Locale"]=A.languageCode),Et.fetch()(Zn(A,A.config.apiHost,b,At),Object.assign({method:v,headers:an,referrerPolicy:"no-referrer"},se))}))})).apply(this,arguments)}function Rn(A,v,b){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,T.Z)(function*(A,v,b){A._canInitEmulator=!1;const M=Object.assign(Object.assign({},on),v);try{const q=new Fn(A),se=yield Promise.race([b(),q.promise]);q.clearNetworkTimeout();const je=yield se.json();if("needConfirmation"in je)throw Nn(A,"account-exists-with-different-credential",je);if(se.ok&&!("errorMessage"in je))return je;{const At=se.ok?je.errorMessage:je.error.message,[an,In]=At.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===an)throw Nn(A,"credential-already-in-use",je);if("EMAIL_EXISTS"===an)throw Nn(A,"email-already-in-use",je);if("USER_DISABLED"===an)throw Nn(A,"user-disabled",je);const nr=M[an]||an.toLowerCase().replace(/[_\s]+/g,"-");if(In)throw Xe(A,nr,In);ut(A,nr)}}catch(q){if(q instanceof Y.ZR)throw q;ut(A,"internal-error",{message:String(q)})}})).apply(this,arguments)}function Gn(A,v,b,M){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,T.Z)(function*(A,v,b,M,q={}){const se=yield wt(A,v,b,M,q);return"mfaPendingCredential"in se&&ut(A,"multi-factor-auth-required",{_serverResponse:se}),se})).apply(this,arguments)}function Zn(A,v,b,M){const q=`${v}${b}?${M}`;return A.config.emulator?kt(A.config,q):`${A.config.apiScheme}://${q}`}class Fn{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((b,M)=>{this.timer=setTimeout(()=>M(ot(this.auth,"network-request-failed")),Gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(A,v,b){const M={appName:A.name};b.email&&(M.email=b.email),b.phoneNumber&&(M.phoneNumber=b.phoneNumber);const q=ot(A,v,M);return q.customData._tokenResponse=b,q}function tr(){return(tr=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function Sn(){return(Sn=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function ti(){return(ti=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function fi(A){if(A)try{const v=new Date(Number(A));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function ni(){return(ni=(0,T.Z)(function*(A,v=!1){const b=(0,Y.m9)(A),M=yield b.getIdToken(v),q=nn(M);Se(q&&q.exp&&q.auth_time&&q.iat,b.auth,"internal-error");const se="object"==typeof q.firebase?q.firebase:void 0,je=se?.sign_in_provider;return{claims:q,token:M,authTime:fi(yn(q.auth_time)),issuedAtTime:fi(yn(q.iat)),expirationTime:fi(yn(q.exp)),signInProvider:je||null,signInSecondFactor:se?.sign_in_second_factor||null}})).apply(this,arguments)}function yn(A){return 1e3*Number(A)}function nn(A){const[v,b,M]=A.split(".");if(void 0===v||void 0===b||void 0===M)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,Y.tV)(b);return q?JSON.parse(q):(ge("Failed to decode base64 JWT payload"),null)}catch(q){return ge("Caught error parsing JWT payload as JSON",q?.toString()),null}}function rr(A,v){return or.apply(this,arguments)}function or(){return(or=(0,T.Z)(function*(A,v,b=!1){if(b)return v;try{return yield v}catch(M){throw M instanceof Y.ZR&&function ln({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(M)&&A.auth.currentUser===A&&(yield A.auth.signOut()),M}})).apply(this,arguments)}class Ir{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var b;if(v){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const q=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(v=!1){var b=this;if(!this.isRunning)return;const M=this.getInterval(v);this.timerId=setTimeout((0,T.Z)(function*(){yield b.iteration()}),M)}iteration(){var v=this;return(0,T.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b?.code&&v.schedule(!0))}v.schedule()})()}}class Zr{constructor(v,b){this.createdAt=v,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(A){return pn.apply(this,arguments)}function pn(){return pn=(0,T.Z)(function*(A){var v;const b=A.auth,M=yield A.getIdToken(),q=yield rr(A,function Ut(A,v){return ti.apply(this,arguments)}(b,{idToken:M}));Se(q?.users.length,b,"internal-error");const se=q.users[0];A._notifyReloadListener(se);const je=null!==(v=se.providerUserInfo)&&void 0!==v&&v.length?function Cr(A){return A.map(v=>{var{providerId:b}=v,M=(0,Ae._T)(v,["providerId"]);return{providerId:b,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(se.providerUserInfo):[],At=function Ii(A,v){return[...A.filter(M=>!v.some(q=>q.providerId===M.providerId)),...v]}(A.providerData,je),nr=!!A.isAnonymous&&!(A.email&&se.passwordHash||At?.length),xi={uid:se.localId,displayName:se.displayName||null,photoURL:se.photoUrl||null,email:se.email||null,emailVerified:se.emailVerified||!1,phoneNumber:se.phoneNumber||null,tenantId:se.tenantId||null,providerData:At,metadata:new Zr(se.createdAt,se.lastLoginAt),isAnonymous:nr};Object.assign(A,xi)}),pn.apply(this,arguments)}function xn(){return(xn=(0,T.Z)(function*(A){const v=(0,Y.m9)(A);yield yr(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function ft(){return(ft=(0,T.Z)(function*(A,v){const b=yield Rn(A,{},(0,T.Z)(function*(){const M=(0,Y.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:q,apiKey:se}=A.config,je=Zn(A,q,"/v1/token",`key=${se}`),At=yield A._getAdditionalHeaders();return At["Content-Type"]="application/x-www-form-urlencoded",Et.fetch()(je,{method:"POST",headers:At,body:M})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class Ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Se(v.idToken,"internal-error"),Se(typeof v.idToken<"u","internal-error"),Se(typeof v.refreshToken<"u","internal-error");const b="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function cn(A){const v=nn(A);return Se(v,"internal-error"),Se(typeof v.exp<"u","internal-error"),Se(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,b)}getToken(v,b=!1){var M=this;return(0,T.Z)(function*(){return Se(!M.accessToken||M.refreshToken,v,"user-token-expired"),b||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(v,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,b){var M=this;return(0,T.Z)(function*(){const{accessToken:q,refreshToken:se,expiresIn:je}=yield function Rt(A,v){return ft.apply(this,arguments)}(v,b);M.updateTokensAndExpiration(q,se,Number(je))})()}updateTokensAndExpiration(v,b,M){this.refreshToken=b||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(v,b){const{refreshToken:M,accessToken:q,expirationTime:se}=b,je=new Ht;return M&&(Se("string"==typeof M,"internal-error",{appName:v}),je.refreshToken=M),q&&(Se("string"==typeof q,"internal-error",{appName:v}),je.accessToken=q),se&&(Se("number"==typeof se,"internal-error",{appName:v}),je.expirationTime=se),je}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Ht,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function rn(A,v){Se("string"==typeof A||typeof A>"u","internal-error",{appName:v})}class mn{constructor(v){var{uid:b,auth:M,stsTokenManager:q}=v,se=(0,Ae._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ir(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=M,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=se.displayName||null,this.email=se.email||null,this.emailVerified=se.emailVerified||!1,this.phoneNumber=se.phoneNumber||null,this.photoURL=se.photoURL||null,this.isAnonymous=se.isAnonymous||!1,this.tenantId=se.tenantId||null,this.providerData=se.providerData?[...se.providerData]:[],this.metadata=new Zr(se.createdAt||void 0,se.lastLoginAt||void 0)}getIdToken(v){var b=this;return(0,T.Z)(function*(){const M=yield rr(b,b.stsTokenManager.getToken(b.auth,v));return Se(M,b.auth,"internal-error"),b.accessToken!==M&&(b.accessToken=M,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),M})()}getIdTokenResult(v){return function Yr(A){return ni.apply(this,arguments)}(this,v)}reload(){return function Kr(A){return xn.apply(this,arguments)}(this)}_assign(v){this!==v&&(Se(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(b=>Object.assign({},b)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const b=new mn(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(v){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,b=!1){var M=this;return(0,T.Z)(function*(){let q=!1;v.idToken&&v.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(v),q=!0),b&&(yield yr(M)),yield M.auth._persistUserIfCurrent(M),q&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var v=this;return(0,T.Z)(function*(){const b=yield v.getIdToken();return yield rr(v,function er(A,v){return tr.apply(this,arguments)}(v.auth,{idToken:b})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,b){var M,q,se,je,At,an,In,nr;const xi=null!==(M=b.displayName)&&void 0!==M?M:void 0,gl=null!==(q=b.email)&&void 0!==q?q:void 0,zo=null!==(se=b.phoneNumber)&&void 0!==se?se:void 0,Ya=null!==(je=b.photoURL)&&void 0!==je?je:void 0,Dh=null!==(At=b.tenantId)&&void 0!==At?At:void 0,ra=null!==(an=b._redirectEventId)&&void 0!==an?an:void 0,bd=null!==(In=b.createdAt)&&void 0!==In?In:void 0,_u=null!==(nr=b.lastLoginAt)&&void 0!==nr?nr:void 0,{uid:Ih,emailVerified:Zu,isAnonymous:Ac,providerData:jf,stsTokenManager:ig}=b;Se(Ih&&ig,v,"internal-error");const Pi=Ht.fromJSON(this.name,ig);Se("string"==typeof Ih,v,"internal-error"),rn(xi,v.name),rn(gl,v.name),Se("boolean"==typeof Zu,v,"internal-error"),Se("boolean"==typeof Ac,v,"internal-error"),rn(zo,v.name),rn(Ya,v.name),rn(Dh,v.name),rn(ra,v.name),rn(bd,v.name),rn(_u,v.name);const Oc=new mn({uid:Ih,auth:v,email:gl,emailVerified:Zu,displayName:xi,isAnonymous:Ac,photoURL:Ya,phoneNumber:zo,tenantId:Dh,stsTokenManager:Pi,createdAt:bd,lastLoginAt:_u});return jf&&Array.isArray(jf)&&(Oc.providerData=jf.map(Ch=>Object.assign({},Ch))),ra&&(Oc._redirectEventId=ra),Oc}static _fromIdTokenResponse(v,b,M=!1){return(0,T.Z)(function*(){const q=new Ht;q.updateFromServerResponse(b);const se=new mn({uid:b.localId,auth:v,stsTokenManager:q,isAnonymous:M});return yield yr(se),se})()}}const cr=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(b,M){var q=this;return(0,T.Z)(function*(){q.storage[b]=M})()}_get(b){var M=this;return(0,T.Z)(function*(){const q=M.storage[b];return void 0===q?null:q})()}_remove(b){var M=this;return(0,T.Z)(function*(){delete M.storage[b]})()}_addListener(b,M){}_removeListener(b,M){}}return A.type="NONE",A})();function ve(A,v,b){return`firebase:${A}:${v}:${b}`}class me{constructor(v,b,M){this.persistence=v,this.auth=b,this.userKey=M;const{config:q,name:se}=this.auth;this.fullUserKey=ve(this.userKey,q.apiKey,se),this.fullPersistenceKey=ve("persistence",q.apiKey,se),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,T.Z)(function*(){const b=yield v.persistence._get(v.fullUserKey);return b?mn._fromJSON(v.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var b=this;return(0,T.Z)(function*(){if(b.persistence===v)return;const M=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=v,M?b.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,b,M="authUser"){return(0,T.Z)(function*(){if(!b.length)return new me(vt(cr),v,M);const q=(yield Promise.all(b.map(function(){var In=(0,T.Z)(function*(nr){if(yield nr._isAvailable())return nr});return function(nr){return In.apply(this,arguments)}}()))).filter(In=>In);let se=q[0]||vt(cr);const je=ve(M,v.config.apiKey,v.name);let At=null;for(const In of b)try{const nr=yield In._get(je);if(nr){const xi=mn._fromJSON(v,nr);In!==se&&(At=xi),se=In;break}}catch{}const an=q.filter(In=>In._shouldAllowMigration);return se._shouldAllowMigration&&an.length?(se=an[0],At&&(yield se._set(je,At.toJSON())),yield Promise.all(b.map(function(){var In=(0,T.Z)(function*(nr){if(nr!==se)try{yield nr._remove(je)}catch{}});return function(nr){return In.apply(this,arguments)}}())),new me(se,v,M)):new me(se,v,M)})()}}function te(A){const v=A.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(ae(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(re(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(oe(v))return"Blackberry";if(Oe(v))return"Webos";if(Q(v))return"Safari";if((v.includes("chrome/")||xe(v))&&!v.includes("edge/"))return"Chrome";if(he(v))return"Android";{const M=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function re(A=(0,Y.z$)()){return/firefox\//i.test(A)}function Q(A=(0,Y.z$)()){const v=A.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function xe(A=(0,Y.z$)()){return/crios\//i.test(A)}function ae(A=(0,Y.z$)()){return/iemobile/i.test(A)}function he(A=(0,Y.z$)()){return/android/i.test(A)}function oe(A=(0,Y.z$)()){return/blackberry/i.test(A)}function Oe(A=(0,Y.z$)()){return/webos/i.test(A)}function et(A=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function pt(A=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function Cn(A=(0,Y.z$)()){return et(A)||he(A)||Oe(A)||oe(A)||/windows phone/i.test(A)||ae(A)}function os(A,v=[]){let b;switch(A){case"Browser":b=te((0,Y.z$)());break;case"Worker":b=`${te((0,Y.z$)())}-${A}`;break;default:b=A}const M=v.length?v.join(","):"FirebaseCore-web";return`${b}/JsCore/${h.SDK_VERSION}/${M}`}class ca{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,b){const M=se=>new Promise((je,At)=>{try{je(v(se))}catch(an){At(an)}});M.onAbort=b,this.queue.push(M);const q=this.queue.length-1;return()=>{this.queue[q]=()=>Promise.resolve()}}runMiddleware(v){var b=this;return(0,T.Z)(function*(){if(b.auth.currentUser===v)return;const M=[];try{for(const q of b.queue)yield q(v),q.onAbort&&M.push(q.onAbort)}catch(q){M.reverse();for(const se of M)try{se()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:q?.message})}})()}}class qo{constructor(v,b,M){this.app=v,this.heartbeatServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ps(this),this.idTokenSubscription=new ps(this),this.beforeStateQueue=new ca(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=It,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(v,b){var M=this;return b&&(this._popupRedirectResolver=vt(b)),this._initializationPromise=this.queue((0,T.Z)(function*(){var q,se;if(!M._deleted&&(M.persistenceManager=yield me.create(M,v),!M._deleted)){if(null!==(q=M._popupRedirectResolver)&&void 0!==q&&q._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(b),M.lastNotifiedUid=(null===(se=M.currentUser)||void 0===se?void 0:se.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,T.Z)(function*(){if(v._deleted)return;const b=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||b){if(v.currentUser&&b&&v.currentUser.uid===b.uid)return v._currentUser._assign(b),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(b,!0)}})()}initializeCurrentUser(v){var b=this;return(0,T.Z)(function*(){var M;const q=yield b.assertedPersistence.getCurrentUser();let se=q,je=!1;if(v&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const At=null===(M=b.redirectUser)||void 0===M?void 0:M._redirectEventId,an=se?._redirectEventId,In=yield b.tryRedirectSignIn(v);(!At||At===an)&&In?.user&&(se=In.user,je=!0)}if(!se)return b.directlySetCurrentUser(null);if(!se._redirectEventId){if(je)try{yield b.beforeStateQueue.runMiddleware(se)}catch(At){se=q,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(At))}return se?b.reloadAndSetCurrentUserOrClear(se):b.directlySetCurrentUser(null)}return Se(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===se._redirectEventId?b.directlySetCurrentUser(se):b.reloadAndSetCurrentUserOrClear(se)})()}tryRedirectSignIn(v){var b=this;return(0,T.Z)(function*(){let M=null;try{M=yield b._popupRedirectResolver._completeRedirectFn(b,v,!0)}catch{yield b._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(v){var b=this;return(0,T.Z)(function*(){try{yield yr(v)}catch(M){if("auth/network-request-failed"!==M?.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function ct(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var v=this;return(0,T.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var b=this;return(0,T.Z)(function*(){const M=v?(0,Y.m9)(v):null;return M&&Se(M.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(M&&M._clone(b))})()}_updateCurrentUser(v,b=!1){var M=this;return(0,T.Z)(function*(){if(!M._deleted)return v&&Se(M.tenantId===v.tenantId,M,"tenant-id-mismatch"),b||(yield M.beforeStateQueue.runMiddleware(v)),M.queue((0,T.Z)(function*(){yield M.directlySetCurrentUser(v),M.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,T.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var b=this;return this.queue((0,T.Z)(function*(){yield b.assertedPersistence.setPersistence(vt(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new Y.LL("auth","Firebase",v())}onAuthStateChanged(v,b,M){return this.registerStateListener(this.authStateSubscription,v,b,M)}beforeAuthStateChanged(v,b){return this.beforeStateQueue.pushCallback(v,b)}onIdTokenChanged(v,b,M){return this.registerStateListener(this.idTokenSubscription,v,b,M)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,b){var M=this;return(0,T.Z)(function*(){const q=yield M.getOrInitRedirectPersistenceManager(b);return null===v?q.removeCurrentUser():q.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var b=this;return(0,T.Z)(function*(){if(!b.redirectPersistenceManager){const M=v&&vt(v)||b._popupRedirectResolver;Se(M,b,"argument-error"),b.redirectPersistenceManager=yield me.create(b,[vt(M._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(v){var b=this;return(0,T.Z)(function*(){var M,q;return b._isInitialized&&(yield b.queue((0,T.Z)(function*(){}))),(null===(M=b._currentUser)||void 0===M?void 0:M._redirectEventId)===v?b._currentUser:(null===(q=b.redirectUser)||void 0===q?void 0:q._redirectEventId)===v?b.redirectUser:null})()}_persistUserIfCurrent(v){var b=this;return(0,T.Z)(function*(){if(v===b.currentUser)return b.queue((0,T.Z)(function*(){return b.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(b=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,b,M,q){if(this._deleted)return()=>{};const se="function"==typeof b?b:b.next.bind(b),je=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(je,this,"internal-error"),je.then(()=>se(this.currentUser)),"function"==typeof b?v.addObserver(b,M,q):v.addObserver(b)}directlySetCurrentUser(v){var b=this;return(0,T.Z)(function*(){b.currentUser&&b.currentUser!==v&&b._currentUser._stopProactiveRefresh(),v&&b.isProactiveRefreshEnabled&&v._startProactiveRefresh(),b.currentUser=v,v?yield b.assertedPersistence.setCurrentUser(v):yield b.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=os(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,T.Z)(function*(){var b;const M={"X-Client-Version":v.clientVersion};v.app.options.appId&&(M["X-Firebase-gmpid"]=v.app.options.appId);const q=yield null===(b=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return q&&(M["X-Firebase-Client"]=q),M})()}}function Qr(A){return(0,Y.m9)(A)}class ps{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,Y.ne)(b=>this.observer=b)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ks(A,v,b){const M=Qr(A);Se(M._canInitEmulator,M,"emulator-config-failed"),Se(/^https?:\/\//.test(v),M,"invalid-emulator-scheme");const q=!!b?.disableWarnings,se=No(v),{host:je,port:At}=function Xn(A){const v=No(A),b=/(\/\/)?([^?#/]+)/.exec(A.substr(v.length));if(!b)return{host:"",port:null};const M=b[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(M);if(q){const se=q[1];return{host:se,port:Vr(M.substr(se.length+1))}}{const[se,je]=M.split(":");return{host:se,port:Vr(je)}}}(v);M.config.emulator={url:`${se}//${je}${null===At?"":`:${At}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:je,port:At,protocol:se.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function Fr(){function A(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function No(A){const v=A.indexOf(":");return v<0?"":A.substr(0,v+1)}function Vr(A){if(!A)return null;const v=Number(A);return isNaN(v)?null:v}class Ui{constructor(v,b){this.providerId=v,this.signInMethod=b}toJSON(){return Ie("not implemented")}_getIdTokenResponse(v){return Ie("not implemented")}_linkToIdToken(v,b){return Ie("not implemented")}_getReauthenticationResolver(v){return Ie("not implemented")}}function $i(A,v){return si.apply(this,arguments)}function si(){return(si=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:resetPassword",$t(A,v))})).apply(this,arguments)}function ri(A,v){return yi.apply(this,arguments)}function yi(){return(yi=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Qt(){return(Qt=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:update",$t(A,v))})).apply(this,arguments)}function vr(){return(vr=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithPassword",$t(A,v))})).apply(this,arguments)}function vi(A,v){return zi.apply(this,arguments)}function zi(){return(zi=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:sendOobCode",$t(A,v))})).apply(this,arguments)}function oi(){return(oi=(0,T.Z)(function*(A,v){return vi(A,v)})).apply(this,arguments)}function ai(){return(ai=(0,T.Z)(function*(A,v){return vi(A,v)})).apply(this,arguments)}function Ln(){return(Ln=(0,T.Z)(function*(A,v){return vi(A,v)})).apply(this,arguments)}function Mo(){return(Mo=(0,T.Z)(function*(A,v){return vi(A,v)})).apply(this,arguments)}function Ro(){return(Ro=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithEmailLink",$t(A,v))})).apply(this,arguments)}function uo(){return(uo=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithEmailLink",$t(A,v))})).apply(this,arguments)}class jr extends Ui{constructor(v,b,M,q=null){super("password",M),this._email=v,this._password=b,this._tenantId=q}static _fromEmailAndPassword(v,b){return new jr(v,b,"password")}static _fromEmailAndCode(v,b,M=null){return new jr(v,b,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(v){var b=this;return(0,T.Z)(function*(){switch(b.signInMethod){case"password":return function Mn(A,v){return vr.apply(this,arguments)}(v,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Yo(A,v){return Ro.apply(this,arguments)}(v,{email:b._email,oobCode:b._password});default:ut(v,"internal-error")}})()}_linkToIdToken(v,b){var M=this;return(0,T.Z)(function*(){switch(M.signInMethod){case"password":return ri(v,{idToken:b,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function Ti(A,v){return uo.apply(this,arguments)}(v,{idToken:b,email:M._email,oobCode:M._password});default:ut(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function bi(A,v){return Os.apply(this,arguments)}function Os(){return(Os=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithIdp",$t(A,v))})).apply(this,arguments)}class _e extends Ui{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const b=new _e(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(b.idToken=v.idToken),v.accessToken&&(b.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(b.nonce=v.nonce),v.pendingToken&&(b.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(b.accessToken=v.oauthToken,b.secret=v.oauthTokenSecret):ut("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:q}=b,se=(0,Ae._T)(b,["providerId","signInMethod"]);if(!M||!q)return null;const je=new _e(M,q);return je.idToken=se.idToken||void 0,je.accessToken=se.accessToken||void 0,je.secret=se.secret,je.nonce=se.nonce,je.pendingToken=se.pendingToken||null,je}_getIdTokenResponse(v){return bi(v,this.buildRequest())}_linkToIdToken(v,b){const M=this.buildRequest();return M.idToken=b,bi(v,M)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,bi(v,b)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),v.postBody=(0,Y.xO)(b)}return v}}function ht(){return(ht=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:sendVerificationCode",$t(A,v))})).apply(this,arguments)}function tn(){return(tn=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithPhoneNumber",$t(A,v))})).apply(this,arguments)}function wr(){return(wr=(0,T.Z)(function*(A,v){const b=yield Gn(A,"POST","/v1/accounts:signInWithPhoneNumber",$t(A,v));if(b.temporaryProof)throw Nn(A,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const Pn={USER_NOT_FOUND:"user-not-found"};function Lr(){return(Lr=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithPhoneNumber",$t(A,Object.assign(Object.assign({},v),{operation:"REAUTH"})),Pn)})).apply(this,arguments)}class gr extends Ui{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,b){return new gr({verificationId:v,verificationCode:b})}static _fromTokenResponse(v,b){return new gr({phoneNumber:v,temporaryProof:b})}_getIdTokenResponse(v){return function Lt(A,v){return tn.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,b){return function An(A,v){return wr.apply(this,arguments)}(v,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function co(A,v){return Lr.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:b,verificationId:M,verificationCode:q}=this.params;return v&&b?{temporaryProof:v,phoneNumber:b}:{sessionInfo:M,code:q}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:b,verificationCode:M,phoneNumber:q,temporaryProof:se}=v;return M||b||q||se?new gr({verificationId:b,verificationCode:M,phoneNumber:q,temporaryProof:se}):null}}class Wi{constructor(v){var b,M,q,se,je,At;const an=(0,Y.zd)((0,Y.pd)(v)),In=null!==(b=an.apiKey)&&void 0!==b?b:null,nr=null!==(M=an.oobCode)&&void 0!==M?M:null,xi=function Fs(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=an.mode)&&void 0!==q?q:null);Se(In&&nr&&xi,"argument-error"),this.apiKey=In,this.operation=xi,this.code=nr,this.continueUrl=null!==(se=an.continueUrl)&&void 0!==se?se:null,this.languageCode=null!==(je=an.languageCode)&&void 0!==je?je:null,this.tenantId=null!==(At=an.tenantId)&&void 0!==At?At:null}static parseLink(v){const b=function Ls(A){const v=(0,Y.zd)((0,Y.pd)(A)).link,b=v?(0,Y.zd)((0,Y.pd)(v)).deep_link_id:null,M=(0,Y.zd)((0,Y.pd)(A)).deep_link_id;return(M?(0,Y.zd)((0,Y.pd)(M)).link:null)||M||b||v||A}(v);try{return new Wi(b)}catch{return null}}}let Xa=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(b,M){return jr._fromEmailAndPassword(b,M)}static credentialWithLink(b,M){const q=Wi.parseLink(M);return Se(q,"argument-error"),jr._fromEmailAndCode(b,q.code,q.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class gs{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class da extends gs{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ho extends da{static credentialFromJSON(v){const b="string"==typeof v?JSON.parse(v):v;return Se("providerId"in b&&"signInMethod"in b,"argument-error"),_e._fromParams(b)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Se(v.idToken||v.accessToken,"argument-error"),_e._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ho.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ho.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:q,pendingToken:se,nonce:je,providerId:At}=v;if(!M&&!q&&!b&&!se||!At)return null;try{return new ho(At)._credential({idToken:b,accessToken:M,nonce:je,pendingToken:se})}catch{return null}}}let xo=(()=>{class A extends da{constructor(){super("facebook.com")}static credential(b){return _e._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return A.credential(b.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),ha=(()=>{class A extends da{constructor(){super("google.com"),this.addScope("profile")}static credential(b,M){return _e._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:M})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:M,oauthAccessToken:q}=b;if(!M&&!q)return null;try{return A.credential(M,q)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),Po=(()=>{class A extends da{constructor(){super("github.com")}static credential(b){return _e._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return A.credential(b.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Ki extends Ui{constructor(v,b){super(v,v),this.pendingToken=b}_getIdTokenResponse(v){return bi(v,this.buildRequest())}_linkToIdToken(v,b){const M=this.buildRequest();return M.idToken=b,bi(v,M)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,bi(v,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:q,pendingToken:se}=b;return M&&q&&se&&M===q?new Ki(M,se):null}static _create(v,b){return new Ki(v,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bs extends gs{constructor(v){Se(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return Bs.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return Bs.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const b=Ki.fromJSON(v);return Se(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:b,providerId:M}=v;if(!b||!M)return null;try{return Ki._create(M,b)}catch{return null}}}let ms=(()=>{class A extends da{constructor(){super("twitter.com")}static credential(b,M){return _e._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:M})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:M,oauthTokenSecret:q}=b;if(!M||!q)return null;try{return A.credential(M,q)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Gu(A,v){return tl.apply(this,arguments)}function tl(){return(tl=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signUp",$t(A,v))})).apply(this,arguments)}class as{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,b,M,q=!1){return(0,T.Z)(function*(){const se=yield mn._fromIdTokenResponse(v,M,q),je=Fo(M);return new as({user:se,providerId:je,_tokenResponse:M,operationType:b})})()}static _forOperation(v,b,M){return(0,T.Z)(function*(){yield v._updateTokensIfNecessary(M,!0);const q=Fo(M);return new as({user:v,providerId:q,_tokenResponse:M,operationType:b})})()}}function Fo(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function Vs(A){return fo.apply(this,arguments)}function fo(){return(fo=(0,T.Z)(function*(A){var v;const b=Qr(A);if(yield b._initializationPromise,null!==(v=b.currentUser)&&void 0!==v&&v.isAnonymous)return new as({user:b.currentUser,providerId:null,operationType:"signIn"});const M=yield Gu(b,{returnSecureToken:!0}),q=yield as._fromIdTokenResponse(b,"signIn",M,!0);return yield b._updateCurrentUser(q.user),q})).apply(this,arguments)}class Pa extends Y.ZR{constructor(v,b,M,q){var se;super(b.code,b.message),this.operationType=M,this.user=q,Object.setPrototypeOf(this,Pa.prototype),this.customData={appName:v.name,tenantId:null!==(se=v.tenantId)&&void 0!==se?se:void 0,_serverResponse:b.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(v,b,M,q){return new Pa(v,b,M,q)}}function ru(A,v,b,M){return("reauthenticate"===v?b._getReauthenticationResolver(A):b._getIdTokenResponse(A)).catch(se=>{throw"auth/multi-factor-auth-required"===se.code?Pa._fromErrorAndOperation(A,se,v,M):se})}function Tr(A){return new Set(A.map(({providerId:v})=>v).filter(v=>!!v))}function Bi(A,v){return Lo.apply(this,arguments)}function Lo(){return Lo=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A);yield Js(!0,b,v);const{providerUserInfo:M}=yield function Xt(A,v){return Sn.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[v]}),q=Tr(M||[]);return b.providerData=b.providerData.filter(se=>q.has(se.providerId)),q.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),Lo.apply(this,arguments)}function Ns(A,v){return nl.apply(this,arguments)}function nl(){return(nl=(0,T.Z)(function*(A,v,b=!1){const M=yield rr(A,v._linkToIdToken(A.auth,yield A.getIdToken()),b);return as._forOperation(A,"link",M)})).apply(this,arguments)}function Js(A,v,b){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,T.Z)(function*(A,v,b){yield yr(v);const q=!1===A?"provider-already-linked":"no-such-provider";Se(Tr(v.providerData).has(b)===A,v.auth,q)})).apply(this,arguments)}function kl(A,v){return iu.apply(this,arguments)}function iu(){return(iu=(0,T.Z)(function*(A,v,b=!1){const{auth:M}=A,q="reauthenticate";try{const se=yield rr(A,ru(M,q,v,A),b);Se(se.idToken,M,"internal-error");const je=nn(se.idToken);Se(je,M,"internal-error");const{sub:At}=je;return Se(A.uid===At,M,"user-mismatch"),as._forOperation(A,q,se)}catch(se){throw"auth/user-not-found"===se?.code&&ut(M,"user-mismatch"),se}})).apply(this,arguments)}function su(A,v){return qi.apply(this,arguments)}function qi(){return(qi=(0,T.Z)(function*(A,v,b=!1){const M="signIn",q=yield ru(A,M,v),se=yield as._fromIdTokenResponse(A,M,q);return b||(yield A._updateCurrentUser(se.user)),se})).apply(this,arguments)}function _s(A,v){return mr.apply(this,arguments)}function mr(){return(mr=(0,T.Z)(function*(A,v){return su(Qr(A),v)})).apply(this,arguments)}function rl(A,v){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A);return yield Js(!1,b,v.providerId),Ns(b,v)})).apply(this,arguments)}function Ur(A,v){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,T.Z)(function*(A,v){return kl((0,Y.m9)(A),v)})).apply(this,arguments)}function pi(){return(pi=(0,T.Z)(function*(A,v){return Gn(A,"POST","/v1/accounts:signInWithCustomToken",$t(A,v))})).apply(this,arguments)}function ou(A,v){return il.apply(this,arguments)}function il(){return il=(0,T.Z)(function*(A,v){const b=Qr(A),M=yield function po(A,v){return pi.apply(this,arguments)}(b,{token:v,returnSecureToken:!0}),q=yield as._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(q.user),q}),il.apply(this,arguments)}class Gs{constructor(v,b){this.factorId=v,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(v,b){return"phoneInfo"in b?gi._fromServerResponse(v,b):ut(v,"internal-error")}}class gi extends Gs{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,b){return new gi(b)}}function fa(A,v,b){var M;Se((null===(M=b.url)||void 0===M?void 0:M.length)>0,A,"invalid-continue-uri"),Se(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),v.continueUrl=b.url,v.dynamicLinkDomain=b.dynamicLinkDomain,v.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(Se(b.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),v.iOSBundleId=b.iOS.bundleId),b.android&&(Se(b.android.packageName.length>0,A,"missing-android-pkg-name"),v.androidInstallApp=b.android.installApp,v.androidMinimumVersionCode=b.android.minimumVersion,v.androidPackageName=b.android.packageName)}function sl(A,v,b){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q={requestType:"PASSWORD_RESET",email:v};b&&fa(M,q,b),yield function Gr(A,v){return ai.apply(this,arguments)}(M,q)}),Xs.apply(this,arguments)}function Zi(A,v,b){return ka.apply(this,arguments)}function ka(){return(ka=(0,T.Z)(function*(A,v,b){yield $i((0,Y.m9)(A),{oobCode:v,newPassword:b})})).apply(this,arguments)}function Fl(A,v){return Dn.apply(this,arguments)}function Dn(){return Dn=(0,T.Z)(function*(A,v){yield function Ci(A,v){return Qt.apply(this,arguments)}((0,Y.m9)(A),{oobCode:v})}),Dn.apply(this,arguments)}function go(A,v){return pa.apply(this,arguments)}function pa(){return(pa=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A),M=yield $i(b,{oobCode:v}),q=M.requestType;switch(Se(q,b,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(M.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(M.mfaInfo,b,"internal-error");default:Se(M.email,b,"internal-error")}let se=null;return M.mfaInfo&&(se=Gs._fromServerResponse(Qr(b),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:se},operation:q}})).apply(this,arguments)}function Il(A,v){return ga.apply(this,arguments)}function ga(){return(ga=(0,T.Z)(function*(A,v){const{data:b}=yield go((0,Y.m9)(A),v);return b.email})).apply(this,arguments)}function Ll(A,v,b){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,T.Z)(function*(A,v,b){const M=Qr(A),q=yield Gu(M,{returnSecureToken:!0,email:v,password:b}),se=yield as._fromIdTokenResponse(M,"signIn",q);return yield M._updateCurrentUser(se.user),se})).apply(this,arguments)}function Fa(A,v,b){return _s((0,Y.m9)(A),Xa.credential(v,b))}function mi(A,v,b){return dt.apply(this,arguments)}function dt(){return dt=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q={requestType:"EMAIL_SIGNIN",email:v};Se(b.handleCodeInApp,M,"argument-error"),b&&fa(M,q,b),yield function xa(A,v){return Ln.apply(this,arguments)}(M,q)}),dt.apply(this,arguments)}function ir(A,v){return"EMAIL_SIGNIN"===Wi.parseLink(v)?.operation}function ol(A,v,b){return mo.apply(this,arguments)}function mo(){return(mo=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q=Xa.credentialWithLink(v,b||Ue());return Se(q._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),_s(M,q)})).apply(this,arguments)}function La(){return(La=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:createAuthUri",$t(A,v))})).apply(this,arguments)}function ma(A,v){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,T.Z)(function*(A,v){const M={identifier:v,continueUri:nt()?Ue():"http://localhost"},{signinMethods:q}=yield function Mi(A,v){return La.apply(this,arguments)}((0,Y.m9)(A),M);return q||[]}),Qi.apply(this,arguments)}function Ua(A,v){return _a.apply(this,arguments)}function _a(){return _a=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A),q={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};v&&fa(b.auth,q,v);const{email:se}=yield function br(A,v){return oi.apply(this,arguments)}(b.auth,q);se!==A.email&&(yield A.reload())}),_a.apply(this,arguments)}function eo(A,v,b){return al.apply(this,arguments)}function al(){return al=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:v};b&&fa(M.auth,se,b);const{email:je}=yield function As(A,v){return Mo.apply(this,arguments)}(M.auth,se);je!==A.email&&(yield A.reload())}),al.apply(this,arguments)}function Jr(){return(Jr=(0,T.Z)(function*(A,v){return wt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Si(A,v){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,T.Z)(function*(A,{displayName:v,photoURL:b}){if(void 0===v&&void 0===b)return;const M=(0,Y.m9)(A),se={idToken:yield M.getIdToken(),displayName:v,photoUrl:b,returnSecureToken:!0},je=yield rr(M,function ll(A,v){return Jr.apply(this,arguments)}(M.auth,se));M.displayName=je.displayName||null,M.photoURL=je.photoUrl||null;const At=M.providerData.find(({providerId:an})=>"password"===an);At&&(At.displayName=M.displayName,At.photoURL=M.photoURL),yield M._updateTokensIfNecessary(je)}),Xo.apply(this,arguments)}function ea(A,v){return Uo((0,Y.m9)(A),v,null)}function Ji(A,v){return Uo((0,Y.m9)(A),null,v)}function Uo(A,v,b){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,T.Z)(function*(A,v,b){const{auth:M}=A,se={idToken:yield A.getIdToken(),returnSecureToken:!0};v&&(se.email=v),b&&(se.password=b);const je=yield rr(A,ri(M,se));yield A._updateTokensIfNecessary(je,!0)})).apply(this,arguments)}class ya{constructor(v,b,M={}){this.isNewUser=v,this.providerId=b,this.profile=M}}class _o extends ya{constructor(v,b,M,q){super(v,b,M),this.username=q}}class va extends ya{constructor(v,b){super(v,"facebook.com",b)}}class yo extends _o{constructor(v,b){super(v,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class ba extends ya{constructor(v,b){super(v,"google.com",b)}}class Va extends _o{constructor(v,b,M){super(v,"twitter.com",b,M)}}function wa(A){const{user:v,_tokenResponse:b}=A;return v.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Ul(A){var v,b;if(!A)return null;const{providerId:M}=A,q=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},se=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!M&&A?.idToken){const je=null===(b=null===(v=nn(A.idToken))||void 0===v?void 0:v.firebase)||void 0===b?void 0:b.sign_in_provider;if(je)return new ya(se,"anonymous"!==je&&"custom"!==je?je:null)}if(!M)return null;switch(M){case"facebook.com":return new va(se,q);case"github.com":return new yo(se,q);case"google.com":return new ba(se,q);case"twitter.com":return new Va(se,q,A.screenName||null);case"custom":case"anonymous":return new ya(se,null);default:return new ya(se,M,q)}}(b)}class Xr{constructor(v,b,M){this.type=v,this.credential=b,this.auth=M}static _fromIdtoken(v,b){return new Xr("enroll",v,b)}static _fromMfaPendingCredential(v){return new Xr("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var b,M;if(v?.multiFactorSession){if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.pendingCredential)return Xr._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(M=v.multiFactorSession)&&void 0!==M&&M.idToken)return Xr._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Hr{constructor(v,b,M){this.session=v,this.hints=b,this.signInResolver=M}static _fromError(v,b){const M=Qr(v),q=b.customData._serverResponse,se=(q.mfaInfo||[]).map(At=>Gs._fromServerResponse(M,At));Se(q.mfaPendingCredential,M,"internal-error");const je=Xr._fromMfaPendingCredential(q.mfaPendingCredential);return new Hr(je,se,function(){var At=(0,T.Z)(function*(an){const In=yield an._process(M,je);delete q.mfaInfo,delete q.mfaPendingCredential;const nr=Object.assign(Object.assign({},q),{idToken:In.idToken,refreshToken:In.refreshToken});switch(b.operationType){case"signIn":const xi=yield as._fromIdTokenResponse(M,b.operationType,nr);return yield M._updateCurrentUser(xi.user),xi;case"reauthenticate":return Se(b.user,M,"internal-error"),as._forOperation(b.user,b.operationType,nr);default:ut(M,"internal-error")}});return function(an){return At.apply(this,arguments)}}())}resolveSignIn(v){var b=this;return(0,T.Z)(function*(){return b.signInResolver(v)})()}}function Bl(A,v){var b;const M=(0,Y.m9)(A),q=v;return Se(v.customData.operationType,M,"argument-error"),Se(null===(b=q.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,M,"argument-error"),Hr._fromError(M,q)}class Vl{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(M=>Gs._fromServerResponse(v.auth,M)))})}static _fromUser(v){return new Vl(v)}getSession(){var v=this;return(0,T.Z)(function*(){return Xr._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,b){var M=this;return(0,T.Z)(function*(){const q=v,se=yield M.getSession(),je=yield rr(M.user,q._process(M.user.auth,se,b));return yield M.user._updateTokensIfNecessary(je),M.user.reload()})()}unenroll(v){var b=this;return(0,T.Z)(function*(){const M="string"==typeof v?v:v.uid,q=yield b.user.getIdToken();try{const se=yield rr(b.user,function ud(A,v){return wt(A,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(A,v))}(b.user.auth,{idToken:q,mfaEnrollmentId:M}));b.enrolledFactors=b.enrolledFactors.filter(({uid:je})=>je!==M),yield b.user._updateTokensIfNecessary(se),yield b.user.reload()}catch(se){throw se}})()}}const uu=new WeakMap;function cl(A){const v=(0,Y.m9)(A);return uu.has(v)||uu.set(v,Vl._fromUser(v)),uu.get(v)}const Ea="__sak";class R{constructor(v,b){this.storageRetriever=v,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Ea,"1"),this.storage.removeItem(Ea),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,b){return this.storage.setItem(v,JSON.stringify(b)),Promise.resolve()}_get(v){const b=this.storage.getItem(v);return Promise.resolve(b?JSON.parse(b):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ve=(()=>{class A extends R{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,M)=>this.onStorageEvent(b,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $(){const A=(0,Y.z$)();return Q(A)||et(A)}()&&function Qs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Cn(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const M of Object.keys(this.listeners)){const q=this.storage.getItem(M),se=this.localCache[M];q!==se&&b(M,se,q)}}onStorageEvent(b,M=!1){if(!b.key)return void this.forAllChangedKeys((At,an,In)=>{this.notifyListeners(At,In)});const q=b.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const At=this.storage.getItem(q);if(b.newValue!==At)null!==b.newValue?this.storage.setItem(q,b.newValue):this.storage.removeItem(q);else if(this.localCache[q]===b.newValue&&!M)return}const se=()=>{const At=this.storage.getItem(q);!M&&this.localCache[q]===At||this.notifyListeners(q,At)},je=this.storage.getItem(q);!function Bt(){return(0,Y.w1)()&&10===document.documentMode}()||je===b.newValue||b.newValue===b.oldValue?se():setTimeout(se,10)}notifyListeners(b,M){this.localCache[b]=M;const q=this.listeners[b];if(q)for(const se of Array.from(q))se(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,M,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:M,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,M){var q=()=>super._set,se=this;return(0,T.Z)(function*(){yield q().call(se,b,M),se.localCache[b]=JSON.stringify(M)})()}_get(b){var M=()=>super._get,q=this;return(0,T.Z)(function*(){const se=yield M().call(q,b);return q.localCache[b]=JSON.stringify(se),se})()}_remove(b){var M=()=>super._remove,q=this;return(0,T.Z)(function*(){yield M().call(q,b),delete q.localCache[b]})()}}return A.type="LOCAL",A})(),un=(()=>{class A extends R{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,M){}_removeListener(b,M){}}return A.type="SESSION",A})();let lt=(()=>{class A{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const M=this.receivers.find(se=>se.isListeningto(b));if(M)return M;const q=new A(b);return this.receivers.push(q),q}isListeningto(b){return this.eventTarget===b}handleEvent(b){var M=this;return(0,T.Z)(function*(){const q=b,{eventId:se,eventType:je,data:At}=q.data,an=M.handlersMap[je];if(!an?.size)return;q.ports[0].postMessage({status:"ack",eventId:se,eventType:je});const In=Array.from(an).map(function(){var xi=(0,T.Z)(function*(gl){return gl(q.origin,At)});return function(gl){return xi.apply(this,arguments)}}()),nr=yield function _r(A){return Promise.all(A.map(function(){var v=(0,T.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(M){return{fulfilled:!1,reason:M}}});return function(b){return v.apply(this,arguments)}}()))}(In);q.ports[0].postMessage({status:"done",eventId:se,eventType:je,response:nr})})()}_subscribe(b,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(M)}_unsubscribe(b,M){this.handlersMap[b]&&M&&this.handlersMap[b].delete(M),(!M||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function dn(A="",v=10){let b="";for(let M=0;M<v;M++)b+=Math.floor(10*Math.random());return A+b}class jn{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,b,M=50){var q=this;return(0,T.Z)(function*(){const se=typeof MessageChannel<"u"?new MessageChannel:null;if(!se)throw new Error("connection_unavailable");let je,At;return new Promise((an,In)=>{const nr=dn("",20);se.port1.start();const xi=setTimeout(()=>{In(new Error("unsupported_event"))},M);At={messageChannel:se,onMessage(gl){const zo=gl;if(zo.data.eventId===nr)switch(zo.data.status){case"ack":clearTimeout(xi),je=setTimeout(()=>{In(new Error("timeout"))},3e3);break;case"done":clearTimeout(je),an(zo.data.response);break;default:clearTimeout(xi),clearTimeout(je),In(new Error("invalid_response"))}}},q.handlers.add(At),se.port1.addEventListener("message",At.onMessage),q.target.postMessage({eventType:v,eventId:nr,data:b},[se.port2])}).finally(()=>{At&&q.removeMessageHandler(At)})})()}}function zn(){return window}function Ft(){return typeof zn().WorkerGlobalScope<"u"&&"function"==typeof zn().importScripts}function St(){return(St=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Er="firebaseLocalStorageDb",ys=1,dl="firebaseLocalStorage",ja="fbase_key";class Bo{constructor(v){this.request=v}toPromise(){return new Promise((v,b)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function Da(A,v){return A.transaction([dl],v?"readwrite":"readonly").objectStore(dl)}function Vo(){const A=indexedDB.open(Er,ys);return new Promise((v,b)=>{A.addEventListener("error",()=>{b(A.error)}),A.addEventListener("upgradeneeded",()=>{const M=A.result;try{M.createObjectStore(dl,{keyPath:ja})}catch(q){b(q)}}),A.addEventListener("success",(0,T.Z)(function*(){const M=A.result;M.objectStoreNames.contains(dl)?v(M):(M.close(),yield function cd(){const A=indexedDB.deleteDatabase(Er);return new Bo(A).toPromise()}(),v(yield Vo()))}))})}function $u(A,v,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,T.Z)(function*(A,v,b){const M=Da(A,!0).put({[ja]:v,value:b});return new Bo(M).toPromise()})).apply(this,arguments)}function Tl(){return(Tl=(0,T.Z)(function*(A,v){const b=Da(A,!1).get(v),M=yield new Bo(b).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function On(A,v){const b=Da(A,!0).delete(v);return new Bo(b).toPromise()}const gn=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,T.Z)(function*(){return b.db||(b.db=yield Vo()),b.db})()}_withRetries(b){var M=this;return(0,T.Z)(function*(){let q=0;for(;;)try{const se=yield M._openDb();return yield b(se)}catch(se){if(q++>3)throw se;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,T.Z)(function*(){return Ft()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,T.Z)(function*(){b.receiver=lt._getInstance(function _t(){return Ft()?self:null}()),b.receiver._subscribe("keyChanged",function(){var M=(0,T.Z)(function*(q,se){return{keyProcessed:(yield b._poll()).includes(se.key)}});return function(q,se){return M.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var M=(0,T.Z)(function*(q,se){return["keyChanged"]});return function(q,se){return M.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,T.Z)(function*(){var M,q;if(b.activeServiceWorker=yield function Ai(){return St.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new jn(b.activeServiceWorker);const se=yield b.sender._send("ping",{},800);se&&null!==(M=se[0])&&void 0!==M&&M.fulfilled&&null!==(q=se[0])&&void 0!==q&&q.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var M=this;return(0,T.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function Ke(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:b},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const b=yield Vo();return yield $u(b,Ea,"1"),yield On(b,Ea),!0}catch{}return!1})()}_withPendingWrite(b){var M=this;return(0,T.Z)(function*(){M.pendingWrites++;try{yield b()}finally{M.pendingWrites--}})()}_set(b,M){var q=this;return(0,T.Z)(function*(){return q._withPendingWrite((0,T.Z)(function*(){return yield q._withRetries(se=>$u(se,b,M)),q.localCache[b]=M,q.notifyServiceWorker(b)}))})()}_get(b){var M=this;return(0,T.Z)(function*(){const q=yield M._withRetries(se=>function bo(A,v){return Tl.apply(this,arguments)}(se,b));return M.localCache[b]=q,q})()}_remove(b){var M=this;return(0,T.Z)(function*(){return M._withPendingWrite((0,T.Z)(function*(){return yield M._withRetries(q=>On(q,b)),delete M.localCache[b],M.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,T.Z)(function*(){const M=yield b._withRetries(je=>{const At=Da(je,!1).getAll();return new Bo(At).toPromise()});if(!M)return[];if(0!==b.pendingWrites)return[];const q=[],se=new Set;for(const{fbase_key:je,value:At}of M)se.add(je),JSON.stringify(b.localCache[je])!==JSON.stringify(At)&&(b.notifyListeners(je,At),q.push(je));for(const je of Object.keys(b.localCache))b.localCache[je]&&!se.has(je)&&(b.notifyListeners(je,null),q.push(je));return q})()}notifyListeners(b,M){this.localCache[b]=M;const q=this.listeners[b];if(q)for(const se of Array.from(q))se(M)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function Hn(){return(Hn=(0,T.Z)(function*(A){return(yield wt(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(A){return new Promise((v,b)=>{const M=document.createElement("script");M.setAttribute("src",A),M.onload=v,M.onerror=q=>{const se=ot("internal-error");se.customData=q,b(se)},M.type="text/javascript",M.charset="UTF-8",function zt(){var A,v;return null!==(v=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==v?v:document}().appendChild(M)})}function vs(A){return`__${A}${Math.floor(1e6*Math.random())}`}const Nr=1e12;class Gl{constructor(v){this.auth=v,this.counter=Nr,this._widgets=new Map}render(v,b){const M=this.counter;return this._widgets.set(M,new Gi(v,this.auth.name,b||{})),this.counter++,M}reset(v){var b;const M=v||Nr;null===(b=this._widgets.get(M))||void 0===b||b.delete(),this._widgets.delete(M)}getResponse(v){var b;return(null===(b=this._widgets.get(v||Nr))||void 0===b?void 0:b.getResponse())||""}execute(v){var b=this;return(0,T.Z)(function*(){var M;return null===(M=b._widgets.get(v||Nr))||void 0===M||M.execute(),""})()}}class Gi{constructor(v,b,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof v?document.getElementById(v):v;Se(q,"argument-error",{appName:b}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zu(A){const v=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<A;M++)v.push(b.charAt(Math.floor(Math.random()*b.length)));return v.join("")}(50);const{callback:v,"expired-callback":b}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wa=vs("rcb"),Oi=new st(3e4,6e4);class Wu{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=zn().grecaptcha)||void 0===v||!v.render)}load(v,b=""){return Se(function js(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(b),v,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(zn().grecaptcha):new Promise((M,q)=>{const se=zn().setTimeout(()=>{q(ot(v,"network-request-failed"))},Oi.get());zn()[Wa]=()=>{zn().clearTimeout(se),delete zn()[Wa];const At=zn().grecaptcha;if(!At)return void q(ot(v,"internal-error"));const an=At.render;At.render=(In,nr)=>{const xi=an(In,nr);return this.counter++,xi},this.hostLanguage=b,M(At)},wo(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Wa,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(se),q(ot(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var b;return!(null===(b=zn().grecaptcha)||void 0===b||!b.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hs{load(v){return(0,T.Z)(function*(){return new Gl(v)})()}clearedOneInstance(){}}const Go="recaptcha",Qe={theme:"light",type:"image"};class ta{constructor(v,b=Object.assign({},Qe),M){this.parameters=b,this.type=Go,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qr(M),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof v?document.getElementById(v):v;Se(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hs:new Wu,this.validateStartingState()}verify(){var v=this;return(0,T.Z)(function*(){v.assertNotDestroyed();const b=yield v.render(),M=v.getAssertedRecaptcha();return M.getResponse(b)||new Promise(se=>{const je=At=>{At&&(v.tokenChangeListeners.delete(je),se(At))};v.tokenChangeListeners.add(je),v.isInvisible&&M.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return b=>{if(this.tokenChangeListeners.forEach(M=>M(b)),"function"==typeof v)v(b);else if("string"==typeof v){const M=zn()[v];"function"==typeof M&&M(b)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,T.Z)(function*(){if(yield v.init(),!v.widgetId){let b=v.container;if(!v.isInvisible){const M=document.createElement("div");b.appendChild(M),b=M}v.widgetId=v.getAssertedRecaptcha().render(b,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,T.Z)(function*(){Se(nt()&&!Ft(),v.auth,"internal-error"),yield function Eo(){let A=null;return new Promise(v=>{"complete"!==document.readyState?(A=()=>v(),window.addEventListener("load",A)):v()}).catch(v=>{throw A&&window.removeEventListener("load",A),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const b=yield function $a(A){return Hn.apply(this,arguments)}(v.auth);Se(b,v.auth,"internal-error"),v.parameters.sitekey=b})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ca{constructor(v,b){this.verificationId=v,this.onConfirmation=b}confirm(v){const b=gr._fromVerification(this.verificationId,v);return this.onConfirmation(b)}}function Ku(A,v,b){return bs.apply(this,arguments)}function bs(){return(bs=(0,T.Z)(function*(A,v,b){const M=Qr(A),q=yield hl(M,v,(0,Y.m9)(b));return new Ca(q,se=>_s(M,se))})).apply(this,arguments)}function $r(A,v,b){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);yield Js(!1,M,"phone");const q=yield hl(M.auth,v,(0,Y.m9)(b));return new Ca(q,se=>rl(M,se))})).apply(this,arguments)}function _h(A,v,b){return hu.apply(this,arguments)}function hu(){return(hu=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q=yield hl(M.auth,v,(0,Y.m9)(b));return new Ca(q,se=>Ur(M,se))})).apply(this,arguments)}function hl(A,v,b){return dd.apply(this,arguments)}function dd(){return dd=(0,T.Z)(function*(A,v,b){var M;const q=yield b.verify();try{let se;if(Se("string"==typeof q,A,"argument-error"),Se(b.type===Go,A,"argument-error"),se="string"==typeof v?{phoneNumber:v}:v,"session"in se){const je=se.session;if("phoneNumber"in se)return Se("enroll"===je.type,A,"internal-error"),(yield function ui(A,v){return wt(A,"POST","/v2/accounts/mfaEnrollment:start",$t(A,v))}(A,{idToken:je.credential,phoneEnrollmentInfo:{phoneNumber:se.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{Se("signin"===je.type,A,"internal-error");const At=(null===(M=se.multiFactorHint)||void 0===M?void 0:M.uid)||se.multiFactorUid;return Se(At,A,"missing-multi-factor-info"),(yield function Ha(A,v){return wt(A,"POST","/v2/accounts/mfaSignIn:start",$t(A,v))}(A,{mfaPendingCredential:je.credential,mfaEnrollmentId:At,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:je}=yield function Be(A,v){return ht.apply(this,arguments)}(A,{phoneNumber:se.phoneNumber,recaptchaToken:q});return je}}finally{b._reset()}}),dd.apply(this,arguments)}function Xi(A,v){return qu.apply(this,arguments)}function qu(){return(qu=(0,T.Z)(function*(A,v){yield Ns((0,Y.m9)(A),v)})).apply(this,arguments)}let Ka=(()=>{class A{constructor(b){this.providerId=A.PROVIDER_ID,this.auth=Qr(b)}verifyPhoneNumber(b,M){return hl(this.auth,b,(0,Y.m9)(M))}static credential(b,M){return gr._fromVerification(b,M)}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:M,temporaryProof:q}=b;return M&&q?gr._fromTokenResponse(M,q):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function fl(A,v){return v?vt(v):(Se(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class fu extends Ui{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return bi(v,this._buildIdpRequest())}_linkToIdToken(v,b){return bi(v,this._buildIdpRequest(b))}_getReauthenticationResolver(v){return bi(v,this._buildIdpRequest())}_buildIdpRequest(v){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(b.idToken=v),b}}function qr(A){return su(A.auth,new fu(A),A.bypassAuthState)}function Sl(A){const{auth:v,user:b}=A;return Se(b,v,"internal-error"),kl(b,new fu(A),A.bypassAuthState)}function no(A){return Al.apply(this,arguments)}function Al(){return(Al=(0,T.Z)(function*(A){const{auth:v,user:b}=A;return Se(b,v,"internal-error"),Ns(b,new fu(A),A.bypassAuthState)})).apply(this,arguments)}class Ri{constructor(v,b,M,q,se=!1){this.auth=v,this.resolver=M,this.user=q,this.bypassAuthState=se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var v=this;return new Promise(function(){var b=(0,T.Z)(function*(M,q){v.pendingPromise={resolve:M,reject:q};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(se){v.reject(se)}});return function(M,q){return b.apply(this,arguments)}}())}onAuthEvent(v){var b=this;return(0,T.Z)(function*(){const{urlResponse:M,sessionId:q,postBody:se,tenantId:je,error:At,type:an}=v;if(At)return void b.reject(At);const In={auth:b.auth,requestUri:M,sessionId:q,tenantId:je||void 0,postBody:se||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(an)(In))}catch(nr){b.reject(nr)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return qr;case"linkViaPopup":case"linkViaRedirect":return no;case"reauthViaPopup":case"reauthViaRedirect":return Sl;default:ut(this.auth,"internal-error")}}resolve(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ro=new st(2e3,1e4);function pu(A,v,b){return C.apply(this,arguments)}function C(){return(C=(0,T.Z)(function*(A,v,b){const M=Qr(A);qe(A,v,gs);const q=fl(M,b);return new K(M,"signInViaPopup",v,q).executeNotNull()})).apply(this,arguments)}function S(A,v,b){return E.apply(this,arguments)}function E(){return(E=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);qe(M.auth,v,gs);const q=fl(M.auth,b);return new K(M.auth,"reauthViaPopup",v,q,M).executeNotNull()})).apply(this,arguments)}function x(A,v,b){return V.apply(this,arguments)}function V(){return(V=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);qe(M.auth,v,gs);const q=fl(M.auth,b);return new K(M.auth,"linkViaPopup",v,q,M).executeNotNull()})).apply(this,arguments)}let K=(()=>{class A extends Ri{constructor(b,M,q,se,je){super(b,M,se,je),this.provider=q,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var b=this;return(0,T.Z)(function*(){const M=yield b.execute();return Se(M,b.auth,"internal-error"),M})()}onExecution(){var b=this;return(0,T.Z)(function*(){tt(1===b.filter.length,"Popup operations only handle one event");const M=dn();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],M),b.authWindow.associatedEvent=M,b.resolver._originValidation(b.auth).catch(q=>{b.reject(q)}),b.resolver._isIframeWebStorageSupported(b.auth,q=>{q||b.reject(ot(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const b=()=>{var M,q;this.pollId=null!==(q=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==q&&q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ot(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,ro.get())};b()}}return A.currentPopupAction=null,A})();const ee="pendingRedirect",Ne=new Map;class yt extends Ri{constructor(v,b,M=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,M),this.eventId=null}execute(){var v=()=>super.execute,b=this;return(0,T.Z)(function*(){let M=Ne.get(b.auth._key());if(!M){try{const se=(yield function Yt(A,v){return qt.apply(this,arguments)}(b.resolver,b.auth))?yield v().call(b):null;M=()=>Promise.resolve(se)}catch(q){M=()=>Promise.reject(q)}Ne.set(b.auth._key(),M)}return b.bypassAuthState||Ne.set(b.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(v){var b=()=>super.onAuthEvent,M=this;return(0,T.Z)(function*(){if("signInViaRedirect"===v.type)return b().call(M,v);if("unknown"!==v.type){if(v.eventId){const q=yield M.auth._redirectUserForId(v.eventId);if(q)return M.user=q,b().call(M,v);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function qt(){return(qt=(0,T.Z)(function*(A,v){const b=Ws(v),M=zs(A);if(!(yield M._isAvailable()))return!1;const q="true"===(yield M._get(b));return yield M._remove(b),q})).apply(this,arguments)}function qn(A,v){return ei.apply(this,arguments)}function ei(){return(ei=(0,T.Z)(function*(A,v){return zs(A)._set(Ws(v),"true")})).apply(this,arguments)}function _i(){Ne.clear()}function $s(A,v){Ne.set(A._key(),v)}function zs(A){return vt(A._redirectPersistence)}function Ws(A){return ve(ee,A.config.apiKey,A.name)}function Ol(A,v,b){return function pl(A,v,b){return jo.apply(this,arguments)}(A,v,b)}function jo(){return(jo=(0,T.Z)(function*(A,v,b){const M=Qr(A);qe(A,v,gs),yield M._initializationPromise;const q=fl(M,b);return yield qn(q,M),q._openRedirect(M,v,"signInViaRedirect")})).apply(this,arguments)}function F(A,v,b){return function G(A,v,b){return Z.apply(this,arguments)}(A,v,b)}function Z(){return(Z=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);qe(M.auth,v,gs),yield M.auth._initializationPromise;const q=fl(M.auth,b);yield qn(q,M.auth);const se=yield Qn(M);return q._openRedirect(M.auth,v,"reauthViaRedirect",se)})).apply(this,arguments)}function fe(A,v,b){return function ke(A,v,b){return $e.apply(this,arguments)}(A,v,b)}function $e(){return($e=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);qe(M.auth,v,gs),yield M.auth._initializationPromise;const q=fl(M.auth,b);yield Js(!1,M,v.providerId),yield qn(q,M.auth);const se=yield Qn(M);return q._openRedirect(M.auth,v,"linkViaRedirect",se)})).apply(this,arguments)}function Ot(A,v){return hn.apply(this,arguments)}function hn(){return(hn=(0,T.Z)(function*(A,v){return yield Qr(A)._initializationPromise,bn(A,v,!1)})).apply(this,arguments)}function bn(A,v){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,T.Z)(function*(A,v,b=!1){const M=Qr(A),q=fl(M,v),je=yield new yt(M,q,b).execute();return je&&!b&&(delete je.user._redirectEventId,yield M._persistUserIfCurrent(je.user),yield M._setRedirectUser(null,v)),je})).apply(this,arguments)}function Qn(A){return wn.apply(this,arguments)}function wn(){return(wn=(0,T.Z)(function*(A){const v=dn(`${A.uid}:::`);return A._redirectEventId=v,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),v})).apply(this,arguments)}class ws{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let b=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(v,M)&&(b=!0,this.sendToConsumer(v,M),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Mr(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dr(A);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=v,b=!0)),b}sendToConsumer(v,b){var M;if(v.error&&!dr(v)){const q=(null===(M=v.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";b.onError(ot(this.auth,q))}else b.onAuthEvent(v)}isEventForConsumer(v,b){const M=null===b.eventId||!!v.eventId&&v.eventId===b.eventId;return b.filter.includes(v.type)&&M}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jl(v))}saveEventToCache(v){this.cachedEventUids.add(jl(v)),this.lastProcessedEventTime=Date.now()}}function jl(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(v=>v).join("-")}function dr({type:A,error:v}){return"unknown"===A&&"auth/no-auth-event"===v?.code}function Ms(A){return na.apply(this,arguments)}function na(){return(na=(0,T.Z)(function*(A,v={}){return wt(A,"GET","/v1/projects",v)})).apply(this,arguments)}const Cc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hd=/^https?/;function vh(){return(vh=(0,T.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:v}=yield Ms(A);for(const b of v)try{if(kf(b))return}catch{}ut(A,"unauthorized-domain")})).apply(this,arguments)}function kf(A){const v=Ue(),{protocol:b,hostname:M}=new URL(v);if(A.startsWith("chrome-extension://")){const je=new URL(A);return""===je.hostname&&""===M?"chrome-extension:"===b&&A.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===b&&je.hostname===M}if(!hd.test(b))return!1;if(Cc.test(A))return M===A;const q=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(M)}const qm=new st(3e4,6e4);function Ff(){const A=zn().___jsl;if(A?.H)for(const v of Object.keys(A.H))if(A.H[v].r=A.H[v].r||[],A.H[v].L=A.H[v].L||[],A.H[v].r=[...A.H[v].L],A.CP)for(let b=0;b<A.CP.length;b++)A.CP[b]=null}let bh=null;const Tc=new st(5e3,15e3),Ym="__/auth/iframe",Zy="emulator/auth/iframe",Lf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qy(A){const v=A.config;Se(v.authDomain,A,"auth-domain-config-required");const b=v.emulator?kt(v,Zy):`https://${A.config.authDomain}/${Ym}`,M={apiKey:v.apiKey,appName:A.name,v:h.SDK_VERSION},q=fd.get(A.config.apiHost);q&&(M.eid=q);const se=A._getFrameworks();return se.length&&(M.fw=se.join(",")),`${b}?${(0,Y.xO)(M).slice(1)}`}function pd(){return pd=(0,T.Z)(function*(A){const v=yield function tg(A){return bh=bh||function Yy(A){return new Promise((v,b)=>{var M,q,se;function je(){Ff(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{Ff(),b(ot(A,"network-request-failed"))},timeout:qm.get()})}if(null!==(q=null===(M=zn().gapi)||void 0===M?void 0:M.iframes)&&void 0!==q&&q.Iframe)v(gapi.iframes.getContext());else{if(null===(se=zn().gapi)||void 0===se||!se.load){const At=vs("iframefcb");return zn()[At]=()=>{gapi.load?je():b(ot(A,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${At}`).catch(an=>b(an))}je()}}).catch(v=>{throw bh=null,v})}(A),bh}(A),b=zn().gapi;return Se(b,A,"internal-error"),v.open({where:document.body,url:Qy(A),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lf,dontclear:!0},M=>new Promise(function(){var q=(0,T.Z)(function*(se,je){yield M.restyle({setHideOnLeave:!1});const At=ot(A,"network-request-failed"),an=zn().setTimeout(()=>{je(At)},Tc.get());function In(){zn().clearTimeout(an),se(M)}M.ping(In).then(In,()=>{je(At)})});return function(se,je){return q.apply(this,arguments)}}()))}),pd.apply(this,arguments)}const Do={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ci=500,Uf=600,gu="_blank",$o="http://localhost";class Es{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Zm="__/auth/handler",Vf="emulator/auth/handler";function Hl(A,v,b,M,q,se){Se(A.config.authDomain,A,"auth-domain-config-required"),Se(A.config.apiKey,A,"invalid-api-key");const je={apiKey:A.config.apiKey,appName:A.name,authType:b,redirectUrl:M,v:h.SDK_VERSION,eventId:q};if(v instanceof gs){v.setDefaultLanguage(A.languageCode),je.providerId=v.providerId||"",(0,Y.xb)(v.getCustomParameters())||(je.customParameters=JSON.stringify(v.getCustomParameters()));for(const[an,In]of Object.entries(se||{}))je[an]=In}if(v instanceof da){const an=v.getScopes().filter(In=>""!==In);an.length>0&&(je.scopes=an.join(","))}A.tenantId&&(je.tid=A.tenantId);const At=je;for(const an of Object.keys(At))void 0===At[an]&&delete At[an];return`${function Sc({config:A}){return A.emulator?kt(A,Vf):`https://${A.authDomain}/${Zm}`}(A)}?${(0,Y.xO)(At).slice(1)}`}const mu="webStorageSupport",Gf=class wh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=un,this._completeRedirectFn=bn,this._overrideRedirectResult=$s}_openPopup(v,b,M,q){var se=this;return(0,T.Z)(function*(){var je;tt(null===(je=se.eventManagers[v._key()])||void 0===je?void 0:je.manager,"_initialize() not called before _openPopup()");const At=Hl(v,b,M,Ue(),q);return function Bf(A,v,b,M=ci,q=Uf){const se=Math.max((window.screen.availHeight-q)/2,0).toString(),je=Math.max((window.screen.availWidth-M)/2,0).toString();let At="";const an=Object.assign(Object.assign({},Do),{width:M.toString(),height:q.toString(),top:se,left:je}),In=(0,Y.z$)().toLowerCase();b&&(At=xe(In)?gu:b),re(In)&&(v=v||$o,an.scrollbars="yes");const nr=Object.entries(an).reduce((gl,[zo,Ya])=>`${gl}${zo}=${Ya},`,"");if(function en(A=(0,Y.z$)()){var v;return et(A)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(In)&&"_self"!==At)return function Rr(A,v){const b=document.createElement("a");b.href=A,b.target=v;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(M)}(v||"",At),new Es(null);const xi=window.open(v||"",At,nr);Se(xi,A,"popup-blocked");try{xi.focus()}catch{}return new Es(xi)}(v,At,dn())})()}_openRedirect(v,b,M,q){var se=this;return(0,T.Z)(function*(){return yield se._originValidation(v),function Ct(A){zn().location.href=A}(Hl(v,b,M,Ue(),q)),new Promise(()=>{})})()}_initialize(v){const b=v._key();if(this.eventManagers[b]){const{manager:q,promise:se}=this.eventManagers[b];return q?Promise.resolve(q):(tt(se,"If manager is not set, promise should be"),se)}const M=this.initAndGetManager(v);return this.eventManagers[b]={promise:M},M.catch(()=>{delete this.eventManagers[b]}),M}initAndGetManager(v){var b=this;return(0,T.Z)(function*(){const M=yield function ls(A){return pd.apply(this,arguments)}(v),q=new ws(v);return M.register("authEvent",se=>(Se(se?.authEvent,v,"invalid-auth-event"),{status:q.onEvent(se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[v._key()]={manager:q},b.iframes[v._key()]=M,q})()}_isIframeWebStorageSupported(v,b){this.iframes[v._key()].send(mu,{type:mu},q=>{var se;const je=null===(se=q?.[0])||void 0===se?void 0:se[mu];void 0!==je&&b(!!je),ut(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function yh(A){return vh.apply(this,arguments)}(v)),this.originValidationPromises[b]}get _shouldInitProactively(){return Cn()||Q()||et()}};class ng{constructor(v){this.factorId=v}_process(v,b,M){switch(b.type){case"enroll":return this._finalizeEnroll(v,b.credential,M);case"signin":return this._finalizeSignIn(v,b.credential);default:return Ie("unexpected MultiFactorSessionType")}}}class qa extends ng{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new qa(v)}_finalizeEnroll(v,b,M){return function Ic(A,v){return wt(A,"POST","/v2/accounts/mfaEnrollment:finalize",$t(A,v))}(v,{idToken:b,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,b){return function kn(A,v){return wt(A,"POST","/v2/accounts/mfaSignIn:finalize",$t(A,v))}(v,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rg=(()=>{class A{constructor(){}static assertion(b){return qa._fromCredential(b)}}return A.FACTOR_ID="phone",A})();var Yu="@firebase/auth";class gd{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var b=this;return(0,T.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const b=this.auth.onIdTokenChanged(M=>{v(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,b),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const b=this.internalListeners.get(v);b&&(this.internalListeners.delete(v),b(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,Y.Pz)("authIdTokenMaxAge"),function _d(A){(0,h._registerComponent)(new Ce.wA("auth",(v,{options:b})=>{const M=v.getProvider("app").getImmediate(),q=v.getProvider("heartbeat"),{apiKey:se,authDomain:je}=M.options;return((At,an)=>{Se(se&&!se.includes(":"),"invalid-api-key",{appName:At.name}),Se(!je?.includes(":"),"argument-error",{appName:At.name});const In={apiKey:se,authDomain:je,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:os(A)},nr=new qo(At,an,In);return function Pt(A,v){const b=v?.persistence||[],M=(Array.isArray(b)?b:[b]).map(vt);v?.errorMap&&A._updateErrorMap(v.errorMap),A._initializeWithPersistence(M,v?.popupRedirectResolver)}(nr,b),nr})(M,q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,b,M)=>{v.getProvider("auth-internal").initialize()})),(0,h._registerComponent)(new Ce.wA("auth-internal",v=>{const b=Qr(v.getProvider("auth").getImmediate());return new gd(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,h.registerVersion)(Yu,"0.21.5",function md(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,h.registerVersion)(Yu,"0.21.5","esm2017")}("Browser")},2090:(Wt,ze,j)=>{j.d(ze,{$s:()=>rn,BH:()=>qe,DV:()=>er,Dv:()=>ln,G6:()=>rt,GJ:()=>Fn,L:()=>De,LL:()=>Gt,Pz:()=>Xe,Sg:()=>Mt,UG:()=>tt,UI:()=>Xt,US:()=>Ce,Wj:()=>yr,Wl:()=>Rn,Yr:()=>We,ZB:()=>Te,ZR:()=>on,aH:()=>ot,b$:()=>Kt,cI:()=>En,dS:()=>Kr,eu:()=>st,g5:()=>h,gK:()=>Ir,gQ:()=>ni,h$:()=>Re,hl:()=>ct,hu:()=>Y,jU:()=>it,lb:()=>pn,m9:()=>cr,ne:()=>yn,p$:()=>de,pd:()=>Yr,r3:()=>Nn,ru:()=>vt,tV:()=>pe,uI:()=>Ie,ug:()=>xn,vZ:()=>Sn,w1:()=>Ue,w9:()=>Zn,xO:()=>fi,xb:()=>tr,z$:()=>Se,zI:()=>kt,zd:()=>kr});const T={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Y=function(ve,me){if(!ve)throw h(me)},h=function(ve){return new Error("Firebase Database ("+T.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ve)},ye=function(ve){const me=[];let te=0;for(let re=0;re<ve.length;re++){let Q=ve.charCodeAt(re);Q<128?me[te++]=Q:Q<2048?(me[te++]=Q>>6|192,me[te++]=63&Q|128):55296==(64512&Q)&&re+1<ve.length&&56320==(64512&ve.charCodeAt(re+1))?(Q=65536+((1023&Q)<<10)+(1023&ve.charCodeAt(++re)),me[te++]=Q>>18|240,me[te++]=Q>>12&63|128,me[te++]=Q>>6&63|128,me[te++]=63&Q|128):(me[te++]=Q>>12|224,me[te++]=Q>>6&63|128,me[te++]=63&Q|128)}return me},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ve,me){if(!Array.isArray(ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=me?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let Q=0;Q<ve.length;Q+=3){const xe=ve[Q],ae=Q+1<ve.length,he=ae?ve[Q+1]:0,oe=Q+2<ve.length,Oe=oe?ve[Q+2]:0;let en=(15&he)<<2|Oe>>6,Bt=63&Oe;oe||(Bt=64,ae||(en=64)),re.push(te[xe>>2],te[(3&xe)<<4|he>>4],te[en],te[Bt])}return re.join("")},encodeString(ve,me){return this.HAS_NATIVE_SUPPORT&&!me?btoa(ve):this.encodeByteArray(ye(ve),me)},decodeString(ve,me){return this.HAS_NATIVE_SUPPORT&&!me?atob(ve):function(ve){const me=[];let te=0,re=0;for(;te<ve.length;){const Q=ve[te++];if(Q<128)me[re++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const xe=ve[te++];me[re++]=String.fromCharCode((31&Q)<<6|63&xe)}else if(Q>239&&Q<365){const oe=((7&Q)<<18|(63&ve[te++])<<12|(63&ve[te++])<<6|63&ve[te++])-65536;me[re++]=String.fromCharCode(55296+(oe>>10)),me[re++]=String.fromCharCode(56320+(1023&oe))}else{const xe=ve[te++],ae=ve[te++];me[re++]=String.fromCharCode((15&Q)<<12|(63&xe)<<6|63&ae)}}return me.join("")}(this.decodeStringToByteArray(ve,me))},decodeStringToByteArray(ve,me){this.init_();const te=me?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let Q=0;Q<ve.length;){const xe=te[ve.charAt(Q++)],he=Q<ve.length?te[ve.charAt(Q)]:0;++Q;const Oe=Q<ve.length?te[ve.charAt(Q)]:64;++Q;const pt=Q<ve.length?te[ve.charAt(Q)]:64;if(++Q,null==xe||null==he||null==Oe||null==pt)throw new Fe;re.push(xe<<2|he>>4),64!==Oe&&(re.push(he<<4&240|Oe>>2),64!==pt&&re.push(Oe<<6&192|pt))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ve=0;ve<this.ENCODED_VALS.length;ve++)this.byteToCharMap_[ve]=this.ENCODED_VALS.charAt(ve),this.charToByteMap_[this.byteToCharMap_[ve]]=ve,this.byteToCharMapWebSafe_[ve]=this.ENCODED_VALS_WEBSAFE.charAt(ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ve]]=ve,ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ve)]=ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ve)]=ve)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(ve){const me=ye(ve);return Ce.encodeByteArray(me,!0)},De=function(ve){return Re(ve).replace(/\./g,"")},pe=function(ve){try{return Ce.decodeString(ve,!0)}catch(me){console.error("base64Decode failed: ",me)}return null};function de(ve){return Te(void 0,ve)}function Te(ve,me){if(!(me instanceof Object))return me;switch(me.constructor){case Date:return new Date(me.getTime());case Object:void 0===ve&&(ve={});break;case Array:ve=[];break;default:return me}for(const te in me)!me.hasOwnProperty(te)||!Ye(te)||(ve[te]=Te(ve[te],me[te]));return ve}function Ye(ve){return"__proto__"!==ve}const at=()=>{try{return function Je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ve=process.env.__FIREBASE_DEFAULTS__;return ve?JSON.parse(ve):void 0})()||(()=>{if(typeof document>"u")return;let ve;try{ve=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const me=ve&&pe(ve[1]);return me&&JSON.parse(me)})()}catch(ve){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ve}`)}},ot=()=>{var ve;return null===(ve=at())||void 0===ve?void 0:ve.config},Xe=ve=>{var me;return null===(me=at())||void 0===me?void 0:me[`_${ve}`]};class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((me,te)=>{this.resolve=me,this.reject=te})}wrapCallback(me){return(te,re)=>{te?this.reject(te):this.resolve(re),"function"==typeof me&&(this.promise.catch(()=>{}),1===me.length?me(te):me(te,re))}}}function Mt(ve,me){if(ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=me||"demo-project",Q=ve.iat||0,xe=ve.sub||ve.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ae=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:Q,exp:Q+3600,auth_time:Q,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},ve);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(ae)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function tt(){var ve;const me=null===(ve=at())||void 0===ve?void 0:ve.forceEnvironment;if("node"===me)return!0;if("browser"===me)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function vt(){const ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ve&&void 0!==ve.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ue(){const ve=Se();return ve.indexOf("MSIE ")>=0||ve.indexOf("Trident/")>=0}function We(){return!0===T.NODE_CLIENT||!0===T.NODE_ADMIN}function rt(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ct(){try{return"object"==typeof indexedDB}catch{return!1}}function st(){return new Promise((ve,me)=>{try{let te=!0;const re="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(re);Q.onsuccess=()=>{Q.result.close(),te||self.indexedDB.deleteDatabase(re),ve(!0)},Q.onupgradeneeded=()=>{te=!1},Q.onerror=()=>{var xe;me((null===(xe=Q.error)||void 0===xe?void 0:xe.message)||"")}}catch(te){me(te)}})}function kt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class on extends Error{constructor(me,te,re){super(te),this.code=me,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,on.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(me,te,re){this.service=me,this.serviceName=te,this.errors=re}create(me,...te){const re=te[0]||{},Q=`${this.service}/${me}`,xe=this.errors[me],ae=xe?function $t(ve,me){return ve.replace(wt,(te,re)=>{const Q=me[re];return null!=Q?String(Q):`<${re}?>`})}(xe,re):"Error";return new on(Q,`${this.serviceName}: ${ae} (${Q}).`,re)}}const wt=/\{\$([^}]+)}/g;function En(ve){return JSON.parse(ve)}function Rn(ve){return JSON.stringify(ve)}const Vn=function(ve){let me={},te={},re={},Q="";try{const xe=ve.split(".");me=En(pe(xe[0])||""),te=En(pe(xe[1])||""),Q=xe[2],re=te.d||{},delete te.d}catch{}return{header:me,claims:te,data:re,signature:Q}},Zn=function(ve){const te=Vn(ve).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Fn=function(ve){const me=Vn(ve).claims;return"object"==typeof me&&!0===me.admin};function Nn(ve,me){return Object.prototype.hasOwnProperty.call(ve,me)}function er(ve,me){if(Object.prototype.hasOwnProperty.call(ve,me))return ve[me]}function tr(ve){for(const me in ve)if(Object.prototype.hasOwnProperty.call(ve,me))return!1;return!0}function Xt(ve,me,te){const re={};for(const Q in ve)Object.prototype.hasOwnProperty.call(ve,Q)&&(re[Q]=me.call(te,ve[Q],Q,ve));return re}function Sn(ve,me){if(ve===me)return!0;const te=Object.keys(ve),re=Object.keys(me);for(const Q of te){if(!re.includes(Q))return!1;const xe=ve[Q],ae=me[Q];if(Ut(xe)&&Ut(ae)){if(!Sn(xe,ae))return!1}else if(xe!==ae)return!1}for(const Q of re)if(!te.includes(Q))return!1;return!0}function Ut(ve){return null!==ve&&"object"==typeof ve}function fi(ve){const me=[];for(const[te,re]of Object.entries(ve))Array.isArray(re)?re.forEach(Q=>{me.push(encodeURIComponent(te)+"="+encodeURIComponent(Q))}):me.push(encodeURIComponent(te)+"="+encodeURIComponent(re));return me.length?"&"+me.join("&"):""}function kr(ve){const me={};return ve.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[Q,xe]=re.split("=");me[decodeURIComponent(Q)]=decodeURIComponent(xe)}}),me}function Yr(ve){const me=ve.indexOf("?");if(!me)return"";const te=ve.indexOf("#",me);return ve.substring(me,te>0?te:void 0)}class ni{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let me=1;me<this.blockSize;++me)this.pad_[me]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(me,te){te||(te=0);const re=this.W_;if("string"==typeof me)for(let pt=0;pt<16;pt++)re[pt]=me.charCodeAt(te)<<24|me.charCodeAt(te+1)<<16|me.charCodeAt(te+2)<<8|me.charCodeAt(te+3),te+=4;else for(let pt=0;pt<16;pt++)re[pt]=me[te]<<24|me[te+1]<<16|me[te+2]<<8|me[te+3],te+=4;for(let pt=16;pt<80;pt++){const en=re[pt-3]^re[pt-8]^re[pt-14]^re[pt-16];re[pt]=4294967295&(en<<1|en>>>31)}let Oe,et,Q=this.chain_[0],xe=this.chain_[1],ae=this.chain_[2],he=this.chain_[3],oe=this.chain_[4];for(let pt=0;pt<80;pt++){pt<40?pt<20?(Oe=he^xe&(ae^he),et=1518500249):(Oe=xe^ae^he,et=1859775393):pt<60?(Oe=xe&ae|he&(xe|ae),et=2400959708):(Oe=xe^ae^he,et=3395469782);const en=(Q<<5|Q>>>27)+Oe+oe+et+re[pt]&4294967295;oe=he,he=ae,ae=4294967295&(xe<<30|xe>>>2),xe=Q,Q=en}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+ae&4294967295,this.chain_[3]=this.chain_[3]+he&4294967295,this.chain_[4]=this.chain_[4]+oe&4294967295}update(me,te){if(null==me)return;void 0===te&&(te=me.length);const re=te-this.blockSize;let Q=0;const xe=this.buf_;let ae=this.inbuf_;for(;Q<te;){if(0===ae)for(;Q<=re;)this.compress_(me,Q),Q+=this.blockSize;if("string"==typeof me){for(;Q<te;)if(xe[ae]=me.charCodeAt(Q),++ae,++Q,ae===this.blockSize){this.compress_(xe),ae=0;break}}else for(;Q<te;)if(xe[ae]=me[Q],++ae,++Q,ae===this.blockSize){this.compress_(xe),ae=0;break}}this.inbuf_=ae,this.total_+=te}digest(){const me=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&te,te/=256;this.compress_(this.buf_);let re=0;for(let Q=0;Q<5;Q++)for(let xe=24;xe>=0;xe-=8)me[re]=this.chain_[Q]>>xe&255,++re;return me}}function yn(ve,me){const te=new nn(ve,me);return te.subscribe.bind(te)}class nn{constructor(me,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{me(this)}).catch(re=>{this.error(re)})}next(me){this.forEachObserver(te=>{te.next(me)})}error(me){this.forEachObserver(te=>{te.error(me)}),this.close(me)}complete(){this.forEachObserver(me=>{me.complete()}),this.close()}subscribe(me,te,re){let Q;if(void 0===me&&void 0===te&&void 0===re)throw new Error("Missing Observer.");Q=function rr(ve,me){if("object"!=typeof ve||null===ve)return!1;for(const te of me)if(te in ve&&"function"==typeof ve[te])return!0;return!1}(me,["next","error","complete"])?me:{next:me,error:te,complete:re},void 0===Q.next&&(Q.next=or),void 0===Q.error&&(Q.error=or),void 0===Q.complete&&(Q.complete=or);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),xe}unsubscribeOne(me){void 0===this.observers||void 0===this.observers[me]||(delete this.observers[me],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(me){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,me)}sendOne(me,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[me])try{te(this.observers[me])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(me){this.finalized||(this.finalized=!0,void 0!==me&&(this.finalError=me),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function or(){}const ln=function(ve,me,te,re){let Q;if(re<me?Q="at least "+me:re>te&&(Q=0===te?"none":"no more than "+te),Q)throw new Error(ve+" failed: Was called with "+re+(1===re?" argument.":" arguments.")+" Expects "+Q+".")};function Ir(ve,me){return`${ve} failed: ${me} argument `}function yr(ve,me,te,re){if((!re||te)&&"function"!=typeof te)throw new Error(Ir(ve,me)+"must be a valid function.")}function pn(ve,me,te,re){if((!re||te)&&("object"!=typeof te||null===te))throw new Error(Ir(ve,me)+"must be a valid context object.")}const Kr=function(ve){const me=[];let te=0;for(let re=0;re<ve.length;re++){let Q=ve.charCodeAt(re);if(Q>=55296&&Q<=56319){const xe=Q-55296;re++,Y(re<ve.length,"Surrogate pair missing trail surrogate."),Q=65536+(xe<<10)+(ve.charCodeAt(re)-56320)}Q<128?me[te++]=Q:Q<2048?(me[te++]=Q>>6|192,me[te++]=63&Q|128):Q<65536?(me[te++]=Q>>12|224,me[te++]=Q>>6&63|128,me[te++]=63&Q|128):(me[te++]=Q>>18|240,me[te++]=Q>>12&63|128,me[te++]=Q>>6&63|128,me[te++]=63&Q|128)}return me},xn=function(ve){let me=0;for(let te=0;te<ve.length;te++){const re=ve.charCodeAt(te);re<128?me++:re<2048?me+=2:re>=55296&&re<=56319?(me+=4,te++):me+=3}return me},Cr=1e3,Rt=2,ft=144e5,Ht=.5;function rn(ve,me=Cr,te=Rt){const re=me*Math.pow(te,ve),Q=Math.round(Ht*re*(Math.random()-.5)*2);return Math.min(ft,re+Q)}function cr(ve){return ve&&ve._delegate?ve._delegate:ve}},3651:(Wt,ze,j)=>{j.d(ze,{e:()=>pe});var T=j(5114),Ce=(j(2090),j(9681),j(1877),j(4859),j(4650)),Fe=j(3101),Re=j(1205),De=j(9062);let pe=(()=>{class de{constructor(Ye,Je,mt,It){this.afs=Ye,this.afAuth=Je,this.router=mt,this.ngZone=It,this.afAuth.authState.subscribe(Ze=>{Ze?(this.userData=Ze,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(Ye,Je){return this.afAuth.signInWithEmailAndPassword(Ye,Je).then(mt=>{this.SetUserData(mt.user),this.afAuth.authState.subscribe(It=>{It&&this.router.navigate(["rpd"])})}).catch(mt=>{window.alert(mt.message)})}SignUp(Ye,Je){return this.afAuth.createUserWithEmailAndPassword(Ye,Je).then(mt=>{this.SendVerificationMail(),this.SetUserData(mt.user)}).catch(mt=>{window.alert(mt.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(Ye=>Ye.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(Ye){return this.afAuth.sendPasswordResetEmail(Ye).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Je=>{window.alert(Je)})}get isLoggedIn(){const Ye=JSON.parse(localStorage.getItem("user"));return null!==Ye&&!1!==Ye.emailVerified}GoogleAuth(){return this.AuthLogin(new T.Q).then(Ye=>{this.router.navigate(["rpd"])})}AuthLogin(Ye){return this.afAuth.signInWithPopup(Ye).then(Je=>{this.router.navigate(["rpd"]),this.SetUserData(Je.user)}).catch(Je=>{window.alert(Je)})}SetUserData(Ye){return this.afs.doc(`users/${Ye.uid}`).set({uid:Ye.uid,email:Ye.email,displayName:Ye.displayName,photoURL:Ye.photoURL,emailVerified:Ye.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["landing-page"])})}}return de.\u0275fac=function(Ye){return new(Ye||de)(Ce.LFG(Fe.ST),Ce.LFG(Re.zQ),Ce.LFG(De.F0),Ce.LFG(Ce.R0b))},de.\u0275prov=Ce.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})()},6032:(Wt,ze,j)=>{var T=j(1481),Y=j(9062),h=j(4650),ye=j(3651);let Ae=(()=>{class n{constructor(t,o){this.authService=t,this.router=o}canActivate(t,o){return console.log("teste2"),!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-up"]),!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye.e),h.LFG(Y.F0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ce=(()=>{class n{constructor(t,o){this.authService=t,this.router=o}canActivate(t,o){return console.log("teste"),this.authService.isLoggedIn&&this.router.navigate(["rpd"]),!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye.e),h.LFG(Y.F0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fe=[{path:"landing-page",loadChildren:()=>Promise.all([j.e(592),j.e(601)]).then(j.bind(j,8601)).then(n=>n.LandingPageModule),canActivate:[Ce]},{path:"rpd",loadChildren:()=>j.e(272).then(j.bind(j,4272)).then(n=>n.RpdModule),canActivate:[Ae]},{path:"sign-in",loadChildren:()=>j.e(592).then(j.bind(j,8471)).then(n=>n.SignInModule)},{path:"forgot-password",loadChildren:()=>j.e(163).then(j.bind(j,7163)).then(n=>n.ForgotPasswordModule)},{path:"sign-up",loadChildren:()=>j.e(148).then(j.bind(j,3148)).then(n=>n.SignUpModule)},{path:"verify-email",loadChildren:()=>j.e(454).then(j.bind(j,3454)).then(n=>n.VerifyEmailModule)},{path:"",loadChildren:()=>Promise.all([j.e(592),j.e(601)]).then(j.bind(j,8601)).then(n=>n.LandingPageModule),canActivate:[Ce]}];let Re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Y.Bz.forRoot(Fe,{useHash:!0}),Y.Bz]}),n})();var De=j(6895);function pe(n,r){1&n&&(h.TgZ(0,"div",2)(1,"div",3),h._UZ(2,"div",4),h.qZA()())}function de(n,r){1&n&&h._UZ(0,"router-outlet")}let Te=(()=>{class n{constructor(){this.title="rpg-psicoleigos",this.loaded=!0}ngOnInit(){setTimeout(()=>{this.loaded=!1},1e3)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[["class","spinner",4,"ngIf","ngIfElse"],["routerOutlet",""],[1,"spinner"],[1,"cell"],[1,"pl","pl-puzzle"]],template:function(t,o){if(1&t&&(h.YNc(0,pe,3,0,"div",0),h.YNc(1,de,1,0,"ng-template",null,1,h.W1O)),2&t){const d=h.MAs(2);h.Q6J("ngIf",o.loaded)("ngIfElse",d)}},dependencies:[De.O5,Y.lC],styles:['.spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.spinner[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#98e3f4}.pl[_ngcontent-%COMP%], .pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}.pl[_ngcontent-%COMP%]{margin:0 auto 1.5em;position:relative;width:3em;height:3em}.pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{background:currentColor;content:"";display:block;position:absolute;top:0;left:0;width:100%;height:50%;transform-origin:50% 100%;clip-path:polygon(0 0,100% 0,50% 100%);-webkit-clip-path:polygon(0 0,100% 0,50% 100%)}.pl-name[_ngcontent-%COMP%]{text-align:center}.pl-puzzle[_ngcontent-%COMP%]:before, .pl-puzzle[_ngcontent-%COMP%]:after{transform-origin:50% 50%;color:#98e3f4}.pl-puzzle[_ngcontent-%COMP%]:before{animation-name:_ngcontent-%COMP%_puzzleA}.pl-puzzle[_ngcontent-%COMP%]:after{animation-name:_ngcontent-%COMP%_puzzleB;background:#f5b0cb}@keyframes _ngcontent-%COMP%_puzzleA{0%{transform:translate(0) scale(1) rotate(0);z-index:1}12.5%{transform:translateY(50%) scale(1.5) rotate(-90deg);z-index:1}25%,50.1%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:1}25.1%,50%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:0}62.5%{transform:translateY(50%) scale(1.5) rotate(-270deg);z-index:1}75%{transform:translate(0) scale(1) rotate(-360deg);z-index:1}to{transform:translate(0) scale(1) rotate(-360deg);z-index:0}}@keyframes _ngcontent-%COMP%_puzzleB{0%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25.1%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:1}37.5%{transform:translateY(50%) scale(1.5) rotate(0);z-index:1}50%,75.1%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:1}50.1%,75%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:0}87.5%{transform:translateY(50%) scale(1.5) rotate(-180deg);z-index:1}to{transform:translate(25%,50%) scale(1) rotate(-270deg);z-index:1}}']}),n})();var Ye=j(9751),Je=j(515),mt=j(9646),It=j(7579),Ze=j(8421),at=j(5577),ge=j(1144),ut=j(576),ot=j(3268);const Xe=["addListener","removeListener"],qe=["addEventListener","removeEventListener"],Mt=["on","off"];function Se(n,r,t,o){if((0,ut.m)(t)&&(o=t,t=void 0),o)return Se(n,r,t).pipe((0,ot.Z)(o));const[d,m]=function vt(n){return(0,ut.m)(n.addEventListener)&&(0,ut.m)(n.removeEventListener)}(n)?qe.map(D=>P=>n[D](r,P,t)):function tt(n){return(0,ut.m)(n.addListener)&&(0,ut.m)(n.removeListener)}(n)?Xe.map(Ie(n,r)):function it(n){return(0,ut.m)(n.on)&&(0,ut.m)(n.off)}(n)?Mt.map(Ie(n,r)):[];if(!d&&(0,ge.z)(n))return(0,at.z)(D=>Se(D,r,t))((0,Ze.Xf)(n));if(!d)throw new TypeError("Invalid event target");return new Ye.y(D=>{const P=(...U)=>D.next(1<U.length?U:U[0]);return d(P),()=>m(P)})}function Ie(n,r){return t=>o=>n[t](r,o)}var Kt=j(4986),Pt=j(3532);function nt(n=0,r,t=Kt.P){let o=-1;return null!=r&&((0,Pt.K)(r)?t=r:o=r),new Ye.y(d=>{let m=function Ue(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;m<0&&(m=0);let D=0;return t.schedule(function(){d.closed||(d.next(D++),0<=o?this.schedule(void 0,o):d.complete())},m)})}const{isArray:We}=Array;function rt(n){return 1===n.length&&We(n[0])?n[0]:n}var ct=j(5403);var Et=j(1135),on=j(9841),Gt=j(5032);const $t=new Ye.y(Gt.Z);var En=j(3269);function Rn(...n){const r=(0,En.jO)(n),t=rt(n);return t.length?new Ye.y(o=>{let d=t.map(()=>[]),m=t.map(()=>!1);o.add(()=>{d=m=null});for(let D=0;!o.closed&&D<t.length;D++)(0,Ze.Xf)(t[D]).subscribe((0,ct.x)(o,P=>{if(d[D].push(P),d.every(U=>U.length)){const U=d.map(W=>W.shift());o.next(r?r(...U):U),d.some((W,ie)=>!W.length&&m[ie])&&o.complete()}},()=>{m[D]=!0,!d[D].length&&o.complete()}));return()=>{d=m=null}}):Je.E}var Vn=j(6451),Gn=j(7272),Zn=j(4482);function Fn(n){return(0,Zn.e)((r,t)=>{(0,Ze.Xf)(n).subscribe((0,ct.x)(t,()=>t.complete(),Gt.Z)),!t.closed&&r.subscribe(t)})}var Nn=j(9300),er=j(5698),tr=j(4004),Xt=j(8675),Sn=j(1884),Ut=j(3900),ti=j(8505),fi=j(4671);function kr(...n){const r=(0,En.jO)(n);return(0,Zn.e)((t,o)=>{const d=n.length,m=new Array(d);let D=n.map(()=>!1),P=!1;for(let U=0;U<d;U++)(0,Ze.Xf)(n[U]).subscribe((0,ct.x)(o,W=>{m[U]=W,!P&&!D[U]&&(D[U]=!0,(P=D.every(fi.y))&&(D=null))},Gt.Z));t.subscribe((0,ct.x)(o,U=>{if(P){const W=[U,...m];o.next(r?r(...W):W)}}))})}j(9718);var rr=j(8996);j(4742),j(1810);const pn=new h.OlP("NgValueAccessor");function yh(n,r){}function vh(n,r){if(1&n&&(h.TgZ(0,"button",3),h._uU(1),h.YNc(2,yh,0,0,"ng-template",4),h.qZA()),2&n){const t=r.$implicit;h.Q6J("ngbPanelToggle",t),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function kf(n,r){}function qm(n,r){}function Ff(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",8),h.NdJ("ngbRef",function(d){h.CHM(t);const m=h.oxw().$implicit;return h.KtG(m.panelDiv=d)}),h.TgZ(1,"div",9),h.YNc(2,qm,0,0,"ng-template",4),h.qZA()()}if(2&n){const t=h.oxw().$implicit;h.s9C("id",t.id),h.uIk("aria-labelledby",t.id+"-header"),h.xp6(2),h.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const Yy=function(n,r){return{$implicit:n,opened:r}};function bh(n,r){if(1&n&&(h.TgZ(0,"div")(1,"div",5),h.YNc(2,kf,0,0,"ng-template",6),h.qZA(),h.YNc(3,Ff,3,3,"div",7),h.qZA()),2&n){const t=r.$implicit,o=h.oxw(),d=h.MAs(1);h.Tol("accordion-item "+(t.cardClass||"")),h.xp6(1),h.Tol("accordion-header "+(t.type?"bg-"+t.type:o.type?"bg-"+o.type:"")),h.MGl("id","",t.id,"-header"),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||d)("ngTemplateOutletContext",h.WLB(8,Yy,t,t.isOpen)),h.xp6(1),h.Q6J("ngIf",!o.destroyOnHide||t.isOpen||t.transitionRunning)}}function tg(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",1),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.close())}),h.qZA()}}const Tc=["*"];function Ym(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",6),h.NdJ("click",function(){const m=h.CHM(t).$implicit,D=h.oxw();return D.focus(),h.KtG(D.select(m.id,D.NgbSlideEventSource.INDICATOR))}),h.qZA()}if(2&n){const t=r.$implicit,o=h.oxw();h.ekj("active",t.id===o.activeId),h.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===o.activeId)}}function Zy(n,r){}function Lf(n,r){if(1&n&&(h.TgZ(0,"div",7)(1,"span",8),h.SDv(2,9),h.qZA(),h.YNc(3,Zy,0,0,"ng-template",10),h.qZA()),2&n){const t=r.$implicit,o=r.index,d=r.count;h.Q6J("id","slide-"+t.id),h.xp6(2),h.pQV(o+1)(d),h.QtT(2),h.xp6(1),h.Q6J("ngTemplateOutlet",t.tplRef)}}function fd(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.arrowLeft())}),h._UZ(1,"span",12),h.TgZ(2,"span",8),h.SDv(3,13),h.qZA()()}}function Qy(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",14),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.arrowRight())}),h._UZ(1,"span",15),h.TgZ(2,"span",8),h.SDv(3,16),h.qZA()()}}const ls=["ngbDatepickerDayView",""],pd=["month"],Do=["year"];function ci(n,r){if(1&n&&(h.TgZ(0,"option",5),h._uU(1),h.qZA()),2&n){const t=r.$implicit,o=h.oxw();h.Q6J("value",t),h.uIk("aria-label",o.i18n.getMonthFullName(t,o.date.year)),h.xp6(1),h.Oqu(o.i18n.getMonthShortName(t,o.date.year))}}function Uf(n,r){if(1&n&&(h.TgZ(0,"option",5),h._uU(1),h.qZA()),2&n){const t=r.$implicit,o=h.oxw();h.Q6J("value",t),h.xp6(1),h.Oqu(o.i18n.getYearNumerals(t))}}function gu(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"ngb-datepicker-navigation-select",7),h.NdJ("select",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.select.emit(d))}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function $o(n,r){1&n&&h._UZ(0,"div",0)}function Es(n,r){1&n&&h._UZ(0,"div",0)}function Bf(n,r){if(1&n&&(h.YNc(0,$o,1,0,"div",9),h.TgZ(1,"div",10),h._uU(2),h.qZA(),h.YNc(3,Es,1,0,"div",9)),2&n){const t=r.$implicit,o=r.index,d=h.oxw(2);h.Q6J("ngIf",o>0),h.xp6(2),h.hij(" ",d.i18n.getMonthLabel(t.firstDate)," "),h.xp6(1),h.Q6J("ngIf",o!==d.months.length-1)}}function Rr(n,r){if(1&n&&h.YNc(0,Bf,4,3,"ng-template",8),2&n){const t=h.oxw();h.Q6J("ngForOf",t.months)}}function Zm(n,r){if(1&n&&(h.TgZ(0,"div",5),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.i18n.getWeekLabel())}}function Vf(n,r){if(1&n&&(h.TgZ(0,"div",6),h._uU(1),h.qZA()),2&n){const t=r.$implicit;h.xp6(1),h.Oqu(t)}}function Hl(n,r){if(1&n&&(h.TgZ(0,"div",2),h.YNc(1,Zm,2,1,"div",3),h.YNc(2,Vf,2,1,"div",4),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.datepicker.showWeekNumbers),h.xp6(1),h.Q6J("ngForOf",t.viewModel.weekdays)}}function Sc(n,r){if(1&n&&(h.TgZ(0,"div",11),h._uU(1),h.qZA()),2&n){const t=h.oxw(2).$implicit,o=h.oxw();h.xp6(1),h.Oqu(o.i18n.getWeekNumerals(t.number))}}function mu(n,r){}function wh(n,r){if(1&n&&h.YNc(0,mu,0,0,"ng-template",14),2&n){const t=h.oxw().$implicit,o=h.oxw(3);h.Q6J("ngTemplateOutlet",o.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function Gf(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",12),h.NdJ("click",function(d){const D=h.CHM(t).$implicit;return h.oxw(3).doSelect(D),h.KtG(d.preventDefault())}),h.YNc(1,wh,1,2,"ng-template",13),h.qZA()}if(2&n){const t=r.$implicit;h.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),h.Q6J("tabindex",t.tabindex),h.uIk("aria-label",t.ariaLabel),h.xp6(1),h.Q6J("ngIf",!t.hidden)}}function ng(n,r){if(1&n&&(h.TgZ(0,"div",8),h.YNc(1,Sc,2,1,"div",9),h.YNc(2,Gf,2,9,"div",10),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.datepicker.showWeekNumbers),h.xp6(1),h.Q6J("ngForOf",t.days)}}function qa(n,r){1&n&&h.YNc(0,ng,3,2,"div",7),2&n&&h.Q6J("ngIf",!r.$implicit.collapsed)}const rg=["defaultDayTemplate"],Yu=["content"];function Io(n,r){if(1&n&&h._UZ(0,"div",7),2&n){const o=r.currentMonth,d=r.selected,m=r.disabled,D=r.focused;h.Q6J("date",r.date)("currentMonth",o)("selected",d)("disabled",m)("focused",D)}}function gd(n,r){if(1&n&&(h.TgZ(0,"div",12),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw(2);h.xp6(1),h.hij(" ",o.i18n.getMonthLabel(t.firstDate)," ")}}function md(n,r){if(1&n&&(h.TgZ(0,"div",9),h.YNc(1,gd,2,1,"div",10),h._UZ(2,"ngb-datepicker-month",11),h.qZA()),2&n){const t=r.$implicit,o=h.oxw(2);h.xp6(1),h.Q6J("ngIf","none"===o.navigation||o.displayMonths>1&&"select"===o.navigation),h.xp6(1),h.Q6J("month",t.firstDate)}}function _d(n,r){if(1&n&&h.YNc(0,md,3,2,"div",8),2&n){const t=h.oxw();h.Q6J("ngForOf",t.model.months)}}function es(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"ngb-datepicker-navigation",13),h.NdJ("navigate",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.onNavigateEvent(d))})("select",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.onNavigateDateSelect(d))}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function Rs(n,r){}function yd(n,r){}const vd=["dialog"],Eh=["ngbNavOutlet",""];function A(n,r){}const v=function(n){return{$implicit:n}};function b(n,r){if(1&n&&(h.TgZ(0,"div",2),h.YNc(1,A,0,0,"ng-template",3),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw();h.Q6J("item",t)("nav",o.nav)("role",o.paneRole),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",h.VKq(5,v,t.active||o.isPanelTransitioning(t)))}}function M(n,r){if(1&n&&h.YNc(0,b,2,7,"div",1),2&n){const t=r.$implicit,o=h.oxw();h.Q6J("ngIf",t.isPanelInDom()||o.isPanelTransitioning(t))}}function q(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,10),h.qZA())}function se(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,11),h.qZA())}function je(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,12),h.qZA())}function At(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,13),h.qZA())}function an(n,r){1&n&&h._uU(0,"...")}function In(n,r){1&n&&(h.TgZ(0,"span",15),h._uU(1,"(current)"),h.qZA())}function nr(n,r){if(1&n&&(h._uU(0),h.YNc(1,In,2,0,"span",14)),2&n){const t=r.$implicit,o=r.currentPage;h.hij(" ",t," "),h.xp6(1),h.Q6J("ngIf",t===o)}}function xi(n,r){}const gl=function(n){return{disabled:!0,currentPage:n}};function zo(n,r){if(1&n&&(h.TgZ(0,"a",20),h.YNc(1,xi,0,0,"ng-template",8),h.qZA()),2&n){const t=h.oxw(2).$implicit,o=h.oxw(),d=h.MAs(9);h.xp6(1),h.Q6J("ngTemplateOutlet",(null==o.tplEllipsis?null:o.tplEllipsis.templateRef)||d)("ngTemplateOutletContext",h.VKq(2,gl,t))}}function Ya(n,r){}const Dh=function(n,r,t){return{disabled:n,$implicit:r,currentPage:t}};function ra(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"a",21),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw().$implicit;return h.oxw(2).selectPage(m),h.KtG(d.preventDefault())}),h.YNc(1,Ya,0,0,"ng-template",8),h.qZA()}if(2&n){const t=h.oxw().$implicit,o=h.oxw(),d=o.disabled,m=o.$implicit,D=h.oxw(),P=h.MAs(11);h.uIk("tabindex",d?"-1":null)("aria-disabled",d?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==D.tplNumber?null:D.tplNumber.templateRef)||P)("ngTemplateOutletContext",h.kEZ(4,Dh,d,t,m))}}function bd(n,r){if(1&n&&(h.TgZ(0,"li",17),h.YNc(1,zo,2,4,"a",18),h.YNc(2,ra,2,8,"a",19),h.qZA()),2&n){const t=r.$implicit,o=h.oxw(),d=o.$implicit,m=o.disabled,D=h.oxw();h.ekj("active",t===d)("disabled",D.isEllipsis(t)||m),h.uIk("aria-current",t===d?"page":null),h.xp6(1),h.Q6J("ngIf",D.isEllipsis(t)),h.xp6(1),h.Q6J("ngIf",!D.isEllipsis(t))}}function _u(n,r){1&n&&h.YNc(0,bd,3,7,"li",16),2&n&&h.Q6J("ngForOf",r.pages)}function Ih(n,r){}const Zu=function(n,r){return{disabled:n,currentPage:r}};function Ac(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",22),h.NdJ("click",function(d){return h.CHM(t),h.oxw().selectPage(1),h.KtG(d.preventDefault())}),h.YNc(2,Ih,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(1);h.ekj("disabled",t.previousDisabled()),h.xp6(1),h.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||o)("ngTemplateOutletContext",h.WLB(6,Zu,t.previousDisabled(),t.page))}}function jf(n,r){}const ig=function(n){return{disabled:n}};function Pi(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",23),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw();return m.selectPage(m.page-1),h.KtG(d.preventDefault())}),h.YNc(2,jf,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(3);h.ekj("disabled",t.previousDisabled()),h.xp6(1),h.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||o)("ngTemplateOutletContext",h.VKq(6,ig,t.previousDisabled()))}}function Oc(n,r){}function Ch(n,r){}function Qm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",24),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw();return m.selectPage(m.page+1),h.KtG(d.preventDefault())}),h.YNc(2,Ch,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(5);h.ekj("disabled",t.nextDisabled()),h.xp6(1),h.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||o)("ngTemplateOutletContext",h.WLB(6,Zu,t.nextDisabled(),t.page))}}function Jm(n,r){}function Th(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",25),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw();return m.selectPage(m.pageCount),h.KtG(d.preventDefault())}),h.YNc(2,Jm,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(7);h.ekj("disabled",t.nextDisabled()),h.xp6(1),h.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||o)("ngTemplateOutletContext",h.WLB(6,Zu,t.nextDisabled(),t.page))}}const Xm=function(n,r,t){return{$implicit:n,pages:r,disabled:t}};function e_(n,r){if(1&n&&(h.TgZ(0,"span"),h.SDv(1,1),h.ALo(2,"percent"),h.qZA()),2&n){const t=h.oxw();h.xp6(2),h.pQV(h.lcZ(2,1,t.getValue()/t.max)),h.QtT(1)}}function Nc(n,r){1&n&&h._uU(0),2&n&&h.Oqu(100===r.fill?"\u2605":"\u2606")}function t_(n,r){}function wd(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"span",2),h._uU(1),h.qZA(),h.TgZ(2,"span",3),h.NdJ("mouseenter",function(){const m=h.CHM(t).index,D=h.oxw();return h.KtG(D.enter(m+1))})("click",function(){const m=h.CHM(t).index,D=h.oxw();return h.KtG(D.handleClick(m+1))}),h.YNc(3,t_,0,0,"ng-template",4),h.qZA()}if(2&n){const t=r.index,o=h.oxw(),d=h.MAs(1);h.xp6(1),h.hij("(",t<o.nextRate?"*":" ",")"),h.xp6(1),h.Udp("cursor",o.isInteractive()?"pointer":"default"),h.xp6(1),h.Q6J("ngTemplateOutlet",o.starTemplate||o.starTemplateFromContent||d)("ngTemplateOutletContext",o.contexts[t])}}function n_(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeHour(d.hourStep))}),h._UZ(1,"span",12),h.TgZ(2,"span",13),h.SDv(3,14),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function eE(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeHour(-d.hourStep))}),h._UZ(1,"span",15),h.TgZ(2,"span",13),h.SDv(3,16),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function us(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeMinute(d.minuteStep))}),h._UZ(1,"span",12),h.TgZ(2,"span",13),h.SDv(3,17),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function zr(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeMinute(-d.minuteStep))}),h._UZ(1,"span",15),h.TgZ(2,"span",13),h.SDv(3,18),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function r_(n,r){1&n&&(h.TgZ(0,"div",5),h._uU(1,":"),h.qZA())}function i_(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw(2);return h.KtG(d.changeSecond(d.secondStep))}),h._UZ(1,"span",12),h.TgZ(2,"span",13),h.SDv(3,21),h.qZA()()}if(2&n){const t=h.oxw(2);h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function Ju(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw(2);return h.KtG(d.changeSecond(-d.secondStep))}),h._UZ(1,"span",15),h.TgZ(2,"span",13),h.SDv(3,22),h.qZA()()}if(2&n){const t=h.oxw(2);h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function s_(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",19),h.YNc(1,i_,4,7,"button",3),h.TgZ(2,"input",20),h.NdJ("change",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.updateSecond(d.target.value))})("blur",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.handleBlur())})("input",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.formatInput(d.target))})("keydown.ArrowUp",function(d){h.CHM(t);const m=h.oxw();return m.changeSecond(m.secondStep),h.KtG(d.preventDefault())})("keydown.ArrowDown",function(d){h.CHM(t);const m=h.oxw();return m.changeSecond(-m.secondStep),h.KtG(d.preventDefault())}),h.qZA(),h.YNc(3,Ju,4,7,"button",3),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.spinners),h.xp6(1),h.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),h.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),h.xp6(1),h.Q6J("ngIf",t.spinners)}}function Sa(n,r){1&n&&h._UZ(0,"div",5)}function Hf(n,r){if(1&n&&(h.ynx(0),h.SDv(1,27),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.pQV(t.i18n.getAfternoonPeriod()),h.QtT(1)}}function Mc(n,r){if(1&n&&h.SDv(0,28),2&n){const t=h.oxw(2);h.pQV(t.i18n.getMorningPeriod()),h.QtT(0)}}function o_(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",23)(1,"button",24),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.toggleMeridian())}),h.YNc(2,Hf,2,1,"ng-container",25),h.YNc(3,Mc,1,1,"ng-template",null,26,h.W1O),h.qZA()()}if(2&n){const t=h.MAs(4),o=h.oxw();h.xp6(1),h.ekj("btn-sm",o.isSmallSize)("btn-lg",o.isLargeSize)("disabled",o.disabled),h.Q6J("disabled",o.disabled),h.xp6(1),h.Q6J("ngIf",o.model&&o.model.hour>=12)("ngIfElse",t)}}function Nl(n,r){if(1&n&&(h.TgZ(0,"strong",3),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.header)}}function sg(n,r){}function Ed(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",4),h.YNc(1,sg,0,0,"ng-template",5),h.TgZ(2,"button",6),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.hide())}),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(1);h.xp6(1),h.Q6J("ngTemplateOutlet",t.contentHeaderTpl||o)}}function $f(n,r){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw();h.Tol(o.highlightClass),h.xp6(1),h.Oqu(t)}}function ob(n,r){if(1&n&&h._uU(0),2&n){const t=h.oxw().$implicit;h.Oqu(t)}}function lr(n,r){if(1&n&&(h.YNc(0,$f,2,3,"span",1),h.YNc(1,ob,1,1,"ng-template",null,2,h.W1O)),2&n){const t=r.odd,o=h.MAs(2);h.Q6J("ngIf",t)("ngIfElse",o)}}function xs(n){return parseInt(`${n}`,10)}function Ah(n){return null!=n?`${n}`:""}function Dd(n,r,t=0){return Math.max(Math.min(n,r),t)}function $l(n){return"string"==typeof n}function Ds(n){return!isNaN(xs(n))}function ts(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function Id(n){return null!=n}function Rc(n){return Ds(n)?`0${n}`.slice(-2):""}function a_(n,r){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(r)>=0}function ec(n){return(n||document.body).getBoundingClientRect()}function cs(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const lg={animation:!0,transitionTimerDelayMs:5},Kf=()=>{},{transitionTimerDelayMs:yu}=lg,Cd=new Map,io=(n,r,t,o)=>{let d=o.context||{};const m=Cd.get(r);if(m)switch(o.runningTransition){case"continue":return Je.E;case"stop":n.run(()=>m.transition$.complete()),d=Object.assign(m.context,d),Cd.delete(r)}const D=t(r,o.animation,d)||Kf;if(!o.animation||"none"===window.getComputedStyle(r).transitionProperty)return n.run(()=>D()),(0,mt.of)(void 0).pipe(function ev(n){return r=>new Ye.y(t=>r.subscribe({next:D=>n.run(()=>t.next(D)),error:D=>n.run(()=>t.error(D)),complete:()=>n.run(()=>t.complete())}))}(n));const P=new It.x,U=new It.x,W=P.pipe(function Wr(...n){return r=>(0,Gn.z)(r,(0,mt.of)(...n))}(!0));Cd.set(r,{transition$:P,complete:()=>{U.next(),U.complete()},context:d});const ie=function ag(n){const{transitionDelay:r,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(r)+parseFloat(t))}(r);return n.runOutsideAngular(()=>{const we=Se(r,"transitionend").pipe(Fn(W),(0,Nn.h)(({target:Ge})=>Ge===r));(function st(...n){return 1===(n=rt(n)).length?(0,Ze.Xf)(n[0]):new Ye.y(function kt(n){return r=>{let t=[];for(let o=0;t&&!r.closed&&o<n.length;o++)t.push((0,Ze.Xf)(n[o]).subscribe((0,ct.x)(r,d=>{if(t){for(let m=0;m<t.length;m++)m!==o&&t[m].unsubscribe();t=null}r.next(d)})))}}(n))})(nt(ie+yu).pipe(Fn(W)),we,U).pipe(Fn(W)).subscribe(()=>{Cd.delete(r),n.run(()=>{D(),P.next(),P.complete()})})}),P.asObservable()},Td=(n,r,t)=>{let{direction:o,maxSize:d,dimension:m}=t;const{classList:D}=n;function P(){D.add("collapse"),"show"===o?D.add("show"):D.remove("show")}if(r)return d||(d=function tc(n,r){if(typeof navigator>"u")return"0px";const{classList:t}=n,o=t.contains("show");o||t.add("show"),n.style[r]="";const d=n.getBoundingClientRect()[r]+"px";return o||t.remove("show"),d}(n,m),t.maxSize=d,n.style[m]="show"!==o?d:"0px",D.remove("collapse"),D.remove("collapsing"),D.remove("show"),ec(n),D.add("collapsing")),n.style[m]="show"===o?d:"0px",()=>{P(),D.remove("collapsing"),n.style[m]=""};P()};let Sd=(()=>{class n{constructor(){this.animation=lg.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nE=(()=>{class n{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sd))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rE=0,Oh=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),l_=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),lb=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),Yf=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+rE++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new h.vpe,this.hidden=new h.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["ngb-panel"]],contentQueries:function(t,o,d){if(1&t&&(h.Suo(d,l_,4),h.Suo(d,Oh,4),h.Suo(d,lb,4)),2&t){let m;h.iGM(m=h.CRH())&&(o.titleTpls=m),h.iGM(m=h.CRH())&&(o.headerTpls=m),h.iGM(m=h.CRH())&&(o.contentTpls=m)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),u_=(()=>{class n{constructor(t){this._El=t,this.ngbRef=new h.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),c_=(()=>{class n{constructor(t,o){this.accordion=t,this.panel=o}set ngbPanelToggle(t){t&&(this.panel=t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36((0,h.Gpc)(()=>d_)),h.Y36(Yf,9))},n.\u0275dir=h.lG2({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,o){1&t&&h.NdJ("click",function(){return o.accordion.toggle(o.panel.id)}),2&t&&(h.Ikx("disabled",o.panel.disabled),h.uIk("aria-expanded",o.panel.isOpen)("aria-controls",o.panel.id),h.ekj("collapsed",!o.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),d_=(()=>{class n{constructor(t,o,d){this._ngZone=o,this._changeDetector=d,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new h.vpe,this.shown=new h.vpe,this.hidden=new h.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const o=this._findPanelById(t);o&&this._changeOpenState(o,!o.isOpen)}ngAfterContentChecked(){$l(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,er.q)(1)).subscribe(()=>{this.panels.forEach(t=>{const o=t.panelDiv;o?t.initClassDone||(t.initClassDone=!0,io(this._ngZone,o,Td,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,o){if(null!=t&&!t.disabled&&t.isOpen!==o){let d=!1;this.panelChange.emit({panelId:t.id,nextState:o,preventDefault:()=>{d=!0}}),d||(t.isOpen=o,t.transitionRunning=!0,o&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,o=!0){this.panels.forEach(d=>{d.id!==t&&d.isOpen&&(d.isOpen=!1,d.transitionRunning=o)})}_findPanelById(t){return this.panels.find(o=>o.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(o=>{o.transitionRunning&&io(this._ngZone,o.panelDiv,Td,{animation:t,runningTransition:"stop",context:{direction:o.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{o.transitionRunning=!1;const{id:m}=o;o.isOpen?(o.shown.emit(),this.shown.emit(m)):(o.hidden.emit(),this.hidden.emit(m))})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(nE),h.Y36(h.R0b),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-accordion"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,Yf,4),2&t){let m;h.iGM(m=h.CRH())&&(o.panels=m)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,o){2&t&&h.uIk("aria-multiselectable",!o.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[h.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,o){1&t&&(h.YNc(0,vh,3,3,"ng-template",0,1,h.W1O),h.YNc(2,bh,4,11,"ng-template",2)),2&t&&(h.xp6(2),h.Q6J("ngForOf",o.panels))},dependencies:[De.ax,De.tP,c_,u_,Oh,De.O5],encapsulation:2}),n})(),ug=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[d_]}),n})();const nc=({classList:n})=>{n.remove("show")};let Zf=(()=>{class n{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sd))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rc=(()=>{class n{constructor(t,o,d,m){this._renderer=o,this._element=d,this._zone=m,this.closed=new h.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=io(this._zone,this._element.nativeElement,nc,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const o=t.type;o&&!o.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${o.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${o.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Zf),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,o){2&t&&h.ekj("fade",o.animation)("alert-dismissible",o.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[h.TTD,h.jDz],ngContentSelectors:Tc,decls:2,vars:1,consts:function(){let r;return r=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",r,3,"click",4,"ngIf"],["type","button","aria-label",r,1,"btn-close",3,"click"]]},template:function(t,o){1&t&&(h.F$t(),h.Hsn(0),h.YNc(1,tg,1,0,"button",0)),2&t&&(h.xp6(1),h.Q6J("ngIf",o.dismissible))},dependencies:[De.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),xc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[rc]}),n})();var vu=(()=>{return(n=vu||(vu={})).START="start",n.END="end",vu;var n})();const cb=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),Qf=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},Wo=n=>{Qf(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},h_=(n,r,{direction:t})=>{const{classList:o}=n;return r?(cb(n)?Qf(o):(o.add("carousel-item-"+(t===vu.START?"next":"prev")),ec(n),o.add("carousel-item-"+t)),()=>{Wo(o),o.add("active")}):(Qf(o),Wo(o),void o.add("active"))},cg=(n,r,{direction:t})=>{const{classList:o}=n;return r?(cb(n)?Qf(o):o.add("carousel-item-"+t),()=>{Wo(o),o.remove("active")}):(Qf(o),Wo(o),void o.remove("active"))};let ic=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sd))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),db=0,Jf=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+db++,this.slid=new h.vpe}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),tv=(()=>{class n{constructor(t,o,d,m,D){this._platformId=o,this._ngZone=d,this._cd=m,this._container=D,this.NgbSlideEventSource=Ad,this._destroy$=new It.x,this._interval$=new Et.X(0),this._mouseHover$=new Et.X(!1),this._focused$=new Et.X(!1),this._pauseOnHover$=new Et.X(!1),this._pauseOnFocus$=new Et.X(!1),this._pause$=new Et.X(!1),this._wrap$=new Et.X(!1),this.slide=new h.vpe,this.slid=new h.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Ad.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Ad.ARROW_RIGHT)}ngAfterContentInit(){(0,De.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=(0,on.a)([this.slide.pipe((0,tr.U)(o=>o.current),(0,Xt.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,Xt.O)(null))]).pipe((0,tr.U)(([o,d])=>{const m=this.slides.toArray(),D=this._getSlideIdxById(o);return d?m.length>1:D<m.length-1}),(0,Sn.x)());(0,on.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,tr.U)(([o,d,m,D,P,U,W])=>o||d&&m||D&&P||!W?0:U),(0,Sn.x)(),(0,Ut.w)(o=>o>0?nt(o,o):$t),Fn(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Ad.TIMER)))}),this.slides.changes.pipe(Fn(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(n=>{Cd.get(n)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,er.q)(1)).subscribe(()=>{for(const{id:t}of this.slides){const o=this._getSlideElement(t);t===this.activeId?o.classList.add("active"):o.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,o){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),o)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),vu.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),vu.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,o,d){const m=this._transitionIds;if(m&&(m[0]!==t||m[1]!==this.activeId))return;let D=this._getSlideById(t);if(D&&D.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:D.id,direction:o,paused:this._pause$.value,source:d});const P={animation:this.animation,runningTransition:"stop",context:{direction:o}},U=[],W=this._getSlideById(this.activeId);if(W){const Ge=io(this._ngZone,this._getSlideElement(W.id),cg,P);Ge.subscribe(()=>{W.slid.emit({isShown:!1,direction:o,source:d})}),U.push(Ge)}const ie=this.activeId;this.activeId=D.id;const we=this._getSlideById(this.activeId),Ee=io(this._ngZone,this._getSlideElement(D.id),h_,P);Ee.subscribe(()=>{we?.slid.emit({isShown:!0,direction:o,source:d})}),U.push(Ee),Rn(...U).pipe((0,er.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:ie,current:D.id,direction:o,paused:this._pause$.value,source:d})})}this._cd.markForCheck()}_getSlideEventDirection(t,o){return this._getSlideIdxById(t)>this._getSlideIdxById(o)?vu.END:vu.START}_getSlideById(t){return this.slides.find(o=>o.id===t)||null}_getSlideIdxById(t){const o=this._getSlideById(t);return null!=o?this.slides.toArray().indexOf(o):-1}_getNextSlide(t){const o=this.slides.toArray(),d=this._getSlideIdxById(t);return d===o.length-1?this.wrap?o[0].id:o[o.length-1].id:o[d+1].id}_getPrevSlide(t){const o=this.slides.toArray(),d=this._getSlideIdxById(t);return 0===d?this.wrap?o[o.length-1].id:o[0].id:o[d-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ic),h.Y36(h.Lbi),h.Y36(h.R0b),h.Y36(h.sBO),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,Jf,4),2&t){let m;h.iGM(m=h.CRH())&&(o.slides=m)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,o){1&t&&h.NdJ("keydown.arrowLeft",function(){return o.keyboard&&o.arrowLeft()})("keydown.arrowRight",function(){return o.keyboard&&o.arrowRight()})("mouseenter",function(){return o.mouseHover=!0})("mouseleave",function(){return o.mouseHover=!1})("focusin",function(){return o.focused=!0})("focusout",function(){return o.focused=!1}),2&t&&(h.uIk("aria-activedescendant","slide-"+o.activeId),h.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[h.jDz],decls:6,vars:6,consts:function(){let r,t,o;return r=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,o=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],r,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],o]},template:function(t,o){1&t&&(h.TgZ(0,"div",0),h.YNc(1,Ym,1,5,"button",1),h.qZA(),h.TgZ(2,"div",2),h.YNc(3,Lf,4,4,"div",3),h.qZA(),h.YNc(4,fd,4,0,"button",4),h.YNc(5,Qy,4,0,"button",5)),2&t&&(h.ekj("visually-hidden",!o.showNavigationIndicators),h.xp6(1),h.Q6J("ngForOf",o.slides),h.xp6(2),h.Q6J("ngForOf",o.slides),h.xp6(1),h.Q6J("ngIf",o.showNavigationArrows),h.xp6(1),h.Q6J("ngIf",o.showNavigationArrows))},dependencies:[De.ax,De.tP,De.O5],encapsulation:2,changeDetection:0}),n})();var Ad=(()=>{return(n=Ad||(Ad={})).TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator",Ad;var n})();let nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[tv]}),n})(),Xf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class so{constructor(r,t,o){this.year=ts(r)?r:null,this.month=ts(t)?t:null,this.day=ts(o)?o:null}static from(r){return r instanceof so?r:r?new so(r.year,r.month,r.day):null}equals(r){return null!=r&&this.year===r.year&&this.month===r.month&&this.day===r.day}before(r){return!!r&&(this.year===r.year?this.month===r.month?this.day!==r.day&&this.day<r.day:this.month<r.month:this.year<r.year)}after(r){return!!r&&(this.year===r.year?this.month===r.month?this.day!==r.day&&this.day>r.day:this.month>r.month:this.year>r.year)}}function Pc(n,r){return!function Ks(n,r){return!n&&!r||!!n&&!!r&&n.equals(r)}(n,r)}function rv(n,r){return!(!n&&!r||n&&r&&n.year===r.year&&n.month===r.month)}function dg(n,r,t){return n&&r&&n.before(r)?r:n&&t&&n.after(t)?t:n||null}function ep(n,r){const{minDate:t,maxDate:o,disabled:d,markDisabled:m}=r;return!(null==n||d||m&&m(n,{year:n.year,month:n.month})||t&&n.before(t)||o&&n.after(o))}function yb(n){return new so(n.getFullYear(),n.getMonth()+1,n.getDate())}function bu(n){const r=new Date(n.year,n.month-1,n.day,12);return isNaN(r.getTime())||r.setFullYear(n.year),r}let Od=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function qs(){return new hg}()},providedIn:"root"}),n})(),hg=(()=>{class n extends Od{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,o="d",d=1){let m=bu(t),D=!0,P=m.getMonth();switch(o){case"y":m.setFullYear(m.getFullYear()+d);break;case"m":P+=d,m.setMonth(P),P%=12,P<0&&(P+=12);break;case"d":m.setDate(m.getDate()+d),D=!1;break;default:return t}return D&&m.getMonth()!==P&&m.setDate(0),yb(m)}getPrev(t,o="d",d=1){return this.getNext(t,o,-d)}getWeekday(t){let d=bu(t).getDay();return 0===d?7:d}getWeekNumber(t,o){7===o&&(o=0);const D=bu(t[(11-o)%7]);D.setDate(D.getDate()+4-(D.getDay()||7));const P=D.getTime();return D.setMonth(0),D.setDate(1),Math.floor(Math.round((P-D.getTime())/864e5)/7)+1}getToday(){return yb(new Date)}isValid(t){if(!(t&&ts(t.year)&&ts(t.month)&&ts(t.day)&&0!==t.year))return!1;const o=bu(t);return!isNaN(o.getTime())&&o.getFullYear()===t.year&&o.getMonth()+1===t.month&&o.getDate()===t.day}}return n.\u0275fac=function(){let r;return function(o){return(r||(r=h.n5z(n)))(o||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ml=(()=>{class n{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let o=null;return o=t?new t:function fg(n){return new ov(n)}(h.LFG(h.soG)),o},providedIn:"root"}),n})(),ov=(()=>{class n extends ml{constructor(t){super(),this._locale=t,this._monthsShort=(0,De.UT)(t,De.x.Standalone,De.Tn.Abbreviated),this._monthsFull=(0,De.UT)(t,De.x.Standalone,De.Tn.Wide)}getWeekdayLabel(t,o){const d=(0,De.Mn)(this._locale,De.x.Standalone,void 0===o?De.Tn.Short:o);return d.map((D,P)=>d[(P+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){const o=new Date(t.year,t.month-1,t.day);return(0,De.p6)(o,"fullDate",this._locale)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),pg=(()=>{class n{constructor(t,o){this._calendar=t,this._i18n=o,this._VALIDATORS={dayTemplateData:d=>{if(this._state.dayTemplateData!==d)return{dayTemplateData:d}},displayMonths:d=>{if(ts(d=xs(d))&&d>0&&this._state.displayMonths!==d)return{displayMonths:d}},disabled:d=>{if(this._state.disabled!==d)return{disabled:d}},firstDayOfWeek:d=>{if(ts(d=xs(d))&&d>=0&&this._state.firstDayOfWeek!==d)return{firstDayOfWeek:d}},focusVisible:d=>{if(this._state.focusVisible!==d&&!this._state.disabled)return{focusVisible:d}},markDisabled:d=>{if(this._state.markDisabled!==d)return{markDisabled:d}},maxDate:d=>{const m=this.toValidDate(d,null);if(Pc(this._state.maxDate,m))return{maxDate:m}},minDate:d=>{const m=this.toValidDate(d,null);if(Pc(this._state.minDate,m))return{minDate:m}},navigation:d=>{if(this._state.navigation!==d)return{navigation:d}},outsideDays:d=>{if(this._state.outsideDays!==d)return{outsideDays:d}},weekdays:d=>{const m=!0===d||!1===d?De.Tn.Short:d,D=!0!==d&&!1!==d||d;if(this._state.weekdayWidth!==m||this._state.weekdaysVisible!==D)return{weekdayWidth:m,weekdaysVisible:D}}},this._model$=new It.x,this._dateSelect$=new It.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:De.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,Nn.h)(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,Nn.h)(t=>null!==t))}set(t){let o=Object.keys(t).map(d=>this._VALIDATORS[d](t[d])).reduce((d,m)=>({...d,...m}),{});Object.keys(o).length>0&&this._nextState(o)}focus(t){const o=this.toValidDate(t,null);null!=o&&!this._state.disabled&&Pc(this._state.focusDate,o)&&this._nextState({focusDate:t})}focusSelect(){ep(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const o=this.toValidDate(t,this._calendar.getToday());null!=o&&!this._state.disabled&&(!this._state.firstDate||rv(this._state.firstDate,o))&&this._nextState({firstDate:o})}select(t,o={}){const d=this.toValidDate(t,null);null!=d&&!this._state.disabled&&(Pc(this._state.selectedDate,d)&&this._nextState({selectedDate:d}),o.emitEvent&&ep(d,this._state)&&this._dateSelect$.next(d))}toValidDate(t,o){const d=so.from(t);return void 0===o&&(o=this._calendar.getToday()),this._calendar.isValid(d)?d:o}getMonth(t){for(let o of this._state.months)if(t.month===o.number&&t.year===o.year)return o;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const o=this._updateState(t);this._patchContexts(o),this._state=o,this._model$.next(this._state)}_patchContexts(t){const{months:o,displayMonths:d,selectedDate:m,focusDate:D,focusVisible:P,disabled:U,outsideDays:W}=t;t.months.forEach(ie=>{ie.weeks.forEach(we=>{we.days.forEach(Ee=>{D&&(Ee.context.focused=D.equals(Ee.date)&&P),Ee.tabindex=!U&&D&&Ee.date.equals(D)&&D.month===ie.number?0:-1,!0===U&&(Ee.context.disabled=!0),void 0!==m&&(Ee.context.selected=null!==m&&m.equals(Ee.date)),ie.number!==Ee.date.month&&(Ee.hidden="hidden"===W||"collapsed"===W||d>1&&Ee.date.after(o[0].firstDate)&&Ee.date.before(o[d-1].lastDate))})})})}_updateState(t){const o=Object.assign({},this._state,t);let d=o.firstDate;if(("minDate"in t||"maxDate"in t)&&(function fb(n,r){if(r&&n&&r.before(n))throw new Error(`'maxDate' ${r} should be greater than 'minDate' ${n}`)}(o.minDate,o.maxDate),o.focusDate=dg(o.focusDate,o.minDate,o.maxDate),o.firstDate=dg(o.firstDate,o.minDate,o.maxDate),d=o.focusDate),"disabled"in t&&(o.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(d=o.selectedDate),"focusVisible"in t||"focusDate"in t&&(o.focusDate=dg(o.focusDate,o.minDate,o.maxDate),d=o.focusDate,0!==o.months.length&&o.focusDate&&!o.focusDate.before(o.firstDate)&&!o.focusDate.after(o.lastDate)))return o;if("firstDate"in t&&(o.firstDate=dg(o.firstDate,o.minDate,o.maxDate),d=o.firstDate),d){const D=function mb(n,r,t,o,d){const{displayMonths:m,months:D}=t,P=D.splice(0,D.length);return Array.from({length:m},(W,ie)=>{const we=Object.assign(n.getNext(r,"m",ie),{day:1});if(D[ie]=null,!d){const Ee=P.findIndex(Ge=>Ge.firstDate.equals(we));-1!==Ee&&(D[ie]=P.splice(Ee,1)[0])}return we}).forEach((W,ie)=>{null===D[ie]&&(D[ie]=function f_(n,r,t,o,d={}){const{dayTemplateData:m,minDate:D,maxDate:P,firstDayOfWeek:U,markDisabled:W,outsideDays:ie,weekdayWidth:we,weekdaysVisible:Ee}=t,Ge=n.getToday();d.firstDate=null,d.lastDate=null,d.number=r.month,d.year=r.year,d.weeks=d.weeks||[],d.weekdays=d.weekdays||[],r=function _b(n,r,t){const o=n.getDaysPerWeek(),d=new so(r.year,r.month,1),m=n.getWeekday(d)%o;return n.getPrev(d,"d",(o+m-t)%o)}(n,r,U),Ee||(d.weekdays.length=0);for(let Tt=0;Tt<n.getWeeksPerMonth();Tt++){let Vt=d.weeks[Tt];Vt||(Vt=d.weeks[Tt]={number:0,days:[],collapsed:!0});const Jt=Vt.days;for(let Un=0;Un<n.getDaysPerWeek();Un++){0===Tt&&Ee&&(d.weekdays[Un]=o.getWeekdayLabel(n.getWeekday(r),we));const Bn=new so(r.year,r.month,r.day),sr=n.getNext(Bn),Kn=o.getDayAriaLabel(Bn);let Dr=!!(D&&Bn.before(D)||P&&Bn.after(P));!Dr&&W&&(Dr=W(Bn,{month:d.number,year:d.year}));let Pr=Bn.equals(Ge),Li=m?m(Bn,{month:d.number,year:d.year}):void 0;null===d.firstDate&&Bn.month===d.number&&(d.firstDate=Bn),Bn.month===d.number&&sr.month!==d.number&&(d.lastDate=Bn);let hi=Jt[Un];hi||(hi=Jt[Un]={}),hi.date=Bn,hi.context=Object.assign(hi.context||{},{$implicit:Bn,date:Bn,data:Li,currentMonth:d.number,currentYear:d.year,disabled:Dr,focused:!1,selected:!1,today:Pr}),hi.tabindex=-1,hi.ariaLabel=Kn,hi.hidden=!1,r=sr}Vt.number=n.getWeekNumber(Jt.map(Un=>Un.date),U),Vt.collapsed="collapsed"===ie&&Jt[0].date.month!==d.number&&Jt[Jt.length-1].date.month!==d.number}return d}(n,W,t,o,P.shift()||{}))}),D}(this._calendar,d,o,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);o.months=D,o.firstDate=D[0].firstDate,o.lastDate=D[D.length-1].lastDate,"selectedDate"in t&&!ep(o.selectedDate,o)&&(o.selectedDate=null),"firstDate"in t&&(!o.focusDate||o.focusDate.before(o.firstDate)||o.focusDate.after(o.lastDate))&&(o.focusDate=d);const P=!this._state.firstDate||this._state.firstDate.year!==o.firstDate.year,U=!this._state.firstDate||this._state.firstDate.month!==o.firstDate.month;"select"===o.navigation?(("minDate"in t||"maxDate"in t||0===o.selectBoxes.years.length||P)&&(o.selectBoxes.years=function pb(n,r,t){if(!n)return[];const o=r?Math.max(r.year,n.year-500):n.year-10,m=(t?Math.min(t.year,n.year+500):n.year+10)-o+1,D=Array(m);for(let P=0;P<m;P++)D[P]=o+P;return D}(o.firstDate,o.minDate,o.maxDate)),("minDate"in t||"maxDate"in t||0===o.selectBoxes.months.length||P)&&(o.selectBoxes.months=function iv(n,r,t,o){if(!r)return[];let d=n.getMonths(r.year);if(t&&r.year===t.year){const m=d.findIndex(D=>D===t.month);d=d.slice(m)}if(o&&r.year===o.year){const m=d.findIndex(D=>D===o.month);d=d.slice(0,m+1)}return d}(this._calendar,o.firstDate,o.minDate,o.maxDate))):o.selectBoxes={years:[],months:[]},("arrows"===o.navigation||"select"===o.navigation)&&(U||P||"minDate"in t||"maxDate"in t||"disabled"in t)&&(o.prevDisabled=o.disabled||function sv(n,r,t){const o=Object.assign(n.getPrev(r,"m"),{day:1});return null!=t&&(o.year===t.year&&o.month<t.month||o.year<t.year&&1===t.month)}(this._calendar,o.firstDate,o.minDate),o.nextDisabled=o.disabled||function gb(n,r,t){const o=Object.assign(n.getNext(r,"m"),{day:1});return null!=t&&o.after(t)}(this._calendar,o.lastDate,o.maxDate))}return o}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Od),h.LFG(ml))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var kc=(()=>{return(n=kc||(kc={}))[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT",kc;var n})();let Nh=(()=>{class n{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ml))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,o){2&t&&h.ekj("bg-primary",o.selected)("text-white",o.selected)("text-muted",o.isMuted())("outside",o.isMuted())("active",o.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[h.jDz],attrs:ls,decls:1,vars:1,template:function(t,o){1&t&&h._uU(0),2&t&&h.Oqu(o.i18n.getDayNumerals(o.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),Mh=(()=>{class n{constructor(t,o){this.i18n=t,this._renderer=o,this.select=new h.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new so(this.date.year,xs(t),1))}changeYear(t){this.select.emit(new so(xs(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ml),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,o){if(1&t&&(h.Gf(pd,7,h.SBq),h.Gf(Do,7,h.SBq)),2&t){let d;h.iGM(d=h.CRH())&&(o.monthSelect=d.first),h.iGM(d=h.CRH())&&(o.yearSelect=d.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[h.jDz],decls:6,vars:4,consts:function(){let r,t,o,d;return r=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,o=$localize`:@@ngb.datepicker.select-year:Select year`,d=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",r,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",o,"title",d,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,o){1&t&&(h.TgZ(0,"select",0,1),h.NdJ("change",function(m){return o.changeMonth(m.target.value)}),h.YNc(2,ci,2,3,"option",2),h.qZA(),h.TgZ(3,"select",3,4),h.NdJ("change",function(m){return o.changeYear(m.target.value)}),h.YNc(5,Uf,2,2,"option",2),h.qZA()),2&t&&(h.Q6J("disabled",o.disabled),h.xp6(2),h.Q6J("ngForOf",o.months),h.xp6(1),h.Q6J("disabled",o.disabled),h.xp6(2),h.Q6J("ngForOf",o.years))},dependencies:[De.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),sc=(()=>{class n{constructor(t){this.i18n=t,this.navigation=kc,this.months=[],this.navigate=new h.vpe,this.select=new h.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ml))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[h.jDz],decls:8,vars:4,consts:function(){let r,t,o,d;return r=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,o=$localize`:@@ngb.datepicker.next-month:Next month`,d=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",r,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",o,"title",d,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,o){1&t&&(h.TgZ(0,"div",0)(1,"button",1),h.NdJ("click",function(m){return o.onClickPrev(m)}),h._UZ(2,"span",2),h.qZA()(),h.YNc(3,gu,1,4,"ngb-datepicker-navigation-select",3),h.YNc(4,Rr,1,1,null,4),h.TgZ(5,"div",5)(6,"button",6),h.NdJ("click",function(m){return o.onClickNext(m)}),h._UZ(7,"span",2),h.qZA()()),2&t&&(h.xp6(1),h.Q6J("disabled",o.prevDisabled),h.xp6(2),h.Q6J("ngIf",o.showSelect),h.xp6(1),h.Q6J("ngIf",!o.showSelect),h.xp6(2),h.Q6J("disabled",o.nextDisabled))},dependencies:[De.O5,De.ax,Mh],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var fr=(()=>{return(n=fr||(fr={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",fr;var n})();let Nd=(()=>{class n{processKey(t,o){const{state:d,calendar:m}=o;switch(t.which){case fr.PageUp:o.focusDate(m.getPrev(d.focusedDate,t.shiftKey?"y":"m",1));break;case fr.PageDown:o.focusDate(m.getNext(d.focusedDate,t.shiftKey?"y":"m",1));break;case fr.End:o.focusDate(t.shiftKey?d.maxDate:d.lastDate);break;case fr.Home:o.focusDate(t.shiftKey?d.minDate:d.firstDate);break;case fr.ArrowLeft:o.focusDate(m.getPrev(d.focusedDate,"d",1));break;case fr.ArrowUp:o.focusDate(m.getPrev(d.focusedDate,"d",m.getDaysPerWeek()));break;case fr.ArrowRight:o.focusDate(m.getNext(d.focusedDate,"d",1));break;case fr.ArrowDown:o.focusDate(m.getNext(d.focusedDate,"d",m.getDaysPerWeek()));break;case fr.Enter:case fr.Space:o.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tp=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=De.Tn.Short}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function gg(){return new av}()},providedIn:"root"}),n})(),av=(()=>{class n extends zl{fromModel(t){return t&&ts(t.year)&&ts(t.month)&&ts(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&ts(t.year)&&ts(t.month)&&ts(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return n.\u0275fac=function(){let r;return function(o){return(r||(r=h.n5z(n)))(o||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),np=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),Rh=(()=>{class n{constructor(t,o,d,m){this.i18n=t,this.datepicker=o,this._keyboardService=d,this._service=m}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ml),h.Y36((0,h.Gpc)(()=>rp)),h.Y36(Nd),h.Y36(pg))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,o){1&t&&h.NdJ("keydown",function(m){return o.onKeyDown(m)})},inputs:{month:"month"},standalone:!0,features:[h.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,o){1&t&&(h.YNc(0,Hl,3,2,"div",0),h.YNc(1,qa,1,1,"ng-template",1)),2&t&&(h.Q6J("ngIf",o.viewModel.weekdays.length>0),h.xp6(1),h.Q6J("ngForOf",o.viewModel.weeks))},dependencies:[De.O5,De.ax,De.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),rp=(()=>{class n{constructor(t,o,d,m,D,P,U,W){this._service=t,this._calendar=o,this.i18n=d,this._elementRef=P,this._ngbDateAdapter=U,this._ngZone=W,this._controlValue=null,this._destroyed$=new It.x,this._publicState={},this.navigate=new h.vpe,this.dateSelect=new h.vpe,this.onChange=ie=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(ie=>this[ie]=m[ie]),t.dateSelect$.pipe(Fn(this._destroyed$)).subscribe(ie=>{this.dateSelect.emit(ie)}),t.model$.pipe(Fn(this._destroyed$)).subscribe(ie=>{const we=ie.firstDate,Ee=this.model?this.model.firstDate:null;this._publicState={maxDate:ie.maxDate,minDate:ie.minDate,firstDate:ie.firstDate,lastDate:ie.lastDate,focusedDate:ie.focusDate,months:ie.months.map(Un=>Un.firstDate)};let Ge=!1;if(!we.equals(Ee)&&(this.navigate.emit({current:Ee?{year:Ee.year,month:Ee.month}:null,next:{year:we.year,month:we.month},preventDefault:()=>Ge=!0}),Ge&&null!==Ee))return void this._service.open(Ee);const Tt=ie.selectedDate,Vt=ie.focusDate,Jt=this.model?this.model.focusDate:null;this.model=ie,Pc(Tt,this._controlValue)&&(this._controlValue=Tt,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Tt))),Pc(Vt,Jt)&&Jt&&ie.focusVisible&&this.focus(),D.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(so.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,er.q)(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(so.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=Se(this._contentEl.nativeElement,"focusin"),o=Se(this._contentEl.nativeElement,"focusout"),{nativeElement:d}=this._elementRef;(0,Vn.T)(t,o).pipe((0,Nn.h)(({target:m,relatedTarget:D})=>!(a_(m,"ngb-dp-day")&&a_(D,"ngb-dp-day")&&d.contains(m)&&d.contains(D))),Fn(this._destroyed$)).subscribe(({type:m})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===m})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(o=>t[o]=this[o]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const o={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(d=>d in t).forEach(d=>o[d]=this[d]),this._service.set(o),"startDate"in t){const{currentValue:d,previousValue:m}=t.startDate;rv(m,d)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case kc.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case kc.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=so.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pg),h.Y36(Od),h.Y36(ml),h.Y36(tp),h.Y36(h.sBO),h.Y36(h.SBq),h.Y36(zl),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,np,7),2&t){let m;h.iGM(m=h.CRH())&&(o.contentTemplate=m.first)}},viewQuery:function(t,o){if(1&t&&(h.Gf(rg,7),h.Gf(Yu,7)),2&t){let d;h.iGM(d=h.CRH())&&(o._defaultDayTemplate=d.first),h.iGM(d=h.CRH())&&(o._contentEl=d.first)}},hostVars:2,hostBindings:function(t,o){2&t&&h.ekj("disabled",o.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[h._Bn([{provide:pn,useExisting:(0,h.Gpc)(()=>n),multi:!0},pg]),h.TTD,h.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,o){if(1&t&&(h.YNc(0,Io,1,5,"ng-template",null,0,h.W1O),h.YNc(2,_d,1,1,"ng-template",null,1,h.W1O),h.TgZ(4,"div",2),h.YNc(5,es,1,7,"ngb-datepicker-navigation",3),h.qZA(),h.TgZ(6,"div",4,5),h.YNc(8,Rs,0,0,"ng-template",6),h.qZA(),h.YNc(9,yd,0,0,"ng-template",6)),2&t){const d=h.MAs(3);h.xp6(5),h.Q6J("ngIf","none"!==o.navigation),h.xp6(1),h.ekj("ngb-dp-months",!o.contentTemplate),h.xp6(2),h.Q6J("ngTemplateOutlet",(null==o.contentTemplate?null:o.contentTemplate.templateRef)||d),h.xp6(1),h.Q6J("ngTemplateOutlet",o.footerTemplate)}},dependencies:[De.O5,De.ax,De.tP,Nh,Rh,sc],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const p_=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function lv(n){const r=Array.from(n.querySelectorAll(p_)).filter(t=>-1!==t.tabIndex);return[r[0],r[r.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let vv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[rp,Rh]}),n})(),Cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class Ld{constructor(r,t,o){this.nodes=r,this.viewRef=t,this.componentRef=o}}let Lb=(()=>{class n{constructor(t,o){this._el=t,this._zone=o}ngOnInit(){this._zone.onStable.asObservable().pipe((0,er.q)(1)).subscribe(()=>{io(this._zone,this._el.nativeElement,(t,o)=>{o&&ec(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return io(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,o){2&t&&(h.Tol("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),h.ekj("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[h.jDz],decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})();class Tg{close(r){}dismiss(r){}}class wv{constructor(r,t,o,d){this._windowCmptRef=r,this._contentRef=t,this._backdropCmptRef=o,this._beforeDismiss=d,this._closed=new It.x,this._dismissed=new It.x,this._hidden=new It.x,r.instance.dismissEvent.subscribe(m=>{this.dismiss(m)}),this.result=new Promise((m,D)=>{this._resolve=m,this._reject=D}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Fn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Fn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(r){this._windowCmptRef&&(this._closed.next(r),this._resolve(r),this._removeModalElements())}_dismiss(r){this._dismissed.next(r),this._reject(r),this._removeModalElements()}dismiss(r){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function Xy(n){return n&&n.then}(t)?!1!==t&&this._dismiss(r):t.then(o=>{!1!==o&&this._dismiss(r)},()=>{})}else this._dismiss(r)}_removeModalElements(){const r=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,mt.of)(void 0);r.subscribe(()=>{const{nativeElement:o}=this._windowCmptRef.location;o.parentNode.removeChild(o),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:o}=this._backdropCmptRef.location;o.parentNode.removeChild(o),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Rn(r,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ud=(()=>{return(n=Ud||(Ud={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",Ud;var n})();let A_=(()=>{class n{constructor(t,o,d){this._document=t,this._elRef=o,this._zone=d,this._closed$=new It.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new It.x,this.hidden=new It.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":$l(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,er.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,o={animation:this.animation,runningTransition:"stop"},D=Rn(io(this._zone,t,()=>t.classList.remove("show"),o),io(this._zone,this._dialogEl.nativeElement,()=>{},o));return D.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),D}_show(){const t={animation:this.animation,runningTransition:"continue"};Rn(io(this._zone,this._elRef.nativeElement,(m,D)=>{D&&ec(m),m.classList.add("show")},t),io(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Se(t,"keydown").pipe(Fn(this._closed$),(0,Nn.h)(d=>d.which===fr.Escape)).subscribe(d=>{this.keyboard?requestAnimationFrame(()=>{d.defaultPrevented||this._zone.run(()=>this.dismiss(Ud.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let o=!1;Se(this._dialogEl.nativeElement,"mousedown").pipe(Fn(this._closed$),(0,ti.b)(()=>o=!1),(0,Ut.w)(()=>Se(t,"mouseup").pipe(Fn(this._closed$),(0,er.q)(1))),(0,Nn.h)(({target:d})=>t===d)).subscribe(()=>{o=!0}),Se(t,"click").pipe(Fn(this._closed$)).subscribe(({target:d})=>{t===d&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!o&&this._zone.run(()=>this.dismiss(Ud.BACKDROP_CLICK))),o=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const o=t.querySelector("[ngbAutofocus]"),d=lv(t)[0];(o||d||t).focus()}}_restoreFocus(){const t=this._document.body,o=this._elWithFocus;let d;d=o&&o.focus&&t.contains(o)?o:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>d.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&io(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(De.K0),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,o){if(1&t&&h.Gf(vd,7),2&t){let d;h.iGM(d=h.CRH())&&(o._dialogEl=d.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,o){2&t&&(h.uIk("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),h.Tol("modal d-block"+(o.windowClass?" "+o.windowClass:"")),h.ekj("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[h.jDz],ngContentSelectors:Tc,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,o){1&t&&(h.F$t(),h.TgZ(0,"div",0,1)(2,"div",2),h.Hsn(3),h.qZA()()),2&t&&h.Tol("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),pp=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),o=this._document.body,d=o.style,{overflow:m,paddingRight:D}=d;if(t>0){const P=parseFloat(window.getComputedStyle(o).paddingRight);d.paddingRight=`${P+t}px`}return d.overflow="hidden",()=>{t>0&&(d.paddingRight=D),d.overflow=m}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(De.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uh=(()=>{class n{constructor(t,o,d,m,D,P,U){this._applicationRef=t,this._injector=o,this._environmentInjector=d,this._document=m,this._scrollBar=D,this._rendererFactory=P,this._ngZone=U,this._activeWindowCmptHasChanged=new It.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const W=this._windowCmpts[this._windowCmpts.length-1];((n,r,t,o=!1)=>{n.runOutsideAngular(()=>{const d=Se(r,"focusin").pipe(Fn(t),(0,tr.U)(m=>m.target));Se(r,"keydown").pipe(Fn(t),(0,Nn.h)(m=>m.which===fr.Tab),kr(d)).subscribe(([m,D])=>{const[P,U]=lv(r);(D===P||D===r)&&m.shiftKey&&(U.focus(),m.preventDefault()),D===U&&!m.shiftKey&&(P.focus(),m.preventDefault())}),o&&Se(r,"click").pipe(Fn(t),kr(d),(0,tr.U)(m=>m[1])).subscribe(m=>m.focus())})})(this._ngZone,W.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(W.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,o,d){const m=d.container instanceof HTMLElement?d.container:Id(d.container)?this._document.querySelector(d.container):this._document.body,D=this._rendererFactory.createRenderer(null,null);if(!m)throw new Error(`The specified modal container "${d.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const P=new Tg,U=(t=d.injector||t).get(h.lqb,null)||this._environmentInjector,W=this._getContentRef(t,U,o,P,d);let ie=!1!==d.backdrop?this._attachBackdrop(m):void 0,we=this._attachWindowComponent(m,W.nodes),Ee=new wv(we,W,ie,d.beforeDismiss);return this._registerModalRef(Ee),this._registerWindowCmpt(we),Ee.hidden.pipe((0,er.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(D.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),P.close=Ge=>{Ee.close(Ge)},P.dismiss=Ge=>{Ee.dismiss(Ge)},this._applyWindowOptions(we.instance,d),1===this._modalRefs.length&&D.addClass(this._document.body,"modal-open"),ie&&ie.instance&&(this._applyBackdropOptions(ie.instance,d),ie.changeDetectorRef.detectChanges()),we.changeDetectorRef.detectChanges(),Ee}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(o=>o.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let o=(0,h.LMc)(Lb,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(o.hostView),t.appendChild(o.location.nativeElement),o}_attachWindowComponent(t,o){let d=(0,h.LMc)(A_,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:o});return this._applicationRef.attachView(d.hostView),t.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,o){this._windowAttributes.forEach(d=>{Id(o[d])&&(t[d]=o[d])})}_applyBackdropOptions(t,o){this._backdropAttributes.forEach(d=>{Id(o[d])&&(t[d]=o[d])})}_getContentRef(t,o,d,m,D){return d?d instanceof h.Rgc?this._createFromTemplateRef(d,m):$l(d)?this._createFromString(d):this._createFromComponent(t,o,d,m,D):new Ld([])}_createFromTemplateRef(t,o){const m=t.createEmbeddedView({$implicit:o,close(D){o.close(D)},dismiss(D){o.dismiss(D)}});return this._applicationRef.attachView(m),new Ld([m.rootNodes],m)}_createFromString(t){const o=this._document.createTextNode(`${t}`);return new Ld([[o]])}_createFromComponent(t,o,d,m,D){const P=h.zs3.create({providers:[{provide:Tg,useValue:m}],parent:t}),U=(0,h.LMc)(d,{environmentInjector:o,elementInjector:P}),W=U.location.nativeElement;return D.scrollable&&W.classList.add("component-host-scrollable"),this._applicationRef.attachView(U.hostView),new Ld([[W]],U.hostView,U)}_setAriaHidden(t){const o=t.parentElement;o&&t!==this._document.body&&(Array.from(o.children).forEach(d=>{d!==t&&"SCRIPT"!==d.nodeName&&(this._ariaHiddenValues.set(d,d.getAttribute("aria-hidden")),d.setAttribute("aria-hidden","true"))}),this._setAriaHidden(o))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,o)=>{t?o.setAttribute("aria-hidden",t):o.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const o=()=>{const d=this._modalRefs.indexOf(t);d>-1&&(this._modalRefs.splice(d,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(o,o)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const o=this._windowCmpts.indexOf(t);o>-1&&(this._windowCmpts.splice(o,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(h.lqb),h.LFG(De.K0),h.LFG(pp),h.LFG(h.FYo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bh=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sd))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ev=(()=>{class n{constructor(t,o,d){this._injector=t,this._modalStack=o,this._config=d}open(t,o={}){const d={...this._config,animation:this._config.animation,...o};return this._modalStack.open(this._injector,t,d)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(Uh),h.LFG(Bh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ev]}),n})();const Ub=({classList:n})=>(n.remove("show"),()=>n.remove("active")),oo=(n,r)=>{r&&ec(n),n.classList.add("show")};let zc=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,o){2&t&&(h.Ikx("id",o.item.panelDomId),h.uIk("role",o.role?o.role:o.nav.roles?"tabpanel":void 0)("aria-labelledby",o.item.domId),h.ekj("fade",o.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),gp=(()=>{class n{constructor(t,o){this._cd=t,this._ngZone=o,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Fn(this.nav.destroy$),(0,Xt.O)(this._activePane?.item||null),(0,Sn.x)(),function cn(n){return(0,Nn.h)((r,t)=>n<=t)}(1)).subscribe(t=>{const o={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?io(this._ngZone,this._activePane.elRef.nativeElement,Ub,o).subscribe(()=>{const d=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),io(this._ngZone,this._activePane.elRef.nativeElement,oo,o).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),d&&(d.hidden.emit(),this.nav.hidden.emit(d.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(o=>o.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,o){if(1&t&&h.Gf(zc,5),2&t){let d;h.iGM(d=h.CRH())&&(o._panes=d)}},hostVars:2,hostBindings:function(t,o){2&t&&h.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[h.jDz],attrs:Eh,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,o){1&t&&h.YNc(0,M,1,1,"ng-template",0),2&t&&h.Q6J("ngForOf",o.nav.items)},dependencies:[zc,De.ax,De.O5,De.tP],encapsulation:2,changeDetection:0}),n})(),Wc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[gp]}),n})(),$h=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ag=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),Og=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),Ng=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),Mg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),N_=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),zh=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),Cv=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),Tv=(()=>{class n{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new h.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,o){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),o<this.pageCount&&(o<this.pageCount-2?this.pages.push(-1):o===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,o=this.pageCount,d=Math.floor(this.maxSize/2);return this.page<=d?o=this.maxSize:this.pageCount-this.page<d?t=this.pageCount-this.maxSize:(t=this.page-d-1,o=this.page+(this.maxSize%2==0?d-1:d)),[t,o]}_applyPagination(){let o=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[o,o+this.maxSize]}_setPageInRange(t){const o=this.page;this.page=Dd(t,this.pageCount,1),this.page!==o&&Ds(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Ds(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let o=1;o<=this.pageCount;o++)this.pages.push(o);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let o=0,d=this.pageCount;[o,d]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(o,d),this._applyEllipses(o,d)}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($h))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-pagination"]],contentQueries:function(t,o,d){if(1&t&&(h.Suo(d,Ag,5),h.Suo(d,Og,5),h.Suo(d,Ng,5),h.Suo(d,Mg,5),h.Suo(d,N_,5),h.Suo(d,zh,5),h.Suo(d,Cv,5)),2&t){let m;h.iGM(m=h.CRH())&&(o.tplEllipsis=m.first),h.iGM(m=h.CRH())&&(o.tplFirst=m.first),h.iGM(m=h.CRH())&&(o.tplLast=m.first),h.iGM(m=h.CRH())&&(o.tplNext=m.first),h.iGM(m=h.CRH())&&(o.tplNumber=m.first),h.iGM(m=h.CRH())&&(o.tplPrevious=m.first),h.iGM(m=h.CRH())&&(o.tplPages=m.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[h.TTD,h.jDz],decls:20,vars:12,consts:function(){let r,t,o,d,m,D,P,U;return r=$localize`:@@ngb.pagination.first:««`,t=$localize`:@@ngb.pagination.previous:«`,o=$localize`:@@ngb.pagination.next:»`,d=$localize`:@@ngb.pagination.last:»»`,m=$localize`:@@ngb.pagination.first-aria:First`,D=$localize`:@@ngb.pagination.previous-aria:Previous`,P=$localize`:@@ngb.pagination.next-aria:Next`,U=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],r,t,o,d,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",m,"href","",1,"page-link",3,"click"],["aria-label",D,"href","",1,"page-link",3,"click"],["aria-label",P,"href","",1,"page-link",3,"click"],["aria-label",U,"href","",1,"page-link",3,"click"]]},template:function(t,o){if(1&t&&(h.YNc(0,q,2,0,"ng-template",null,0,h.W1O),h.YNc(2,se,2,0,"ng-template",null,1,h.W1O),h.YNc(4,je,2,0,"ng-template",null,2,h.W1O),h.YNc(6,At,2,0,"ng-template",null,3,h.W1O),h.YNc(8,an,1,0,"ng-template",null,4,h.W1O),h.YNc(10,nr,2,2,"ng-template",null,5,h.W1O),h.YNc(12,_u,1,1,"ng-template",null,6,h.W1O),h.TgZ(14,"ul"),h.YNc(15,Ac,3,9,"li",7),h.YNc(16,Pi,3,8,"li",7),h.YNc(17,Oc,0,0,"ng-template",8),h.YNc(18,Qm,3,9,"li",7),h.YNc(19,Th,3,9,"li",7),h.qZA()),2&t){const d=h.MAs(13);h.xp6(14),h.Tol("pagination"+(o.size?" pagination-"+o.size:"")),h.xp6(1),h.Q6J("ngIf",o.boundaryLinks),h.xp6(1),h.Q6J("ngIf",o.directionLinks),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==o.tplPages?null:o.tplPages.templateRef)||d)("ngTemplateOutletContext",h.kEZ(8,Xm,o.page,o.pages,o.disabled)),h.xp6(1),h.Q6J("ngIf",o.directionLinks),h.xp6(1),h.Q6J("ngIf",o.boundaryLinks)}},dependencies:[De.O5,De.ax,De.tP],encapsulation:2,changeDetection:0}),n})(),Rg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Tv]}),n})(),kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Vb=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fg=(()=>{class n{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!Ds(t)||t<=0?100:t}get max(){return this._max}getValue(){return Dd(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Vb))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,o){2&t&&(h.uIk("aria-valuenow",o.getValue())("aria-valuemax",o.max)("aria-label",o.ariaLabel),h.Udp("height",o.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[h.jDz],ngContentSelectors:Tc,decls:3,vars:11,consts:function(){let r;return r=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],r]},template:function(t,o){1&t&&(h.F$t(),h.TgZ(0,"div"),h.YNc(1,e_,3,3,"span",0),h.Hsn(2),h.qZA()),2&t&&(h.MT6("progress-bar",o.type?o.textType?" bg-"+o.type:" text-bg-"+o.type:"","",o.textType?" text-"+o.textType:"",""),h.Udp("width",o.getPercentValue(),"%"),h.ekj("progress-bar-animated",o.animated)("progress-bar-striped",o.striped),h.xp6(1),h.Q6J("ngIf",o.showValue))},dependencies:[De.O5,De.Zx],encapsulation:2,changeDetection:0}),n})(),Ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Fg]}),n})(),R_=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wh=(()=>{class n{constructor(t,o){this._changeDetectorRef=o,this.contexts=[],this.disabled=!1,this.hover=new h.vpe,this.leave=new h.vpe,this.rateChange=new h.vpe(!0),this.onChange=d=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case fr.ArrowDown:case fr.ArrowLeft:this.update(this.rate-1);break;case fr.ArrowUp:case fr.ArrowRight:this.update(this.rate+1);break;case fr.Home:this.update(0);break;case fr.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,o=!0){const d=Dd(t,this.max,0);this.isInteractive()&&this.rate!==d&&(this.rate=d,this.rateChange.emit(this.rate)),o&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((o,d)=>o.fill=Math.round(100*Dd(t-d,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,o)=>({fill:0,index:o}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(R_),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,h.Rgc,5),2&t){let m;h.iGM(m=h.CRH())&&(o.starTemplateFromContent=m.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,o){1&t&&h.NdJ("blur",function(){return o.handleBlur()})("keydown",function(m){return o.handleKeyDown(m)})("mouseleave",function(){return o.reset()}),2&t&&(h.Ikx("tabindex",o.disabled?-1:o.tabindex),h.uIk("aria-valuemax",o.max)("aria-valuenow",o.nextRate)("aria-valuetext",o.ariaValueText())("aria-disabled",!!o.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[h._Bn([{provide:pn,useExisting:(0,h.Gpc)(()=>n),multi:!0}]),h.TTD,h.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,o){1&t&&(h.YNc(0,Nc,1,1,"ng-template",null,0,h.W1O),h.YNc(2,wd,4,5,"ng-template",1)),2&t&&(h.xp6(2),h.Q6J("ngForOf",o.contexts))},dependencies:[De.ax,De.tP],encapsulation:2,changeDetection:0}),n})(),Lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Wh]}),n})();class x_{constructor(r,t,o){this.hour=xs(r),this.minute=xs(t),this.second=xs(o)}changeHour(r=1){this.updateHour((isNaN(this.hour)?0:this.hour)+r)}updateHour(r){this.hour=Ds(r)?(r<0?24+r:r)%24:NaN}changeMinute(r=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+r)}updateMinute(r){Ds(r)?(this.minute=r%60<0?60+r%60:r%60,this.changeHour(Math.floor(r/60))):this.minute=NaN}changeSecond(r=1){this.updateSecond((isNaN(this.second)?0:this.second)+r)}updateSecond(r){Ds(r)?(this.second=r<0?60+r%60:r%60,this.changeMinute(Math.floor(r/60))):this.second=NaN}isValid(r=!0){return Ds(this.hour)&&Ds(this.minute)&&(!r||Ds(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Kh=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function P_(){return new Iu}()},providedIn:"root"}),n})(),Iu=(()=>{class n extends Nv{fromModel(t){return t&&ts(t.hour)&&ts(t.minute)?{hour:t.hour,minute:t.minute,second:ts(t.second)?t.second:null}:null}toModel(t){return t&&ts(t.hour)&&ts(t.minute)?{hour:t.hour,minute:t.minute,second:ts(t.second)?t.second:null}:null}}return n.\u0275fac=function(){let r;return function(o){return(r||(r=h.n5z(n)))(o||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let o=null;return o=t?new t:function Ug(n){return new Gb(n)}(h.LFG(h.soG)),o},providedIn:"root"}),n})(),Gb=(()=>{class n extends k_{constructor(t){super(),this._periods=(0,De.ol)(t,De.x.Standalone,De.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Bg=/[^0-9]/g;let jb=(()=>{class n{constructor(t,o,d,m){this._config=t,this._ngbTimeAdapter=o,this._cd=d,this.i18n=m,this.onChange=D=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=ts(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=ts(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=ts(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const o=this._ngbTimeAdapter.fromModel(t);this.model=o?new x_(o.hour,o.minute,o.second):new x_,!this.seconds&&(!o||!Ds(o.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const o=!!this.model&&this.model.hour>=12,d=xs(t);this.model?.updateHour(this.meridian&&(o&&d<12||!o&&12===d)?d+12:d),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(xs(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(xs(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(Bg,"")}formatHour(t){return Ds(t)?Rc(this.meridian?t%12==0?12:t%12:t%24):Rc(NaN)}formatMinSec(t){return Rc(Ds(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!Ds(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Kh),h.Y36(Nv),h.Y36(h.sBO),h.Y36(k_))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[h._Bn([{provide:pn,useExisting:(0,h.Gpc)(()=>n),multi:!0}]),h.TTD,h.jDz],decls:16,vars:25,consts:function(){let r,t,o,d,m,D,P,U,W,ie,we,Ee,Ge,Tt;return r=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,o=$localize`:@@ngb.timepicker.MM:MM`,d=$localize`:@@ngb.timepicker.minutes:Minutes`,m=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,D=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,P=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,U=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,W=$localize`:@@ngb.timepicker.SS:SS`,ie=$localize`:@@ngb.timepicker.seconds:Seconds`,we=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,Ee=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,Ge=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,Tt=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",r,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",o,"aria-label",d,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],m,[1,"chevron","ngb-tp-chevron","bottom"],D,P,U,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",W,"aria-label",ie,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],we,Ee,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],Ge,Tt]},template:function(t,o){1&t&&(h.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),h.YNc(3,n_,4,7,"button",3),h.TgZ(4,"input",4),h.NdJ("change",function(m){return o.updateHour(m.target.value)})("blur",function(){return o.handleBlur()})("input",function(m){return o.formatInput(m.target)})("keydown.ArrowUp",function(m){return o.changeHour(o.hourStep),m.preventDefault()})("keydown.ArrowDown",function(m){return o.changeHour(-o.hourStep),m.preventDefault()}),h.qZA(),h.YNc(5,eE,4,7,"button",3),h.qZA(),h.TgZ(6,"div",5),h._uU(7,":"),h.qZA(),h.TgZ(8,"div",6),h.YNc(9,us,4,7,"button",3),h.TgZ(10,"input",7),h.NdJ("change",function(m){return o.updateMinute(m.target.value)})("blur",function(){return o.handleBlur()})("input",function(m){return o.formatInput(m.target)})("keydown.ArrowUp",function(m){return o.changeMinute(o.minuteStep),m.preventDefault()})("keydown.ArrowDown",function(m){return o.changeMinute(-o.minuteStep),m.preventDefault()}),h.qZA(),h.YNc(11,zr,4,7,"button",3),h.qZA(),h.YNc(12,r_,2,0,"div",8),h.YNc(13,s_,4,9,"div",9),h.YNc(14,Sa,1,0,"div",8),h.YNc(15,o_,5,9,"div",10),h.qZA()()),2&t&&(h.ekj("disabled",o.disabled),h.Q6J("disabled",o.disabled),h.xp6(3),h.Q6J("ngIf",o.spinners),h.xp6(1),h.ekj("form-control-sm",o.isSmallSize)("form-control-lg",o.isLargeSize),h.Q6J("value",o.formatHour(null==o.model?null:o.model.hour))("readOnly",o.readonlyInputs)("disabled",o.disabled),h.xp6(1),h.Q6J("ngIf",o.spinners),h.xp6(4),h.Q6J("ngIf",o.spinners),h.xp6(1),h.ekj("form-control-sm",o.isSmallSize)("form-control-lg",o.isLargeSize),h.Q6J("value",o.formatMinSec(null==o.model?null:o.model.minute))("readOnly",o.readonlyInputs)("disabled",o.disabled),h.xp6(1),h.Q6J("ngIf",o.spinners),h.xp6(1),h.Q6J("ngIf",o.seconds),h.xp6(1),h.Q6J("ngIf",o.seconds),h.xp6(1),h.Q6J("ngIf",o.meridian),h.xp6(1),h.Q6J("ngIf",o.meridian))},dependencies:[De.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),Vg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[jb]}),n})();const Hb=(n,r)=>{const{classList:t}=n;if(r)return t.add("fade"),ec(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},yp=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let $b=(()=>{class n{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sd))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),vp=(()=>{class n{constructor(t,o,d,m){this.ariaLive=t,this._zone=d,this._element=m,this.contentHeaderTpl=null,this.shown=new h.vpe,this.hidden=new h.vpe,null==this.ariaLive&&(this.ariaLive=o.ariaLive),this.delay=o.delay,this.autohide=o.autohide,this.animation=o.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,er.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=io(this._zone,this._element.nativeElement,yp,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=io(this._zone,this._element.nativeElement,Hb,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(t){return new(t||n)(h.$8M("aria-live"),h.Y36($b),h.Y36(h.R0b),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-toast"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,F_,7,h.Rgc),2&t){let m;h.iGM(m=h.CRH())&&(o.contentHeaderTpl=m.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,o){2&t&&(h.uIk("aria-live",o.ariaLive),h.ekj("fade",o.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[h.TTD,h.jDz],ngContentSelectors:Tc,decls:5,vars:1,consts:function(){let r;return r=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",r,1,"btn-close",3,"click"]]},template:function(t,o){1&t&&(h.F$t(),h.YNc(0,Nl,2,1,"ng-template",null,0,h.W1O),h.YNc(2,Ed,3,1,"ng-template",1),h.TgZ(3,"div",2),h.Hsn(4),h.qZA()),2&t&&(h.xp6(2),h.Q6J("ngIf",o.contentHeaderTpl||o.header))},dependencies:[De.O5,De.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[vp]}),n})(),wp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),jd=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const o=Ah(this.result),d=Array.isArray(this.term)?this.term:[this.term],m=W=>this.accentSensitive?W:cs(W),D=d.map(W=>function ab(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(m(Ah(W)))).filter(W=>W),P=this.accentSensitive?o:cs(o),U=D.length?P.split(new RegExp(`(${D.join("|")})`,"gmi")):[o];if(this.accentSensitive)this.parts=U;else{let W=0;this.parts=U.map(ie=>o.substring(W,W+=ie.length))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[h.TTD,h.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,o){1&t&&h.YNc(0,lr,3,2,"ng-template",0),2&t&&h.Q6J("ngForOf",o.parts)},dependencies:[De.O5,De.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new h.OlP("live announcer delay",{providedIn:"root",factory:function ac(){return 100}});let Dp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[jd]}),n})(),U_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Pv=[ug,xc,nv,Xf,vv,Cg,Vh,Wc,U_,Rg,kg,Ov,Lg,Vg,qh,wp,Dp];let kv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Pv,ug,xc,nv,Xf,vv,Cg,Vh,Wc,U_,Rg,kg,Ov,Lg,Vg,qh,wp,Dp]}),n})();var lc=j(2011),uc=j(1205),sa=j(2122),Gg=j(3942),cc=j(5861),Cu=j(9681),le=j(2090),dc=j(4859);const Lv="firebasestorage.googleapis.com",jg="storageBucket";class rs extends le.ZR{constructor(r,t,o=0){super(Bv(r),`Firebase Storage: ${t} (${Bv(r)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return Bv(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var wi=(()=>{return(n=wi||(wi={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",wi;var n})();function Bv(n){return"storage/"+n}function Xh(){return new rs(wi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Hg(){return new rs(wi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oa(){return new rs(wi.CANCELED,"User canceled the upload/download.")}function zd(){return new rs(wi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yl(n){return new rs(wi.INVALID_ARGUMENT,n)}function Wd(){return new rs(wi.APP_DELETED,"The Firebase app was deleted.")}function Kd(n){return new rs(wi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rl(n,r){return new rs(wi.INVALID_FORMAT,"String does not match format '"+n+"': "+r)}function Tu(n){throw new rs(wi.INTERNAL_ERROR,"Internal error: "+n)}class ds{constructor(r,t){this.bucket=r,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,t){let o;try{o=ds.makeFromUrl(r,t)}catch{return new ds(r,"")}if(""===o.path)return o;throw function Co(n){return new rs(wi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(r)}static makeFromUrl(r,t){let o=null;const d="([A-Za-z0-9.\\-_]+)",P=new RegExp("^gs://"+d+"(/(.*))?$","i");function W(Kn){Kn.path_=decodeURIComponent(Kn.path)}const we=t.replace(/[.]/g,"\\."),sr=[{regex:P,indices:{bucket:1,path:3},postModify:function m(Kn){"/"===Kn.path.charAt(Kn.path.length-1)&&(Kn.path_=Kn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${we}/v[A-Za-z0-9_]+/b/${d}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:W},{regex:new RegExp(`^https?://${t===Lv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${d}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:W}];for(let Kn=0;Kn<sr.length;Kn++){const Dr=sr[Kn],Pr=Dr.regex.exec(r);if(Pr){let hi=Pr[Dr.indices.path];hi||(hi=""),o=new ds(Pr[Dr.indices.bucket],hi),Dr.postModify(o);break}}if(null==o)throw function tf(n){return new rs(wi.INVALID_URL,"Invalid URL '"+n+"'.")}(r);return o}}class rf{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}function sf(n){return"string"==typeof n||n instanceof String}function H_(n){return Wg()&&n instanceof Blob}function Wg(){return typeof Blob<"u"&&!(0,le.UG)()}function af(n,r,t,o){if(o<r)throw yl(`Invalid value for '${n}'. Expected ${r} or greater.`);if(o>t)throw yl(`Invalid value for '${n}'. Expected ${t} or less.`)}function Su(n,r,t){let o=r;return null==t&&(o=`https://${r}`),`${t}://${o}/v0${n}`}function Kg(n){const r=encodeURIComponent;let t="?";for(const o in n)n.hasOwnProperty(o)&&(t=t+(r(o)+"=")+r(n[o])+"&");return t=t.slice(0,-1),t}var Au=(()=>{return(n=Au||(Au={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Au;var n})();function Tp(n,r){const t=n>=500&&n<600,d=-1!==[408,429].indexOf(n),m=-1!==r.indexOf(n);return t||d||m}class Yb{constructor(r,t,o,d,m,D,P,U,W,ie,we,Ee=!0){this.url_=r,this.method_=t,this.headers_=o,this.body_=d,this.successCodes_=m,this.additionalRetryCodes_=D,this.callback_=P,this.errorCallback_=U,this.timeout_=W,this.progressCallback_=ie,this.connectionFactory_=we,this.retry=Ee,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ge,Tt)=>{this.resolve_=Ge,this.reject_=Tt,this.start_()})}start_(){const t=(o,d)=>{const m=this.resolve_,D=this.reject_,P=d.connection;if(d.wasSuccessCode)try{const U=this.callback_(P,P.getResponse());!function $g(n){return void 0!==n}(U)?m():m(U)}catch(U){D(U)}else if(null!==P){const U=Xh();U.serverResponse=P.getErrorText(),D(this.errorCallback_?this.errorCallback_(P,U):U)}else D(d.canceled?this.appDelete_?Wd():oa():Hg())};this.canceled_?t(0,new lf(!1,null,!0)):this.backoffId_=function Kc(n,r,t){let o=1,d=null,m=null,D=!1,P=0;function U(){return 2===P}let W=!1;function ie(...Jt){W||(W=!0,r.apply(null,Jt))}function we(Jt){d=setTimeout(()=>{d=null,n(Ge,U())},Jt)}function Ee(){m&&clearTimeout(m)}function Ge(Jt,...Un){if(W)return void Ee();if(Jt)return Ee(),void ie.call(null,Jt,...Un);if(U()||D)return Ee(),void ie.call(null,Jt,...Un);let sr;o<64&&(o*=2),1===P?(P=2,sr=0):sr=1e3*(o+Math.random()),we(sr)}let Tt=!1;function Vt(Jt){Tt||(Tt=!0,Ee(),!W&&(null!==d?(Jt||(P=2),clearTimeout(d),we(0)):Jt||(P=1)))}return we(0),m=setTimeout(()=>{D=!0,Vt(!0)},t),Vt}((o,d)=>{if(d)return void o(!1,new lf(!1,null,!0));const m=this.connectionFactory_();this.pendingConnection_=m;const D=P=>{null!==this.progressCallback_&&this.progressCallback_(P.loaded,P.lengthComputable?P.total:-1)};null!==this.progressCallback_&&m.addUploadProgressListener(D),m.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&m.removeUploadProgressListener(D),this.pendingConnection_=null;const P=m.getErrorCode()===Au.NO_ERROR,U=m.getStatus();if(!P||Tp(U,this.additionalRetryCodes_)&&this.retry){const ie=m.getErrorCode()===Au.ABORT;return void o(!1,new lf(!1,null,ie))}const W=-1!==this.successCodes_.indexOf(U);o(!0,new lf(W,m))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,null!==this.backoffId_&&function Vv(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class lf{constructor(r,t,o){this.wasSuccessCode=r,this.connection=t,this.canceled=!!o}}function Zb(...n){const r=function W_(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==r){const t=new r;for(let o=0;o<n.length;o++)t.append(n[o]);return t.getBlob()}if(Wg())return new Blob(n);throw new rs(wi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Oa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uf{constructor(r,t){this.data=r,this.contentType=t||null}}function cf(n,r){switch(n){case Oa.RAW:return new uf(Ap(r));case Oa.BASE64:case Oa.BASE64URL:return new uf(df(n,r));case Oa.DATA_URL:return new uf(function K_(n){const r=new hf(n);return r.base64?df(Oa.BASE64,r.rest):function Qg(n){let r;try{r=decodeURIComponent(n)}catch{throw Rl(Oa.DATA_URL,"Malformed data URL.")}return Ap(r)}(r.rest)}(r),function q_(n){return new hf(n).contentType}(r))}throw Xh()}function Ap(n){const r=[];for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);o<=127?r.push(o):o<=2047?r.push(192|o>>6,128|63&o):55296==(64512&o)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(o=65536|(1023&o)<<10|1023&n.charCodeAt(++t),r.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):r.push(239,191,189):56320==(64512&o)?r.push(239,191,189):r.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(r)}function df(n,r){switch(n){case Oa.BASE64:{const d=-1!==r.indexOf("-"),m=-1!==r.indexOf("_");if(d||m)throw Rl(n,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case Oa.BASE64URL:{const d=-1!==r.indexOf("+"),m=-1!==r.indexOf("/");if(d||m)throw Rl(n,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Zg(n){if(typeof atob>"u")throw function nf(n){return new rs(wi.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(r)}catch(d){throw d.message.includes("polyfill")?d:Rl(n,"Invalid character found")}const o=new Uint8Array(t.length);for(let d=0;d<t.length;d++)o[d]=t.charCodeAt(d);return o}class hf{constructor(r){this.base64=!1,this.contentType=null;const t=r.match(/^data:([^,]+)?,/);if(null===t)throw Rl(Oa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;null!=o&&(this.base64=function Op(n,r){return n.length>=r.length&&n.substring(n.length-r.length)===r}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=r.substring(r.indexOf(",")+1)}}class vl{constructor(r,t){let o=0,d="";H_(r)?(this.data_=r,o=r.size,d=r.type):r instanceof ArrayBuffer?(t?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),o=this.data_.length):r instanceof Uint8Array&&(t?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),o=r.length),this.size_=o,this.type_=d}size(){return this.size_}type(){return this.type_}slice(r,t){if(H_(this.data_)){const d=function Yg(n,r,t){return n.webkitSlice?n.webkitSlice(r,t):n.mozSlice?n.mozSlice(r,t):n.slice?n.slice(r,t):null}(this.data_,r,t);return null===d?null:new vl(d)}{const o=new Uint8Array(this.data_.buffer,r,t-r);return new vl(o,!0)}}static getBlob(...r){if(Wg()){const t=r.map(o=>o instanceof vl?o.data_:o);return new vl(Zb.apply(null,t))}{const t=r.map(D=>sf(D)?cf(Oa.RAW,D).data:D.data_);let o=0;t.forEach(D=>{o+=D.byteLength});const d=new Uint8Array(o);let m=0;return t.forEach(D=>{for(let P=0;P<D.length;P++)d[m++]=D[P]}),new vl(d,!0)}}uploadData(){return this.data_}}function ff(n){let r;try{r=JSON.parse(n)}catch{return null}return function zg(n){return"object"==typeof n&&!Array.isArray(n)}(r)?r:null}function Np(n){const r=n.lastIndexOf("/",n.length-2);return-1===r?n:n.slice(r+1)}function Y_(n,r){return r}class To{constructor(r,t,o,d){this.server=r,this.local=t||r,this.writable=!!o,this.xform=d||Y_}}let Mp=null;function pf(){if(Mp)return Mp;const n=[];n.push(new To("bucket")),n.push(new To("generation")),n.push(new To("metageneration")),n.push(new To("name","fullPath",!0));const t=new To("name");t.xform=function r(m,D){return function Z_(n){return!sf(n)||n.length<2?n:Np(n)}(D)},n.push(t);const d=new To("size");return d.xform=function o(m,D){return void 0!==D?Number(D):D},n.push(d),n.push(new To("timeCreated")),n.push(new To("updated")),n.push(new To("md5Hash",null,!0)),n.push(new To("cacheControl",null,!0)),n.push(new To("contentDisposition",null,!0)),n.push(new To("contentEncoding",null,!0)),n.push(new To("contentLanguage",null,!0)),n.push(new To("contentType",null,!0)),n.push(new To("metadata","customMetadata",!0)),Mp=n,Mp}function J_(n,r,t){const o=ff(r);return null===o?null:function jv(n,r,t){const o={type:"file"},d=t.length;for(let m=0;m<d;m++){const D=t[m];o[D.local]=D.xform(o,r[D.server])}return function Q_(n,r){Object.defineProperty(n,"ref",{get:function t(){const m=new ds(n.bucket,n.fullPath);return r._makeStorageReference(m)}})}(o,n),o}(n,o,t)}function Rp(n,r){const t={},o=r.length;for(let d=0;d<o;d++){const m=r[d];m.writable&&(t[m.server]=n[m.local])}return JSON.stringify(t)}const Zd="prefixes",Ou="items";class Na{constructor(r,t,o,d){this.url=r,this.method=t,this.handler=o,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $n(n){if(!n)throw Xh()}function Qd(n,r){return function t(o,d){const m=J_(n,d,r);return $n(null!==m),m}}function gf(n){return function r(t,o){let d;return d=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function G_(){return new rs(wi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function qb(){return new rs(wi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ef(n){return new rs(wi.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Ip(n){return new rs(wi.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):o,d.status=t.getStatus(),d.serverResponse=o.serverResponse,d}}function Ei(n){const r=gf(n);return function t(o,d){let m=r(o,d);return 404===o.getStatus()&&(m=function fE(n){return new rs(wi.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),m.serverResponse=d.serverResponse,m}}function So(n,r,t){const d=Su(r.fullServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,P=new Na(d,"GET",Qd(n,t),D);return P.errorHandler=Ei(r),P}function Nu(n,r,t,o,d){const m={};m.prefix=r.isRoot?"":r.path+"/",t&&t.length>0&&(m.delimiter=t),o&&(m.pageToken=o),d&&(m.maxResults=d);const P=Su(r.bucketOnlyServerUrl(),n.host,n._protocol),W=n.maxOperationRetryTime,ie=new Na(P,"GET",function Wv(n,r){return function t(o,d){const m=function zv(n,r,t){const o=ff(t);return null===o?null:function $v(n,r,t){const o={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Zd])for(const d of t[Zd]){const m=d.replace(/\/$/,""),D=n._makeStorageReference(new ds(r,m));o.prefixes.push(D)}if(t[Ou])for(const d of t[Ou]){const m=n._makeStorageReference(new ds(r,d.name));o.items.push(m)}return o}(n,r,o)}(n,r,d);return $n(null!==m),m}}(n,r.bucket),W);return ie.urlParams=m,ie.errorHandler=gf(r),ie}function Kv(n,r,t){const o=Object.assign({},t);return o.fullPath=n.path,o.size=r.size(),o.contentType||(o.contentType=function ey(n,r){return n&&n.contentType||r&&r.type()||"application/octet-stream"}(null,r)),o}class Xg{constructor(r,t,o,d){this.current=r,this.total=t,this.finalized=!!o,this.metadata=d||null}}function em(n,r){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{$n(!1)}return $n(!!t&&-1!==(r||["active"]).indexOf(t)),t}const ty={STATE_CHANGED:"state_changed"},Ma={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tm(n){switch(n){case"running":case"pausing":case"canceling":return Ma.RUNNING;case"paused":return Ma.PAUSED;case"success":return Ma.SUCCESS;case"canceled":return Ma.CANCELED;default:return Ma.ERROR}}class Xb{constructor(r,t,o){if(function j_(n){return"function"==typeof n}(r)||null!=t||null!=o)this.next=r,this.error=t??void 0,this.complete=o??void 0;else{const m=r;this.next=m.next,this.error=m.error,this.complete=m.complete}}}function qc(n){return(...r)=>{Promise.resolve().then(()=>n(...r))}}let nm=null;class Mu{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Au.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Au.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Au.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,t,o,d){if(this.sent_)throw Tu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,r,!0),void 0!==d)for(const m in d)d.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,d[m].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",r)}}class ew extends Mu{initXhr(){this.xhr_.responseType="text"}}function Kl(){return nm?nm():new ew}class ny{constructor(r,t,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=r,this._blob=t,this._metadata=o,this._mappings=pf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=d=>{if(this._request=void 0,this._chunkMultiplier=1,d._codeEquals(wi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const m=this.isExponentialBackoffExpired();if(Tp(d.status,[])){if(!m)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();d=Hg()}this._error=d,this._transition("error")}},this._metadataErrorHandler=d=>{this._request=void 0,d._codeEquals(wi.CANCELED)?this.completeTransitions_():(this._error=d,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((d,m)=>{this._resolve=d,this._reject=m,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const r=this._transferred;return t=>this._updateProgress(r+t)}_shouldDoResumable(r){return r.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(r){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,o])=>{switch(this._state){case"running":r(t,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((r,t)=>{const o=function ki(n,r,t,o,d){const m=r.bucketOnlyServerUrl(),D=Kv(r,o,d),P={name:D.fullPath},U=Su(m,n.host,n._protocol),ie={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":D.contentType,"Content-Type":"application/json; charset=utf-8"},we=Rp(D,t),Tt=new Na(U,"POST",function Ge(Vt){let Jt;em(Vt);try{Jt=Vt.getResponseHeader("X-Goog-Upload-URL")}catch{$n(!1)}return $n(sf(Jt)),Jt},n.maxUploadRetryTime);return Tt.urlParams=P,Tt.headers=ie,Tt.body=we,Tt.errorHandler=gf(r),Tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),d=this._ref.storage._makeRequest(o,Kl,r,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._uploadUrl=m,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const r=this._uploadUrl;this._resolveToken((t,o)=>{const d=function Pp(n,r,t,o){const U=new Na(t,"POST",function m(W){const ie=em(W,["active","final"]);let we=null;try{we=W.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$n(!1)}we||$n(!1);const Ee=Number(we);return $n(!isNaN(Ee)),new Xg(Ee,o.size(),"final"===ie)},n.maxUploadRetryTime);return U.headers={"X-Goog-Upload-Command":"query"},U.errorHandler=gf(r),U}(this._ref.storage,this._ref._location,r,this._blob),m=this._ref.storage._makeRequest(d,Kl,t,o);this._request=m,m.getPromise().then(D=>{this._request=void 0,this._updateProgress(D.current),this._needToFetchStatus=!1,D.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const r=262144*this._chunkMultiplier,t=new Xg(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((d,m)=>{let D;try{D=function Ps(n,r,t,o,d,m,D,P){const U=new Xg(0,0);if(D?(U.current=D.current,U.total=D.total):(U.current=0,U.total=o.size()),o.size()!==U.total)throw function Ys(){return new rs(wi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const W=U.total-U.current;let ie=W;d>0&&(ie=Math.min(ie,d));const we=U.current;let Ge="";Ge=0===ie?"finalize":W===ie?"upload, finalize":"upload";const Tt={"X-Goog-Upload-Command":Ge,"X-Goog-Upload-Offset":`${U.current}`},Vt=o.slice(we,we+ie);if(null===Vt)throw zd();const sr=new Na(t,"POST",function Jt(Kn,Dr){const Pr=em(Kn,["active","final"]),Li=U.current+ie,hi=o.size();let lo;return lo="final"===Pr?Qd(r,m)(Kn,Dr):null,new Xg(Li,hi,"final"===Pr,lo)},r.maxUploadRetryTime);return sr.headers=Tt,sr.body=Vt.uploadData(),sr.progressCallback=P||null,sr.errorHandler=gf(n),sr}(this._ref._location,this._ref.storage,o,this._blob,r,this._mappings,t,this._makeProgressCallback())}catch(U){return this._error=U,void this._transition("error")}const P=this._ref.storage._makeRequest(D,Kl,d,m,!1);this._request=P,P.getPromise().then(U=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(U.current),U.finalized?(this._metadata=U.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((r,t)=>{const o=So(this._ref.storage,this._ref._location,this._mappings),d=this._ref.storage._makeRequest(o,Kl,r,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((r,t)=>{const o=function xp(n,r,t,o,d){const m=r.bucketOnlyServerUrl(),D={"X-Goog-Upload-Protocol":"multipart"},U=function P(){let sr="";for(let Kn=0;Kn<2;Kn++)sr+=Math.random().toString().slice(2);return sr}();D["Content-Type"]="multipart/related; boundary="+U;const W=Kv(r,o,d),ie=Rp(W,t),Ge=vl.getBlob("--"+U+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ie+"\r\n--"+U+"\r\nContent-Type: "+W.contentType+"\r\n\r\n",o,"\r\n--"+U+"--");if(null===Ge)throw zd();const Tt={name:W.fullPath},Vt=Su(m,n.host,n._protocol),Un=n.maxUploadRetryTime,Bn=new Na(Vt,"POST",Qd(n,t),Un);return Bn.urlParams=Tt,Bn.headers=D,Bn.body=Ge.uploadData(),Bn.errorHandler=gf(r),Bn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),d=this._ref.storage._makeRequest(o,Kl,r,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(r){const t=this._transferred;this._transferred=r,this._transferred!==t&&this._notifyObservers()}_transition(r){if(this._state!==r)switch(r){case"canceling":case"pausing":this._state=r,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=r,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=r,this._notifyObservers();break;case"canceled":this._error=oa(),this._state=r,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const r=tm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:r,metadata:this._metadata,task:this,ref:this._ref}}on(r,t,o,d){const m=new Xb(t||void 0,o||void 0,d||void 0);return this._addObserver(m),()=>{this._removeObserver(m)}}then(r,t){return this._promise.then(r,t)}catch(r){return this.then(null,r)}_addObserver(r){this._observers.push(r),this._notifyObserver(r)}_removeObserver(r){const t=this._observers.indexOf(r);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let r=!0;switch(tm(this._state)){case Ma.SUCCESS:qc(this._resolve.bind(null,this.snapshot))();break;case Ma.CANCELED:case Ma.ERROR:qc(this._reject.bind(null,this._error))();break;default:r=!1}r&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(r){switch(tm(this._state)){case Ma.RUNNING:case Ma.PAUSED:r.next&&qc(r.next.bind(r,this.snapshot))();break;case Ma.SUCCESS:r.complete&&qc(r.complete.bind(r))();break;default:r.error&&qc(r.error.bind(r,this._error))()}}resume(){const r="paused"===this._state||"pausing"===this._state;return r&&this._transition("running"),r}pause(){const r="running"===this._state;return r&&this._transition("pausing"),r}cancel(){const r="running"===this._state||"pausing"===this._state;return r&&this._transition("canceling"),r}}class aa{constructor(r,t){this._service=r,this._location=t instanceof ds?t:ds.makeFromUrl(t,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,t){return new aa(r,t)}get root(){const r=new ds(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Np(this._location.path)}get storage(){return this._service}get parent(){const r=function Gv(n){if(0===n.length)return null;const r=n.lastIndexOf("/");return-1===r?"":n.slice(0,r)}(this._location.path);if(null===r)return null;const t=new ds(this._location.bucket,r);return new aa(this._service,t)}_throwIfRoot(r){if(""===this._location.path)throw Kd(r)}}function rm(n,r,t){return im.apply(this,arguments)}function im(){return(im=(0,cc.Z)(function*(n,r,t){const d=yield yf(n,{pageToken:t});r.prefixes.push(...d.prefixes),r.items.push(...d.items),null!=d.nextPageToken&&(yield rm(n,r,d.nextPageToken))})).apply(this,arguments)}function yf(n,r){null!=r&&"number"==typeof r.maxResults&&af("options.maxResults",1,1e3,r.maxResults);const t=r||{},o=Nu(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(o,Kl)}function sm(n){n._throwIfRoot("getDownloadURL");const r=function Qb(n,r,t){const d=Su(r.fullServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,P=new Na(d,"GET",function Jd(n,r){return function t(o,d){const m=J_(n,d,r);return $n(null!==m),function Hv(n,r,t,o){const d=ff(r);if(null===d||!sf(d.downloadTokens))return null;const m=d.downloadTokens;if(0===m.length)return null;const D=encodeURIComponent;return m.split(",").map(W=>{const we=n.fullPath;return Su("/b/"+D(n.bucket)+"/o/"+D(we),t,o)+Kg({alt:"media",token:W})})[0]}(m,d,n.host,n._protocol)}}(n,t),D);return P.errorHandler=Ei(r),P}(n.storage,n._location,pf());return n.storage.makeRequestWithTokens(r,Kl).then(t=>{if(null===t)throw function Cp(){return new rs(wi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function om(n,r){const t=function Yd(n,r){const t=r.split("/").filter(o=>o.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,r),o=new ds(n._location.bucket,t);return new aa(n.storage,o)}function ry(n,r){if(n instanceof Up){const t=n;if(null==t._bucket)throw function $d(){return new rs(wi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jg+"' property when initializing the app?")}();const o=new aa(t,t._bucket);return null!=r?ry(o,r):o}return void 0!==r?om(n,r):n}function Yv(n,r){if(r&&function Fp(n){return/^[A-Za-z]+:\/\//.test(n)}(r)){if(n instanceof Up)return function am(n,r){return new aa(n,r)}(n,r);throw yl("To use ref(service, url), the first argument must be a Storage instance.")}return ry(n,r)}function Lp(n,r){const t=r?.[jg];return null==t?null:ds.makeFromBucketSpec(t,n)}class Up{constructor(r,t,o,d,m){this.app=r,this._authProvider=t,this._appCheckProvider=o,this._url=d,this._firebaseVersion=m,this._bucket=null,this._host=Lv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=d?ds.makeFromBucketSpec(d,this._host):Lp(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,r):Lp(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){af("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){af("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}_getAuthToken(){var r=this;return(0,cc.Z)(function*(){if(r._overrideAuthToken)return r._overrideAuthToken;const t=r._authProvider.getImmediate({optional:!0});if(t){const o=yield t.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var r=this;return(0,cc.Z)(function*(){const t=r._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new aa(this,r)}_makeRequest(r,t,o,d,m=!0){if(this._deleted)return new rf(Wd());{const D=function qd(n,r,t,o,d,m,D=!0){const P=Kg(n.urlParams),U=n.url+P,W=Object.assign({},n.headers);return function z_(n,r){r&&(n["X-Firebase-GMPID"]=r)}(W,r),function qg(n,r){null!==r&&r.length>0&&(n.Authorization="Firebase "+r)}(W,t),function $_(n,r){n["X-Firebase-Storage-Version"]="webjs/"+(r??"AppManager")}(W,m),function Sp(n,r){null!==r&&(n["X-Firebase-AppCheck"]=r)}(W,o),new Yb(U,n.method,W,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,d,D)}(r,this._appId,o,d,t,this._firebaseVersion,m);return this._requests.add(D),D.getPromise().then(()=>this._requests.delete(D),()=>this._requests.delete(D)),D}}makeRequestWithTokens(r,t){var o=this;return(0,cc.Z)(function*(){const[d,m]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(r,t,d,m).getPromise()})()}}const fc="@firebase/storage";function pm(n,r){return Yv(n=(0,le.m9)(n),r)}function _E(n,{instanceIdentifier:r}){const t=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),d=n.getProvider("app-check-internal");return new Up(t,o,d,r,Cu.SDK_VERSION)}!function yE(){(0,Cu._registerComponent)(new dc.wA("storage",_E,"PUBLIC").setMultipleInstances(!0)),(0,Cu.registerVersion)(fc,"0.11.2",""),(0,Cu.registerVersion)(fc,"0.11.2","esm2017")}();class eh{constructor(r,t,o){this._delegate=r,this.task=t,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class iy{constructor(r,t){this._delegate=r,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new eh(this._delegate.snapshot,this,this._ref)}then(r,t){return this._delegate.then(o=>{if(r)return r(new eh(o,this,this._ref))},t)}on(r,t,o,d){let m;return t&&(m="function"==typeof t?D=>t(new eh(D,this,this._ref)):{next:t.next?D=>t.next(new eh(D,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(r,m,o||void 0,d||void 0)}}class wf{constructor(r,t){this._delegate=r,this._service=t}get prefixes(){return this._delegate.prefixes.map(r=>new Pu(r,this._service))}get items(){return this._delegate.items.map(r=>new Pu(r,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Pu{constructor(r,t){this._delegate=r,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(r){const t=function Gp(n,r){return om(n,r)}(this._delegate,r);return new Pu(t,this.storage)}get root(){return new Pu(this._delegate.root,this.storage)}get parent(){const r=this._delegate.parent;return null==r?null:new Pu(r,this.storage)}put(r,t){return this._throwIfRoot("put"),new iy(function dm(n,r,t){return function _f(n,r,t){return n._throwIfRoot("uploadBytesResumable"),new ny(n,new vl(r),t)}(n=(0,le.m9)(n),r,t)}(this._delegate,r,t),this)}putString(r,t=Oa.RAW,o){this._throwIfRoot("putString");const d=cf(t,r),m=Object.assign({},o);return null==m.contentType&&null!=d.contentType&&(m.contentType=d.contentType),new iy(new ny(this._delegate,new vl(d.data,!0),m),this)}listAll(){return function nw(n){return function tw(n){const r={prefixes:[],items:[]};return rm(n,r).then(()=>r)}(n=(0,le.m9)(n))}(this._delegate).then(r=>new wf(r,this.storage))}list(r){return function Vp(n,r){return yf(n=(0,le.m9)(n),r)}(this._delegate,r||void 0).then(t=>new wf(t,this.storage))}getMetadata(){return function hm(n){return function qv(n){n._throwIfRoot("getMetadata");const r=So(n.storage,n._location,pf());return n.storage.makeRequestWithTokens(r,Kl)}(n=(0,le.m9)(n))}(this._delegate)}updateMetadata(r){return function Qv(n,r){return function xu(n,r){n._throwIfRoot("updateMetadata");const t=function Is(n,r,t,o){const m=Su(r.fullServerUrl(),n.host,n._protocol),P=Rp(t,o),W=n.maxOperationRetryTime,ie=new Na(m,"PATCH",Qd(n,o),W);return ie.headers={"Content-Type":"application/json; charset=utf-8"},ie.body=P,ie.errorHandler=Ei(r),ie}(n.storage,n._location,r,pf());return n.storage.makeRequestWithTokens(t,Kl)}(n=(0,le.m9)(n),r)}(this._delegate,r)}getDownloadURL(){return function fm(n){return sm(n=(0,le.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Jv(n){return function vf(n){n._throwIfRoot("deleteObject");const r=function X_(n,r){const o=Su(r.fullServerUrl(),n.host,n._protocol),P=new Na(o,"DELETE",function D(U,W){},n.maxOperationRetryTime);return P.successCodes=[200,204],P.errorHandler=Ei(r),P}(n.storage,n._location);return n.storage.makeRequestWithTokens(r,Kl)}(n=(0,le.m9)(n))}(this._delegate)}_throwIfRoot(r){if(""===this._delegate._location.path)throw Kd(r)}}class sy{constructor(r,t){this.app=r,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(r){if(Ef(r))throw yl("ref() expected a child path but got a URL, use refFromURL instead.");return new Pu(pm(this._delegate,r),this)}refFromURL(r){if(!Ef(r))throw yl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ds.makeFromUrl(r,this._delegate.host)}catch{throw yl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pu(pm(this._delegate,r),this)}setMaxUploadRetryTime(r){this._delegate.maxUploadRetryTime=r}setMaxOperationRetryTime(r){this._delegate.maxOperationRetryTime=r}useEmulator(r,t,o={}){!function bf(n,r,t,o={}){!function lm(n,r,t,o={}){n.host=`${r}:${t}`,n._protocol="http";const{mockUserToken:d}=o;d&&(n._overrideAuthToken="string"==typeof d?d:(0,le.Sg)(d,n.app.options.projectId))}(n,r,t,o)}(this._delegate,r,t,o)}}function Ef(n){return/^[A-Za-z]+:\/\//.test(n)}function oy(n,{instanceIdentifier:r}){const t=n.getProvider("app-compat").getImmediate(),o=n.getProvider("storage").getImmediate({identifier:r});return new sy(t,o)}!function t0(n){const r={TaskState:Ma,TaskEvent:ty,StringFormat:Oa,Storage:sy,Reference:Pu};n.INTERNAL.registerComponent(new dc.wA("storage-compat",oy,"PUBLIC").setServiceProps(r).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Gg.Z);var pc=j(6217),ay=j(9260);function Zc(n){const r=function n0(n){return new Ye.y(r=>{const t=D=>r.next(D);t(n.snapshot);const m=n.on("state_changed",t);return n.then(D=>{t(D),r.complete()},D=>{t(n.snapshot),(D=>{r.error(D)})(D)}),function(){m()}}).pipe(function Fv(n,r=Kt.z){return(0,Zn.e)((t,o)=>{let d=null,m=null,D=null;const P=()=>{if(d){d.unsubscribe(),d=null;const W=m;m=null,o.next(W)}};function U(){const W=D+n,ie=r.now();if(ie<W)return d=this.schedule(void 0,W-ie),void o.add(d);P()}t.subscribe((0,ct.x)(o,W=>{m=W,D=r.now(),d||(d=r.schedule(U,n),o.add(d))},()=>{P(),o.complete()},void 0,()=>{m=d=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>r,percentageChanges:()=>r.pipe((0,tr.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gm(n){return{getDownloadURL:()=>(0,mt.of)(void 0).pipe(sa.fc,(0,Ut.w)(()=>n.getDownloadURL()),sa.iC),getMetadata:()=>(0,mt.of)(void 0).pipe(sa.fc,(0,Ut.w)(()=>n.getMetadata()),sa.iC),delete:()=>(0,rr.D)(n.delete()),child:r=>gm(n.child(r)),updateMetadata:r=>(0,rr.D)(n.updateMetadata(r)),put:(r,t)=>Zc(n.put(r,t)),putString:(r,t,o)=>Zc(n.putString(r,t,o)),list:r=>(0,rr.D)(n.list(r)),listAll:()=>(0,rr.D)(n.listAll())}}const mm=new h.OlP("angularfire2.storageBucket"),r0=new h.OlP("angularfire2.storage.maxUploadRetryTime"),$p=new h.OlP("angularfire2.storage.maxOperationRetryTime"),s0=new h.OlP("angularfire2.storage.use-emulator");let LD=(()=>{class n{constructor(t,o,d,m,D,P,U,W,ie,we){const Ee=(0,lc.on)(t,D,o);this.storage=(0,lc.cc)(`${Ee.name}.storage.${d}`,"AngularFireStorage",Ee.name,()=>{const Ge=D.runOutsideAngular(()=>Ee.storage(d||void 0)),Tt=ie;return Tt&&Ge.useEmulator(...Tt),U&&Ge.setMaxUploadRetryTime(U),W&&Ge.setMaxOperationRetryTime(W),Ge},[U,W])}ref(t){return gm(this.storage.ref(t))}refFromURL(t){return gm(this.storage.refFromURL(t))}upload(t,o,d){return gm(this.storage.ref(t)).put(o,d)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lc.Dh),h.LFG(lc.xv,8),h.LFG(mm,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(sa.HU),h.LFG(r0,8),h.LFG($p,8),h.LFG(s0,8),h.LFG(pc.nm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),vE=(()=>{class n{constructor(){ay.Z.registerVersion("angularfire",sa.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[LD],imports:[rw]}),n})();var bE=j(3101),Pl=j(3099),ku=j(5026);j(9568);var is=j(1877);const o0="@firebase/database";let Yl="";function a0(n){Yl=n}class l0{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,t){null==t?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,le.Wl)(t))}get(r){const t=this.domStorage_.getItem(this.prefixedName_(r));return null==t?null:(0,le.cI)(t)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class u0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,t){null==t?delete this.cache_[r]:this.cache_[r]=t}get(r){return(0,le.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const uy=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const r=window[n];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new l0(r)}}catch{}return new u0},Jc=uy("localStorage"),_m=uy("sessionStorage"),th=new is.Yd("@firebase/database"),c0=function(){let n=1;return function(){return n++}}(),Df=function(n){const r=(0,le.dS)(n),t=new le.gQ;t.update(r);const o=t.digest();return le.US.encodeByteArray(o)},If=function(...n){let r="";for(let t=0;t<n.length;t++){const o=n[t];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=If.apply(null,o):r+="object"==typeof o?(0,le.Wl)(o):o,r+=" "}return r};let nh=null,rh=!0;const ih=function(n,r){(0,le.hu)(!r||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(th.logLevel=is.in.VERBOSE,nh=th.log.bind(th),r&&_m.set("logging_enabled",!0)):"function"==typeof n?nh=n:(nh=null,_m.remove("logging_enabled"))},Ao=function(...n){if(!0===rh&&(rh=!1,null===nh&&!0===_m.get("logging_enabled")&&ih(!0)),nh){const r=If.apply(null,n);nh(r)}},Cf=function(n){return function(...r){Ao(n,...r)}},ym=function(...n){const r="FIREBASE INTERNAL ERROR: "+If(...n);th.error(r)},Zl=function(...n){const r=`FIREBASE FATAL ERROR: ${If(...n)}`;throw th.error(r),new Error(r)},Ni=function(...n){const r="FIREBASE WARNING: "+If(...n);th.warn(r)},vm=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xc="[MIN_NAME]",Lu="[MAX_NAME]",ed=function(n,r){if(n===r)return 0;if(n===Xc||r===Lu)return-1;if(r===Xc||n===Lu)return 1;{const t=f0(n),o=f0(r);return null!==t?null!==o?t-o==0?n.length-r.length:t-o:-1:null!==o?1:n<r?-1:1}},d0=function(n,r){return n===r?0:n<r?-1:1},bm=function(n,r){if(r&&n in r)return r[n];throw new Error("Missing required key ("+n+") in object: "+(0,le.Wl)(r))},cy=function(n){if("object"!=typeof n||null===n)return(0,le.Wl)(n);const r=[];for(const o in n)r.push(o);r.sort();let t="{";for(let o=0;o<r.length;o++)0!==o&&(t+=","),t+=(0,le.Wl)(r[o]),t+=":",t+=cy(n[r[o]]);return t+="}",t},dy=function(n,r){const t=n.length;if(t<=r)return[n];const o=[];for(let d=0;d<t;d+=r)o.push(n.substring(d,d+r>t?t:d+r));return o};function Oo(n,r){for(const t in n)n.hasOwnProperty(t)&&r(t,n[t])}const sw=function(n){(0,le.hu)(!vm(n),"Invalid JSON number");const o=1023;let d,m,D,P,U;0===n?(m=0,D=0,d=1/n==-1/0?1:0):(d=n<0,(n=Math.abs(n))>=Math.pow(2,1-o)?(P=Math.min(Math.floor(Math.log(n)/Math.LN2),o),m=P+o,D=Math.round(n*Math.pow(2,52-P)-Math.pow(2,52))):(m=0,D=Math.round(n/Math.pow(2,-1074))));const W=[];for(U=52;U;U-=1)W.push(D%2?1:0),D=Math.floor(D/2);for(U=11;U;U-=1)W.push(m%2?1:0),m=Math.floor(m/2);W.push(d?1:0),W.reverse();const ie=W.join("");let we="";for(U=0;U<64;U+=8){let Ee=parseInt(ie.substr(U,8),2).toString(16);1===Ee.length&&(Ee="0"+Ee),we+=Ee}return we.toLowerCase()},Tf=new RegExp("^-?(0*)\\d{1,10}$"),f0=function(n){if(Tf.test(n)){const r=Number(n);if(r>=-2147483648&&r<=2147483647)return r}return null},td=function(n){try{n()}catch(r){setTimeout(()=>{throw Ni("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},nd=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wp=function(n,r){const t=setTimeout(n,r);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class p0{constructor(r,t){this.appName_=r,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(o=>this.appCheck=o)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((t,o)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(t,o):t(null)},0)})}addTokenChangeListener(r){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(o=>o.addTokenListener(r))}notifyForInvalidToken(){Ni(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class g0{constructor(r,t,o){this.appName_=r,this.firebaseOptions_=t,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(d=>this.auth_=d)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ao("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,o)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(t,o):t(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(t=>t.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(t=>t.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ni(r)}}let Ql=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Uu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rd="websocket",id="long_polling";class Of{constructor(r,t,o,d,m=!1,D="",P=!1,U=!1){this.secure=t,this.namespace=o,this.webSocketOnly=d,this.nodeAdmin=m,this.persistenceKey=D,this.includeNamespaceInQueryParams=P,this.isUsingEmulator=U,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jc.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&Jc.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Em(n,r,t){let o;if((0,le.hu)("string"==typeof r,"typeof type must == string"),(0,le.hu)("object"==typeof t,"typeof params must == object"),r===rd)o=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(r!==id)throw new Error("Unknown connection type: "+r);o=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function sh(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const d=[];return Oo(t,(m,D)=>{d.push(m+"="+D)}),o+d.join("&")}class uw{constructor(){this.counters_={}}incrementCounter(r,t=1){(0,le.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=t}get(){return(0,le.p$)(this.counters_)}}const Dm={},Jl={};function py(n){const r=n.toString();return Dm[r]||(Dm[r]=new uw),Dm[r]}class dw{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,t){this.closeAfterResponse=r,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,t){for(this.pendingResponses[r]=t;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let d=0;d<o.length;++d)o[d]&&td(()=>{this.onMessage_(o[d])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gc{constructor(r,t,o,d,m,D,P){this.connId=r,this.repoInfo=t,this.applicationId=o,this.appCheckToken=d,this.authToken=m,this.transportSessionId=D,this.lastSessionId=P,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cf(r),this.stats_=py(t),this.urlFn=U=>(this.appCheckToken&&(U.ac=this.appCheckToken),Em(t,id,U))}open(r,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dw(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,le.Yr)()||"complete"===document.readyState)n();else{let r=!1;const t=function(){document.body?r||(r=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yy((...m)=>{const[D,P,U,W,ie]=m;if(this.incrementIncomingBytes_(m),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===D)this.id=P,this.password=U;else{if("close"!==D)throw new Error("Unrecognized command received: "+D);P?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(P,()=>{this.onClosed_()})):this.onClosed_()}},(...m)=>{const[D,P]=m;this.incrementIncomingBytes_(m),this.myPacketOrderer.handleResponse(D,P)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Uu.test(location.hostname)&&(o.r="f");const d=this.urlFn(o);this.log_("Connecting via long-poll to "+d),this.scriptTagHolder.addTag(d,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gc.forceAllow_=!0}static forceDisallow(){gc.forceDisallow_=!0}static isAvailable(){return!((0,le.Yr)()||!gc.forceAllow_&&(gc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const t=(0,le.Wl)(r);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const o=(0,le.h$)(t),d=dy(o,1840);for(let m=0;m<d.length;m++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,d.length,d[m]),this.curSegmentNum++}addDisconnectPingFrame(r,t){if((0,le.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=r,o.pw=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const t=(0,le.Wl)(r).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class yy{constructor(r,t,o,d){if(this.onDisconnect=o,this.urlFn=d,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,le.Yr)())this.commandCB=r,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=c0(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=yy.createIFrame_();let m="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(m='<script>document.domain="'+document.domain+'";<\/script>');const D="<html><body>"+m+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(D),this.myIFrame.doc.close()}catch(P){Ao("frame writing exception"),P.stack&&Ao(P.stack),Ao(P)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||Ao("No IE domain setting required")}catch{const o=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,t){for(this.myID=r,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let t=this.urlFn(r),o="",d=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const D=this.pendingSegs.shift();o=o+"&seg"+d+"="+D.seg+"&ts"+d+"="+D.ts+"&d"+d+"="+D.d,d++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(r,t,o){this.pendingSegs.push({seg:r,ts:t,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(r,t){this.outstandingRequests.add(t);const o=()=>{this.outstandingRequests.delete(t),this.newRequest_()},d=setTimeout(o,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(d),o()})}addTag(r,t){(0,le.Yr)()?this.doNodeLongPoll(r,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=r,o.onload=o.onreadystatechange=function(){const d=o.readyState;(!d||"loaded"===d||"complete"===d)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),t())},o.onerror=()=>{Ao("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}let i=null;typeof MozWebSocket<"u"?i=MozWebSocket:typeof WebSocket<"u"&&(i=WebSocket);let u=(()=>{class n{constructor(t,o,d,m,D,P,U){this.connId=t,this.applicationId=d,this.appCheckToken=m,this.authToken=D,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cf(this.connId),this.stats_=py(o),this.connURL=n.connectionURL_(o,P,U,m,d),this.nodeAdmin=o.nodeAdmin}static connectionURL_(t,o,d,m,D){const P={v:"5"};return!(0,le.Yr)()&&typeof location<"u"&&location.hostname&&Uu.test(location.hostname)&&(P.r="f"),o&&(P.s=o),d&&(P.ls=d),m&&(P.ac=m),D&&(P.p=D),Em(t,rd,P)}open(t,o){this.onDisconnect=o,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jc.set("previous_websocket_failure",!0);try{let d;if((0,le.Yr)()){d={headers:{"User-Agent":`Firebase/5/${Yl}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const D=process.env,P=0===this.connURL.indexOf("wss://")?D.HTTPS_PROXY||D.https_proxy:D.HTTP_PROXY||D.http_proxy;P&&(d.proxy={origin:P})}this.mySock=new i(this.connURL,[],d)}catch(d){this.log_("Error instantiating WebSocket.");const m=d.message||d.data;return m&&this.log_(m),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=d=>{this.handleIncomingFrame(d)},this.mySock.onerror=d=>{this.log_("WebSocket error.  Closing connection.");const m=d.message||d.data;m&&this.log_(m),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const d=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);d&&d.length>1&&parseFloat(d[1])<4.4&&(t=!0)}return!t&&null!==i&&!n.forceDisallow_}static previouslyFailed(){return Jc.isInMemoryStorage||!0===Jc.get("previous_websocket_failure")}markConnectionHealthy(){Jc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const d=(0,le.cI)(o);this.onMessage(d)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,le.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const o=Number(t);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const o=t.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const d=this.extractFrameCount_(o);null!==d&&this.appendFrame_(d)}}send(t){this.resetKeepAlive();const o=(0,le.Wl)(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const d=dy(o,16384);d.length>1&&this.sendString_(String(d.length));for(let m=0;m<d.length;m++)this.sendString_(d[m])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),p=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[gc,u]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const o=u&&u.isAvailable();let d=o&&!u.previouslyFailed();if(t.webSocketOnly&&(o||Ni("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0),d)this.transports_=[u];else{const m=this.transports_=[];for(const D of n.ALL_TRANSPORTS)D&&D.isAvailable()&&m.push(D);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class hr{constructor(r,t,o,d,m,D,P,U,W,ie){this.id=r,this.repoInfo_=t,this.applicationId_=o,this.appCheckToken_=d,this.authToken_=m,this.onMessage_=D,this.onReady_=P,this.onDisconnect_=U,this.onKill_=W,this.lastSessionId=ie,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cf("c:"+this.id+":"),this.transportManager_=new p(t),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,o)},Math.floor(0));const d=r.healthyTimeout||0;d>0&&(this.healthyTimeout_=Wp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(d)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return t=>{r===this.conn_?this.onConnectionLost_(t):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return t=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(t):r===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const t=r.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const t=bm("t",r),o=bm("d",r);if("c"===t)this.onSecondaryControl_(o);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const t=bm("t",r),o=bm("d",r);"c"===t?this.onControl_(o):"d"===t&&this.onDataMessage_(o)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const t=bm("t",r);if("d"in r){const o=r.d;if("h"===t){const d=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(d.h=this.repoInfo_.host),this.onHandshake_(d)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let d=0;d<this.pendingDataMessages.length;++d)this.onDataMessage_(this.pendingDataMessages[d]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(o):"r"===t?this.onReset_(o):"e"===t?ym("Server Error: "+o):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ym("Unknown control packet command: "+t)}}onHandshake_(r){const t=r.ts,o=r.v,d=r.h;this.sessionId=r.s,this.repoInfo_.host=d,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==o&&Ni("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,o),Wp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,t){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class hs{put(r,t,o,d){}merge(r,t,o,d){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,t,o){}onDisconnectMerge(r,t,o){}onDisconnectCancel(r,t){}reportStats(r){}}class xr{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,le.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...t){if(Array.isArray(this.listeners_[r])){const o=[...this.listeners_[r]];for(let d=0;d<o.length;d++)o[d].callback.apply(o[d].context,t)}}on(r,t,o){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:t,context:o});const d=this.getInitialEvent(r);d&&t.apply(o,d)}off(r,t,o){this.validateEventType_(r);const d=this.listeners_[r]||[];for(let m=0;m<d.length;m++)if(d[m].callback===t&&(!o||o===d[m].context))return void d.splice(m,1)}validateEventType_(r){(0,le.hu)(this.allowedEvents_.find(t=>t===r),"Unknown event: "+r)}}class Sr extends xr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,le.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Sr}getInitialEvent(r){return(0,le.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}const Zs=32,mc=768;class Di{constructor(r,t){if(void 0===t){this.pieces_=r.split("/");let o=0;for(let d=0;d<this.pieces_.length;d++)this.pieces_[d].length>0&&(this.pieces_[o]=this.pieces_[d],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=t}toString(){let r="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(r+="/"+this.pieces_[t]);return r||"/"}}function di(){return new Di("")}function Ar(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function oh(n){return n.pieces_.length-n.pieceNum_}function ss(n){let r=n.pieceNum_;return r<n.pieces_.length&&r++,new Di(n.pieces_,r)}function w0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function vy(n,r=0){return n.pieces_.slice(n.pieceNum_+r)}function BD(n){if(n.pieceNum_>=n.pieces_.length)return null;const r=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)r.push(n.pieces_[t]);return new Di(r,0)}function Ts(n,r){const t=[];for(let o=n.pieceNum_;o<n.pieces_.length;o++)t.push(n.pieces_[o]);if(r instanceof Di)for(let o=r.pieceNum_;o<r.pieces_.length;o++)t.push(r.pieces_[o]);else{const o=r.split("/");for(let d=0;d<o.length;d++)o[d].length>0&&t.push(o[d])}return new Di(t,0)}function Or(n){return n.pieceNum_>=n.pieces_.length}function bl(n,r){const t=Ar(n),o=Ar(r);if(null===t)return r;if(t===o)return bl(ss(n),ss(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+n+")")}function wE(n,r){const t=vy(n,0),o=vy(r,0);for(let d=0;d<t.length&&d<o.length;d++){const m=ed(t[d],o[d]);if(0!==m)return m}return t.length===o.length?0:t.length<o.length?-1:1}function E0(n,r){if(oh(n)!==oh(r))return!1;for(let t=n.pieceNum_,o=r.pieceNum_;t<=n.pieces_.length;t++,o++)if(n.pieces_[t]!==r.pieces_[o])return!1;return!0}function Xl(n,r){let t=n.pieceNum_,o=r.pieceNum_;if(oh(n)>oh(r))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==r.pieces_[o])return!1;++t,++o}return!0}class VD{constructor(r,t){this.errorPrefix_=t,this.parts_=vy(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,le.ug)(this.parts_[o]);EE(this)}}function EE(n){if(n.byteLength_>mc)throw new Error(n.errorPrefix_+"has a key path longer than "+mc+" bytes ("+n.byteLength_+").");if(n.parts_.length>Zs)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zs+") or object contains a cycle "+Yp(n))}function Yp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gw extends xr{constructor(){let r,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const o=!document[r];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new gw}getInitialEvent(r){return(0,le.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const ah=1e3;let D0,Zp=(()=>{class n extends hs{constructor(t,o,d,m,D,P,U,W){if(super(),this.repoInfo_=t,this.applicationId_=o,this.onDataUpdate_=d,this.onConnectStatus_=m,this.onServerInfoUpdate_=D,this.authTokenProvider_=P,this.appCheckTokenProvider_=U,this.authOverride_=W,this.id=n.nextPersistentConnectionId_++,this.log_=Cf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ah,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,W&&!(0,le.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gw.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Sr.getInstance().on("online",this.onOnline_,this)}sendRequest(t,o,d){const m=++this.requestNumber_,D={r:m,a:t,b:o};this.log_((0,le.Wl)(D)),(0,le.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(D),d&&(this.requestCBHash_[m]=d)}get(t){this.initConnection_();const o=new le.BH,m={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:P=>{const U=P.d;"ok"===P.s?o.resolve(U):o.reject(U)}};return this.outstandingGets_.push(m),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(t,o,d,m){this.initConnection_();const D=t._queryIdentifier,P=t._path.toString();this.log_("Listen called for "+P+" "+D),this.listens.has(P)||this.listens.set(P,new Map),(0,le.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,le.hu)(!this.listens.get(P).has(D),"listen() called twice for same path/queryId.");const U={onComplete:m,hashFn:o,query:t,tag:d};this.listens.get(P).set(D,U),this.connected_&&this.sendListen_(U)}sendGet_(t){const o=this.outstandingGets_[t];this.sendRequest("g",o.request,d=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(d)})}sendListen_(t){const o=t.query,d=o._path.toString(),m=o._queryIdentifier;this.log_("Listen on "+d+" for "+m);const D={p:d};t.tag&&(D.q=o._queryObject,D.t=t.tag),D.h=t.hashFn(),this.sendRequest("q",D,U=>{const W=U.d,ie=U.s;n.warnOnListenWarnings_(W,o),(this.listens.get(d)&&this.listens.get(d).get(m))===t&&(this.log_("listen response",U),"ok"!==ie&&this.removeListen_(d,m),t.onComplete&&t.onComplete(ie,W))})}static warnOnListenWarnings_(t,o){if(t&&"object"==typeof t&&(0,le.r3)(t,"w")){const d=(0,le.DV)(t,"w");if(Array.isArray(d)&&~d.indexOf("no_index")){const m='".indexOn": "'+o._queryParams.getIndex().toString()+'"',D=o._path.toString();Ni(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${m} at ${D} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,le.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,o=(0,le.w9)(t)?"auth":"gauth",d={cred:t};null===this.authOverride_?d.noauth=!0:"object"==typeof this.authOverride_&&(d.authvar=this.authOverride_),this.sendRequest(o,d,m=>{const D=m.s,P=m.d||"error";this.authToken_===t&&("ok"===D?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(D,P))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const o=t.s,d=t.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,d)})}unlisten(t,o){const d=t._path.toString(),m=t._queryIdentifier;this.log_("Unlisten called for "+d+" "+m),(0,le.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(d,m)&&this.connected_&&this.sendUnlisten_(d,m,t._queryObject,o)}sendUnlisten_(t,o,d,m){this.log_("Unlisten on "+t+" for "+o);const D={p:t};m&&(D.q=d,D.t=m),this.sendRequest("n",D)}onDisconnectPut(t,o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,o,d):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:o,onComplete:d})}onDisconnectMerge(t,o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,o,d):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:o,onComplete:d})}onDisconnectCancel(t,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(t,o,d,m){const D={p:o,d};this.log_("onDisconnect "+t,D),this.sendRequest(t,D,P=>{m&&setTimeout(()=>{m(P.s,P.d)},Math.floor(0))})}put(t,o,d,m){this.putInternal("p",t,o,d,m)}merge(t,o,d,m){this.putInternal("m",t,o,d,m)}putInternal(t,o,d,m,D){this.initConnection_();const P={p:o,d};void 0!==D&&(P.h=D),this.outstandingPuts_.push({action:t,request:P,onComplete:m}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(t){const o=this.outstandingPuts_[t].action,d=this.outstandingPuts_[t].request,m=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(o,d,D=>{this.log_(o+" response",D),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),m&&m(D.s,D.d)})}reportStats(t){if(this.connected_){const o={c:t};this.log_("reportStats",o),this.sendRequest("s",o,d=>{"ok"!==d.s&&this.log_("reportStats","Error sending stats: "+d.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,le.Wl)(t));const o=t.r,d=this.requestCBHash_[o];d&&(delete this.requestCBHash_[o],d(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,o){this.log_("handleServerMessage",t,o),"d"===t?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===t?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===t?this.onListenRevoked_(o.p,o.q):"ac"===t?this.onAuthRevoked_(o.s,o.d):"apc"===t?this.onAppCheckRevoked_(o.s,o.d):"sd"===t?this.onSecurityDebugPacket_(o):ym("Unrecognized action received from server: "+(0,le.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,le.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ah,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ah,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ah),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-t);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,cc.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const o=t.onDataMessage_.bind(t),d=t.onReady_.bind(t),m=t.onRealtimeDisconnect_.bind(t),D=t.id+":"+n.nextConnectionId_++,P=t.lastSessionId;let U=!1,W=null;const ie=function(){W?W.close():(U=!0,m())};t.realtime_={close:ie,sendRequest:function(Ge){(0,le.hu)(W,"sendRequest call when we're not connected not allowed."),W.sendRequest(Ge)}};const Ee=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Ge,Tt]=yield Promise.all([t.authTokenProvider_.getToken(Ee),t.appCheckTokenProvider_.getToken(Ee)]);U?Ao("getToken() completed but was canceled"):(Ao("getToken() completed. Creating connection."),t.authToken_=Ge&&Ge.accessToken,t.appCheckToken_=Tt&&Tt.token,W=new hr(D,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,o,d,m,Vt=>{Ni(Vt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},P))}catch(Ge){t.log_("Failed to get token: "+Ge),U||(t.repoInfo_.nodeAdmin&&Ni(Ge),ie())}}})()}interrupt(t){Ao("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ao("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,le.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ah,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const o=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const o=this.outstandingPuts_[t];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,o){let d;d=o?o.map(D=>cy(D)).join("$"):"default";const m=this.removeListen_(t,d);m&&m.onComplete&&m.onComplete("permission_denied")}removeListen_(t,o){const d=new Di(t).toString();let m;if(this.listens.has(d)){const D=this.listens.get(d);m=D.get(o),D.delete(o),0===D.size&&this.listens.delete(d)}else m=void 0;return m}onAuthRevoked_(t,o){Ao("Auth token revoked: "+t+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,o){Ao("App check token revoked: "+t+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const o of t.values())this.sendListen_(o);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let o="js";(0,le.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+o+"."+Yl.replace(/\./g,"-")]=1,(0,le.uI)()?t["framework.cordova"]=1:(0,le.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Sr.getInstance().currentlyOnline();return(0,le.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Br{constructor(r,t){this.name=r,this.node=t}static Wrap(r,t){return new Br(r,t)}}class by{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,t){const o=new Br(Xc,r),d=new Br(Xc,t);return 0!==this.compare(o,d)}minPost(){return Br.MIN}}class SE extends by{static get __EMPTY_NODE(){return D0}static set __EMPTY_NODE(r){D0=r}compare(r,t){return ed(r.name,t.name)}isDefinedOn(r){throw(0,le.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,t){return!1}minPost(){return Br.MIN}maxPost(){return new Br(Lu,D0)}makePost(r,t){return(0,le.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new Br(r,D0)}toString(){return".key"}}const sd=new SE;class I0{constructor(r,t,o,d,m=null){this.isReverse_=d,this.resultGenerator_=m,this.nodeStack_=[];let D=1;for(;!r.isEmpty();)if(D=t?o(r.key,t):1,d&&(D*=-1),D<0)r=this.isReverse_?r.left:r.right;else{if(0===D){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,r=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let wy,wl=(()=>{class n{constructor(t,o,d,m,D){this.key=t,this.value=o,this.color=d??n.RED,this.left=m??Ja.EMPTY_NODE,this.right=D??Ja.EMPTY_NODE}copy(t,o,d,m,D){return new n(t??this.key,o??this.value,d??this.color,m??this.left,D??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,o,d){let m=this;const D=d(t,m.key);return m=D<0?m.copy(null,null,null,m.left.insert(t,o,d),null):0===D?m.copy(null,o,null,null,null):m.copy(null,null,null,null,m.right.insert(t,o,d)),m.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ja.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,o){let d,m;if(d=this,o(t,d.key)<0)!d.left.isEmpty()&&!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.remove(t,o),null);else{if(d.left.isRed_()&&(d=d.rotateRight_()),!d.right.isEmpty()&&!d.right.isRed_()&&!d.right.left.isRed_()&&(d=d.moveRedRight_()),0===o(t,d.key)){if(d.right.isEmpty())return Ja.EMPTY_NODE;m=d.right.min_(),d=d.copy(m.key,m.value,null,null,d.right.removeMin_())}d=d.copy(null,null,null,null,d.right.remove(t,o))}return d.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,o)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ja{constructor(r,t=Ja.EMPTY_NODE){this.comparator_=r,this.root_=t}insert(r,t){return new Ja(this.comparator_,this.root_.insert(r,t,this.comparator_).copy(null,null,wl.BLACK,null,null))}remove(r){return new Ja(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,wl.BLACK,null,null))}get(r){let t,o=this.root_;for(;!o.isEmpty();){if(t=this.comparator_(r,o.key),0===t)return o.value;t<0?o=o.left:t>0&&(o=o.right)}return null}getPredecessorKey(r){let t,o=this.root_,d=null;for(;!o.isEmpty();){if(t=this.comparator_(r,o.key),0===t){if(o.left.isEmpty())return d?d.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}t<0?o=o.left:t>0&&(d=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new I0(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,t){return new I0(this.root_,r,this.comparator_,!1,t)}getReverseIteratorFrom(r,t){return new I0(this.root_,r,this.comparator_,!0,t)}getReverseIterator(r){return new I0(this.root_,null,this.comparator_,!0,r)}}function od(n,r){return ed(n.name,r.name)}function yw(n,r){return ed(n,r)}Ja.EMPTY_NODE=new class HD{copy(r,t,o,d,m){return this}insert(r,t,o){return new wl(r,t,null)}remove(r,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const AE=function(n){return"number"==typeof n?"number:"+sw(n):"string:"+n},OE=function(n){if(n.isLeafNode()){const r=n.val();(0,le.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,le.r3)(r,".sv"),"Priority must be a string or number.")}else(0,le.hu)(n===wy||n.isEmpty(),"priority of unexpected type.");(0,le.hu)(n===wy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let NE,Dy,ME,lh=(()=>{class n{constructor(t,o=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=o,this.lazyHash_=null,(0,le.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),OE(this.priorityNode_)}static set __childrenNodeConstructor(t){NE=t}static get __childrenNodeConstructor(){return NE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Or(t)?this:".priority"===Ar(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,o){return null}updateImmediateChild(t,o){return".priority"===t?this.updatePriority(o):o.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,o).updatePriority(this.priorityNode_)}updateChild(t,o){const d=Ar(t);return null===d?o:o.isEmpty()&&".priority"!==d?this:((0,le.hu)(".priority"!==d||1===oh(t),".priority must be the last token in a path"),this.updateImmediateChild(d,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ss(t),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,o){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+AE(this.priorityNode_.val())+":");const o=typeof this.value_;t+=o+":",t+="number"===o?sw(this.value_):this.value_,this.lazyHash_=Df(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,le.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const o=typeof t.value_,d=typeof this.value_,m=n.VALUE_TYPE_ORDER.indexOf(o),D=n.VALUE_TYPE_ORDER.indexOf(d);return(0,le.hu)(m>=0,"Unknown leaf type: "+o),(0,le.hu)(D>=0,"Unknown leaf type: "+d),m===D?"object"===d?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:D-m}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fi=new class xE extends by{compare(r,t){const o=r.node.getPriority(),d=t.node.getPriority(),m=o.compareTo(d);return 0===m?ed(r.name,t.name):m}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,t){return!r.getPriority().equals(t.getPriority())}minPost(){return Br.MIN}maxPost(){return new Br(Lu,new lh("[PRIORITY-POST]",ME))}makePost(r,t){const o=Dy(r);return new Br(t,new lh("[PRIORITY-POST]",o))}toString(){return".priority"}},PE=Math.log(2);class vw{constructor(r){this.count=parseInt(Math.log(r+1)/PE,10),this.current_=this.count-1;const d=(m=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&d}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const Om=function(n,r,t,o){n.sort(r);const d=function(U,W){const ie=W-U;let we,Ee;if(0===ie)return null;if(1===ie)return we=n[U],Ee=t?t(we):we,new wl(Ee,we.node,wl.BLACK,null,null);{const Ge=parseInt(ie/2,10)+U,Tt=d(U,Ge),Vt=d(Ge+1,W);return we=n[Ge],Ee=t?t(we):we,new wl(Ee,we.node,wl.BLACK,Tt,Vt)}},P=function(U){let W=null,ie=null,we=n.length;const Ee=function(Tt,Vt){const Jt=we-Tt,Un=we;we-=Tt;const Bn=d(Jt+1,Un),sr=n[Jt],Kn=t?t(sr):sr;Ge(new wl(Kn,sr.node,Vt,null,Bn))},Ge=function(Tt){W?(W.left=Tt,W=Tt):(ie=Tt,W=Tt)};for(let Tt=0;Tt<U.count;++Tt){const Vt=U.nextBitIsOne(),Jt=Math.pow(2,U.count-(Tt+1));Vt?Ee(Jt,wl.BLACK):(Ee(Jt,wl.BLACK),Ee(Jt,wl.RED))}return ie}(new vw(n.length));return new Ja(o||r,P)};let C0;const Nf={};class _c{constructor(r,t){this.indexes_=r,this.indexSet_=t}static get Default(){return(0,le.hu)(Nf&&Fi,"ChildrenNode.ts has not been loaded"),C0=C0||new _c({".priority":Nf},{".priority":Fi}),C0}get(r){const t=(0,le.DV)(this.indexes_,r);if(!t)throw new Error("No index defined for "+r);return t instanceof Ja?t:null}hasIndex(r){return(0,le.r3)(this.indexSet_,r.toString())}addIndex(r,t){(0,le.hu)(r!==sd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let d=!1;const m=t.getIterator(Br.Wrap);let P,D=m.getNext();for(;D;)d=d||r.isDefinedOn(D.node),o.push(D),D=m.getNext();P=d?Om(o,r.getCompare()):Nf;const U=r.toString(),W=Object.assign({},this.indexSet_);W[U]=r;const ie=Object.assign({},this.indexes_);return ie[U]=P,new _c(ie,W)}addToIndexes(r,t){const o=(0,le.UI)(this.indexes_,(d,m)=>{const D=(0,le.DV)(this.indexSet_,m);if((0,le.hu)(D,"Missing index implementation for "+m),d===Nf){if(D.isDefinedOn(r.node)){const P=[],U=t.getIterator(Br.Wrap);let W=U.getNext();for(;W;)W.name!==r.name&&P.push(W),W=U.getNext();return P.push(r),Om(P,D.getCompare())}return Nf}{const P=t.get(r.name);let U=d;return P&&(U=U.remove(new Br(r.name,P))),U.insert(r,r.node)}});return new _c(o,this.indexSet_)}removeFromIndexes(r,t){const o=(0,le.UI)(this.indexes_,d=>{if(d===Nf)return d;{const m=t.get(r.name);return m?d.remove(new Br(r.name,m)):d}});return new _c(o,this.indexSet_)}}let Iy,pr=(()=>{class n{constructor(t,o,d){this.children_=t,this.priorityNode_=o,this.indexMap_=d,this.lazyHash_=null,this.priorityNode_&&OE(this.priorityNode_),this.children_.isEmpty()&&(0,le.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Iy||(Iy=new n(new Ja(yw),null,_c.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Iy}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const o=this.children_.get(t);return null===o?Iy:o}}getChild(t){const o=Ar(t);return null===o?this:this.getImmediateChild(o).getChild(ss(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,o){if((0,le.hu)(o,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(o);{const d=new Br(t,o);let m,D;o.isEmpty()?(m=this.children_.remove(t),D=this.indexMap_.removeFromIndexes(d,this.children_)):(m=this.children_.insert(t,o),D=this.indexMap_.addToIndexes(d,this.children_));const P=m.isEmpty()?Iy:this.priorityNode_;return new n(m,P,D)}}updateChild(t,o){const d=Ar(t);if(null===d)return o;{(0,le.hu)(".priority"!==Ar(t)||1===oh(t),".priority must be the last token in a path");const m=this.getImmediateChild(d).updateChild(ss(t),o);return this.updateImmediateChild(d,m)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const o={};let d=0,m=0,D=!0;if(this.forEachChild(Fi,(P,U)=>{o[P]=U.val(t),d++,D&&n.INTEGER_REGEXP_.test(P)?m=Math.max(m,Number(P)):D=!1}),!t&&D&&m<2*d){const P=[];for(const U in o)P[U]=o[U];return P}return t&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+AE(this.getPriority().val())+":"),this.forEachChild(Fi,(o,d)=>{const m=d.hash();""!==m&&(t+=":"+o+":"+m)}),this.lazyHash_=""===t?"":Df(t)}return this.lazyHash_}getPredecessorChildName(t,o,d){const m=this.resolveIndex_(d);if(m){const D=m.getPredecessorKey(new Br(t,o));return D?D.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const o=this.resolveIndex_(t);if(o){const d=o.minKey();return d&&d.name}return this.children_.minKey()}getFirstChild(t){const o=this.getFirstChildName(t);return o?new Br(o,this.children_.get(o)):null}getLastChildName(t){const o=this.resolveIndex_(t);if(o){const d=o.maxKey();return d&&d.name}return this.children_.maxKey()}getLastChild(t){const o=this.getLastChildName(t);return o?new Br(o,this.children_.get(o)):null}forEachChild(t,o){const d=this.resolveIndex_(t);return d?d.inorderTraversal(m=>o(m.name,m.node)):this.children_.inorderTraversal(o)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,o){const d=this.resolveIndex_(o);if(d)return d.getIteratorFrom(t,m=>m);{const m=this.children_.getIteratorFrom(t.name,Br.Wrap);let D=m.peek();for(;null!=D&&o.compare(D,t)<0;)m.getNext(),D=m.peek();return m}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,o){const d=this.resolveIndex_(o);if(d)return d.getReverseIteratorFrom(t,m=>m);{const m=this.children_.getReverseIteratorFrom(t.name,Br.Wrap);let D=m.peek();for(;null!=D&&o.compare(D,t)>0;)m.getNext(),D=m.peek();return m}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Cy?-1:0}withIndex(t){if(t===sd||this.indexMap_.hasIndex(t))return this;{const o=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,o)}}isIndexed(t){return t===sd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const o=t;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const d=this.getIterator(Fi),m=o.getIterator(Fi);let D=d.getNext(),P=m.getNext();for(;D&&P;){if(D.name!==P.name||!D.node.equals(P.node))return!1;D=d.getNext(),P=m.getNext()}return null===D&&null===P}return!1}return!1}}resolveIndex_(t){return t===sd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Cy=new class zD extends pr{constructor(){super(new Ja(yw),pr.EMPTY_NODE,_c.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return pr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Br,{MIN:{value:new Br(Xc,pr.EMPTY_NODE)},MAX:{value:new Br(Lu,Cy)}}),SE.__EMPTY_NODE=pr.EMPTY_NODE,lh.__childrenNodeConstructor=pr,function Ey(n){wy=n}(Cy),function RE(n){ME=n}(Cy);const kE=!0;function fs(n,r=null){if(null===n)return pr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(r=n[".priority"]),(0,le.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new lh(n,fs(r));if(n instanceof Array||!kE){let t=pr.EMPTY_NODE;return Oo(n,(o,d)=>{if((0,le.r3)(n,o)&&"."!==o.substring(0,1)){const m=fs(d);(m.isLeafNode()||!m.isEmpty())&&(t=t.updateImmediateChild(o,m))}}),t.updatePriority(fs(r))}{const t=[];let o=!1;if(Oo(n,(D,P)=>{if("."!==D.substring(0,1)){const U=fs(P);U.isEmpty()||(o=o||!U.getPriority().isEmpty(),t.push(new Br(D,U)))}}),0===t.length)return pr.EMPTY_NODE;const m=Om(t,od,D=>D.name,yw);if(o){const D=Om(t,Fi.getCompare());return new pr(m,fs(r),new _c({".priority":D},{".priority":Fi}))}return new pr(m,fs(r),_c.Default)}}!function $D(n){Dy=n}(fs);class T0 extends by{constructor(r){super(),this.indexPath_=r,(0,le.hu)(!Or(r)&&".priority"!==Ar(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,t){const o=this.extractChild(r.node),d=this.extractChild(t.node),m=o.compareTo(d);return 0===m?ed(r.name,t.name):m}makePost(r,t){const o=fs(r),d=pr.EMPTY_NODE.updateChild(this.indexPath_,o);return new Br(t,d)}maxPost(){const r=pr.EMPTY_NODE.updateChild(this.indexPath_,Cy);return new Br(Lu,r)}toString(){return vy(this.indexPath_,0).join("/")}}const S0=new class FE extends by{compare(r,t){const o=r.node.compareTo(t.node);return 0===o?ed(r.name,t.name):o}isDefinedOn(r){return!0}indexedValueChanged(r,t){return!r.equals(t)}minPost(){return Br.MIN}maxPost(){return Br.MAX}makePost(r,t){const o=fs(r);return new Br(t,o)}toString(){return".value"}};function bw(n){return{type:"value",snapshotNode:n}}function Nm(n,r){return{type:"child_added",snapshotNode:r,childName:n}}function Mm(n,r){return{type:"child_removed",snapshotNode:r,childName:n}}function Rm(n,r,t){return{type:"child_changed",snapshotNode:r,childName:n,oldSnap:t}}class A0{constructor(r){this.index_=r}updateChild(r,t,o,d,m,D){(0,le.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const P=r.getImmediateChild(t);return P.getChild(d).equals(o.getChild(d))&&P.isEmpty()===o.isEmpty()||(null!=D&&(o.isEmpty()?r.hasChild(t)?D.trackChildChange(Mm(t,P)):(0,le.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):P.isEmpty()?D.trackChildChange(Nm(t,o)):D.trackChildChange(Rm(t,o,P))),r.isLeafNode()&&o.isEmpty())?r:r.updateImmediateChild(t,o).withIndex(this.index_)}updateFullNode(r,t,o){return null!=o&&(r.isLeafNode()||r.forEachChild(Fi,(d,m)=>{t.hasChild(d)||o.trackChildChange(Mm(d,m))}),t.isLeafNode()||t.forEachChild(Fi,(d,m)=>{if(r.hasChild(d)){const D=r.getImmediateChild(d);D.equals(m)||o.trackChildChange(Rm(d,m,D))}else o.trackChildChange(Nm(d,m))})),t.withIndex(this.index_)}updatePriority(r,t){return r.isEmpty()?pr.EMPTY_NODE:r.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class xm{constructor(r){this.indexedFilter_=new A0(r.getIndex()),this.index_=r.getIndex(),this.startPost_=xm.getStartPost_(r),this.endPost_=xm.getEndPost_(r),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),r)<=0:this.index_.compare(this.getStartPost(),r)<0,o=this.endIsInclusive_?this.index_.compare(r,this.getEndPost())<=0:this.index_.compare(r,this.getEndPost())<0;return t&&o}updateChild(r,t,o,d,m,D){return this.matches(new Br(t,o))||(o=pr.EMPTY_NODE),this.indexedFilter_.updateChild(r,t,o,d,m,D)}updateFullNode(r,t,o){t.isLeafNode()&&(t=pr.EMPTY_NODE);let d=t.withIndex(this.index_);d=d.updatePriority(pr.EMPTY_NODE);const m=this;return t.forEachChild(Fi,(D,P)=>{m.matches(new Br(D,P))||(d=d.updateImmediateChild(D,pr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,d,o)}updatePriority(r,t){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const t=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),t)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const t=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),t)}return r.getIndex().maxPost()}}class El{constructor(r){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=t=>{const o=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new xm(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft(),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}updateChild(r,t,o,d,m,D){return this.rangedFilter_.matches(new Br(t,o))||(o=pr.EMPTY_NODE),r.getImmediateChild(t).equals(o)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,t,o,d,m,D):this.fullLimitUpdateChild_(r,t,o,m,D)}updateFullNode(r,t,o){let d;if(t.isLeafNode()||t.isEmpty())d=pr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let m;d=pr.EMPTY_NODE.withIndex(this.index_),m=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let D=0;for(;m.hasNext()&&D<this.limit_;){const P=m.getNext();if(this.withinDirectionalStart(P)){if(!this.withinDirectionalEnd(P))break;d=d.updateImmediateChild(P.name,P.node),D++}}}else{let m;d=t.withIndex(this.index_),d=d.updatePriority(pr.EMPTY_NODE),m=this.reverse_?d.getReverseIterator(this.index_):d.getIterator(this.index_);let D=0;for(;m.hasNext();){const P=m.getNext();D<this.limit_&&this.withinDirectionalStart(P)&&this.withinDirectionalEnd(P)?D++:d=d.updateImmediateChild(P.name,pr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,d,o)}updatePriority(r,t){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,t,o,d,m){let D;if(this.reverse_){const we=this.index_.getCompare();D=(Ee,Ge)=>we(Ge,Ee)}else D=this.index_.getCompare();const P=r;(0,le.hu)(P.numChildren()===this.limit_,"");const U=new Br(t,o),W=this.reverse_?P.getFirstChild(this.index_):P.getLastChild(this.index_),ie=this.rangedFilter_.matches(U);if(P.hasChild(t)){const we=P.getImmediateChild(t);let Ee=d.getChildAfterChild(this.index_,W,this.reverse_);for(;null!=Ee&&(Ee.name===t||P.hasChild(Ee.name));)Ee=d.getChildAfterChild(this.index_,Ee,this.reverse_);const Ge=null==Ee?1:D(Ee,U);if(ie&&!o.isEmpty()&&Ge>=0)return m?.trackChildChange(Rm(t,o,we)),P.updateImmediateChild(t,o);{m?.trackChildChange(Mm(t,we));const Vt=P.updateImmediateChild(t,pr.EMPTY_NODE);return null!=Ee&&this.rangedFilter_.matches(Ee)?(m?.trackChildChange(Nm(Ee.name,Ee.node)),Vt.updateImmediateChild(Ee.name,Ee.node)):Vt}}return o.isEmpty()?r:ie&&D(W,U)>=0?(null!=m&&(m.trackChildChange(Mm(W.name,W.node)),m.trackChildChange(Nm(t,o))),P.updateImmediateChild(t,o).updateImmediateChild(W.name,pr.EMPTY_NODE)):r}}class uh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,le.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,le.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,le.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,le.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,le.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fi}copy(){const r=new uh;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.startAfterSet_=this.startAfterSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.endBeforeSet_=this.endBeforeSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function LE(n,r,t){const o=n.copy();return o.startSet_=!0,void 0===r&&(r=null),o.indexStartValue_=r,null!=t?(o.startNameSet_=!0,o.indexStartName_=t):(o.startNameSet_=!1,o.indexStartName_=""),o}function Ty(n,r,t){const o=n.copy();return o.endSet_=!0,void 0===r&&(r=null),o.indexEndValue_=r,void 0!==t?(o.endNameSet_=!0,o.indexEndName_=t):(o.endNameSet_=!1,o.indexEndName_=""),o}function O0(n,r){const t=n.copy();return t.index_=r,t}function N0(n){const r={};if(n.isDefault())return r;let t;if(n.index_===Fi?t="$priority":n.index_===S0?t="$value":n.index_===sd?t="$key":((0,le.hu)(n.index_ instanceof T0,"Unrecognized index type!"),t=n.index_.toString()),r.orderBy=(0,le.Wl)(t),n.startSet_){const o=n.startAfterSet_?"startAfter":"startAt";r[o]=(0,le.Wl)(n.indexStartValue_),n.startNameSet_&&(r[o]+=","+(0,le.Wl)(n.indexStartName_))}if(n.endSet_){const o=n.endBeforeSet_?"endBefore":"endAt";r[o]=(0,le.Wl)(n.indexEndValue_),n.endNameSet_&&(r[o]+=","+(0,le.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?r.limitToFirst=n.limit_:r.limitToLast=n.limit_),r}function BE(n){const r={};if(n.startSet_&&(r.sp=n.indexStartValue_,n.startNameSet_&&(r.sn=n.indexStartName_),r.sin=!n.startAfterSet_),n.endSet_&&(r.ep=n.indexEndValue_,n.endNameSet_&&(r.en=n.indexEndName_),r.ein=!n.endBeforeSet_),n.limitSet_){r.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),r.vf=t}return n.index_!==Fi&&(r.i=n.index_.toString()),r}class Ay extends hs{constructor(r,t,o,d){super(),this.repoInfo_=r,this.onDataUpdate_=t,this.authTokenProvider_=o,this.appCheckTokenProvider_=d,this.log_=Cf("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,t){return void 0!==t?"tag$"+t:((0,le.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,t,o,d){const m=r._path.toString();this.log_("Listen called for "+m+" "+r._queryIdentifier);const D=Ay.getListenId_(r,o),P={};this.listens_[D]=P;const U=N0(r._queryParams);this.restRequest_(m+".json",U,(W,ie)=>{let we=ie;if(404===W&&(we=null,W=null),null===W&&this.onDataUpdate_(m,we,!1,o),(0,le.DV)(this.listens_,D)===P){let Ee;Ee=W?401===W?"permission_denied":"rest_error:"+W:"ok",d(Ee,null)}})}unlisten(r,t){const o=Ay.getListenId_(r,t);delete this.listens_[o]}get(r){const t=N0(r._queryParams),o=r._path.toString(),d=new le.BH;return this.restRequest_(o+".json",t,(m,D)=>{let P=D;404===m&&(P=null,m=null),null===m?(this.onDataUpdate_(o,P,!1,null),d.resolve(P)):d.reject(new Error(P))}),d.promise}refreshAuthToken(r){}restRequest_(r,t={},o){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([d,m])=>{d&&d.accessToken&&(t.auth=d.accessToken),m&&m.token&&(t.ac=m.token);const D=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,le.xO)(t);this.log_("Sending REST request for "+D);const P=new XMLHttpRequest;P.onreadystatechange=()=>{if(o&&4===P.readyState){this.log_("REST Response for "+D+" received. status:",P.status,"response:",P.responseText);let U=null;if(P.status>=200&&P.status<300){try{U=(0,le.cI)(P.responseText)}catch{Ni("Failed to parse JSON response for "+D+": "+P.responseText)}o(null,U)}else 401!==P.status&&404!==P.status&&Ni("Got unsuccessful REST response for "+D+" Status: "+P.status),o(P.status);o=null}},P.open("GET",D,!0),P.send()})}}class YD{constructor(){this.rootNode_=pr.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,t){this.rootNode_=this.rootNode_.updateChild(r,t)}}function M0(){return{value:null,children:new Map}}function Pm(n,r,t){if(Or(r))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(r,t);else{const o=Ar(r);n.children.has(o)||n.children.set(o,M0()),Pm(n.children.get(o),r=ss(r),t)}}function Oy(n,r){if(Or(r))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Fi,(o,d)=>{Pm(n,new Di(o),d)}),Oy(n,r)}}if(n.children.size>0){const t=Ar(r);return r=ss(r),n.children.has(t)&&Oy(n.children.get(t),r)&&n.children.delete(t),0===n.children.size}return!0}function R0(n,r,t){null!==n.value?t(r,n.value):function VE(n,r){n.children.forEach((t,o)=>{r(o,t)})}(n,(o,d)=>{R0(d,new Di(r.toString()+"/"+o),t)})}class x0{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),t=Object.assign({},r);return this.last_&&Oo(this.last_,(o,d)=>{t[o]=t[o]-d}),this.last_=r,t}}class ZD{constructor(r,t){this.server_=t,this.statsToReport_={},this.statsListener_=new x0(r);const o=1e4+2e4*Math.random();Wp(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const r=this.statsListener_.get(),t={};let o=!1;Oo(r,(d,m)=>{m>0&&(0,le.r3)(this.statsToReport_,d)&&(t[d]=m,o=!0)}),o&&this.server_.reportStats(t),Wp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var eu=(()=>{return(n=eu||(eu={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",eu;var n})();function k0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class km{constructor(r,t,o){this.path=r,this.affectedTree=t,this.revert=o,this.type=eu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(Or(this.path)){if(null!=this.affectedTree.value)return(0,le.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Di(r));return new km(di(),t,this.revert)}}return(0,le.hu)(Ar(this.path)===r,"operationForChild called for unrelated child."),new km(ss(this.path),this.affectedTree,this.revert)}}class F0{constructor(r,t){this.source=r,this.path=t,this.type=eu.LISTEN_COMPLETE}operationForChild(r){return Or(this.path)?new F0(this.source,di()):new F0(this.source,ss(this.path))}}class Qp{constructor(r,t,o){this.source=r,this.path=t,this.snap=o,this.type=eu.OVERWRITE}operationForChild(r){return Or(this.path)?new Qp(this.source,di(),this.snap.getImmediateChild(r)):new Qp(this.source,ss(this.path),this.snap)}}class Ny{constructor(r,t,o){this.source=r,this.path=t,this.children=o,this.type=eu.MERGE}operationForChild(r){if(Or(this.path)){const t=this.children.subtree(new Di(r));return t.isEmpty()?null:t.value?new Qp(this.source,di(),t.value):new Ny(this.source,di(),t)}return(0,le.hu)(Ar(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new Ny(this.source,ss(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rf{constructor(r,t,o){this.node_=r,this.fullyInitialized_=t,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(Or(r))return this.isFullyInitialized()&&!this.filtered_;const t=Ar(r);return this.isCompleteForChild(t)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class QD{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function Fm(n,r,t,o,d,m){const D=o.filter(P=>P.type===t);D.sort((P,U)=>function XD(n,r,t){if(null==r.childName||null==t.childName)throw(0,le.g5)("Should only compare child_ events.");const o=new Br(r.childName,r.snapshotNode),d=new Br(t.childName,t.snapshotNode);return n.index_.compare(o,d)}(n,P,U)),D.forEach(P=>{const U=function jE(n,r,t){return"value"===r.type||"child_removed"===r.type||(r.prevName=t.getPredecessorChildName(r.childName,r.snapshotNode,n.index_)),r}(n,P,m);d.forEach(W=>{W.respondsTo(P.type)&&r.push(W.createEvent(U,n.query_))})})}function My(n,r){return{eventCache:n,serverCache:r}}function Lm(n,r,t,o){return My(new Rf(r,t,o),n.serverCache)}function HE(n,r,t,o){return My(n.eventCache,new Rf(r,t,o))}function L0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ew;class Hi{constructor(r,t=(()=>(Ew||(Ew=new Ja(d0)),Ew))()){this.value=r,this.children=t}static fromObject(r){let t=new Hi(null);return Oo(r,(o,d)=>{t=t.set(new Di(o),d)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,t){if(null!=this.value&&t(this.value))return{path:di(),value:this.value};if(Or(r))return null;{const o=Ar(r),d=this.children.get(o);if(null!==d){const m=d.findRootMostMatchingPathAndValue(ss(r),t);return null!=m?{path:Ts(new Di(o),m.path),value:m.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(Or(r))return this;{const t=Ar(r),o=this.children.get(t);return null!==o?o.subtree(ss(r)):new Hi(null)}}set(r,t){if(Or(r))return new Hi(t,this.children);{const o=Ar(r),m=(this.children.get(o)||new Hi(null)).set(ss(r),t),D=this.children.insert(o,m);return new Hi(this.value,D)}}remove(r){if(Or(r))return this.children.isEmpty()?new Hi(null):new Hi(null,this.children);{const t=Ar(r),o=this.children.get(t);if(o){const d=o.remove(ss(r));let m;return m=d.isEmpty()?this.children.remove(t):this.children.insert(t,d),null===this.value&&m.isEmpty()?new Hi(null):new Hi(this.value,m)}return this}}get(r){if(Or(r))return this.value;{const t=Ar(r),o=this.children.get(t);return o?o.get(ss(r)):null}}setTree(r,t){if(Or(r))return t;{const o=Ar(r),m=(this.children.get(o)||new Hi(null)).setTree(ss(r),t);let D;return D=m.isEmpty()?this.children.remove(o):this.children.insert(o,m),new Hi(this.value,D)}}fold(r){return this.fold_(di(),r)}fold_(r,t){const o={};return this.children.inorderTraversal((d,m)=>{o[d]=m.fold_(Ts(r,d),t)}),t(r,this.value,o)}findOnPath(r,t){return this.findOnPath_(r,di(),t)}findOnPath_(r,t,o){const d=!!this.value&&o(t,this.value);if(d)return d;if(Or(r))return null;{const m=Ar(r),D=this.children.get(m);return D?D.findOnPath_(ss(r),Ts(t,m),o):null}}foreachOnPath(r,t){return this.foreachOnPath_(r,di(),t)}foreachOnPath_(r,t,o){if(Or(r))return this;{this.value&&o(t,this.value);const d=Ar(r),m=this.children.get(d);return m?m.foreachOnPath_(ss(r),Ts(t,d),o):new Hi(null)}}foreach(r){this.foreach_(di(),r)}foreach_(r,t){this.children.inorderTraversal((o,d)=>{d.foreach_(Ts(r,o),t)}),this.value&&t(r,this.value)}foreachChild(r){this.children.inorderTraversal((t,o)=>{o.value&&r(t,o.value)})}}class Bu{constructor(r){this.writeTree_=r}static empty(){return new Bu(new Hi(null))}}function Um(n,r,t){if(Or(r))return new Bu(new Hi(t));{const o=n.writeTree_.findRootMostValueAndPath(r);if(null!=o){const d=o.path;let m=o.value;const D=bl(d,r);return m=m.updateChild(D,t),new Bu(n.writeTree_.set(d,m))}{const d=new Hi(t),m=n.writeTree_.setTree(r,d);return new Bu(m)}}}function Dw(n,r,t){let o=n;return Oo(t,(d,m)=>{o=Um(o,Ts(r,d),m)}),o}function zE(n,r){if(Or(r))return Bu.empty();{const t=n.writeTree_.setTree(r,new Hi(null));return new Bu(t)}}function WE(n,r){return null!=Pf(n,r)}function Pf(n,r){const t=n.writeTree_.findRootMostValueAndPath(r);return null!=t?n.writeTree_.get(t.path).getChild(bl(t.path,r)):null}function eI(n){const r=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fi,(o,d)=>{r.push(new Br(o,d))}):n.writeTree_.children.inorderTraversal((o,d)=>{null!=d.value&&r.push(new Br(o,d.value))}),r}function Jp(n,r){if(Or(r))return n;{const t=Pf(n,r);return new Bu(null!=t?new Hi(t):n.writeTree_.subtree(r))}}function KE(n){return n.writeTree_.isEmpty()}function Ry(n,r){return tI(di(),n.writeTree_,r)}function tI(n,r,t){if(null!=r.value)return t.updateChild(n,r.value);{let o=null;return r.children.inorderTraversal((d,m)=>{".priority"===d?((0,le.hu)(null!==m.value,"Priority writes must always be leaf nodes"),o=m.value):t=tI(Ts(n,d),m,t)}),!t.getChild(n).isEmpty()&&null!==o&&(t=t.updateChild(Ts(n,".priority"),o)),t}}function Iw(n,r){return eD(r,n)}function qE(n,r){if(n.snap)return Xl(n.path,r);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Xl(Ts(n.path,t),r))return!0;return!1}function YE(n){return n.visible}function Cw(n,r,t){let o=Bu.empty();for(let d=0;d<n.length;++d){const m=n[d];if(r(m)){const D=m.path;let P;if(m.snap)Xl(t,D)?(P=bl(t,D),o=Um(o,P,m.snap)):Xl(D,t)&&(P=bl(D,t),o=Um(o,di(),m.snap.getChild(P)));else{if(!m.children)throw(0,le.g5)("WriteRecord should have .snap or .children");if(Xl(t,D))P=bl(t,D),o=Dw(o,P,m.children);else if(Xl(D,t))if(P=bl(D,t),Or(P))o=Dw(o,di(),m.children);else{const U=(0,le.DV)(m.children,Ar(P));if(U){const W=U.getChild(ss(P));o=Um(o,di(),W)}}}}}return o}function nI(n,r,t,o,d){if(o||d){const m=Jp(n.visibleWrites,r);return!d&&KE(m)?t:d||null!=t||WE(m,di())?Ry(Cw(n.allWrites,function(W){return(W.visible||d)&&(!o||!~o.indexOf(W.writeId))&&(Xl(W.path,r)||Xl(r,W.path))},r),t||pr.EMPTY_NODE):null}{const m=Pf(n.visibleWrites,r);if(null!=m)return m;{const D=Jp(n.visibleWrites,r);return KE(D)?t:null!=t||WE(D,di())?Ry(D,t||pr.EMPTY_NODE):null}}}function V0(n,r,t,o){return nI(n.writeTree,n.treePath,r,t,o)}function Bm(n,r){return function Tw(n,r,t){let o=pr.EMPTY_NODE;const d=Pf(n.visibleWrites,r);if(d)return d.isLeafNode()||d.forEachChild(Fi,(m,D)=>{o=o.updateImmediateChild(m,D)}),o;if(t){const m=Jp(n.visibleWrites,r);return t.forEachChild(Fi,(D,P)=>{const U=Ry(Jp(m,new Di(D)),P);o=o.updateImmediateChild(D,U)}),eI(m).forEach(D=>{o=o.updateImmediateChild(D.name,D.node)}),o}return eI(Jp(n.visibleWrites,r)).forEach(D=>{o=o.updateImmediateChild(D.name,D.node)}),o}(n.writeTree,n.treePath,r)}function QE(n,r,t,o){return function ZE(n,r,t,o,d){(0,le.hu)(o||d,"Either existingEventSnap or existingServerSnap must exist");const m=Ts(r,t);if(WE(n.visibleWrites,m))return null;{const D=Jp(n.visibleWrites,m);return KE(D)?d.getChild(t):Ry(D,d.getChild(t))}}(n.writeTree,n.treePath,r,t,o)}function Sw(n,r){return function HI(n,r){return Pf(n.visibleWrites,r)}(n.writeTree,Ts(n.treePath,r))}function JE(n,r,t){return function rI(n,r,t,o){const d=Ts(r,t),m=Pf(n.visibleWrites,d);return null!=m?m:o.isCompleteForChild(t)?Ry(Jp(n.visibleWrites,d),o.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,r,t)}function XE(n,r){return eD(Ts(n.treePath,r),n.writeTree)}function eD(n,r){return{treePath:n,writeTree:r}}class sI{constructor(){this.changeMap=new Map}trackChildChange(r){const t=r.type,o=r.childName;(0,le.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,le.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const d=this.changeMap.get(o);if(d){const m=d.type;if("child_added"===t&&"child_removed"===m)this.changeMap.set(o,Rm(o,r.snapshotNode,d.snapshotNode));else if("child_removed"===t&&"child_added"===m)this.changeMap.delete(o);else if("child_removed"===t&&"child_changed"===m)this.changeMap.set(o,Mm(o,d.oldSnap));else if("child_changed"===t&&"child_added"===m)this.changeMap.set(o,Nm(o,r.snapshotNode));else{if("child_changed"!==t||"child_changed"!==m)throw(0,le.g5)("Illegal combination of changes: "+r+" occurred after "+d);this.changeMap.set(o,Rm(o,r.snapshotNode,d.oldSnap))}}else this.changeMap.set(o,r)}getChanges(){return Array.from(this.changeMap.values())}}const tD=new class WI{getCompleteChild(r){return null}getChildAfterChild(r,t,o){return null}};class G0{constructor(r,t,o=null){this.writes_=r,this.viewCache_=t,this.optCompleteServerCache_=o}getCompleteChild(r){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(r))return t.getNode().getImmediateChild(r);{const o=null!=this.optCompleteServerCache_?new Rf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return JE(this.writes_,r,o)}}getChildAfterChild(r,t,o){const d=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xf(this.viewCache_),m=function zI(n,r,t,o,d,m){return function $I(n,r,t,o,d,m,D){let P;const U=Jp(n.visibleWrites,r),W=Pf(U,di());if(null!=W)P=W;else{if(null==t)return[];P=Ry(U,t)}if(P=P.withIndex(D),P.isEmpty()||P.isLeafNode())return[];{const ie=[],we=D.getCompare(),Ee=m?P.getReverseIteratorFrom(o,D):P.getIteratorFrom(o,D);let Ge=Ee.getNext();for(;Ge&&ie.length<d;)0!==we(Ge,o)&&ie.push(Ge),Ge=Ee.getNext();return ie}}(n.writeTree,n.treePath,r,t,o,d,m)}(this.writes_,d,t,1,o,r);return 0===m.length?null:m[0]}}function j0(n,r,t,o,d,m){const D=r.eventCache;if(null!=Sw(o,t))return r;{let P,U;if(Or(t))if((0,le.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const W=xf(r),we=Bm(o,W instanceof pr?W:pr.EMPTY_NODE);P=n.filter.updateFullNode(r.eventCache.getNode(),we,m)}else{const W=V0(o,xf(r));P=n.filter.updateFullNode(r.eventCache.getNode(),W,m)}else{const W=Ar(t);if(".priority"===W){(0,le.hu)(1===oh(t),"Can't have a priority with additional path components");const ie=D.getNode();U=r.serverCache.getNode();const we=QE(o,t,ie,U);P=null!=we?n.filter.updatePriority(ie,we):D.getNode()}else{const ie=ss(t);let we;if(D.isCompleteForChild(W)){U=r.serverCache.getNode();const Ee=QE(o,t,D.getNode(),U);we=null!=Ee?D.getNode().getImmediateChild(W).updateChild(ie,Ee):D.getNode().getImmediateChild(W)}else we=JE(o,W,r.serverCache);P=null!=we?n.filter.updateChild(D.getNode(),W,we,ie,d,m):D.getNode()}}return Lm(r,P,D.isFullyInitialized()||Or(t),n.filter.filtersNodes())}}function H0(n,r,t,o,d,m,D,P){const U=r.serverCache;let W;const ie=D?n.filter:n.filter.getIndexedFilter();if(Or(t))W=ie.updateFullNode(U.getNode(),o,null);else if(ie.filtersNodes()&&!U.isFiltered()){const Ge=U.getNode().updateChild(t,o);W=ie.updateFullNode(U.getNode(),Ge,null)}else{const Ge=Ar(t);if(!U.isCompleteForPath(t)&&oh(t)>1)return r;const Tt=ss(t),Jt=U.getNode().getImmediateChild(Ge).updateChild(Tt,o);W=".priority"===Ge?ie.updatePriority(U.getNode(),Jt):ie.updateChild(U.getNode(),Ge,Jt,Tt,tD,null)}const we=HE(r,W,U.isFullyInitialized()||Or(t),ie.filtersNodes());return j0(n,we,t,d,new G0(d,we,m),P)}function rD(n,r,t,o,d,m,D){const P=r.eventCache;let U,W;const ie=new G0(d,r,m);if(Or(t))W=n.filter.updateFullNode(r.eventCache.getNode(),o,D),U=Lm(r,W,!0,n.filter.filtersNodes());else{const we=Ar(t);if(".priority"===we)W=n.filter.updatePriority(r.eventCache.getNode(),o),U=Lm(r,W,P.isFullyInitialized(),P.isFiltered());else{const Ee=ss(t),Ge=P.getNode().getImmediateChild(we);let Tt;if(Or(Ee))Tt=o;else{const Vt=ie.getCompleteChild(we);Tt=null!=Vt?".priority"===w0(Ee)&&Vt.getChild(BD(Ee)).isEmpty()?Vt:Vt.updateChild(Ee,o):pr.EMPTY_NODE}U=Ge.equals(Tt)?r:Lm(r,n.filter.updateChild(P.getNode(),we,Tt,Ee,ie,D),P.isFullyInitialized(),n.filter.filtersNodes())}}return U}function tu(n,r){return n.eventCache.isCompleteForChild(r)}function $0(n,r,t){return t.foreach((o,d)=>{r=r.updateChild(o,d)}),r}function Aw(n,r,t,o,d,m,D,P){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let W,U=r;W=Or(t)?o:new Hi(null).setTree(t,o);const ie=r.serverCache.getNode();return W.children.inorderTraversal((we,Ee)=>{if(ie.hasChild(we)){const Tt=$0(0,r.serverCache.getNode().getImmediateChild(we),Ee);U=H0(n,U,new Di(we),Tt,d,m,D,P)}}),W.children.inorderTraversal((we,Ee)=>{const Ge=!r.serverCache.isCompleteForChild(we)&&null===Ee.value;if(!ie.hasChild(we)&&!Ge){const Vt=$0(0,r.serverCache.getNode().getImmediateChild(we),Ee);U=H0(n,U,new Di(we),Vt,d,m,D,P)}}),U}class sD{constructor(r,t){this.query_=r,this.eventRegistrations_=[];const o=this.query_._queryParams,d=new A0(o.getIndex()),m=function KD(n){return n.loadsAllData()?new A0(n.getIndex()):n.hasLimit()?new El(n):new xm(n)}(o);this.processor_=function nD(n){return{filter:n}}(m);const D=t.serverCache,P=t.eventCache,U=d.updateFullNode(pr.EMPTY_NODE,D.getNode(),null),W=m.updateFullNode(pr.EMPTY_NODE,P.getNode(),null),ie=new Rf(U,D.isFullyInitialized(),d.filtersNodes()),we=new Rf(W,P.isFullyInitialized(),m.filtersNodes());this.viewCache_=My(we,ie),this.eventGenerator_=new QD(this.query_)}get query(){return this.query_}}function aD(n,r){const t=xf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Or(r)&&!t.getImmediateChild(Ar(r)).isEmpty())?t.getChild(r):null}function lD(n){return 0===n.eventRegistrations_.length}function cD(n,r,t){const o=[];if(t){(0,le.hu)(null==r,"A cancel should cancel all event registrations.");const d=n.query._path;n.eventRegistrations_.forEach(m=>{const D=m.createCancelEvent(t,d);D&&o.push(D)})}if(r){let d=[];for(let m=0;m<n.eventRegistrations_.length;++m){const D=n.eventRegistrations_[m];if(D.matches(r)){if(r.hasAnyCallback()){d=d.concat(n.eventRegistrations_.slice(m+1));break}}else d.push(D)}n.eventRegistrations_=d}else n.eventRegistrations_=[];return o}function z0(n,r,t,o){r.type===eu.MERGE&&null!==r.source.queryId&&((0,le.hu)(xf(n.viewCache_),"We should always have a full cache before handling merges"),(0,le.hu)(L0(n.viewCache_),"Missing event cache, even though we have a server cache"));const d=n.viewCache_,m=function yc(n,r,t,o,d){const m=new sI;let D,P;if(t.type===eu.OVERWRITE){const W=t;W.source.fromUser?D=rD(n,r,W.path,W.snap,o,d,m):((0,le.hu)(W.source.fromServer,"Unknown source."),P=W.source.tagged||r.serverCache.isFiltered()&&!Or(W.path),D=H0(n,r,W.path,W.snap,o,d,P,m))}else if(t.type===eu.MERGE){const W=t;W.source.fromUser?D=function aI(n,r,t,o,d,m,D){let P=r;return o.foreach((U,W)=>{const ie=Ts(t,U);tu(r,Ar(ie))&&(P=rD(n,P,ie,W,d,m,D))}),o.foreach((U,W)=>{const ie=Ts(t,U);tu(r,Ar(ie))||(P=rD(n,P,ie,W,d,m,D))}),P}(n,r,W.path,W.children,o,d,m):((0,le.hu)(W.source.fromServer,"Unknown source."),P=W.source.tagged||r.serverCache.isFiltered(),D=Aw(n,r,W.path,W.children,o,d,P,m))}else if(t.type===eu.ACK_USER_WRITE){const W=t;D=W.revert?function iD(n,r,t,o,d,m){let D;if(null!=Sw(o,t))return r;{const P=new G0(o,r,d),U=r.eventCache.getNode();let W;if(Or(t)||".priority"===Ar(t)){let ie;if(r.serverCache.isFullyInitialized())ie=V0(o,xf(r));else{const we=r.serverCache.getNode();(0,le.hu)(we instanceof pr,"serverChildren would be complete if leaf node"),ie=Bm(o,we)}W=n.filter.updateFullNode(U,ie,m)}else{const ie=Ar(t);let we=JE(o,ie,r.serverCache);null==we&&r.serverCache.isCompleteForChild(ie)&&(we=U.getImmediateChild(ie)),W=null!=we?n.filter.updateChild(U,ie,we,ss(t),P,m):r.eventCache.getNode().hasChild(ie)?n.filter.updateChild(U,ie,pr.EMPTY_NODE,ss(t),P,m):U,W.isEmpty()&&r.serverCache.isFullyInitialized()&&(D=V0(o,xf(r)),D.isLeafNode()&&(W=n.filter.updateFullNode(W,D,m)))}return D=r.serverCache.isFullyInitialized()||null!=Sw(o,di()),Lm(r,W,D,n.filter.filtersNodes())}}(n,r,W.path,o,d,m):function lI(n,r,t,o,d,m,D){if(null!=Sw(d,t))return r;const P=r.serverCache.isFiltered(),U=r.serverCache;if(null!=o.value){if(Or(t)&&U.isFullyInitialized()||U.isCompleteForPath(t))return H0(n,r,t,U.getNode().getChild(t),d,m,P,D);if(Or(t)){let W=new Hi(null);return U.getNode().forEachChild(sd,(ie,we)=>{W=W.set(new Di(ie),we)}),Aw(n,r,t,W,d,m,P,D)}return r}{let W=new Hi(null);return o.foreach((ie,we)=>{const Ee=Ts(t,ie);U.isCompleteForPath(Ee)&&(W=W.set(ie,U.getNode().getChild(Ee)))}),Aw(n,r,t,W,d,m,P,D)}}(n,r,W.path,W.affectedTree,o,d,m)}else{if(t.type!==eu.LISTEN_COMPLETE)throw(0,le.g5)("Unknown operation type: "+t.type);D=function Ow(n,r,t,o,d){const m=r.serverCache;return j0(n,HE(r,m.getNode(),m.isFullyInitialized()||Or(t),m.isFiltered()),t,o,tD,d)}(n,r,t.path,o,m)}const U=m.getChanges();return function oI(n,r,t){const o=r.eventCache;if(o.isFullyInitialized()){const d=o.getNode().isLeafNode()||o.getNode().isEmpty(),m=L0(n);(t.length>0||!n.eventCache.isFullyInitialized()||d&&!o.getNode().equals(m)||!o.getNode().getPriority().equals(m.getPriority()))&&t.push(bw(L0(r)))}}(r,D,U),{viewCache:D,changes:U}}(n.processor_,d,r,t,o);return function KI(n,r){(0,le.hu)(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,le.hu)(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,m.viewCache),(0,le.hu)(m.viewCache.serverCache.isFullyInitialized()||!d.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=m.viewCache,dh(n,m.changes,m.viewCache.eventCache.getNode(),null)}function dh(n,r,t,o){return function JD(n,r,t,o){const d=[],m=[];return r.forEach(D=>{"child_changed"===D.type&&n.index_.indexedValueChanged(D.oldSnap,D.snapshotNode)&&m.push(function WD(n,r){return{type:"child_moved",snapshotNode:r,childName:n}}(D.childName,D.snapshotNode))}),Fm(n,d,"child_removed",r,o,t),Fm(n,d,"child_added",r,o,t),Fm(n,d,"child_moved",m,o,t),Fm(n,d,"child_changed",r,o,t),Fm(n,d,"value",r,o,t),d}(n.eventGenerator_,r,t,o?[o]:n.eventRegistrations_)}let xy,Vm;class W0{constructor(){this.views=new Map}}function Nw(n,r,t,o){const d=r.source.queryId;if(null!==d){const m=n.views.get(d);return(0,le.hu)(null!=m,"SyncTree gave us an op for an invalid query."),z0(m,r,t,o)}{let m=[];for(const D of n.views.values())m=m.concat(z0(D,r,t,o));return m}}function hD(n,r,t,o,d){const D=n.views.get(r._queryIdentifier);if(!D){let P=V0(t,d?o:null),U=!1;P?U=!0:o instanceof pr?(P=Bm(t,o),U=!1):(P=pr.EMPTY_NODE,U=!1);const W=My(new Rf(P,U,!1),new Rf(o,d,!1));return new sD(r,W)}return D}function Mw(n){const r=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||r.push(t);return r}function Xp(n,r){let t=null;for(const o of n.views.values())t=t||aD(o,r);return t}function Rw(n,r){return r._queryParams.loadsAllData()?xw(n):n.views.get(r._queryIdentifier)}function fD(n,r){return null!=Rw(n,r)}function hh(n){return null!=xw(n)}function xw(n){for(const r of n.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let mD=1;class Pw{constructor(r){this.listenProvider_=r,this.syncPointTree_=new Hi(null),this.pendingWriteTree_=function iI(){return{visibleWrites:Bu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function K0(n,r,t,o,d){return function VI(n,r,t,o,d){(0,le.hu)(o>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===d&&(d=!0),n.allWrites.push({path:r,snap:t,writeId:o,visible:d}),d&&(n.visibleWrites=Um(n.visibleWrites,r,t)),n.lastWriteId=o}(n.pendingWriteTree_,r,t,o,d),d?Py(n,new Qp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,t)):[]}function vc(n,r,t=!1){const o=function U0(n,r){for(let t=0;t<n.allWrites.length;t++){const o=n.allWrites[t];if(o.writeId===r)return o}return null}(n.pendingWriteTree_,r);if(function jI(n,r){const t=n.allWrites.findIndex(P=>P.writeId===r);(0,le.hu)(t>=0,"removeWrite called with nonexistent writeId.");const o=n.allWrites[t];n.allWrites.splice(t,1);let d=o.visible,m=!1,D=n.allWrites.length-1;for(;d&&D>=0;){const P=n.allWrites[D];P.visible&&(D>=t&&qE(P,o.path)?d=!1:Xl(o.path,P.path)&&(m=!0)),D--}return!!d&&(m?(function B0(n){n.visibleWrites=Cw(n.allWrites,YE,di()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(o.snap?n.visibleWrites=zE(n.visibleWrites,o.path):Oo(o.children,U=>{n.visibleWrites=zE(n.visibleWrites,Ts(o.path,U))}),!0))}(n.pendingWriteTree_,r)){let m=new Hi(null);return null!=o.snap?m=m.set(di(),!0):Oo(o.children,D=>{m=m.set(new Di(D),!0)}),Py(n,new km(o.path,m,t))}return[]}function Gm(n,r,t){return Py(n,new Qp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,t))}function kw(n,r,t,o,d=!1){const m=r._path,D=n.syncPointTree_.get(m);let P=[];if(D&&("default"===r._queryIdentifier||fD(D,r))){const U=function hI(n,r,t,o){const d=r._queryIdentifier,m=[];let D=[];const P=hh(n);if("default"===d)for(const[U,W]of n.views.entries())D=D.concat(cD(W,t,o)),lD(W)&&(n.views.delete(U),W.query._queryParams.loadsAllData()||m.push(W.query));else{const U=n.views.get(d);U&&(D=D.concat(cD(U,t,o)),lD(U)&&(n.views.delete(d),U.query._queryParams.loadsAllData()||m.push(U.query)))}return P&&!hh(n)&&m.push(new(function cI(){return(0,le.hu)(xy,"Reference.ts has not been loaded"),xy}())(r._repo,r._path)),{removed:m,events:D}}(D,r,t,o);(function qI(n){return 0===n.views.size})(D)&&(n.syncPointTree_=n.syncPointTree_.remove(m));const W=U.removed;if(P=U.events,!d){const ie=-1!==W.findIndex(Ee=>Ee._queryParams.loadsAllData()),we=n.syncPointTree_.findOnPath(m,(Ee,Ge)=>hh(Ge));if(ie&&!we){const Ee=n.syncPointTree_.subtree(m);if(!Ee.isEmpty()){const Ge=function yD(n){return n.fold((r,t,o)=>{if(t&&hh(t))return[xw(t)];{let d=[];return t&&(d=Mw(t)),Oo(o,(m,D)=>{d=d.concat(D)}),d}})}(Ee);for(let Tt=0;Tt<Ge.length;++Tt){const Vt=Ge[Tt],Jt=Vt.query,Un=vI(n,Vt);n.listenProvider_.startListening(bc(Jt),Z0(n,Jt),Un.hashFn,Un.onComplete)}}}!we&&W.length>0&&!o&&(ie?n.listenProvider_.stopListening(bc(r),null):W.forEach(Ee=>{const Ge=n.queryToTagMap.get(Q0(Ee));n.listenProvider_.stopListening(bc(Ee),Ge)}))}!function vD(n,r){for(let t=0;t<r.length;++t){const o=r[t];if(!o._queryParams.loadsAllData()){const d=Q0(o),m=n.queryToTagMap.get(d);n.queryToTagMap.delete(d),n.tagToQueryMap.delete(m)}}}(n,W)}return P}function gI(n,r,t,o){const d=jm(n,o);if(null!=d){const m=Lw(d),D=m.path,P=m.queryId,U=bl(D,r);return Uw(n,D,new Qp(k0(P),U,t))}return[]}function Fw(n,r,t,o=!1){const d=r._path;let m=null,D=!1;n.syncPointTree_.foreachOnPath(d,(Ee,Ge)=>{const Tt=bl(Ee,d);m=m||Xp(Ge,Tt),D=D||hh(Ge)});let U,P=n.syncPointTree_.get(d);P?(D=D||hh(P),m=m||Xp(P,di())):(P=new W0,n.syncPointTree_=n.syncPointTree_.set(d,P)),null!=m?U=!0:(U=!1,m=pr.EMPTY_NODE,n.syncPointTree_.subtree(d).foreachChild((Ge,Tt)=>{const Vt=Xp(Tt,di());Vt&&(m=m.updateImmediateChild(Ge,Vt))}));const W=fD(P,r);if(!W&&!r._queryParams.loadsAllData()){const Ee=Q0(r);(0,le.hu)(!n.queryToTagMap.has(Ee),"View does not exist, but we have a tag");const Ge=function Bw(){return mD++}();n.queryToTagMap.set(Ee,Ge),n.tagToQueryMap.set(Ge,Ee)}let we=function dI(n,r,t,o,d,m){const D=hD(n,r,o,d,m);return n.views.has(r._queryIdentifier)||n.views.set(r._queryIdentifier,D),function uD(n,r){n.eventRegistrations_.push(r)}(D,t),function ch(n,r){const t=n.viewCache_.eventCache,o=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fi,(m,D)=>{o.push(Nm(m,D))}),t.isFullyInitialized()&&o.push(bw(t.getNode())),dh(n,o,t.getNode(),r)}(D,t)}(P,r,t,Iw(n.pendingWriteTree_,d),m,U);if(!W&&!D&&!o){const Ee=Rw(P,r);we=we.concat(function Vw(n,r,t){const o=r._path,d=Z0(n,r),m=vI(n,t),D=n.listenProvider_.startListening(bc(r),d,m.hashFn,m.onComplete),P=n.syncPointTree_.subtree(o);if(d)(0,le.hu)(!hh(P.value),"If we're adding a query, it shouldn't be shadowed");else{const U=P.fold((W,ie,we)=>{if(!Or(W)&&ie&&hh(ie))return[xw(ie).query];{let Ee=[];return ie&&(Ee=Ee.concat(Mw(ie).map(Ge=>Ge.query))),Oo(we,(Ge,Tt)=>{Ee=Ee.concat(Tt)}),Ee}});for(let W=0;W<U.length;++W){const ie=U[W];n.listenProvider_.stopListening(bc(ie),Z0(n,ie))}}return D}(n,r,Ee))}return we}function Y0(n,r,t){const d=n.pendingWriteTree_,m=n.syncPointTree_.findOnPath(r,(D,P)=>{const W=Xp(P,bl(D,r));if(W)return W});return nI(d,r,m,t,!0)}function Py(n,r){return _I(r,n.syncPointTree_,null,Iw(n.pendingWriteTree_,di()))}function _I(n,r,t,o){if(Or(n.path))return yI(n,r,t,o);{const d=r.get(di());null==t&&null!=d&&(t=Xp(d,di()));let m=[];const D=Ar(n.path),P=n.operationForChild(D),U=r.children.get(D);if(U&&P){const W=t?t.getImmediateChild(D):null,ie=XE(o,D);m=m.concat(_I(P,U,W,ie))}return d&&(m=m.concat(Nw(d,n,o,t))),m}}function yI(n,r,t,o){const d=r.get(di());null==t&&null!=d&&(t=Xp(d,di()));let m=[];return r.children.inorderTraversal((D,P)=>{const U=t?t.getImmediateChild(D):null,W=XE(o,D),ie=n.operationForChild(D);ie&&(m=m.concat(yI(ie,P,U,W)))}),d&&(m=m.concat(Nw(d,n,o,t))),m}function vI(n,r){const t=r.query,o=Z0(n,t);return{hashFn:()=>(function uI(n){return n.viewCache_.serverCache.getNode()}(r)||pr.EMPTY_NODE).hash(),onComplete:d=>{if("ok"===d)return o?function YI(n,r,t){const o=jm(n,t);if(o){const d=Lw(o),m=d.path,D=d.queryId,P=bl(m,r);return Uw(n,m,new F0(k0(D),P))}return[]}(n,t._path,o):function pI(n,r){return Py(n,new F0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(n,t._path);{const m=function aw(n,r){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const o=new Error(n+" at "+r._path.toString()+": "+t);return o.code=n.toUpperCase(),o}(d,t);return kw(n,t,null,m)}}}}function Z0(n,r){const t=Q0(r);return n.queryToTagMap.get(t)}function Q0(n){return n._path.toString()+"$"+n._queryIdentifier}function jm(n,r){return n.tagToQueryMap.get(r)}function Lw(n){const r=n.indexOf("$");return(0,le.hu)(-1!==r&&r<n.length-1,"Bad queryKey."),{queryId:n.substr(r+1),path:new Di(n.substr(0,r))}}function Uw(n,r,t){const o=n.syncPointTree_.get(r);return(0,le.hu)(o,"Missing sync point for query tag that we're tracking"),Nw(o,t,Iw(n.pendingWriteTree_,r),null)}function bc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function gD(){return(0,le.hu)(Vm,"Reference.ts has not been loaded"),Vm}())(n._repo,n._path):n}class Gw{constructor(r){this.node_=r}getImmediateChild(r){const t=this.node_.getImmediateChild(r);return new Gw(t)}node(){return this.node_}}class ky{constructor(r,t){this.syncTree_=r,this.path_=t}getImmediateChild(r){const t=Ts(this.path_,r);return new ky(this.syncTree_,t)}node(){return Y0(this.syncTree_,this.path_)}}const jw=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Fy=function(n,r,t){return n&&"object"==typeof n?((0,le.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?ZI(n[".sv"],r,t):"object"==typeof n[".sv"]?QI(n[".sv"],r):void(0,le.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},ZI=function(n,r,t){if("timestamp"===n)return t.timestamp;(0,le.hu)(!1,"Unexpected server value: "+n)},QI=function(n,r,t){n.hasOwnProperty("increment")||(0,le.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const o=n.increment;"number"!=typeof o&&(0,le.hu)(!1,"Unexpected increment value: "+o);const d=r.node();if((0,le.hu)(null!==d&&typeof d<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!d.isLeafNode())return o;const D=d.getValue();return"number"!=typeof D?o:D+o},bI=function(n,r,t,o){return J0(r,new ky(t,n),o)},bD=function(n,r,t){return J0(n,new Gw(r),t)};function J0(n,r,t){const o=n.getPriority().val(),d=Fy(o,r.getImmediateChild(".priority"),t);let m;if(n.isLeafNode()){const D=n,P=Fy(D.getValue(),r,t);return P!==D.getValue()||d!==D.getPriority().val()?new lh(P,fs(d)):n}{const D=n;return m=D,d!==D.getPriority().val()&&(m=m.updatePriority(new lh(d))),D.forEachChild(Fi,(P,U)=>{const W=J0(U,r.getImmediateChild(P),t);W!==U&&(m=m.updateImmediateChild(P,W))}),m}}class Hw{constructor(r="",t=null,o={children:{},childCount:0}){this.name=r,this.parent=t,this.node=o}}function X0(n,r){let t=r instanceof Di?r:new Di(r),o=n,d=Ar(t);for(;null!==d;){const m=(0,le.DV)(o.node.children,d)||{children:{},childCount:0};o=new Hw(d,o,m),t=ss(t),d=Ar(t)}return o}function eg(n){return n.node.value}function $w(n,r){n.node.value=r,Uy(n)}function zw(n){return n.node.childCount>0}function Ly(n,r){Oo(n.node.children,(t,o)=>{r(new Hw(t,n,o))})}function ED(n,r,t,o){t&&!o&&r(n),Ly(n,d=>{ED(d,r,!0,o)}),t&&o&&r(n)}function Hm(n){return new Di(null===n.parent?n.name:Hm(n.parent)+"/"+n.name)}function Uy(n){null!==n.parent&&function JI(n,r,t){const o=function wD(n){return void 0===eg(n)&&!zw(n)}(t),d=(0,le.r3)(n.node.children,r);o&&d?(delete n.node.children[r],n.node.childCount--,Uy(n)):!o&&!d&&(n.node.children[r]=t.node,n.node.childCount++,Uy(n))}(n.parent,n.name,n)}const DD=/[\[\].#$\/\u0000-\u001F\u007F]/,Ww=/[\[\].#$\u0000-\u001F\u007F]/,Kw=10485760,eb=function(n){return"string"==typeof n&&0!==n.length&&!DD.test(n)},EI=function(n){return"string"==typeof n&&0!==n.length&&!Ww.test(n)},By=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!vm(n)||n&&"object"==typeof n&&(0,le.r3)(n,".sv")},ad=function(n,r,t,o){o&&void 0===r||Vy((0,le.gK)(n,"value"),r,t)},Vy=function(n,r,t){const o=t instanceof Di?new VD(t,n):t;if(void 0===r)throw new Error(n+"contains undefined "+Yp(o));if("function"==typeof r)throw new Error(n+"contains a function "+Yp(o)+" with contents = "+r.toString());if(vm(r))throw new Error(n+"contains "+r.toString()+" "+Yp(o));if("string"==typeof r&&r.length>Kw/3&&(0,le.ug)(r)>Kw)throw new Error(n+"contains a string greater than "+Kw+" utf8 bytes "+Yp(o)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let d=!1,m=!1;if(Oo(r,(D,P)=>{if(".value"===D)d=!0;else if(".priority"!==D&&".sv"!==D&&(m=!0,!eb(D)))throw new Error(n+" contains an invalid key ("+D+") "+Yp(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function GD(n,r){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(r),n.byteLength_+=(0,le.ug)(r),EE(n)})(o,D),Vy(n,P,o),function jD(n){const r=n.parts_.pop();n.byteLength_-=(0,le.ug)(r),n.parts_.length>0&&(n.byteLength_-=1)}(o)}),d&&m)throw new Error(n+' contains ".value" child '+Yp(o)+" in addition to actual children.")}},DI=function(n,r,t,o){if(o&&void 0===r)return;const d=(0,le.gK)(n,"values");if(!r||"object"!=typeof r||Array.isArray(r))throw new Error(d+" must be an object containing the children to replace.");const m=[];Oo(r,(D,P)=>{const U=new Di(D);if(Vy(d,P,Ts(t,U)),".priority"===w0(U)&&!By(P))throw new Error(d+"contains an invalid value for '"+U.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");m.push(U)}),function(n,r){let t,o;for(t=0;t<r.length;t++){o=r[t];const m=vy(o);for(let D=0;D<m.length;D++)if((".priority"!==m[D]||D!==m.length-1)&&!eb(m[D]))throw new Error(n+"contains an invalid key ("+m[D]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}r.sort(wE);let d=null;for(t=0;t<r.length;t++){if(o=r[t],null!==d&&Xl(d,o))throw new Error(n+"contains a path "+d.toString()+" that is ancestor of another path "+o.toString());d=o}}(d,m)},ID=function(n,r,t){if(!t||void 0!==r){if(vm(r))throw new Error((0,le.gK)(n,"priority")+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!By(r))throw new Error((0,le.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},tb=function(n,r,t,o){if(!(o&&void 0===t||eb(t)))throw new Error((0,le.gK)(n,r)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gy=function(n,r,t,o){if(!(o&&void 0===t||EI(t)))throw new Error((0,le.gK)(n,r)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tC=function(n,r,t,o){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gy(n,r,t,o)},wc=function(n,r){if(".info"===Ar(r))throw new Error(n+" failed = Can't modify data under /.info/")},II=function(n,r){const t=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!eb(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),EI(n)}(t))throw new Error((0,le.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class nC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nb(n,r){let t=null;for(let o=0;o<r.length;o++){const d=r[o],m=d.getPath();null!==t&&!E0(m,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:m}),t.events.push(d)}t&&n.eventLists_.push(t)}function CI(n,r,t){nb(n,t),a(n,o=>E0(o,r))}function s(n,r,t){nb(n,t),a(n,o=>Xl(o,r)||Xl(r,o))}function a(n,r){n.recursionDepth_++;let t=!0;for(let o=0;o<n.eventLists_.length;o++){const d=n.eventLists_[o];d&&(r(d.path)?(c(n.eventLists_[o]),n.eventLists_[o]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function c(n){for(let r=0;r<n.events.length;r++){const t=n.events[r];if(null!==t){n.events[r]=null;const o=t.getEventRunner();nh&&Ao("event: "+t.toString()),td(o)}}}const f="repo_interrupt",g=25;class y{constructor(r,t,o,d){this.repoInfo_=r,this.forceRestClient_=t,this.authTokenProvider_=o,this.appCheckProvider_=d,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=M0(),this.transactionQueueTree_=new Hw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function N(n){const t=n.infoData_.getNode(new Di(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function k(n){return jw({timestamp:N(n)})}function H(n,r,t,o,d){n.dataUpdateCount++;const m=new Di(r);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(r,t):t;let D=[];if(d)if(o){const U=(0,le.UI)(t,W=>fs(W));D=function _D(n,r,t,o){const d=jm(n,o);if(d){const m=Lw(d),D=m.path,P=m.queryId,U=bl(D,r),W=Hi.fromObject(t);return Uw(n,D,new Ny(k0(P),U,W))}return[]}(n.serverSyncTree_,m,U,d)}else{const U=fs(t);D=gI(n.serverSyncTree_,m,U,d)}else if(o){const U=(0,le.UI)(t,W=>fs(W));D=function fI(n,r,t){const o=Hi.fromObject(t);return Py(n,new Ny({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,o))}(n.serverSyncTree_,m,U)}else{const U=fs(t);D=Gm(n.serverSyncTree_,m,U)}let P=m;D.length>0&&(P=ib(n,m)),s(n.eventQueue_,P,D)}function X(n,r){Me(n,"connected",r),!1===r&&function vn(n){rb(n,"onDisconnectEvents");const r=k(n),t=M0();R0(n.onDisconnect_,di(),(d,m)=>{const D=bI(d,m,n.serverSyncTree_,r);Pm(t,d,D)});let o=[];R0(t,di(),(d,m)=>{o=o.concat(Gm(n.serverSyncTree_,d,m));const D=SI(n,d);ib(n,D)}),n.onDisconnect_=M0(),s(n.eventQueue_,di(),o)}(n)}function Me(n,r,t){const o=new Di("/.info/"+r),d=fs(t);n.infoData_.updateSnapshot(o,d);const m=Gm(n.infoSyncTree_,o,d);s(n.eventQueue_,o,m)}function He(n){return n.nextWriteId_++}function jt(n,r,t,o,d){rb(n,"set",{path:r.toString(),value:t,priority:o});const m=k(n),D=fs(t,o),P=Y0(n.serverSyncTree_,r),U=bD(D,P,m),W=He(n),ie=K0(n.serverSyncTree_,r,U,W,!0);nb(n.eventQueue_,ie),n.server_.put(r.toString(),D.val(!0),(Ee,Ge)=>{const Tt="ok"===Ee;Tt||Ni("set at "+r+" failed: "+Ee);const Vt=vc(n.serverSyncTree_,W,!Tt);s(n.eventQueue_,r,Vt),$m(0,d,Ee,Ge)});const we=SI(n,r);ib(n,we),s(n.eventQueue_,we,[])}function Yn(n,r,t){n.server_.onDisconnectCancel(r.toString(),(o,d)=>{"ok"===o&&Oy(n.onDisconnect_,r),$m(0,t,o,d)})}function xt(n,r,t,o){const d=fs(t);n.server_.onDisconnectPut(r.toString(),d.val(!0),(m,D)=>{"ok"===m&&Pm(n.onDisconnect_,r,d),$m(0,o,m,D)})}function CD(n,r,t){let o;o=".info"===Ar(r._path)?kw(n.infoSyncTree_,r,t):kw(n.serverSyncTree_,r,t),CI(n.eventQueue_,r._path,o)}function rC(n){n.persistentConnection_&&n.persistentConnection_.interrupt(f)}function rb(n,...r){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ao(t,...r)}function $m(n,r,t,o){r&&td(()=>{if("ok"===t)r(null);else{const d=(t||"error").toUpperCase();let m=d;o&&(m+=": "+o);const D=new Error(m);D.code=d,r(D)}})}function TI(n,r,t){return Y0(n.serverSyncTree_,r,t)||pr.EMPTY_NODE}function TD(n,r=n.transactionQueueTree_){if(r||SD(n,r),eg(r)){const t=sC(n,r);(0,le.hu)(t.length>0,"Sending zero length transaction queue"),t.every(d=>0===d.status)&&function WC(n,r,t){const o=t.map(W=>W.currentWriteId),d=TI(n,r,o);let m=d;const D=d.hash();for(let W=0;W<t.length;W++){const ie=t[W];(0,le.hu)(0===ie.status,"tryToSendTransactionQueue_: items in queue should all be run."),ie.status=1,ie.retryCount++;const we=bl(r,ie.path);m=m.updateChild(we,ie.currentOutputSnapshotRaw)}const P=m.val(!0),U=r;n.server_.put(U.toString(),P,W=>{rb(n,"transaction put response",{path:U.toString(),status:W});let ie=[];if("ok"===W){const we=[];for(let Ee=0;Ee<t.length;Ee++)t[Ee].status=2,ie=ie.concat(vc(n.serverSyncTree_,t[Ee].currentWriteId)),t[Ee].onComplete&&we.push(()=>t[Ee].onComplete(null,!0,t[Ee].currentOutputSnapshotResolved)),t[Ee].unwatcher();SD(n,X0(n.transactionQueueTree_,r)),TD(n,n.transactionQueueTree_),s(n.eventQueue_,r,ie);for(let Ee=0;Ee<we.length;Ee++)td(we[Ee])}else{if("datastale"===W)for(let we=0;we<t.length;we++)t[we].status=3===t[we].status?4:0;else{Ni("transaction at "+U.toString()+" failed: "+W);for(let we=0;we<t.length;we++)t[we].status=4,t[we].abortReason=W}ib(n,r)}},D)}(n,Hm(r),t)}else zw(r)&&Ly(r,t=>{TD(n,t)})}function ib(n,r){const t=iC(n,r),o=Hm(t);return function KC(n,r,t){if(0===r.length)return;const o=[];let d=[];const D=r.filter(P=>0===P.status).map(P=>P.currentWriteId);for(let P=0;P<r.length;P++){const U=r[P],W=bl(t,U.path);let we,ie=!1;if((0,le.hu)(null!==W,"rerunTransactionsUnderNode_: relativePath should not be null."),4===U.status)ie=!0,we=U.abortReason,d=d.concat(vc(n.serverSyncTree_,U.currentWriteId,!0));else if(0===U.status)if(U.retryCount>=g)ie=!0,we="maxretry",d=d.concat(vc(n.serverSyncTree_,U.currentWriteId,!0));else{const Ee=TI(n,U.path,D);U.currentInputSnapshot=Ee;const Ge=r[P].update(Ee.val());if(void 0!==Ge){Vy("transaction failed: Data returned ",Ge,U.path);let Tt=fs(Ge);"object"==typeof Ge&&null!=Ge&&(0,le.r3)(Ge,".priority")||(Tt=Tt.updatePriority(Ee.getPriority()));const Jt=U.currentWriteId,Un=k(n),Bn=bD(Tt,Ee,Un);U.currentOutputSnapshotRaw=Tt,U.currentOutputSnapshotResolved=Bn,U.currentWriteId=He(n),D.splice(D.indexOf(Jt),1),d=d.concat(K0(n.serverSyncTree_,U.path,Bn,U.currentWriteId,U.applyLocally)),d=d.concat(vc(n.serverSyncTree_,Jt,!0))}else ie=!0,we="nodata",d=d.concat(vc(n.serverSyncTree_,U.currentWriteId,!0))}s(n.eventQueue_,t,d),d=[],ie&&(r[P].status=2,setTimeout(r[P].unwatcher,Math.floor(0)),r[P].onComplete&&o.push("nodata"===we?()=>r[P].onComplete(null,!1,r[P].currentInputSnapshot):()=>r[P].onComplete(new Error(we),!1,null)))}SD(n,n.transactionQueueTree_);for(let P=0;P<o.length;P++)td(o[P]);TD(n,n.transactionQueueTree_)}(n,sC(n,t),o),o}function iC(n,r){let t,o=n.transactionQueueTree_;for(t=Ar(r);null!==t&&void 0===eg(o);)o=X0(o,t),t=Ar(r=ss(r));return o}function sC(n,r){const t=[];return oC(n,r,t),t.sort((o,d)=>o.order-d.order),t}function oC(n,r,t){const o=eg(r);if(o)for(let d=0;d<o.length;d++)t.push(o[d]);Ly(r,d=>{oC(n,d,t)})}function SD(n,r){const t=eg(r);if(t){let o=0;for(let d=0;d<t.length;d++)2!==t[d].status&&(t[o]=t[d],o++);t.length=o,$w(r,t.length>0?t:void 0)}Ly(r,o=>{SD(n,o)})}function SI(n,r){const t=Hm(iC(n,r)),o=X0(n.transactionQueueTree_,r);return function wI(n,r,t){let o=t?n:n.parent;for(;null!==o;){if(r(o))return!0;o=o.parent}}(o,d=>{AI(n,d)}),AI(n,o),ED(o,d=>{AI(n,d)}),t}function AI(n,r){const t=eg(r);if(t){const o=[];let d=[],m=-1;for(let D=0;D<t.length;D++)3===t[D].status||(1===t[D].status?((0,le.hu)(m===D-1,"All SENT items should be at beginning of queue."),m=D,t[D].status=3,t[D].abortReason="set"):((0,le.hu)(0===t[D].status,"Unexpected transaction status in abort"),t[D].unwatcher(),d=d.concat(vc(n.serverSyncTree_,t[D].currentWriteId,!0)),t[D].onComplete&&o.push(t[D].onComplete.bind(null,new Error("set"),!1,null))));-1===m?$w(r,void 0):t.length=m+1,s(n.eventQueue_,Hm(r),d);for(let D=0;D<o.length;D++)td(o[D])}}const OI=function(n,r){const t=ZC(n),o=t.namespace;return"firebase.com"===t.domain&&Zl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==t.domain&&Zl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ni("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Of(t.host,t.secure,o,"ws"===t.scheme||"wss"===t.scheme,r,"",o!==t.subdomain),path:new Di(t.pathString)}},ZC=function(n){let r="",t="",o="",d="",m="",D=!0,P="https",U=443;if("string"==typeof n){let W=n.indexOf("//");W>=0&&(P=n.substring(0,W-1),n=n.substring(W+2));let ie=n.indexOf("/");-1===ie&&(ie=n.length);let we=n.indexOf("?");-1===we&&(we=n.length),r=n.substring(0,Math.min(ie,we)),ie<we&&(d=function qC(n){let r="";const t=n.split("/");for(let o=0;o<t.length;o++)if(t[o].length>0){let d=t[o];try{d=decodeURIComponent(d.replace(/\+/g," "))}catch{}r+="/"+d}return r}(n.substring(ie,we)));const Ee=function YC(n){const r={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const o=t.split("=");2===o.length?r[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ni(`Invalid query segment '${t}' in query '${n}'`)}return r}(n.substring(Math.min(n.length,we)));W=r.indexOf(":"),W>=0?(D="https"===P||"wss"===P,U=parseInt(r.substring(W+1),10)):W=r.length;const Ge=r.slice(0,W);if("localhost"===Ge.toLowerCase())t="localhost";else if(Ge.split(".").length<=2)t=Ge;else{const Tt=r.indexOf(".");o=r.substring(0,Tt).toLowerCase(),t=r.substring(Tt+1),m=o}"ns"in Ee&&(m=Ee.ns)}return{host:r,port:U,domain:t,subdomain:o,secure:D,scheme:P,pathString:d,namespace:m}},aC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",QC=function(){let n=0;const r=[];return function(t){const o=t===n;let d;n=t;const m=new Array(8);for(d=7;d>=0;d--)m[d]=aC.charAt(t%64),t=Math.floor(t/64);(0,le.hu)(0===t,"Cannot push at time == 0");let D=m.join("");if(o){for(d=11;d>=0&&63===r[d];d--)r[d]=0;r[d]++}else for(d=0;d<12;d++)r[d]=Math.floor(64*Math.random());for(d=0;d<12;d++)D+=aC.charAt(r[d]);return(0,le.hu)(20===D.length,"nextPushId: Length should be 20."),D}}();class lC{constructor(r,t,o,d){this.eventType=r,this.eventRegistration=t,this.snapshot=o,this.prevName=d}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,le.Wl)(this.snapshot.exportVal())}}class uC{constructor(r,t,o){this.eventRegistration=r,this.error=t,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class NI{constructor(r,t){this.snapshotCallback=r,this.cancelCallback=t}onValue(r,t){this.snapshotCallback.call(null,r,t)}onCancel(r){return(0,le.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class cC{constructor(r,t){this._repo=r,this._path=t}cancel(){const r=new le.BH;return Yn(this._repo,this._path,r.wrapCallback(()=>{})),r.promise}remove(){wc("OnDisconnect.remove",this._path);const r=new le.BH;return xt(this._repo,this._path,null,r.wrapCallback(()=>{})),r.promise}set(r){wc("OnDisconnect.set",this._path),ad("OnDisconnect.set",r,this._path,!1);const t=new le.BH;return xt(this._repo,this._path,r,t.wrapCallback(()=>{})),t.promise}setWithPriority(r,t){wc("OnDisconnect.setWithPriority",this._path),ad("OnDisconnect.setWithPriority",r,this._path,!1),ID("OnDisconnect.setWithPriority",t,!1);const o=new le.BH;return function ur(n,r,t,o,d){const m=fs(t,o);n.server_.onDisconnectPut(r.toString(),m.val(!0),(D,P)=>{"ok"===D&&Pm(n.onDisconnect_,r,m),$m(0,d,D,P)})}(this._repo,this._path,r,t,o.wrapCallback(()=>{})),o.promise}update(r){wc("OnDisconnect.update",this._path),DI("OnDisconnect.update",r,this._path,!1);const t=new le.BH;return function Ss(n,r,t,o){if((0,le.xb)(t))return Ao("onDisconnect().update() called with empty data.  Don't do anything."),void $m(0,o,"ok",void 0);n.server_.onDisconnectMerge(r.toString(),t,(d,m)=>{"ok"===d&&Oo(t,(D,P)=>{const U=fs(P);Pm(n.onDisconnect_,Ts(r,D),U)}),$m(0,o,d,m)})}(this._repo,this._path,r,t.wrapCallback(()=>{})),t.promise}}class Vu{constructor(r,t,o,d){this._repo=r,this._path=t,this._queryParams=o,this._orderByCalled=d}get key(){return Or(this._path)?null:w0(this._path)}get ref(){return new ld(this._repo,this._path)}get _queryIdentifier(){const r=BE(this._queryParams),t=cy(r);return"{}"===t?"default":t}get _queryObject(){return BE(this._queryParams)}isEqual(r){if(!((r=(0,le.m9)(r))instanceof Vu))return!1;const t=this._repo===r._repo,o=E0(this._path,r._path);return t&&o&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function UD(n){let r="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(r+="/"+encodeURIComponent(String(n.pieces_[t])));return r||"/"}(this._path)}}function AD(n,r){if(!0===n._orderByCalled)throw new Error(r+": You can't combine multiple orderBy calls.")}function zm(n){let r=null,t=null;if(n.hasStart()&&(r=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sd){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",d="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xc)throw new Error(o);if("string"!=typeof r)throw new Error(d)}if(n.hasEnd()){if(n.getIndexEndName()!==Lu)throw new Error(o);if("string"!=typeof t)throw new Error(d)}}else if(n.getIndex()===Fi){if(null!=r&&!By(r)||null!=t&&!By(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,le.hu)(n.getIndex()instanceof T0||n.getIndex()===S0,"unknown index type."),null!=r&&"object"==typeof r||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ld extends Vu{constructor(r,t){super(r,t,new uh,!1)}get parent(){const r=BD(this._path);return null===r?null:new ld(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class jy{constructor(r,t,o){this._node=r,this.ref=t,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const t=new Di(r),o=Hy(this.ref,r);return new jy(this._node.getChild(t),o,Fi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,d)=>r(new jy(d,Hy(this.ref,o),Fi)))}hasChild(r){const t=new Di(r);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function dC(n,r){return(n=(0,le.m9)(n))._checkNotDeleted("ref"),void 0!==r?Hy(n._root,r):n._root}function hC(n,r){(n=(0,le.m9)(n))._checkNotDeleted("refFromURL");const t=OI(r,n._repo.repoInfo_.nodeAdmin);II("refFromURL",t);const o=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&o.host!==n._repo.repoInfo_.host&&Zl("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+n._repo.repoInfo_.host+")"),dC(n,t.path.toString())}function Hy(n,r){return null===Ar((n=(0,le.m9)(n))._path)?tC("child","path",r,!1):Gy("child","path",r,!1),new ld(n._repo,Ts(n._path,r))}function MI(n,r){n=(0,le.m9)(n),wc("set",n._path),ad("set",r,n._path,!1);const t=new le.BH;return jt(n._repo,n._path,r,null,t.wrapCallback(()=>{})),t.promise}function nT(n,r){DI("update",r,n._path,!1);const t=new le.BH;return function sn(n,r,t,o){rb(n,"update",{path:r.toString(),value:t});let d=!0;const m=k(n),D={};if(Oo(t,(P,U)=>{d=!1,D[P]=bI(Ts(r,P),fs(U),n.serverSyncTree_,m)}),d)Ao("update() called with empty data.  Don't do anything."),$m(0,o,"ok",void 0);else{const P=He(n),U=function q0(n,r,t,o){!function GI(n,r,t,o){(0,le.hu)(o>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:r,children:t,writeId:o,visible:!0}),n.visibleWrites=Dw(n.visibleWrites,r,t),n.lastWriteId=o}(n.pendingWriteTree_,r,t,o);const d=Hi.fromObject(t);return Py(n,new Ny({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,d))}(n.serverSyncTree_,r,D,P);nb(n.eventQueue_,U),n.server_.merge(r.toString(),t,(W,ie)=>{const we="ok"===W;we||Ni("update at "+r+" failed: "+W);const Ee=vc(n.serverSyncTree_,P,!we),Ge=Ee.length>0?ib(n,r):r;s(n.eventQueue_,Ge,Ee),$m(0,o,W,ie)}),Oo(t,W=>{const ie=SI(n,Ts(r,W));ib(n,ie)}),s(n.eventQueue_,r,[])}}(n._repo,n._path,r,t.wrapCallback(()=>{})),t.promise}function rT(n){n=(0,le.m9)(n);const r=new NI(()=>{}),t=new qw(r);return function Dt(n,r,t){const o=function mI(n,r){const t=r._path;let o=null;n.syncPointTree_.foreachOnPath(t,(W,ie)=>{const we=bl(W,t);o=o||Xp(ie,we)});let d=n.syncPointTree_.get(t);d?o=o||Xp(d,di()):(d=new W0,n.syncPointTree_=n.syncPointTree_.set(t,d));const m=null!=o,D=m?new Rf(o,!0,!1):null;return function oD(n){return L0(n.viewCache_)}(hD(d,r,Iw(n.pendingWriteTree_,r._path),m?D.getNode():pr.EMPTY_NODE,m))}(n.serverSyncTree_,r);return null!=o?Promise.resolve(o):n.server_.get(r).then(d=>{const m=fs(d).withIndex(r._queryParams.getIndex());let D;if(Fw(n.serverSyncTree_,r,t,!0),r._queryParams.loadsAllData())D=Gm(n.serverSyncTree_,r._path,m);else{const P=Z0(n.serverSyncTree_,r);D=gI(n.serverSyncTree_,r._path,m,P)}return s(n.eventQueue_,r._path,D),kw(n.serverSyncTree_,r,t,null,!0),m},d=>(rb(n,"get for query "+(0,le.Wl)(r)+" failed: "+d),Promise.reject(new Error(d))))}(n._repo,n,t).then(o=>new jy(o,new ld(n._repo,n._path),n._queryParams.getIndex()))}class qw{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,t){const o=t._queryParams.getIndex();return new lC("value",this,new jy(r.snapshotNode,new ld(t._repo,t._path),o))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,t){return this.callbackContext.hasCancelCallback?new uC(this,r,t):null}matches(r){return r instanceof qw&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ND{constructor(r,t){this.eventType=r,this.callbackContext=t}respondsTo(r){let t="children_added"===r?"child_added":r;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(r,t){return this.callbackContext.hasCancelCallback?new uC(this,r,t):null}createEvent(r,t){(0,le.hu)(null!=r.childName,"Child events should have a childName.");const o=Hy(new ld(t._repo,t._path),r.childName),d=t._queryParams.getIndex();return new lC(r.type,this,new jy(r.snapshotNode,o,d),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof ND&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Yw(n,r,t,o,d){let m;if("object"==typeof o&&(m=void 0,d=o),"function"==typeof o&&(m=o),d&&d.onlyOnce){const U=t,W=(ie,we)=>{CD(n._repo,n,P),U(ie,we)};W.userCallback=t.userCallback,W.context=t.context,t=W}const D=new NI(t,m||void 0),P="value"===r?new qw(D):new ND(r,D);return function ao(n,r,t){let o;o=".info"===Ar(r._path)?Fw(n.infoSyncTree_,r,t):Fw(n.serverSyncTree_,r,t),CI(n.eventQueue_,r._path,o)}(n._repo,n,P),()=>CD(n._repo,n,P)}function RI(n,r,t,o){return Yw(n,"value",r,t,o)}function fC(n,r,t,o){return Yw(n,"child_added",r,t,o)}function pC(n,r,t,o){return Yw(n,"child_changed",r,t,o)}function gC(n,r,t,o){return Yw(n,"child_moved",r,t,o)}function mC(n,r,t,o){return Yw(n,"child_removed",r,t,o)}function _C(n,r,t){let o=null;const d=t?new NI(t):null;"value"===r?o=new qw(d):r&&(o=new ND(r,d)),CD(n._repo,n,o)}class fh{}class yC extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){ad("endAt",this._value,r._path,!0);const t=Ty(r._queryParams,this._value,this._key);if(OD(t),zm(t),r._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vu(r._repo,r._path,t,r._orderByCalled)}}class sT extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){ad("endBefore",this._value,r._path,!1);const t=function Sy(n,r,t){let o;return o=Ty(n,r,n.index_===sd||t?t:Xc),o.endBeforeSet_=!0,o}(r._queryParams,this._value,this._key);if(OD(t),zm(t),r._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vu(r._repo,r._path,t,r._orderByCalled)}}class vC extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){ad("startAt",this._value,r._path,!0);const t=LE(r._queryParams,this._value,this._key);if(OD(t),zm(t),r._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vu(r._repo,r._path,t,r._orderByCalled)}}class lT extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){ad("startAfter",this._value,r._path,!1);const t=function UE(n,r,t){let o;return o=LE(n,r,n.index_===sd||t?t:Lu),o.startAfterSet_=!0,o}(r._queryParams,this._value,this._key);if(OD(t),zm(t),r._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vu(r._repo,r._path,t,r._orderByCalled)}}class cT extends fh{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vu(r._repo,r._path,function qD(n,r){const t=n.copy();return t.limitSet_=!0,t.limit_=r,t.viewFrom_="l",t}(r._queryParams,this._limit),r._orderByCalled)}}class hT extends fh{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vu(r._repo,r._path,function UI(n,r){const t=n.copy();return t.limitSet_=!0,t.limit_=r,t.viewFrom_="r",t}(r._queryParams,this._limit),r._orderByCalled)}}class pT extends fh{constructor(r){super(),this._path=r}_apply(r){AD(r,"orderByChild");const t=new Di(this._path);if(Or(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new T0(t),d=O0(r._queryParams,o);return zm(d),new Vu(r._repo,r._path,d,!0)}}class mT extends fh{_apply(r){AD(r,"orderByKey");const t=O0(r._queryParams,sd);return zm(t),new Vu(r._repo,r._path,t,!0)}}class yT extends fh{_apply(r){AD(r,"orderByPriority");const t=O0(r._queryParams,Fi);return zm(t),new Vu(r._repo,r._path,t,!0)}}class bT extends fh{_apply(r){AD(r,"orderByValue");const t=O0(r._queryParams,S0);return zm(t),new Vu(r._repo,r._path,t,!0)}}class ET extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){if(ad("equalTo",this._value,r._path,!1),r._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(r._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yC(this._value,this._key)._apply(new vC(this._value,this._key)._apply(r))}}function ph(n,...r){let t=(0,le.m9)(n);for(const o of r)t=o._apply(t);return t}(function dD(n){(0,le.hu)(!xy,"__referenceConstructor has already been defined"),xy=n})(ld),function pD(n){(0,le.hu)(!Vm,"__referenceConstructor has already been defined"),Vm=n}(ld);const IT="FIREBASE_DATABASE_EMULATOR_HOST",xI={};let bC=!1;function wC(n,r,t,o,d){let m=o||n.options.databaseURL;void 0===m&&(n.options.projectId||Zl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ao("Using default host for project ",n.options.projectId),m=`${n.options.projectId}-default-rtdb.firebaseio.com`);let U,W,D=OI(m,d),P=D.repoInfo;typeof process<"u"&&process.env&&(W=process.env[IT]),W?(U=!0,m=`http://${W}?ns=${P.namespace}`,D=OI(m,d),P=D.repoInfo):U=!D.repoInfo.secure;const ie=d&&U?new Ql(Ql.OWNER):new g0(n.name,n.options,r);II("Invalid Firebase Database URL",D),Or(D.path)||Zl("Database URL must point to the root of a Firebase Database (not including a child path).");const we=function ST(n,r,t,o){let d=xI[r.name];d||(d={},xI[r.name]=d);let m=d[n.toURLString()];return m&&Zl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),m=new y(n,bC,t,o),d[n.toURLString()]=m,m}(P,n,ie,new p0(n.name,t));return new OT(we,n)}class OT{constructor(r,t){this._repoInternal=r,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function I(n,r,t){if(n.stats_=py(n.repoInfo_),n.forceRestClient_||nd())n.server_=new Ay(n.repoInfo_,(o,d,m,D)=>{H(n,o,d,m,D)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>X(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,le.Wl)(t)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}n.persistentConnection_=new Zp(n.repoInfo_,r,(o,d,m,D)=>{H(n,o,d,m,D)},o=>{X(n,o)},o=>{!function ue(n,r){Oo(r,(t,o)=>{Me(n,t,o)})}(n,o)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(o=>{n.server_.refreshAuthToken(o)}),n.appCheckProvider_.addTokenChangeListener(o=>{n.server_.refreshAppCheckToken(o.token)}),n.statsReporter_=function cw(n,r){const t=n.toString();return Jl[t]||(Jl[t]=r()),Jl[t]}(n.repoInfo_,()=>new ZD(n.stats_,n.server_)),n.infoData_=new YD,n.infoSyncTree_=new Pw({startListening:(o,d,m,D)=>{let P=[];const U=n.infoData_.getNode(o._path);return U.isEmpty()||(P=Gm(n.infoSyncTree_,o._path,U),setTimeout(()=>{D("ok")},0)),P},stopListening:()=>{}}),Me(n,"connected",!1),n.serverSyncTree_=new Pw({startListening:(o,d,m,D)=>(n.server_.listen(o,m,d,(P,U)=>{const W=D(P,U);s(n.eventQueue_,o._path,W)}),[]),stopListening:(o,d)=>{n.server_.unlisten(o,d)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ld(this._repo,di())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function TT(n,r){const t=xI[r];(!t||t[n.key]!==n)&&Zl(`Database ${r}(${n.repoInfo_}) has already been deleted.`),rC(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&Zl("Cannot call "+r+" on a deleted database.")}}function EC(){p.IS_TRANSPORT_INITIALIZED&&Ni("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function NT(){EC(),gc.forceDisallow()}function MT(){EC(),u.forceDisallow(),gc.forceAllow()}function PT(n,r){ih(n,r)}const FT={".sv":"timestamp"};class BT{constructor(r,t){this.committed=r,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zp.prototype.simpleListen=function(n,r){this.sendRequest("q",{p:n},r)},Zp.prototype.echo=function(n,r){this.sendRequest("echo",{d:n},r)},function kT(n){a0(Cu.SDK_VERSION),(0,Cu._registerComponent)(new dc.wA("database",(r,{instanceIdentifier:t})=>wC(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Cu.registerVersion)(o0,"0.14.4",n),(0,Cu.registerVersion)(o0,"0.14.4","esm2017")}();const HT=new is.Yd("@firebase/database-compat"),IC=function(n){HT.warn("FIREBASE WARNING: "+n)};class WT{constructor(r){this._delegate=r}cancel(r){(0,le.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,le.Wj)("OnDisconnect.cancel","onComplete",r,!0);const t=this._delegate.cancel();return r&&t.then(()=>r(null),o=>r(o)),t}remove(r){(0,le.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,le.Wj)("OnDisconnect.remove","onComplete",r,!0);const t=this._delegate.remove();return r&&t.then(()=>r(null),o=>r(o)),t}set(r,t){(0,le.Dv)("OnDisconnect.set",1,2,arguments.length),(0,le.Wj)("OnDisconnect.set","onComplete",t,!0);const o=this._delegate.set(r);return t&&o.then(()=>t(null),d=>t(d)),o}setWithPriority(r,t,o){(0,le.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,le.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const d=this._delegate.setWithPriority(r,t);return o&&d.then(()=>o(null),m=>o(m)),d}update(r,t){if((0,le.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(r)){const d={};for(let m=0;m<r.length;++m)d[""+m]=r[m];r=d,IC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,le.Wj)("OnDisconnect.update","onComplete",t,!0);const o=this._delegate.update(r);return t&&o.then(()=>t(null),d=>t(d)),o}}class KT{constructor(r,t){this.committed=r,this.snapshot=t}toJSON(){return(0,le.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Wm{constructor(r,t){this._database=r,this._delegate=t}val(){return(0,le.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,le.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,le.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,le.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(r){return(0,le.Dv)("DataSnapshot.child",0,1,arguments.length),r=String(r),Gy("DataSnapshot.child","path",r,!1),new Wm(this._database,this._delegate.child(r))}hasChild(r){return(0,le.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Gy("DataSnapshot.hasChild","path",r,!1),this._delegate.hasChild(r)}getPriority(){return(0,le.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(r){return(0,le.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,le.Wj)("DataSnapshot.forEach","action",r,!1),this._delegate.forEach(t=>r(new Wm(this._database,t)))}hasChildren(){return(0,le.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,le.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,le.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ec(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Dl{constructor(r,t){this.database=r,this._delegate=t}on(r,t,o,d){var m;(0,le.Dv)("Query.on",2,4,arguments.length),(0,le.Wj)("Query.on","callback",t,!1);const D=Dl.getCancelAndContextArgs_("Query.on",o,d),P=(W,ie)=>{t.call(D.context,new Wm(this.database,W),ie)};P.userCallback=t,P.context=D.context;const U=null===(m=D.cancel)||void 0===m?void 0:m.bind(D.context);switch(r){case"value":return RI(this._delegate,P,U),t;case"child_added":return fC(this._delegate,P,U),t;case"child_removed":return mC(this._delegate,P,U),t;case"child_changed":return pC(this._delegate,P,U),t;case"child_moved":return gC(this._delegate,P,U),t;default:throw new Error((0,le.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(r,t,o){if((0,le.Dv)("Query.off",0,3,arguments.length),function(n,r,t){if(void 0!==r)switch(r){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,le.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,r),(0,le.Wj)("Query.off","callback",t,!0),(0,le.lb)("Query.off","context",o,!0),t){const d=()=>{};d.userCallback=t,d.context=o,_C(this._delegate,r,d)}else _C(this._delegate,r)}get(){return rT(this._delegate).then(r=>new Wm(this.database,r))}once(r,t,o,d){(0,le.Dv)("Query.once",1,4,arguments.length),(0,le.Wj)("Query.once","callback",t,!0);const m=Dl.getCancelAndContextArgs_("Query.once",o,d),D=new le.BH,P=(W,ie)=>{const we=new Wm(this.database,W);t&&t.call(m.context,we,ie),D.resolve(we)};P.userCallback=t,P.context=m.context;const U=W=>{m.cancel&&m.cancel.call(m.context,W),D.reject(W)};switch(r){case"value":RI(this._delegate,P,U,{onlyOnce:!0});break;case"child_added":fC(this._delegate,P,U,{onlyOnce:!0});break;case"child_removed":mC(this._delegate,P,U,{onlyOnce:!0});break;case"child_changed":pC(this._delegate,P,U,{onlyOnce:!0});break;case"child_moved":gC(this._delegate,P,U,{onlyOnce:!0});break;default:throw new Error((0,le.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return D.promise}limitToFirst(r){return(0,le.Dv)("Query.limitToFirst",1,1,arguments.length),new Dl(this.database,ph(this._delegate,function dT(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cT(n)}(r)))}limitToLast(r){return(0,le.Dv)("Query.limitToLast",1,1,arguments.length),new Dl(this.database,ph(this._delegate,function fT(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new hT(n)}(r)))}orderByChild(r){return(0,le.Dv)("Query.orderByChild",1,1,arguments.length),new Dl(this.database,ph(this._delegate,function gT(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gy("orderByChild","path",n,!1),new pT(n)}(r)))}orderByKey(){return(0,le.Dv)("Query.orderByKey",0,0,arguments.length),new Dl(this.database,ph(this._delegate,function _T(){return new mT}()))}orderByPriority(){return(0,le.Dv)("Query.orderByPriority",0,0,arguments.length),new Dl(this.database,ph(this._delegate,function vT(){return new yT}()))}orderByValue(){return(0,le.Dv)("Query.orderByValue",0,0,arguments.length),new Dl(this.database,ph(this._delegate,function wT(){return new bT}()))}startAt(r=null,t){return(0,le.Dv)("Query.startAt",0,2,arguments.length),new Dl(this.database,ph(this._delegate,function aT(n=null,r){return tb("startAt","key",r,!0),new vC(n,r)}(r,t)))}startAfter(r=null,t){return(0,le.Dv)("Query.startAfter",0,2,arguments.length),new Dl(this.database,ph(this._delegate,function uT(n,r){return tb("startAfter","key",r,!0),new lT(n,r)}(r,t)))}endAt(r=null,t){return(0,le.Dv)("Query.endAt",0,2,arguments.length),new Dl(this.database,ph(this._delegate,function iT(n,r){return tb("endAt","key",r,!0),new yC(n,r)}(r,t)))}endBefore(r=null,t){return(0,le.Dv)("Query.endBefore",0,2,arguments.length),new Dl(this.database,ph(this._delegate,function oT(n,r){return tb("endBefore","key",r,!0),new sT(n,r)}(r,t)))}equalTo(r,t){return(0,le.Dv)("Query.equalTo",1,2,arguments.length),new Dl(this.database,ph(this._delegate,function DT(n,r){return tb("equalTo","key",r,!0),new ET(n,r)}(r,t)))}toString(){return(0,le.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,le.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(r){if((0,le.Dv)("Query.isEqual",1,1,arguments.length),!(r instanceof Dl))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(r._delegate)}static getCancelAndContextArgs_(r,t,o){const d={cancel:void 0,context:void 0};if(t&&o)d.cancel=t,(0,le.Wj)(r,"cancel",d.cancel,!0),d.context=o,(0,le.lb)(r,"context",d.context,!0);else if(t)if("object"==typeof t&&null!==t)d.context=t;else{if("function"!=typeof t)throw new Error((0,le.gK)(r,"cancelOrContext")+" must either be a cancel callback or a context object.");d.cancel=t}return d}get ref(){return new Ec(this.database,new ld(this._delegate._repo,this._delegate._path))}}class Ec extends Dl{constructor(r,t){super(r,new Vu(t._repo,t._path,new uh,!1)),this.database=r,this._delegate=t}getKey(){return(0,le.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(r){return(0,le.Dv)("Reference.child",1,1,arguments.length),"number"==typeof r&&(r=String(r)),new Ec(this.database,Hy(this._delegate,r))}getParent(){(0,le.Dv)("Reference.parent",0,0,arguments.length);const r=this._delegate.parent;return r?new Ec(this.database,r):null}getRoot(){return(0,le.Dv)("Reference.root",0,0,arguments.length),new Ec(this.database,this._delegate.root)}set(r,t){(0,le.Dv)("Reference.set",1,2,arguments.length),(0,le.Wj)("Reference.set","onComplete",t,!0);const o=MI(this._delegate,r);return t&&o.then(()=>t(null),d=>t(d)),o}update(r,t){if((0,le.Dv)("Reference.update",1,2,arguments.length),Array.isArray(r)){const d={};for(let m=0;m<r.length;++m)d[""+m]=r[m];r=d,IC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wc("Reference.update",this._delegate._path),(0,le.Wj)("Reference.update","onComplete",t,!0);const o=nT(this._delegate,r);return t&&o.then(()=>t(null),d=>t(d)),o}setWithPriority(r,t,o){(0,le.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,le.Wj)("Reference.setWithPriority","onComplete",o,!0);const d=function tT(n,r,t){if(wc("setWithPriority",n._path),ad("setWithPriority",r,n._path,!1),ID("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const o=new le.BH;return jt(n._repo,n._path,r,t,o.wrapCallback(()=>{})),o.promise}(this._delegate,r,t);return o&&d.then(()=>o(null),m=>o(m)),d}remove(r){(0,le.Dv)("Reference.remove",0,1,arguments.length),(0,le.Wj)("Reference.remove","onComplete",r,!0);const t=function XC(n){return wc("remove",n._path),MI(n,null)}(this._delegate);return r&&t.then(()=>r(null),o=>r(o)),t}transaction(r,t,o){(0,le.Dv)("Reference.transaction",1,3,arguments.length),(0,le.Wj)("Reference.transaction","transactionUpdate",r,!1),(0,le.Wj)("Reference.transaction","onComplete",t,!0),function(n,r,t,o){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,le.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const d=function VT(n,r,t){var o;if(n=(0,le.m9)(n),wc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const d=null===(o=t?.applyLocally)||void 0===o||o,m=new le.BH,P=RI(n,()=>{});return function zC(n,r,t,o,d,m){rb(n,"transaction on "+r);const D={path:r,update:t,onComplete:o,status:null,order:c0(),applyLocally:m,retryCount:0,unwatcher:d,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},P=TI(n,r,void 0);D.currentInputSnapshot=P;const U=D.update(P.val());if(void 0===U)D.unwatcher(),D.currentOutputSnapshotRaw=null,D.currentOutputSnapshotResolved=null,D.onComplete&&D.onComplete(null,!1,D.currentInputSnapshot);else{Vy("transaction failed: Data returned ",U,D.path),D.status=0;const W=X0(n.transactionQueueTree_,r),ie=eg(W)||[];let we;ie.push(D),$w(W,ie),"object"==typeof U&&null!==U&&(0,le.r3)(U,".priority")?(we=(0,le.DV)(U,".priority"),(0,le.hu)(By(we),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):we=(Y0(n.serverSyncTree_,r)||pr.EMPTY_NODE).getPriority().val();const Ee=k(n),Ge=fs(U,we),Tt=bD(Ge,P,Ee);D.currentOutputSnapshotRaw=Ge,D.currentOutputSnapshotResolved=Tt,D.currentWriteId=He(n);const Vt=K0(n.serverSyncTree_,r,Tt,D.currentWriteId,D.applyLocally);s(n.eventQueue_,r,Vt),TD(n,n.transactionQueueTree_)}}(n._repo,n._path,r,(U,W,ie)=>{let we=null;U?m.reject(U):(we=new jy(ie,new ld(n._repo,n._path),Fi),m.resolve(new BT(W,we)))},P,d),m.promise}(this._delegate,r,{applyLocally:o}).then(m=>new KT(m.committed,new Wm(this.database,m.snapshot)));return t&&d.then(m=>t(null,m.committed,m.snapshot),m=>t(m,!1,null)),d}setPriority(r,t){(0,le.Dv)("Reference.setPriority",1,2,arguments.length),(0,le.Wj)("Reference.setPriority","onComplete",t,!0);const o=function eT(n,r){n=(0,le.m9)(n),wc("setPriority",n._path),ID("setPriority",r,!1);const t=new le.BH;return jt(n._repo,Ts(n._path,".priority"),r,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,r);return t&&o.then(()=>t(null),d=>t(d)),o}push(r,t){(0,le.Dv)("Reference.push",0,2,arguments.length),(0,le.Wj)("Reference.push","onComplete",t,!0);const o=function JC(n,r){n=(0,le.m9)(n),wc("push",n._path),ad("push",r,n._path,!0);const t=N(n._repo),o=QC(t),d=Hy(n,o),m=Hy(n,o);let D;return D=null!=r?MI(m,r).then(()=>m):Promise.resolve(m),d.then=D.then.bind(D),d.catch=D.then.bind(D,void 0),d}(this._delegate,r),d=o.then(D=>new Ec(this.database,D));t&&d.then(()=>t(null),D=>t(D));const m=new Ec(this.database,o);return m.then=d.then.bind(d),m.catch=d.catch.bind(d,void 0),m}onDisconnect(){return wc("Reference.onDisconnect",this._delegate._path),new WT(new cC(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Zw{constructor(r,t){this._delegate=r,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:NT,forceLongPolling:MT}}useEmulator(r,t,o={}){!function DC(n,r,t,o={}){(n=(0,le.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Zl("Cannot call useEmulator() after instance has already been initialized.");const d=n._repoInternal;let m;if(d.repoInfo_.nodeAdmin)o.mockUserToken&&Zl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),m=new Ql(Ql.OWNER);else if(o.mockUserToken){const D="string"==typeof o.mockUserToken?o.mockUserToken:(0,le.Sg)(o.mockUserToken,n.app.options.projectId);m=new Ql(D)}!function CT(n,r,t,o){n.repoInfo_=new Of(`${r}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),o&&(n.authTokenProvider_=o)}(d,r,t,m)}(this._delegate,r,t,o)}ref(r){if((0,le.Dv)("database.ref",0,1,arguments.length),r instanceof Ec){const t=hC(this._delegate,r.toString());return new Ec(this,t)}{const t=dC(this._delegate,r);return new Ec(this,t)}}refFromURL(r){(0,le.Dv)("database.refFromURL",1,1,arguments.length);const o=hC(this._delegate,r);return new Ec(this,o)}goOffline(){return(0,le.Dv)("database.goOffline",0,0,arguments.length),function RT(n){(n=(0,le.m9)(n))._checkNotDeleted("goOffline"),rC(n._repo)}(this._delegate)}goOnline(){return(0,le.Dv)("database.goOnline",0,0,arguments.length),function xT(n){(n=(0,le.m9)(n))._checkNotDeleted("goOnline"),function $C(n){n.persistentConnection_&&n.persistentConnection_.resume(f)}(n._repo)}(this._delegate)}}Zw.ServerValue={TIMESTAMP:function LT(){return FT}(),increment:n=>function UT(n){return{".sv":{increment:n}}}(n)};var YT=Object.freeze({__proto__:null,initStandalone:function qT({app:n,url:r,version:t,customAuthImpl:o,namespace:d,nodeAdmin:m=!1}){a0(t);const D=new dc.zt("auth-internal",new dc.H0("database-standalone"));return D.setComponent(new dc.wA("auth-internal",()=>o,"PRIVATE")),{instance:new Zw(wC(n,D,void 0,r,m),n),namespace:d}}});const ZT=Zw.ServerValue;function CC(n){return null==n}function TC(n){return"function"==typeof n.set}function SC(n,r){return TC(r)?r:n.ref(r)}function AC(n,r){if(function JT(n){return"string"==typeof n}(n))return r.stringCase();if(TC(n))return r.firebaseCase();if(function XT(n){return"function"==typeof n.exportVal}(n))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Qw(n,r,t="on",o=Kt.z){return new Ye.y(d=>{let m=null;return m=n[t](r,(D,P)=>{o.schedule(()=>{d.next({snapshot:D,prevKey:P})}),"once"===t&&o.schedule(()=>d.complete())},D=>{o.schedule(()=>d.error(D))}),"on"===t?{unsubscribe(){null!=m&&n.off(r,m)}}:{unsubscribe(){}}}).pipe((0,tr.U)(d=>{const{snapshot:m,prevKey:D}=d;let P=null;return m.exists()&&(P=m.key),{type:r,payload:m,prevKey:D,key:P}}),(0,Pl.B)())}function OC(n,r){const t=n.length;for(let o=0;o<t;o++)if(n[o].payload.key===r)return o;return-1}function nS(n,r){const{payload:t,prevKey:o,key:d}=r,m=OC(n,d),D=function tS(n,r){if(CC(r))return 0;{const t=OC(n,r);return-1===t?n.length:t+1}}(n,o);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let P=null;r.payload.forEach(U=>{const W={payload:U,type:"value",prevKey:P,key:U.key};return P=U.key,n=[...n,W],!1})}return n;case"child_added":if(m>-1){const P=n[m-1];(P&&P.key||null)!==o&&(n=n.filter(U=>U.payload.key!==t.key)).splice(D,0,r)}else{if(null==o)return[r,...n];(n=n.slice()).splice(D,0,r)}return n;case"child_removed":return n.filter(P=>P.payload.key!==t.key);case"child_changed":return n.map(P=>P.payload.key===d?r:P);case"child_moved":if(m>-1){const P=n.splice(m,1)[0];return(n=n.slice()).splice(D,0,P),n}return n;default:return n}}function NC(n){return(CC(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function MC(n,r,t){return function eS(n,r,t){return Qw(n,"value","once",t).pipe((0,Ut.w)(o=>{const d=[(0,mt.of)(o)];return r.forEach(m=>d.push(Qw(n,m,"on",t))),(0,Vn.T)(...d).pipe((0,ku.R)(nS,[]))}),(0,Sn.x)())}(n,r=NC(r),t)}function RC(n,r,t){const o=(r=NC(r)).map(d=>Qw(n,d,"on",t));return(0,Vn.T)(...o)}function xC(n,r){return function(o,d){return AC(o,{stringCase:()=>n.child(o)[r](d),firebaseCase:()=>o[r](d),snapshotCase:()=>o.ref[r](d)})}}function oS(n){return function(t){return t?AC(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function PC(n,r){return function(){return Qw(n,"value","on",r)}}!function QT(n){n.INTERNAL.registerComponent(new dc.wA("database-compat",(r,{instanceIdentifier:t})=>{const o=r.getProvider("app-compat").getImmediate(),d=r.getProvider("database").getImmediate({identifier:t});return new Zw(d,o)},"PUBLIC").setServiceProps({Reference:Ec,Query:Dl,Database:Zw,DataSnapshot:Wm,enableLogging:PT,INTERNAL:YT,ServerValue:ZT}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Gg.Z);const uS=new h.OlP("angularfire2.realtimeDatabaseURL"),cS=new h.OlP("angularfire2.database.use-emulator");let dS=(()=>{class n{constructor(t,o,d,m,D,P,U,W,ie,we,Ee,Ge,Tt,Vt,Jt){this.schedulers=P;const Un=U,Bn=(0,lc.on)(t,D,o);W&&(0,uc.nw)(Bn,D,ie,Ee,Ge,Tt,we,Vt),this.database=(0,lc.cc)(`${Bn.name}.database.${d}`,"AngularFireDatabase",Bn.name,()=>{const sr=D.runOutsideAngular(()=>Bn.database(d||void 0));return Un&&sr.useEmulator(...Un),sr},[Un])}list(t,o){const d=this.schedulers.ngZone.runOutsideAngular(()=>SC(this.database,t));let m=d;return o&&(m=o(d)),function aS(n,r){const t=r.schedulers.outsideAngular,o=r.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xC(o,"update"),set:xC(o,"set"),push:d=>o.push(d),remove:oS(o),snapshotChanges:d=>MC(n,d,t).pipe(sa.iC),stateChanges:d=>RC(n,d,t).pipe(sa.iC),auditTrail:d=>function rS(n,r,t){return function sS(n,r,t){return function iS(n,r){return Qw(n,"value","on",r).pipe((0,tr.U)(t=>{let o;return t.payload.forEach(d=>(o=d.key,!1)),{data:t,lastKeyToLoad:o}}))}(n,t).pipe(kr(r),(0,tr.U)(([d,m])=>{const D=d.lastKeyToLoad,P=m.map(U=>U.key);return{actions:m,lastKeyToLoad:D,loadedKeys:P}}),function Qc(n){return(0,Zn.e)((r,t)=>{let o=!1,d=0;r.subscribe((0,ct.x)(t,m=>(o||(o=!n(m,d++)))&&t.next(m)))})}(d=>-1===d.loadedKeys.indexOf(d.lastKeyToLoad)),(0,tr.U)(d=>d.actions))}(n,RC(n,r).pipe((0,ku.R)((d,m)=>[...d,m],[])),t)}(n,d,t).pipe(sa.iC),valueChanges:(d,m)=>MC(n,d,t).pipe((0,tr.U)(P=>P.map(U=>m&&m.idField?Object.assign(Object.assign({},U.payload.val()),{[m.idField]:U.key}):U.payload.val())),sa.iC)}}(m,this)}object(t){return function lS(n,r){return{query:n,snapshotChanges:()=>PC(n,r.schedulers.outsideAngular)().pipe(sa.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>PC(n,r.schedulers.outsideAngular)().pipe(sa.iC,(0,tr.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>SC(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lc.Dh),h.LFG(lc.xv,8),h.LFG(uS,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(sa.HU),h.LFG(cS,8),h.LFG(uc.zQ,8),h.LFG(uc.Qv,8),h.LFG(uc.L6,8),h.LFG(uc._Q,8),h.LFG(uc.rT,8),h.LFG(uc.lh,8),h.LFG(uc.f7,8),h.LFG(pc.nm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hS=(()=>{class n{constructor(){ay.Z.registerVersion("angularfire",sa.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[dS]}),n})();const fS_firebase={apiKey:"AIzaSyBZwKztkqkhS6b7UHmRBdOyeg1myLJEcR8",authDomain:"psicoleigos-eeee1.firebaseapp.com",projectId:"psicoleigos-eeee1",storageBucket:"psicoleigos-eeee1.appspot.com",messagingSenderId:"711814031287",appId:"1:711814031287:web:742f26ac4bafc1e2b7ea32",measurementId:"G-PL2WDP34XM"};let pS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[Te]}),n.\u0275inj=h.cJS({providers:[ye.e],imports:[T.b2,Re,kv,lc.hO.initializeApp(fS_firebase),uc.ww,bE.yb,vE,hS]}),n})();T.q6().bootstrapModule(pS).catch(n=>console.error(n))},1135:(Wt,ze,j)=>{j.d(ze,{X:()=>Y});var T=j(7579);class Y extends T.x{constructor(ye){super(),this._value=ye}get value(){return this.getValue()}_subscribe(ye){const Ae=super._subscribe(ye);return!Ae.closed&&ye.next(this._value),Ae}getValue(){const{hasError:ye,thrownError:Ae,_value:Ce}=this;if(ye)throw Ae;return this._throwIfClosed(),Ce}next(ye){super.next(this._value=ye)}}},9751:(Wt,ze,j)=>{j.d(ze,{y:()=>Re});var T=j(930),Y=j(727),h=j(8822),ye=j(9635),Ae=j(2416),Ce=j(576),Fe=j(2806);let Re=(()=>{class Te{constructor(Je){Je&&(this._subscribe=Je)}lift(Je){const mt=new Te;return mt.source=this,mt.operator=Je,mt}subscribe(Je,mt,It){const Ze=function de(Te){return Te&&Te instanceof T.Lv||function pe(Te){return Te&&(0,Ce.m)(Te.next)&&(0,Ce.m)(Te.error)&&(0,Ce.m)(Te.complete)}(Te)&&(0,Y.Nn)(Te)}(Je)?Je:new T.Hp(Je,mt,It);return(0,Fe.x)(()=>{const{operator:at,source:ge}=this;Ze.add(at?at.call(Ze,ge):ge?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Je){try{return this._subscribe(Je)}catch(mt){Je.error(mt)}}forEach(Je,mt){return new(mt=De(mt))((It,Ze)=>{const at=new T.Hp({next:ge=>{try{Je(ge)}catch(ut){Ze(ut),at.unsubscribe()}},error:Ze,complete:It});this.subscribe(at)})}_subscribe(Je){var mt;return null===(mt=this.source)||void 0===mt?void 0:mt.subscribe(Je)}[h.L](){return this}pipe(...Je){return(0,ye.U)(Je)(this)}toPromise(Je){return new(Je=De(Je))((mt,It)=>{let Ze;this.subscribe(at=>Ze=at,at=>It(at),()=>mt(Ze))})}}return Te.create=Ye=>new Te(Ye),Te})();function De(Te){var Ye;return null!==(Ye=Te??Ae.v.Promise)&&void 0!==Ye?Ye:Promise}},7579:(Wt,ze,j)=>{j.d(ze,{x:()=>Fe});var T=j(9751),Y=j(727);const ye=(0,j(3888).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=j(8737),Ce=j(2806);let Fe=(()=>{class De extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(de){const Te=new Re(this,this);return Te.operator=de,Te}_throwIfClosed(){if(this.closed)throw new ye}next(de){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(de)}})}error(de){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=de;const{observers:Te}=this;for(;Te.length;)Te.shift().error(de)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:de}=this;for(;de.length;)de.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var de;return(null===(de=this.observers)||void 0===de?void 0:de.length)>0}_trySubscribe(de){return this._throwIfClosed(),super._trySubscribe(de)}_subscribe(de){return this._throwIfClosed(),this._checkFinalizedStatuses(de),this._innerSubscribe(de)}_innerSubscribe(de){const{hasError:Te,isStopped:Ye,observers:Je}=this;return Te||Ye?Y.Lc:(this.currentObservers=null,Je.push(de),new Y.w0(()=>{this.currentObservers=null,(0,Ae.P)(Je,de)}))}_checkFinalizedStatuses(de){const{hasError:Te,thrownError:Ye,isStopped:Je}=this;Te?de.error(Ye):Je&&de.complete()}asObservable(){const de=new T.y;return de.source=this,de}}return De.create=(pe,de)=>new Re(pe,de),De})();class Re extends Fe{constructor(pe,de){super(),this.destination=pe,this.source=de}next(pe){var de,Te;null===(Te=null===(de=this.destination)||void 0===de?void 0:de.next)||void 0===Te||Te.call(de,pe)}error(pe){var de,Te;null===(Te=null===(de=this.destination)||void 0===de?void 0:de.error)||void 0===Te||Te.call(de,pe)}complete(){var pe,de;null===(de=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===de||de.call(pe)}_subscribe(pe){var de,Te;return null!==(Te=null===(de=this.source)||void 0===de?void 0:de.subscribe(pe))&&void 0!==Te?Te:Y.Lc}}},930:(Wt,ze,j)=>{j.d(ze,{Hp:()=>It,Lv:()=>Te});var T=j(576),Y=j(727),h=j(2416),ye=j(7849),Ae=j(5032);const Ce=De("C",void 0,void 0);function De(ot,Xe,qe){return{kind:ot,value:Xe,error:qe}}var pe=j(3410),de=j(2806);class Te extends Y.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,Y.Nn)(Xe)&&Xe.add(this)):this.destination=ut}static create(Xe,qe,Mt){return new It(Xe,qe,Mt)}next(Xe){this.isStopped?ge(function Re(ot){return De("N",ot,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?ge(function Fe(ot){return De("E",void 0,ot)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?ge(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Je(ot,Xe){return Ye.call(ot,Xe)}class mt{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:qe}=this;if(qe.next)try{qe.next(Xe)}catch(Mt){Ze(Mt)}}error(Xe){const{partialObserver:qe}=this;if(qe.error)try{qe.error(Xe)}catch(Mt){Ze(Mt)}else Ze(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(qe){Ze(qe)}}}class It extends Te{constructor(Xe,qe,Mt){let Se;if(super(),(0,T.m)(Xe)||!Xe)Se={next:Xe??void 0,error:qe??void 0,complete:Mt??void 0};else{let Ie;this&&h.v.useDeprecatedNextContext?(Ie=Object.create(Xe),Ie.unsubscribe=()=>this.unsubscribe(),Se={next:Xe.next&&Je(Xe.next,Ie),error:Xe.error&&Je(Xe.error,Ie),complete:Xe.complete&&Je(Xe.complete,Ie)}):Se=Xe}this.destination=new mt(Se)}}function Ze(ot){h.v.useDeprecatedSynchronousErrorHandling?(0,de.O)(ot):(0,ye.h)(ot)}function ge(ot,Xe){const{onStoppedNotification:qe}=h.v;qe&&pe.z.setTimeout(()=>qe(ot,Xe))}const ut={closed:!0,next:Ae.Z,error:function at(ot){throw ot},complete:Ae.Z}},727:(Wt,ze,j)=>{j.d(ze,{Lc:()=>Ce,w0:()=>Ae,Nn:()=>Fe});var T=j(576);const h=(0,j(3888).d)(De=>function(de){De(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((Te,Ye)=>`${Ye+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de});var ye=j(8737);class Ae{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:de}=this;if(de)if(this._parentage=null,Array.isArray(de))for(const Je of de)Je.remove(this);else de.remove(this);const{initialTeardown:Te}=this;if((0,T.m)(Te))try{Te()}catch(Je){pe=Je instanceof h?Je.errors:[Je]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Je of Ye)try{Re(Je)}catch(mt){pe=pe??[],mt instanceof h?pe=[...pe,...mt.errors]:pe.push(mt)}}if(pe)throw new h(pe)}}add(pe){var de;if(pe&&pe!==this)if(this.closed)Re(pe);else{if(pe instanceof Ae){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(de=this._finalizers)&&void 0!==de?de:[]).push(pe)}}_hasParent(pe){const{_parentage:de}=this;return de===pe||Array.isArray(de)&&de.includes(pe)}_addParent(pe){const{_parentage:de}=this;this._parentage=Array.isArray(de)?(de.push(pe),de):de?[de,pe]:pe}_removeParent(pe){const{_parentage:de}=this;de===pe?this._parentage=null:Array.isArray(de)&&(0,ye.P)(de,pe)}remove(pe){const{_finalizers:de}=this;de&&(0,ye.P)(de,pe),pe instanceof Ae&&pe._removeParent(this)}}Ae.EMPTY=(()=>{const De=new Ae;return De.closed=!0,De})();const Ce=Ae.EMPTY;function Fe(De){return De instanceof Ae||De&&"closed"in De&&(0,T.m)(De.remove)&&(0,T.m)(De.add)&&(0,T.m)(De.unsubscribe)}function Re(De){(0,T.m)(De)?De():De.unsubscribe()}},2416:(Wt,ze,j)=>{j.d(ze,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Wt,ze,j)=>{j.d(ze,{a:()=>pe});var T=j(9751),Y=j(4742),h=j(8996),ye=j(4671),Ae=j(3268),Ce=j(3269),Fe=j(1810),Re=j(5403),De=j(9672);function pe(...Ye){const Je=(0,Ce.yG)(Ye),mt=(0,Ce.jO)(Ye),{args:It,keys:Ze}=(0,Y.D)(Ye);if(0===It.length)return(0,h.D)([],Je);const at=new T.y(function de(Ye,Je,mt=ye.y){return It=>{Te(Je,()=>{const{length:Ze}=Ye,at=new Array(Ze);let ge=Ze,ut=Ze;for(let ot=0;ot<Ze;ot++)Te(Je,()=>{const Xe=(0,h.D)(Ye[ot],Je);let qe=!1;Xe.subscribe((0,Re.x)(It,Mt=>{at[ot]=Mt,qe||(qe=!0,ut--),ut||It.next(mt(at.slice()))},()=>{--ge||It.complete()}))},It)},It)}}(It,Je,Ze?ge=>(0,Fe.n)(Ze,ge):ye.y));return mt?at.pipe((0,Ae.Z)(mt)):at}function Te(Ye,Je,mt){Ye?(0,De.f)(mt,Ye,Je):Je()}},7272:(Wt,ze,j)=>{j.d(ze,{z:()=>Ae});var T=j(8189),h=j(3269),ye=j(8996);function Ae(...Ce){return function Y(){return(0,T.J)(1)}()((0,ye.D)(Ce,(0,h.yG)(Ce)))}},515:(Wt,ze,j)=>{j.d(ze,{E:()=>Y});const Y=new(j(9751).y)(Ae=>Ae.complete())},8996:(Wt,ze,j)=>{j.d(ze,{D:()=>Xe});var T=j(8421),Y=j(5363),h=j(9468),Ce=j(9751),Re=j(2202),De=j(576),pe=j(9672);function Te(qe,Mt){if(!qe)throw new Error("Iterable cannot be null");return new Ce.y(Se=>{(0,pe.f)(Se,Mt,()=>{const Ie=qe[Symbol.asyncIterator]();(0,pe.f)(Se,Mt,()=>{Ie.next().then(tt=>{tt.done?Se.complete():Se.next(tt.value)})},0,!0)})})}var Ye=j(3670),Je=j(8239),mt=j(1144),It=j(6495),Ze=j(2206),at=j(4532),ge=j(3260);function Xe(qe,Mt){return Mt?function ot(qe,Mt){if(null!=qe){if((0,Ye.c)(qe))return function ye(qe,Mt){return(0,T.Xf)(qe).pipe((0,h.R)(Mt),(0,Y.Q)(Mt))}(qe,Mt);if((0,mt.z)(qe))return function Fe(qe,Mt){return new Ce.y(Se=>{let Ie=0;return Mt.schedule(function(){Ie===qe.length?Se.complete():(Se.next(qe[Ie++]),Se.closed||this.schedule())})})}(qe,Mt);if((0,Je.t)(qe))return function Ae(qe,Mt){return(0,T.Xf)(qe).pipe((0,h.R)(Mt),(0,Y.Q)(Mt))}(qe,Mt);if((0,Ze.D)(qe))return Te(qe,Mt);if((0,It.T)(qe))return function de(qe,Mt){return new Ce.y(Se=>{let Ie;return(0,pe.f)(Se,Mt,()=>{Ie=qe[Re.h](),(0,pe.f)(Se,Mt,()=>{let tt,it;try{({value:tt,done:it}=Ie.next())}catch(vt){return void Se.error(vt)}it?Se.complete():Se.next(tt)},0,!0)}),()=>(0,De.m)(Ie?.return)&&Ie.return()})}(qe,Mt);if((0,ge.L)(qe))return function ut(qe,Mt){return Te((0,ge.Q)(qe),Mt)}(qe,Mt)}throw(0,at.z)(qe)}(qe,Mt):(0,T.Xf)(qe)}},8421:(Wt,ze,j)=>{j.d(ze,{Xf:()=>Ye});var T=j(655),Y=j(1144),h=j(8239),ye=j(9751),Ae=j(3670),Ce=j(2206),Fe=j(4532),Re=j(6495),De=j(3260),pe=j(576),de=j(7849),Te=j(8822);function Ye(ot){if(ot instanceof ye.y)return ot;if(null!=ot){if((0,Ae.c)(ot))return function Je(ot){return new ye.y(Xe=>{const qe=ot[Te.L]();if((0,pe.m)(qe.subscribe))return qe.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ot);if((0,Y.z)(ot))return function mt(ot){return new ye.y(Xe=>{for(let qe=0;qe<ot.length&&!Xe.closed;qe++)Xe.next(ot[qe]);Xe.complete()})}(ot);if((0,h.t)(ot))return function It(ot){return new ye.y(Xe=>{ot.then(qe=>{Xe.closed||(Xe.next(qe),Xe.complete())},qe=>Xe.error(qe)).then(null,de.h)})}(ot);if((0,Ce.D)(ot))return at(ot);if((0,Re.T)(ot))return function Ze(ot){return new ye.y(Xe=>{for(const qe of ot)if(Xe.next(qe),Xe.closed)return;Xe.complete()})}(ot);if((0,De.L)(ot))return function ge(ot){return at((0,De.Q)(ot))}(ot)}throw(0,Fe.z)(ot)}function at(ot){return new ye.y(Xe=>{(function ut(ot,Xe){var qe,Mt,Se,Ie;return(0,T.mG)(this,void 0,void 0,function*(){try{for(qe=(0,T.KL)(ot);!(Mt=yield qe.next()).done;)if(Xe.next(Mt.value),Xe.closed)return}catch(tt){Se={error:tt}}finally{try{Mt&&!Mt.done&&(Ie=qe.return)&&(yield Ie.call(qe))}finally{if(Se)throw Se.error}}Xe.complete()})})(ot,Xe).catch(qe=>Xe.error(qe))})}},6451:(Wt,ze,j)=>{j.d(ze,{T:()=>Ce});var T=j(8189),Y=j(8421),h=j(515),ye=j(3269),Ae=j(8996);function Ce(...Fe){const Re=(0,ye.yG)(Fe),De=(0,ye._6)(Fe,1/0),pe=Fe;return pe.length?1===pe.length?(0,Y.Xf)(pe[0]):(0,T.J)(De)((0,Ae.D)(pe,Re)):h.E}},9646:(Wt,ze,j)=>{j.d(ze,{of:()=>h});var T=j(3269),Y=j(8996);function h(...ye){const Ae=(0,T.yG)(ye);return(0,Y.D)(ye,Ae)}},5403:(Wt,ze,j)=>{j.d(ze,{x:()=>Y});var T=j(930);function Y(ye,Ae,Ce,Fe,Re){return new h(ye,Ae,Ce,Fe,Re)}class h extends T.Lv{constructor(Ae,Ce,Fe,Re,De,pe){super(Ae),this.onFinalize=De,this.shouldUnsubscribe=pe,this._next=Ce?function(de){try{Ce(de)}catch(Te){Ae.error(Te)}}:super._next,this._error=Re?function(de){try{Re(de)}catch(Te){Ae.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=Fe?function(){try{Fe()}catch(de){Ae.error(de)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}},6590:(Wt,ze,j)=>{j.d(ze,{d:()=>h});var T=j(4482),Y=j(5403);function h(ye){return(0,T.e)((Ae,Ce)=>{let Fe=!1;Ae.subscribe((0,Y.x)(Ce,Re=>{Fe=!0,Ce.next(Re)},()=>{Fe||Ce.next(ye),Ce.complete()}))})}},1884:(Wt,ze,j)=>{j.d(ze,{x:()=>ye});var T=j(4671),Y=j(4482),h=j(5403);function ye(Ce,Fe=T.y){return Ce=Ce??Ae,(0,Y.e)((Re,De)=>{let pe,de=!0;Re.subscribe((0,h.x)(De,Te=>{const Ye=Fe(Te);(de||!Ce(pe,Ye))&&(de=!1,pe=Ye,De.next(Te))}))})}function Ae(Ce,Fe){return Ce===Fe}},9300:(Wt,ze,j)=>{j.d(ze,{h:()=>h});var T=j(4482),Y=j(5403);function h(ye,Ae){return(0,T.e)((Ce,Fe)=>{let Re=0;Ce.subscribe((0,Y.x)(Fe,De=>ye.call(Ae,De,Re++)&&Fe.next(De)))})}},590:(Wt,ze,j)=>{j.d(ze,{P:()=>Fe});var T=j(6805),Y=j(9300),h=j(5698),ye=j(6590),Ae=j(8068),Ce=j(4671);function Fe(Re,De){const pe=arguments.length>=2;return de=>de.pipe(Re?(0,Y.h)((Te,Ye)=>Re(Te,Ye,de)):Ce.y,(0,h.q)(1),pe?(0,ye.d)(De):(0,Ae.T)(()=>new T.K))}},4004:(Wt,ze,j)=>{j.d(ze,{U:()=>h});var T=j(4482),Y=j(5403);function h(ye,Ae){return(0,T.e)((Ce,Fe)=>{let Re=0;Ce.subscribe((0,Y.x)(Fe,De=>{Fe.next(ye.call(Ae,De,Re++))}))})}},9718:(Wt,ze,j)=>{j.d(ze,{h:()=>Y});var T=j(4004);function Y(h){return(0,T.U)(()=>h)}},8189:(Wt,ze,j)=>{j.d(ze,{J:()=>h});var T=j(5577),Y=j(4671);function h(ye=1/0){return(0,T.z)(Y.y,ye)}},5577:(Wt,ze,j)=>{j.d(ze,{z:()=>Re});var T=j(4004),Y=j(8421),h=j(4482),ye=j(9672),Ae=j(5403),Fe=j(576);function Re(De,pe,de=1/0){return(0,Fe.m)(pe)?Re((Te,Ye)=>(0,T.U)((Je,mt)=>pe(Te,Je,Ye,mt))((0,Y.Xf)(De(Te,Ye))),de):("number"==typeof pe&&(de=pe),(0,h.e)((Te,Ye)=>function Ce(De,pe,de,Te,Ye,Je,mt,It){const Ze=[];let at=0,ge=0,ut=!1;const ot=()=>{ut&&!Ze.length&&!at&&pe.complete()},Xe=Mt=>at<Te?qe(Mt):Ze.push(Mt),qe=Mt=>{Je&&pe.next(Mt),at++;let Se=!1;(0,Y.Xf)(de(Mt,ge++)).subscribe((0,Ae.x)(pe,Ie=>{Ye?.(Ie),Je?Xe(Ie):pe.next(Ie)},()=>{Se=!0},void 0,()=>{if(Se)try{for(at--;Ze.length&&at<Te;){const Ie=Ze.shift();mt?(0,ye.f)(pe,mt,()=>qe(Ie)):qe(Ie)}ot()}catch(Ie){pe.error(Ie)}}))};return De.subscribe((0,Ae.x)(pe,Xe,()=>{ut=!0,ot()})),()=>{It?.()}}(Te,Ye,De,de)))}},5363:(Wt,ze,j)=>{j.d(ze,{Q:()=>ye});var T=j(9672),Y=j(4482),h=j(5403);function ye(Ae,Ce=0){return(0,Y.e)((Fe,Re)=>{Fe.subscribe((0,h.x)(Re,De=>(0,T.f)(Re,Ae,()=>Re.next(De),Ce),()=>(0,T.f)(Re,Ae,()=>Re.complete(),Ce),De=>(0,T.f)(Re,Ae,()=>Re.error(De),Ce)))})}},5026:(Wt,ze,j)=>{j.d(ze,{R:()=>ye});var T=j(4482),Y=j(5403);function ye(Ae,Ce){return(0,T.e)(function h(Ae,Ce,Fe,Re,De){return(pe,de)=>{let Te=Fe,Ye=Ce,Je=0;pe.subscribe((0,Y.x)(de,mt=>{const It=Je++;Ye=Te?Ae(Ye,mt,It):(Te=!0,mt),Re&&de.next(Ye)},De&&(()=>{Te&&de.next(Ye),de.complete()})))}}(Ae,Ce,arguments.length>=2,!0))}},3099:(Wt,ze,j)=>{j.d(ze,{B:()=>Ae});var T=j(8421),Y=j(7579),h=j(930),ye=j(4482);function Ae(Fe={}){const{connector:Re=(()=>new Y.x),resetOnError:De=!0,resetOnComplete:pe=!0,resetOnRefCountZero:de=!0}=Fe;return Te=>{let Ye,Je,mt,It=0,Ze=!1,at=!1;const ge=()=>{Je?.unsubscribe(),Je=void 0},ut=()=>{ge(),Ye=mt=void 0,Ze=at=!1},ot=()=>{const Xe=Ye;ut(),Xe?.unsubscribe()};return(0,ye.e)((Xe,qe)=>{It++,!at&&!Ze&&ge();const Mt=mt=mt??Re();qe.add(()=>{It--,0===It&&!at&&!Ze&&(Je=Ce(ot,de))}),Mt.subscribe(qe),!Ye&&It>0&&(Ye=new h.Hp({next:Se=>Mt.next(Se),error:Se=>{at=!0,ge(),Je=Ce(ut,De,Se),Mt.error(Se)},complete:()=>{Ze=!0,ge(),Je=Ce(ut,pe),Mt.complete()}}),(0,T.Xf)(Xe).subscribe(Ye))})(Te)}}function Ce(Fe,Re,...De){if(!0===Re)return void Fe();if(!1===Re)return;const pe=new h.Hp({next:()=>{pe.unsubscribe(),Fe()}});return Re(...De).subscribe(pe)}},8675:(Wt,ze,j)=>{j.d(ze,{O:()=>ye});var T=j(7272),Y=j(3269),h=j(4482);function ye(...Ae){const Ce=(0,Y.yG)(Ae);return(0,h.e)((Fe,Re)=>{(Ce?(0,T.z)(Ae,Fe,Ce):(0,T.z)(Ae,Fe)).subscribe(Re)})}},9468:(Wt,ze,j)=>{j.d(ze,{R:()=>Y});var T=j(4482);function Y(h,ye=0){return(0,T.e)((Ae,Ce)=>{Ce.add(h.schedule(()=>Ae.subscribe(Ce),ye))})}},3900:(Wt,ze,j)=>{j.d(ze,{w:()=>ye});var T=j(8421),Y=j(4482),h=j(5403);function ye(Ae,Ce){return(0,Y.e)((Fe,Re)=>{let De=null,pe=0,de=!1;const Te=()=>de&&!De&&Re.complete();Fe.subscribe((0,h.x)(Re,Ye=>{De?.unsubscribe();let Je=0;const mt=pe++;(0,T.Xf)(Ae(Ye,mt)).subscribe(De=(0,h.x)(Re,It=>Re.next(Ce?Ce(Ye,It,mt,Je++):It),()=>{De=null,Te()}))},()=>{de=!0,Te()}))})}},5698:(Wt,ze,j)=>{j.d(ze,{q:()=>ye});var T=j(515),Y=j(4482),h=j(5403);function ye(Ae){return Ae<=0?()=>T.E:(0,Y.e)((Ce,Fe)=>{let Re=0;Ce.subscribe((0,h.x)(Fe,De=>{++Re<=Ae&&(Fe.next(De),Ae<=Re&&Fe.complete())}))})}},8505:(Wt,ze,j)=>{j.d(ze,{b:()=>Ae});var T=j(576),Y=j(4482),h=j(5403),ye=j(4671);function Ae(Ce,Fe,Re){const De=(0,T.m)(Ce)||Fe||Re?{next:Ce,error:Fe,complete:Re}:Ce;return De?(0,Y.e)((pe,de)=>{var Te;null===(Te=De.subscribe)||void 0===Te||Te.call(De);let Ye=!0;pe.subscribe((0,h.x)(de,Je=>{var mt;null===(mt=De.next)||void 0===mt||mt.call(De,Je),de.next(Je)},()=>{var Je;Ye=!1,null===(Je=De.complete)||void 0===Je||Je.call(De),de.complete()},Je=>{var mt;Ye=!1,null===(mt=De.error)||void 0===mt||mt.call(De,Je),de.error(Je)},()=>{var Je,mt;Ye&&(null===(Je=De.unsubscribe)||void 0===Je||Je.call(De)),null===(mt=De.finalize)||void 0===mt||mt.call(De)}))}):ye.y}},8068:(Wt,ze,j)=>{j.d(ze,{T:()=>ye});var T=j(6805),Y=j(4482),h=j(5403);function ye(Ce=Ae){return(0,Y.e)((Fe,Re)=>{let De=!1;Fe.subscribe((0,h.x)(Re,pe=>{De=!0,Re.next(pe)},()=>De?Re.complete():Re.error(Ce())))})}function Ae(){return new T.K}},4408:(Wt,ze,j)=>{j.d(ze,{o:()=>Ae});var T=j(727);class Y extends T.w0{constructor(Fe,Re){super()}schedule(Fe,Re=0){return this}}const h={setInterval(Ce,Fe,...Re){const{delegate:De}=h;return De?.setInterval?De.setInterval(Ce,Fe,...Re):setInterval(Ce,Fe,...Re)},clearInterval(Ce){const{delegate:Fe}=h;return(Fe?.clearInterval||clearInterval)(Ce)},delegate:void 0};var ye=j(8737);class Ae extends Y{constructor(Fe,Re){super(Fe,Re),this.scheduler=Fe,this.work=Re,this.pending=!1}schedule(Fe,Re=0){var De;if(this.closed)return this;this.state=Fe;const pe=this.id,de=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(de,pe,Re)),this.pending=!0,this.delay=Re,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(de,this.id,Re),this}requestAsyncId(Fe,Re,De=0){return h.setInterval(Fe.flush.bind(Fe,this),De)}recycleAsyncId(Fe,Re,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return Re;null!=Re&&h.clearInterval(Re)}execute(Fe,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(Fe,Re);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Fe,Re){let pe,De=!1;try{this.work(Fe)}catch(de){De=!0,pe=de||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Fe,scheduler:Re}=this,{actions:De}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.P)(De,this),null!=Fe&&(this.id=this.recycleAsyncId(Re,Fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wt,ze,j)=>{j.d(ze,{v:()=>h});var T=j(6063);class Y{constructor(Ae,Ce=Y.now){this.schedulerActionCtor=Ae,this.now=Ce}schedule(Ae,Ce=0,Fe){return new this.schedulerActionCtor(this,Ae).schedule(Fe,Ce)}}Y.now=T.l.now;class h extends Y{constructor(Ae,Ce=Y.now){super(Ae,Ce),this.actions=[],this._active=!1}flush(Ae){const{actions:Ce}=this;if(this._active)return void Ce.push(Ae);let Fe;this._active=!0;do{if(Fe=Ae.execute(Ae.state,Ae.delay))break}while(Ae=Ce.shift());if(this._active=!1,Fe){for(;Ae=Ce.shift();)Ae.unsubscribe();throw Fe}}}},4986:(Wt,ze,j)=>{j.d(ze,{P:()=>ye,z:()=>h});var T=j(4408);const h=new(j(7565).v)(T.o),ye=h},6063:(Wt,ze,j)=>{j.d(ze,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},3410:(Wt,ze,j)=>{j.d(ze,{z:()=>T});const T={setTimeout(Y,h,...ye){const{delegate:Ae}=T;return Ae?.setTimeout?Ae.setTimeout(Y,h,...ye):setTimeout(Y,h,...ye)},clearTimeout(Y){const{delegate:h}=T;return(h?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(Wt,ze,j)=>{j.d(ze,{h:()=>Y});const Y=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wt,ze,j)=>{j.d(ze,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Wt,ze,j)=>{j.d(ze,{K:()=>Y});const Y=(0,j(3888).d)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Wt,ze,j)=>{j.d(ze,{_6:()=>Ce,jO:()=>ye,yG:()=>Ae});var T=j(576),Y=j(3532);function h(Fe){return Fe[Fe.length-1]}function ye(Fe){return(0,T.m)(h(Fe))?Fe.pop():void 0}function Ae(Fe){return(0,Y.K)(h(Fe))?Fe.pop():void 0}function Ce(Fe,Re){return"number"==typeof h(Fe)?Fe.pop():Re}},4742:(Wt,ze,j)=>{j.d(ze,{D:()=>Ae});const{isArray:T}=Array,{getPrototypeOf:Y,prototype:h,keys:ye}=Object;function Ae(Fe){if(1===Fe.length){const Re=Fe[0];if(T(Re))return{args:Re,keys:null};if(function Ce(Fe){return Fe&&"object"==typeof Fe&&Y(Fe)===h}(Re)){const De=ye(Re);return{args:De.map(pe=>Re[pe]),keys:De}}}return{args:Fe,keys:null}}},8737:(Wt,ze,j)=>{function T(Y,h){if(Y){const ye=Y.indexOf(h);0<=ye&&Y.splice(ye,1)}}j.d(ze,{P:()=>T})},3888:(Wt,ze,j)=>{function T(Y){const ye=Y(Ae=>{Error.call(Ae),Ae.stack=(new Error).stack});return ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye}j.d(ze,{d:()=>T})},1810:(Wt,ze,j)=>{function T(Y,h){return Y.reduce((ye,Ae,Ce)=>(ye[Ae]=h[Ce],ye),{})}j.d(ze,{n:()=>T})},2806:(Wt,ze,j)=>{j.d(ze,{O:()=>ye,x:()=>h});var T=j(2416);let Y=null;function h(Ae){if(T.v.useDeprecatedSynchronousErrorHandling){const Ce=!Y;if(Ce&&(Y={errorThrown:!1,error:null}),Ae(),Ce){const{errorThrown:Fe,error:Re}=Y;if(Y=null,Fe)throw Re}}else Ae()}function ye(Ae){T.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=Ae)}},9672:(Wt,ze,j)=>{function T(Y,h,ye,Ae=0,Ce=!1){const Fe=h.schedule(function(){ye(),Ce?Y.add(this.schedule(null,Ae)):this.unsubscribe()},Ae);if(Y.add(Fe),!Ce)return Fe}j.d(ze,{f:()=>T})},4671:(Wt,ze,j)=>{function T(Y){return Y}j.d(ze,{y:()=>T})},1144:(Wt,ze,j)=>{j.d(ze,{z:()=>T});const T=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(Wt,ze,j)=>{j.d(ze,{D:()=>Y});var T=j(576);function Y(h){return Symbol.asyncIterator&&(0,T.m)(h?.[Symbol.asyncIterator])}},576:(Wt,ze,j)=>{function T(Y){return"function"==typeof Y}j.d(ze,{m:()=>T})},3670:(Wt,ze,j)=>{j.d(ze,{c:()=>h});var T=j(8822),Y=j(576);function h(ye){return(0,Y.m)(ye[T.L])}},6495:(Wt,ze,j)=>{j.d(ze,{T:()=>h});var T=j(2202),Y=j(576);function h(ye){return(0,Y.m)(ye?.[T.h])}},8239:(Wt,ze,j)=>{j.d(ze,{t:()=>Y});var T=j(576);function Y(h){return(0,T.m)(h?.then)}},3260:(Wt,ze,j)=>{j.d(ze,{L:()=>ye,Q:()=>h});var T=j(655),Y=j(576);function h(Ae){return(0,T.FC)(this,arguments,function*(){const Fe=Ae.getReader();try{for(;;){const{value:Re,done:De}=yield(0,T.qq)(Fe.read());if(De)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(Re)}}finally{Fe.releaseLock()}})}function ye(Ae){return(0,Y.m)(Ae?.getReader)}},3532:(Wt,ze,j)=>{j.d(ze,{K:()=>Y});var T=j(576);function Y(h){return h&&(0,T.m)(h.schedule)}},4482:(Wt,ze,j)=>{j.d(ze,{A:()=>Y,e:()=>h});var T=j(576);function Y(ye){return(0,T.m)(ye?.lift)}function h(ye){return Ae=>{if(Y(Ae))return Ae.lift(function(Ce){try{return ye(Ce,this)}catch(Fe){this.error(Fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Wt,ze,j)=>{j.d(ze,{Z:()=>ye});var T=j(4004);const{isArray:Y}=Array;function ye(Ae){return(0,T.U)(Ce=>function h(Ae,Ce){return Y(Ce)?Ae(...Ce):Ae(Ce)}(Ae,Ce))}},5032:(Wt,ze,j)=>{function T(){}j.d(ze,{Z:()=>T})},9635:(Wt,ze,j)=>{j.d(ze,{U:()=>h,z:()=>Y});var T=j(4671);function Y(...ye){return h(ye)}function h(ye){return 0===ye.length?T.y:1===ye.length?ye[0]:function(Ce){return ye.reduce((Fe,Re)=>Re(Fe),Ce)}}},7849:(Wt,ze,j)=>{j.d(ze,{h:()=>h});var T=j(2416),Y=j(3410);function h(ye){Y.z.setTimeout(()=>{const{onUnhandledError:Ae}=T.v;if(!Ae)throw ye;Ae(ye)})}},4532:(Wt,ze,j)=>{function T(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ze,{z:()=>T})},655:(Wt,ze,j)=>{function ye(Ue,nt){var We={};for(var rt in Ue)Object.prototype.hasOwnProperty.call(Ue,rt)&&nt.indexOf(rt)<0&&(We[rt]=Ue[rt]);if(null!=Ue&&"function"==typeof Object.getOwnPropertySymbols){var ct=0;for(rt=Object.getOwnPropertySymbols(Ue);ct<rt.length;ct++)nt.indexOf(rt[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ue,rt[ct])&&(We[rt[ct]]=Ue[rt[ct]])}return We}function Te(Ue,nt,We,rt){return new(We||(We=Promise))(function(st,kt){function Et($t){try{Gt(rt.next($t))}catch(wt){kt(wt)}}function on($t){try{Gt(rt.throw($t))}catch(wt){kt(wt)}}function Gt($t){$t.done?st($t.value):function ct(st){return st instanceof We?st:new We(function(kt){kt(st)})}($t.value).then(Et,on)}Gt((rt=rt.apply(Ue,nt||[])).next())})}function ot(Ue){return this instanceof ot?(this.v=Ue,this):new ot(Ue)}function Xe(Ue,nt,We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,rt=We.apply(Ue,nt||[]),st=[];return ct={},kt("next"),kt("throw"),kt("return"),ct[Symbol.asyncIterator]=function(){return this},ct;function kt(En){rt[En]&&(ct[En]=function(Rn){return new Promise(function(Vn,Gn){st.push([En,Rn,Vn,Gn])>1||Et(En,Rn)})})}function Et(En,Rn){try{!function on(En){En.value instanceof ot?Promise.resolve(En.value.v).then(Gt,$t):wt(st[0][2],En)}(rt[En](Rn))}catch(Vn){wt(st[0][3],Vn)}}function Gt(En){Et("next",En)}function $t(En){Et("throw",En)}function wt(En,Rn){En(Rn),st.shift(),st.length&&Et(st[0][0],st[0][1])}}function Mt(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,nt=Ue[Symbol.asyncIterator];return nt?nt.call(Ue):(Ue=function It(Ue){var nt="function"==typeof Symbol&&Symbol.iterator,We=nt&&Ue[nt],rt=0;if(We)return We.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&rt>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[rt++],done:!Ue}}};throw new TypeError(nt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ue),We={},rt("next"),rt("throw"),rt("return"),We[Symbol.asyncIterator]=function(){return this},We);function rt(st){We[st]=Ue[st]&&function(kt){return new Promise(function(Et,on){!function ct(st,kt,Et,on){Promise.resolve(on).then(function(Gt){st({value:Gt,done:Et})},kt)}(Et,on,(kt=Ue[st](kt)).done,kt.value)})}}}j.d(ze,{FC:()=>Xe,KL:()=>Mt,_T:()=>ye,mG:()=>Te,qq:()=>ot})},6895:(Wt,ze,j)=>{j.d(ze,{Do:()=>ge,EM:()=>Ns,HT:()=>ye,JF:()=>iu,K0:()=>Ce,Mn:()=>rt,Mx:()=>ri,NF:()=>Pa,O5:()=>ai,PM:()=>ru,S$:()=>It,Tn:()=>vt,UT:()=>ct,V_:()=>De,Ye:()=>ut,Zx:()=>ko,ax:()=>br,b0:()=>at,bD:()=>as,ez:()=>tl,ol:()=>We,p6:()=>rr,q:()=>h,tP:()=>Os,w_:()=>Ae,x:()=>it});var T=j(4650);let Y=null;function h(){return Y}function ye(R){Y||(Y=R)}class Ae{}const Ce=new T.OlP("DocumentToken");let Fe=(()=>{class R{historyGo(L){throw new Error("Not implemented")}}return R.\u0275fac=function(L){return new(L||R)},R.\u0275prov=T.Yz7({token:R,factory:function(){return function Re(){return(0,T.LFG)(pe)}()},providedIn:"platform"}),R})();const De=new T.OlP("Location Initialized");let pe=(()=>{class R extends Fe{constructor(L){super(),this._doc=L,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return h().getBaseHref(this._doc)}onPopState(L){const J=h().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",L,!1),()=>J.removeEventListener("popstate",L)}onHashChange(L){const J=h().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",L,!1),()=>J.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,J,ce){de()?this._history.pushState(L,J,ce):this._location.hash=ce}replaceState(L,J,ce){de()?this._history.replaceState(L,J,ce):this._location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}}return R.\u0275fac=function(L){return new(L||R)(T.LFG(Ce))},R.\u0275prov=T.Yz7({token:R,factory:function(){return function Te(){return new pe((0,T.LFG)(Ce))}()},providedIn:"platform"}),R})();function de(){return!!window.history.pushState}function Ye(R,$){if(0==R.length)return $;if(0==$.length)return R;let L=0;return R.endsWith("/")&&L++,$.startsWith("/")&&L++,2==L?R+$.substring(1):1==L?R+$:R+"/"+$}function Je(R){const $=R.match(/#|\?|$/),L=$&&$.index||R.length;return R.slice(0,L-("/"===R[L-1]?1:0))+R.slice(L)}function mt(R){return R&&"?"!==R[0]?"?"+R:R}let It=(()=>{class R{historyGo(L){throw new Error("Not implemented")}}return R.\u0275fac=function(L){return new(L||R)},R.\u0275prov=T.Yz7({token:R,factory:function(){return(0,T.f3M)(at)},providedIn:"root"}),R})();const Ze=new T.OlP("appBaseHref");let at=(()=>{class R extends It{constructor(L,J){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=J??this._platformLocation.getBaseHrefFromDOM()??(0,T.f3M)(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return Ye(this._baseHref,L)}path(L=!1){const J=this._platformLocation.pathname+mt(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&L?`${J}${ce}`:J}pushState(L,J,ce,Ve){const bt=this.prepareExternalUrl(ce+mt(Ve));this._platformLocation.pushState(L,J,bt)}replaceState(L,J,ce,Ve){const bt=this.prepareExternalUrl(ce+mt(Ve));this._platformLocation.replaceState(L,J,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return R.\u0275fac=function(L){return new(L||R)(T.LFG(Fe),T.LFG(Ze,8))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),ge=(()=>{class R extends It{constructor(L,J){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(L){const J=Ye(this._baseHref,L);return J.length>0?"#"+J:J}pushState(L,J,ce,Ve){let bt=this.prepareExternalUrl(ce+mt(Ve));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.pushState(L,J,bt)}replaceState(L,J,ce,Ve){let bt=this.prepareExternalUrl(ce+mt(Ve));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.replaceState(L,J,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return R.\u0275fac=function(L){return new(L||R)(T.LFG(Fe),T.LFG(Ze,8))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac}),R})(),ut=(()=>{class R{constructor(L){this._subject=new T.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const J=this._locationStrategy.getBaseHref();this._basePath=function Mt(R){if(new RegExp("^(https?:)?//").test(R)){const[,L]=R.split(/\/\/[^\/]+/);return L}return R}(Je(qe(J))),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,J=""){return this.path()==this.normalize(L+mt(J))}normalize(L){return R.stripTrailingSlash(function Xe(R,$){if(!R||!$.startsWith(R))return $;const L=$.substring(R.length);return""===L||["/",";","?","#"].includes(L[0])?L:$}(this._basePath,qe(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,J="",ce=null){this._locationStrategy.pushState(ce,"",L,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+mt(J)),ce)}replaceState(L,J="",ce=null){this._locationStrategy.replaceState(ce,"",L,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+mt(J)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)})),()=>{const J=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(J,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",J){this._urlChangeListeners.forEach(ce=>ce(L,J))}subscribe(L,J,ce){return this._subject.subscribe({next:L,error:J,complete:ce})}}return R.normalizeQueryParams=mt,R.joinWithSlash=Ye,R.stripTrailingSlash=Je,R.\u0275fac=function(L){return new(L||R)(T.LFG(It))},R.\u0275prov=T.Yz7({token:R,factory:function(){return function ot(){return new ut((0,T.LFG)(It))}()},providedIn:"root"}),R})();function qe(R){return R.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Percent=1]="Percent",Ie[Ie.Currency=2]="Currency",Ie[Ie.Scientific=3]="Scientific",Ie))(),it=(()=>((it=it||{})[it.Format=0]="Format",it[it.Standalone=1]="Standalone",it))(),vt=(()=>((vt=vt||{})[vt.Narrow=0]="Narrow",vt[vt.Abbreviated=1]="Abbreviated",vt[vt.Wide=2]="Wide",vt[vt.Short=3]="Short",vt))(),Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.Medium=1]="Medium",Kt[Kt.Long=2]="Long",Kt[Kt.Full=3]="Full",Kt))(),Pt=(()=>((Pt=Pt||{})[Pt.Decimal=0]="Decimal",Pt[Pt.Group=1]="Group",Pt[Pt.List=2]="List",Pt[Pt.PercentSign=3]="PercentSign",Pt[Pt.PlusSign=4]="PlusSign",Pt[Pt.MinusSign=5]="MinusSign",Pt[Pt.Exponential=6]="Exponential",Pt[Pt.SuperscriptingExponent=7]="SuperscriptingExponent",Pt[Pt.PerMille=8]="PerMille",Pt[Pt.Infinity=9]="Infinity",Pt[Pt.NaN=10]="NaN",Pt[Pt.TimeSeparator=11]="TimeSeparator",Pt[Pt.CurrencyDecimal=12]="CurrencyDecimal",Pt[Pt.CurrencyGroup=13]="CurrencyGroup",Pt))();function We(R,$,L){const J=(0,T.cg1)(R),Ve=Xt([J[T.wAp.DayPeriodsFormat],J[T.wAp.DayPeriodsStandalone]],$);return Xt(Ve,L)}function rt(R,$,L){const J=(0,T.cg1)(R),Ve=Xt([J[T.wAp.DaysFormat],J[T.wAp.DaysStandalone]],$);return Xt(Ve,L)}function ct(R,$,L){const J=(0,T.cg1)(R),Ve=Xt([J[T.wAp.MonthsFormat],J[T.wAp.MonthsStandalone]],$);return Xt(Ve,L)}function on(R,$){return Xt((0,T.cg1)(R)[T.wAp.DateFormat],$)}function Gt(R,$){return Xt((0,T.cg1)(R)[T.wAp.TimeFormat],$)}function $t(R,$){return Xt((0,T.cg1)(R)[T.wAp.DateTimeFormat],$)}function wt(R,$){const L=(0,T.cg1)(R),J=L[T.wAp.NumberSymbols][$];if(typeof J>"u"){if($===Pt.CurrencyDecimal)return L[T.wAp.NumberSymbols][Pt.Decimal];if($===Pt.CurrencyGroup)return L[T.wAp.NumberSymbols][Pt.Group]}return J}function Fn(R){if(!R[T.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${R[T.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Xt(R,$){for(let L=$;L>-1;L--)if(typeof R[L]<"u")return R[L];throw new Error("Locale data API: locale data undefined")}function Sn(R){const[$,L]=R.split(":");return{hours:+$,minutes:+L}}const kr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yr={},ni=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var yn=(()=>((yn=yn||{})[yn.Short=0]="Short",yn[yn.ShortGMT=1]="ShortGMT",yn[yn.Long=2]="Long",yn[yn.Extended=3]="Extended",yn))(),nn=(()=>((nn=nn||{})[nn.FullYear=0]="FullYear",nn[nn.Month=1]="Month",nn[nn.Date=2]="Date",nn[nn.Hours=3]="Hours",nn[nn.Minutes=4]="Minutes",nn[nn.Seconds=5]="Seconds",nn[nn.FractionalSeconds=6]="FractionalSeconds",nn[nn.Day=7]="Day",nn))(),cn=(()=>((cn=cn||{})[cn.DayPeriods=0]="DayPeriods",cn[cn.Days=1]="Days",cn[cn.Months=2]="Months",cn[cn.Eras=3]="Eras",cn))();function rr(R,$,L,J){let ce=function Q(R){if(ae(R))return R;if("number"==typeof R&&!isNaN(R))return new Date(R);if("string"==typeof R){if(R=R.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(R)){const[ce,Ve=1,bt=1]=R.split("-").map(un=>+un);return or(ce,Ve-1,bt)}const L=parseFloat(R);if(!isNaN(R-L))return new Date(L);let J;if(J=R.match(kr))return function xe(R){const $=new Date(0);let L=0,J=0;const ce=R[8]?$.setUTCFullYear:$.setFullYear,Ve=R[8]?$.setUTCHours:$.setHours;R[9]&&(L=Number(R[9]+R[10]),J=Number(R[9]+R[11])),ce.call($,Number(R[1]),Number(R[2])-1,Number(R[3]));const bt=Number(R[4]||0)-L,un=Number(R[5]||0)-J,_r=Number(R[6]||0),lt=Math.floor(1e3*parseFloat("0."+(R[7]||0)));return Ve.call($,bt,un,_r,lt),$}(J)}const $=new Date(R);if(!ae($))throw new Error(`Unable to convert "${R}" into a date`);return $}(R);$=ln(L,$)||$;let un,bt=[];for(;$;){if(un=ni.exec($),!un){bt.push($);break}{bt=bt.concat(un.slice(1));const dn=bt.pop();if(!dn)break;$=dn}}let _r=ce.getTimezoneOffset();J&&(_r=me(J,_r),ce=function re(R,$,L){const J=L?-1:1,ce=R.getTimezoneOffset();return function te(R,$){return(R=new Date(R.getTime())).setMinutes(R.getMinutes()+$),R}(R,J*(me($,ce)-ce))}(ce,J,!0));let lt="";return bt.forEach(dn=>{const jn=function ve(R){if(cr[R])return cr[R];let $;switch(R){case"G":case"GG":case"GGG":$=xn(cn.Eras,vt.Abbreviated);break;case"GGGG":$=xn(cn.Eras,vt.Wide);break;case"GGGGG":$=xn(cn.Eras,vt.Narrow);break;case"y":$=pn(nn.FullYear,1,0,!1,!0);break;case"yy":$=pn(nn.FullYear,2,0,!0,!0);break;case"yyy":$=pn(nn.FullYear,3,0,!1,!0);break;case"yyyy":$=pn(nn.FullYear,4,0,!1,!0);break;case"Y":$=fn(1);break;case"YY":$=fn(2,!0);break;case"YYY":$=fn(3);break;case"YYYY":$=fn(4);break;case"M":case"L":$=pn(nn.Month,1,1);break;case"MM":case"LL":$=pn(nn.Month,2,1);break;case"MMM":$=xn(cn.Months,vt.Abbreviated);break;case"MMMM":$=xn(cn.Months,vt.Wide);break;case"MMMMM":$=xn(cn.Months,vt.Narrow);break;case"LLL":$=xn(cn.Months,vt.Abbreviated,it.Standalone);break;case"LLLL":$=xn(cn.Months,vt.Wide,it.Standalone);break;case"LLLLL":$=xn(cn.Months,vt.Narrow,it.Standalone);break;case"w":$=mn(1);break;case"ww":$=mn(2);break;case"W":$=mn(1,!0);break;case"d":$=pn(nn.Date,1);break;case"dd":$=pn(nn.Date,2);break;case"c":case"cc":$=pn(nn.Day,1);break;case"ccc":$=xn(cn.Days,vt.Abbreviated,it.Standalone);break;case"cccc":$=xn(cn.Days,vt.Wide,it.Standalone);break;case"ccccc":$=xn(cn.Days,vt.Narrow,it.Standalone);break;case"cccccc":$=xn(cn.Days,vt.Short,it.Standalone);break;case"E":case"EE":case"EEE":$=xn(cn.Days,vt.Abbreviated);break;case"EEEE":$=xn(cn.Days,vt.Wide);break;case"EEEEE":$=xn(cn.Days,vt.Narrow);break;case"EEEEEE":$=xn(cn.Days,vt.Short);break;case"a":case"aa":case"aaa":$=xn(cn.DayPeriods,vt.Abbreviated);break;case"aaaa":$=xn(cn.DayPeriods,vt.Wide);break;case"aaaaa":$=xn(cn.DayPeriods,vt.Narrow);break;case"b":case"bb":case"bbb":$=xn(cn.DayPeriods,vt.Abbreviated,it.Standalone,!0);break;case"bbbb":$=xn(cn.DayPeriods,vt.Wide,it.Standalone,!0);break;case"bbbbb":$=xn(cn.DayPeriods,vt.Narrow,it.Standalone,!0);break;case"B":case"BB":case"BBB":$=xn(cn.DayPeriods,vt.Abbreviated,it.Format,!0);break;case"BBBB":$=xn(cn.DayPeriods,vt.Wide,it.Format,!0);break;case"BBBBB":$=xn(cn.DayPeriods,vt.Narrow,it.Format,!0);break;case"h":$=pn(nn.Hours,1,-12);break;case"hh":$=pn(nn.Hours,2,-12);break;case"H":$=pn(nn.Hours,1);break;case"HH":$=pn(nn.Hours,2);break;case"m":$=pn(nn.Minutes,1);break;case"mm":$=pn(nn.Minutes,2);break;case"s":$=pn(nn.Seconds,1);break;case"ss":$=pn(nn.Seconds,2);break;case"S":$=pn(nn.FractionalSeconds,1);break;case"SS":$=pn(nn.FractionalSeconds,2);break;case"SSS":$=pn(nn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":$=Cr(yn.Short);break;case"ZZZZZ":$=Cr(yn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":$=Cr(yn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":$=Cr(yn.Long);break;default:return null}return cr[R]=$,$}(dn);lt+=jn?jn(ce,L,_r):"''"===dn?"'":dn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),lt}function or(R,$,L){const J=new Date(0);return J.setFullYear(R,$,L),J.setHours(0,0,0),J}function ln(R,$){const L=function nt(R){return(0,T.cg1)(R)[T.wAp.LocaleId]}(R);if(Yr[L]=Yr[L]||{},Yr[L][$])return Yr[L][$];let J="";switch($){case"shortDate":J=on(R,Kt.Short);break;case"mediumDate":J=on(R,Kt.Medium);break;case"longDate":J=on(R,Kt.Long);break;case"fullDate":J=on(R,Kt.Full);break;case"shortTime":J=Gt(R,Kt.Short);break;case"mediumTime":J=Gt(R,Kt.Medium);break;case"longTime":J=Gt(R,Kt.Long);break;case"fullTime":J=Gt(R,Kt.Full);break;case"short":const ce=ln(R,"shortTime"),Ve=ln(R,"shortDate");J=Ir($t(R,Kt.Short),[ce,Ve]);break;case"medium":const bt=ln(R,"mediumTime"),un=ln(R,"mediumDate");J=Ir($t(R,Kt.Medium),[bt,un]);break;case"long":const _r=ln(R,"longTime"),lt=ln(R,"longDate");J=Ir($t(R,Kt.Long),[_r,lt]);break;case"full":const dn=ln(R,"fullTime"),jn=ln(R,"fullDate");J=Ir($t(R,Kt.Full),[dn,jn])}return J&&(Yr[L][$]=J),J}function Ir(R,$){return $&&(R=R.replace(/\{([^}]+)}/g,function(L,J){return null!=$&&J in $?$[J]:L})),R}function Zr(R,$,L="-",J,ce){let Ve="";(R<0||ce&&R<=0)&&(ce?R=1-R:(R=-R,Ve=L));let bt=String(R);for(;bt.length<$;)bt="0"+bt;return J&&(bt=bt.slice(bt.length-$)),Ve+bt}function pn(R,$,L=0,J=!1,ce=!1){return function(Ve,bt){let un=function Kr(R,$){switch(R){case nn.FullYear:return $.getFullYear();case nn.Month:return $.getMonth();case nn.Date:return $.getDate();case nn.Hours:return $.getHours();case nn.Minutes:return $.getMinutes();case nn.Seconds:return $.getSeconds();case nn.FractionalSeconds:return $.getMilliseconds();case nn.Day:return $.getDay();default:throw new Error(`Unknown DateType value "${R}".`)}}(R,Ve);if((L>0||un>-L)&&(un+=L),R===nn.Hours)0===un&&-12===L&&(un=12);else if(R===nn.FractionalSeconds)return function yr(R,$){return Zr(R,3).substring(0,$)}(un,$);const _r=wt(bt,Pt.MinusSign);return Zr(un,$,_r,J,ce)}}function xn(R,$,L=it.Format,J=!1){return function(ce,Ve){return function Ii(R,$,L,J,ce,Ve){switch(L){case cn.Months:return ct($,ce,J)[R.getMonth()];case cn.Days:return rt($,ce,J)[R.getDay()];case cn.DayPeriods:const bt=R.getHours(),un=R.getMinutes();if(Ve){const lt=function Nn(R){const $=(0,T.cg1)(R);return Fn($),($[T.wAp.ExtraData][2]||[]).map(J=>"string"==typeof J?Sn(J):[Sn(J[0]),Sn(J[1])])}($),dn=function er(R,$,L){const J=(0,T.cg1)(R);Fn(J);const Ve=Xt([J[T.wAp.ExtraData][0],J[T.wAp.ExtraData][1]],$)||[];return Xt(Ve,L)||[]}($,ce,J),jn=lt.findIndex(zn=>{if(Array.isArray(zn)){const[Ct,Ft]=zn,Ai=bt>=Ct.hours&&un>=Ct.minutes,St=bt<Ft.hours||bt===Ft.hours&&un<Ft.minutes;if(Ct.hours<Ft.hours){if(Ai&&St)return!0}else if(Ai||St)return!0}else if(zn.hours===bt&&zn.minutes===un)return!0;return!1});if(-1!==jn)return dn[jn]}return We($,ce,J)[bt<12?0:1];case cn.Eras:return function st(R,$){return Xt((0,T.cg1)(R)[T.wAp.Eras],$)}($,J)[R.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${L}`)}}(ce,Ve,R,$,L,J)}}function Cr(R){return function($,L,J){const ce=-1*J,Ve=wt(L,Pt.MinusSign),bt=ce>0?Math.floor(ce/60):Math.ceil(ce/60);switch(R){case yn.Short:return(ce>=0?"+":"")+Zr(bt,2,Ve)+Zr(Math.abs(ce%60),2,Ve);case yn.ShortGMT:return"GMT"+(ce>=0?"+":"")+Zr(bt,1,Ve);case yn.Long:return"GMT"+(ce>=0?"+":"")+Zr(bt,2,Ve)+":"+Zr(Math.abs(ce%60),2,Ve);case yn.Extended:return 0===J?"Z":(ce>=0?"+":"")+Zr(bt,2,Ve)+":"+Zr(Math.abs(ce%60),2,Ve);default:throw new Error(`Unknown zone width "${R}"`)}}}const Rt=0,ft=4;function rn(R){return or(R.getFullYear(),R.getMonth(),R.getDate()+(ft-R.getDay()))}function mn(R,$=!1){return function(L,J){let ce;if($){const Ve=new Date(L.getFullYear(),L.getMonth(),1).getDay()-1,bt=L.getDate();ce=1+Math.floor((bt+Ve)/7)}else{const Ve=rn(L),bt=function Ht(R){const $=or(R,Rt,1).getDay();return or(R,0,1+($<=ft?ft:ft+7)-$)}(Ve.getFullYear()),un=Ve.getTime()-bt.getTime();ce=1+Math.round(un/6048e5)}return Zr(ce,R,wt(J,Pt.MinusSign))}}function fn(R,$=!1){return function(L,J){return Zr(rn(L).getFullYear(),R,wt(J,Pt.MinusSign),$)}}const cr={};function me(R,$){R=R.replace(/:/g,"");const L=Date.parse("Jan 01, 1970 00:00:00 "+R)/6e4;return isNaN(L)?$:L}function ae(R){return R instanceof Date&&!isNaN(R.valueOf())}const he=/^(\d+)?\.((\d+)(-(\d+))?)?$/,oe=22,Oe=".",et="0",pt=";",en=",",Bt="#";function Vr(R){const $=parseInt(R);if(isNaN($))throw new Error("Invalid integer literal when parsing "+R);return $}function ri(R,$){$=encodeURIComponent($);for(const L of R.split(";")){const J=L.indexOf("="),[ce,Ve]=-1==J?[L,""]:[L.slice(0,J),L.slice(J+1)];if(ce.trim()===$)return decodeURIComponent(Ve)}return null}class zi{constructor($,L,J,ce){this.$implicit=$,this.ngForOf=L,this.index=J,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let br=(()=>{class R{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,J,ce){this._viewContainer=L,this._template=J,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const J=this._viewContainer;L.forEachOperation((ce,Ve,bt)=>{if(null==ce.previousIndex)J.createEmbeddedView(this._template,new zi(ce.item,this._ngForOf,-1,-1),null===bt?void 0:bt);else if(null==bt)J.remove(null===Ve?void 0:Ve);else if(null!==Ve){const un=J.get(Ve);J.move(un,bt),oi(un,ce)}});for(let ce=0,Ve=J.length;ce<Ve;ce++){const un=J.get(ce).context;un.index=ce,un.count=Ve,un.ngForOf=this._ngForOf}L.forEachIdentityChange(ce=>{oi(J.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(L,J){return!0}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function oi(R,$){R.context.$implicit=$.item}let ai=(()=>{class R{constructor(L,J){this._viewContainer=L,this._context=new xa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Ln("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Ln("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,J){return!0}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.s_b),T.Y36(T.Rgc))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class xa{constructor(){this.$implicit=null,this.ngIf=null}}function Ln(R,$){if($&&!$.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,T.AaK)($)}'.`)}let Os=(()=>{class R{constructor(L){this._viewContainerRef=L,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(L){if(L.ngTemplateOutlet||L.ngTemplateOutletInjector){const J=this._viewContainerRef;if(this._viewRef&&J.remove(J.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ce,ngTemplateOutletContext:Ve,ngTemplateOutletInjector:bt}=this;this._viewRef=J.createEmbeddedView(ce,Ve,bt?{injector:bt}:void 0)}else this._viewRef=null}else this._viewRef&&L.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.s_b))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[T.TTD]}),R})();let ko=(()=>{class R{constructor(L){this._locale=L}transform(L,J,ce){if(!function el(R){return!(null==R||""===R||R!=R)}(L))return null;ce=ce||this._locale;try{return function qo(R,$,L){return function os(R,$,L,J,ce,Ve,bt=!1){let un="",_r=!1;if(isFinite(R)){let lt=function No(R){let J,ce,Ve,bt,un,$=Math.abs(R)+"",L=0;for((ce=$.indexOf(Oe))>-1&&($=$.replace(Oe,"")),(Ve=$.search(/e/i))>0?(ce<0&&(ce=Ve),ce+=+$.slice(Ve+1),$=$.substring(0,Ve)):ce<0&&(ce=$.length),Ve=0;$.charAt(Ve)===et;Ve++);if(Ve===(un=$.length))J=[0],ce=1;else{for(un--;$.charAt(un)===et;)un--;for(ce-=Ve,J=[],bt=0;Ve<=un;Ve++,bt++)J[bt]=Number($.charAt(Ve))}return ce>oe&&(J=J.splice(0,oe-1),L=ce-1,ce=1),{digits:J,exponent:L,integerLen:ce}}(R);bt&&(lt=function ks(R){if(0===R.digits[0])return R;const $=R.digits.length-R.integerLen;return R.exponent?R.exponent+=2:(0===$?R.digits.push(0,0):1===$&&R.digits.push(0),R.integerLen+=2),R}(lt));let dn=$.minInt,jn=$.minFrac,zn=$.maxFrac;if(Ve){const _t=Ve.match(he);if(null===_t)throw new Error(`${Ve} is not a valid digit info`);const Er=_t[1],ys=_t[3],dl=_t[5];null!=Er&&(dn=Vr(Er)),null!=ys&&(jn=Vr(ys)),null!=dl?zn=Vr(dl):null!=ys&&jn>zn&&(zn=jn)}!function Xn(R,$,L){if($>L)throw new Error(`The minimum number of digits after fraction (${$}) is higher than the maximum (${L}).`);let J=R.digits,ce=J.length-R.integerLen;const Ve=Math.min(Math.max($,ce),L);let bt=Ve+R.integerLen,un=J[bt];if(bt>0){J.splice(Math.max(R.integerLen,bt));for(let jn=bt;jn<J.length;jn++)J[jn]=0}else{ce=Math.max(0,ce),R.integerLen=1,J.length=Math.max(1,bt=Ve+1),J[0]=0;for(let jn=1;jn<bt;jn++)J[jn]=0}if(un>=5)if(bt-1<0){for(let jn=0;jn>bt;jn--)J.unshift(0),R.integerLen++;J.unshift(1),R.integerLen++}else J[bt-1]++;for(;ce<Math.max(0,Ve);ce++)J.push(0);let _r=0!==Ve;const lt=$+R.integerLen,dn=J.reduceRight(function(jn,zn,Ct,Ft){return Ft[Ct]=(zn+=jn)<10?zn:zn-10,_r&&(0===Ft[Ct]&&Ct>=lt?Ft.pop():_r=!1),zn>=10?1:0},0);dn&&(J.unshift(dn),R.integerLen++)}(lt,jn,zn);let Ct=lt.digits,Ft=lt.integerLen;const Ai=lt.exponent;let St=[];for(_r=Ct.every(_t=>!_t);Ft<dn;Ft++)Ct.unshift(0);for(;Ft<0;Ft++)Ct.unshift(0);Ft>0?St=Ct.splice(Ft,Ct.length):(St=Ct,Ct=[0]);const Ke=[];for(Ct.length>=$.lgSize&&Ke.unshift(Ct.splice(-$.lgSize,Ct.length).join(""));Ct.length>$.gSize;)Ke.unshift(Ct.splice(-$.gSize,Ct.length).join(""));Ct.length&&Ke.unshift(Ct.join("")),un=Ke.join(wt(L,J)),St.length&&(un+=wt(L,ce)+St.join("")),Ai&&(un+=wt(L,Pt.Exponential)+"+"+Ai)}else un=wt(L,Pt.Infinity);return un=R<0&&!_r?$.negPre+un+$.negSuf:$.posPre+un+$.posSuf,un}(R,function ps(R,$="-"){const L={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},J=R.split(pt),ce=J[0],Ve=J[1],bt=-1!==ce.indexOf(Oe)?ce.split(Oe):[ce.substring(0,ce.lastIndexOf(et)+1),ce.substring(ce.lastIndexOf(et)+1)],un=bt[0],_r=bt[1]||"";L.posPre=un.substring(0,un.indexOf(Bt));for(let dn=0;dn<_r.length;dn++){const jn=_r.charAt(dn);jn===et?L.minFrac=L.maxFrac=dn+1:jn===Bt?L.maxFrac=dn+1:L.posSuf+=jn}const lt=un.split(en);if(L.gSize=lt[1]?lt[1].length:0,L.lgSize=lt[2]||lt[1]?(lt[2]||lt[1]).length:0,Ve){const dn=ce.length-L.posPre.length-L.posSuf.length,jn=Ve.indexOf(Bt);L.negPre=Ve.substring(0,jn).replace(/'/g,""),L.negSuf=Ve.slice(jn+dn).replace(/'/g,"")}else L.negPre=$+L.posPre,L.negSuf=L.posSuf;return L}(function En(R,$){return(0,T.cg1)(R)[T.wAp.NumberFormats][$]}($,Ie.Percent),wt($,Pt.MinusSign)),$,Pt.Group,Pt.Decimal,L,!0).replace(new RegExp("%","g"),wt($,Pt.PercentSign))}(function Bs(R){if("string"==typeof R&&!isNaN(Number(R)-parseFloat(R)))return Number(R);if("number"!=typeof R)throw new Error(`${R} is not a number`);return R}(L),ce,J)}catch(Ve){throw function _e(R,$){return new T.vHH(2100,!1)}()}}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.soG,16))},R.\u0275pipe=T.Yjl({name:"percent",type:R,pure:!0,standalone:!0}),R})();let tl=(()=>{class R{}return R.\u0275fac=function(L){return new(L||R)},R.\u0275mod=T.oAB({type:R}),R.\u0275inj=T.cJS({}),R})();const as="browser",Fo="server";function Pa(R){return R===as}function ru(R){return R===Fo}let Ns=(()=>{class R{}return R.\u0275prov=(0,T.Yz7)({token:R,providedIn:"root",factory:()=>new nl((0,T.LFG)(Ce),window)}),R})();class nl{constructor($,L){this.document=$,this.window=L,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const L=function Zo(R,$){const L=R.getElementById($)||R.getElementsByName($)[0];if(L)return L;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const J=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let ce=J.currentNode;for(;ce;){const Ve=ce.shadowRoot;if(Ve){const bt=Ve.getElementById($)||Ve.querySelector(`[name="${$}"]`);if(bt)return bt}ce=J.nextNode()}}return null}(this.document,$);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const L=this.window.history;L&&L.scrollRestoration&&(L.scrollRestoration=$)}}scrollToElement($){const L=$.getBoundingClientRect(),J=L.left+this.window.pageXOffset,ce=L.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo(J-Ve[0],ce-Ve[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=Js(this.window.history)||Js(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Js(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class iu{}},4650:(Wt,ze,j)=>{j.d(ze,{$8M:()=>js,$WT:()=>Ui,$Z:()=>Sg,AFp:()=>YE,ALo:()=>_w,AaK:()=>Re,BQk:()=>Zg,CHM:()=>ol,CRH:()=>bw,CZH:()=>B0,CqO:()=>Qg,D6c:()=>Vy,EJc:()=>QE,EpF:()=>uf,F$t:()=>Yd,F4k:()=>Ap,FYo:()=>sp,FiY:()=>F,Gf:()=>FE,GfV:()=>op,Gpc:()=>de,Hsn:()=>Np,Ikx:()=>oy,JOm:()=>Rr,KtG:()=>mo,LFG:()=>Rt,LMc:()=>nb,LSH:()=>ep,Lbi:()=>rI,Lck:()=>be,MAs:()=>lf,MGl:()=>To,MMx:()=>_n,MT6:()=>Bp,NdJ:()=>df,O4$:()=>Bl,OlP:()=>$r,Oqu:()=>Fp,P3R:()=>f_,PXZ:()=>hD,Q6J:()=>qg,QGY:()=>cf,Qsj:()=>bg,QtT:()=>_y,R0b:()=>tu,RDi:()=>ab,Rgc:()=>Ey,SBq:()=>oc,SDv:()=>Am,Sil:()=>eD,Suo:()=>S0,TTD:()=>Ns,TgZ:()=>Sp,Tol:()=>Kl,Udp:()=>qc,VKq:()=>wE,W1O:()=>xm,WLB:()=>E0,X6Q:()=>pI,XFs:()=>Ut,Xpm:()=>Cn,Xts:()=>qs,Y36:()=>Gh,YKP:()=>ne,YNc:()=>Tp,Yjl:()=>No,Yz7:()=>wt,Z0I:()=>Gn,ZZ4:()=>Uy,_Bn:()=>B,_UZ:()=>W_,_Vd:()=>Bc,_c5:()=>By,_uU:()=>om,aQg:()=>Ww,c2e:()=>iI,cJS:()=>Rn,cg1:()=>mm,dDg:()=>lD,dqk:()=>yn,eFA:()=>Rw,eJc:()=>Ty,ekj:()=>nm,eoX:()=>uD,f3M:()=>Ht,g9A:()=>ZE,h0i:()=>z,hGG:()=>ad,hij:()=>am,iGM:()=>T0,ifc:()=>Q,ip1:()=>qE,jDz:()=>Cs,kEZ:()=>Xl,kL8:()=>$p,lG2:()=>ks,lcZ:()=>by,lqb:()=>Wl,lri:()=>oD,n5z:()=>Wa,oAB:()=>qo,oxw:()=>ff,pQV:()=>my,q4F:()=>wg,qLn:()=>ap,qOj:()=>sa,qZA:()=>qd,rWj:()=>aD,s9C:()=>Y_,sBO:()=>Fw,s_b:()=>Dy,soG:()=>Bm,tb:()=>dD,tp0:()=>Z,uIk:()=>Cp,vHH:()=>Ze,vpe:()=>od,wAp:()=>Wn,xp6:()=>dp,ynx:()=>Yg,z2F:()=>q0,zSh:()=>np,zs3:()=>Hc});var T=j(7579),Y=j(727),h=j(9751),ye=j(6451),Ae=j(3099);function Ce(s){for(let a in s)if(s[a]===Ce)return a;throw Error("Could not find renamed property on target object.")}function Fe(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function Re(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Re).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function De(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const pe=Ce({__forward_ref__:Ce});function de(s){return s.__forward_ref__=de,s.toString=function(){return Re(this())},s}function Te(s){return Ye(s)?s():s}function Ye(s){return"function"==typeof s&&s.hasOwnProperty(pe)&&s.__forward_ref__===de}function Je(s){return s&&!!s.\u0275providers}const It="https://g.co/ng/security#xss";class Ze extends Error{constructor(a,c){super(at(a,c)),this.code=a}}function at(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Mt(s,a){throw new Ze(-201,!1)}function Et(s,a,c,f){throw new Error(`ASSERTION ERROR: ${s}`+(null==f?"":` [Expected=> ${c} ${f} ${a} <=Actual]`))}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Rn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Vn(s){return Wr(s,er)||Wr(s,Xt)}function Gn(s){return null!==Vn(s)}function Wr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Nn(s){return s&&(s.hasOwnProperty(tr)||s.hasOwnProperty(Sn))?s[tr]:null}const er=Ce({\u0275prov:Ce}),tr=Ce({\u0275inj:Ce}),Xt=Ce({ngInjectableDef:Ce}),Sn=Ce({ngInjectorDef:Ce});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let ti;function kr(s){const a=ti;return ti=s,a}function Yr(s,a,c){const f=Vn(s);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&Ut.Optional?null:void 0!==a?a:void Mt(Re(s))}const yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),or={},ln="__NG_DI_FLAG__",Ir="ngTempTokenPath",Zr="ngTokenPath",yr=/\n/gm,pn="\u0275",Kr="__source";let xn;function Ii(s){const a=xn;return xn=s,a}function Cr(s,a=Ut.Default){if(void 0===xn)throw new Ze(-203,!1);return null===xn?Yr(s,void 0,a):xn.get(s,a&Ut.Optional?null:void 0,a)}function Rt(s,a=Ut.Default){return(function fi(){return ti}()||Cr)(Te(s),a)}function Ht(s,a=Ut.Default){return Rt(s,rn(a))}function rn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function mn(s){const a=[];for(let c=0;c<s.length;c++){const f=Te(s[c]);if(Array.isArray(f)){if(0===f.length)throw new Ze(900,!1);let g,y=Ut.Default;for(let I=0;I<f.length;I++){const N=f[I],k=cr(N);"number"==typeof k?-1===k?g=N.token:y|=k:g=N}a.push(Rt(g,y))}else a.push(Rt(f))}return a}function fn(s,a){return s[ln]=a,s.prototype[ln]=a,s}function cr(s){return s[ln]}function te(s){return{toString:s}.toString()}var re=(()=>((re=re||{})[re.OnPush=0]="OnPush",re[re.Default=1]="Default",re))(),Q=(()=>{return(s=Q||(Q={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Q;var s})();const xe={},ae=[],he=Ce({\u0275cmp:Ce}),oe=Ce({\u0275dir:Ce}),Oe=Ce({\u0275pipe:Ce}),et=Ce({\u0275mod:Ce}),pt=Ce({\u0275fac:Ce}),en=Ce({__NG_ELEMENT_ID__:Ce});let Bt=0;function Cn(s){return te(()=>{const a=si(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===re.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Q.Emulated,id:"c"+Bt++,styles:s.styles||ae,_:null,schemas:s.schemas||null,tView:null};ri(c);const f=s.dependencies;return c.directiveDefs=yi(f,!1),c.pipeDefs=yi(f,!0),c})}function os(s){return Xn(s)||Vr(s)}function ca(s){return null!==s}function qo(s){return te(()=>({type:s.type,bootstrap:s.bootstrap||ae,declarations:s.declarations||ae,imports:s.imports||ae,exports:s.exports||ae,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ps(s,a){if(null==s)return xe;const c={};for(const f in s)if(s.hasOwnProperty(f)){let g=s[f],y=g;Array.isArray(g)&&(y=g[1],g=g[0]),c[g]=f,a&&(a[g]=y)}return c}function ks(s){return te(()=>{const a=si(s);return ri(a),a})}function No(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Xn(s){return s[he]||null}function Vr(s){return s[oe]||null}function Fr(s){return s[Oe]||null}function Ui(s){const a=Xn(s)||Vr(s)||Fr(s);return null!==a&&a.standalone}function $i(s,a){const c=s[et]||null;if(!c&&!0===a)throw new Error(`Type ${Re(s)} does not have '\u0275mod' property.`);return c}function si(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||ae,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ps(s.inputs,a),outputs:ps(s.outputs)}}function ri(s){s.features?.forEach(a=>a(s))}function yi(s,a){if(!s)return null;const c=a?Fr:os;return()=>("function"==typeof s?s():s).map(f=>c(f)).filter(ca)}const Ci=0,Qt=1,Mn=2,vr=3,vi=4,zi=5,br=6,oi=7,Gr=8,ai=9,xa=10,Ln=11,As=12,Mo=13,Yo=14,Ro=15,Ti=16,uo=17,jr=18,bi=19,Os=20,Pe=21,_e=22,ht=1,Lt=2,tn=7,An=8,wr=9,Pn=10;function Lr(s){return Array.isArray(s)&&"object"==typeof s[ht]}function gr(s){return Array.isArray(s)&&!0===s[ht]}function Fs(s){return 0!=(4&s.flags)}function Ls(s){return s.componentOffset>-1}function Wi(s){return 1==(1&s.flags)}function Us(s){return!!s.template}function Xa(s){return 0!=(256&s[Mn])}function Bi(s,a){return s.hasOwnProperty(pt)?s[pt]:null}class Lo{constructor(a,c,f){this.previousValue=a,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function Ns(){return nl}function nl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Zo),Js}function Js(){const s=iu(this),a=s?.current;if(a){const c=s.previous;if(c===xe)s.previous=a;else for(let f in a)c[f]=a[f];s.current=null,this.ngOnChanges(a)}}function Zo(s,a,c,f){const g=this.declaredInputs[c],y=iu(s)||function su(s,a){return s[kl]=a}(s,{previous:xe,current:null}),I=y.current||(y.current={}),N=y.previous,k=N[g];I[g]=new Lo(k&&k.currentValue,a,N===xe),s[f]=a}Ns.ngInherit=!0;const kl="__ngSimpleChanges__";function iu(s){return s[kl]||null}const mr=function(s,a,c){},rl="svg";function Ur(s){for(;Array.isArray(s);)s=s[Ci];return s}function po(s,a){return Ur(a[s])}function pi(s,a){return Ur(a[s.index])}function il(s,a){return s.data[a]}function Gs(s,a){return s[a]}function gi(s,a){const c=a[s];return Lr(c)?c:c[Ci]}function sl(s){return 64==(64&s[Mn])}function Zi(s,a){return null==a?null:s[a]}function ka(s){s[jr]=0}function Fl(s,a){s[zi]+=a;let c=s,f=s[vr];for(;null!==f&&(1===a&&1===c[zi]||-1===a&&0===c[zi]);)f[zi]+=a,c=f,f=f[vr]}const Dn={lFrame:au(null),bindingsEnabled:!0};function Jo(){return Dn.bindingsEnabled}function dt(){return Dn.lFrame.lView}function ir(){return Dn.lFrame.tView}function ol(s){return Dn.lFrame.contextLView=s,s[Gr]}function mo(s){return Dn.lFrame.contextLView=null,s}function Mi(){let s=La();for(;null!==s&&64===s.type;)s=s.parent;return s}function La(){return Dn.lFrame.currentTNode}function ma(){const s=Dn.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function Qi(s,a){const c=Dn.lFrame;c.currentTNode=s,c.isParent=a}function Ua(){return Dn.lFrame.isParent}function _a(){Dn.lFrame.isParent=!1}function Jr(){const s=Dn.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Si(){return Dn.lFrame.bindingIndex}function ea(){return Dn.lFrame.bindingIndex++}function Ji(s){const a=Dn.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function Ba(s){Dn.lFrame.inI18n=s}function Ul(s,a){const c=Dn.lFrame;c.bindingIndex=c.bindingRootIndex=s,_o(a)}function _o(s){Dn.lFrame.currentDirectiveIndex=s}function yo(){return Dn.lFrame.currentQueryIndex}function ba(s){Dn.lFrame.currentQueryIndex=s}function Va(s){const a=s[Qt];return 2===a.type?a.declTNode:1===a.type?s[br]:null}function wa(s,a,c){if(c&Ut.SkipSelf){let g=a,y=s;for(;!(g=g.parent,null!==g||c&Ut.Host||(g=Va(y),null===g||(y=y[Ro],10&g.type))););if(null===g)return!1;a=g,s=y}const f=Dn.lFrame=ul();return f.currentTNode=a,f.lView=s,!0}function Ga(s){const a=ul(),c=s[Qt];Dn.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function ul(){const s=Dn.lFrame,a=null===s?null:s.child;return null===a?au(s):a}function au(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function vo(){const s=Dn.lFrame;return Dn.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ju=vo;function lu(){const s=vo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function li(){return Dn.lFrame.selectedIndex}function Xr(s){Dn.lFrame.selectedIndex=s}function Hr(){const s=Dn.lFrame;return il(s.tView,s.selectedIndex)}function Bl(){Dn.lFrame.currentNamespace=rl}function cl(s,a){for(let c=a.directiveStart,f=a.directiveEnd;c<f;c++){const y=s.data[c].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:N,ngAfterViewInit:k,ngAfterViewChecked:H,ngOnDestroy:X}=y;I&&(s.contentHooks||(s.contentHooks=[])).push(-c,I),N&&((s.contentHooks||(s.contentHooks=[])).push(c,N),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,N)),k&&(s.viewHooks||(s.viewHooks=[])).push(-c,k),H&&((s.viewHooks||(s.viewHooks=[])).push(c,H),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,H)),null!=X&&(s.destroyHooks||(s.destroyHooks=[])).push(c,X)}}function Ea(s,a,c){L(s,a,3,c)}function R(s,a,c,f){(3&s[Mn])===c&&L(s,a,c,f)}function $(s,a){let c=s[Mn];(3&c)===a&&(c&=2047,c+=1,s[Mn]=c)}function L(s,a,c,f){const y=f??-1,I=a.length-1;let N=0;for(let k=void 0!==f?65535&s[jr]:0;k<I;k++)if("number"==typeof a[k+1]){if(N=a[k],null!=f&&N>=f)break}else a[k]<0&&(s[jr]+=65536),(N<y||-1==y)&&(J(s,c,a,k),s[jr]=(4294901760&s[jr])+k+2),k++}function J(s,a,c,f){const g=c[f]<0,y=c[f+1],N=s[g?-c[f]:c[f]];if(g){if(s[Mn]>>11<s[jr]>>16&&(3&s[Mn])===a){s[Mn]+=2048,mr(4,N,y);try{y.call(N)}finally{mr(5,N,y)}}}else{mr(4,N,y);try{y.call(N)}finally{mr(5,N,y)}}}const ce=-1;class Ve{constructor(a,c,f){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function Ft(s,a,c){let f=0;for(;f<c.length;){const g=c[f];if("number"==typeof g){if(0!==g)break;f++;const y=c[f++],I=c[f++],N=c[f++];s.setAttribute(a,I,N,y)}else{const y=g,I=c[++f];St(y)?s.setProperty(a,y,I):s.setAttribute(a,y,I),f++}}return f}function Ai(s){return 3===s||4===s||6===s}function St(s){return 64===s.charCodeAt(0)}function Ke(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let f=0;f<a.length;f++){const g=a[f];"number"==typeof g?c=g:0===c||_t(s,c,g,null,-1===c||2===c?a[++f]:null)}}return s}function _t(s,a,c,f,g){let y=0,I=s.length;if(-1===a)I=-1;else for(;y<s.length;){const N=s[y++];if("number"==typeof N){if(N===a){I=-1;break}if(N>a){I=y-1;break}}}for(;y<s.length;){const N=s[y];if("number"==typeof N)break;if(N===c){if(null===f)return void(null!==g&&(s[y+1]=g));if(f===s[y+1])return void(s[y+2]=g)}y++,null!==f&&y++,null!==g&&y++}-1!==I&&(s.splice(I,0,a),y=I+1),s.splice(y++,0,c),null!==f&&s.splice(y++,0,f),null!==g&&s.splice(y++,0,g)}function Er(s){return s!==ce}function ys(s){return 32767&s}function ja(s,a){let c=function dl(s){return s>>16}(s),f=a;for(;c>0;)f=f[Ro],c--;return f}let Bo=!0;function Da(s){const a=Bo;return Bo=s,a}const Vo=255,$u=5;let cu=0;const bo={};function On(s,a){const c=du(s,a);if(-1!==c)return c;const f=a[Qt];f.firstCreatePass&&(s.injectorIndex=a.length,Ia(f.data,s),Ia(a,null),Ia(f.blueprint,null));const g=ar(s,a),y=s.injectorIndex;if(Er(g)){const I=ys(g),N=ja(g,a),k=N[Qt].data;for(let H=0;H<8;H++)a[y+H]=N[I+H]|k[I+H]}return a[y+8]=g,y}function Ia(s,a){s.push(0,0,0,0,0,0,0,0,a)}function du(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function ar(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,f=null,g=a;for(;null!==g;){if(f=Wu(g),null===f)return ce;if(c++,g=g[Ro],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return ce}function gn(s,a,c){!function Tl(s,a,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(en)&&(f=c[en]),null==f&&(f=c[en]=cu++);const g=f&Vo;a.data[s+(g>>$u)]|=1<<g}(s,a,c)}function kn(s,a,c){if(c&Ut.Optional||void 0!==s)return s;Mt()}function $a(s,a,c,f){if(c&Ut.Optional&&void 0===f&&(f=null),!(c&(Ut.Self|Ut.Host))){const g=s[ai],y=kr(void 0);try{return g?g.get(a,f,c&Ut.Optional):Yr(a,f,c&Ut.Optional)}finally{kr(y)}}return kn(f,0,c)}function Hn(s,a,c,f=Ut.Default,g){if(null!==s){if(1024&a[Mn]){const I=function to(s,a,c,f,g){let y=s,I=a;for(;null!==y&&null!==I&&1024&I[Mn]&&!(256&I[Mn]);){const N=zt(y,I,c,f|Ut.Self,bo);if(N!==bo)return N;let k=y.parent;if(!k){const H=I[Pe];if(H){const X=H.get(c,bo,f);if(X!==bo)return X}k=Wu(I),I=I[Ro]}y=k}return g}(s,a,c,f,bo);if(I!==bo)return I}const y=zt(s,a,c,f,bo);if(y!==bo)return y}return $a(a,c,f,g)}function zt(s,a,c,f,g){const y=function za(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(en)?s[en]:void 0;return"number"==typeof a?a>=0?a&Vo:zu:a}(c);if("function"==typeof y){if(!wa(a,s,f))return f&Ut.Host?kn(g,0,f):$a(a,c,f,g);try{const I=y(f);if(null!=I||f&Ut.Optional)return I;Mt()}finally{ju()}}else if("number"==typeof y){let I=null,N=du(s,a),k=ce,H=f&Ut.Host?a[Ti][br]:null;for((-1===N||f&Ut.SkipSelf)&&(k=-1===N?ar(s,a):a[N+8],k!==ce&&Gl(f,!1)?(I=a[Qt],N=ys(k),a=ja(k,a)):N=-1);-1!==N;){const X=a[Qt];if(Nr(y,N,X.data)){const ue=wo(N,a,c,I,f,H);if(ue!==bo)return ue}k=a[N+8],k!==ce&&Gl(f,a[Qt].data[N+8]===H)&&Nr(y,N,a)?(I=X,N=ys(k),a=ja(k,a)):N=-1}}return g}function wo(s,a,c,f,g,y){const I=a[Qt],N=I.data[s+8],X=vs(N,I,c,null==f?Ls(N)&&Bo:f!=I&&0!=(3&N.type),g&Ut.Host&&y===N);return null!==X?Vi(a,I,X,N):bo}function vs(s,a,c,f,g){const y=s.providerIndexes,I=a.data,N=1048575&y,k=s.directiveStart,X=y>>20,Me=g?N+X:s.directiveEnd;for(let He=f?N:N+X;He<Me;He++){const Dt=I[He];if(He<k&&c===Dt||He>=k&&Dt.type===c)return He}if(g){const He=I[k];if(He&&Us(He)&&He.type===c)return k}return null}function Vi(s,a,c,f){let g=s[c];const y=a.data;if(function bt(s){return s instanceof Ve}(g)){const I=g;I.resolving&&function ot(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${s}${c}`)}(function ut(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(y[c]));const N=Da(I.canSeeViewProviders);I.resolving=!0;const k=I.injectImpl?kr(I.injectImpl):null;wa(s,f,Ut.Default);try{g=s[c]=I.factory(void 0,y,s,f),a.firstCreatePass&&c>=f.directiveStart&&function uu(s,a,c){const{ngOnChanges:f,ngOnInit:g,ngDoCheck:y}=a.type.prototype;if(f){const I=nl(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,I),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,I)}g&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,g),y&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,y))}(c,y[c],a)}finally{null!==k&&kr(k),Da(N),I.resolving=!1,ju()}}return g}function Nr(s,a,c){return!!(c[a+(s>>$u)]&1<<s)}function Gl(s,a){return!(s&Ut.Self||s&Ut.Host&&a)}class Gi{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,f){return Hn(this._tNode,this._lView,a,rn(f),c)}}function zu(){return new Gi(Mi(),dt())}function Wa(s){return te(()=>{const a=s.prototype.constructor,c=a[pt]||Oi(a),f=Object.prototype;let g=Object.getPrototypeOf(s.prototype).constructor;for(;g&&g!==f;){const y=g[pt]||Oi(g);if(y&&y!==c)return y;g=Object.getPrototypeOf(g)}return y=>new y})}function Oi(s){return Ye(s)?()=>{const a=Oi(Te(s));return a&&a()}:Bi(s)}function Wu(s){const a=s[Qt],c=a.type;return 2===c?a.declTNode:1===c?s[br]:null}function js(s){return function Ha(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const f=c.length;let g=0;for(;g<f;){const y=c[g];if(Ai(y))break;if(0===y)g+=2;else if("number"==typeof y)for(g++;g<f&&"string"==typeof c[g];)g++;else{if(y===a)return c[g+1];g+=2}}}return null}(Mi(),s)}const Go="__parameters__";function Ca(s,a,c){return te(()=>{const f=function Eo(s){return function(...c){if(s){const f=s(...c);for(const g in f)this[g]=f[g]}}}(a);function g(...y){if(this instanceof g)return f.apply(this,y),this;const I=new g(...y);return N.annotation=I,N;function N(k,H,X){const ue=k.hasOwnProperty(Go)?k[Go]:Object.defineProperty(k,Go,{value:[]})[Go];for(;ue.length<=X;)ue.push(null);return(ue[X]=ue[X]||[]).push(I),k}}return c&&(g.prototype=Object.create(c.prototype)),g.prototype.ngMetadataName=s,g.annotationCls=g,g})}class $r{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=wt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ro(s,a){s.forEach(c=>Array.isArray(c)?ro(c,a):a(c))}function pu(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function C(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function S(s,a){const c=[];for(let f=0;f<s;f++)c.push(a);return c}function ee(s,a,c){let f=yt(s,a);return f>=0?s[1|f]=c:(f=~f,function V(s,a,c,f){let g=s.length;if(g==a)s.push(c,f);else if(1===g)s.push(f,s[0]),s[0]=c;else{for(g--,s.push(s[g-1],s[g]);g>a;)s[g]=s[g-2],g--;s[a]=c,s[a+1]=f}}(s,f,a,c)),f}function Ne(s,a){const c=yt(s,a);if(c>=0)return s[1|c]}function yt(s,a){return function qt(s,a,c){let f=0,g=s.length>>c;for(;g!==f;){const y=f+(g-f>>1),I=s[y<<c];if(a===I)return y<<c;I>a?g=y:f=y+1}return~(g<<c)}(s,a,1)}const F=fn(Ca("Optional"),8),Z=fn(Ca("SkipSelf"),4);var Rr=(()=>((Rr=Rr||{})[Rr.Important=1]="Important",Rr[Rr.DashCase=2]="DashCase",Rr))();const Zm=/^>|^->|<!--|-->|--!>|<!-$/g,Vf=/(<|>)/,Hl="\u200b$1\u200b";const mu=new Map;let wh=0;const _d="__ngContext__";function es(s,a){Lr(a)?(s[_d]=a[Os],function ng(s){mu.set(s[Os],s)}(a)):s[_d]=a}let At;function an(s,a){return At(s,a)}function nr(s){const a=s[vr];return gr(a)?a[vr]:a}function zo(s){return Dh(s[Mo])}function Ya(s){return Dh(s[vi])}function Dh(s){for(;null!==s&&!gr(s);)s=s[vi];return s}function ra(s,a,c,f,g){if(null!=f){let y,I=!1;gr(f)?y=f:Lr(f)&&(I=!0,f=f[Ci]);const N=Ur(f);0===s&&null!==c?null==g?t_(a,c,N):Nc(a,c,N,g||null,!0):1===s&&null!==c?Nc(a,c,N,g||null,!0):2===s?sg(a,N,I):3===s&&a.destroyNode(N),null!=y&&function tE(s,a,c,f,g){const y=c[tn];y!==Ur(c)&&ra(a,s,f,y,g);for(let N=Pn;N<c.length;N++){const k=c[N];$f(k[Qt],k,s,a,f,y)}}(a,s,y,c,g)}}function bd(s,a){return s.createText(a)}function _u(s,a,c){s.setValue(a,c)}function Ih(s,a){return s.createComment(function Sc(s){return s.replace(Zm,a=>a.replace(Vf,Hl))}(a))}function Zu(s,a,c){return s.createElement(a,c)}function Qm(s,a){const c=s[wr],f=c.indexOf(a),g=a[vr];512&a[Mn]&&(a[Mn]&=-513,Fl(g,-1)),c.splice(f,1)}function Jm(s,a){if(s.length<=Pn)return;const c=Pn+a,f=s[c];if(f){const g=f[uo];null!==g&&g!==s&&Qm(g,f),a>0&&(s[c-1][vi]=f[vi]);const y=C(s,Pn+a);!function Ac(s,a){$f(s,a,a[Ln],2,null,null),a[Ci]=null,a[br]=null}(f[Qt],f);const I=y[bi];null!==I&&I.detachView(y[Qt]),f[vr]=null,f[vi]=null,f[Mn]&=-65}return f}function Th(s,a){if(!(128&a[Mn])){const c=a[Ln];c.destroyNode&&$f(s,a,c,3,null,null),function Pi(s){let a=s[Mo];if(!a)return Xm(s[Qt],s);for(;a;){let c=null;if(Lr(a))c=a[Mo];else{const f=a[Pn];f&&(c=f)}if(!c){for(;a&&!a[vi]&&a!==s;)Lr(a)&&Xm(a[Qt],a),a=a[vr];null===a&&(a=s),Lr(a)&&Xm(a[Qt],a),c=a&&a[vi]}a=c}}(a)}}function Xm(s,a){if(!(128&a[Mn])){a[Mn]&=-65,a[Mn]|=128,function Sh(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let f=0;f<c.length;f+=2){const g=a[c[f]];if(!(g instanceof Ve)){const y=c[f+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const N=g[y[I]],k=y[I+1];mr(4,N,k);try{k.call(N)}finally{mr(5,N,k)}}else{mr(4,g,y);try{y.call(g)}finally{mr(5,g,y)}}}}}(s,a),function Jy(s,a){const c=s.cleanup,f=a[oi];let g=-1;if(null!==c)for(let y=0;y<c.length-1;y+=2)if("string"==typeof c[y]){const I=c[y+3];I>=0?f[g=I]():f[g=-I].unsubscribe(),y+=2}else{const I=f[g=c[y+1]];c[y].call(I)}if(null!==f){for(let y=g+1;y<f.length;y++)(0,f[y])();a[oi]=null}}(s,a),1===a[Qt].type&&a[Ln].destroy();const c=a[uo];if(null!==c&&gr(a[vr])){c!==a[vr]&&Qm(c,a);const f=a[bi];null!==f&&f.detachView(s)}!function rg(s){mu.delete(s[Os])}(a)}}function Qu(s,a,c){return e_(s,a.parent,c)}function e_(s,a,c){let f=a;for(;null!==f&&40&f.type;)f=(a=f).parent;if(null===f)return c[Ci];{const{componentOffset:g}=f;if(g>-1){const{encapsulation:y}=s.data[f.directiveStart+g];if(y===Q.None||y===Q.Emulated)return null}return pi(f,c)}}function Nc(s,a,c,f,g){s.insertBefore(a,c,f,g)}function t_(s,a,c){s.appendChild(a,c)}function wd(s,a,c,f,g){null!==f?Nc(s,a,c,f,g):t_(s,a,c)}function us(s,a){return s.parentNode(a)}function r_(s,a,c){return Ju(s,a,c)}function i_(s,a,c){return 40&s.type?pi(s,c):null}let s_,Ah,Rc,Xu,Ju=i_;function Sa(s,a){Ju=s,s_=a}function Hf(s,a,c,f){const g=Qu(s,f,a),y=a[Ln],N=r_(f.parent||a[br],f,a);if(null!=g)if(Array.isArray(c))for(let k=0;k<c.length;k++)wd(y,g,c[k],N,!1);else wd(y,g,c,N,!1);void 0!==s_&&s_(y,f,a,c,g)}function Mc(s,a){if(null!==a){const c=a.type;if(3&c)return pi(a,s);if(4&c)return Nl(-1,s[a.index]);if(8&c){const f=a.child;if(null!==f)return Mc(s,f);{const g=s[a.index];return gr(g)?Nl(-1,g):Ur(g)}}if(32&c)return an(a,s)()||Ur(s[a.index]);{const f=o_(s,a);return null!==f?Array.isArray(f)?f[0]:Mc(nr(s[Ti]),f):Mc(s,a.next)}}return null}function o_(s,a){return null!==a?s[Ti][br].projection[a.projection]:null}function Nl(s,a){const c=Pn+s+1;if(c<a.length){const f=a[c],g=f[Qt].firstChild;if(null!==g)return Mc(f,g)}return a[tn]}function sg(s,a,c){const f=us(s,a);f&&function n_(s,a,c,f){s.removeChild(a,c,f)}(s,f,a,c)}function Ed(s,a,c,f,g,y,I){for(;null!=c;){const N=f[c.index],k=c.type;if(I&&0===a&&(N&&es(Ur(N),f),c.flags|=2),32!=(32&c.flags))if(8&k)Ed(s,a,c.child,f,g,y,!1),ra(a,s,g,N,y);else if(32&k){const H=an(c,f);let X;for(;X=H();)ra(a,s,g,X,y);ra(a,s,g,N,y)}else 16&k?lr(s,a,f,c,g,y):ra(a,s,g,N,y);c=I?c.projectionNext:c.next}}function $f(s,a,c,f,g,y){Ed(c,f,s.firstChild,a,g,y,!1)}function lr(s,a,c,f,g,y){const I=c[Ti],k=I[br].projection[f.projection];if(Array.isArray(k))for(let H=0;H<k.length;H++)ra(a,s,g,k[H],y);else Ed(s,a,k,I[vr],g,y,!0)}function Wf(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function xs(s,a,c){const{mergedAttrs:f,classes:g,styles:y}=c;null!==f&&Ft(s,a,f),null!==g&&Wf(s,a,g),null!==y&&function zf(s,a,c){s.setAttribute(a,"style",c)}(s,a,y)}function $l(s){return function Dd(){if(void 0===Ah&&(Ah=null,yn.trustedTypes))try{Ah=yn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ah}()?.createHTML(s)||s}function ab(s){Rc=s}function ag(s){return function ec(){if(void 0===Xu&&(Xu=null,yn.trustedTypes))try{Xu=yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Xu}()?.createScriptURL(s)||s}class lg{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${It})`}}function tc(s){return s instanceof lg?s.changingThisBreaksApplicationSecurity:s}function Td(s,a){const c=function Sd(s){return s instanceof lg&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${It})`)}return c===a}class u_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString($l(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class c_{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=$l(a),c}}const ub=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ug(s){return(s=String(s)).match(ub)?s:"unsafe:"+s}function nc(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function Zf(...s){const a={};for(const c of s)for(const f in c)c.hasOwnProperty(f)&&(a[f]=!0);return a}const rc=nc("area,br,col,hr,img,wbr"),xc=nc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vu=nc("rp,rt"),h_=Zf(rc,Zf(xc,nc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zf(vu,nc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zf(vu,xc)),cg=nc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jf=Zf(cg,nc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Ks=(()=>((Ks=Ks||{})[Ks.NONE=0]="NONE",Ks[Ks.HTML=1]="HTML",Ks[Ks.STYLE=2]="STYLE",Ks[Ks.SCRIPT=3]="SCRIPT",Ks[Ks.URL=4]="URL",Ks[Ks.RESOURCE_URL=5]="RESOURCE_URL",Ks))();function ep(s){const a=bu();return a?a.sanitize(Ks.URL,s)||"":Td(s,"URL")?tc(s):ug(ge(s))}function iv(s){const a=bu();if(a)return ag(a.sanitize(Ks.RESOURCE_URL,s)||"");if(Td(s,"ResourceURL"))return ag(tc(s));throw new Ze(904,!1)}function f_(s,a,c){return function mb(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?iv:ep}(a,c)(s)}function bu(){const s=dt();return s&&s[As]}const qs=new $r("ENVIRONMENT_INITIALIZER"),Od=new $r("INJECTOR",-1),hg=new $r("INJECTOR_DEF_TYPES");class fg{get(a,c=or){if(c===or){const f=new Error(`NullInjectorError: No provider for ${Re(a)}!`);throw f.name="NullInjectorError",f}return c}}function ov(...s){return{\u0275providers:pg(0,s),\u0275fromNgModule:!0}}function pg(s,...a){const c=[],f=new Set;let g;return ro(a,y=>{const I=y;Nh(I,c,[],f)&&(g||(g=[]),g.push(I))}),void 0!==g&&kc(g,c),c}function kc(s,a){for(let c=0;c<s.length;c++){const{providers:g}=s[c];sc(g,y=>{a.push(y)})}}function Nh(s,a,c,f){if(!(s=Te(s)))return!1;let g=null,y=Nn(s);const I=!y&&Xn(s);if(y||I){if(I&&!I.standalone)return!1;g=s}else{const k=s.ngModule;if(y=Nn(k),!y)return!1;g=k}const N=f.has(g);if(I){if(N)return!1;if(f.add(g),I.dependencies){const k="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const H of k)Nh(H,a,c,f)}}else{if(!y)return!1;{if(null!=y.imports&&!N){let H;f.add(g);try{ro(y.imports,X=>{Nh(X,a,c,f)&&(H||(H=[]),H.push(X))})}finally{}void 0!==H&&kc(H,a)}if(!N){const H=Bi(g)||(()=>new g);a.push({provide:g,useFactory:H,deps:ae},{provide:hg,useValue:g,multi:!0},{provide:qs,useValue:()=>Rt(g),multi:!0})}const k=y.providers;null==k||N||sc(k,X=>{a.push(X)})}}return g!==s&&void 0!==s.providers}function sc(s,a){for(let c of s)Je(c)&&(c=c.\u0275providers),Array.isArray(c)?sc(c,a):a(c)}const fr=Ce({provide:String,useValue:Ce});function Nd(s){return null!==s&&"object"==typeof s&&fr in s}function zl(s){return"function"==typeof s}const np=new $r("Set Injector scope."),Rh={},rp={};let Md;function Fc(){return void 0===Md&&(Md=new fg),Md}class Wl{}class Lc extends Wl{get destroyed(){return this._destroyed}constructor(a,c,f,g){super(),this.parent=c,this.source=f,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(a,I=>this.processProvider(I)),this.records.set(Od,xh(void 0,this)),g.has("environment")&&this.records.set(Wl,xh(void 0,this));const y=this.records.get(np);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(hg.multi,ae,Ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Ii(this),f=kr(void 0);try{return a()}finally{Ii(c),kr(f)}}get(a,c=or,f=Ut.Default){this.assertNotDestroyed(),f=rn(f);const g=Ii(this),y=kr(void 0);try{if(!(f&Ut.SkipSelf)){let N=this.records.get(a);if(void 0===N){const k=function Uc(s){return"function"==typeof s||"object"==typeof s&&s instanceof $r}(a)&&Vn(a);N=k&&this.injectableDefInScope(k)?xh(mg(a),Rh):null,this.records.set(a,N)}if(null!=N)return this.hydrate(a,N)}return(f&Ut.Self?Fc():this.parent).get(a,c=f&Ut.Optional&&c===or?null:c)}catch(I){if("NullInjectorError"===I.name){if((I[Ir]=I[Ir]||[]).unshift(Re(a)),g)throw I;return function ve(s,a,c,f){const g=s[Ir];throw a[Kr]&&g.unshift(a[Kr]),s.message=function me(s,a,c,f=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==pn?s.slice(2):s;let g=Re(a);if(Array.isArray(a))g=a.map(Re).join(" -> ");else if("object"==typeof a){let y=[];for(let I in a)if(a.hasOwnProperty(I)){let N=a[I];y.push(I+":"+("string"==typeof N?JSON.stringify(N):Re(N)))}g=`{${y.join(", ")}}`}return`${c}${f?"("+f+")":""}[${g}]: ${s.replace(yr,"\n  ")}`}("\n"+s.message,g,c,f),s[Zr]=g,s[Ir]=null,s}(I,a,"R3InjectorError",this.source)}throw I}finally{kr(y),Ii(g)}}resolveInjectorInitializers(){const a=Ii(this),c=kr(void 0);try{const f=this.get(qs.multi,ae,Ut.Self);for(const g of f)g()}finally{Ii(a),kr(c)}}toString(){const a=[],c=this.records;for(const f of c.keys())a.push(Re(f));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processProvider(a){let c=zl(a=Te(a))?a:Te(a&&a.provide);const f=function lv(s){return Nd(s)?xh(void 0,s.useValue):xh(g_(s),Rh)}(a);if(zl(a)||!0!==a.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=xh(void 0,Rh,!0),g.factory=()=>mn(g.multi),this.records.set(c,g)),c=a,g.multi.push(a)}this.records.set(c,f)}hydrate(a,c){return c.value===Rh&&(c.value=rp,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Rd(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Te(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function mg(s){const a=Vn(s),c=null!==a?a.factory:Bi(s);if(null!==c)return c;if(s instanceof $r)throw new Ze(204,!1);if(s instanceof Function)return function p_(s){const a=s.length;if(a>0)throw S(a,"?"),new Ze(204,!1);const c=function Zn(s){const a=s&&(s[er]||s[Xt]);return a?(function Fn(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),a):null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Ze(204,!1)}function g_(s,a,c){let f;if(zl(s)){const g=Te(s);return Bi(g)||mg(g)}if(Nd(s))f=()=>Te(s.useValue);else if(function gg(s){return!(!s||!s.useFactory)}(s))f=()=>s.useFactory(...mn(s.deps||[]));else if(function tp(s){return!(!s||!s.useExisting)}(s))f=()=>Rt(Te(s.useExisting));else{const g=Te(s&&(s.useClass||s.provide));if(!function ip(s){return!!s.deps}(s))return Bi(g)||mg(g);f=()=>new g(...mn(s.deps))}return f}function xh(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function _g(s,a){for(const c of s)Array.isArray(c)?_g(c,a):c&&Je(c)?_g(c.\u0275providers,a):a(c)}class vb{}class m_{}class __{resolveComponentFactory(a){throw function bb(s){const a=Error(`No component factory found for ${Re(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Bc=(()=>{class s{}return s.NULL=new __,s})();function vg(){return Vc(Mi(),dt())}function Vc(s,a){return new oc(pi(s,a))}let oc=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=vg,s})();function wb(s){return s instanceof oc?s.nativeElement:s}class sp{}let bg=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Eb(){const s=dt(),c=gi(Mi().index,s);return(Lr(c)?c:s)[Ln]}(),s})(),Db=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class op{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const wg=new op("15.2.4"),Ph={},y_="ngOriginalError";function Aa(s){return s[y_]}class ap{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Aa(a);for(;c&&Aa(c);)c=Aa(c);return c||null}}function _l(s){return s instanceof Function?s():s}function ji(s,a,c){let f=s.length;for(;;){const g=s.indexOf(a,c);if(-1===g)return g;if(0===g||s.charCodeAt(g-1)<=32){const y=a.length;if(g+y===f||s.charCodeAt(g+y)<=32)return g}c=g+1}}const kd="ng-template";function w_(s,a,c){let f=0,g=!0;for(;f<s.length;){let y=s[f++];if("string"==typeof y&&g){const I=s[f++];if(c&&"class"===y&&-1!==ji(I.toLowerCase(),a,0))return!0}else{if(1===y){for(;f<s.length&&"string"==typeof(y=s[f++]);)if(y.toLowerCase()===a)return!0;return!1}"number"==typeof y&&(g=!1)}}return!1}function Eg(s){return 4===s.type&&s.value!==kd}function dv(s,a,c){return a===(4!==s.type||c?s.value:kd)}function Ob(s,a,c){let f=4;const g=s.attrs||[],y=function E_(s){for(let a=0;a<s.length;a++)if(Ai(s[a]))return a;return s.length}(g);let I=!1;for(let N=0;N<a.length;N++){const k=a[N];if("number"!=typeof k){if(!I)if(4&f){if(f=2|1&f,""!==k&&!dv(s,k,c)||""===k&&1===a.length){if(Za(f))return!1;I=!0}}else{const H=8&f?k:a[++N];if(8&f&&null!==s.attrs){if(!w_(s.attrs,H,c)){if(Za(f))return!1;I=!0}continue}const ue=Fh(8&f?"class":k,g,Eg(s),c);if(-1===ue){if(Za(f))return!1;I=!0;continue}if(""!==H){let Me;Me=ue>y?"":g[ue+1].toLowerCase();const He=8&f?Me:null;if(He&&-1!==ji(He,H,0)||2&f&&H!==Me){if(Za(f))return!1;I=!0}}}}else{if(!I&&!Za(f)&&!Za(k))return!1;if(I&&Za(k))continue;I=!1,f=k|1&f}}return Za(f)||I}function Za(s){return 0==(1&s)}function Fh(s,a,c,f){if(null===a)return-1;let g=0;if(f||!c){let y=!1;for(;g<a.length;){const I=a[g];if(I===s)return g;if(3===I||6===I)y=!0;else{if(1===I||2===I){let N=a[++g];for(;"string"==typeof N;)N=a[++g];continue}if(4===I)break;if(0===I){g+=4;continue}}g+=y?1:2}return-1}return function Nb(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const f=s[c];if("number"==typeof f)return-1;if(f===a)return c;c++}return-1}(a,s)}function Eu(s,a,c=!1){for(let f=0;f<a.length;f++)if(Ob(s,a[f],c))return!0;return!1}function hv(s,a){e:for(let c=0;c<a.length;c++){const f=a[c];if(s.length===f.length){for(let g=0;g<s.length;g++)if(s[g]!==f[g])continue e;return!0}}return!1}function fv(s,a){return s?":not("+a.trim()+")":a}function Mb(s){let a=s[0],c=1,f=2,g="",y=!1;for(;c<s.length;){let I=s[c];if("string"==typeof I)if(2&f){const N=s[++c];g+="["+I+(N.length>0?'="'+N+'"':"")+"]"}else 8&f?g+="."+I:4&f&&(g+=" "+I);else""!==g&&!Za(I)&&(a+=fv(y,g),g=""),f=I,y=y||!Za(f);c++}return""!==g&&(a+=fv(y,g)),a}const Jn={};function dp(s){D_(ir(),dt(),li()+s,!1)}function D_(s,a,c,f){if(!f)if(3==(3&a[Mn])){const y=s.preOrderCheckHooks;null!==y&&Ea(a,y,c)}else{const y=s.preOrderHooks;null!==y&&R(a,y,0,c)}Xr(c)}function Ig(s,a=null,c=null,f){const g=C_(s,a,c,f);return g.resolveInjectorInitializers(),g}function C_(s,a=null,c=null,f,g=new Set){const y=[c||ae,ov(s)];return f=f||("object"==typeof s?void 0:Re(s)),new Lc(y,a||Fc(),f||null,g)}let Hc=(()=>{class s{static create(c,f){if(Array.isArray(c))return Ig({name:""},f,c,"");{const g=c.name??"";return Ig({name:g},c.parent,c.providers,g)}}}return s.THROW_IF_NOT_FOUND=or,s.NULL=new fg,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>Rt(Od)}),s.__NG_ELEMENT_ID__=-1,s})();function Gh(s,a=Ut.Default){const c=dt();return null===c?Rt(s,a):Hn(Mi(),c,Te(s),a)}function Sg(){throw new Error("invalid")}function Hh(s,a){const c=s.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const y=c[f+1];if(-1!==y){const I=s.data[y];ba(c[f]),I.contentQueries(2,a[y],y)}}}function oo(s,a,c,f,g,y,I,N,k,H,X){const ue=a.blueprint.slice();return ue[Ci]=g,ue[Mn]=76|f,(null!==X||s&&1024&s[Mn])&&(ue[Mn]|=1024),ka(ue),ue[vr]=ue[Ro]=s,ue[Gr]=c,ue[xa]=I||s&&s[xa],ue[Ln]=N||s&&s[Ln],ue[As]=k||s&&s[As]||null,ue[ai]=H||s&&s[ai]||null,ue[br]=y,ue[Os]=function Gf(){return wh++}(),ue[Pe]=X,ue[Ti]=2==a.type?s[Ti]:ue,ue}function zc(s,a,c,f,g){let y=s.data[a];if(null===y)y=gp(s,a,c,f,g),function Uo(){return Dn.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=c,y.value=f,y.attrs=g;const I=ma();y.injectorIndex=null===I?-1:I.injectorIndex}return Qi(y,!0),y}function gp(s,a,c,f,g){const y=La(),I=Ua(),k=s.data[a]=function Rg(s,a,c,f,g,y){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,c,a,f,g);return null===s.firstChild&&(s.firstChild=k),null!==y&&(I?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k,k.prev=y)),k}function Bd(s,a,c,f){if(0===c)return-1;const g=a.length;for(let y=0;y<c;y++)a.push(f),s.blueprint.push(f),s.data.push(null);return g}function Wc(s,a,c){Ga(a);try{const f=s.viewQuery;null!==f&&Gd(1,f,c);const g=s.template;null!==g&&Ag(s,a,g,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hh(s,a),s.staticViewQueries&&Gd(2,s.viewQuery,c);const y=s.components;null!==y&&function Ub(s,a){for(let c=0;c<a.length;c++)$b(s,a[c])}(a,y)}catch(f){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),f}finally{a[Mn]&=-5,lu()}}function $h(s,a,c,f){const g=a[Mn];if(128!=(128&g)){Ga(a);try{ka(a),function Xo(s){return Dn.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Ag(s,a,c,2,f);const I=3==(3&g);if(I){const H=s.preOrderCheckHooks;null!==H&&Ea(a,H,null)}else{const H=s.preOrderHooks;null!==H&&R(a,H,0,null),$(a,0)}if(function Vg(s){for(let a=zo(s);null!==a;a=Ya(a)){if(!a[Lt])continue;const c=a[wr];for(let f=0;f<c.length;f++){const g=c[f];512&g[Mn]||Fl(g[vr],1),g[Mn]|=512}}}(a),function jb(s){for(let a=zo(s);null!==a;a=Ya(a))for(let c=Pn;c<a.length;c++){const f=a[c],g=f[Qt];sl(f)&&$h(g,f,g.template,f[Gr])}}(a),null!==s.contentQueries&&Hh(s,a),I){const H=s.contentCheckHooks;null!==H&&Ea(a,H)}else{const H=s.contentHooks;null!==H&&R(a,H,1),$(a,1)}!function jh(s,a){const c=s.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const g=c[f];if(g<0)Xr(~g);else{const y=g,I=c[++f],N=c[++f];Ul(I,y),N(2,a[y])}}}finally{Xr(-1)}}(s,a);const N=s.components;null!==N&&function Iv(s,a){for(let c=0;c<a.length;c++)Hb(s,a[c])}(a,N);const k=s.viewQuery;if(null!==k&&Gd(2,k,f),I){const H=s.viewCheckHooks;null!==H&&Ea(a,H)}else{const H=s.viewHooks;null!==H&&R(a,H,2),$(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Mn]&=-41,512&a[Mn]&&(a[Mn]&=-513,Fl(a[vr],-1))}finally{lu()}}}function Ag(s,a,c,f,g){const y=li(),I=2&f;try{Xr(-1),I&&a.length>_e&&D_(s,a,_e,!1),mr(I?2:0,g),c(f,g)}finally{Xr(y),mr(I?3:1,g)}}function Og(s,a,c){if(Fs(a)){const g=a.directiveEnd;for(let y=a.directiveStart;y<g;y++){const I=s.data[y];I.contentQueries&&I.contentQueries(1,c[y],y)}}}function Ng(s,a,c){Jo()&&(function Vb(s,a,c,f){const g=c.directiveStart,y=c.directiveEnd;Ls(c)&&function Nv(s,a,c){const f=pi(a,s),g=N_(c),y=s[xa],I=vp(s,oo(s,g,null,c.onPush?32:16,f,a,y,y.createRenderer(f,c),null,null,null));s[a.index]=I}(a,c,s.data[g+c.componentOffset]),s.firstCreatePass||On(c,a),es(f,a);const I=c.initialInputs;for(let N=g;N<y;N++){const k=s.data[N],H=Vi(a,s,N,c);es(H,a),null!==I&&k_(0,N-g,H,k,0,I),Us(k)&&(gi(c.index,a)[Gr]=Vi(a,s,N,c))}}(s,a,c,pi(c,a)),64==(64&c.flags)&&Fg(s,a,c))}function Mg(s,a,c=pi){const f=a.localNames;if(null!==f){let g=a.index+1;for(let y=0;y<f.length;y+=2){const I=f[y+1],N=-1===I?c(a,s):s[I];s[g++]=N}}}function N_(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=zh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function zh(s,a,c,f,g,y,I,N,k,H){const X=_e+f,ue=X+g,Me=function Cv(s,a){const c=[];for(let f=0;f<a;f++)c.push(f<s?null:Jn);return c}(X,ue),He="function"==typeof H?H():H;return Me[Qt]={type:s,blueprint:Me,template:c,queries:null,viewQuery:N,declTNode:a,data:Me.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:k,consts:He,incompleteFirstPass:!1}}function mp(s,a,c,f){const g=wp(a);null===c?g.push(f):(g.push(c),s.firstCreatePass&&jd(s).push(f,g.length-1))}function Vd(s,a,c,f){for(let g in s)if(s.hasOwnProperty(g)){c=null===c?{}:c;const y=s[g];null===f?xg(c,a,g,y):f.hasOwnProperty(g)&&xg(c,a,f[g],y)}return c}function xg(s,a,c,f){s.hasOwnProperty(c)?s[c].push(a,f):s[c]=[a,f]}function ia(s,a,c,f,g,y,I,N){const k=pi(a,c);let X,H=a.inputs;!N&&null!=H&&(X=H[f])?(Hd(s,c,X,f,g),Ls(a)&&M_(c,a.index)):3&a.type&&(f=function _p(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(f),g=null!=I?I(g,a.value||"",f):g,y.setProperty(k,f,g))}function M_(s,a){const c=gi(a,s);16&c[Mn]||(c[Mn]|=32)}function Du(s,a,c,f){if(Jo()){const g=null===f?null:{"":-1},y=function R_(s,a){const c=s.directiveRegistry;let f=null,g=null;if(c)for(let y=0;y<c.length;y++){const I=c[y];if(Eu(a,I.selectors,!1))if(f||(f=[]),Us(I))if(null!==I.findHostDirectiveDefs){const N=[];g=g||new Map,I.findHostDirectiveDefs(I,N,g),f.unshift(...N,I),Wh(s,a,N.length)}else f.unshift(I),Wh(s,a,0);else g=g||new Map,I.findHostDirectiveDefs?.(I,f,g),f.push(I)}return null===f?null:[f,g]}(s,c);let I,N;null===y?I=N=null:[I,N]=y,null!==I&&Av(s,a,c,I,g,N),g&&function Lg(s,a,c){if(a){const f=s.localNames=[];for(let g=0;g<a.length;g+=2){const y=c[a[g+1]];if(null==y)throw new Ze(-301,!1);f.push(a[g],y)}}}(c,f,g)}c.mergedAttrs=Ke(c.mergedAttrs,c.attrs)}function Av(s,a,c,f,g,y){for(let H=0;H<f.length;H++)gn(On(c,a),s,f[H].type);!function Kh(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,f.length);for(let H=0;H<f.length;H++){const X=f[H];X.providersResolver&&X.providersResolver(X)}let I=!1,N=!1,k=Bd(s,a,f.length,null);for(let H=0;H<f.length;H++){const X=f[H];c.mergedAttrs=Ke(c.mergedAttrs,X.hostAttrs),P_(s,c,a,k,X),x_(k,X,g),null!==X.contentQueries&&(c.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(c.flags|=64);const ue=X.type.prototype;!I&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),I=!0),!N&&(ue.ngOnChanges||ue.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),N=!0),k++}!function Pg(s,a,c){const g=a.directiveEnd,y=s.data,I=a.attrs,N=[];let k=null,H=null;for(let X=a.directiveStart;X<g;X++){const ue=y[X],Me=c?c.get(ue):null,Dt=Me?Me.outputs:null;k=Vd(ue.inputs,X,k,Me?Me.inputs:null),H=Vd(ue.outputs,X,H,Dt);const jt=null===k||null===I||Eg(a)?null:Gb(k,X,I);N.push(jt)}null!==k&&(k.hasOwnProperty("class")&&(a.flags|=8),k.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=N,a.inputs=k,a.outputs=H}(s,c,y)}function Fg(s,a,c){const f=c.directiveStart,g=c.directiveEnd,y=c.index,I=function ya(){return Dn.lFrame.currentDirectiveIndex}();try{Xr(y);for(let N=f;N<g;N++){const k=s.data[N],H=a[N];_o(N),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Ov(k,H)}}finally{Xr(-1),_o(I)}}function Ov(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Wh(s,a,c){a.componentOffset=c,(s.components||(s.components=[])).push(a.index)}function x_(s,a,c){if(c){if(a.exportAs)for(let f=0;f<a.exportAs.length;f++)c[a.exportAs[f]]=s;Us(a)&&(c[""]=s)}}function P_(s,a,c,f,g){s.data[f]=g;const y=g.factory||(g.factory=Bi(g.type)),I=new Ve(y,Us(g),Gh);s.blueprint[f]=I,c[f]=I,function lE(s,a,c,f,g){const y=g.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const N=~a.index;(function kg(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(I)!=N&&I.push(N),I.push(c,f,y)}}(s,a,f,Bd(s,c,g.hostVars,Jn),g)}function Ug(s,a,c,f,g,y,I){if(null==y)s.removeAttribute(a,g,c);else{const N=null==I?ge(y):I(y,f||"",g);s.setAttribute(a,g,N,c)}}function k_(s,a,c,f,g,y){const I=y[a];if(null!==I){const N=f.setInput;for(let k=0;k<I.length;){const H=I[k++],X=I[k++],ue=I[k++];null!==N?f.setInput(c,ue,H,X):c[X]=ue}}}function Gb(s,a,c){let f=null,g=0;for(;g<c.length;){const y=c[g];if(0!==y)if(5!==y){if("number"==typeof y)break;if(s.hasOwnProperty(y)){null===f&&(f=[]);const I=s[y];for(let N=0;N<I.length;N+=2)if(I[N]===a){f.push(y,I[N+1],c[g+1]);break}}g+=2}else g+=2;else g+=4}return f}function Bg(s,a,c,f){return[s,!0,!1,a,null,0,f,c,null,null]}function Hb(s,a){const c=gi(a,s);if(sl(c)){const f=c[Qt];48&c[Mn]?$h(f,c,f.template,c[Gr]):c[zi]>0&&yp(c)}}function yp(s){for(let f=zo(s);null!==f;f=Ya(f))for(let g=Pn;g<f.length;g++){const y=f[g];if(sl(y))if(512&y[Mn]){const I=y[Qt];$h(I,y,I.template,y[Gr])}else y[zi]>0&&yp(y)}const c=s[Qt].components;if(null!==c)for(let f=0;f<c.length;f++){const g=gi(c[f],s);sl(g)&&g[zi]>0&&yp(g)}}function $b(s,a){const c=gi(a,s),f=c[Qt];(function F_(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])})(f,c),Wc(f,c,c[Gr])}function vp(s,a){return s[Mo]?s[Yo][vi]=a:s[Mo]=a,s[Yo]=a,a}function qh(s){for(;s;){s[Mn]|=32;const a=nr(s);if(Xa(s)&&!a)return s;s=a}return null}function bp(s,a,c,f=!0){const g=a[xa];g.begin&&g.begin();try{$h(s,a,s.template,c)}catch(I){throw f&&Mv(a,I),I}finally{g.end&&g.end()}}function Gd(s,a,c){ba(0),a(s,c)}function wp(s){return s[oi]||(s[oi]=[])}function jd(s){return s.cleanup||(s.cleanup=[])}function Mv(s,a){const c=s[ai],f=c?c.get(ap,null):null;f&&f.handleError(a)}function Hd(s,a,c,f,g){for(let y=0;y<c.length;){const I=c[y++],N=c[y++],k=a[I],H=s.data[I];null!==H.setInput?H.setInput(k,g,f,N):k[N]=g}}function L_(s,a,c){let f=c?s.styles:null,g=c?s.classes:null,y=0;if(null!==a)for(let I=0;I<a.length;I++){const N=a[I];"number"==typeof N?y=N:1==y?g=De(g,N):2==y&&(f=De(f,N+": "+a[++I]+";"))}c?s.styles=f:s.stylesWithoutHost=f,c?s.classes=g:s.classesWithoutHost=g}function Ep(s,a,c,f,g=!1){for(;null!==c;){const y=a[c.index];if(null!==y&&f.push(Ur(y)),gr(y))for(let N=Pn;N<y.length;N++){const k=y[N],H=k[Qt].firstChild;null!==H&&Ep(k[Qt],k,H,f)}const I=c.type;if(8&I)Ep(s,a,c.child,f);else if(32&I){const N=an(c,a);let k;for(;k=N();)f.push(k)}else if(16&I){const N=o_(a,c);if(Array.isArray(N))f.push(...N);else{const k=nr(a[Ti]);Ep(k[Qt],k,N,f,!0)}}c=g?c.projectionNext:c.next}return f}class Qh{get rootNodes(){const a=this._lView,c=a[Qt];return Ep(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gr]}set context(a){this._lView[Gr]=a}get destroyed(){return 128==(128&this._lView[Mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[vr];if(gr(a)){const c=a[An],f=c?c.indexOf(this):-1;f>-1&&(Jm(a,f),C(c,f))}this._attachedToViewContainer=!1}Th(this._lView[Qt],this._lView)}onDestroy(a){mp(this._lView[Qt],this._lView,null,a)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Mn]&=-65}reattach(){this._lView[Mn]|=64}detectChanges(){bp(this._lView[Qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ig(s,a){$f(s,a,a[Ln],2,null,null)}(this._lView[Qt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ze(902,!1);this._appRef=a}}class Rv extends Qh{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;bp(a[Qt],a,a[Gr],!1)}checkNoChanges(){}get context(){return null}}class Dp extends Bc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Xn(a);return new Jh(c,this.ngModule)}}function Wb(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class xv{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,f){f=rn(f);const g=this.injector.get(a,Ph,f);return g!==Ph||c===Ph?g:this.parentInjector.get(a,c,f)}}class Jh extends m_{get inputs(){return Wb(this.componentDef.inputs)}get outputs(){return Wb(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Gc(s){return s.map(Mb).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,f,g){let y=(g=g||this.ngModule)instanceof Wl?g:g?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const I=y?new xv(a,y):a,N=I.get(sp,null);if(null===N)throw new Ze(407,!1);const k=I.get(Db,null),H=N.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ue=f?function Tv(s,a,c){return s.selectRootElement(a,c===Q.ShadowDom)}(H,f,this.componentDef.encapsulation):Zu(H,X,function uE(s){const a=s.toLowerCase();return"svg"===a?rl:"math"===a?"math":null}(X)),Me=this.componentDef.onPush?288:272,He=zh(0,null,null,1,0,null,null,null,null,null),Dt=oo(null,He,null,Me,null,null,N,H,k,I,null);let jt,sn;Ga(Dt);try{const vn=this.componentDef;let Yn,xt=null;vn.findHostDirectiveDefs?(Yn=[],xt=new Map,vn.findHostDirectiveDefs(vn,Yn,xt),Yn.push(vn)):Yn=[vn];const ur=function hE(s,a){const c=s[Qt],f=_e;return s[f]=a,zc(c,f,2,"#host",null)}(Dt,ue),Ss=function Kb(s,a,c,f,g,y,I,N){const k=g[Qt];!function U_(s,a,c,f){for(const g of s)a.mergedAttrs=Ke(a.mergedAttrs,g.hostAttrs);null!==a.mergedAttrs&&(L_(a,a.mergedAttrs,!0),null!==c&&xs(f,c,a))}(f,s,a,I);const H=y.createRenderer(a,c),X=oo(g,N_(c),null,c.onPush?32:16,g[s.index],s,y,H,N||null,null,null);return k.firstCreatePass&&Wh(k,s,f.length-1),vp(g,X),g[s.index]=X}(ur,ue,vn,Yn,Dt,N,H);sn=il(He,_e),ue&&function kv(s,a,c,f){if(f)Ft(s,c,["ng-version",wg.full]);else{const{attrs:g,classes:y}=function ns(s){const a=[],c=[];let f=1,g=2;for(;f<s.length;){let y=s[f];if("string"==typeof y)2===g?""!==y&&a.push(y,s[++f]):8===g&&c.push(y);else{if(!Za(g))break;g=y}f++}return{attrs:a,classes:c}}(a.selectors[0]);g&&Ft(s,c,g),y&&y.length>0&&Wf(s,c,y.join(" "))}}(H,vn,ue,f),void 0!==c&&function lc(s,a,c){const f=s.projection=[];for(let g=0;g<a.length;g++){const y=c[g];f.push(null!=y?Array.from(y):null)}}(sn,this.ngContentSelectors,c),jt=function Pv(s,a,c,f,g,y){const I=Mi(),N=g[Qt],k=pi(I,g);Av(N,g,I,c,null,f);for(let X=0;X<c.length;X++)es(Vi(g,N,I.directiveStart+X,I),g);Fg(N,g,I),k&&es(k,g);const H=Vi(g,N,I.directiveStart+I.componentOffset,I);if(s[Gr]=g[Gr]=H,null!==y)for(const X of y)X(H,a);return Og(N,I,s),H}(Ss,vn,Yn,xt,Dt,[uc]),Wc(He,Dt,null)}finally{lu()}return new cE(this.componentType,jt,Vc(sn,Dt),Dt,sn)}}class cE extends vb{constructor(a,c,f,g,y){super(),this.location=f,this._rootLView=g,this._tNode=y,this.instance=c,this.hostView=this.changeDetectorRef=new Rv(g),this.componentType=a}setInput(a,c){const f=this._tNode.inputs;let g;if(null!==f&&(g=f[a])){const y=this._rootLView;Hd(y[Qt],y,g,a,c),M_(y,this._tNode.index)}}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function uc(){const s=Mi();cl(dt()[Qt],s)}function sa(s){let a=function Fv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const f=[s];for(;a;){let g;if(Us(s))g=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ze(903,!1);g=a.\u0275dir}if(g){if(c){f.push(g);const I=s;I.inputs=cc(s.inputs),I.declaredInputs=cc(s.declaredInputs),I.outputs=cc(s.outputs);const N=g.hostBindings;N&&dc(s,N);const k=g.viewQuery,H=g.contentQueries;if(k&&Cu(s,k),H&&le(s,H),Fe(s.inputs,g.inputs),Fe(s.declaredInputs,g.declaredInputs),Fe(s.outputs,g.outputs),Us(g)&&g.data.animation){const X=s.data;X.animation=(X.animation||[]).concat(g.data.animation)}}const y=g.features;if(y)for(let I=0;I<y.length;I++){const N=y[I];N&&N.ngInherit&&N(s),N===sa&&(c=!1)}}a=Object.getPrototypeOf(a)}!function Gg(s){let a=0,c=null;for(let f=s.length-1;f>=0;f--){const g=s[f];g.hostVars=a+=g.hostVars,g.hostAttrs=Ke(g.hostAttrs,c=Ke(c,g.hostAttrs))}}(f)}function cc(s){return s===xe?{}:s===ae?[]:s}function Cu(s,a){const c=s.viewQuery;s.viewQuery=c?(f,g)=>{a(f,g),c(f,g)}:a}function le(s,a){const c=s.contentQueries;s.contentQueries=c?(f,g,y)=>{a(f,g,y),c(f,g,y)}:a}function dc(s,a){const c=s.hostBindings;s.hostBindings=c?(f,g)=>{a(f,g),c(f,g)}:a}function ef(s){return!!Ip(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Ip(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function oa(s,a,c){return s[a]=c}function Co(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function $d(s,a,c,f){const g=Co(s,a,c);return Co(s,a+1,f)||g}function Cp(s,a,c,f){const g=dt();return Co(g,ea(),a)&&(ir(),function Iu(s,a,c,f,g,y){const I=pi(s,a);Ug(a[Ln],I,y,s.value,c,f,g)}(Hr(),g,s,a,c,f)),Cp}function yl(s,a,c,f){return Co(s,ea(),c)?a+ge(c)+f:Jn}function Tp(s,a,c,f,g,y,I,N){const k=dt(),H=ir(),X=s+_e,ue=H.firstCreatePass?function Au(s,a,c,f,g,y,I,N,k){const H=a.consts,X=zc(a,s,4,I||null,Zi(H,N));Du(a,c,X,Zi(H,k)),cl(a,X);const ue=X.tView=zh(2,X,f,g,y,a.directiveRegistry,a.pipeRegistry,null,a.schemas,H);return null!==a.queries&&(a.queries.template(a,X),ue.queries=a.queries.embeddedTView(X)),X}(X,H,k,a,c,f,g,y,I):H.data[X];Qi(ue,!1);const Me=k[Ln].createComment("");Hf(H,k,Me,ue),es(Me,k),vp(k,k[X]=Bg(Me,k,Me,ue)),Wi(ue)&&Ng(H,k,ue),null!=I&&Mg(k,ue,N)}function lf(s){return Gs(function eo(){return Dn.lFrame.contextLView}(),_e+s)}function qg(s,a,c){const f=dt();return Co(f,ea(),a)&&ia(ir(),Hr(),f,s,a,f[Ln],c,!1),qg}function $_(s,a,c,f,g){const I=g?"class":"style";Hd(s,c,a.inputs[I],I,f)}function Sp(s,a,c,f){const g=dt(),y=ir(),I=_e+s,N=g[Ln],k=y.firstCreatePass?function z_(s,a,c,f,g,y){const I=a.consts,k=zc(a,s,2,f,Zi(I,g));return Du(a,c,k,Zi(I,y)),null!==k.attrs&&L_(k,k.attrs,!1),null!==k.mergedAttrs&&L_(k,k.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,k),k}(I,y,g,a,c,f):y.data[I],H=g[I]=Zu(N,a,function Vl(){return Dn.lFrame.currentNamespace}()),X=Wi(k);return Qi(k,!0),xs(N,H,k),32!=(32&k.flags)&&Hf(y,g,H,k),0===function Il(){return Dn.lFrame.elementDepthCount}()&&es(H,g),function ga(){Dn.lFrame.elementDepthCount++}(),X&&(Ng(y,g,k),Og(y,k,g)),null!==f&&Mg(g,k),Sp}function qd(){let s=Mi();Ua()?_a():(s=s.parent,Qi(s,!1));const a=s;!function Ll(){Dn.lFrame.elementDepthCount--}();const c=ir();return c.firstCreatePass&&(cl(c,s),Fs(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function dn(s){return 0!=(8&s.flags)}(a)&&$_(c,a,dt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function jn(s){return 0!=(16&s.flags)}(a)&&$_(c,a,dt(),a.stylesWithoutHost,!1),qd}function W_(s,a,c,f){return Sp(s,a,c,f),qd(),W_}function Yg(s,a,c){const f=dt(),g=ir(),y=s+_e,I=g.firstCreatePass?function Zb(s,a,c,f,g){const y=a.consts,I=Zi(y,f),N=zc(a,s,8,"ng-container",I);return null!==I&&L_(N,I,!0),Du(a,c,N,Zi(y,g)),null!==a.queries&&a.queries.elementStart(a,N),N}(y,g,f,a,c):g.data[y];Qi(I,!0);const N=f[y]=f[Ln].createComment("");return Hf(g,f,N,I),es(N,f),Wi(I)&&(Ng(g,f,I),Og(g,I,f)),null!=c&&Mg(f,I),Yg}function Zg(){let s=Mi();const a=ir();return Ua()?_a():(s=s.parent,Qi(s,!1)),a.firstCreatePass&&(cl(a,s),Fs(s)&&a.queries.elementEnd(s)),Zg}function uf(){return dt()}function cf(s){return!!s&&"function"==typeof s.then}function Ap(s){return!!s&&"function"==typeof s.subscribe}const Qg=Ap;function df(s,a,c,f){const g=dt(),y=ir(),I=Mi();return function q_(s,a,c,f,g,y,I){const N=Wi(f),H=s.firstCreatePass&&jd(s),X=a[Gr],ue=wp(a);let Me=!0;if(3&f.type||I){const jt=pi(f,a),sn=I?I(jt):jt,vn=ue.length,Yn=I?ur=>I(Ur(ur[f.index])):f.index;let xt=null;if(!I&&N&&(xt=function K_(s,a,c,f){const g=s.cleanup;if(null!=g)for(let y=0;y<g.length-1;y+=2){const I=g[y];if(I===c&&g[y+1]===f){const N=a[oi],k=g[y+2];return N.length>k?N[k]:null}"string"==typeof I&&(y+=2)}return null}(s,a,g,f.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=y,xt.__ngLastListenerFn__=y,Me=!1;else{y=vl(f,a,X,y,!1);const ur=c.listen(sn,g,y);ue.push(y,ur),H&&H.push(g,Yn,vn,vn+1)}}else y=vl(f,a,X,y,!1);const He=f.outputs;let Dt;if(Me&&null!==He&&(Dt=He[g])){const jt=Dt.length;if(jt)for(let sn=0;sn<jt;sn+=2){const Ss=a[Dt[sn]][Dt[sn+1]].subscribe(y),ao=ue.length;ue.push(y,Ss),H&&H.push(g,f.index,ao,-(ao+1))}}}(y,g,g[Ln],I,s,a,f),df}function Op(s,a,c,f){try{return mr(6,a,c),!1!==c(f)}catch(g){return Mv(s,g),!1}finally{mr(7,a,c)}}function vl(s,a,c,f,g){return function y(I){if(I===Function)return f;qh(s.componentOffset>-1?gi(s.index,a):a);let k=Op(a,c,f,I),H=y.__ngNextListenerFn__;for(;H;)k=Op(a,c,H,I)&&k,H=H.__ngNextListenerFn__;return g&&!1===k&&(I.preventDefault(),I.returnValue=!1),k}}function ff(s=1){return function Cl(s){return(Dn.lFrame.contextLView=function Hu(s,a){for(;s>0;)a=a[Ro],s--;return a}(s,Dn.lFrame.contextLView))[Gr]}(s)}function Gv(s,a){let c=null;const f=function cp(s){const a=s.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(s);for(let g=0;g<a.length;g++){const y=a[g];if("*"!==y){if(null===f?Eu(s,y,!0):hv(f,y))return g}else c=g}return c}function Yd(s){const a=dt()[Ti][br];if(!a.projection){const f=a.projection=S(s?s.length:1,null),g=f.slice();let y=a.child;for(;null!==y;){const I=s?Gv(y,s):0;null!==I&&(g[I]?g[I].projectionNext=y:f[I]=y,g[I]=y),y=y.next}}}function Np(s,a=0,c){const f=dt(),g=ir(),y=zc(g,_e+s,16,null,c||null);null===y.projection&&(y.projection=a),_a(),32!=(32&y.flags)&&function ob(s,a,c){lr(a[Ln],0,a,c,Qu(s,c,a),r_(c.parent||a[br],c,a))}(g,f,y)}function Y_(s,a,c){return To(s,"",a,"",c),Y_}function To(s,a,c,f,g){const y=dt(),I=yl(y,a,c,f);return I!==Jn&&ia(ir(),Hr(),y,s,I,y[Ln],g,!1),To}function Zd(s,a){return s<<17|a<<2}function Ou(s){return s>>17&32767}function Na(s){return 2|s}function $n(s){return(131068&s)>>2}function Qd(s,a){return-131069&s|a<<2}function Jd(s){return 1|s}function Jg(s,a,c,f,g){const y=s[c+1],I=null===a;let N=f?Ou(y):$n(y),k=!1;for(;0!==N&&(!1===k||I);){const X=s[N+1];Qb(s[N],a)&&(k=!0,s[N+1]=f?Jd(X):Na(X)),N=f?Ou(X):$n(X)}k&&(s[c+1]=f?Na(y):Jd(y))}function Qb(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&yt(s,a)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function X_(s){return s.substring(Is.key,Is.keyEnd)}function xp(s,a){const c=Is.textEnd;return c===a?-1:(a=Is.keyEnd=function Jb(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,Is.key=a,c),Pp(s,a,c))}function Pp(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function qc(s,a,c){return ql(s,a,c,!1),qc}function nm(s,a){return ql(s,a,null,!0),nm}function Kl(s){xl(ee,Ru,s,!0)}function Ru(s,a){for(let c=function Kv(s){return function ki(s){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=s.length}(s),xp(s,Pp(s,0,Is.textEnd))}(a);c>=0;c=xp(a,c))ee(s,X_(a),!0)}function ql(s,a,c,f){const g=dt(),y=ir(),I=Ji(2);y.firstUpdatePass&&ny(y,s,I,f),a!==Jn&&Co(g,I,a)&&yf(y,y.data[li()],g,g[Ln],s,g[I+1]=function sm(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=Re(tc(s)))),s}(a,c),f,I)}function xl(s,a,c,f){const g=ir(),y=Ji(2);g.firstUpdatePass&&ny(g,null,y,f);const I=dt();if(c!==Jn&&Co(I,y,c)){const N=g.data[li()];if(vf(N,f)&&!mf(g,y)){let k=f?N.classesWithoutHost:N.stylesWithoutHost;null!==k&&(c=De(k,c||"")),$_(g,N,I,c,f)}else!function im(s,a,c,f,g,y,I,N){g===Jn&&(g=ae);let k=0,H=0,X=0<g.length?g[0]:null,ue=0<y.length?y[0]:null;for(;null!==X||null!==ue;){const Me=k<g.length?g[k+1]:void 0,He=H<y.length?y[H+1]:void 0;let jt,Dt=null;X===ue?(k+=2,H+=2,Me!==He&&(Dt=ue,jt=He)):null===ue||null!==X&&X<ue?(k+=2,Dt=X):(H+=2,Dt=ue,jt=He),null!==Dt&&yf(s,a,c,f,Dt,jt,I,N),X=k<g.length?g[k]:null,ue=H<y.length?y[H]:null}}(g,N,I,I[Ln],I[y+1],I[y+1]=function tw(s,a,c){if(null==c||""===c)return ae;const f=[],g=tc(c);if(Array.isArray(g))for(let y=0;y<g.length;y++)s(f,g[y],!0);else if("object"==typeof g)for(const y in g)g.hasOwnProperty(y)&&s(f,y,g[y]);else"string"==typeof g&&a(f,g);return f}(s,a,c),f,y)}}function mf(s,a){return a>=s.expandoStartIndex}function ny(s,a,c,f){const g=s.data;if(null===g[c+1]){const y=g[li()],I=mf(s,c);vf(y,f)&&null===a&&!I&&(a=!1),a=function aa(s,a,c,f){const g=function va(s){const a=Dn.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let y=f?a.residualClasses:a.residualStyles;if(null===g)0===(f?a.classBindings:a.styleBindings)&&(c=kp(c=_f(null,s,a,c,f),a.attrs,f),y=null);else{const I=a.directiveStylingLast;if(-1===I||s[I]!==g)if(c=_f(g,s,a,c,f),null===y){let k=function hc(s,a,c){const f=c?a.classBindings:a.styleBindings;if(0!==$n(f))return s[Ou(f)]}(s,a,f);void 0!==k&&Array.isArray(k)&&(k=_f(null,s,a,k[1],f),k=kp(k,a.attrs,f),function pE(s,a,c,f){s[Ou(c?a.classBindings:a.styleBindings)]=f}(s,a,f,k))}else y=function Yc(s,a,c){let f;const g=a.directiveEnd;for(let y=1+a.directiveStylingLast;y<g;y++)f=kp(f,s[y].hostAttrs,c);return kp(f,a.attrs,c)}(s,a,f)}return void 0!==y&&(f?a.residualClasses=y:a.residualStyles=y),c}(g,y,a,f),function So(s,a,c,f,g,y){let I=y?a.classBindings:a.styleBindings,N=Ou(I),k=$n(I);s[f]=c;let X,H=!1;if(Array.isArray(c)?(X=c[1],(null===X||yt(c,X)>0)&&(H=!0)):X=c,g)if(0!==k){const Me=Ou(s[N+1]);s[f+1]=Zd(Me,N),0!==Me&&(s[Me+1]=Qd(s[Me+1],f)),s[N+1]=function zv(s,a){return 131071&s|a<<17}(s[N+1],f)}else s[f+1]=Zd(N,0),0!==N&&(s[N+1]=Qd(s[N+1],f)),N=f;else s[f+1]=Zd(k,0),0===N?N=f:s[k+1]=Qd(s[k+1],f),k=f;H&&(s[f+1]=Na(s[f+1])),Jg(s,X,f,!0),Jg(s,X,f,!1),function Nu(s,a,c,f,g){const y=g?s.residualClasses:s.residualStyles;null!=y&&"string"==typeof a&&yt(y,a)>=0&&(c[f+1]=Jd(c[f+1]))}(a,X,s,f,y),I=Zd(N,k),y?a.classBindings=I:a.styleBindings=I}(g,y,a,c,I,f)}}function _f(s,a,c,f,g){let y=null;const I=c.directiveEnd;let N=c.directiveStylingLast;for(-1===N?N=c.directiveStart:N++;N<I&&(y=a[N],f=kp(f,y.hostAttrs,g),y!==s);)N++;return null!==s&&(c.directiveStylingLast=N),f}function kp(s,a,c){const f=c?1:2;let g=-1;if(null!==a)for(let y=0;y<a.length;y++){const I=a[y];"number"==typeof I?g=I:g===f&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ee(s,I,!!c||a[++y]))}return void 0===s?null:s}function yf(s,a,c,f,g,y,I,N){if(!(3&a.type))return;const k=s.data,H=k[N+1],X=function Wv(s){return 1==(1&s)}(H)?qv(k,a,c,g,$n(H),I):void 0;xu(X)||(xu(y)||function $v(s){return 2==(2&s)}(H)&&(y=qv(k,null,c,g,N,I)),function og(s,a,c,f,g){if(a)g?s.addClass(c,f):s.removeClass(c,f);else{let y=-1===f.indexOf("-")?void 0:Rr.DashCase;null==g?s.removeStyle(c,f,y):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),y|=Rr.Important),s.setStyle(c,f,g,y))}}(f,I,po(li(),c),g,y))}function qv(s,a,c,f,g,y){const I=null===a;let N;for(;g>0;){const k=s[g],H=Array.isArray(k),X=H?k[1]:k,ue=null===X;let Me=c[g+1];Me===Jn&&(Me=ue?ae:void 0);let He=ue?Ne(Me,f):X===f?Me:void 0;if(H&&!xu(He)&&(He=Ne(k,f)),xu(He)&&(N=He,I))return N;const Dt=s[g+1];g=I?Ou(Dt):$n(Dt)}if(null!==a){let k=y?a.residualClasses:a.residualStyles;null!=k&&(N=Ne(k,f))}return N}function xu(s){return void 0!==s}function vf(s,a){return 0!=(s.flags&(a?8:16))}function om(s,a=""){const c=dt(),f=ir(),g=s+_e,y=f.firstCreatePass?zc(f,g,1,a,null):f.data[g],I=c[g]=bd(c[Ln],a);Hf(f,c,I,y),Qi(y,!1)}function Fp(s){return am("",s,""),Fp}function am(s,a,c){const f=dt(),g=yl(f,s,a,c);return g!==Jn&&function ac(s,a,c){const f=po(a,s);_u(s[Ln],f,c)}(f,li(),g),am}function Bp(s,a,c,f,g){xl(ee,Ru,function Wd(s,a,c,f,g,y){const N=$d(s,Si(),c,g);return Ji(2),N?a+ge(c)+f+ge(g)+y:Jn}(dt(),s,a,c,f,g),!0)}function oy(s,a,c){const f=dt();return Co(f,ea(),a)&&ia(ir(),Hr(),f,s,a,f[Ln],c,!0),oy}const pc=void 0;var n0=["en",[["a","p"],["AM","PM"],pc],[["AM","PM"],pc,pc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pc,"{1} 'at' {0}",pc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ay(s){const c=Math.floor(Math.abs(s)),f=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let Zc={};function mm(s){const a=function rw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=s0(a);if(c)return c;const f=a.split("-")[0];if(c=s0(f),c)return c;if("en"===f)return n0;throw new Ze(701,!1)}function $p(s){return mm(s)[Wn.PluralCase]}function s0(s){return s in Zc||(Zc[s]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[s]),Zc[s]}var Wn=(()=>((Wn=Wn||{})[Wn.LocaleId=0]="LocaleId",Wn[Wn.DayPeriodsFormat=1]="DayPeriodsFormat",Wn[Wn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Wn[Wn.DaysFormat=3]="DaysFormat",Wn[Wn.DaysStandalone=4]="DaysStandalone",Wn[Wn.MonthsFormat=5]="MonthsFormat",Wn[Wn.MonthsStandalone=6]="MonthsStandalone",Wn[Wn.Eras=7]="Eras",Wn[Wn.FirstDayOfWeek=8]="FirstDayOfWeek",Wn[Wn.WeekendRange=9]="WeekendRange",Wn[Wn.DateFormat=10]="DateFormat",Wn[Wn.TimeFormat=11]="TimeFormat",Wn[Wn.DateTimeFormat=12]="DateTimeFormat",Wn[Wn.NumberSymbols=13]="NumberSymbols",Wn[Wn.NumberFormats=14]="NumberFormats",Wn[Wn.CurrencyCode=15]="CurrencyCode",Wn[Wn.CurrencySymbol=16]="CurrencySymbol",Wn[Wn.CurrencyName=17]="CurrencyName",Wn[Wn.Currencies=18]="Currencies",Wn[Wn.Directionality=19]="Directionality",Wn[Wn.PluralCase=20]="PluralCase",Wn[Wn.ExtraData=21]="ExtraData",Wn))();const vE=["zero","one","two","few","many"],Pl="en-US",Qc={marker:"element"},Fu={marker:"ICU"};var is=(()=>((is=is||{})[is.SHIFT=2]="SHIFT",is[is.APPEND_EAGERLY=1]="APPEND_EAGERLY",is[is.COMMENT=2]="COMMENT",is))();let ly=Pl;function Yl(s){(function kt(s,a){null==s&&Et(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(ly=s.toLowerCase().replace(/_/g,"-"))}function l0(s,a,c){const f=a.insertBeforeIndex,g=Array.isArray(f)?f[0]:f;return null===g?i_(s,0,c):Ur(c[g])}function u0(s,a,c,f,g){const y=a.insertBeforeIndex;if(Array.isArray(y)){let I=f,N=null;if(3&a.type||(N=I,I=g),null!==I&&-1===a.componentOffset)for(let k=1;k<y.length;k++)Nc(s,I,c[y[k]],N,!1)}}function uy(s,a){if(s.push(a),s.length>1)for(let c=s.length-2;c>=0;c--){const f=s[c];Jc(f)||_m(f,a)&&null===th(f)&&c0(f,a.index)}}function Jc(s){return!(64&s.type)}function _m(s,a){return Jc(a)||s.index>a.index}function th(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function c0(s,a){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=a:(Sa(l0,u0),s.insertBeforeIndex=a)}function Df(s,a){const c=s.data[a];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function rh(s,a,c){const f=gp(s,c,64,null,null);return uy(a,f),f}function ih(s,a){const c=a[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function Ao(s){return s>>>17}function Cf(s){return(131070&s)>>>1}let Ni=0,zp=0;function Lu(s,a,c,f){const g=c[Ln];let I,y=null;for(let N=0;N<a.length;N++){const k=a[N];if("string"==typeof k){const H=a[++N];null===c[H]&&(c[H]=bd(g,k))}else if("number"==typeof k)switch(1&k){case 0:const H=Ao(k);let X,ue;if(null===y&&(y=H,I=us(g,f)),H===y?(X=f,ue=I):(X=null,ue=Ur(c[H])),null!==ue){const jt=Cf(k);Nc(g,ue,c[jt],X,!1);const vn=Df(s,jt);if(null!==vn&&"object"==typeof vn){const Yn=ih(vn,c);null!==Yn&&Lu(s,vn.create[Yn],c,c[vn.anchorIdx])}}break;case 1:const He=a[++N],Dt=a[++N];Ug(g,po(k>>>1,c),null,null,He,Dt,null)}else switch(k){case Fu:const H=a[++N],X=a[++N];null===c[X]&&es(c[X]=Ih(g,H),c);break;case Qc:const ue=a[++N],Me=a[++N];null===c[Me]&&es(c[Me]=Zu(g,ue,null),c)}}}function ed(s,a,c,f,g){for(let y=0;y<c.length;y++){const I=c[y],N=c[++y];if(I&g){let k="";for(let H=y+1;H<=y+N;H++){const X=c[H];if("string"==typeof X)k+=X;else if("number"==typeof X)if(X<0)k+=ge(a[f-X]);else{const ue=X>>>2;switch(3&X){case 1:const Me=c[++H],He=c[++H],Dt=s.data[ue];"string"==typeof Dt?Ug(a[Ln],a[ue],null,Dt,Me,k,He):ia(s,Dt,a,Me,k,a[Ln],He,!1);break;case 0:const jt=a[ue];null!==jt&&_u(a[Ln],jt,k);break;case 2:bm(s,Df(s,ue),a,k);break;case 3:d0(s,Df(s,ue),f,a)}}}}else{const k=c[y+1];if(k>0&&3==(3&k)){const X=Df(s,k>>>2);a[X.currentCaseLViewIndex]<0&&d0(s,X,f,a)}}y+=N}}function d0(s,a,c,f){let g=f[a.currentCaseLViewIndex];if(null!==g){let y=Ni;g<0&&(g=f[a.currentCaseLViewIndex]=~g,y=-1),ed(s,f,a.update[g],c,y)}}function bm(s,a,c,f){const g=function dy(s,a){let c=s.cases.indexOf(a);if(-1===c)switch(s.type){case 1:{const f=function bE(s,a){const c=$p(a)(parseInt(s,10)),f=vE[c];return void 0!==f?f:"other"}(a,function a0(){return ly}());c=s.cases.indexOf(f),-1===c&&"other"!==f&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(a,f);if(ih(a,c)!==g&&(cy(s,a,c),c[a.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const I=c[a.anchorIdx];I&&Lu(s,a.create[g],c,I)}}function cy(s,a,c){let f=ih(a,c);if(null!==f){const g=a.remove[f];for(let y=0;y<g.length;y++){const I=g[y];if(I>0){const N=po(I,c);null!==N&&sg(c[Ln],N)}else cy(s,Df(s,~I),c)}}}function Oo(){const s=[];let c,f,a=-1;function y(N,k){a=0;const H=ih(N,k);f=null!==H?N.remove[H]:ae}function I(){if(a<f.length){const N=f[a++];return N>0?c[N]:(s.push(a,f),y(c[Qt].data[~N],c),I())}return 0===s.length?null:(f=s.pop(),a=s.pop(),I())}return function g(N,k){for(c=k;s.length;)s.pop();return y(N.value,k),I}}const Sf=/\ufffd(\d+):?\d*\ufffd/gi,f0=/\ufffd(\d+)\ufffd/,td=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,nd="\ufffd",Wp=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,p0=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,g0=/\uE500/g;function wm(s,a,c,f,g,y,I){const N=Bd(s,f,1,null);let k=N<<is.SHIFT,H=ma();a===H&&(H=null),null===H&&(k|=is.APPEND_EAGERLY),I&&(k|=is.COMMENT,function In(s){void 0===At&&(At=s())}(Oo)),g.push(k,null===y?"":y);const X=gp(s,N,I?32:1,null===y?"":y,null);uy(c,X);const ue=X.index;return Qi(X,!1),null!==H&&a!==H&&function nh(s,a){let c=s.insertBeforeIndex;null===c?(Sa(l0,u0),c=s.insertBeforeIndex=[null,a]):(function vt(s,a,c){s!=a&&Et(c,s,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(H,ue),X}function hy(s,a,c,f,g,y,I){const N=I.match(Sf),k=wm(s,a,c,y,f,N?null:I,!1);N&&Uu(g,I,k.index,null,0,null)}function Uu(s,a,c,f,g,y){const I=s.length,N=I+1;s.push(null,null);const k=I+2,H=a.split(Sf);let X=0;for(let ue=0;ue<H.length;ue++){const Me=H[ue];if(1&ue){const He=g+parseInt(Me,10);s.push(-1-He),X|=fy(He)}else""!==Me&&s.push(Me)}return s.push(c<<2|(f?1:0)),f&&s.push(f,y),s[I]=X,s[N]=s.length-k,X}function fy(s){return 1<<Math.min(s,31)}function rd(s){let a,y,c="",f=0,g=!1;for(;null!==(a=Wp.exec(s));)g?a[0]===`${nd}/*${y}${nd}`&&(f=a.index,g=!1):(c+=s.substring(f,a.index+a[0].length),y=a[1],g=!0);return c+=s.slice(f),c}function Of(s,a,c,f,g,y){let I=0;const N={type:g.type,currentCaseLViewIndex:Bd(s,a,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function cw(s,a,c){s.push(fy(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,g,y),function If(s,a,c){const f=s.data[a];null===f?s.data[a]=c:f.value=c}(s,y,N);const k=g.values;for(let H=0;H<k.length;H++){const X=k[H],ue=[];for(let Me=0;Me<X.length;Me++){const He=X[Me];if("string"!=typeof He){const Dt=ue.push(He)-1;X[Me]=`\x3c!--\ufffd${Dt}\ufffd--\x3e`}}I=uw(s,N,a,c,f,g.cases[H],X.join(""),ue)|I}I&&function dw(s,a,c){s.push(a,1,c<<2|3)}(c,I,y)}function sh(s){const a=[],c=[];let f=1,g=0;const y=Em(s=s.replace(td,function(I,N,k){return f="select"===k?0:1,g=parseInt(N.slice(1),10),""}));for(let I=0;I<y.length;){let N=y[I++].trim();1===f&&(N=N.replace(/\s*(?:=)?(\w+)\s*/,"$1")),N.length&&a.push(N);const k=Em(y[I++]);a.length>c.length&&c.push(k)}return{type:f,mainBinding:g,cases:a,values:c}}function Em(s){if(!s)return[];let a=0;const c=[],f=[],g=/[{}]/g;let y;for(g.lastIndex=0;y=g.exec(s);){const N=y.index;if("}"==y[0]){if(c.pop(),0==c.length){const k=s.substring(a,N);td.test(k)?f.push(sh(k)):f.push(k),a=N+1}}else{if(0==c.length){const k=s.substring(a,N);f.push(k),a=N+1}c.push("{")}}const I=s.substring(a);return f.push(I),f}function uw(s,a,c,f,g,y,I,N){const k=[],H=[],X=[];a.cases.push(y),a.create.push(k),a.remove.push(H),a.update.push(X);const Me=function Yf(s){const a=new c_(s);return function d_(){try{return!!(new window.DOMParser).parseFromString($l(""),"text/html")}catch{return!1}}()?new u_(a):a}(function a_(){return void 0!==Rc?Rc:typeof document<"u"?document:void 0}()).getInertBodyElement(I),He=function Pc(s){return"content"in s&&function rv(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(Me)||Me;return He?Dm(s,a,c,f,k,H,X,He,g,N,0):0}function Dm(s,a,c,f,g,y,I,N,k,H,X){let ue=0,Me=N.firstChild;for(;Me;){const He=Bd(s,c,1,null);switch(Me.nodeType){case Node.ELEMENT_NODE:const Dt=Me,jt=Dt.tagName.toLowerCase();if(h_.hasOwnProperty(jt)){qp(g,Qc,jt,k,He),s.data[He]=jt;const xt=Dt.attributes;for(let ur=0;ur<xt.length;ur++){const Ss=xt.item(ur),ao=Ss.name.toLowerCase();Ss.value.match(Sf)?Jf.hasOwnProperty(ao)&&Uu(I,Ss.value,He,Ss.name,0,cg[ao]?ug:null):hw(g,He,Ss)}ue=Dm(s,a,c,f,g,y,I,Me,He,H,X+1)|ue,Jl(y,He,X)}break;case Node.TEXT_NODE:const sn=Me.textContent||"",vn=sn.match(Sf);qp(g,null,vn?"":sn,k,He),Jl(y,He,X),vn&&(ue=Uu(I,sn,He,null,0,null)|ue);break;case Node.COMMENT_NODE:const Yn=f0.exec(Me.textContent||"");if(Yn){const ur=H[parseInt(Yn[1],10)];qp(g,Fu,"",k,He),Of(s,c,f,k,ur,He),py(y,He,X)}}Me=Me.nextSibling}return ue}function Jl(s,a,c){0===c&&s.push(a)}function py(s,a,c){0===c&&(s.push(~a),s.push(a))}function qp(s,a,c,f,g){null!==a&&s.push(a),s.push(c,g,function Zl(s,a,c){return s|a<<17|c<<1}(0,f,g))}function hw(s,a,c){s.push(a<<1|1,c.name,c.value)}function b0(s,a,c=-1){const f=ir(),g=dt(),y=_e+s,I=Zi(f.consts,a),N=ma();f.firstCreatePass&&function la(s,a,c,f,g,y){const I=ma(),N=[],k=[],H=[[]];g=function id(s,a){if(function Kp(s){return-1===s}(a))return rd(s);{const c=s.indexOf(`:${a}${nd}`)+2+a.toString().length,f=s.search(new RegExp(`${nd}\\/\\*\\d+:${a}${nd}`));return rd(s.substring(c,f))}}(g,y);const X=function Ql(s){return s.replace(g0," ")}(g).split(p0);for(let ue=0;ue<X.length;ue++){let Me=X[ue];if(1&ue){const He=47===Me.charCodeAt(0),jt=(Me.charCodeAt(He?1:0),_e+Number.parseInt(Me.substring(He?2:1)));if(He)H.shift(),Qi(ma(),!1);else{const sn=rh(s,H[0],jt);H.unshift([]),Qi(sn,!0)}}else{const He=Em(Me);for(let Dt=0;Dt<He.length;Dt++){let jt=He[Dt];if(1&Dt){const sn=jt;if("object"!=typeof sn)throw new Error(`Unable to parse ICU expression in "${g}" message.`);Of(s,c,k,a,sn,wm(s,I,H[0],c,N,"",!0).index)}else""!==jt&&hy(s,I,H[0],N,k,c,jt)}}}s.data[f]={create:N,update:k}}(f,null===N?0:N.index,g,y,I,c);const k=f.data[y],X=e_(f,N===g[br]?null:N,g);(function Xc(s,a,c,f){const g=s[Ln];for(let y=0;y<a.length;y++){const I=a[y++],N=a[y],H=(I&is.APPEND_EAGERLY)===is.APPEND_EAGERLY,X=I>>>is.SHIFT;let ue=s[X];null===ue&&(ue=s[X]=(I&is.COMMENT)===is.COMMENT?g.createComment(N):bd(g,N)),H&&null!==c&&Nc(g,c,ue,f,!1)}})(g,k.create,X,N&&8&N.type?g[N.index]:null),Ba(!0)}function Am(s,a,c){b0(s,a,c),function Sm(){Ba(!1)}()}function my(s){return function vm(s){s&&(Ni|=1<<Math.min(zp,31)),zp++}(Co(dt(),ea(),s)),my}function _y(s){!function iw(s,a,c){if(zp>0){const f=s.data[c];ed(s,a,Array.isArray(f)?f:f.update,Si()-zp-1,Ni)}Ni=0,zp=0}(ir(),dt(),s+_e)}function l(s,a,c,f,g){if(s=Te(s),Array.isArray(s))for(let y=0;y<s.length;y++)l(s[y],a,c,f,g);else{const y=ir(),I=dt();let N=zl(s)?s:Te(s.provide),k=g_(s);const H=Mi(),X=1048575&H.providerIndexes,ue=H.directiveStart,Me=H.providerIndexes>>20;if(zl(s)||!s.multi){const He=new Ve(k,g,Gh),Dt=u(N,a,g?X:X+Me,ue);-1===Dt?(gn(On(H,I),y,N),e(y,s,a.length),a.push(N),H.directiveStart++,H.directiveEnd++,g&&(H.providerIndexes+=1048576),c.push(He),I.push(He)):(c[Dt]=He,I[Dt]=He)}else{const He=u(N,a,X+Me,ue),Dt=u(N,a,X,X+Me),sn=Dt>=0&&c[Dt];if(g&&!sn||!g&&!(He>=0&&c[He])){gn(On(H,I),y,N);const vn=function O(s,a,c,f,g){const y=new Ve(s,c,Gh);return y.multi=[],y.index=a,y.componentProviders=0,i(y,g,f&&!c),y}(g?_:p,c.length,g,f,k);!g&&sn&&(c[Dt].providerFactory=vn),e(y,s,a.length,0),a.push(N),H.directiveStart++,H.directiveEnd++,g&&(H.providerIndexes+=1048576),c.push(vn),I.push(vn)}else e(y,s,He>-1?He:Dt,i(c[g?Dt:He],k,!g&&f));!g&&f&&sn&&c[Dt].componentProviders++}}}function e(s,a,c,f){const g=zl(a),y=function av(s){return!!s.useClass}(a);if(g||y){const k=(y?Te(a.useClass):a).prototype.ngOnDestroy;if(k){const H=s.destroyHooks||(s.destroyHooks=[]);if(!g&&a.multi){const X=H.indexOf(c);-1===X?H.push(c,[f,k]):H[X+1].push(f,k)}else H.push(c,k)}}}function i(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function u(s,a,c,f){for(let g=c;g<f;g++)if(a[g]===s)return g;return-1}function p(s,a,c,f){return w(this.multi,[])}function _(s,a,c,f){const g=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,N=Vi(c,c[Qt],this.providerFactory.index,f);y=N.slice(0,I),w(g,y);for(let k=I;k<N.length;k++)y.push(N[k])}else y=[],w(g,y);return y}function w(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function B(s,a=[]){return c=>{c.providersResolver=(f,g)=>function yy(s,a,c){const f=ir();if(f.firstCreatePass){const g=Us(s);l(c,f.data,f.blueprint,g,!0),l(a,f.data,f.blueprint,g,!1)}}(f,g?g(s):s,a)}}class z{}class ne{}function be(s,a){return new gt(s,a??null)}class gt extends z{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dp(this);const f=$i(a);this._bootstrapComponents=_l(f.bootstrap),this._r3Injector=C_(a,c,[{provide:z,useValue:this},{provide:Bc,useValue:this.componentFactoryResolver}],Re(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Nt extends ne{constructor(a){super(),this.moduleType=a}create(a){return new gt(this.moduleType,a)}}class Zt extends z{constructor(a,c,f){super(),this.componentFactoryResolver=new Dp(this),this.instance=null;const g=new Lc([...a,{provide:z,useValue:this},{provide:Bc,useValue:this.componentFactoryResolver}],c||Fc(),f,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function _n(s,a,c=null){return new Zt(s,a,c).injector}let ii=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const f=pg(0,c.type),g=f.length>0?_n([f],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,g)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=wt({token:s,providedIn:"environment",factory:()=>new s(Rt(Wl))}),s})();function Cs(s){s.getStandaloneInjector=a=>a.get(ii).getOrCreateStandaloneInjector(s)}function wE(s,a,c,f){return DE(dt(),Jr(),s,a,c,f)}function E0(s,a,c,f,g){return function mw(s,a,c,f,g,y,I){const N=a+c;return $d(s,N,g,y)?oa(s,N+2,I?f.call(I,g,y):f(g,y)):ah(s,N+2)}(dt(),Jr(),s,a,c,f,g)}function Xl(s,a,c,f,g,y){return function IE(s,a,c,f,g,y,I,N){const k=a+c;return function zd(s,a,c,f,g){const y=$d(s,a,c,f);return Co(s,a+2,g)||y}(s,k,g,y,I)?oa(s,k+3,N?f.call(N,g,y,I):f(g,y,I)):ah(s,k+3)}(dt(),Jr(),s,a,c,f,g,y)}function ah(s,a){const c=s[a];return c===Jn?void 0:c}function DE(s,a,c,f,g,y){const I=a+c;return Co(s,I,g)?oa(s,I+1,y?f.call(y,g):f(g)):ah(s,I+1)}function _w(s,a){const c=ir();let f;const g=s+_e;c.firstCreatePass?(f=function Zp(s,a){if(a)for(let c=a.length-1;c>=0;c--){const f=a[c];if(s===f.name)return f}}(a,c.pipeRegistry),c.data[g]=f,f.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(g,f.onDestroy)):f=c.data[g];const y=f.factory||(f.factory=Bi(f.type)),I=kr(Gh);try{const N=Da(!1),k=y();return Da(N),function Yb(s,a,c,f){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),a[c]=f}(c,dt(),g,k),k}finally{kr(I)}}function by(s,a,c){const f=s+_e,g=dt(),y=Gs(g,f);return function wl(s,a){return s[Qt].data[a].pure}(g,f)?DE(g,Jr(),a,y.transform,c,y):y.transform(c)}function Ja(s){return a=>{setTimeout(s,void 0,a)}}const od=class HD extends T.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,f){let g=a,y=c||(()=>null),I=f;if(a&&"object"==typeof a){const k=a;g=k.next?.bind(k),y=k.error?.bind(k),I=k.complete?.bind(k)}this.__isAsync&&(y=Ja(y),g&&(g=Ja(g)),I&&(I=Ja(I)));const N=super.subscribe({next:g,error:y,complete:I});return a instanceof Y.w0&&a.add(N),N}};function yw(){return this._results[Symbol.iterator]()}class wy{get changes(){return this._changes||(this._changes=new od)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=wy.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=yw)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const f=this;f.dirty=!1;const g=function Ri(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Al(s,a,c){if(s.length!==a.length)return!1;for(let f=0;f<s.length;f++){let g=s[f],y=a[f];if(c&&(g=c(g),y=c(y)),y!==g)return!1}return!0}(f._results,g,c))&&(f._results=g,f.length=g.length,f.last=g[this.length-1],f.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ey=(()=>{class s{}return s.__NG_ELEMENT_ID__=NE,s})();const AE=Ey,OE=class extends AE{constructor(a,c,f){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(a,c){const f=this._declarationTContainer.tView,g=oo(this._declarationLView,f,a,16,null,f.declTNode,null,null,null,null,c||null);g[uo]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[bi];return null!==I&&(g[bi]=I.createEmbeddedView(f)),Wc(f,g,a),new Qh(g)}};function NE(){return lh(Mi(),dt())}function lh(s,a){return 4&s.type?new OE(a,s,Vc(s,a)):null}let Dy=(()=>{class s{}return s.__NG_ELEMENT_ID__=ME,s})();function ME(){return PE(Mi(),dt())}const $D=Dy,RE=class extends $D{constructor(a,c,f){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=f}get element(){return Vc(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){const a=ar(this._hostTNode,this._hostLView);if(Er(a)){const c=ja(a,this._hostLView),f=ys(a);return new Gi(c[Qt].data[f+8],c)}return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=xE(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Pn}createEmbeddedView(a,c,f){let g,y;"number"==typeof f?g=f:null!=f&&(g=f.index,y=f.injector);const I=a.createEmbeddedView(c||{},y);return this.insert(I,g),I}createComponent(a,c,f,g,y){const I=a&&!function no(s){return"function"==typeof s}(a);let N;if(I)N=c;else{const ue=c||{};N=ue.index,f=ue.injector,g=ue.projectableNodes,y=ue.environmentInjector||ue.ngModuleRef}const k=I?a:new Jh(Xn(a)),H=f||this.parentInjector;if(!y&&null==k.ngModule){const Me=(I?H:this.parentInjector).get(Wl,null);Me&&(y=Me)}const X=k.create(H,g,void 0,y);return this.insert(X.hostView,N),X}insert(a,c){const f=a._lView,g=f[Qt];if(function Xs(s){return gr(s[vr])}(f)){const X=this.indexOf(a);if(-1!==X)this.detach(X);else{const ue=f[vr],Me=new RE(ue,ue[br],ue[vr]);Me.detach(Me.indexOf(a))}}const y=this._adjustIndex(c),I=this._lContainer;!function Oc(s,a,c,f){const g=Pn+f,y=c.length;f>0&&(c[g-1][vi]=a),f<y-Pn?(a[vi]=c[g],pu(c,Pn+f,a)):(c.push(a),a[vi]=null),a[vr]=c;const I=a[uo];null!==I&&c!==I&&function Ch(s,a){const c=s[wr];a[Ti]!==a[vr][vr][Ti]&&(s[Lt]=!0),null===c?s[wr]=[a]:c.push(a)}(I,a);const N=a[bi];null!==N&&N.insertView(s),a[Mn]|=64}(g,f,I,y);const N=Nl(y,I),k=f[Ln],H=us(k,I[tn]);return null!==H&&function jf(s,a,c,f,g,y){f[Ci]=g,f[br]=a,$f(s,f,c,1,g,y)}(g,I[br],k,f,H,N),a.attachToViewContainerRef(),pu(Fi(I),y,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=xE(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),f=Jm(this._lContainer,c);f&&(C(Fi(this._lContainer),c),Th(f[Qt],f))}detach(a){const c=this._adjustIndex(a,-1),f=Jm(this._lContainer,c);return f&&null!=C(Fi(this._lContainer),c)?new Qh(f):null}_adjustIndex(a,c=0){return a??this.length+c}};function xE(s){return s[An]}function Fi(s){return s[An]||(s[An]=[])}function PE(s,a){let c;const f=a[s.index];if(gr(f))c=f;else{let g;if(8&s.type)g=Ur(f);else{const y=a[Ln];g=y.createComment("");const I=pi(s,a);Nc(y,us(y,I),g,function zr(s,a){return s.nextSibling(a)}(y,I),!1)}a[s.index]=c=Bg(f,a,g,s),vp(a,c)}return new RE(c,s,a)}class vw{constructor(a){this.queryList=a,this.matches=null}clone(){return new vw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Om{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const f=null!==a.contentQueries?a.contentQueries[0]:c.length,g=[];for(let y=0;y<f;y++){const I=c.getByIndex(y);g.push(this.queries[I.indexInDeclarationView].clone())}return new Om(g)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==A0(a,c).matches&&this.queries[c].setDirty()}}class C0{constructor(a,c,f=null){this.predicate=a,this.flags=c,this.read=f}}class Nf{constructor(a=[]){this.queries=a}elementStart(a,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let f=0;f<this.length;f++){const g=null!==c?c.length:0,y=this.getByIndex(f).embeddedTView(a,g);y&&(y.indexInDeclarationView=f,null!==c?c.push(y):c=[y])}return null!==c?new Nf(c):null}template(a,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class _c{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new _c(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=a.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let g=0;g<f.length;g++){const y=f[g];this.matchTNodeWithReadOption(a,c,Iy(c,y)),this.matchTNodeWithReadOption(a,c,vs(c,a,y,!1,!1))}else f===Ey?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,vs(c,a,f,!1,!1))}matchTNodeWithReadOption(a,c,f){if(null!==f){const g=this.metadata.read;if(null!==g)if(g===oc||g===Dy||g===Ey&&4&c.type)this.addMatch(c.index,-2);else{const y=vs(c,a,g,!1,!1);null!==y&&this.addMatch(c.index,y)}else this.addMatch(c.index,f)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function Iy(s,a){const c=s.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===a)return c[f+1];return null}function zD(s,a,c,f){return-1===c?function pr(s,a){return 11&s.type?Vc(s,a):4&s.type?lh(s,a):null}(a,s):-2===c?function Cy(s,a,c){return c===oc?Vc(a,s):c===Ey?lh(a,s):c===Dy?PE(a,s):void 0}(s,a,f):Vi(s,s[Qt],c,a)}function kE(s,a,c,f){const g=a[bi].queries[f];if(null===g.matches){const y=s.data,I=c.matches,N=[];for(let k=0;k<I.length;k+=2){const H=I[k];N.push(H<0?null:zD(a,y[H],I[k+1],c.metadata.read))}g.matches=N}return g.matches}function fs(s,a,c,f){const g=s.queries.getByIndex(c),y=g.matches;if(null!==y){const I=kE(s,a,g,c);for(let N=0;N<y.length;N+=2){const k=y[N];if(k>0)f.push(I[N/2]);else{const H=y[N+1],X=a[-k];for(let ue=Pn;ue<X.length;ue++){const Me=X[ue];Me[uo]===Me[vr]&&fs(Me[Qt],Me,H,f)}if(null!==X[wr]){const ue=X[wr];for(let Me=0;Me<ue.length;Me++){const He=ue[Me];fs(He[Qt],He,H,f)}}}}}return f}function T0(s){const a=dt(),c=ir(),f=yo();ba(f+1);const g=A0(c,f);if(s.dirty&&function fa(s){return 4==(4&s[Mn])}(a)===(2==(2&g.metadata.flags))){if(null===g.matches)s.reset([]);else{const y=g.crossesNgTemplate?fs(c,a,f,[]):kE(c,a,g,f);s.reset(y,wb),s.notifyOnChanges()}return!0}return!1}function FE(s,a,c){const f=ir();f.firstCreatePass&&(Rm(f,new C0(s,a,c),-1),2==(2&a)&&(f.staticViewQueries=!0)),Mm(f,dt(),a)}function S0(s,a,c,f){const g=ir();if(g.firstCreatePass){const y=Mi();Rm(g,new C0(a,c,f),y.index),function WD(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(g,s),2==(2&c)&&(g.staticContentQueries=!0)}Mm(g,dt(),c)}function bw(){return function Nm(s,a){return s[bi].queries[a].queryList}(dt(),yo())}function Mm(s,a,c){const f=new wy(4==(4&c));mp(s,a,f,f.destroy),null===a[bi]&&(a[bi]=new Om),a[bi].queries.push(new vw(f))}function Rm(s,a,c){null===s.queries&&(s.queries=new Nf),s.queries.track(new _c(a,c))}function A0(s,a){return s.queries.getByIndex(a)}function xm(s,a){return lh(s,a)}function Ty(s){return!!$i(s)}function U0(...s){}const qE=new $r("Application Initializer");let B0=(()=>{class s{constructor(c){this.appInits=c,this.resolve=U0,this.reject=U0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,g)=>{this.resolve=f,this.reject=g})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const y=this.appInits[g]();if(cf(y))c.push(y);else if(Qg(y)){const I=new Promise((N,k)=>{y.subscribe({complete:N,error:k})});c.push(I)}}Promise.all(c).then(()=>{f()}).catch(g=>{this.reject(g)}),0===c.length&&f(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Rt(qE,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const YE=new $r("AppId",{providedIn:"root",factory:function Cw(){return`${Tw()}${Tw()}${Tw()}`}});function Tw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZE=new $r("Platform Initializer"),rI=new $r("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let iI=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Bm=new $r("LocaleId",{providedIn:"root",factory:()=>Ht(Bm,Ut.Optional|Ut.SkipSelf)||function V0(){return typeof $localize<"u"&&$localize.locale||Pl}()}),QE=new $r("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XE{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let eD=(()=>{class s{compileModuleSync(c){return new Nt(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const f=this.compileModuleSync(c),y=_l($i(c).declarations).reduce((I,N)=>{const k=Xn(N);return k&&I.push(new Jh(k)),I},[]);return new XE(f,y)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const oI=(()=>Promise.resolve(0))();function j0(s){typeof Zone>"u"?oI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class tu{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new od(!1),this.onMicrotaskEmpty=new od(!1),this.onStable=new od(!1),this.onError=new od(!1),typeof Zone>"u")throw new Ze(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!f&&c,g.shouldCoalesceRunChangeDetection=f,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function H0(){let s=yn.requestAnimationFrame,a=yn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const f=a[Zone.__symbol__("OriginalDelegate")];f&&(a=f)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function lI(s){const a=()=>{!function Aw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(yn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ow(s),s.isCheckStableRunning=!0,$0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ow(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,g,y,I,N)=>{try{return iD(s),c.invokeTask(g,y,I,N)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||s.shouldCoalesceRunChangeDetection)&&a(),sD(s)}},onInvoke:(c,f,g,y,I,N,k)=>{try{return iD(s),c.invoke(g,y,I,N,k)}finally{s.shouldCoalesceRunChangeDetection&&a(),sD(s)}},onHasTask:(c,f,g,y)=>{c.hasTask(g,y),f===g&&("microTask"==y.change?(s._hasPendingMicrotasks=y.microTask,Ow(s),$0(s)):"macroTask"==y.change&&(s.hasPendingMacrotasks=y.macroTask))},onHandleError:(c,f,g,y)=>(c.handleError(g,y),s.runOutsideAngular(()=>s.onError.emit(y)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tu.isInAngularZone())throw new Ze(909,!1)}static assertNotInAngularZone(){if(tu.isInAngularZone())throw new Ze(909,!1)}run(a,c,f){return this._inner.run(a,c,f)}runTask(a,c,f,g){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+g,a,aI,U0,U0);try{return y.runTask(I,c,f)}finally{y.cancelTask(I)}}runGuarded(a,c,f){return this._inner.runGuarded(a,c,f)}runOutsideAngular(a){return this._outer.run(a)}}const aI={};function $0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ow(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function iD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function sD(s){s._nesting--,$0(s)}class uI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new od,this.onMicrotaskEmpty=new od,this.onStable=new od,this.onError=new od}run(a,c,f){return a.apply(c,f)}runGuarded(a,c,f){return a.apply(c,f)}runOutsideAngular(a){return a()}runTask(a,c,f,g){return a.apply(c,f)}}const oD=new $r(""),aD=new $r("");let z0,lD=(()=>{class s{constructor(c,f,g){this._ngZone=c,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,z0||(function cD(s){z0=s}(g),g.addToWindow(f)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tu.assertNotInAngularZone(),j0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())j0(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,g){let y=-1;f&&f>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:y,updateCb:g})}whenStable(c,f,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,f,g){return[]}}return s.\u0275fac=function(c){return new(c||s)(Rt(tu),Rt(uD),Rt(aD))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),uD=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return z0?.findTestabilityInTree(this,c,f)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ch=!1;let dh=null;const xy=new $r("AllowMultipleToken"),W0=new $r("PlatformDestroyListeners"),dD=new $r("appBootstrapListener");class hD{constructor(a,c){this.name=a,this.token=c}}function Rw(s,a,c=[]){const f=`Platform: ${a}`,g=new $r(f);return(y=[])=>{let I=Vm();if(!I||I.injector.get(xy,!1)){const N=[...c,...y,{provide:g,useValue:!0}];s?s(N):function dI(s){if(dh&&!dh.get(xy,!1))throw new Ze(400,!1);dh=s;const a=s.get(pD);(function Mw(s){const a=s.get(ZE,null);a&&a.forEach(c=>c())})(s)}(function hh(s=[],a){return Hc.create({name:a,providers:[{provide:np,useValue:"platform"},{provide:W0,useValue:new Set([()=>dh=null])},...s]})}(N,f))}return function fD(s){const a=Vm();if(!a)throw new Ze(401,!1);return a}()}}function Vm(){return dh?.get(pD)??null}let pD=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const g=function mD(s,a){let c;return c="noop"===s?new uI:("zone.js"===s?void 0:s)||new tu(a),c}(f?.ngZone,function gD(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(f)),y=[{provide:tu,useValue:g}];return g.run(()=>{const I=Hc.create({providers:y,parent:this.injector,name:c.moduleType.name}),N=c.create(I),k=N.injector.get(ap,null);if(!k)throw new Ze(402,!1);return g.runOutsideAngular(()=>{const H=g.onError.subscribe({next:X=>{k.handleError(X)}});N.onDestroy(()=>{vc(this._modules,N),H.unsubscribe()})}),function Pw(s,a,c){try{const f=c();return cf(f)?f.catch(g=>{throw a.runOutsideAngular(()=>s.handleError(g)),g}):f}catch(f){throw a.runOutsideAngular(()=>s.handleError(f)),f}}(k,g,()=>{const H=N.injector.get(B0);return H.runInitializers(),H.donePromise.then(()=>(Yl(N.injector.get(Bm,Pl)||Pl),this._moduleDoBootstrap(N),N))})})}bootstrapModule(c,f=[]){const g=K0({},f);return function cI(s,a,c){const f=new Nt(c);return Promise.resolve(f)}(0,0,c).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(c){const f=c.injector.get(q0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(g=>f.bootstrap(g));else{if(!c.instance.ngDoBootstrap)throw new Ze(-403,!1);c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const c=this._injector.get(W0,null);c&&(c.forEach(f=>f()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Rt(Hc))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function K0(s,a){return Array.isArray(a)?a.reduce(K0,s):{...s,...a}}let q0=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,f,g){this._zone=c,this._injector=f,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new h.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),I=new h.y(N=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{tu.assertNotInAngularZone(),j0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{tu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{k.unsubscribe(),H.unsubscribe()}});this.isStable=(0,ye.T)(y,I.pipe((0,Ae.B)()))}bootstrap(c,f){const g=c instanceof m_;if(!this._injector.get(B0).done){!g&&Ui(c);throw new Ze(405,ch)}let I;I=g?c:this._injector.get(Bc).resolveComponentFactory(c),this.componentTypes.push(I.componentType);const N=function Nw(s){return s.isBoundToModule}(I)?void 0:this._injector.get(z),H=I.create(Hc.NULL,[],f||I.selector,N),X=H.location.nativeElement,ue=H.injector.get(oD,null);return ue?.registerApplication(X),H.onDestroy(()=>{this.detachView(H.hostView),vc(this.components,H),ue?.unregisterApplication(X)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new Ze(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;vc(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const f=this._injector.get(dD,[]);f.push(...this._bootstrapListeners),f.forEach(g=>g(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>vc(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Ze(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(Rt(tu),Rt(Wl),Rt(ap))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function vc(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}function pI(){return!1}let Fw=(()=>{class s{}return s.__NG_ELEMENT_ID__=Y0,s})();function Y0(s){return function mI(s,a,c){if(Ls(s)&&!c){const f=gi(s.index,a);return new Qh(f,f)}return 47&s.type?new Qh(a[Ti],a):null}(Mi(),dt(),16==(16&s))}class J0{constructor(){}supports(a){return ef(a)}create(a){return new X0(a)}}const Hw=(s,a)=>a;class X0{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Hw}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,f=this._removalsHead,g=0,y=null;for(;c||f;){const I=!f||c&&c.currentIndex<wD(f,g,y)?c:f,N=wD(I,g,y),k=I.currentIndex;if(I===f)g--,f=f._nextRemoved;else if(c=c._next,null==I.previousIndex)g++;else{y||(y=[]);const H=N-g,X=k-g;if(H!=X){for(let Me=0;Me<H;Me++){const He=Me<y.length?y[Me]:y[Me]=0,Dt=He+Me;X<=Dt&&Dt<H&&(y[Me]=He+1)}y[I.previousIndex]=X-H}}N!==k&&a(I,N,k)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!ef(a))throw new Ze(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let g,y,I,c=this._itHead,f=!1;if(Array.isArray(a)){this.length=a.length;for(let N=0;N<this.length;N++)y=a[N],I=this._trackByFn(N,y),null!==c&&Object.is(c.trackById,I)?(f&&(c=this._verifyReinsertion(c,y,I,N)),Object.is(c.item,y)||this._addIdentityChange(c,y)):(c=this._mismatch(c,y,I,N),f=!0),c=c._next}else g=0,function G_(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let f;for(;!(f=c.next()).done;)a(f.value)}}(a,N=>{I=this._trackByFn(g,N),null!==c&&Object.is(c.trackById,I)?(f&&(c=this._verifyReinsertion(c,N,I,g)),Object.is(c.item,N)||this._addIdentityChange(c,N)):(c=this._mismatch(c,N,I,g),f=!0),c=c._next,g++}),this.length=g;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,f,g){let y;return null===a?y=this._itTail:(y=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,y,g)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(f,g))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,y,g)):a=this._addAfter(new eg(c,f),y,g),a}_verifyReinsertion(a,c,f,g){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==y?a=this._reinsertAfter(y,a._prev,g):a.currentIndex!=g&&(a.currentIndex=g,this._addToMoves(a,g)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const g=a._prevRemoved,y=a._nextRemoved;return null===g?this._removalsHead=y:g._nextRemoved=y,null===y?this._removalsTail=g:y._prevRemoved=g,this._insertAfter(a,c,f),this._addToMoves(a,f),a}_moveAfter(a,c,f){return this._unlink(a),this._insertAfter(a,c,f),this._addToMoves(a,f),a}_addAfter(a,c,f){return this._insertAfter(a,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,f){const g=null===c?this._itHead:c._next;return a._next=g,a._prev=c,null===g?this._itTail=a:g._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new zw),this._linkedRecords.put(a),a.currentIndex=f,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,f=a._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zw),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class eg{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $w{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,a))return f;return null}remove(a){const c=a._prevDup,f=a._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class zw{constructor(){this.map=new Map}put(a){const c=a.trackById;let f=this.map.get(c);f||(f=new $w,this.map.set(c,f)),f.add(a)}get(a,c){const g=this.map.get(a);return g?g.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wD(s,a,c){const f=s.previousIndex;if(null===f)return f;let g=0;return c&&f<c.length&&(g=c[f]),f+a+g}class Ly{constructor(){}supports(a){return a instanceof Map||Ip(a)}create(){return new ED}}class ED{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Ip(a)))throw new Ze(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(f,g)=>{if(c&&c.key===g)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const y=this._getOrCreateRecordForKey(g,f);c=this._insertBeforeOrAppend(c,y)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const f=a._prev;return c._next=a,c._prev=f,a._prev=c,f&&(f._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const g=this._records.get(a);this._maybeAddToChanges(g,c);const y=g._prev,I=g._next;return y&&(y._next=I),I&&(I._prev=y),g._next=null,g._prev=null,g}const f=new wI(a);return this._records.set(a,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(f=>c(a[f],f))}}class wI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hm(){return new Uy([new J0])}let Uy=(()=>{class s{constructor(c){this.factories=c}static create(c,f){if(null!=f){const g=f.factories.slice();c=c.concat(g)}return new s(c)}static extend(c){return{provide:s,useFactory:f=>s.create(c,f||Hm()),deps:[[s,new Z,new F]]}}find(c){const f=this.factories.find(g=>g.supports(c));if(null!=f)return f;throw new Ze(901,!1)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:Hm}),s})();function DD(){return new Ww([new Ly])}let Ww=(()=>{class s{constructor(c){this.factories=c}static create(c,f){if(f){const g=f.factories.slice();c=c.concat(g)}return new s(c)}static extend(c){return{provide:s,useFactory:f=>s.create(c,f||DD()),deps:[[s,new Z,new F]]}}find(c){const f=this.factories.find(g=>g.supports(c));if(f)return f;throw new Ze(901,!1)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:DD}),s})();const By=Rw(null,"core",[]);let ad=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Rt(q0))},s.\u0275mod=qo({type:s}),s.\u0275inj=Rn({}),s})();function Vy(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function nb(s,a){const c=Xn(s),f=a.elementInjector||Fc();return new Jh(c).create(f,a.projectableNodes,a.hostElement,a.environmentInjector)}},1481:(Wt,ze,j)=>{j.d(ze,{Dx:()=>yn,b2:()=>ti,q6:()=>tr});var T=j(6895),Y=j(4650);class h extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ye extends h{static makeCurrent(){(0,T.HT)(new ye)}onAndCancel(he,oe,Oe){return he.addEventListener(oe,Oe,!1),()=>{he.removeEventListener(oe,Oe,!1)}}dispatchEvent(he,oe){he.dispatchEvent(oe)}remove(he){he.parentNode&&he.parentNode.removeChild(he)}createElement(he,oe){return(oe=oe||this.getDefaultDocument()).createElement(he)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(he){return he.nodeType===Node.ELEMENT_NODE}isShadowRoot(he){return he instanceof DocumentFragment}getGlobalEventTarget(he,oe){return"window"===oe?window:"document"===oe?he:"body"===oe?he.body:null}getBaseHref(he){const oe=function Ce(){return Ae=Ae||document.querySelector("base"),Ae?Ae.getAttribute("href"):null}();return null==oe?null:function Re(ae){Fe=Fe||document.createElement("a"),Fe.setAttribute("href",ae);const he=Fe.pathname;return"/"===he.charAt(0)?he:`/${he}`}(oe)}resetBaseElement(){Ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(he){return(0,T.Mx)(document.cookie,he)}}let Fe,Ae=null;const De=new Y.OlP("TRANSITION_ID"),de=[{provide:Y.ip1,useFactory:function pe(ae,he,oe){return()=>{oe.get(Y.CZH).donePromise.then(()=>{const Oe=(0,T.q)(),et=he.querySelectorAll(`style[ng-transition="${ae}"]`);for(let pt=0;pt<et.length;pt++)Oe.remove(et[pt])})}},deps:[De,T.K0,Y.zs3],multi:!0}];let Ye=(()=>{class ae{build(){return new XMLHttpRequest}}return ae.\u0275fac=function(oe){return new(oe||ae)},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const Je=new Y.OlP("EventManagerPlugins");let mt=(()=>{class ae{constructor(oe,Oe){this._zone=Oe,this._eventNameToPlugin=new Map,oe.forEach(et=>{et.manager=this}),this._plugins=oe.slice().reverse()}addEventListener(oe,Oe,et){return this._findPluginFor(Oe).addEventListener(oe,Oe,et)}addGlobalEventListener(oe,Oe,et){return this._findPluginFor(Oe).addGlobalEventListener(oe,Oe,et)}getZone(){return this._zone}_findPluginFor(oe){const Oe=this._eventNameToPlugin.get(oe);if(Oe)return Oe;const et=this._plugins;for(let pt=0;pt<et.length;pt++){const en=et[pt];if(en.supports(oe))return this._eventNameToPlugin.set(oe,en),en}throw new Error(`No event manager plugin found for event ${oe}`)}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(Je),Y.LFG(Y.R0b))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class It{constructor(he){this._doc=he}addGlobalEventListener(he,oe,Oe){const et=(0,T.q)().getGlobalEventTarget(this._doc,he);if(!et)throw new Error(`Unsupported event target ${et} for event ${oe}`);return this.addEventListener(et,oe,Oe)}}let Ze=(()=>{class ae{constructor(){this.usageCount=new Map}addStyles(oe){for(const Oe of oe)1===this.changeUsageCount(Oe,1)&&this.onStyleAdded(Oe)}removeStyles(oe){for(const Oe of oe)0===this.changeUsageCount(Oe,-1)&&this.onStyleRemoved(Oe)}onStyleRemoved(oe){}onStyleAdded(oe){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(oe,Oe){const et=this.usageCount;let pt=et.get(oe)??0;return pt+=Oe,pt>0?et.set(oe,pt):et.delete(oe),pt}ngOnDestroy(){for(const oe of this.getAllStyles())this.onStyleRemoved(oe);this.usageCount.clear()}}return ae.\u0275fac=function(oe){return new(oe||ae)},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),at=(()=>{class ae extends Ze{constructor(oe){super(),this.doc=oe,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(oe){for(const Oe of this.hostNodes)this.addStyleToHost(Oe,oe)}onStyleRemoved(oe){const Oe=this.styleRef;Oe.get(oe)?.forEach(pt=>pt.remove()),Oe.delete(oe)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(oe){this.hostNodes.add(oe);for(const Oe of this.getAllStyles())this.addStyleToHost(oe,Oe)}removeHost(oe){this.hostNodes.delete(oe)}addStyleToHost(oe,Oe){const et=this.doc.createElement("style");et.textContent=Oe,oe.appendChild(et);const pt=this.styleRef.get(Oe);pt?pt.push(et):this.styleRef.set(Oe,[et])}resetHostNodes(){const oe=this.hostNodes;oe.clear(),oe.add(this.doc.head)}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const ge={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ut=/%COMP%/g,Ie=new Y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function vt(ae,he){return he.flat(100).map(oe=>oe.replace(ut,ae))}function Kt(ae){return he=>{if("__ngUnwrap__"===he)return ae;!1===ae(he)&&(he.preventDefault(),he.returnValue=!1)}}let Pt=(()=>{class ae{constructor(oe,Oe,et,pt){this.eventManager=oe,this.sharedStylesHost=Oe,this.appId=et,this.removeStylesOnCompDestory=pt,this.rendererByCompId=new Map,this.defaultRenderer=new Ue(oe)}createRenderer(oe,Oe){if(!oe||!Oe)return this.defaultRenderer;const et=this.getOrCreateRenderer(oe,Oe);return et instanceof kt?et.applyToHost(oe):et instanceof st&&et.applyStyles(),et}getOrCreateRenderer(oe,Oe){const et=this.rendererByCompId;let pt=et.get(Oe.id);if(!pt){const en=this.eventManager,Bt=this.sharedStylesHost,Cn=this.removeStylesOnCompDestory;switch(Oe.encapsulation){case Y.ifc.Emulated:pt=new kt(en,Bt,Oe,this.appId,Cn);break;case Y.ifc.ShadowDom:return new ct(en,Bt,oe,Oe);default:pt=new st(en,Bt,Oe,Cn)}pt.onDestroy=()=>et.delete(Oe.id),et.set(Oe.id,pt)}return pt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(mt),Y.LFG(at),Y.LFG(Y.AFp),Y.LFG(Ie))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Ue{constructor(he){this.eventManager=he,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(he,oe){return oe?document.createElementNS(ge[oe]||oe,he):document.createElement(he)}createComment(he){return document.createComment(he)}createText(he){return document.createTextNode(he)}appendChild(he,oe){(rt(he)?he.content:he).appendChild(oe)}insertBefore(he,oe,Oe){he&&(rt(he)?he.content:he).insertBefore(oe,Oe)}removeChild(he,oe){he&&he.removeChild(oe)}selectRootElement(he,oe){let Oe="string"==typeof he?document.querySelector(he):he;if(!Oe)throw new Error(`The selector "${he}" did not match any elements`);return oe||(Oe.textContent=""),Oe}parentNode(he){return he.parentNode}nextSibling(he){return he.nextSibling}setAttribute(he,oe,Oe,et){if(et){oe=et+":"+oe;const pt=ge[et];pt?he.setAttributeNS(pt,oe,Oe):he.setAttribute(oe,Oe)}else he.setAttribute(oe,Oe)}removeAttribute(he,oe,Oe){if(Oe){const et=ge[Oe];et?he.removeAttributeNS(et,oe):he.removeAttribute(`${Oe}:${oe}`)}else he.removeAttribute(oe)}addClass(he,oe){he.classList.add(oe)}removeClass(he,oe){he.classList.remove(oe)}setStyle(he,oe,Oe,et){et&(Y.JOm.DashCase|Y.JOm.Important)?he.style.setProperty(oe,Oe,et&Y.JOm.Important?"important":""):he.style[oe]=Oe}removeStyle(he,oe,Oe){Oe&Y.JOm.DashCase?he.style.removeProperty(oe):he.style[oe]=""}setProperty(he,oe,Oe){he[oe]=Oe}setValue(he,oe){he.nodeValue=oe}listen(he,oe,Oe){return"string"==typeof he?this.eventManager.addGlobalEventListener(he,oe,Kt(Oe)):this.eventManager.addEventListener(he,oe,Kt(Oe))}}function rt(ae){return"TEMPLATE"===ae.tagName&&void 0!==ae.content}class ct extends Ue{constructor(he,oe,Oe,et){super(he),this.sharedStylesHost=oe,this.hostEl=Oe,this.shadowRoot=Oe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const pt=vt(et.id,et.styles);for(const en of pt){const Bt=document.createElement("style");Bt.textContent=en,this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(he){return he===this.hostEl?this.shadowRoot:he}appendChild(he,oe){return super.appendChild(this.nodeOrShadowRoot(he),oe)}insertBefore(he,oe,Oe){return super.insertBefore(this.nodeOrShadowRoot(he),oe,Oe)}removeChild(he,oe){return super.removeChild(this.nodeOrShadowRoot(he),oe)}parentNode(he){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(he)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class st extends Ue{constructor(he,oe,Oe,et,pt=Oe.id){super(he),this.sharedStylesHost=oe,this.removeStylesOnCompDestory=et,this.rendererUsageCount=0,this.styles=vt(pt,Oe.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class kt extends st{constructor(he,oe,Oe,et,pt){const en=et+"-"+Oe.id;super(he,oe,Oe,pt,en),this.contentAttr=function tt(ae){return"_ngcontent-%COMP%".replace(ut,ae)}(en),this.hostAttr=function it(ae){return"_nghost-%COMP%".replace(ut,ae)}(en)}applyToHost(he){this.applyStyles(),this.setAttribute(he,this.hostAttr,"")}createElement(he,oe){const Oe=super.createElement(he,oe);return super.setAttribute(Oe,this.contentAttr,""),Oe}}let Et=(()=>{class ae extends It{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Oe,et){return oe.addEventListener(Oe,et,!1),()=>this.removeEventListener(oe,Oe,et)}removeEventListener(oe,Oe,et){return oe.removeEventListener(Oe,et)}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const on=["alt","control","meta","shift"],Gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$t={alt:ae=>ae.altKey,control:ae=>ae.ctrlKey,meta:ae=>ae.metaKey,shift:ae=>ae.shiftKey};let wt=(()=>{class ae extends It{constructor(oe){super(oe)}supports(oe){return null!=ae.parseEventName(oe)}addEventListener(oe,Oe,et){const pt=ae.parseEventName(Oe),en=ae.eventCallback(pt.fullKey,et,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(oe,pt.domEventName,en))}static parseEventName(oe){const Oe=oe.toLowerCase().split("."),et=Oe.shift();if(0===Oe.length||"keydown"!==et&&"keyup"!==et)return null;const pt=ae._normalizeKey(Oe.pop());let en="",Bt=Oe.indexOf("code");if(Bt>-1&&(Oe.splice(Bt,1),en="code."),on.forEach(Qs=>{const os=Oe.indexOf(Qs);os>-1&&(Oe.splice(os,1),en+=Qs+".")}),en+=pt,0!=Oe.length||0===pt.length)return null;const Cn={};return Cn.domEventName=et,Cn.fullKey=en,Cn}static matchEventFullKeyCode(oe,Oe){let et=Gt[oe.key]||oe.key,pt="";return Oe.indexOf("code.")>-1&&(et=oe.code,pt="code."),!(null==et||!et)&&(et=et.toLowerCase()," "===et?et="space":"."===et&&(et="dot"),on.forEach(en=>{en!==et&&(0,$t[en])(oe)&&(pt+=en+".")}),pt+=et,pt===Oe)}static eventCallback(oe,Oe,et){return pt=>{ae.matchEventFullKeyCode(pt,oe)&&et.runGuarded(()=>Oe(pt))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const tr=(0,Y.eFA)(Y._c5,"browser",[{provide:Y.Lbi,useValue:T.bD},{provide:Y.g9A,useValue:function Zn(){ye.makeCurrent()},multi:!0},{provide:T.K0,useFactory:function Nn(){return(0,Y.RDi)(document),document},deps:[]}]),Xt=new Y.OlP(""),Sn=[{provide:Y.rWj,useClass:class Te{addToWindow(he){Y.dqk.getAngularTestability=(Oe,et=!0)=>{const pt=he.findTestabilityInTree(Oe,et);if(null==pt)throw new Error("Could not find testability for element.");return pt},Y.dqk.getAllAngularTestabilities=()=>he.getAllTestabilities(),Y.dqk.getAllAngularRootElements=()=>he.getAllRootElements(),Y.dqk.frameworkStabilizers||(Y.dqk.frameworkStabilizers=[]),Y.dqk.frameworkStabilizers.push(Oe=>{const et=Y.dqk.getAllAngularTestabilities();let pt=et.length,en=!1;const Bt=function(Cn){en=en||Cn,pt--,0==pt&&Oe(en)};et.forEach(function(Cn){Cn.whenStable(Bt)})})}findTestabilityInTree(he,oe,Oe){return null==oe?null:he.getTestability(oe)??(Oe?(0,T.q)().isShadowRoot(oe)?this.findTestabilityInTree(he,oe.host,!0):this.findTestabilityInTree(he,oe.parentElement,!0):null)}},deps:[]},{provide:Y.lri,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]},{provide:Y.dDg,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]}],Ut=[{provide:Y.zSh,useValue:"root"},{provide:Y.qLn,useFactory:function Fn(){return new Y.qLn},deps:[]},{provide:Je,useClass:Et,multi:!0,deps:[T.K0,Y.R0b,Y.Lbi]},{provide:Je,useClass:wt,multi:!0,deps:[T.K0]},{provide:Pt,useClass:Pt,deps:[mt,at,Y.AFp,Ie]},{provide:Y.FYo,useExisting:Pt},{provide:Ze,useExisting:at},{provide:at,useClass:at,deps:[T.K0]},{provide:mt,useClass:mt,deps:[Je,Y.R0b]},{provide:T.JF,useClass:Ye,deps:[]},[]];let ti=(()=>{class ae{constructor(oe){}static withServerTransition(oe){return{ngModule:ae,providers:[{provide:Y.AFp,useValue:oe.appId},{provide:De,useExisting:Y.AFp},de]}}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(Xt,12))},ae.\u0275mod=Y.oAB({type:ae}),ae.\u0275inj=Y.cJS({providers:[...Ut,...Sn],imports:[T.ez,Y.hGG]}),ae})(),yn=(()=>{class ae{constructor(oe){this._doc=oe}getTitle(){return this._doc.title}setTitle(oe){this._doc.title=oe||""}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:function(oe){let Oe=null;return Oe=oe?new oe:function ni(){return new yn((0,Y.LFG)(T.K0))}(),Oe},providedIn:"root"}),ae})();typeof window<"u"&&window},9062:(Wt,ze,j)=>{j.d(ze,{F0:()=>ar,rH:()=>Ha,Bz:()=>fl,lC:()=>Lo});var T=j(4650),Y=j(8996),h=j(9646),ye=j(1135),Ae=j(6805),Ce=j(9841),Fe=j(7272),Re=j(9751),De=j(8421);function pe(C){return new Re.y(S=>{(0,De.Xf)(C()).subscribe(S)})}var de=j(9635),Te=j(576);function Ye(C,S){const E=(0,Te.m)(C)?C:()=>C,x=V=>V.error(E());return new Re.y(S?V=>S.schedule(x,0,V):x)}var Je=j(515),mt=j(727),It=j(4482),Ze=j(5403);function at(){return(0,It.e)((C,S)=>{let E=null;C._refCount++;const x=(0,Ze.x)(S,void 0,void 0,void 0,()=>{if(!C||C._refCount<=0||0<--C._refCount)return void(E=null);const V=C._connection,K=E;E=null,V&&(!K||V===K)&&V.unsubscribe(),S.unsubscribe()});C.subscribe(x),x.closed||(E=C.connect())})}class ge extends Re.y{constructor(S,E){super(),this.source=S,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,It.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new mt.w0;const E=this.getSubject();S.add(this.source.subscribe((0,Ze.x)(E,void 0,()=>{this._teardown(),E.complete()},x=>{this._teardown(),E.error(x)},()=>this._teardown()))),S.closed&&(this._connection=null,S=mt.w0.EMPTY)}return S}refCount(){return at()(this)}}var ut=j(7579),ot=j(6895),Xe=j(4004),qe=j(3900),Mt=j(5698),Se=j(8675),Ie=j(9300),tt=j(5577),it=j(590);function vt(C,S){return(0,Te.m)(S)?(0,tt.z)(C,S,1):(0,tt.z)(C,1)}var Kt=j(8505);function Pt(C){return(0,It.e)((S,E)=>{let K,x=null,V=!1;x=S.subscribe((0,Ze.x)(E,void 0,void 0,ee=>{K=(0,De.Xf)(C(ee,Pt(C)(S))),x?(x.unsubscribe(),x=null,K.subscribe(E)):V=!0})),V&&(x.unsubscribe(),x=null,K.subscribe(E))})}var Ue=j(5026);function nt(C){return C<=0?()=>Je.E:(0,It.e)((S,E)=>{let x=[];S.subscribe((0,Ze.x)(E,V=>{x.push(V),C<x.length&&x.shift()},()=>{for(const V of x)E.next(V);E.complete()},void 0,()=>{x=null}))})}var We=j(8068),rt=j(6590),ct=j(4671);function st(C,S){const E=arguments.length>=2;return x=>x.pipe(C?(0,Ie.h)((V,K)=>C(V,K,x)):ct.y,nt(1),E?(0,rt.d)(S):(0,We.T)(()=>new Ae.K))}var Et=j(9718);function on(C){return(0,It.e)((S,E)=>{try{S.subscribe(E)}finally{E.add(C)}})}var Gt=j(8189),$t=j(1481);const wt="primary",En=Symbol("RouteTitle");class Rn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E[0]:E}return null}getAll(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function Vn(C){return new Rn(C)}function Gn(C,S,E){const x=E.path.split("/");if(x.length>C.length||"full"===E.pathMatch&&(S.hasChildren()||x.length<C.length))return null;const V={};for(let K=0;K<x.length;K++){const ee=x[K],Ne=C[K];if(ee.startsWith(":"))V[ee.substring(1)]=Ne;else if(ee!==Ne.path)return null}return{consumed:C.slice(0,x.length),posParams:V}}function Zn(C,S){const E=C?Object.keys(C):void 0,x=S?Object.keys(S):void 0;if(!E||!x||E.length!=x.length)return!1;let V;for(let K=0;K<E.length;K++)if(V=E[K],!Fn(C[V],S[V]))return!1;return!0}function Fn(C,S){if(Array.isArray(C)&&Array.isArray(S)){if(C.length!==S.length)return!1;const E=[...C].sort(),x=[...S].sort();return E.every((V,K)=>x[K]===V)}return C===S}function Nn(C){return Array.prototype.concat.apply([],C)}function er(C){return C.length>0?C[C.length-1]:null}function Xt(C,S){for(const E in C)C.hasOwnProperty(E)&&S(C[E],E)}function Sn(C){return(0,T.CqO)(C)?C:(0,T.QGY)(C)?(0,Y.D)(Promise.resolve(C)):(0,h.of)(C)}const Ut=!1,ti={exact:function ni(C,S,E){if(!yr(C.segments,S.segments)||!rr(C.segments,S.segments,E)||C.numberOfChildren!==S.numberOfChildren)return!1;for(const x in S.children)if(!C.children[x]||!ni(C.children[x],S.children[x],E))return!1;return!0},subset:nn},fi={exact:function Yr(C,S){return Zn(C,S)},subset:function yn(C,S){return Object.keys(S).length<=Object.keys(C).length&&Object.keys(S).every(E=>Fn(C[E],S[E]))},ignored:()=>!0};function kr(C,S,E){return ti[E.paths](C.root,S.root,E.matrixParams)&&fi[E.queryParams](C.queryParams,S.queryParams)&&!("exact"===E.fragment&&C.fragment!==S.fragment)}function nn(C,S,E){return cn(C,S,S.segments,E)}function cn(C,S,E,x){if(C.segments.length>E.length){const V=C.segments.slice(0,E.length);return!(!yr(V,E)||S.hasChildren()||!rr(V,E,x))}if(C.segments.length===E.length){if(!yr(C.segments,E)||!rr(C.segments,E,x))return!1;for(const V in S.children)if(!C.children[V]||!nn(C.children[V],S.children[V],x))return!1;return!0}{const V=E.slice(0,C.segments.length),K=E.slice(C.segments.length);return!!(yr(C.segments,V)&&rr(C.segments,V,x)&&C.children[wt])&&cn(C.children[wt],S,K,x)}}function rr(C,S,E){return S.every((x,V)=>fi[E](C[V].parameters,x.parameters))}class or{constructor(S=new ln([],{}),E={},x=null){this.root=S,this.queryParams=E,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vn(this.queryParams)),this._queryParamMap}toString(){return Ii.serialize(this)}}class ln{constructor(S,E){this.segments=S,this.children=E,this.parent=null,Xt(E,(x,V)=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cr(this)}}class Ir{constructor(S,E){this.path=S,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=Vn(this.parameters)),this._parameterMap}toString(){return ve(this)}}function yr(C,S){return C.length===S.length&&C.every((E,x)=>E.path===S[x].path)}let Kr=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return new xn},providedIn:"root"}),C})();class xn{parse(S){const E=new Oe(S);return new or(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(S){const E=`/${Rt(S.root,!0)}`,x=function te(C){const S=Object.keys(C).map(E=>{const x=C[E];return Array.isArray(x)?x.map(V=>`${Ht(E)}=${Ht(V)}`).join("&"):`${Ht(E)}=${Ht(x)}`}).filter(E=>!!E);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${E}${x}${"string"==typeof S.fragment?`#${function rn(C){return encodeURI(C)}(S.fragment)}`:""}`}}const Ii=new xn;function Cr(C){return C.segments.map(S=>ve(S)).join("/")}function Rt(C,S){if(!C.hasChildren())return Cr(C);if(S){const E=C.children[wt]?Rt(C.children[wt],!1):"",x=[];return Xt(C.children,(V,K)=>{K!==wt&&x.push(`${K}:${Rt(V,!1)}`)}),x.length>0?`${E}(${x.join("//")})`:E}{const E=function pn(C,S){let E=[];return Xt(C.children,(x,V)=>{V===wt&&(E=E.concat(S(x,V)))}),Xt(C.children,(x,V)=>{V!==wt&&(E=E.concat(S(x,V)))}),E}(C,(x,V)=>V===wt?[Rt(C.children[wt],!1)]:[`${V}:${Rt(x,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[wt]?`${Cr(C)}/${E[0]}`:`${Cr(C)}/(${E.join("//")})`}}function ft(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ht(C){return ft(C).replace(/%3B/gi,";")}function mn(C){return ft(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fn(C){return decodeURIComponent(C)}function cr(C){return fn(C.replace(/\+/g,"%20"))}function ve(C){return`${mn(C.path)}${function me(C){return Object.keys(C).map(S=>`;${mn(S)}=${mn(C[S])}`).join("")}(C.parameters)}`}const re=/^[^\/()?;=#]+/;function Q(C){const S=C.match(re);return S?S[0]:""}const xe=/^[^=?&#]+/,he=/^[^&#]+/;class Oe{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ln([],{}):new ln([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(S.length>0||Object.keys(E).length>0)&&(x[wt]=new ln(S,E)),x}parseSegment(){const S=Q(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new T.vHH(4009,Ut);return this.capture(S),new Ir(fn(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const E=Q(this.remaining);if(!E)return;this.capture(E);let x="";if(this.consumeOptional("=")){const V=Q(this.remaining);V&&(x=V,this.capture(x))}S[fn(E)]=fn(x)}parseQueryParam(S){const E=function ae(C){const S=C.match(xe);return S?S[0]:""}(this.remaining);if(!E)return;this.capture(E);let x="";if(this.consumeOptional("=")){const ee=function oe(C){const S=C.match(he);return S?S[0]:""}(this.remaining);ee&&(x=ee,this.capture(x))}const V=cr(E),K=cr(x);if(S.hasOwnProperty(V)){let ee=S[V];Array.isArray(ee)||(ee=[ee],S[V]=ee),ee.push(K)}else S[V]=K}parseParens(S){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=Q(this.remaining),V=this.remaining[x.length];if("/"!==V&&")"!==V&&";"!==V)throw new T.vHH(4010,Ut);let K;x.indexOf(":")>-1?(K=x.slice(0,x.indexOf(":")),this.capture(K),this.capture(":")):S&&(K=wt);const ee=this.parseChildren();E[K]=1===Object.keys(ee).length?ee[wt]:new ln([],ee),this.consumeOptional("//")}return E}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new T.vHH(4011,Ut)}}function et(C){return C.segments.length>0?new ln([],{[wt]:C}):C}function pt(C){const S={};for(const x of Object.keys(C.children)){const K=pt(C.children[x]);(K.segments.length>0||K.hasChildren())&&(S[x]=K)}return function en(C){if(1===C.numberOfChildren&&C.children[wt]){const S=C.children[wt];return new ln(C.segments.concat(S.segments),S.children)}return C}(new ln(C.segments,S))}function Bt(C){return C instanceof or}const Cn=!1;function qo(C,S,E,x,V){if(0===E.length)return ks(S.root,S.root,S.root,x,V);const K=function Vr(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new Xn(!0,0,C);let S=0,E=!1;const x=C.reduce((V,K,ee)=>{if("object"==typeof K&&null!=K){if(K.outlets){const Ne={};return Xt(K.outlets,(yt,Yt)=>{Ne[Yt]="string"==typeof yt?yt.split("/"):yt}),[...V,{outlets:Ne}]}if(K.segmentPath)return[...V,K.segmentPath]}return"string"!=typeof K?[...V,K]:0===ee?(K.split("/").forEach((Ne,yt)=>{0==yt&&"."===Ne||(0==yt&&""===Ne?E=!0:".."===Ne?S++:""!=Ne&&V.push(Ne))}),V):[...V,K]},[]);return new Xn(E,S,x)}(E);return K.toRoot()?ks(S.root,S.root,new ln([],{}),x,V):function ee(yt){const Yt=function $i(C,S,E,x){if(C.isAbsolute)return new Fr(S.root,!0,0);if(-1===x)return new Fr(E,E===S.root,0);return function si(C,S,E){let x=C,V=S,K=E;for(;K>V;){if(K-=V,x=x.parent,!x)throw new T.vHH(4005,Cn&&"Invalid number of '../'");V=x.segments.length}return new Fr(x,!1,V-K)}(E,x+(Qr(C.commands[0])?0:1),C.numberOfDoubleDots)}(K,S,C.snapshot?._urlSegment,yt),qt=Yt.processChildren?Ci(Yt.segmentGroup,Yt.index,K.commands):yi(Yt.segmentGroup,Yt.index,K.commands);return ks(S.root,Yt.segmentGroup,qt,x,V)}(C.snapshot?._lastPathIndex)}function Qr(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function ps(C){return"object"==typeof C&&null!=C&&C.outlets}function ks(C,S,E,x,V){let ee,K={};x&&Xt(x,(yt,Yt)=>{K[Yt]=Array.isArray(yt)?yt.map(qt=>`${qt}`):`${yt}`}),ee=C===S?E:No(C,S,E);const Ne=et(pt(ee));return new or(Ne,K,V)}function No(C,S,E){const x={};return Xt(C.children,(V,K)=>{x[K]=V===S?E:No(V,S,E)}),new ln(C.segments,x)}class Xn{constructor(S,E,x){if(this.isAbsolute=S,this.numberOfDoubleDots=E,this.commands=x,S&&x.length>0&&Qr(x[0]))throw new T.vHH(4003,Cn&&"Root segment cannot have matrix parameters");const V=x.find(ps);if(V&&V!==er(x))throw new T.vHH(4004,Cn&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fr{constructor(S,E,x){this.segmentGroup=S,this.processChildren=E,this.index=x}}function yi(C,S,E){if(C||(C=new ln([],{})),0===C.segments.length&&C.hasChildren())return Ci(C,S,E);const x=function Qt(C,S,E){let x=0,V=S;const K={match:!1,pathIndex:0,commandIndex:0};for(;V<C.segments.length;){if(x>=E.length)return K;const ee=C.segments[V],Ne=E[x];if(ps(Ne))break;const yt=`${Ne}`,Yt=x<E.length-1?E[x+1]:null;if(V>0&&void 0===yt)break;if(yt&&Yt&&"object"==typeof Yt&&void 0===Yt.outlets){if(!zi(yt,Yt,ee))return K;x+=2}else{if(!zi(yt,{},ee))return K;x++}V++}return{match:!0,pathIndex:V,commandIndex:x}}(C,S,E),V=E.slice(x.commandIndex);if(x.match&&x.pathIndex<C.segments.length){const K=new ln(C.segments.slice(0,x.pathIndex),{});return K.children[wt]=new ln(C.segments.slice(x.pathIndex),C.children),Ci(K,0,V)}return x.match&&0===V.length?new ln(C.segments,{}):x.match&&!C.hasChildren()?Mn(C,S,E):x.match?Ci(C,0,V):Mn(C,S,E)}function Ci(C,S,E){if(0===E.length)return new ln(C.segments,{});{const x=function ri(C){return ps(C[0])?C[0].outlets:{[wt]:C}}(E),V={};return!x[wt]&&C.children[wt]&&1===C.numberOfChildren&&0===C.children[wt].segments.length?Ci(C.children[wt],S,E):(Xt(x,(K,ee)=>{"string"==typeof K&&(K=[K]),null!==K&&(V[ee]=yi(C.children[ee],S,K))}),Xt(C.children,(K,ee)=>{void 0===x[ee]&&(V[ee]=K)}),new ln(C.segments,V))}}function Mn(C,S,E){const x=C.segments.slice(0,S);let V=0;for(;V<E.length;){const K=E[V];if(ps(K)){const yt=vr(K.outlets);return new ln(x,yt)}if(0===V&&Qr(E[0])){x.push(new Ir(C.segments[S].path,vi(E[0]))),V++;continue}const ee=ps(K)?K.outlets[wt]:`${K}`,Ne=V<E.length-1?E[V+1]:null;ee&&Ne&&Qr(Ne)?(x.push(new Ir(ee,vi(Ne))),V+=2):(x.push(new Ir(ee,{})),V++)}return new ln(x,{})}function vr(C){const S={};return Xt(C,(E,x)=>{"string"==typeof E&&(E=[E]),null!==E&&(S[x]=Mn(new ln([],{}),0,E))}),S}function vi(C){const S={};return Xt(C,(E,x)=>S[x]=`${E}`),S}function zi(C,S,E){return C==E.path&&Zn(S,E.parameters)}const br="imperative";class oi{constructor(S,E){this.id=S,this.url=E}}class Gr extends oi{constructor(S,E,x="imperative",V=null){super(S,E),this.type=0,this.navigationTrigger=x,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ai extends oi{constructor(S,E,x){super(S,E),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xa extends oi{constructor(S,E,x,V){super(S,E),this.reason=x,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends oi{constructor(S,E,x,V){super(S,E),this.reason=x,this.code=V,this.type=16}}class As extends oi{constructor(S,E,x,V){super(S,E),this.error=x,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mo extends oi{constructor(S,E,x,V){super(S,E),this.urlAfterRedirects=x,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yo extends oi{constructor(S,E,x,V){super(S,E),this.urlAfterRedirects=x,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ro extends oi{constructor(S,E,x,V,K){super(S,E),this.urlAfterRedirects=x,this.state=V,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ti extends oi{constructor(S,E,x,V){super(S,E),this.urlAfterRedirects=x,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uo extends oi{constructor(S,E,x,V){super(S,E),this.urlAfterRedirects=x,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jr{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bi{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Os{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pe{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _e{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Be{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ht{constructor(S,E,x){this.routerEvent=S,this.position=E,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let An=(()=>{class C{createUrlTree(E,x,V,K,ee,Ne){return qo(E||x.root,V,K,ee,Ne)}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac}),C})(),Pn=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(S){return An.\u0275fac(S)},providedIn:"root"}),C})();class co{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const E=this.pathFromRoot(S);return E.length>1?E[E.length-2]:null}children(S){const E=Lr(S,this._root);return E?E.children.map(x=>x.value):[]}firstChild(S){const E=Lr(S,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(S){const E=gr(S,this._root);return E.length<2?[]:E[E.length-2].children.map(V=>V.value).filter(V=>V!==S)}pathFromRoot(S){return gr(S,this._root).map(E=>E.value)}}function Lr(C,S){if(C===S.value)return S;for(const E of S.children){const x=Lr(C,E);if(x)return x}return null}function gr(C,S){if(C===S.value)return[S];for(const E of S.children){const x=gr(C,E);if(x.length)return x.unshift(S),x}return[]}class Fs{constructor(S,E){this.value=S,this.children=E}toString(){return`TreeNode(${this.value})`}}function Ls(C){const S={};return C&&C.children.forEach(E=>S[E.value.outlet]=E),S}class Wi extends co{constructor(S,E){super(S),this.snapshot=E,Po(this,S)}toString(){return this.snapshot.toString()}}function Us(C,S){const E=function Xa(C,S){const ee=new xo([],{},{},"",{},wt,S,null,C.root,-1,{});return new ha("",new Fs(ee,[]))}(C,S),x=new ye.X([new Ir("",{})]),V=new ye.X({}),K=new ye.X({}),ee=new ye.X({}),Ne=new ye.X(""),yt=new gs(x,V,ee,Ne,K,wt,S,E.root);return yt.snapshot=E.root,new Wi(new Fs(yt,[]),E)}class gs{constructor(S,E,x,V,K,ee,Ne,yt){this.url=S,this.params=E,this.queryParams=x,this.fragment=V,this.data=K,this.outlet=ee,this.component=Ne,this.title=this.data?.pipe((0,Xe.U)(Yt=>Yt[En]))??(0,h.of)(void 0),this._futureSnapshot=yt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(S=>Vn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(S=>Vn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function da(C,S="emptyOnly"){const E=C.pathFromRoot;let x=0;if("always"!==S)for(x=E.length-1;x>=1;){const V=E[x],K=E[x-1];if(V.routeConfig&&""===V.routeConfig.path)x--;else{if(K.component)break;x--}}return function ho(C){return C.reduce((S,E)=>({params:{...S.params,...E.params},data:{...S.data,...E.data},resolve:{...E.data,...S.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(x))}class xo{get title(){return this.data?.[En]}constructor(S,E,x,V,K,ee,Ne,yt,Yt,qt,qn){this.url=S,this.params=E,this.queryParams=x,this.fragment=V,this.data=K,this.outlet=ee,this.component=Ne,this.routeConfig=yt,this._urlSegment=Yt,this._lastPathIndex=qt,this._resolve=qn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ha extends co{constructor(S,E){super(E),this.url=S,Po(this,E)}toString(){return ko(this._root)}}function Po(C,S){S.value._routerState=C,S.children.forEach(E=>Po(C,E))}function ko(C){const S=C.children.length>0?` { ${C.children.map(ko).join(", ")} } `:"";return`${C.value}${S}`}function Ki(C){if(C.snapshot){const S=C.snapshot,E=C._futureSnapshot;C.snapshot=E,Zn(S.queryParams,E.queryParams)||C.queryParams.next(E.queryParams),S.fragment!==E.fragment&&C.fragment.next(E.fragment),Zn(S.params,E.params)||C.params.next(E.params),function Wr(C,S){if(C.length!==S.length)return!1;for(let E=0;E<C.length;++E)if(!Zn(C[E],S[E]))return!1;return!0}(S.url,E.url)||C.url.next(E.url),Zn(S.data,E.data)||C.data.next(E.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function el(C,S){const E=Zn(C.params,S.params)&&function Zr(C,S){return yr(C,S)&&C.every((E,x)=>Zn(E.parameters,S[x].parameters))}(C.url,S.url);return E&&!(!C.parent!=!S.parent)&&(!C.parent||el(C.parent,S.parent))}function ms(C,S,E){if(E&&C.shouldReuseRoute(S.value,E.value.snapshot)){const x=E.value;x._futureSnapshot=S.value;const V=function Gu(C,S,E){return S.children.map(x=>{for(const V of E.children)if(C.shouldReuseRoute(x.value,V.value.snapshot))return ms(C,x,V);return ms(C,x)})}(C,S,E);return new Fs(x,V)}{if(C.shouldAttach(S.value)){const K=C.retrieve(S.value);if(null!==K){const ee=K.route;return ee.value._futureSnapshot=S.value,ee.children=S.children.map(Ne=>ms(C,Ne)),ee}}const x=function tl(C){return new gs(new ye.X(C.url),new ye.X(C.params),new ye.X(C.queryParams),new ye.X(C.fragment),new ye.X(C.data),C.outlet,C.component,C)}(S.value),V=S.children.map(K=>ms(C,K));return new Fs(x,V)}}const as="ngNavigationCancelingError";function Fo(C,S){const{redirectTo:E,navigationBehaviorOptions:x}=Bt(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,V=Vs(!1,0,S);return V.url=E,V.navigationBehaviorOptions=x,V}function Vs(C,S,E){const x=new Error("NavigationCancelingError: "+(C||""));return x[as]=!0,x.cancellationCode=S,E&&(x.url=E),x}function fo(C){return Pa(C)&&Bt(C.url)}function Pa(C){return C&&C[as]}class ru{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Tr,this.attachRef=null}}let Tr=(()=>{class C{constructor(){this.contexts=new Map}onChildOutletCreated(E,x){const V=this.getOrCreateContext(E);V.outlet=x,this.contexts.set(E,V)}onChildOutletDestroyed(E){const x=this.getContext(E);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let x=this.getContext(E);return x||(x=new ru,this.contexts.set(E,x)),x}getContext(E){return this.contexts.get(E)||null}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Bi=!1;let Lo=(()=>{class C{constructor(){this.activated=null,this._activatedRoute=null,this.name=wt,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.parentContexts=(0,T.f3M)(Tr),this.location=(0,T.f3M)(T.s_b),this.changeDetector=(0,T.f3M)(T.sBO),this.environmentInjector=(0,T.f3M)(T.lqb)}ngOnChanges(E){if(E.name){const{firstChange:x,previousValue:V}=E.name;if(x)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(E){return this.parentContexts.getContext(E)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const E=this.parentContexts.getContext(this.name);E?.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.vHH(4012,Bi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.vHH(4012,Bi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.vHH(4012,Bi);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,x){this.activated=E,this._activatedRoute=x,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,x){if(this.isActivated)throw new T.vHH(4013,Bi);this._activatedRoute=E;const V=this.location,ee=E.snapshot.component,Ne=this.parentContexts.getOrCreateContext(this.name).children,yt=new Ns(E,Ne,V.injector);if(x&&function nl(C){return!!C.resolveComponentFactory}(x)){const Yt=x.resolveComponentFactory(ee);this.activated=V.createComponent(Yt,V.length,yt)}else this.activated=V.createComponent(ee,{index:V.length,injector:yt,environmentInjector:x??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275dir=T.lG2({type:C,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.TTD]}),C})();class Ns{constructor(S,E,x){this.route=S,this.childContexts=E,this.parent=x}get(S,E){return S===gs?this.route:S===Tr?this.childContexts:this.parent.get(S,E)}}let Js=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275cmp=T.Xpm({type:C,selectors:[["ng-component"]],standalone:!0,features:[T.jDz],decls:1,vars:0,template:function(E,x){1&E&&T._UZ(0,"router-outlet")},dependencies:[Lo],encapsulation:2}),C})();function Zo(C,S){return C.providers&&!C._injector&&(C._injector=(0,T.MMx)(C.providers,S,`Route: ${C.path}`)),C._injector??S}function Ur(C){const S=C.children&&C.children.map(Ur),E=S?{...C,children:S}:{...C};return!E.component&&!E.loadComponent&&(S||E.loadChildren)&&E.outlet&&E.outlet!==wt&&(E.component=Js),E}function Yi(C){return C.outlet||wt}function po(C,S){const E=C.filter(x=>Yi(x)===S);return E.push(...C.filter(x=>Yi(x)!==S)),E}function pi(C){if(!C)return null;if(C.routeConfig?._injector)return C.routeConfig._injector;for(let S=C.parent;S;S=S.parent){const E=S.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class il{constructor(S,E,x,V){this.routeReuseStrategy=S,this.futureState=E,this.currState=x,this.forwardEvent=V}activate(S){const E=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,x,S),Ki(this.futureState.root),this.activateChildRoutes(E,x,S)}deactivateChildRoutes(S,E,x){const V=Ls(E);S.children.forEach(K=>{const ee=K.value.outlet;this.deactivateRoutes(K,V[ee],x),delete V[ee]}),Xt(V,(K,ee)=>{this.deactivateRouteAndItsChildren(K,x)})}deactivateRoutes(S,E,x){const V=S.value,K=E?E.value:null;if(V===K)if(V.component){const ee=x.getContext(V.outlet);ee&&this.deactivateChildRoutes(S,E,ee.children)}else this.deactivateChildRoutes(S,E,x);else K&&this.deactivateRouteAndItsChildren(E,x)}deactivateRouteAndItsChildren(S,E){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,E):this.deactivateRouteAndOutlet(S,E)}detachAndStoreRouteSubtree(S,E){const x=E.getContext(S.value.outlet),V=x&&S.value.component?x.children:E,K=Ls(S);for(const ee of Object.keys(K))this.deactivateRouteAndItsChildren(K[ee],V);if(x&&x.outlet){const ee=x.outlet.detach(),Ne=x.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:ee,route:S,contexts:Ne})}}deactivateRouteAndOutlet(S,E){const x=E.getContext(S.value.outlet),V=x&&S.value.component?x.children:E,K=Ls(S);for(const ee of Object.keys(K))this.deactivateRouteAndItsChildren(K[ee],V);x&&x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated(),x.attachRef=null,x.resolver=null,x.route=null)}activateChildRoutes(S,E,x){const V=Ls(E);S.children.forEach(K=>{this.activateRoutes(K,V[K.value.outlet],x),this.forwardEvent(new Be(K.value.snapshot))}),S.children.length&&this.forwardEvent(new Pe(S.value.snapshot))}activateRoutes(S,E,x){const V=S.value,K=E?E.value:null;if(Ki(V),V===K)if(V.component){const ee=x.getOrCreateContext(V.outlet);this.activateChildRoutes(S,E,ee.children)}else this.activateChildRoutes(S,E,x);else if(V.component){const ee=x.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Ne=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ee.children.onOutletReAttached(Ne.contexts),ee.attachRef=Ne.componentRef,ee.route=Ne.route.value,ee.outlet&&ee.outlet.attach(Ne.componentRef,Ne.route.value),Ki(Ne.route.value),this.activateChildRoutes(S,null,ee.children)}else{const Ne=pi(V.snapshot),yt=Ne?.get(T._Vd)??null;ee.attachRef=null,ee.route=V,ee.resolver=yt,ee.injector=Ne,ee.outlet&&ee.outlet.activateWith(V,ee.injector),this.activateChildRoutes(S,null,ee.children)}}else this.activateChildRoutes(S,null,x)}}class Gs{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class gi{constructor(S,E){this.component=S,this.route=E}}function fa(C,S,E){const x=C._root;return Zi(x,S?S._root:null,E,[x.value])}function Xs(C,S){const E=Symbol(),x=S.get(C,E);return x===E?"function"!=typeof C||(0,T.Z0I)(C)?S.get(C):C:x}function Zi(C,S,E,x,V={canDeactivateChecks:[],canActivateChecks:[]}){const K=Ls(S);return C.children.forEach(ee=>{(function ka(C,S,E,x,V={canDeactivateChecks:[],canActivateChecks:[]}){const K=C.value,ee=S?S.value:null,Ne=E?E.getContext(C.value.outlet):null;if(ee&&K.routeConfig===ee.routeConfig){const yt=function Fl(C,S,E){if("function"==typeof E)return E(C,S);switch(E){case"pathParamsChange":return!yr(C.url,S.url);case"pathParamsOrQueryParamsChange":return!yr(C.url,S.url)||!Zn(C.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!el(C,S)||!Zn(C.queryParams,S.queryParams);default:return!el(C,S)}}(ee,K,K.routeConfig.runGuardsAndResolvers);yt?V.canActivateChecks.push(new Gs(x)):(K.data=ee.data,K._resolvedData=ee._resolvedData),Zi(C,S,K.component?Ne?Ne.children:null:E,x,V),yt&&Ne&&Ne.outlet&&Ne.outlet.isActivated&&V.canDeactivateChecks.push(new gi(Ne.outlet.component,ee))}else ee&&Dn(S,Ne,V),V.canActivateChecks.push(new Gs(x)),Zi(C,null,K.component?Ne?Ne.children:null:E,x,V)})(ee,K[ee.value.outlet],E,x.concat([ee.value]),V),delete K[ee.value.outlet]}),Xt(K,(ee,Ne)=>Dn(ee,E.getContext(Ne),V)),V}function Dn(C,S,E){const x=Ls(C),V=C.value;Xt(x,(K,ee)=>{Dn(K,V.component?S?S.children.getContext(ee):null:S,E)}),E.canDeactivateChecks.push(new gi(V.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,V))}function go(C){return"function"==typeof C}function ir(C){return C instanceof Ae.K||"EmptyError"===C?.name}const ol=Symbol("INITIAL_VALUE");function mo(){return(0,qe.w)(C=>(0,Ce.a)(C.map(S=>S.pipe((0,Mt.q)(1),(0,Se.O)(ol)))).pipe((0,Xe.U)(S=>{for(const E of S)if(!0!==E){if(E===ol)return ol;if(!1===E||E instanceof or)return E}return!0}),(0,Ie.h)(S=>S!==ol),(0,Mt.q)(1)))}function Jr(C){return(0,de.z)((0,Kt.b)(S=>{if(Bt(S))throw Fo(0,S)}),(0,Xe.U)(S=>!0===S))}const Xo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ea(C,S,E,x,V){const K=Ji(C,S,E);return K.matched?function Si(C,S,E,x){const V=S.canMatch;if(!V||0===V.length)return(0,h.of)(!0);const K=V.map(ee=>{const Ne=Xs(ee,C);return Sn(function Fa(C){return C&&go(C.canMatch)}(Ne)?Ne.canMatch(S,E):C.runInContext(()=>Ne(S,E)))});return(0,h.of)(K).pipe(mo(),Jr())}(x=Zo(S,x),S,E).pipe((0,Xe.U)(ee=>!0===ee?K:{...Xo})):(0,h.of)(K)}function Ji(C,S,E){if(""===S.path)return"full"===S.pathMatch&&(C.hasChildren()||E.length>0)?{...Xo}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const V=(S.matcher||Gn)(E,C,S);if(!V)return{...Xo};const K={};Xt(V.posParams,(Ne,yt)=>{K[yt]=Ne.path});const ee=V.consumed.length>0?{...K,...V.consumed[V.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:V.consumed,remainingSegments:E.slice(V.consumed.length),parameters:ee,positionalParamSegments:V.posParams??{}}}function Uo(C,S,E,x){if(E.length>0&&function ya(C,S,E){return E.some(x=>va(C,S,x)&&Yi(x)!==wt)}(C,E,x)){const K=new ln(S,function Ul(C,S,E,x){const V={};V[wt]=x,x._sourceSegment=C,x._segmentIndexShift=S.length;for(const K of E)if(""===K.path&&Yi(K)!==wt){const ee=new ln([],{});ee._sourceSegment=C,ee._segmentIndexShift=S.length,V[Yi(K)]=ee}return V}(C,S,x,new ln(E,C.children)));return K._sourceSegment=C,K._segmentIndexShift=S.length,{segmentGroup:K,slicedSegments:[]}}if(0===E.length&&function _o(C,S,E){return E.some(x=>va(C,S,x))}(C,E,x)){const K=new ln(C.segments,function Ba(C,S,E,x,V){const K={};for(const ee of x)if(va(C,E,ee)&&!V[Yi(ee)]){const Ne=new ln([],{});Ne._sourceSegment=C,Ne._segmentIndexShift=S.length,K[Yi(ee)]=Ne}return{...V,...K}}(C,S,E,x,C.children));return K._sourceSegment=C,K._segmentIndexShift=S.length,{segmentGroup:K,slicedSegments:E}}const V=new ln(C.segments,C.children);return V._sourceSegment=C,V._segmentIndexShift=S.length,{segmentGroup:V,slicedSegments:E}}function va(C,S,E){return(!(C.hasChildren()||S.length>0)||"full"!==E.pathMatch)&&""===E.path}function yo(C,S,E,x){return!!(Yi(C)===x||x!==wt&&va(S,E,C))&&("**"===C.path||Ji(S,C,E).matched)}function ba(C,S,E){return 0===S.length&&!C.children[E]}const Va=!1;class wa{constructor(S){this.segmentGroup=S||null}}class Ga{constructor(S){this.urlTree=S}}function ul(C){return Ye(new wa(C))}function au(C){return Ye(new Ga(C))}class Cl{constructor(S,E,x,V,K){this.injector=S,this.configLoader=E,this.urlSerializer=x,this.urlTree=V,this.config=K,this.allowRedirects=!0}apply(){const S=Uo(this.urlTree.root,[],[],this.config).segmentGroup,E=new ln(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,E,wt).pipe((0,Xe.U)(K=>this.createUrlTree(pt(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pt(K=>{if(K instanceof Ga)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof wa?this.noMatchError(K):K}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,wt).pipe((0,Xe.U)(V=>this.createUrlTree(pt(V),S.queryParams,S.fragment))).pipe(Pt(V=>{throw V instanceof wa?this.noMatchError(V):V}))}noMatchError(S){return new T.vHH(4002,Va)}createUrlTree(S,E,x){const V=et(S);return new or(V,E,x)}expandSegmentGroup(S,E,x,V){return 0===x.segments.length&&x.hasChildren()?this.expandChildren(S,E,x).pipe((0,Xe.U)(K=>new ln([],K))):this.expandSegment(S,x,E,x.segments,V,!0)}expandChildren(S,E,x){const V=[];for(const K of Object.keys(x.children))"primary"===K?V.unshift(K):V.push(K);return(0,Y.D)(V).pipe(vt(K=>{const ee=x.children[K],Ne=po(E,K);return this.expandSegmentGroup(S,Ne,ee,K).pipe((0,Xe.U)(yt=>({segment:yt,outlet:K})))}),(0,Ue.R)((K,ee)=>(K[ee.outlet]=ee.segment,K),{}),st())}expandSegment(S,E,x,V,K,ee){return(0,Y.D)(x).pipe(vt(Ne=>this.expandSegmentAgainstRoute(S,E,x,Ne,V,K,ee).pipe(Pt(Yt=>{if(Yt instanceof wa)return(0,h.of)(null);throw Yt}))),(0,it.P)(Ne=>!!Ne),Pt((Ne,yt)=>{if(ir(Ne))return ba(E,V,K)?(0,h.of)(new ln([],{})):ul(E);throw Ne}))}expandSegmentAgainstRoute(S,E,x,V,K,ee,Ne){return yo(V,E,K,ee)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(S,E,V,K,ee):Ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,E,x,V,K,ee):ul(E):ul(E)}expandSegmentAgainstRouteUsingRedirect(S,E,x,V,K,ee){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,x,V,ee):this.expandRegularSegmentAgainstRouteUsingRedirect(S,E,x,V,K,ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,E,x,V){const K=this.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?au(K):this.lineralizeSegments(x,K).pipe((0,tt.z)(ee=>{const Ne=new ln(ee,{});return this.expandSegment(S,Ne,E,ee,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,E,x,V,K,ee){const{matched:Ne,consumedSegments:yt,remainingSegments:Yt,positionalParamSegments:qt}=Ji(E,V,K);if(!Ne)return ul(E);const qn=this.applyRedirectCommands(yt,V.redirectTo,qt);return V.redirectTo.startsWith("/")?au(qn):this.lineralizeSegments(V,qn).pipe((0,tt.z)(ei=>this.expandSegment(S,E,x,ei.concat(Yt),ee,!1)))}matchSegmentAgainstRoute(S,E,x,V,K){return"**"===x.path?(S=Zo(x,S),x.loadChildren?(x._loadedRoutes?(0,h.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):this.configLoader.loadChildren(S,x)).pipe((0,Xe.U)(Ne=>(x._loadedRoutes=Ne.routes,x._loadedInjector=Ne.injector,new ln(V,{})))):(0,h.of)(new ln(V,{}))):ea(E,x,V,S).pipe((0,qe.w)(({matched:ee,consumedSegments:Ne,remainingSegments:yt})=>ee?this.getChildConfig(S=x._injector??S,x,V).pipe((0,tt.z)(qt=>{const qn=qt.injector??S,ei=qt.routes,{segmentGroup:_i,slicedSegments:$s}=Uo(E,Ne,yt,ei),zs=new ln(_i.segments,_i.children);if(0===$s.length&&zs.hasChildren())return this.expandChildren(qn,ei,zs).pipe((0,Xe.U)(jo=>new ln(Ne,jo)));if(0===ei.length&&0===$s.length)return(0,h.of)(new ln(Ne,{}));const Ws=Yi(x)===K;return this.expandSegment(qn,zs,ei,$s,Ws?wt:K,!0).pipe((0,Xe.U)(pl=>new ln(Ne.concat(pl.segments),pl.children)))})):ul(E)))}getChildConfig(S,E,x){return E.children?(0,h.of)({routes:E.children,injector:S}):E.loadChildren?void 0!==E._loadedRoutes?(0,h.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function ll(C,S,E,x){const V=S.canLoad;if(void 0===V||0===V.length)return(0,h.of)(!0);const K=V.map(ee=>{const Ne=Xs(ee,C);return Sn(function Il(C){return C&&go(C.canLoad)}(Ne)?Ne.canLoad(S,E):C.runInContext(()=>Ne(S,E)))});return(0,h.of)(K).pipe(mo(),Jr())}(S,E,x).pipe((0,tt.z)(V=>V?this.configLoader.loadChildren(S,E).pipe((0,Kt.b)(K=>{E._loadedRoutes=K.routes,E._loadedInjector=K.injector})):function ju(C){return Ye(Vs(Va,3))}())):(0,h.of)({routes:[],injector:S})}lineralizeSegments(S,E){let x=[],V=E.root;for(;;){if(x=x.concat(V.segments),0===V.numberOfChildren)return(0,h.of)(x);if(V.numberOfChildren>1||!V.children[wt])return S.redirectTo,Ye(new T.vHH(4e3,Va));V=V.children[wt]}}applyRedirectCommands(S,E,x){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),S,x)}applyRedirectCreateUrlTree(S,E,x,V){const K=this.createSegmentGroup(S,E.root,x,V);return new or(K,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(S,E){const x={};return Xt(S,(V,K)=>{if("string"==typeof V&&V.startsWith(":")){const Ne=V.substring(1);x[K]=E[Ne]}else x[K]=V}),x}createSegmentGroup(S,E,x,V){const K=this.createSegments(S,E.segments,x,V);let ee={};return Xt(E.children,(Ne,yt)=>{ee[yt]=this.createSegmentGroup(S,Ne,x,V)}),new ln(K,ee)}createSegments(S,E,x,V){return E.map(K=>K.path.startsWith(":")?this.findPosParam(S,K,V):this.findOrReturn(K,x))}findPosParam(S,E,x){const V=x[E.path.substring(1)];if(!V)throw new T.vHH(4001,Va);return V}findOrReturn(S,E){let x=0;for(const V of E){if(V.path===S.path)return E.splice(x),V;x++}return S}}class Xr{}class ui{constructor(S,E,x,V,K,ee,Ne){this.injector=S,this.rootComponentType=E,this.config=x,this.urlTree=V,this.url=K,this.paramsInheritanceStrategy=ee,this.urlSerializer=Ne}recognize(){const S=Uo(this.urlTree.root,[],[],this.config.filter(E=>void 0===E.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,wt).pipe((0,Xe.U)(E=>{if(null===E)return null;const x=new xo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Fs(x,E),K=new ha(this.url,V);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(S){const E=S.value,x=da(E,this.paramsInheritanceStrategy);E.params=Object.freeze(x.params),E.data=Object.freeze(x.data),S.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(S,E,x,V){return 0===x.segments.length&&x.hasChildren()?this.processChildren(S,E,x):this.processSegment(S,E,x,x.segments,V)}processChildren(S,E,x){return(0,Y.D)(Object.keys(x.children)).pipe(vt(V=>{const K=x.children[V],ee=po(E,V);return this.processSegmentGroup(S,ee,K,V)}),(0,Ue.R)((V,K)=>V&&K?(V.push(...K),V):null),function kt(C,S=!1){return(0,It.e)((E,x)=>{let V=0;E.subscribe((0,Ze.x)(x,K=>{const ee=C(K,V++);(ee||S)&&x.next(K),!ee&&x.complete()}))})}(V=>null!==V),(0,rt.d)(null),st(),(0,Xe.U)(V=>{if(null===V)return null;const K=uu(V);return function Ic(C){C.sort((S,E)=>S.value.outlet===wt?-1:E.value.outlet===wt?1:S.value.outlet.localeCompare(E.value.outlet))}(K),K}))}processSegment(S,E,x,V,K){return(0,Y.D)(E).pipe(vt(ee=>this.processSegmentAgainstRoute(ee._injector??S,ee,x,V,K)),(0,it.P)(ee=>!!ee),Pt(ee=>{if(ir(ee))return ba(x,V,K)?(0,h.of)([]):(0,h.of)(null);throw ee}))}processSegmentAgainstRoute(S,E,x,V,K){if(E.redirectTo||!yo(E,x,V,K))return(0,h.of)(null);let ee;if("**"===E.path){const Ne=V.length>0?er(V).parameters:{},yt=R(x)+V.length,Yt=new xo(V,Ne,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,L(E),Yi(E),E.component??E._loadedComponent??null,E,Ea(x),yt,J(E));ee=(0,h.of)({snapshot:Yt,consumedSegments:[],remainingSegments:[]})}else ee=ea(x,E,V,S).pipe((0,Xe.U)(({matched:Ne,consumedSegments:yt,remainingSegments:Yt,parameters:qt})=>{if(!Ne)return null;const qn=R(x)+yt.length;return{snapshot:new xo(yt,qt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,L(E),Yi(E),E.component??E._loadedComponent??null,E,Ea(x),qn,J(E)),consumedSegments:yt,remainingSegments:Yt}}));return ee.pipe((0,qe.w)(Ne=>{if(null===Ne)return(0,h.of)(null);const{snapshot:yt,consumedSegments:Yt,remainingSegments:qt}=Ne;S=E._injector??S;const qn=E._loadedInjector??S,ei=function ud(C){return C.children?C.children:C.loadChildren?C._loadedRoutes:[]}(E),{segmentGroup:_i,slicedSegments:$s}=Uo(x,Yt,qt,ei.filter(Ws=>void 0===Ws.redirectTo));if(0===$s.length&&_i.hasChildren())return this.processChildren(qn,ei,_i).pipe((0,Xe.U)(Ws=>null===Ws?null:[new Fs(yt,Ws)]));if(0===ei.length&&0===$s.length)return(0,h.of)([new Fs(yt,[])]);const zs=Yi(E)===K;return this.processSegment(qn,ei,_i,$s,zs?wt:K).pipe((0,Xe.U)(Ws=>null===Ws?null:[new Fs(yt,Ws)]))}))}}function Vl(C){const S=C.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function uu(C){const S=[],E=new Set;for(const x of C){if(!Vl(x)){S.push(x);continue}const V=S.find(K=>x.value.routeConfig===K.value.routeConfig);void 0!==V?(V.children.push(...x.children),E.add(V)):S.push(x)}for(const x of E){const V=uu(x.children);S.push(new Fs(x.value,V))}return S.filter(x=>!E.has(x))}function Ea(C){let S=C;for(;S._sourceSegment;)S=S._sourceSegment;return S}function R(C){let S=C,E=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,E+=S._segmentIndexShift??0;return E-1}function L(C){return C.data||{}}function J(C){return C.resolve||{}}function dn(C){return"string"==typeof C.title||null===C.title}function jn(C){return(0,qe.w)(S=>{const E=C(S);return E?(0,Y.D)(E).pipe((0,Xe.U)(()=>S)):(0,h.of)(S)})}const Ct=new T.OlP("ROUTES");let Ft=(()=>{class C{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.f3M)(T.Sil)}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,h.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const x=Sn(E.loadComponent()).pipe((0,Xe.U)(St),(0,Kt.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=K}),on(()=>{this.componentLoaders.delete(E)})),V=new ge(x,()=>new ut.x).pipe(at());return this.componentLoaders.set(E,V),V}loadChildren(E,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,h.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const K=this.loadModuleFactoryOrRoutes(x.loadChildren).pipe((0,Xe.U)(Ne=>{this.onLoadEndListener&&this.onLoadEndListener(x);let yt,Yt,qt=!1;Array.isArray(Ne)?Yt=Ne:(yt=Ne.create(E).injector,Yt=Nn(yt.get(Ct,[],T.XFs.Self|T.XFs.Optional)));return{routes:Yt.map(Ur),injector:yt}}),on(()=>{this.childrenLoaders.delete(x)})),ee=new ge(K,()=>new ut.x).pipe(at());return this.childrenLoaders.set(x,ee),ee}loadModuleFactoryOrRoutes(E){return Sn(E()).pipe((0,Xe.U)(St),(0,tt.z)(x=>x instanceof T.YKP||Array.isArray(x)?(0,h.of)(x):(0,Y.D)(this.compiler.compileModuleAsync(x))))}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function St(C){return function Ai(C){return C&&"object"==typeof C&&"default"in C}(C)?C.default:C}let _t=(()=>{class C{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ut.x,this.configLoader=(0,T.f3M)(Ft),this.environmentInjector=(0,T.f3M)(T.lqb),this.urlSerializer=(0,T.f3M)(Kr),this.rootContexts=(0,T.f3M)(Tr),this.navigationId=0,this.afterPreactivation=()=>(0,h.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new bi(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new jr(V))}complete(){this.transitions?.complete()}handleNavigationRequest(E){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...E,id:x})}setupNavigations(E){return this.transitions=new ye.X({id:0,targetPageId:0,currentUrlTree:E.currentUrlTree,currentRawUrl:E.currentUrlTree,extractedUrl:E.urlHandlingStrategy.extract(E.currentUrlTree),urlAfterRedirects:E.urlHandlingStrategy.extract(E.currentUrlTree),rawUrl:E.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:br,restoredState:null,currentSnapshot:E.routerState.snapshot,targetSnapshot:null,currentRouterState:E.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ie.h)(x=>0!==x.id),(0,Xe.U)(x=>({...x,extractedUrl:E.urlHandlingStrategy.extract(x.rawUrl)})),(0,qe.w)(x=>{let V=!1,K=!1;return(0,h.of)(x).pipe((0,Kt.b)(ee=>{this.currentNavigation={id:ee.id,initialUrl:ee.rawUrl,extractedUrl:ee.extractedUrl,trigger:ee.source,extras:ee.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,qe.w)(ee=>{const Ne=E.browserUrlTree.toString(),yt=!E.navigated||ee.extractedUrl.toString()!==Ne||Ne!==E.currentUrlTree.toString();if(!yt&&"reload"!==(ee.extras.onSameUrlNavigation??E.onSameUrlNavigation)){const qt="";return this.events.next(new Ln(ee.id,E.serializeUrl(x.rawUrl),qt,0)),E.rawUrlTree=ee.rawUrl,ee.resolve(null),Je.E}if(E.urlHandlingStrategy.shouldProcessUrl(ee.rawUrl))return Er(ee.source)&&(E.browserUrlTree=ee.extractedUrl),(0,h.of)(ee).pipe((0,qe.w)(qt=>{const qn=this.transitions?.getValue();return this.events.next(new Gr(qt.id,this.urlSerializer.serialize(qt.extractedUrl),qt.source,qt.restoredState)),qn!==this.transitions?.getValue()?Je.E:Promise.resolve(qt)}),function Hu(C,S,E,x){return(0,qe.w)(V=>function lu(C,S,E,x,V){return new Cl(C,S,E,x,V).apply()}(C,S,E,V.extractedUrl,x).pipe((0,Xe.U)(K=>({...V,urlAfterRedirects:K}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,E.config),(0,Kt.b)(qt=>{this.currentNavigation={...this.currentNavigation,finalUrl:qt.urlAfterRedirects},x.urlAfterRedirects=qt.urlAfterRedirects}),function ce(C,S,E,x,V){return(0,tt.z)(K=>function Bl(C,S,E,x,V,K,ee="emptyOnly"){return new ui(C,S,E,x,V,ee,K).recognize().pipe((0,qe.w)(Ne=>null===Ne?function Hr(C){return new Re.y(S=>S.error(C))}(new Xr):(0,h.of)(Ne)))}(C,S,E,K.urlAfterRedirects,x.serialize(K.urlAfterRedirects),x,V).pipe((0,Xe.U)(ee=>({...K,targetSnapshot:ee}))))}(this.environmentInjector,this.rootComponentType,E.config,this.urlSerializer,E.paramsInheritanceStrategy),(0,Kt.b)(qt=>{if(x.targetSnapshot=qt.targetSnapshot,"eager"===E.urlUpdateStrategy){if(!qt.extras.skipLocationChange){const ei=E.urlHandlingStrategy.merge(qt.urlAfterRedirects,qt.rawUrl);E.setBrowserUrl(ei,qt)}E.browserUrlTree=qt.urlAfterRedirects}const qn=new Mo(qt.id,this.urlSerializer.serialize(qt.extractedUrl),this.urlSerializer.serialize(qt.urlAfterRedirects),qt.targetSnapshot);this.events.next(qn)}));if(yt&&E.urlHandlingStrategy.shouldProcessUrl(E.rawUrlTree)){const{id:qt,extractedUrl:qn,source:ei,restoredState:_i,extras:$s}=ee,zs=new Gr(qt,this.urlSerializer.serialize(qn),ei,_i);this.events.next(zs);const Ws=Us(qn,this.rootComponentType).snapshot;return x={...ee,targetSnapshot:Ws,urlAfterRedirects:qn,extras:{...$s,skipLocationChange:!1,replaceUrl:!1}},(0,h.of)(x)}{const qt="";return this.events.next(new Ln(ee.id,E.serializeUrl(x.extractedUrl),qt,1)),E.rawUrlTree=ee.rawUrl,ee.resolve(null),Je.E}}),(0,Kt.b)(ee=>{const Ne=new Yo(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(Ne)}),(0,Xe.U)(ee=>x={...ee,guards:fa(ee.targetSnapshot,ee.currentSnapshot,this.rootContexts)}),function Mi(C,S){return(0,tt.z)(E=>{const{targetSnapshot:x,currentSnapshot:V,guards:{canActivateChecks:K,canDeactivateChecks:ee}}=E;return 0===ee.length&&0===K.length?(0,h.of)({...E,guardsResult:!0}):function La(C,S,E,x){return(0,Y.D)(C).pipe((0,tt.z)(V=>function al(C,S,E,x,V){const K=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,h.of)(!0);const ee=K.map(Ne=>{const yt=pi(S)??V,Yt=Xs(Ne,yt);return Sn(function Jo(C){return C&&go(C.canDeactivate)}(Yt)?Yt.canDeactivate(C,S,E,x):yt.runInContext(()=>Yt(C,S,E,x))).pipe((0,it.P)())});return(0,h.of)(ee).pipe(mo())}(V.component,V.route,E,S,x)),(0,it.P)(V=>!0!==V,!0))}(ee,x,V,C).pipe((0,tt.z)(Ne=>Ne&&function pa(C){return"boolean"==typeof C}(Ne)?function ma(C,S,E,x){return(0,Y.D)(S).pipe(vt(V=>(0,Fe.z)(function Ua(C,S){return null!==C&&S&&S(new Os(C)),(0,h.of)(!0)}(V.route.parent,x),function Qi(C,S){return null!==C&&S&&S(new _e(C)),(0,h.of)(!0)}(V.route,x),function eo(C,S,E){const x=S[S.length-1],K=S.slice(0,S.length-1).reverse().map(ee=>function sl(C){const S=C.routeConfig?C.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:C,guards:S}:null}(ee)).filter(ee=>null!==ee).map(ee=>pe(()=>{const Ne=ee.guards.map(yt=>{const Yt=pi(ee.node)??E,qt=Xs(yt,Yt);return Sn(function Ll(C){return C&&go(C.canActivateChild)}(qt)?qt.canActivateChild(x,C):Yt.runInContext(()=>qt(x,C))).pipe((0,it.P)())});return(0,h.of)(Ne).pipe(mo())}));return(0,h.of)(K).pipe(mo())}(C,V.path,E),function _a(C,S,E){const x=S.routeConfig?S.routeConfig.canActivate:null;if(!x||0===x.length)return(0,h.of)(!0);const V=x.map(K=>pe(()=>{const ee=pi(S)??E,Ne=Xs(K,ee);return Sn(function ga(C){return C&&go(C.canActivate)}(Ne)?Ne.canActivate(S,C):ee.runInContext(()=>Ne(S,C))).pipe((0,it.P)())}));return(0,h.of)(V).pipe(mo())}(C,V.route,E))),(0,it.P)(V=>!0!==V,!0))}(x,K,C,S):(0,h.of)(Ne)),(0,Xe.U)(Ne=>({...E,guardsResult:Ne})))})}(this.environmentInjector,ee=>this.events.next(ee)),(0,Kt.b)(ee=>{if(x.guardsResult=ee.guardsResult,Bt(ee.guardsResult))throw Fo(0,ee.guardsResult);const Ne=new Ro(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot,!!ee.guardsResult);this.events.next(Ne)}),(0,Ie.h)(ee=>!!ee.guardsResult||(E.restoreHistory(ee),this.cancelNavigationTransition(ee,"",3),!1)),jn(ee=>{if(ee.guards.canActivateChecks.length)return(0,h.of)(ee).pipe((0,Kt.b)(Ne=>{const yt=new Ti(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects),Ne.targetSnapshot);this.events.next(yt)}),(0,qe.w)(Ne=>{let yt=!1;return(0,h.of)(Ne).pipe(function Ve(C,S){return(0,tt.z)(E=>{const{targetSnapshot:x,guards:{canActivateChecks:V}}=E;if(!V.length)return(0,h.of)(E);let K=0;return(0,Y.D)(V).pipe(vt(ee=>function bt(C,S,E,x){const V=C.routeConfig,K=C._resolve;return void 0!==V?.title&&!dn(V)&&(K[En]=V.title),function un(C,S,E,x){const V=function _r(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}(C);if(0===V.length)return(0,h.of)({});const K={};return(0,Y.D)(V).pipe((0,tt.z)(ee=>function lt(C,S,E,x){const V=pi(S)??x,K=Xs(C,V);return Sn(K.resolve?K.resolve(S,E):V.runInContext(()=>K(S,E)))}(C[ee],S,E,x).pipe((0,it.P)(),(0,Kt.b)(Ne=>{K[ee]=Ne}))),nt(1),(0,Et.h)(K),Pt(ee=>ir(ee)?Je.E:Ye(ee)))}(K,C,S,x).pipe((0,Xe.U)(ee=>(C._resolvedData=ee,C.data=da(C,E).resolve,V&&dn(V)&&(C.data[En]=V.title),null)))}(ee.route,x,C,S)),(0,Kt.b)(()=>K++),nt(1),(0,tt.z)(ee=>K===V.length?(0,h.of)(E):Je.E))})}(E.paramsInheritanceStrategy,this.environmentInjector),(0,Kt.b)({next:()=>yt=!0,complete:()=>{yt||(E.restoreHistory(Ne),this.cancelNavigationTransition(Ne,"",2))}}))}),(0,Kt.b)(Ne=>{const yt=new uo(Ne.id,this.urlSerializer.serialize(Ne.extractedUrl),this.urlSerializer.serialize(Ne.urlAfterRedirects),Ne.targetSnapshot);this.events.next(yt)}))}),jn(ee=>{const Ne=yt=>{const Yt=[];yt.routeConfig?.loadComponent&&!yt.routeConfig._loadedComponent&&Yt.push(this.configLoader.loadComponent(yt.routeConfig).pipe((0,Kt.b)(qt=>{yt.component=qt}),(0,Xe.U)(()=>{})));for(const qt of yt.children)Yt.push(...Ne(qt));return Yt};return(0,Ce.a)(Ne(ee.targetSnapshot.root)).pipe((0,rt.d)(),(0,Mt.q)(1))}),jn(()=>this.afterPreactivation()),(0,Xe.U)(ee=>{const Ne=function Bs(C,S,E){const x=ms(C,S._root,E?E._root:void 0);return new Wi(x,S)}(E.routeReuseStrategy,ee.targetSnapshot,ee.currentRouterState);return x={...ee,targetRouterState:Ne}}),(0,Kt.b)(ee=>{E.currentUrlTree=ee.urlAfterRedirects,E.rawUrlTree=E.urlHandlingStrategy.merge(ee.urlAfterRedirects,ee.rawUrl),E.routerState=ee.targetRouterState,"deferred"===E.urlUpdateStrategy&&(ee.extras.skipLocationChange||E.setBrowserUrl(E.rawUrlTree,ee),E.browserUrlTree=ee.urlAfterRedirects)}),((C,S,E)=>(0,Xe.U)(x=>(new il(S,x.targetRouterState,x.currentRouterState,E).activate(C),x)))(this.rootContexts,E.routeReuseStrategy,ee=>this.events.next(ee)),(0,Kt.b)({next:ee=>{V=!0,this.lastSuccessfulNavigation=this.currentNavigation,E.navigated=!0,this.events.next(new ai(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(E.currentUrlTree))),E.titleStrategy?.updateTitle(ee.targetRouterState.snapshot),ee.resolve(!0)},complete:()=>{V=!0}}),on(()=>{V||K||this.cancelNavigationTransition(x,"",1),this.currentNavigation?.id===x.id&&(this.currentNavigation=null)}),Pt(ee=>{if(K=!0,Pa(ee)){fo(ee)||(E.navigated=!0,E.restoreHistory(x,!0));const Ne=new xa(x.id,this.urlSerializer.serialize(x.extractedUrl),ee.message,ee.cancellationCode);if(this.events.next(Ne),fo(ee)){const yt=E.urlHandlingStrategy.merge(ee.url,E.rawUrlTree),Yt={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===E.urlUpdateStrategy||Er(x.source)};E.scheduleNavigation(yt,br,null,Yt,{resolve:x.resolve,reject:x.reject,promise:x.promise})}else x.resolve(!1)}else{E.restoreHistory(x,!0);const Ne=new As(x.id,this.urlSerializer.serialize(x.extractedUrl),ee,x.targetSnapshot??void 0);this.events.next(Ne);try{x.resolve(E.errorHandler(ee))}catch(yt){x.reject(yt)}}return Je.E}))}))}cancelNavigationTransition(E,x,V){const K=new xa(E.id,this.urlSerializer.serialize(E.extractedUrl),x,V);this.events.next(K),E.resolve(!1)}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Er(C){return C!==br}let ys=(()=>{class C{buildTitle(E){let x,V=E.root;for(;void 0!==V;)x=this.getResolvedTitleForRoute(V)??x,V=V.children.find(K=>K.outlet===wt);return x}getResolvedTitleForRoute(E){return E.data[En]}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return(0,T.f3M)(dl)},providedIn:"root"}),C})(),dl=(()=>{class C extends ys{constructor(E){super(),this.title=E}updateTitle(E){const x=this.buildTitle(E);void 0!==x&&this.title.setTitle(x)}}return C.\u0275fac=function(E){return new(E||C)(T.LFG($t.Dx))},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),ja=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return(0,T.f3M)(Da)},providedIn:"root"}),C})();class Bo{shouldDetach(S){return!1}store(S,E){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,E){return S.routeConfig===E.routeConfig}}let Da=(()=>{class C extends Bo{}return C.\u0275fac=function(){let S;return function(x){return(S||(S=T.n5z(C)))(x||C)}}(),C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Vo=new T.OlP("",{providedIn:"root",factory:()=>({})});let $u=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return(0,T.f3M)(cu)},providedIn:"root"}),C})(),cu=(()=>{class C{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,x){return E}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Tl(C){throw C}function On(C,S,E){return S.parse("/")}const Ia={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},du={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ar=(()=>{class C{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,T.f3M)(T.c2e),this.isNgZoneEnabled=!1,this.options=(0,T.f3M)(Vo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Tl,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||On,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,T.f3M)($u),this.routeReuseStrategy=(0,T.f3M)(ja),this.urlCreationStrategy=(0,T.f3M)(Pn),this.titleStrategy=(0,T.f3M)(ys),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Nn((0,T.f3M)(Ct,{optional:!0})??[]),this.navigationTransitions=(0,T.f3M)(_t),this.urlSerializer=(0,T.f3M)(Kr),this.location=(0,T.f3M)(ot.Ye),this.isNgZoneEnabled=(0,T.f3M)(T.R0b)instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new or,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Us(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(E=>{this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}resetRootComponentType(E){this.routerState.root.component=E,this.navigationTransitions.rootComponentType=E}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const E=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),br,E)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const x="popstate"===E.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{this.navigateToSyncWithBrowser(E.url,x,E.state)},0)}))}navigateToSyncWithBrowser(E,x,V){const K={replaceUrl:!0},ee=V?.navigationId?V:null;if(V){const yt={...V};delete yt.navigationId,delete yt.\u0275routerPageId,0!==Object.keys(yt).length&&(K.state=yt)}const Ne=this.parseUrl(E);this.scheduleNavigation(Ne,x,ee,K)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(E){this.config=E.map(Ur),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,x={}){const{relativeTo:V,queryParams:K,fragment:ee,queryParamsHandling:Ne,preserveFragment:yt}=x,Yt=yt?this.currentUrlTree.fragment:ee;let qt=null;switch(Ne){case"merge":qt={...this.currentUrlTree.queryParams,...K};break;case"preserve":qt=this.currentUrlTree.queryParams;break;default:qt=K||null}return null!==qt&&(qt=this.removeEmptyProps(qt)),this.urlCreationStrategy.createUrlTree(V,this.routerState,this.currentUrlTree,E,qt,Yt??null)}navigateByUrl(E,x={skipLocationChange:!1}){const V=Bt(E)?E:this.parseUrl(E),K=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(K,br,null,x)}navigate(E,x={skipLocationChange:!1}){return function gn(C){for(let S=0;S<C.length;S++){const E=C[S];if(null==E)throw new T.vHH(4008,false)}}(E),this.navigateByUrl(this.createUrlTree(E,x),x)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let x;try{x=this.urlSerializer.parse(E)}catch(V){x=this.malformedUriErrorHandler(V,this.urlSerializer,E)}return x}isActive(E,x){let V;if(V=!0===x?{...Ia}:!1===x?{...du}:x,Bt(E))return kr(this.currentUrlTree,E,V);const K=this.parseUrl(E);return kr(this.currentUrlTree,K,V)}removeEmptyProps(E){return Object.keys(E).reduce((x,V)=>{const K=E[V];return null!=K&&(x[V]=K),x},{})}scheduleNavigation(E,x,V,K,ee){if(this.disposed)return Promise.resolve(!1);let Ne,yt,Yt,qt;return ee?(Ne=ee.resolve,yt=ee.reject,Yt=ee.promise):Yt=new Promise((qn,ei)=>{Ne=qn,yt=ei}),qt="computed"===this.canceledNavigationResolution?V&&V.\u0275routerPageId?V.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:qt,source:x,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:E,extras:K,resolve:Ne,reject:yt,promise:Yt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Yt.catch(qn=>Promise.reject(qn))}setBrowserUrl(E,x){const V=this.urlSerializer.serialize(E),K={...x.extras.state,...this.generateNgRouterState(x.id,x.targetPageId)};this.location.isCurrentPathEqualTo(V)||x.extras.replaceUrl?this.location.replaceState(V,"",K):this.location.go(V,"",K)}restoreHistory(E,x=!1){if("computed"===this.canceledNavigationResolution){const V=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===V?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===V&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(V)}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(E,x){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:x}:{navigationId:E}}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),Ha=(()=>{class C{constructor(E,x,V,K,ee,Ne){this.router=E,this.route=x,this.tabIndexAttribute=V,this.renderer=K,this.el=ee,this.locationStrategy=Ne,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ut.x;const yt=ee.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===yt||"area"===yt,this.isAnchorElement?this.subscription=E.events.subscribe(Yt=>{Yt instanceof ai&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(E){this._preserveFragment=(0,T.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,T.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,T.D6c)(E)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(E){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",E)}ngOnChanges(E){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(E,x,V,K,ee){return!!(null===this.urlTree||this.isAnchorElement&&(0!==E||x||V||K||ee||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const E=null===this.href?null:(0,T.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",E)}applyAttributeValue(E,x){const V=this.renderer,K=this.el.nativeElement;null!==x?V.setAttribute(K,E,x):V.removeAttribute(K,E)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return C.\u0275fac=function(E){return new(E||C)(T.Y36(ar),T.Y36(gs),T.$8M("tabindex"),T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(ot.S$))},C.\u0275dir=T.lG2({type:C,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(E,x){1&E&&T.NdJ("click",function(K){return x.onClick(K.button,K.ctrlKey,K.shiftKey,K.altKey,K.metaKey)}),2&E&&T.uIk("target",x.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[T.TTD]}),C})();class Hn{}let vs=(()=>{class C{constructor(E,x,V,K,ee){this.router=E,this.injector=V,this.preloadingStrategy=K,this.loader=ee}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ie.h)(E=>E instanceof ai),vt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,x){const V=[];for(const K of x){K.providers&&!K._injector&&(K._injector=(0,T.MMx)(K.providers,E,`Route: ${K.path}`));const ee=K._injector??E,Ne=K._loadedInjector??ee;K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent?V.push(this.preloadConfig(ee,K)):(K.children||K._loadedRoutes)&&V.push(this.processRoutes(Ne,K.children??K._loadedRoutes))}return(0,Y.D)(V).pipe((0,Gt.J)())}preloadConfig(E,x){return this.preloadingStrategy.preload(x,()=>{let V;V=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(E,x):(0,h.of)(null);const K=V.pipe((0,tt.z)(ee=>null===ee?(0,h.of)(void 0):(x._loadedRoutes=ee.routes,x._loadedInjector=ee.injector,this.processRoutes(ee.injector??E,ee.routes))));if(x.loadComponent&&!x._loadedComponent){const ee=this.loader.loadComponent(x);return(0,Y.D)([K,ee]).pipe((0,Gt.J)())}return K})}}return C.\u0275fac=function(E){return new(E||C)(T.LFG(ar),T.LFG(T.Sil),T.LFG(T.lqb),T.LFG(Hn),T.LFG(Ft))},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Vi=new T.OlP("");let za=(()=>{class C{constructor(E,x,V,K,ee={}){this.urlSerializer=E,this.transitions=x,this.viewportScroller=V,this.zone=K,this.options=ee,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ee.scrollPositionRestoration=ee.scrollPositionRestoration||"disabled",ee.anchorScrolling=ee.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof Gr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof ai&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof ht&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ht(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return C.\u0275fac=function(E){T.$Z()},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac}),C})();var Nr=(()=>((Nr=Nr||{})[Nr.COMPLETE=0]="COMPLETE",Nr[Nr.FAILED=1]="FAILED",Nr[Nr.REDIRECTING=2]="REDIRECTING",Nr))();const Gi=!1;function Oi(C,S){return{\u0275kind:C,\u0275providers:S}}const to=new T.OlP("",{providedIn:"root",factory:()=>!1});function Go(){const C=(0,T.f3M)(T.zs3);return S=>{const E=C.get(T.z2F);if(S!==E.components[0])return;const x=C.get(ar),V=C.get(Qe);1===C.get(ta)&&x.initialNavigation(),C.get(bs,null,T.XFs.Optional)?.setUpPreloading(),C.get(Vi,null,T.XFs.Optional)?.init(),x.resetRootComponentType(E.componentTypes[0]),V.closed||(V.next(),V.unsubscribe())}}const Qe=new T.OlP(Gi?"bootstrap done indicator":"",{factory:()=>new ut.x}),ta=new T.OlP(Gi?"initial navigation":"",{providedIn:"root",factory:()=>1});function Ku(){let C=[];return C=Gi?[{provide:T.Xts,multi:!0,useFactory:()=>{const S=(0,T.f3M)(ar);return()=>S.events.subscribe(E=>{console.group?.(`Router Event: ${E.constructor.name}`),console.log(function Lt(C){if(!("type"in C))return`Unknown Router Event: ${C.constructor.name}`;switch(C.type){case 14:return`ActivationEnd(path: '${C.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${C.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${C.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${C.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state}, shouldActivate: ${C.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 2:return`NavigationCancel(id: ${C.id}, url: '${C.url}')`;case 16:return`NavigationSkipped(id: ${C.id}, url: '${C.url}')`;case 1:return`NavigationEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${C.id}, url: '${C.url}', error: ${C.error})`;case 0:return`NavigationStart(id: ${C.id}, url: '${C.url}')`;case 6:return`ResolveEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 5:return`ResolveStart(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 10:return`RouteConfigLoadEnd(path: ${C.route.path})`;case 9:return`RouteConfigLoadStart(path: ${C.route.path})`;case 4:return`RoutesRecognized(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 15:return`Scroll(anchor: '${C.anchor}', position: '${C.position?`${C.position[0]}, ${C.position[1]}`:null}')`}}(E)),console.log(E),console.groupEnd?.()})}}]:[],Oi(1,C)}const bs=new T.OlP(Gi?"router preloader":"");function $r(C){return Oi(0,[{provide:bs,useExisting:vs},{provide:Hn,useExisting:C}])}const hl=!1,Xi=new T.OlP(hl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),qu=[ot.Ye,{provide:Kr,useClass:xn},ar,Tr,{provide:gs,useFactory:function Wa(C){return C.routerState.root},deps:[ar]},Ft,hl?{provide:to,useValue:!0}:[]];function Ka(){return new T.PXZ("Router",ar)}let fl=(()=>{class C{constructor(E){}static forRoot(E,x){return{ngModule:C,providers:[qu,hl&&x?.enableTracing?Ku().\u0275providers:[],{provide:Ct,multi:!0,useValue:E},{provide:Xi,useFactory:no,deps:[[ar,new T.FiY,new T.tp0]]},{provide:Vo,useValue:x||{}},x?.useHash?{provide:ot.S$,useClass:ot.Do}:{provide:ot.S$,useClass:ot.b0},{provide:Vi,useFactory:()=>{const C=(0,T.f3M)(ot.EM),S=(0,T.f3M)(T.R0b),E=(0,T.f3M)(Vo),x=(0,T.f3M)(_t),V=(0,T.f3M)(Kr);return E.scrollOffset&&C.setOffset(E.scrollOffset),new za(V,x,C,S,E)}},x?.preloadingStrategy?$r(x.preloadingStrategy).\u0275providers:[],{provide:T.PXZ,multi:!0,useFactory:Ka},x?.initialNavigation?Al(x):[],[{provide:Ri,useFactory:Go},{provide:T.tb,multi:!0,useExisting:Ri}]]}}static forChild(E){return{ngModule:C,providers:[{provide:Ct,multi:!0,useValue:E}]}}}return C.\u0275fac=function(E){return new(E||C)(T.LFG(Xi,8))},C.\u0275mod=T.oAB({type:C}),C.\u0275inj=T.cJS({imports:[Js]}),C})();function no(C){if(hl&&C)throw new T.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Al(C){return["disabled"===C.initialNavigation?Oi(3,[{provide:T.ip1,multi:!0,useFactory:()=>{const S=(0,T.f3M)(ar);return()=>{S.setUpLocationChangeListener()}}},{provide:ta,useValue:2}]).\u0275providers:[],"enabledBlocking"===C.initialNavigation?Oi(2,[{provide:ta,useValue:0},{provide:T.ip1,multi:!0,deps:[T.zs3],useFactory:S=>{const E=S.get(ot.V_,Promise.resolve());return()=>E.then(()=>new Promise(x=>{const V=S.get(ar),K=S.get(Qe);(function Gl(C,S){C.events.pipe((0,Ie.h)(E=>E instanceof ai||E instanceof xa||E instanceof As||E instanceof Ln),(0,Xe.U)(E=>E instanceof ai||E instanceof Ln?Nr.COMPLETE:E instanceof xa&&(0===E.code||1===E.code)?Nr.REDIRECTING:Nr.FAILED),(0,Ie.h)(E=>E!==Nr.REDIRECTING),(0,Mt.q)(1)).subscribe(()=>{S()})})(V,()=>{x(!0)}),S.get(_t).afterPreactivation=()=>(x(!0),K.closed?(0,h.of)(void 0):K),V.initialNavigation()}))}}]).\u0275providers:[]]}const Ri=new T.OlP(hl?"Router Initializer":"")},3942:(Wt,ze,j)=>{j.d(ze,{Z:()=>mt});var T=j(2090),Y=j(4859),h=j(9681),ye=j(1877);class Ae{constructor(Ze,at){this._delegate=Ze,this.firebase=at,(0,h._addComponent)(Ze,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,h.deleteApp)(this._delegate)))}_getService(Ze,at=h._DEFAULT_ENTRY_NAME){var ge;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(Ze);return!ut.isInitialized()&&"EXPLICIT"===(null===(ge=ut.getComponent())||void 0===ge?void 0:ge.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:at})}_removeServiceInstance(Ze,at=h._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(at)}_addComponent(Ze){(0,h._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,h._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fe=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function De(){const It=function Re(It){const Ze={},at={__esModule:!0,initializeApp:function ot(Se,Ie={}){const tt=h.initializeApp(Se,Ie);if((0,T.r3)(Ze,tt.name))return Ze[tt.name];const it=new It(tt,at);return Ze[tt.name]=it,it},app:ut,registerVersion:h.registerVersion,setLogLevel:h.setLogLevel,onLog:h.onLog,apps:null,SDK_VERSION:h.SDK_VERSION,INTERNAL:{registerComponent:function qe(Se){const Ie=Se.name,tt=Ie.replace("-compat","");if(h._registerComponent(Se)&&"PUBLIC"===Se.type){const it=(vt=ut())=>{if("function"!=typeof vt[tt])throw Fe.create("invalid-app-argument",{appName:Ie});return vt[tt]()};void 0!==Se.serviceProps&&(0,T.ZB)(it,Se.serviceProps),at[tt]=it,It.prototype[tt]=function(...vt){return this._getService.bind(this,Ie).apply(this,Se.multipleInstances?vt:[])}}return"PUBLIC"===Se.type?at[tt]:null},removeApp:function ge(Se){delete Ze[Se]},useAsService:function Mt(Se,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:h}};function ut(Se){if(!(0,T.r3)(Ze,Se=Se||h._DEFAULT_ENTRY_NAME))throw Fe.create("no-app",{appName:Se});return Ze[Se]}return at.default=at,Object.defineProperty(at,"apps",{get:function Xe(){return Object.keys(Ze).map(Se=>Ze[Se])}}),ut.App=It,at}(Ae);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Ze(at){(0,T.ZB)(It,at)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),It}(),de=new ye.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const mt=pe;!function Je(It){(0,h.registerVersion)("@firebase/app-compat","0.2.5",It)}()},9681:(Wt,ze,j)=>{j.r(ze),j.d(ze,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>Zn,_DEFAULT_ENTRY_NAME:()=>ct,_addComponent:()=>on,_addOrOverwriteComponent:()=>Gt,_apps:()=>kt,_clearComponents:()=>Rn,_components:()=>Et,_getProvider:()=>wt,_registerComponent:()=>$t,_removeServiceInstance:()=>En,deleteApp:()=>tr,getApp:()=>Nn,getApps:()=>er,initializeApp:()=>Fn,onLog:()=>Ut,registerVersion:()=>Sn,setLogLevel:()=>ti});var T=j(5861),Y=j(4859),h=j(1877),ye=j(2090),Ae=j(8766);class Ce{constructor(ft){this.container=ft}getPlatformInfoString(){return this.container.getProviders().map(Ht=>{if(function Fe(Rt){return"VERSION"===Rt.getComponent()?.type}(Ht)){const rn=Ht.getImmediate();return`${rn.library}/${rn.version}`}return null}).filter(Ht=>Ht).join(" ")}}const Re="@firebase/app",pe=new h.Yd("@firebase/app"),ct="[DEFAULT]",st={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},kt=new Map,Et=new Map;function on(Rt,ft){try{Rt.container.addComponent(ft)}catch(Ht){pe.debug(`Component ${ft.name} failed to register with FirebaseApp ${Rt.name}`,Ht)}}function Gt(Rt,ft){Rt.container.addOrOverwriteComponent(ft)}function $t(Rt){const ft=Rt.name;if(Et.has(ft))return pe.debug(`There were multiple attempts to register component ${ft}.`),!1;Et.set(ft,Rt);for(const Ht of kt.values())on(Ht,Rt);return!0}function wt(Rt,ft){const Ht=Rt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ht&&Ht.triggerHeartbeat(),Rt.container.getProvider(ft)}function En(Rt,ft,Ht=ct){wt(Rt,ft).clearInstance(Ht)}function Rn(){Et.clear()}const Gn=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wr{constructor(ft,Ht,rn){this._isDeleted=!1,this._options=Object.assign({},ft),this._config=Object.assign({},Ht),this._name=Ht.name,this._automaticDataCollectionEnabled=Ht.automaticDataCollectionEnabled,this._container=rn,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ft){this._isDeleted=ft}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const Zn="9.18.0";function Fn(Rt,ft={}){let Ht=Rt;"object"!=typeof ft&&(ft={name:ft});const rn=Object.assign({name:ct,automaticDataCollectionEnabled:!1},ft),mn=rn.name;if("string"!=typeof mn||!mn)throw Gn.create("bad-app-name",{appName:String(mn)});if(Ht||(Ht=(0,ye.aH)()),!Ht)throw Gn.create("no-options");const fn=kt.get(mn);if(fn){if((0,ye.vZ)(Ht,fn.options)&&(0,ye.vZ)(rn,fn.config))return fn;throw Gn.create("duplicate-app",{appName:mn})}const cr=new Y.H0(mn);for(const me of Et.values())cr.addComponent(me);const ve=new Wr(Ht,rn,cr);return kt.set(mn,ve),ve}function Nn(Rt=ct){const ft=kt.get(Rt);if(!ft&&Rt===ct)return Fn();if(!ft)throw Gn.create("no-app",{appName:Rt});return ft}function er(){return Array.from(kt.values())}function tr(Rt){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,T.Z)(function*(Rt){const ft=Rt.name;kt.has(ft)&&(kt.delete(ft),yield Promise.all(Rt.container.getProviders().map(Ht=>Ht.delete())),Rt.isDeleted=!0)})).apply(this,arguments)}function Sn(Rt,ft,Ht){var rn;let mn=null!==(rn=st[Rt])&&void 0!==rn?rn:Rt;Ht&&(mn+=`-${Ht}`);const fn=mn.match(/\s|\//),cr=ft.match(/\s|\//);if(fn||cr){const ve=[`Unable to register library "${mn}" with version "${ft}":`];return fn&&ve.push(`library name "${mn}" contains illegal characters (whitespace or "/")`),fn&&cr&&ve.push("and"),cr&&ve.push(`version name "${ft}" contains illegal characters (whitespace or "/")`),void pe.warn(ve.join(" "))}$t(new Y.wA(`${mn}-version`,()=>({library:mn,version:ft}),"VERSION"))}function Ut(Rt,ft){if(null!==Rt&&"function"!=typeof Rt)throw Gn.create("invalid-log-argument");(0,h.Am)(Rt,ft)}function ti(Rt){(0,h.Ub)(Rt)}const fi="firebase-heartbeat-database",kr=1,Yr="firebase-heartbeat-store";let ni=null;function yn(){return ni||(ni=(0,Ae.X3)(fi,kr,{upgrade:(Rt,ft)=>{0===ft&&Rt.createObjectStore(Yr)}}).catch(Rt=>{throw Gn.create("idb-open",{originalErrorMessage:Rt.message})})),ni}function cn(){return(cn=(0,T.Z)(function*(Rt){try{return(yield yn()).transaction(Yr).objectStore(Yr).get(ln(Rt))}catch(ft){if(ft instanceof ye.ZR)pe.warn(ft.message);else{const Ht=Gn.create("idb-get",{originalErrorMessage:ft?.message});pe.warn(Ht.message)}}})).apply(this,arguments)}function rr(Rt,ft){return or.apply(this,arguments)}function or(){return(or=(0,T.Z)(function*(Rt,ft){try{const rn=(yield yn()).transaction(Yr,"readwrite");return yield rn.objectStore(Yr).put(ft,ln(Rt)),rn.done}catch(Ht){if(Ht instanceof ye.ZR)pe.warn(Ht.message);else{const rn=Gn.create("idb-set",{originalErrorMessage:Ht?.message});pe.warn(rn.message)}}})).apply(this,arguments)}function ln(Rt){return`${Rt.name}!${Rt.options.appId}`}class yr{constructor(ft){this.container=ft,this._heartbeatsCache=null;const Ht=this.container.getProvider("app").getImmediate();this._storage=new xn(Ht),this._heartbeatsCachePromise=this._storage.read().then(rn=>(this._heartbeatsCache=rn,rn))}triggerHeartbeat(){var ft=this;return(0,T.Z)(function*(){const rn=ft.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mn=pn();if(null===ft._heartbeatsCache&&(ft._heartbeatsCache=yield ft._heartbeatsCachePromise),ft._heartbeatsCache.lastSentHeartbeatDate!==mn&&!ft._heartbeatsCache.heartbeats.some(fn=>fn.date===mn))return ft._heartbeatsCache.heartbeats.push({date:mn,agent:rn}),ft._heartbeatsCache.heartbeats=ft._heartbeatsCache.heartbeats.filter(fn=>{const cr=new Date(fn.date).valueOf();return Date.now()-cr<=2592e6}),ft._storage.overwrite(ft._heartbeatsCache)})()}getHeartbeatsHeader(){var ft=this;return(0,T.Z)(function*(){if(null===ft._heartbeatsCache&&(yield ft._heartbeatsCachePromise),null===ft._heartbeatsCache||0===ft._heartbeatsCache.heartbeats.length)return"";const Ht=pn(),{heartbeatsToSend:rn,unsentEntries:mn}=function Kr(Rt,ft=1024){const Ht=[];let rn=Rt.slice();for(const mn of Rt){const fn=Ht.find(cr=>cr.agent===mn.agent);if(fn){if(fn.dates.push(mn.date),Ii(Ht)>ft){fn.dates.pop();break}}else if(Ht.push({agent:mn.agent,dates:[mn.date]}),Ii(Ht)>ft){Ht.pop();break}rn=rn.slice(1)}return{heartbeatsToSend:Ht,unsentEntries:rn}}(ft._heartbeatsCache.heartbeats),fn=(0,ye.L)(JSON.stringify({version:2,heartbeats:rn}));return ft._heartbeatsCache.lastSentHeartbeatDate=Ht,mn.length>0?(ft._heartbeatsCache.heartbeats=mn,yield ft._storage.overwrite(ft._heartbeatsCache)):(ft._heartbeatsCache.heartbeats=[],ft._storage.overwrite(ft._heartbeatsCache)),fn})()}}function pn(){return(new Date).toISOString().substring(0,10)}class xn{constructor(ft){this.app=ft,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,ye.hl)()&&(0,ye.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ft=this;return(0,T.Z)(function*(){return(yield ft._canUseIndexedDBPromise)&&(yield function nn(Rt){return cn.apply(this,arguments)}(ft.app))||{heartbeats:[]}})()}overwrite(ft){var Ht=this;return(0,T.Z)(function*(){var rn;if(yield Ht._canUseIndexedDBPromise){const fn=yield Ht.read();return rr(Ht.app,{lastSentHeartbeatDate:null!==(rn=ft.lastSentHeartbeatDate)&&void 0!==rn?rn:fn.lastSentHeartbeatDate,heartbeats:ft.heartbeats})}})()}add(ft){var Ht=this;return(0,T.Z)(function*(){var rn;if(yield Ht._canUseIndexedDBPromise){const fn=yield Ht.read();return rr(Ht.app,{lastSentHeartbeatDate:null!==(rn=ft.lastSentHeartbeatDate)&&void 0!==rn?rn:fn.lastSentHeartbeatDate,heartbeats:[...fn.heartbeats,...ft.heartbeats]})}})()}}function Ii(Rt){return(0,ye.L)(JSON.stringify({version:2,heartbeats:Rt})).length}!function Cr(Rt){$t(new Y.wA("platform-logger",ft=>new Ce(ft),"PRIVATE")),$t(new Y.wA("heartbeat",ft=>new yr(ft),"PRIVATE")),Sn(Re,"0.9.5",Rt),Sn(Re,"0.9.5","esm2017"),Sn("fire-js","")}("")},4859:(Wt,ze,j)=>{j.d(ze,{H0:()=>Re,wA:()=>h,zt:()=>Ae});var T=j(5861),Y=j(2090);class h{constructor(pe,de,Te){this.name=pe,this.instanceFactory=de,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const ye="[DEFAULT]";class Ae{constructor(pe,de){this.name=pe,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const de=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(de)){const Te=new Y.BH;if(this.instancesDeferred.set(de,Te),this.isInitialized(de)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:de});Ye&&Te.resolve(Ye)}catch{}}return this.instancesDeferred.get(de).promise}getImmediate(pe){var de;const Te=this.normalizeInstanceIdentifier(pe?.identifier),Ye=null!==(de=pe?.optional)&&void 0!==de&&de;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(Je){if(Ye)return null;throw Je}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Fe(De){return"EAGER"===De.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:ye})}catch{}for(const[de,Te]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(de);try{const Je=this.getOrInitializeService({instanceIdentifier:Ye});Te.resolve(Je)}catch{}}}}clearInstance(pe=ye){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,T.Z)(function*(){const de=Array.from(pe.instances.values());yield Promise.all([...de.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...de.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=ye){return this.instances.has(pe)}getOptions(pe=ye){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:de={}}=pe,Te=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:Te,options:de});for(const[Je,mt]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(Je)&&mt.resolve(Ye);return Ye}onInit(pe,de){var Te;const Ye=this.normalizeInstanceIdentifier(de),Je=null!==(Te=this.onInitCallbacks.get(Ye))&&void 0!==Te?Te:new Set;Je.add(pe),this.onInitCallbacks.set(Ye,Je);const mt=this.instances.get(Ye);return mt&&pe(mt,Ye),()=>{Je.delete(pe)}}invokeOnInitCallbacks(pe,de){const Te=this.onInitCallbacks.get(de);if(Te)for(const Ye of Te)try{Ye(pe,de)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:de={}}){let Te=this.instances.get(pe);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(De=pe,De===ye?void 0:De),options:de}),this.instances.set(pe,Te),this.instancesOptions.set(pe,de),this.invokeOnInitCallbacks(Te,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Te)}catch{}var De;return Te||null}normalizeInstanceIdentifier(pe=ye){return this.component?this.component.multipleInstances?pe:ye:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const de=this.getProvider(pe.name);if(de.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);de.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const de=new Ae(pe,this);return this.providers.set(pe,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(Wt,ze,j)=>{j.d(ze,{Am:()=>De,Ub:()=>Re,Yd:()=>Fe,in:()=>Y});const T=[];var Y=(()=>{return(pe=Y||(Y={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",Y;var pe})();const h={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ye=Y.INFO,Ae={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Ce=(pe,de,...Te)=>{if(de<pe.logLevel)return;const Ye=(new Date).toISOString(),Je=Ae[de];if(!Je)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Je](`[${Ye}]  ${pe.name}:`,...Te)};class Fe{constructor(de){this.name=de,this._logLevel=ye,this._logHandler=Ce,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in Y))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?h[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...de),this._logHandler(this,Y.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...de),this._logHandler(this,Y.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...de),this._logHandler(this,Y.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...de),this._logHandler(this,Y.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...de),this._logHandler(this,Y.ERROR,...de)}}function Re(pe){T.forEach(de=>{de.setLogLevel(pe)})}function De(pe,de){for(const Te of T){let Ye=null;de&&de.level&&(Ye=h[de.level]),Te.userLogHandler=null===pe?null:(Je,mt,...It)=>{const Ze=It.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch{return null}}).filter(at=>at).join(" ");mt>=(Ye??Je.logLevel)&&pe({level:Y[mt].toLowerCase(),message:Ze,args:It,type:Je.name})}}}},259:(Wt,ze,j)=>{j.d(ze,{C6:()=>T.getApps,Mq:()=>T.getApp});var T=j(9681);(0,T.registerVersion)("firebase","9.18.0","app")},9260:(Wt,ze,j)=>{j.d(ze,{Z:()=>T.Z});var T=j(3942);T.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(Wt,ze,j)=>{j.r(ze);var T=j(5861),Y=j(3942),h=j(5114),ye=j(2090),Fe=(j(9681),j(1877),j(4859));function Re(){return window}const De=2e3;function de(){return de=(0,T.Z)(function*(te,re,Q){var xe;const{BuildInfo:ae}=Re();(0,h.ap)(re.sessionId,"AuthEvent did not contain a session ID");const he=yield function at(te){return ge.apply(this,arguments)}(re.sessionId),oe={};return(0,h.aq)()?oe.ibi=ae.packageName:(0,h.ar)()?oe.apn=ae.packageName:(0,h.as)(te,"operation-not-supported-in-this-environment"),ae.displayName&&(oe.appDisplayName=ae.displayName),oe.sessionId=he,(0,h.at)(te,Q,re.type,void 0,null!==(xe=re.eventId)&&void 0!==xe?xe:void 0,oe)}),de.apply(this,arguments)}function Ye(){return(Ye=(0,T.Z)(function*(te){const{BuildInfo:re}=Re(),Q={};(0,h.aq)()?Q.iosBundleId=re.packageName:(0,h.ar)()?Q.androidPackageName=re.packageName:(0,h.as)(te,"operation-not-supported-in-this-environment"),yield(0,h.au)(te,Q)})).apply(this,arguments)}function It(){return(It=(0,T.Z)(function*(te,re,Q){const{cordova:xe}=Re();let ae=()=>{};try{yield new Promise((he,oe)=>{let Oe=null;function et(){var Bt;he();const Cn=null===(Bt=xe.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Cn&&Cn(),"function"==typeof Q?.close&&Q.close()}function pt(){Oe||(Oe=window.setTimeout(()=>{oe((0,h.aw)(te,"redirect-cancelled-by-user"))},De))}function en(){"visible"===document?.visibilityState&&pt()}re.addPassiveListener(et),document.addEventListener("resume",pt,!1),(0,h.ar)()&&document.addEventListener("visibilitychange",en,!1),ae=()=>{re.removePassiveListener(et),document.removeEventListener("resume",pt,!1),document.removeEventListener("visibilitychange",en,!1),Oe&&window.clearTimeout(Oe)}})}finally{ae()}})).apply(this,arguments)}function ge(){return(ge=(0,T.Z)(function*(te){const re=function ut(te){if((0,h.ap)(/[0-9a-zA-Z]+/.test(te),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(te);const re=new ArrayBuffer(te.length),Q=new Uint8Array(re);for(let xe=0;xe<te.length;xe++)Q[xe]=te.charCodeAt(xe);return Q}(te),Q=yield crypto.subtle.digest("SHA-256",re);return Array.from(new Uint8Array(Q)).map(ae=>ae.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ot=20;class Xe extends h.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(re=>{this.resolveInialized=re})}addPassiveListener(re){this.passiveListeners.add(re)}removePassiveListener(re){this.passiveListeners.delete(re)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(re){return this.resolveInialized(),this.passiveListeners.forEach(Q=>Q(re)),super.onEvent(re)}initialized(){var re=this;return(0,T.Z)(function*(){yield re.initPromise})()}}function Se(te){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,T.Z)(function*(te){const re=yield vt()._get(Kt(te));return re&&(yield vt()._remove(Kt(te))),re})).apply(this,arguments)}function it(){const te=[],re="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Q=0;Q<ot;Q++){const xe=Math.floor(Math.random()*re.length);te.push(re.charAt(xe))}return te.join("")}function vt(){return(0,h.az)(h.b)}function Kt(te){return(0,h.aA)("authEvent",te.config.apiKey,te.name)}function nt(te){if(!te?.includes("?"))return{};const[re,...Q]=te.split("?");return(0,ye.zd)(Q.join("?"))}const ct=class rt{constructor(){this._redirectPersistence=h.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=h.aB,this._overrideRedirectResult=h.aC}_initialize(re){var Q=this;return(0,T.Z)(function*(){const xe=re._key();let ae=Q.eventManagers.get(xe);return ae||(ae=new Xe(re),Q.eventManagers.set(xe,ae),Q.attachCallbackListeners(re,ae)),ae})()}_openPopup(re){(0,h.as)(re,"operation-not-supported-in-this-environment")}_openRedirect(re,Q,xe,ae){var he=this;return(0,T.Z)(function*(){!function Ze(te){var re,Q,xe,ae,he,oe,Oe,et,pt,en;const Bt=Re();(0,h.ax)("function"==typeof(null===(re=Bt?.universalLinks)||void 0===re?void 0:re.subscribe),te,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,h.ax)(typeof(null===(Q=Bt?.BuildInfo)||void 0===Q?void 0:Q.packageName)<"u",te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,h.ax)("function"==typeof(null===(he=null===(ae=null===(xe=Bt?.cordova)||void 0===xe?void 0:xe.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===he?void 0:he.openUrl),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,h.ax)("function"==typeof(null===(et=null===(Oe=null===(oe=Bt?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===et?void 0:et.isAvailable),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,h.ax)("function"==typeof(null===(en=null===(pt=Bt?.cordova)||void 0===pt?void 0:pt.InAppBrowser)||void 0===en?void 0:en.open),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(re);const oe=yield he._initialize(re);yield oe.initialized(),oe.resetRedirect(),(0,h.aD)(),yield he._originValidation(re);const Oe=function qe(te,re,Q=null){return{type:re,eventId:Q,urlResponse:null,sessionId:it(),postBody:null,tenantId:te.tenantId,error:(0,h.aw)(te,"no-auth-event")}}(re,xe,ae);yield function Mt(te,re){return vt()._set(Kt(te),re)}(re,Oe);const et=yield function pe(te,re,Q){return de.apply(this,arguments)}(re,Oe,Q),pt=yield function Je(te){const{cordova:re}=Re();return new Promise(Q=>{re.plugins.browsertab.isAvailable(xe=>{let ae=null;xe?re.plugins.browsertab.openUrl(te):ae=re.InAppBrowser.open(te,(0,h.av)()?"_blank":"_system","location=yes"),Q(ae)})})}(et);return function mt(te,re,Q){return It.apply(this,arguments)}(re,oe,pt)})()}_isIframeWebStorageSupported(re,Q){throw new Error("Method not implemented.")}_originValidation(re){const Q=re._key();return this.originValidationPromises[Q]||(this.originValidationPromises[Q]=function Te(te){return Ye.apply(this,arguments)}(re)),this.originValidationPromises[Q]}attachCallbackListeners(re,Q){const{universalLinks:xe,handleOpenURL:ae,BuildInfo:he}=Re(),oe=setTimeout((0,T.Z)(function*(){yield Se(re),Q.onEvent(st())}),500),Oe=function(){var en=(0,T.Z)(function*(Bt){clearTimeout(oe);const Cn=yield Se(re);let Qs=null;Cn&&Bt?.url&&(Qs=function tt(te,re){var Q,xe;const ae=function Ue(te){const re=nt(te),Q=re.link?decodeURIComponent(re.link):void 0,xe=nt(Q).link,ae=re.deep_link_id?decodeURIComponent(re.deep_link_id):void 0;return nt(ae).link||ae||xe||Q||te}(re);if(ae.includes("/__/auth/callback")){const he=nt(ae),oe=he.firebaseError?function Pt(te){try{return JSON.parse(te)}catch{return null}}(decodeURIComponent(he.firebaseError)):null,Oe=null===(xe=null===(Q=oe?.code)||void 0===Q?void 0:Q.split("auth/"))||void 0===xe?void 0:xe[1],et=Oe?(0,h.aw)(Oe):null;return et?{type:te.type,eventId:te.eventId,tenantId:te.tenantId,error:et,urlResponse:null,sessionId:null,postBody:null}:{type:te.type,eventId:te.eventId,tenantId:te.tenantId,sessionId:te.sessionId,urlResponse:ae,postBody:null}}return null}(Cn,Bt.url)),Q.onEvent(Qs||st())});return function(Cn){return en.apply(this,arguments)}}();typeof xe<"u"&&"function"==typeof xe.subscribe&&xe.subscribe(null,Oe);const et=ae,pt=`${he.packageName.toLowerCase()}://`;Re().handleOpenURL=function(){var en=(0,T.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(pt)&&Oe({url:Bt}),"function"==typeof et)try{et(Bt)}catch(Cn){console.error(Cn)}});return function(Bt){return en.apply(this,arguments)}}()}};function st(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,h.aw)("no-auth-event")}}const Gt=1e3;function $t(){var te;return(null===(te=self?.location)||void 0===te?void 0:te.protocol)||null}function En(te=(0,ye.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()&&"capacitor:"!==$t()||!te.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zn(){try{const te=self.localStorage,re=h.aI();if(te)return te.setItem(re,"1"),te.removeItem(re),!function Wr(te=(0,ye.z$)()){return function Vn(){return(0,ye.w1)()&&11===document?.documentMode}()||function Gn(te=(0,ye.z$)()){return/Edge\/\d+/.test(te)}(te)}()||(0,ye.hl)()}catch{return Fn()&&(0,ye.hl)()}return!1}function Fn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nn(){return(function wt(){return"http:"===$t()||"https:"===$t()}()||(0,ye.ru)()||En())&&!function Rn(){return(0,ye.b$)()||(0,ye.UG)()}()&&Zn()&&!Fn()}function er(){return En()&&typeof document<"u"}function Xt(){return(Xt=(0,T.Z)(function*(){return!!er()&&new Promise(te=>{const re=setTimeout(()=>{te(!1)},Gt);document.addEventListener("deviceready",()=>{clearTimeout(re),te(!0)})})})).apply(this,arguments)}const Ut={LOCAL:"local",NONE:"none",SESSION:"session"},ti=h.ax,fi="persistence";function Yr(te){return ni.apply(this,arguments)}function ni(){return(ni=(0,T.Z)(function*(te){yield te._initializationPromise;const re=nn(),Q=h.aA(fi,te.config.apiKey,te.name);re&&re.setItem(Q,te._getPersistence())})).apply(this,arguments)}function nn(){var te;try{return(null===(te=function Sn(){return typeof window<"u"?window:null}())||void 0===te?void 0:te.sessionStorage)||null}catch{return null}}const cn=h.ax;class rr{constructor(){this.browserResolver=h.az(h.k),this.cordovaResolver=h.az(ct),this.underlyingResolver=null,this._redirectPersistence=h.a,this._completeRedirectFn=h.aB,this._overrideRedirectResult=h.aC}_initialize(re){var Q=this;return(0,T.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._initialize(re)})()}_openPopup(re,Q,xe,ae){var he=this;return(0,T.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openPopup(re,Q,xe,ae)})()}_openRedirect(re,Q,xe,ae){var he=this;return(0,T.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openRedirect(re,Q,xe,ae)})()}_isIframeWebStorageSupported(re,Q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(re,Q)}_originValidation(re){return this.assertedUnderlyingResolver._originValidation(re)}get _shouldInitProactively(){return er()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var re=this;return(0,T.Z)(function*(){if(re.underlyingResolver)return;const Q=yield function tr(){return Xt.apply(this,arguments)}();re.underlyingResolver=Q?re.cordovaResolver:re.browserResolver})()}}function or(te){return te.unwrap()}function Ir(te){return yr(te)}function yr(te){const{_tokenResponse:re}=te instanceof ye.ZR?te.customData:te;if(!re)return null;if(!(te instanceof ye.ZR)&&"temporaryProof"in re&&"phoneNumber"in re)return h.P.credentialFromResult(te);const Q=re.providerId;if(!Q||Q===h.o.PASSWORD)return null;let xe;switch(Q){case h.o.GOOGLE:xe=h.Q;break;case h.o.FACEBOOK:xe=h.N;break;case h.o.GITHUB:xe=h.T;break;case h.o.TWITTER:xe=h.W;break;default:const{oauthIdToken:ae,oauthAccessToken:he,oauthTokenSecret:oe,pendingToken:Oe,nonce:et}=re;return he||oe||ae||Oe?Oe?Q.startsWith("saml.")?h.aL._create(Q,Oe):h.J._fromParams({providerId:Q,signInMethod:Q,pendingToken:Oe,idToken:ae,accessToken:he}):new h.U(Q).credential({idToken:ae,accessToken:he,rawNonce:et}):null}return te instanceof ye.ZR?xe.credentialFromError(te):xe.credentialFromResult(te)}function pn(te,re){return re.catch(Q=>{throw Q instanceof ye.ZR&&function Zr(te,re){var Q;const xe=null===(Q=re.customData)||void 0===Q?void 0:Q._tokenResponse;if("auth/multi-factor-auth-required"===re?.code)re.resolver=new Ii(te,h.an(te,re));else if(xe){const ae=yr(re),he=re;ae&&(he.credential=ae,he.tenantId=xe.tenantId||void 0,he.email=xe.email||void 0,he.phoneNumber=xe.phoneNumber||void 0)}}(te,Q),Q}).then(Q=>{const ae=Q.user;return{operationType:Q.operationType,credential:Ir(Q),additionalUserInfo:h.al(Q),user:Cr.getOrCreate(ae)}})}function Kr(te,re){return xn.apply(this,arguments)}function xn(){return(xn=(0,T.Z)(function*(te,re){const Q=yield re;return{verificationId:Q.verificationId,confirm:xe=>pn(te,Q.confirm(xe))}})).apply(this,arguments)}class Ii{constructor(re,Q){this.resolver=Q,this.auth=function ln(te){return te.wrapped()}(re)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(re){return pn(or(this.auth),this.resolver.resolveSignIn(re))}}class Cr{constructor(re){this._delegate=re,this.multiFactor=h.ao(re)}static getOrCreate(re){return Cr.USER_MAP.has(re)||Cr.USER_MAP.set(re,new Cr(re)),Cr.USER_MAP.get(re)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(re){return this._delegate.getIdTokenResult(re)}getIdToken(re){return this._delegate.getIdToken(re)}linkAndRetrieveDataWithCredential(re){return this.linkWithCredential(re)}linkWithCredential(re){var Q=this;return(0,T.Z)(function*(){return pn(Q.auth,h.Z(Q._delegate,re))})()}linkWithPhoneNumber(re,Q){var xe=this;return(0,T.Z)(function*(){return Kr(xe.auth,h.l(xe._delegate,re,Q))})()}linkWithPopup(re){var Q=this;return(0,T.Z)(function*(){return pn(Q.auth,h.d(Q._delegate,re,rr))})()}linkWithRedirect(re){var Q=this;return(0,T.Z)(function*(){return yield Yr(h.aE(Q.auth)),h.g(Q._delegate,re,rr)})()}reauthenticateAndRetrieveDataWithCredential(re){return this.reauthenticateWithCredential(re)}reauthenticateWithCredential(re){var Q=this;return(0,T.Z)(function*(){return pn(Q.auth,h._(Q._delegate,re))})()}reauthenticateWithPhoneNumber(re,Q){return Kr(this.auth,h.r(this._delegate,re,Q))}reauthenticateWithPopup(re){return pn(this.auth,h.e(this._delegate,re,rr))}reauthenticateWithRedirect(re){var Q=this;return(0,T.Z)(function*(){return yield Yr(h.aE(Q.auth)),h.h(Q._delegate,re,rr)})()}sendEmailVerification(re){return h.ab(this._delegate,re)}unlink(re){var Q=this;return(0,T.Z)(function*(){return yield h.ak(Q._delegate,re),Q})()}updateEmail(re){return h.ag(this._delegate,re)}updatePassword(re){return h.ah(this._delegate,re)}updatePhoneNumber(re){return h.u(this._delegate,re)}updateProfile(re){return h.af(this._delegate,re)}verifyBeforeUpdateEmail(re,Q){return h.ac(this._delegate,re,Q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cr.USER_MAP=new WeakMap;const Rt=h.ax;let ft=(()=>{class te{constructor(Q,xe){if(this.app=Q,xe.isInitialized())return this._delegate=xe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ae}=Q.options;Rt(ae,"invalid-api-key",{appName:Q.name}),Rt(ae,"invalid-api-key",{appName:Q.name});const he=typeof window<"u"?rr:void 0;this._delegate=xe.initialize({options:{persistence:rn(ae,Q.name),popupRedirectResolver:he}}),this._delegate._updateErrorMap(h.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Q){this._delegate.languageCode=Q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Q){this._delegate.tenantId=Q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Q,xe){h.G(this._delegate,Q,xe)}applyActionCode(Q){return h.a2(this._delegate,Q)}checkActionCode(Q){return h.a3(this._delegate,Q)}confirmPasswordReset(Q,xe){return h.a1(this._delegate,Q,xe)}createUserWithEmailAndPassword(Q,xe){var ae=this;return(0,T.Z)(function*(){return pn(ae._delegate,h.a5(ae._delegate,Q,xe))})()}fetchProvidersForEmail(Q){return this.fetchSignInMethodsForEmail(Q)}fetchSignInMethodsForEmail(Q){return h.aa(this._delegate,Q)}isSignInWithEmailLink(Q){return h.a8(this._delegate,Q)}getRedirectResult(){var Q=this;return(0,T.Z)(function*(){Rt(Nn(),Q._delegate,"operation-not-supported-in-this-environment");const xe=yield h.j(Q._delegate,rr);return xe?pn(Q._delegate,Promise.resolve(xe)):{credential:null,user:null}})()}addFrameworkForLogging(Q){!function kt(te,re){(0,h.aE)(te)._logFramework(re)}(this._delegate,Q)}onAuthStateChanged(Q,xe,ae){const{next:he,error:oe,complete:Oe}=Ht(Q,xe,ae);return this._delegate.onAuthStateChanged(he,oe,Oe)}onIdTokenChanged(Q,xe,ae){const{next:he,error:oe,complete:Oe}=Ht(Q,xe,ae);return this._delegate.onIdTokenChanged(he,oe,Oe)}sendSignInLinkToEmail(Q,xe){return h.a7(this._delegate,Q,xe)}sendPasswordResetEmail(Q,xe){return h.a0(this._delegate,Q,xe||void 0)}setPersistence(Q){var xe=this;return(0,T.Z)(function*(){let ae;switch(function kr(te,re){ti(Object.values(Ut).includes(re),te,"invalid-persistence-type"),(0,ye.b$)()?ti(re!==Ut.SESSION,te,"unsupported-persistence-type"):(0,ye.UG)()?ti(re===Ut.NONE,te,"unsupported-persistence-type"):Fn()?ti(re===Ut.NONE||re===Ut.LOCAL&&(0,ye.hl)(),te,"unsupported-persistence-type"):ti(re===Ut.NONE||Zn(),te,"unsupported-persistence-type")}(xe._delegate,Q),Q){case Ut.SESSION:ae=h.a;break;case Ut.LOCAL:ae=(yield h.az(h.i)._isAvailable())?h.i:h.b;break;case Ut.NONE:ae=h.L;break;default:return h.as("argument-error",{appName:xe._delegate.name})}return xe._delegate.setPersistence(ae)})()}signInAndRetrieveDataWithCredential(Q){return this.signInWithCredential(Q)}signInAnonymously(){return pn(this._delegate,h.X(this._delegate))}signInWithCredential(Q){return pn(this._delegate,h.Y(this._delegate,Q))}signInWithCustomToken(Q){return pn(this._delegate,h.$(this._delegate,Q))}signInWithEmailAndPassword(Q,xe){return pn(this._delegate,h.a6(this._delegate,Q,xe))}signInWithEmailLink(Q,xe){return pn(this._delegate,h.a9(this._delegate,Q,xe))}signInWithPhoneNumber(Q,xe){return Kr(this._delegate,h.s(this._delegate,Q,xe))}signInWithPopup(Q){var xe=this;return(0,T.Z)(function*(){return Rt(Nn(),xe._delegate,"operation-not-supported-in-this-environment"),pn(xe._delegate,h.c(xe._delegate,Q,rr))})()}signInWithRedirect(Q){var xe=this;return(0,T.Z)(function*(){return Rt(Nn(),xe._delegate,"operation-not-supported-in-this-environment"),yield Yr(xe._delegate),h.f(xe._delegate,Q,rr)})()}updateCurrentUser(Q){return this._delegate.updateCurrentUser(Q)}verifyPasswordResetCode(Q){return h.a4(this._delegate,Q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return te.Persistence=Ut,te})();function Ht(te,re,Q){let xe=te;"function"!=typeof te&&({next:xe,error:re,complete:Q}=te);const ae=xe;return{next:oe=>ae(oe&&Cr.getOrCreate(oe)),error:re,complete:Q}}function rn(te,re){const Q=function yn(te,re){const Q=nn();if(!Q)return[];const xe=h.aA(fi,te,re);switch(Q.getItem(xe)){case Ut.NONE:return[h.L];case Ut.LOCAL:return[h.i,h.a];case Ut.SESSION:return[h.a];default:return[]}}(te,re);if(typeof self<"u"&&!Q.includes(h.i)&&Q.push(h.i),typeof window<"u")for(const xe of[h.b,h.a])Q.includes(xe)||Q.push(xe);return Q.includes(h.L)||Q.push(h.L),Q}class mn{constructor(){this.providerId="phone",this._delegate=new h.P(or(Y.Z.auth()))}static credential(re,Q){return h.P.credential(re,Q)}verifyPhoneNumber(re,Q){return this._delegate.verifyPhoneNumber(re,Q)}unwrap(){return this._delegate}}mn.PHONE_SIGN_IN_METHOD=h.P.PHONE_SIGN_IN_METHOD,mn.PROVIDER_ID=h.P.PROVIDER_ID;const fn=h.ax;class cr{constructor(re,Q,xe=Y.Z.app()){var ae;fn(null===(ae=xe.options)||void 0===ae?void 0:ae.apiKey,"invalid-api-key",{appName:xe.name}),this._delegate=new h.R(re,Q,xe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function me(te){te.INTERNAL.registerComponent(new Fe.wA("auth-compat",re=>{const Q=re.getProvider("app-compat").getImmediate(),xe=re.getProvider("auth");return new ft(Q,xe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:h.A.EMAIL_SIGNIN,PASSWORD_RESET:h.A.PASSWORD_RESET,RECOVER_EMAIL:h.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:h.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:h.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:h.A.VERIFY_EMAIL}},EmailAuthProvider:h.M,FacebookAuthProvider:h.N,GithubAuthProvider:h.T,GoogleAuthProvider:h.Q,OAuthProvider:h.U,SAMLAuthProvider:h.V,PhoneAuthProvider:mn,PhoneMultiFactorGenerator:h.m,RecaptchaVerifier:cr,TwitterAuthProvider:h.W,Auth:ft,AuthCredential:h.H,Error:ye.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),te.registerVersion("@firebase/auth-compat","0.3.5")}(Y.Z)},8766:(Wt,ze,j)=>{j.d(ze,{Lj:()=>ot,X3:()=>ut});var T=j(5861);const Y=(Ie,tt)=>tt.some(it=>Ie instanceof it);let h,ye;const Fe=new WeakMap,Re=new WeakMap,De=new WeakMap,pe=new WeakMap,de=new WeakMap;let Je={get(Ie,tt,it){if(Ie instanceof IDBTransaction){if("done"===tt)return Re.get(Ie);if("objectStoreNames"===tt)return Ie.objectStoreNames||De.get(Ie);if("store"===tt)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return at(Ie[tt])},set:(Ie,tt,it)=>(Ie[tt]=it,!0),has:(Ie,tt)=>Ie instanceof IDBTransaction&&("done"===tt||"store"===tt)||tt in Ie};function Ze(Ie){return"function"==typeof Ie?function It(Ie){return Ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ie)?function(...tt){return Ie.apply(ge(this),tt),at(Fe.get(this))}:function(...tt){return at(Ie.apply(ge(this),tt))}:function(tt,...it){const vt=Ie.call(ge(this),tt,...it);return De.set(vt,tt.sort?tt.sort():[tt]),at(vt)}}(Ie):(Ie instanceof IDBTransaction&&function Ye(Ie){if(Re.has(Ie))return;const tt=new Promise((it,vt)=>{const Kt=()=>{Ie.removeEventListener("complete",Pt),Ie.removeEventListener("error",Ue),Ie.removeEventListener("abort",Ue)},Pt=()=>{it(),Kt()},Ue=()=>{vt(Ie.error||new DOMException("AbortError","AbortError")),Kt()};Ie.addEventListener("complete",Pt),Ie.addEventListener("error",Ue),Ie.addEventListener("abort",Ue)});Re.set(Ie,tt)}(Ie),Y(Ie,function Ae(){return h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ie,Je):Ie)}function at(Ie){if(Ie instanceof IDBRequest)return function Te(Ie){const tt=new Promise((it,vt)=>{const Kt=()=>{Ie.removeEventListener("success",Pt),Ie.removeEventListener("error",Ue)},Pt=()=>{it(at(Ie.result)),Kt()},Ue=()=>{vt(Ie.error),Kt()};Ie.addEventListener("success",Pt),Ie.addEventListener("error",Ue)});return tt.then(it=>{it instanceof IDBCursor&&Fe.set(it,Ie)}).catch(()=>{}),de.set(tt,Ie),tt}(Ie);if(pe.has(Ie))return pe.get(Ie);const tt=Ze(Ie);return tt!==Ie&&(pe.set(Ie,tt),de.set(tt,Ie)),tt}const ge=Ie=>de.get(Ie);function ut(Ie,tt,{blocked:it,upgrade:vt,blocking:Kt,terminated:Pt}={}){const Ue=indexedDB.open(Ie,tt),nt=at(Ue);return vt&&Ue.addEventListener("upgradeneeded",We=>{vt(at(Ue.result),We.oldVersion,We.newVersion,at(Ue.transaction))}),it&&Ue.addEventListener("blocked",()=>it()),nt.then(We=>{Pt&&We.addEventListener("close",()=>Pt()),Kt&&We.addEventListener("versionchange",()=>Kt())}).catch(()=>{}),nt}function ot(Ie,{blocked:tt}={}){const it=indexedDB.deleteDatabase(Ie);return tt&&it.addEventListener("blocked",()=>tt()),at(it).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],Mt=new Map;function Se(Ie,tt){if(!(Ie instanceof IDBDatabase)||tt in Ie||"string"!=typeof tt)return;if(Mt.get(tt))return Mt.get(tt);const it=tt.replace(/FromIndex$/,""),vt=tt!==it,Kt=qe.includes(it);if(!(it in(vt?IDBIndex:IDBObjectStore).prototype)||!Kt&&!Xe.includes(it))return;const Pt=function(){var Ue=(0,T.Z)(function*(nt,...We){const rt=this.transaction(nt,Kt?"readwrite":"readonly");let ct=rt.store;return vt&&(ct=ct.index(We.shift())),(yield Promise.all([ct[it](...We),Kt&&rt.done]))[0]});return function(We){return Ue.apply(this,arguments)}}();return Mt.set(tt,Pt),Pt}!function mt(Ie){Je=Ie(Je)}(Ie=>({...Ie,get:(tt,it,vt)=>Se(tt,it)||Ie.get(tt,it,vt),has:(tt,it)=>!!Se(tt,it)||Ie.has(tt,it)}))},5861:(Wt,ze,j)=>{function T(h,ye,Ae,Ce,Fe,Re,De){try{var pe=h[Re](De),de=pe.value}catch(Te){return void Ae(Te)}pe.done?ye(de):Promise.resolve(de).then(Ce,Fe)}function Y(h){return function(){var ye=this,Ae=arguments;return new Promise(function(Ce,Fe){var Re=h.apply(ye,Ae);function De(de){T(Re,Ce,Fe,De,pe,"next",de)}function pe(de){T(Re,Ce,Fe,De,pe,"throw",de)}De(void 0)})}}j.d(ze,{Z:()=>Y})}},Wt=>{Wt(Wt.s=6032)}]);