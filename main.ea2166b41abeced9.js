"use strict";(self.webpackChunkrpg_psicoleigos=self.webpackChunkrpg_psicoleigos||[]).push([[179],{6217:(sn,qe,G)=>{G.d(qe,{nm:()=>ji});var b=G(2122);G(4650),G(259);var mt=G(5861),ot=G(9681),ze=G(4859),Ft=G(2090),Se=G(1877);const Te=new Map,We={activated:!1,tokenObservers:[]},ft={initialized:!1,enabled:!1};function wt(Ge){return Te.get(Ge)||Object.assign({},We)}function jt(){return ft}const $e="https://content-firebaseappcheck.googleapis.com/v1",dt="exchangeDebugToken",vt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Bt{constructor(Ce,nt,Dt,Jt,yn){if(this.operation=Ce,this.retryPolicy=nt,this.getWaitDuration=Dt,this.lowerBound=Jt,this.upperBound=yn,this.pending=null,this.nextErrorWaitInterval=Jt,Jt>yn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ce){var nt=this;return(0,mt.Z)(function*(){nt.stop();try{nt.pending=new Ft.BH,yield function At(Ge){return new Promise(Ce=>{setTimeout(Ce,Ge)})}(nt.getNextRun(Ce)),nt.pending.resolve(),yield nt.pending.promise,nt.pending=new Ft.BH,yield nt.operation(),nt.pending.resolve(),yield nt.pending.promise,nt.process(!0).catch(()=>{})}catch(Dt){nt.retryPolicy(Dt)?nt.process(!1).catch(()=>{}):nt.stop()}})()}getNextRun(Ce){if(Ce)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const nt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),nt}}}const Kt=new Ft.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Hn(Ge,Ce){return jn.apply(this,arguments)}function jn(){return(jn=(0,mt.Z)(function*({url:Ge,body:Ce},nt){const Dt={"Content-Type":"application/json"},Jt=nt.getImmediate({optional:!0});if(Jt){const Rr=yield Jt.getHeartbeatsHeader();Rr&&(Dt["X-Firebase-Client"]=Rr)}const yn={method:"POST",body:JSON.stringify(Ce),headers:Dt};let Vn,Ar;try{Vn=yield fetch(Ge,yn)}catch(Rr){throw Kt.create("fetch-network-error",{originalErrorMessage:Rr?.message})}if(200!==Vn.status)throw Kt.create("fetch-status-error",{httpStatus:Vn.status});try{Ar=yield Vn.json()}catch(Rr){throw Kt.create("fetch-parse-error",{originalErrorMessage:Rr?.message})}const $n=Ar.ttl.match(/^([\d.]+)(s)$/);if(!$n||!$n[2]||isNaN(Number($n[1])))throw Kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ar.ttl}`});const Ks=1e3*Number($n[1]),si=Date.now();return{token:Ar.token,expireTimeMillis:si+Ks,issuedAtTimeMillis:si}})).apply(this,arguments)}const kn="firebase-app-check-database",Yn=1,tr="firebase-app-check-store";let On=null;function Kr(Ge,Ce){return In.apply(this,arguments)}function In(){return(In=(0,mt.Z)(function*(Ge,Ce){const Dt=(yield function Pt(){return On||(On=new Promise((Ge,Ce)=>{try{const nt=indexedDB.open(kn,Yn);nt.onsuccess=Dt=>{Ge(Dt.target.result)},nt.onerror=Dt=>{var Jt;Ce(Kt.create("storage-open",{originalErrorMessage:null===(Jt=Dt.target.error)||void 0===Jt?void 0:Jt.message}))},nt.onupgradeneeded=Dt=>{0===Dt.oldVersion&&Dt.target.result.createObjectStore(tr,{keyPath:"compositeKey"})}}catch(nt){Ce(Kt.create("storage-open",{originalErrorMessage:nt?.message}))}}),On)}()).transaction(tr,"readwrite"),yn=Dt.objectStore(tr).put({compositeKey:Ge,value:Ce});return new Promise((Vn,Ar)=>{yn.onsuccess=$n=>{Vn()},Dt.onerror=$n=>{var Ks;Ar(Kt.create("storage-set",{originalErrorMessage:null===(Ks=$n.target.error)||void 0===Ks?void 0:Ks.message}))}})})).apply(this,arguments)}const nr=new Se.Yd("@firebase/app-check");function ni(Ge,Ce){return(0,Ft.hl)()?function ti(Ge,Ce){return Kr(function Wn(Ge){return`${Ge.options.appId}-${Ge.name}`}(Ge),Ce)}(Ge,Ce).catch(nt=>{nr.warn(`Failed to write token to IndexedDB. Error: ${nt}`)}):Promise.resolve()}function Sn(){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,mt.Z)(function*(){const Ge=jt();if(Ge.enabled&&Ge.token)return Ge.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Lt={error:"UNKNOWN_ERROR"};function Et(Ge){return Ft.US.encodeString(JSON.stringify(Ge),!1)}function Fe(Ge){return me.apply(this,arguments)}function me(){return(me=(0,mt.Z)(function*(Ge,Ce=!1){const nt=Ge.app;!function Tt(Ge){if(!wt(Ge).activated)throw Kt.create("use-before-activation",{appName:Ge.name})}(nt);const Dt=wt(nt);let yn,Jt=Dt.token;if(Jt&&!te(Jt)&&(Dt.token=void 0,Jt=void 0),!Jt){const $n=yield Dt.cachedTokenPromise;$n&&(te($n)?Jt=$n:yield ni(nt,void 0))}if(!Ce&&Jt&&te(Jt))return{token:Jt.token};let Ar,Vn=!1;if(function cr(){return jt().enabled}()){Dt.exchangeTokenPromise||(Dt.exchangeTokenPromise=Hn(function Bn(Ge,Ce){const{projectId:nt,appId:Dt,apiKey:Jt}=Ge.options;return{url:`${$e}/projects/${nt}/apps/${Dt}:${dt}?key=${Jt}`,body:{debug_token:Ce}}}(nt,yield Sn()),Ge.heartbeatServiceProvider).finally(()=>{Dt.exchangeTokenPromise=void 0}),Vn=!0);const $n=yield Dt.exchangeTokenPromise;return yield ni(nt,$n),Dt.token=$n,{token:$n.token}}try{Dt.exchangeTokenPromise||(Dt.exchangeTokenPromise=Dt.provider.getToken().finally(()=>{Dt.exchangeTokenPromise=void 0}),Vn=!0),Jt=yield wt(nt).exchangeTokenPromise}catch($n){"appCheck/throttled"===$n.code?nr.warn($n.message):nr.error($n),yn=$n}return Jt?yn?Ar=te(Jt)?{token:Jt.token,internalError:yn}:ie(yn):(Ar={token:Jt.token},Dt.token=Jt,yield ni(nt,Jt)):Ar=ie(yn),Vn&&function fe(Ge,Ce){const nt=wt(Ge).tokenObservers;for(const Dt of nt)try{"EXTERNAL"===Dt.type&&null!=Ce.error?Dt.error(Ce.error):Dt.next(Ce)}catch{}}(nt,Ar),Ar})).apply(this,arguments)}function pt(Ge,Ce){const nt=wt(Ge),Dt=nt.tokenObservers.filter(Jt=>Jt.next!==Ce);0===Dt.length&&nt.tokenRefresher&&nt.tokenRefresher.isRunning()&&nt.tokenRefresher.stop(),nt.tokenObservers=Dt}function bt(Ge){const{app:Ce}=Ge,nt=wt(Ce);let Dt=nt.tokenRefresher;Dt||(Dt=function he(Ge){const{app:Ce}=Ge;return new Bt((0,mt.Z)(function*(){let Dt;if(Dt=wt(Ce).token?yield Fe(Ge,!0):yield Fe(Ge),Dt.error)throw Dt.error;if(Dt.internalError)throw Dt.internalError}),()=>!0,()=>{const nt=wt(Ce);if(nt.token){let Dt=nt.token.issuedAtTimeMillis+.5*(nt.token.expireTimeMillis-nt.token.issuedAtTimeMillis)+3e5;return Dt=Math.min(Dt,nt.token.expireTimeMillis-3e5),Math.max(0,Dt-Date.now())}return 0},vt.RETRIAL_MIN_WAIT,vt.RETRIAL_MAX_WAIT)}(Ge),nt.tokenRefresher=Dt),!Dt.isRunning()&&nt.isTokenAutoRefreshEnabled&&Dt.start()}function te(Ge){return Ge.expireTimeMillis-Date.now()>0}function ie(Ge){return{token:Et(Lt),error:Ge}}class X{constructor(Ce,nt){this.app=Ce,this.heartbeatServiceProvider=nt}_delete(){const{tokenObservers:Ce}=wt(this.app);for(const nt of Ce)pt(this.app,nt.next);return Promise.resolve()}}const rn="app-check-internal";!function Gn(){(0,ot._registerComponent)(new ze.wA("app-check",Ge=>function Ve(Ge,Ce){return new X(Ge,Ce)}(Ge.getProvider("app").getImmediate(),Ge.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ge,Ce,nt)=>{Ge.getProvider(rn).initialize()})),(0,ot._registerComponent)(new ze.wA(rn,Ge=>function de(Ge){return{getToken:Ce=>Fe(Ge,Ce),addTokenListener:Ce=>function De(Ge,Ce,nt,Dt){const{app:Jt}=Ge,yn=wt(Jt);if(yn.tokenObservers=[...yn.tokenObservers,{next:nt,error:Dt,type:Ce}],yn.token&&te(yn.token)){const Ar=yn.token;Promise.resolve().then(()=>{nt({token:Ar.token}),bt(Ge)}).catch(()=>{})}yn.cachedTokenPromise.then(()=>bt(Ge))}(Ge,"INTERNAL",Ce),removeTokenListener:Ce=>pt(Ge.app,Ce)}}(Ge.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ot.registerVersion)("@firebase/app-check","0.6.4")}();class ji{constructor(){return(0,b.vb)("app-check")}}typeof window<"u"&&window},1205:(sn,qe,G)=>{G.d(qe,{zQ:()=>$e,ww:()=>ut,rT:()=>ft,f7:()=>Qt,L6:()=>Te,_Q:()=>We,lh:()=>wt,Qv:()=>Se,nw:()=>jt});var b=G(4650),Z=G(7579),p=G(9646),Ie=G(9751),Pe=G(8996),xe=G(6451),He=G(5363),Le=G(3900),Ae=G(4004),be=G(6063);class ve extends Z.x{constructor(dt=1/0,vt=1/0,ht=be.l){super(),this._bufferSize=dt,this._windowTime=vt,this._timestampProvider=ht,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=vt===1/0,this._bufferSize=Math.max(1,dt),this._windowTime=Math.max(1,vt)}next(dt){const{isStopped:vt,_buffer:ht,_infiniteTimeWindow:Bt,_timestampProvider:At,_windowTime:hn}=this;vt||(ht.push(dt),!Bt&&ht.push(At.now()+hn)),this._trimBuffer(),super.next(dt)}_subscribe(dt){this._throwIfClosed(),this._trimBuffer();const vt=this._innerSubscribe(dt),{_infiniteTimeWindow:ht,_buffer:Bt}=this,At=Bt.slice();for(let hn=0;hn<At.length&&!dt.closed;hn+=ht?1:2)dt.next(At[hn]);return this._checkFinalizedStatuses(dt),vt}_trimBuffer(){const{_bufferSize:dt,_timestampProvider:vt,_buffer:ht,_infiniteTimeWindow:Bt}=this,At=(Bt?1:2)*dt;if(dt<1/0&&At<ht.length&&ht.splice(0,ht.length-At),!Bt){const hn=vt.now();let Kt=0;for(let nn=1;nn<ht.length&&ht[nn]<=hn;nn+=2)Kt=nn;Kt&&ht.splice(0,Kt+1)}}}var ke=G(3099);function et(Qe,dt,vt){let ht,Bt=!1;return Qe&&"object"==typeof Qe?({bufferSize:ht=1/0,windowTime:dt=1/0,refCount:Bt=!1,scheduler:vt}=Qe):ht=Qe??1/0,(0,ke.B)({connector:()=>new ve(ht,dt,vt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Bt})}var Ke=G(590),_t=G(576);function xt(Qe,dt){return(0,_t.m)(dt)?(0,Le.w)(()=>Qe,dt):(0,Le.w)(()=>Qe)}var tt=G(9468),gt=G(9300),we=G(2122),yt=G(2011),mt=G(6895),ot=G(6217),ze=G(9260);const Se=new b.OlP("angularfire2.auth.use-emulator"),Te=new b.OlP("angularfire2.auth.settings"),We=new b.OlP("angularfire2.auth.tenant-id"),ft=new b.OlP("angularfire2.auth.langugage-code"),wt=new b.OlP("angularfire2.auth.use-device-language"),Qt=new b.OlP("angularfire.auth.persistence"),jt=(Qe,dt,vt,ht,Bt,At,hn,Kt)=>(0,yt.cc)(`${Qe.name}.auth`,"AngularFireAuth",Qe.name,()=>{const nn=dt.runOutsideAngular(()=>Qe.auth());if(vt&&nn.useEmulator(...vt),ht&&(nn.tenantId=ht),nn.languageCode=Bt,At&&nn.useDeviceLanguage(),hn)for(const[Tt,Nn]of Object.entries(hn))nn.settings[Tt]=Nn;return Kt&&nn.setPersistence(Kt),nn},[vt,ht,Bt,At,hn,Kt]);let $e=(()=>{class Qe{constructor(vt,ht,Bt,At,hn,Kt,nn,Tt,Nn,Un,Hn,jn){const Lr=new Z.x,zn=(0,p.of)(void 0).pipe((0,He.Q)(hn.outsideAngular),(0,Le.w)(()=>At.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,9568)))),(0,Ae.U)(()=>(0,yt.on)(vt,At,ht)),(0,Ae.U)(Bn=>jt(Bn,At,Kt,Tt,Nn,Un,nn,Hn)),et({bufferSize:1,refCount:!1}));if((0,mt.PM)(Bt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,p.of)(null);else{zn.pipe((0,Ke.P)()).subscribe();const kn=zn.pipe((0,Le.w)(un=>un.getRedirectResult().then(On=>On,()=>null)),we.iC,et({bufferSize:1,refCount:!1})),Yn=zn.pipe((0,Le.w)(un=>new Ie.y(On=>({unsubscribe:At.runOutsideAngular(()=>un.onAuthStateChanged(Pt=>On.next(Pt),Pt=>On.error(Pt),()=>On.complete()))})))),tr=zn.pipe((0,Le.w)(un=>new Ie.y(On=>({unsubscribe:At.runOutsideAngular(()=>un.onIdTokenChanged(Pt=>On.next(Pt),Pt=>On.error(Pt),()=>On.complete()))}))));this.authState=kn.pipe(xt(Yn),(0,tt.R)(hn.outsideAngular),(0,He.Q)(hn.insideAngular)),this.user=kn.pipe(xt(tr),(0,tt.R)(hn.outsideAngular),(0,He.Q)(hn.insideAngular)),this.idToken=this.user.pipe((0,Le.w)(un=>un?(0,Pe.D)(un.getIdToken()):(0,p.of)(null))),this.idTokenResult=this.user.pipe((0,Le.w)(un=>un?(0,Pe.D)(un.getIdTokenResult()):(0,p.of)(null))),this.credential=(0,xe.T)(kn,Lr,this.authState.pipe((0,gt.h)(un=>!un))).pipe((0,Ae.U)(un=>un?.user?un:null),(0,tt.R)(hn.outsideAngular),(0,He.Q)(hn.insideAngular))}return(0,yt.pX)(this,zn,At,{spy:{apply:(Bn,kn,Yn)=>{(Bn.startsWith("signIn")||Bn.startsWith("createUser"))&&Yn.then(tr=>Lr.next(tr))}}})}}return Qe.\u0275fac=function(vt){return new(vt||Qe)(b.LFG(yt.Dh),b.LFG(yt.xv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(we.HU),b.LFG(Se,8),b.LFG(Te,8),b.LFG(We,8),b.LFG(ft,8),b.LFG(wt,8),b.LFG(Qt,8),b.LFG(ot.nm,8))},Qe.\u0275prov=b.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"any"}),Qe})(),ut=(()=>{class Qe{constructor(){ze.Z.registerVersion("angularfire",we.q4.full,"auth-compat")}}return Qe.\u0275fac=function(vt){return new(vt||Qe)},Qe.\u0275mod=b.oAB({type:Qe}),Qe.\u0275inj=b.cJS({providers:[$e]}),Qe})()},3101:(sn,qe,G)=>{G.d(qe,{ST:()=>Bv,yb:()=>yb});var b=G(4650),Z=G(4986),p=G(9751),Ie=G(8996),Pe=G(9646),xe=G(2122),He=G(8675),Le=G(4482),Ae=G(5403);function be(){return(0,Le.e)((a,e)=>{let n,u=!1;a.subscribe((0,Ae.x)(e,f=>{const _=n;n=f,u&&e.next([_,f]),u=!0}))})}var Te,ve=G(4004),ke=G(5026),et=G(1884),Ke=G(9300),_t=G(2011),xt=G(6895),gt=(G(9568),G(3942)),we=G(5861),yt=G(9681),mt=G(4859),ot=G(1877),ze=G(2090),Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Se={},We=We||{},ft=Ft||self;function wt(){}function Qt(a){var e=typeof a;return"array"==(e="object"!=e?e:a?Array.isArray(a)?"array":e:"null")||"object"==e&&"number"==typeof a.length}function jt(a){var e=typeof a;return"object"==e&&null!=a||"function"==e}var ut="closure_uid_"+(1e9*Math.random()>>>0),Qe=0;function dt(a,e,n){return a.call.apply(a.bind,arguments)}function vt(a,e,n){if(!a)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,u),a.apply(e,f)}}return function(){return a.apply(e,arguments)}}function ht(a,e,n){return(ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dt:vt).apply(null,arguments)}function Bt(a,e){var n=Array.prototype.slice.call(arguments,1);return function(){var u=n.slice();return u.push.apply(u,arguments),a.apply(this,u)}}function At(a,e){function n(){}n.prototype=e.prototype,a.X=e.prototype,a.prototype=new n,a.prototype.constructor=a,a.Wb=function(u,f,_){for(var w=Array(arguments.length-2),O=2;O<arguments.length;O++)w[O-2]=arguments[O];return e.prototype[f].apply(u,w)}}function hn(){this.s=this.s,this.o=this.o}hn.prototype.s=!1,hn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function $e(a){Object.prototype.hasOwnProperty.call(a,ut)&&a[ut]||(a[ut]=++Qe)}(this)},hn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nn=Array.prototype.indexOf?function(a,e){return Array.prototype.indexOf.call(a,e,void 0)}:function(a,e){if("string"==typeof a)return"string"!=typeof e||1!=e.length?-1:a.indexOf(e,0);for(let n=0;n<a.length;n++)if(n in a&&a[n]===e)return n;return-1};function Tt(a){const e=a.length;if(0<e){const n=Array(e);for(let u=0;u<e;u++)n[u]=a[u];return n}return[]}function Nn(a,e){for(let n=1;n<arguments.length;n++){const u=arguments[n];if(Qt(u)){const f=a.length||0,_=u.length||0;a.length=f+_;for(let w=0;w<_;w++)a[f+w]=u[w]}else a.push(u)}}function Un(a,e){this.type=a,this.g=this.target=e,this.defaultPrevented=!1}Un.prototype.h=function(){this.defaultPrevented=!0};var Hn=function(){if(!ft.addEventListener||!Object.defineProperty)return!1;var a=!1,e=Object.defineProperty({},"passive",{get:function(){a=!0}});try{ft.addEventListener("test",wt,e),ft.removeEventListener("test",wt,e)}catch{}return a}();function jn(a){return/^[\s\xa0]*$/.test(a)}var Lr=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function zn(a,e){return a<e?-1:a>e?1:0}function Bn(){var a=ft.navigator;return a&&(a=a.userAgent)?a:""}function kn(a){return-1!=Bn().indexOf(a)}function Yn(a){return Yn[" "](a),a}Yn[" "]=wt;var Kr,a,un=kn("Opera"),On=kn("Trident")||kn("MSIE"),Pt=kn("Edge"),vr=Pt||On,ti=kn("Gecko")&&!(-1!=Bn().toLowerCase().indexOf("webkit")&&!kn("Edge"))&&!(kn("Trident")||kn("MSIE"))&&!kn("Edge"),kr=-1!=Bn().toLowerCase().indexOf("webkit")&&!kn("Edge");function Wr(){var a=ft.document;return a?a.documentMode:void 0}e:{var In="",fn=(a=Bn(),ti?/rv:([^\);]+)(\)|;)/.exec(a):Pt?/Edge\/([\d\.]+)/.exec(a):On?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):kr?/WebKit\/(\S+)/.exec(a):un?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(fn&&(In=fn?fn[1]:""),On){var Zt=Wr();if(null!=Zt&&Zt>parseFloat(In)){Kr=String(Zt);break e}}Kr=In}var Wn={};var ni=ft.document&&On&&(Wr()||parseInt(Kr,10))||void 0;function qr(a,e){if(Un.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var n=this.type=a.type,u=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=e,e=a.relatedTarget){if(ti){e:{try{Yn(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==n?e=a.fromElement:"mouseout"==n&&(e=a.toElement);this.relatedTarget=e,u?(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:Cn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&qr.X.h.call(this)}}At(qr,Un);var Cn={2:"touch",3:"pen",4:"mouse"};qr.prototype.h=function(){qr.X.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var cr="closure_listenable_"+(1e6*Math.random()|0),Sn=0;function Ir(a,e,n,u,f){this.listener=a,this.proxy=null,this.src=e,this.type=n,this.capture=!!u,this.ha=f,this.key=++Sn,this.ba=this.ea=!1}function br(a){a.ba=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Lt(a,e,n){for(const u in a)e.call(n,a[u],u,a)}function Et(a){const e={};for(const n in a)e[n]=a[n];return e}const Fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(a,e){let n,u;for(let f=1;f<arguments.length;f++){for(n in u=arguments[f],u)a[n]=u[n];for(let _=0;_<Fe.length;_++)n=Fe[_],Object.prototype.hasOwnProperty.call(u,n)&&(a[n]=u[n])}}function De(a){this.src=a,this.g={},this.h=0}function pt(a,e){var n=e.type;if(n in a.g){var _,u=a.g[n],f=nn(u,e);(_=0<=f)&&Array.prototype.splice.call(u,f,1),_&&(br(e),0==a.g[n].length&&(delete a.g[n],a.h--))}}function bt(a,e,n,u){for(var f=0;f<a.length;++f){var _=a[f];if(!_.ba&&_.listener==e&&_.capture==!!n&&_.ha==u)return f}return-1}De.prototype.add=function(a,e,n,u,f){var _=a.toString();(a=this.g[_])||(a=this.g[_]=[],this.h++);var w=bt(a,e,u,f);return-1<w?(e=a[w],n||(e.ea=!1)):((e=new Ir(e,this.src,_,!!u,f)).ea=n,a.push(e)),e};var he="closure_lm_"+(1e6*Math.random()|0),fe={};function te(a,e,n,u,f){if(u&&u.once)return Ve(a,e,n,u,f);if(Array.isArray(e)){for(var _=0;_<e.length;_++)te(a,e[_],n,u,f);return null}return n=zt(n),a&&a[cr]?a.N(e,n,jt(u)?!!u.capture:!!u,f):ie(a,e,n,!1,u,f)}function ie(a,e,n,u,f,_){if(!e)throw Error("Invalid event type");var w=jt(f)?!!f.capture:!!f,O=st(a);if(O||(a[he]=O=new De(a)),(n=O.add(e,n,u,w,_)).proxy)return n;if(u=function X(){const e=Re;return function a(n){return e.call(a.src,a.listener,n)}}(),n.proxy=u,u.src=a,u.listener=n,a.addEventListener)Hn||(f=w),void 0===f&&(f=!1),a.addEventListener(e.toString(),u,f);else if(a.attachEvent)a.attachEvent(le(e.toString()),u);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(u)}return n}function Ve(a,e,n,u,f){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Ve(a,e[_],n,u,f);return null}return n=zt(n),a&&a[cr]?a.O(e,n,jt(u)?!!u.capture:!!u,f):ie(a,e,n,!0,u,f)}function de(a,e,n,u,f){if(Array.isArray(e))for(var _=0;_<e.length;_++)de(a,e[_],n,u,f);else u=jt(u)?!!u.capture:!!u,n=zt(n),a&&a[cr]?(a=a.i,(e=String(e).toString())in a.g&&-1<(n=bt(_=a.g[e],n,u,f))&&(br(_[n]),Array.prototype.splice.call(_,n,1),0==_.length&&(delete a.g[e],a.h--))):a&&(a=st(a))&&(e=a.g[e.toString()],a=-1,e&&(a=bt(e,n,u,f)),(n=-1<a?e[a]:null)&&ge(n))}function ge(a){if("number"!=typeof a&&a&&!a.ba){var e=a.src;if(e&&e[cr])pt(e.i,a);else{var n=a.type,u=a.proxy;e.removeEventListener?e.removeEventListener(n,u,a.capture):e.detachEvent?e.detachEvent(le(n),u):e.addListener&&e.removeListener&&e.removeListener(u),(n=st(e))?(pt(n,a),0==n.h&&(n.src=null,e[he]=null)):br(a)}}}function le(a){return a in fe?fe[a]:fe[a]="on"+a}function Re(a,e){if(a.ba)a=!0;else{e=new qr(e,this);var n=a.listener,u=a.ha||a.src;a.ea&&ge(a),a=n.call(u,e)}return a}function st(a){return(a=a[he])instanceof De?a:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(a){return"function"==typeof a?a:(a[Ct]||(a[Ct]=function(e){return a.handleEvent(e)}),a[Ct])}function Ht(){hn.call(this),this.i=new De(this),this.P=this,this.I=null}function En(a,e){var n,u=a.I;if(u)for(n=[];u;u=u.I)n.push(u);if(a=a.P,u=e.type||e,"string"==typeof e)e=new Un(e,a);else if(e instanceof Un)e.target=e.target||a;else{var f=e;me(e=new Un(u,a),f)}if(f=!0,n)for(var _=n.length-1;0<=_;_--){var w=e.g=n[_];f=Ci(w,u,!0,e)&&f}if(f=Ci(w=e.g=a,u,!0,e)&&f,f=Ci(w,u,!1,e)&&f,n)for(_=0;_<n.length;_++)f=Ci(w=e.g=n[_],u,!1,e)&&f}function Ci(a,e,n,u){if(!(e=a.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ba&&w.capture==n){var O=w.listener,H=w.ha||w.src;w.ea&&pt(a.i,w),f=!1!==O.call(H,u)&&f}}return f&&!u.defaultPrevented}At(Ht,hn),Ht.prototype[cr]=!0,Ht.prototype.removeEventListener=function(a,e,n,u){de(this,a,e,n,u)},Ht.prototype.M=function(){if(Ht.X.M.call(this),this.i){var e,a=this.i;for(e in a.g){for(var n=a.g[e],u=0;u<n.length;u++)br(n[u]);delete a.g[e],a.h--}}this.I=null},Ht.prototype.N=function(a,e,n,u){return this.i.add(String(a),e,!1,n,u)},Ht.prototype.O=function(a,e,n,u){return this.i.add(String(a),e,!0,n,u)};var Qr=ft.JSON.stringify;function es(){var a=Xr;let e=null;return a.g&&(e=a.g,a.g=a.g.next,a.g||(a.h=null),e.next=null),e}var Zn,Cr=new class{constructor(a,e){this.i=a,this.j=e,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new Wi,a=>a.reset());class Wi{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ps(a){ft.setTimeout(()=>{throw a},0)}function ts(a,e){Zn||function Yr(){var a=ft.Promise.resolve(void 0);Zn=function(){a.then(ns)}}(),ri||(Zn(),ri=!0),Xr.add(a,e)}var ri=!1,Xr=new class _s{constructor(){this.h=this.g=null}add(e,n){const u=Cr.get();u.set(e,n),this.h?this.h.next=u:this.g=u,this.h=u}};function ns(){for(var a;a=es();){try{a.h.call(a.g)}catch(n){Ps(n)}var e=Cr;e.j(a),100>e.h&&(e.h++,a.next=e.g,e.g=a)}ri=!1}function Tr(a,e){Ht.call(this),this.h=a||1,this.g=e||ft,this.j=ht(this.lb,this),this.l=Date.now()}function ks(a){a.ca=!1,a.R&&(a.g.clearTimeout(a.R),a.R=null)}function ds(a,e,n){if("function"==typeof a)n&&(a=ht(a,n));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=ht(a.handleEvent,a)}return 2147483647<Number(e)?-1:ft.setTimeout(a,e||0)}function ki(a){a.g=ds(()=>{a.g=null,a.i&&(a.i=!1,ki(a))},a.j);const e=a.h;a.h=null,a.m.apply(null,e)}At(Tr,Ht),(Te=Tr.prototype).ca=!1,Te.R=null,Te.lb=function(){if(this.ca){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-a):(this.R&&(this.g.clearTimeout(this.R),this.R=null),En(this,"tick"),this.ca&&(ks(this),this.start()))}},Te.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Te.M=function(){Tr.X.M.call(this),ks(this),delete this.g};class rn extends hn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ki(this)}M(){super.M(),this.g&&(ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(a){hn.call(this),this.h=a,this.g={}}At(Gn,hn);var Sr=[];function pi(a,e,n,u){Array.isArray(n)||(n&&(Sr[0]=n.toString()),n=Sr);for(var f=0;f<n.length;f++){var _=te(e,n[f],u||a.handleEvent,!1,a.h||a);if(!_)break;a.g[_.key]=_}}function ji(a){Lt(a.g,function(e,n){this.g.hasOwnProperty(n)&&ge(e)},a),a.g={}}function Mr(){this.g=!0}function gi(a,e,n,u){a.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fn(a,e){if(!a.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(a=0;a<n.length;a++)if(Array.isArray(n[a])){var u=n[a];if(!(2>u.length)){var f=u[1];if(Array.isArray(f)&&!(1>f.length)){var _=f[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<f.length;w++)f[w]=""}}}return Qr(n)}catch{return e}}(a,n)+(u?" "+u:"")})}Gn.prototype.M=function(){Gn.X.M.call(this),ji(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mr.prototype.Aa=function(){this.g=!1},Mr.prototype.info=function(){};var Ti={},ys=null;function zs(){return ys=ys||new Ht}function vs(a){Un.call(this,Ti.Pa,a)}function Ni(a){const e=zs();En(e,new vs(e))}function Ws(a,e){Un.call(this,Ti.STAT_EVENT,a),this.stat=e}function Ur(a){const e=zs();En(e,new Ws(e,a))}function Fi(a,e){Un.call(this,Ti.Qa,a),this.size=e}function Fs(a,e){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return ft.setTimeout(function(){a()},e)}Ti.Pa="serverreachability",At(vs,Un),Ti.STAT_EVENT="statevent",At(Ws,Un),Ti.Qa="timingevent",At(Fi,Un);var Ge={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ce={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function nt(){}function Jt(){}nt.prototype.h=null;var $n,yn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Vn(){Un.call(this,"d")}function Ar(){Un.call(this,"c")}function Ks(){}function si(a,e,n,u){this.l=a,this.j=e,this.m=n,this.U=u||1,this.S=new Gn(this),this.O=Ls,this.T=new Tr(a=vr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}At(Vn,Un),At(Ar,Un),At(Ks,nt),Ks.prototype.g=function(){return new XMLHttpRequest},Ks.prototype.i=function(){return{}},$n=new Ks;var Ls=45e3,qs={},rs={};function bs(a,e,n){a.K=1,a.v=Ki(ws(e)),a.s=n,a.P=!0,Vo(a,null)}function Vo(a,e){a.F=Date.now(),ta(a),a.A=ws(a.v);var n=a.A,u=a.U;Array.isArray(u)||(u=[String(u)]),No(n.i,"t",u),a.C=0,n=a.l.H,a.h=new Rr,a.g=pl(a.l,n?e:null,!a.s),0<a.N&&(a.L=new rn(ht(a.La,a,a.g),a.N)),pi(a.S,a.g,"readystatechange",a.ib),e=a.H?Et(a.H):{},a.s?(a.u||(a.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",a.g.da(a.A,a.u,a.s,e)):(a.u="GET",a.g.da(a.A,a.u,null,e)),Ni(),function Zr(a,e,n,u,f,_){a.info(function(){if(a.g)if(_)for(var w="",O=_.split("&"),H=0;H<O.length;H++){var q=O[H].split("=");if(1<q.length){var ae=q[0];q=q[1];var Oe=ae.split("_");w=2<=Oe.length&&"type"==Oe[1]?w+(ae+"=")+q+"&":w+(ae+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+u+") [attempt "+f+"]: "+e+"\n"+n+"\n"+w})}(a.j,a.u,a.A,a.m,a.U,a.s)}function Zi(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Da}function Oo(a,e,n){let f,u=!0;for(;!a.I&&a.C<n.length;){if(f=Go(a,n),f==rs){4==e&&(a.o=4,Ur(14),u=!1),gi(a.j,a.m,null,"[Incomplete Response]");break}if(f==qs){a.o=4,Ur(15),gi(a.j,a.m,n,"[Invalid Chunk]"),u=!1;break}gi(a.j,a.m,f,null),ia(a,f)}Zi(a)&&f!=rs&&f!=qs&&(a.h.g="",a.C=0),4!=e||0!=n.length||a.h.h||(a.o=1,Ur(16),u=!1),a.i=a.i&&u,u?0<n.length&&!a.$&&(a.$=!0,(e=a.l).g==a&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),dl(e),e.K=!0,Ur(11))):(gi(a.j,a.m,n,"[Invalid Chunked Response]"),Es(a),mo(a))}function Go(a,e){var n=a.C,u=e.indexOf("\n",n);return-1==u?rs:(n=Number(e.substring(n,u)),isNaN(n)?qs:(u+=1)+n>e.length?rs:(e=e.substr(u,n),a.C=u+n,e))}function ta(a){a.V=Date.now()+a.O,na(a,a.O)}function na(a,e){if(null!=a.B)throw Error("WatchDog timer not null");a.B=Fs(ht(a.gb,a),e)}function ra(a){a.B&&(ft.clearTimeout(a.B),a.B=null)}function mo(a){0==a.l.G||a.I||fl(a.l,a)}function Es(a){ra(a);var e=a.L;e&&"function"==typeof e.na&&e.na(),a.L=null,ks(a.T),ji(a.S),a.g&&(e=a.g,a.g=null,e.abort(),e.na())}function ia(a,e){try{var n=a.l;if(0!=n.G&&(n.g==a||mi(n.h,a)))if(!a.J&&mi(n.h,a)&&3==n.G){try{var u=n.Fa.g.parse(e)}catch{u=null}if(Array.isArray(u)&&3==u.length){var f=u;if(0==f[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<a.F))break e;hl(n),Cs(n)}xa(n),Ur(18)}}else n.Ba=f[1],0<n.Ba-n.T&&37500>f[2]&&n.L&&0==n.A&&!n.v&&(n.v=Fs(ht(n.cb,n),6e3));if(1>=Is(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else da(n,11)}else if((a.J||n.g==a)&&hl(n),!jn(e))for(f=n.Fa.g.parse(e),e=0;e<f.length;e++){let q=f[e];if(n.T=q[0],q=q[1],2==n.G)if("c"==q[0]){n.I=q[1],n.ka=q[2];const ae=q[3];null!=ae&&(n.ma=ae,n.j.info("VER="+n.ma));const Oe=q[4];null!=Oe&&(n.Ca=Oe,n.j.info("SVER="+n.Ca));const Ze=q[5];null!=Ze&&"number"==typeof Ze&&0<Ze&&(n.J=u=1.5*Ze,n.j.info("backChannelRequestTimeoutMs_="+u)),u=n;const Ot=a.g;if(Ot){const Gt=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gt){var _=u.h;_.g||-1==Gt.indexOf("spdy")&&-1==Gt.indexOf("quic")&&-1==Gt.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(Aa(_,_.h),_.h=null))}if(u.D){const dn=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;dn&&(u.za=dn,Gr(u.F,u.D,dn))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-a.F,n.j.info("Handshake RTT: "+n.P+"ms"));var w=a;if((u=n).sa=pu(u,u.H?u.ka:null,u.V),w.J){Wa(u.h,w);var O=w,H=u.J;H&&O.setTimeout(H),O.B&&(ra(O),ta(O)),u.g=w}else Ol(u);0<n.i.length&&Ma(n)}else"stop"!=q[0]&&"close"!=q[0]||da(n,7);else 3==n.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?da(n,7):ca(n):"noop"!=q[0]&&n.l&&n.l.wa(q),n.A=0)}Ni()}catch{}}function ol(a,e){if(a.forEach&&"function"==typeof a.forEach)a.forEach(e,void 0);else if(Qt(a)||"string"==typeof a)Array.prototype.forEach.call(a,e,void 0);else for(var n=function Ys(a){if(a.oa&&"function"==typeof a.oa)return a.oa();if(!a.W||"function"!=typeof a.W){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(Qt(a)||"string"==typeof a){var e=[];a=a.length;for(var n=0;n<a;n++)e.push(n);return e}e=[],n=0;for(const u in a)e[n++]=u;return e}}}(a),u=function hs(a){if(a.W&&"function"==typeof a.W)return a.W();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if("string"==typeof a)return a.split("");if(Qt(a)){for(var e=[],n=a.length,u=0;u<n;u++)e.push(a[u]);return e}for(u in e=[],n=0,a)e[n++]=a[u];return e}(a),f=u.length,_=0;_<f;_++)e.call(void 0,u[_],n&&n[_],a)}(Te=si.prototype).setTimeout=function(a){this.O=a},Te.ib=function(a){a=a.target;const e=this.L;e&&3==Vs(a)?e.l():this.La(a)},Te.La=function(a){try{if(a==this.g)e:{const ae=Vs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ae)&&(3!=ae||vr||this.g&&(this.h.h||this.g.fa()||Na(this.g)))){this.I||4!=ae||7==e||Ni(),ra(this);var n=this.g.aa();this.Y=n;t:if(Zi(this)){var u=Na(this.g);a="";var f=u.length,_=4==Vs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),mo(this);var w="";break t}this.h.i=new ft.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,a+=this.h.i.decode(u[e],{stream:_&&e==f-1});u.splice(0,f),this.h.g+=a,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==n,function ii(a,e,n,u,f,_,w){a.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+f+"]: "+e+"\n"+n+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.U,ae,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,H=this.g;if((O=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(O)){var q=O;break t}}q=null}if(!(n=q)){this.i=!1,this.o=3,Ur(12),Es(this),mo(this);break e}gi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ia(this,n)}this.P?(Oo(this,ae,w),vr&&this.i&&3==ae&&(pi(this.S,this.T,"tick",this.hb),this.T.start())):(gi(this.j,this.m,w,null),ia(this,w)),4==ae&&Es(this),this.i&&!this.I&&(4==ae?fl(this.l,this):(this.i=!1,ta(this)))}else 400==n&&0<w.indexOf("Unknown SID")?(this.o=3,Ur(12)):(this.o=0,Ur(13)),Es(this),mo(this)}}}catch{}},Te.hb=function(){if(this.g){var a=Vs(this.g),e=this.g.fa();this.C<e.length&&(ra(this),Oo(this,a,e),this.i&&4!=a&&ta(this))}},Te.cancel=function(){this.I=!0,Es(this)},Te.gb=function(){this.B=null;const a=Date.now();0<=a-this.V?(function Bo(a,e){a.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ni(),Ur(17)),Es(this),this.o=2,mo(this)):na(this,this.V-a)};var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _o(a,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,a instanceof _o){this.h=void 0!==e?e:a.h,Zs(this,a.j),this.s=a.s,this.g=a.g,jo(this,a.m),this.l=a.l,e=a.i;var n=new Ds;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),al(this,n),this.o=a.o}else a&&(n=String(a).match(Sa))?(this.h=!!e,Zs(this,n[1]||"",!0),this.s=Js(n[2]||""),this.g=Js(n[3]||"",!0),jo(this,n[4]),this.l=Js(n[5]||"",!0),al(this,n[6]||"",!0),this.o=Js(n[7]||"")):(this.h=!!e,this.i=new Ds(null,this.h))}function ws(a){return new _o(a)}function Zs(a,e,n){a.j=n?Js(e,!0):e,a.j&&(a.j=a.j.replace(/:$/,""))}function jo(a,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);a.m=e}else a.m=null}function al(a,e,n){e instanceof Ds?(a.i=e,function Mi(a,e){e&&!a.j&&(Bs(a),a.i=null,a.g.forEach(function(n,u){var f=u.toLowerCase();u!=f&&(Or(this,u),No(this,f,n))},a)),a.j=e}(a.i,a.h)):(n||(e=Qs(e,za)),a.i=new Ds(e,a.h))}function Gr(a,e,n){a.i.set(e,n)}function Ki(a){return Gr(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Js(a,e){return a?e?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Qs(a,e,n){return"string"==typeof a?(a=encodeURI(a).replace(e,sa),n&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function sa(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}_o.prototype.toString=function(){var a=[],e=this.j;e&&a.push(Qs(e,Xs,!0),":");var n=this.g;return(n||"file"==e)&&(a.push("//"),(e=this.s)&&a.push(Qs(e,Xs,!0),"@"),a.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&a.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&a.push("/"),a.push(Qs(n,"/"==n.charAt(0)?ll:Us,!0))),(n=this.i.toString())&&a.push("?",n),(n=this.o)&&a.push("#",Qs(n,Tl)),a.join("")};var Xs=/[#\/\?@]/g,Us=/[#\?:]/g,ll=/[#\?]/g,za=/[#\?@]/g,Tl=/#/g;function Ds(a,e){this.h=this.g=null,this.i=a||null,this.j=!!e}function Bs(a){a.g||(a.g=new Map,a.h=0,a.i&&function is(a,e){if(a){a=a.split("&");for(var n=0;n<a.length;n++){var u=a[n].indexOf("="),f=null;if(0<=u){var _=a[n].substring(0,u);f=a[n].substring(u+1)}else _=a[n];e(_,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(a.i,function(e,n){a.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Or(a,e){Bs(a),e=Br(a,e),a.g.has(e)&&(a.i=null,a.h-=a.g.get(e).length,a.g.delete(e))}function oa(a,e){return Bs(a),e=Br(a,e),a.g.has(e)}function No(a,e,n){Or(a,e),0<n.length&&(a.i=null,a.g.set(Br(a,e),Tt(n)),a.h+=n.length)}function Br(a,e){return e=String(e),a.j&&(e=e.toLowerCase()),e}function li(a){this.l=a||ul,a=ft.PerformanceNavigationTiming?0<(a=ft.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(ft.g&&ft.g.Ga&&ft.g.Ga()&&ft.g.Ga().$b),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Te=Ds.prototype).add=function(a,e){Bs(this),this.i=null,a=Br(this,a);var n=this.g.get(a);return n||this.g.set(a,n=[]),n.push(e),this.h+=1,this},Te.forEach=function(a,e){Bs(this),this.g.forEach(function(n,u){n.forEach(function(f){a.call(e,f,u,this)},this)},this)},Te.oa=function(){Bs(this);const a=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let u=0;u<e.length;u++){const f=a[u];for(let _=0;_<f.length;_++)n.push(e[u])}return n},Te.W=function(a){Bs(this);let e=[];if("string"==typeof a)oa(this,a)&&(e=e.concat(this.g.get(Br(this,a))));else{a=Array.from(this.g.values());for(let n=0;n<a.length;n++)e=e.concat(a[n])}return e},Te.set=function(a,e){return Bs(this),this.i=null,oa(this,a=Br(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[e]),this.h+=1,this},Te.get=function(a,e){return a&&0<(a=this.W(a)).length?String(a[0]):e},Te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var u=e[n];const _=encodeURIComponent(String(u)),w=this.W(u);for(u=0;u<w.length;u++){var f=_;""!==w[u]&&(f+="="+encodeURIComponent(String(w[u]))),a.push(f)}}return this.i=a.join("&")};var ul=10;function Ho(a){return!!a.h||!!a.g&&a.g.size>=a.j}function Is(a){return a.h?1:a.g?a.g.size:0}function mi(a,e){return a.h?a.h==e:!!a.g&&a.g.has(e)}function Aa(a,e){a.g?a.g.add(e):a.h=e}function Wa(a,e){a.h&&a.h==e?a.h=null:a.g&&a.g.has(e)&&a.g.delete(e)}function vo(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let e=a.i;for(const n of a.g.values())e=e.concat(n.D);return e}return Tt(a.i)}function Ji(){}function aa(){this.g=new Ji}function Sl(a,e,n){const u=n||"";try{ol(a,function(f,_){let w=f;jt(f)&&(w=Qr(f)),e.push(u+_+"="+encodeURIComponent(w))})}catch(f){throw e.push(u+"type="+encodeURIComponent("_badmap")),f}}function bo(a,e,n,u,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(u)}catch{}}function $o(a){this.l=a.ac||null,this.j=a.jb||!1}function cl(a,e){Ht.call(this),this.D=a,this.u=e,this.m=void 0,this.readyState=la,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}li.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},Ji.prototype.stringify=function(a){return ft.JSON.stringify(a,void 0)},Ji.prototype.parse=function(a){return ft.JSON.parse(a,void 0)},At($o,nt),$o.prototype.g=function(){return new cl(this.l,this.j)},$o.prototype.i=function(a){return function(){return a}}({}),At(cl,Ht);var la=0;function Kl(a){a.j.read().then(a.Ta.bind(a)).catch(a.ga.bind(a))}function Mo(a){a.readyState=4,a.l=null,a.j=null,a.A=null,Oa(a)}function Oa(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(Te=cl.prototype).open=function(a,e){if(this.readyState!=la)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=e,this.readyState=1,Oa(this)},Te.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(e.body=a),(this.D||ft).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mo(this)),this.readyState=la},Te.Wa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ft.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kl(this)}else a.text().then(this.Va.bind(this),this.ga.bind(this))},Te.Ta=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var e=a.value?a.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!a.done}))&&(this.response=this.responseText+=e)}a.done?Mo(this):Oa(this),3==this.readyState&&Kl(this)}},Te.Va=function(a){this.g&&(this.response=this.responseText=a,Mo(this))},Te.Ua=function(a){this.g&&(this.response=a,Mo(this))},Te.ga=function(){this.g&&Mo(this)},Te.setRequestHeader=function(a,e){this.v.append(a,e)},Te.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},Te.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],e=this.h.entries();for(var n=e.next();!n.done;)a.push((n=n.value)[0]+": "+n[1]),n=e.next();return a.join("\r\n")},Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var j=ft.JSON.parse;function R(a){Ht.call(this),this.headers=new Map,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=F,this.K=this.L=!1}At(R,Ht);var F="",oe=/^https?$/i,ct=["POST","PUT"];function jr(a,e){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=e,a.m=5,Li(a),so(a)}function Li(a){a.D||(a.D=!0,En(a,"complete"),En(a,"error"))}function Ri(a){if(a.h&&typeof We<"u"&&(!a.C[1]||4!=Vs(a)||2!=a.aa()))if(a.v&&4==Vs(a))ds(a.Ha,0,a);else if(En(a,"readystatechange"),4==Vs(a)){a.h=!1;try{const O=a.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var u;if(u=0===O){var f=String(a.H).match(Sa)[1]||null;if(!f&&ft.self&&ft.self.location){var _=ft.self.location.protocol;f=_.substr(0,_.length-1)}u=!oe.test(f?f.toLowerCase():"")}n=u}if(n)En(a,"complete"),En(a,"success");else{a.m=6;try{var w=2<Vs(a)?a.g.statusText:""}catch{w=""}a.j=w+" ["+a.aa()+"]",Li(a)}}finally{so(a)}}}function so(a,e){if(a.g){oo(a);const n=a.g,u=a.C[0]?wt:null;a.g=null,a.C=null,e||En(a,"ready");try{n.onreadystatechange=u}catch{}}}function oo(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(ft.clearTimeout(a.A),a.A=null)}function Vs(a){return a.g?a.g.readyState:0}function Na(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case F:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Al(a){let e="";return Lt(a,function(n,u){e+=u,e+=":",e+=n,e+="\r\n"}),e}function _i(a,e,n){e:{for(u in n){var u=!1;break e}u=!0}u||(n=Al(n),"string"==typeof a?null!=n&&encodeURIComponent(String(n)):Gr(a,e,n))}function ss(a,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[a]||e}function ua(a){this.Ca=0,this.i=[],this.j=new Mr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ss("failFast",!1,a),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ss("baseRetryDelayMs",5e3,a),this.bb=ss("retryDelaySeedMs",1e4,a),this.$a=ss("forwardChannelMaxRetries",2,a),this.ta=ss("forwardChannelRequestTimeoutMs",2e4,a),this.ra=a&&a.xmlHttpFactory||void 0,this.Da=a&&a.Zb||!1,this.J=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.I="",this.h=new li(a&&a.concurrentRequestLimit),this.Fa=new aa,this.O=a&&a.fastHandshake||!1,this.N=a&&a.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=a&&a.Xb||!1,a&&a.Aa&&this.j.Aa(),a&&a.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&a&&a.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ca(a){if(zo(a),3==a.G){var e=a.U++,n=ws(a.F);Gr(n,"SID",a.I),Gr(n,"RID",e),Gr(n,"TYPE","terminate"),Wo(a,n),(e=new si(a,a.j,e,void 0)).K=2,e.v=Ki(ws(n)),n=!1,ft.navigator&&ft.navigator.sendBeacon&&(n=ft.navigator.sendBeacon(e.v.toString(),"")),!n&&ft.Image&&((new Image).src=e.v,n=!0),n||(e.g=pl(e.l,null),e.g.da(e.v)),e.F=Date.now(),ta(e)}bc(a)}function Cs(a){a.g&&(dl(a),a.g.cancel(),a.g=null)}function zo(a){Cs(a),a.u&&(ft.clearTimeout(a.u),a.u=null),hl(a),a.h.cancel(),a.m&&("number"==typeof a.m&&ft.clearTimeout(a.m),a.m=null)}function Ma(a){Ho(a.h)||a.m||(a.m=!0,ts(a.Ja,a),a.C=0)}function Ra(a,e){var n;n=e?e.m:a.U++;const u=ws(a.F);Gr(u,"SID",a.I),Gr(u,"RID",n),Gr(u,"AID",a.T),Wo(a,u),a.o&&a.s&&_i(u,a.o,a.s),n=new si(a,a.j,n,a.C+1),null===a.o&&(n.H=a.s),e&&(a.i=e.D.concat(a.i)),e=Ka(a,n,1e3),n.setTimeout(Math.round(.5*a.ta)+Math.round(.5*a.ta*Math.random())),Aa(a.h,n),bs(n,u,e)}function Wo(a,e){a.ia&&Lt(a.ia,function(n,u){Gr(e,u,n)}),a.l&&ol({},function(n,u){Gr(e,u,n)})}function Ka(a,e,n){n=Math.min(a.i.length,n);var u=a.l?ht(a.l.Ra,a.l,a):null;e:{var f=a.i;let _=-1;for(;;){const w=["count="+n];-1==_?0<n?(_=f[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let O=!0;for(let H=0;H<n;H++){let q=f[H].h;const ae=f[H].g;if(q-=_,0>q)_=Math.max(0,f[H].h-100),O=!1;else try{Sl(ae,w,"req"+q+"_")}catch{u&&u(ae)}}if(O){u=w.join("&");break e}}}return a=a.i.splice(0,n),e.D=a,u}function Ol(a){a.g||a.u||(a.Z=1,ts(a.Ia,a),a.A=0)}function xa(a){return!(a.g||a.u||3<=a.A||(a.Z++,a.u=Fs(ht(a.Ia,a),fu(a,a.A)),a.A++,0))}function dl(a){null!=a.B&&(ft.clearTimeout(a.B),a.B=null)}function Pa(a){a.g=new si(a,a.j,"rpc",a.Z),null===a.o&&(a.g.H=a.s),a.g.N=0;var e=ws(a.sa);Gr(e,"RID","rpc"),Gr(e,"SID",a.I),Gr(e,"CI",a.L?"0":"1"),Gr(e,"AID",a.T),Gr(e,"TYPE","xmlhttp"),Wo(a,e),a.o&&a.s&&_i(e,a.o,a.s),a.J&&a.g.setTimeout(a.J);var n=a.g;a=a.ka,n.K=1,n.v=Ki(ws(e)),n.s=null,n.P=!0,Vo(n,a)}function hl(a){null!=a.v&&(ft.clearTimeout(a.v),a.v=null)}function fl(a,e){var n=null;if(a.g==e){hl(a),dl(a),a.g=null;var u=2}else{if(!mi(a.h,e))return;n=e.D,Wa(a.h,e),u=1}if(0!=a.G)if(a.pa=e.Y,e.i)if(1==u){n=e.s?e.s.length:0,e=Date.now()-e.F;var f=a.C;En(u=zs(),new Fi(u,n)),Ma(a)}else Ol(a);else if(3==(f=e.o)||0==f&&0<a.pa||!(1==u&&function Bu(a,e){return!(Is(a.h)>=a.h.j-(a.m?1:0)||(a.m?(a.i=e.D.concat(a.i),0):1==a.G||2==a.G||a.C>=(a.Za?0:a.$a)||(a.m=Fs(ht(a.Ja,a,e),fu(a,a.C)),a.C++,0)))}(a,e)||2==u&&xa(a)))switch(n&&0<n.length&&(e=a.h,e.i=e.i.concat(n)),f){case 1:da(a,5);break;case 4:da(a,10);break;case 3:da(a,6);break;default:da(a,2)}}function fu(a,e){let n=a.Xa+Math.floor(Math.random()*a.bb);return a.l||(n*=2),n*e}function da(a,e){if(a.j.info("Error code "+e),2==e){var n=null;a.l&&(n=null);var u=ht(a.kb,a);n||(n=new _o("//www.google.com/images/cleardot.gif"),ft.location&&"http"==ft.location.protocol||Zs(n,"https"),Ki(n)),function Ln(a,e){const n=new Mr;if(ft.Image){const u=new Image;u.onload=Bt(bo,n,u,"TestLoadImage: loaded",!0,e),u.onerror=Bt(bo,n,u,"TestLoadImage: error",!1,e),u.onabort=Bt(bo,n,u,"TestLoadImage: abort",!1,e),u.ontimeout=Bt(bo,n,u,"TestLoadImage: timeout",!1,e),ft.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=a}else e(!1)}(n.toString(),u)}else Ur(2);a.G=0,a.l&&a.l.va(e),bc(a),zo(a)}function bc(a){if(a.G=0,a.la=[],a.l){const e=vo(a.h);(0!=e.length||0!=a.i.length)&&(Nn(a.la,e),Nn(a.la,a.i),a.h.i.length=0,Tt(a.i),a.i.length=0),a.l.ua()}}function pu(a,e,n){var u=n instanceof _o?ws(n):new _o(n,void 0);if(""!=u.g)e&&(u.g=e+"."+u.g),jo(u,u.m);else{var f=ft.location;u=f.protocol,e=e?e+"."+f.hostname:f.hostname,f=+f.port;var _=new _o(null,void 0);u&&Zs(_,u),e&&(_.g=e),f&&jo(_,f),n&&(_.l=n),u=_}return e=a.za,(n=a.D)&&e&&Gr(u,n,e),Gr(u,"VER",a.ma),Wo(a,u),u}function pl(a,e,n){if(e&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new R(n&&a.Da&&!a.ra?new $o({jb:!0}):a.ra)).Ka(a.H),e}function Vu(){}function Ui(){if(On&&!(10<=Number(ni)))throw Error("Environmental error: no available transport.")}function yi(a,e){Ht.call(this),this.g=new ua(e),this.l=a,this.h=e&&e.messageUrlParams||null,a=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(a?a["X-WebChannel-Content-Type"]=e.messageContentType:a={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(a?a["X-WebChannel-Client-Profile"]=e.ya:a={"X-WebChannel-Client-Profile":e.ya}),this.g.S=a,(a=e&&e.Yb)&&!jn(a)&&(this.g.o=a),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jn(e)&&(this.g.D=e,null!==(a=this.h)&&e in a&&e in(a=this.h)&&delete a[e]),this.j=new Bi(this)}function ui(a){Vn.call(this);var e=a.__sm__;if(e){e:{for(const n in e){a=n;break e}a=void 0}(this.i=a)&&(a=this.i,e=null!==e&&a in e?e[a]:void 0),this.data=e}else this.data=a}function ql(){Ar.call(this),this.status=1}function Bi(a){this.g=a}(Te=R.prototype).Ka=function(a){this.L=a},Te.da=function(a,e,n,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);e=e?e.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$n.g(),this.C=function Dt(a){return a.h||(a.h=a.i())}(this.u?this.u:$n),this.g.onreadystatechange=ht(this.Ha,this);try{this.F=!0,this.g.open(e,String(a),!0),this.F=!1}catch(_){return void jr(this,_)}if(a=n||"",n=new Map(this.headers),u)if(Object.getPrototypeOf(u)===Object.prototype)for(var f in u)n.set(f,u[f]);else{if("function"!=typeof u.keys||"function"!=typeof u.get)throw Error("Unknown input type for opt_headers: "+String(u));for(const _ of u.keys())n.set(_,u.get(_))}u=Array.from(n.keys()).find(_=>"content-type"==_.toLowerCase()),f=ft.FormData&&a instanceof ft.FormData,!(0<=nn(ct,e))||u||f||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of n)this.g.setRequestHeader(_,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oo(this),0<this.B&&((this.K=function ln(a){return On&&function nr(){return function tr(a){var e=Wn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=a(9)}(function(){let a=0;const e=Lr(String(Kr)).split("."),n=Lr("9").split("."),u=Math.max(e.length,n.length);for(let w=0;0==a&&w<u;w++){var f=e[w]||"",_=n[w]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==f[0].length&&0==_[0].length)break;a=zn(0==f[1].length?0:parseInt(f[1],10),0==_[1].length?0:parseInt(_[1],10))||zn(0==f[2].length,0==_[2].length)||zn(f[2],_[2]),f=f[3],_=_[3]}while(0==a)}return 0<=a})}()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ht(this.qa,this)):this.A=ds(this.qa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(_){jr(this,_)}},Te.qa=function(){typeof We<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,En(this,"timeout"),this.abort(8))},Te.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,En(this,"complete"),En(this,"abort"),so(this))},Te.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),so(this,!0)),R.X.M.call(this)},Te.Ha=function(){this.s||(this.F||this.v||this.l?Ri(this):this.fb())},Te.fb=function(){Ri(this)},Te.aa=function(){try{return 2<Vs(this)?this.g.status:-1}catch{return-1}},Te.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Te.Sa=function(a){if(this.g){var e=this.g.responseText;return a&&0==e.indexOf(a)&&(e=e.substring(a.length)),j(e)}},Te.Ea=function(){return this.m},Te.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Te=ua.prototype).ma=8,Te.G=1,Te.Ja=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const f=new si(this,this.j,a,void 0);let _=this.s;if(this.S&&(_?(_=Et(_),me(_,this.S)):_=this.S),null!==this.o||this.N||(f.H=_,_=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var u=this.i[n];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(e+=u)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ka(this,f,e),Gr(n=ws(this.F),"RID",a),Gr(n,"CVER",22),this.D&&Gr(n,"X-HTTP-Session-Id",this.D),Wo(this,n),_&&(this.N?e="headers="+encodeURIComponent(String(Al(_)))+"&"+e:this.o&&_i(n,this.o,_)),Aa(this.h,f),this.Ya&&Gr(n,"TYPE","init"),this.O?(Gr(n,"$req",e),Gr(n,"SID","null"),f.Z=!0,bs(f,n,null)):bs(f,n,e),this.G=2}}else 3==this.G&&(a?Ra(this,a):0==this.i.length||Ho(this.h)||Ra(this))},Te.Ia=function(){if(this.u=null,Pa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var a=2*this.P;this.j.info("BP detection timer enabled: "+a),this.B=Fs(ht(this.eb,this),a)}},Te.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ur(10),Cs(this),Pa(this))},Te.cb=function(){null!=this.v&&(this.v=null,Cs(this),xa(this),Ur(19))},Te.kb=function(a){a?(this.j.info("Successfully pinged google.com"),Ur(2)):(this.j.info("Failed to ping google.com"),Ur(1))},(Te=Vu.prototype).xa=function(){},Te.wa=function(){},Te.va=function(){},Te.ua=function(){},Te.Ra=function(){},Ui.prototype.g=function(a,e){return new yi(a,e)},At(yi,Ht),yi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var a=this.g,e=this.l,n=this.h||void 0;Ur(0),a.V=e,a.ia=n||{},a.L=a.Y,a.F=pu(a,null,a.V),Ma(a)},yi.prototype.close=function(){ca(this.g)},yi.prototype.u=function(a){var e=this.g;if("string"==typeof a){var n={};n.__data__=a,a=n}else this.v&&((n={}).__data__=Qr(a),a=n);e.i.push(new class{constructor(a,e){this.h=a,this.g=e}}(e.ab++,a)),3==e.G&&Ma(e)},yi.prototype.M=function(){this.g.l=null,delete this.j,ca(this.g),delete this.g,yi.X.M.call(this)},At(ui,Vn),At(ql,Ar),At(Bi,Vu),Bi.prototype.xa=function(){En(this.g,"a")},Bi.prototype.wa=function(a){En(this.g,new ui(a))},Bi.prototype.va=function(a){En(this.g,new ql)},Bi.prototype.ua=function(){En(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,yi.prototype.send=yi.prototype.u,yi.prototype.open=yi.prototype.m,yi.prototype.close=yi.prototype.close,Ge.NO_ERROR=0,Ge.TIMEOUT=8,Ge.HTTP_ERROR=6,Ce.COMPLETE="complete",Jt.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",Ht.prototype.listen=Ht.prototype.N,R.prototype.listenOnce=R.prototype.O,R.prototype.getLastError=R.prototype.Oa,R.prototype.getLastErrorCode=R.prototype.Ea,R.prototype.getStatus=R.prototype.aa,R.prototype.getResponseJson=R.prototype.Sa,R.prototype.getResponseText=R.prototype.fa,R.prototype.send=R.prototype.da,R.prototype.setWithCredentials=R.prototype.Ka;var Gu=Se.createWebChannelTransport=function(){return new Ui},Ec=Se.getStatEventTarget=function(){return zs()},Nl=Se.ErrorCode=Ge,Yl=Se.EventType=Ce,gl=Se.Event=Ti,ha=Se.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},P=Se.FetchXmlHttpFactory=$o,K=Se.WebChannel=Jt,B=Se.XhrIo=R;const ne="@firebase/firestore";class ye{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ye.UNAUTHENTICATED=new ye(null),ye.GOOGLE_CREDENTIALS=new ye("google-credentials-uid"),ye.FIRST_PARTY=new ye("first-party-uid"),ye.MOCK_USER=new ye("mock-user");let Ye="9.18.0";const Nt=new ot.Yd("@firebase/firestore");function vn(){return Nt.logLevel}function It(a,...e){if(Nt.logLevel<=ot.in.DEBUG){const n=e.map(ir);Nt.debug(`Firestore (${Ye}): ${a}`,...n)}}function xn(a,...e){if(Nt.logLevel<=ot.in.ERROR){const n=e.map(ir);Nt.error(`Firestore (${Ye}): ${a}`,...n)}}function Qn(a,...e){if(Nt.logLevel<=ot.in.WARN){const n=e.map(ir);Nt.warn(`Firestore (${Ye}): ${a}`,...n)}}function ir(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function $t(a="Unexpected state"){const e=`FIRESTORE (${Ye}) INTERNAL ASSERTION FAILED: `+a;throw xn(e),new Error(e)}function tn(a,e){a||$t()}function qt(a,e){return a}const at={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends ze.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ro{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ml{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ye.UNAUTHENTICATED))}shutdown(){}}class _l{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ml{constructor(e){this.t=e,this.currentUser=ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var u=this;let f=this.i;const _=q=>this.i!==f?(f=this.i,n(q)):Promise.resolve();let w=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new ci,e.enqueueRetryable(()=>_(this.currentUser))};const O=()=>{const q=w;e.enqueueRetryable((0,we.Z)(function*(){yield q.promise,yield _(u.currentUser)}))},H=q=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(q=>H(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?H(q):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new ci)}},0),O()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(u=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(tn("string"==typeof u.accessToken),new Ro(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return tn(null===e||"string"==typeof e),new ye(e)}}class ka{constructor(e,n,u,f){this.h=e,this.l=n,this.m=u,this.g=f,this.type="FirstParty",this.user=ye.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(tn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ch{constructor(e,n,u,f){this.h=e,this.l=n,this.m=u,this.g=f}getToken(){return Promise.resolve(new ka(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class os{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const u=_=>{null!=_.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.A;return this.A=_.token,It("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?n(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>u(_))};const f=_=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>f(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?f(_):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tn("string"==typeof n.token),this.A=n.token,new Fa(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eo(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let u=0;u<a;u++)n[u]=Math.floor(256*Math.random());return n}class fa{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let u="";for(;u.length<20;){const f=eo(40);for(let _=0;_<f.length;++_)u.length<20&&f[_]<n&&(u+=e.charAt(f[_]%e.length))}return u}}function mn(a,e){return a<e?-1:a>e?1:0}function Hr(a,e,n){return a.length===e.length&&a.every((u,f)=>n(u,e[f]))}function pa(a){return a+"\0"}class dr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Rt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Rt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Rt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),u=Math.floor(1e6*(e-1e3*n));return new dr(n,u)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mn(this.nanoseconds,e.nanoseconds):mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wn(e)}static min(){return new wn(new dr(0,0))}static max(){return new wn(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qa{constructor(e,n,u){void 0===n?n=0:n>e.length&&$t(),void 0===u?u=e.length-n:u>e.length-n&&$t(),this.segments=e,this.offset=n,this.len=u}get length(){return this.len}isEqual(e){return 0===qa.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qa?e.forEach(u=>{n.push(u)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,u=this.limit();n<u;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const u=Math.min(e.length,n.length);for(let f=0;f<u;f++){const _=e.get(f),w=n.get(f);if(_<w)return-1;if(_>w)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mr extends qa{construct(e,n,u){return new mr(e,n,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const u of e){if(u.indexOf("//")>=0)throw new Rt(at.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);n.push(...u.split("/").filter(f=>f.length>0))}return new mr(n)}static emptyPath(){return new mr([])}}const wc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends qa{construct(e,n,u){return new hr(e,n,u)}static isValidIdentifier(e){return wc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const n=[];let u="",f=0;const _=()=>{if(0===u.length)throw new Rt(at.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(u),u=""};let w=!1;for(;f<e.length;){const O=e[f];if("\\"===O){if(f+1===e.length)throw new Rt(at.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[f+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Rt(at.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);u+=H,f+=2}else"`"===O?(w=!w,f++):"."!==O||w?(u+=O,f++):(_(),f++)}if(_(),w)throw new Rt(at.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(n)}static emptyPath(){return new hr([])}}class on{constructor(e){this.path=e}static fromPath(e){return new on(mr.fromString(e))}static fromName(e){return new on(mr.fromString(e).popFirst(5))}static empty(){return new on(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new on(new mr(e.slice()))}}class Rl{constructor(e,n,u,f){this.indexId=e,this.collectionGroup=n,this.fields=u,this.indexState=f}}function ga(a){return a.fields.find(e=>2===e.kind)}function Ts(a){return a.fields.filter(e=>2!==e.kind)}Rl.UNKNOWN_ID=-1;class oi{constructor(e,n){this.fieldPath=e,this.kind=n}}class $r{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new $r(0,Hi.min())}}function cd(a,e){const n=a.toTimestamp().seconds,u=a.toTimestamp().nanoseconds+1,f=wn.fromTimestamp(1e9===u?new dr(n+1,0):new dr(n,u));return new Hi(f,on.empty(),e)}function xl(a){return new Hi(a.readTime,a.key,-1)}class Hi{constructor(e,n,u){this.readTime=e,this.documentKey=n,this.largestBatchId=u}static min(){return new Hi(wn.min(),on.empty(),-1)}static max(){return new Hi(wn.max(),on.empty(),-1)}}function ma(a,e){let n=a.readTime.compareTo(e.readTime);return 0!==n?n:(n=on.comparator(a.documentKey,e.documentKey),0!==n?n:mn(a.largestBatchId,e.largestBatchId))}const Hu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Eo(a){return _a.apply(this,arguments)}function _a(){return _a=(0,we.Z)(function*(a){if(a.code!==at.FAILED_PRECONDITION||a.message!==Hu)throw a;It("LocalStore","Unexpectedly lost primary lease")}),_a.apply(this,arguments)}class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new lt((u,f)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(u,f)},this.catchCallback=_=>{this.wrapFailure(n,_).next(u,f)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof lt?n:lt.resolve(n)}catch(n){return lt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):lt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):lt.reject(n)}static resolve(e){return new lt((n,u)=>{n(e)})}static reject(e){return new lt((n,u)=>{u(e)})}static waitFor(e){return new lt((n,u)=>{let f=0,_=0,w=!1;e.forEach(O=>{++f,O.next(()=>{++_,w&&_===f&&n()},H=>u(H))}),w=!0,_===f&&n()})}static or(e){let n=lt.resolve(!1);for(const u of e)n=n.next(f=>f?lt.resolve(f):u());return n}static forEach(e,n){const u=[];return e.forEach((f,_)=>{u.push(n.call(this,f,_))}),this.waitFor(u)}static mapArray(e,n){return new lt((u,f)=>{const _=e.length,w=new Array(_);let O=0;for(let H=0;H<_;H++){const q=H;n(e[q]).next(ae=>{w[q]=ae,++O,O===_&&u(w)},ae=>f(ae))}})}static doWhile(e,n){return new lt((u,f)=>{const _=()=>{!0===e()?n().next(()=>{_()},f):u()};_()})}}class Za{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new ci,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new Ql(e,n.error)):this.P.resolve()},this.transaction.onerror=u=>{const f=$u(u.target.error);this.P.reject(new Ql(e,f))}}static open(e,n,u,f){try{return new Za(n,e.transaction(f,u))}catch(_){throw new Ql(n,_)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ai(n)}}class xo{constructor(e,n,u){this.name=e,this.version=n,this.S=u,12.2===xo.D((0,ze.z$)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),yl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ze.hl)())return!1;if(xo.N())return!0;const e=(0,ze.z$)(),n=xo.D(e),u=0<n&&n<10,f=xo.k(e),_=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||u||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(u)}static k(e){const n=e.match(/Android ([\d.]+)/i),u=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(u)}O(e){var n=this;return(0,we.Z)(function*(){return n.db||(It("SimpleDb","Opening database:",n.name),n.db=yield new Promise((u,f)=>{const _=indexedDB.open(n.name,n.version);_.onsuccess=w=>{u(w.target.result)},_.onblocked=()=>{f(new Ql(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const O=w.target.error;f("VersionError"===O.name?new Rt(at.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new Rt(at.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Ql(e,O))},_.onupgradeneeded=w=>{It("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',w.oldVersion),n.S.F(w.target.result,_.transaction,w.oldVersion,n.version).next(()=>{It("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=u=>n.B(u)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,u,f){var _=this;return(0,we.Z)(function*(){const w="readonly"===n;let O=0;for(;;){++O;try{_.db=yield _.O(e);const H=Za.open(_.db,e,w?"readonly":"readwrite",u),q=f(H).next(ae=>(H.V(),ae)).catch(ae=>(H.abort(ae),lt.reject(ae))).toPromise();return q.catch(()=>{}),yield H.v,q}catch(H){const q=H,ae="FirebaseError"!==q.name&&O<3;if(It("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ae),_.close(),!ae)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class La{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return yl(this.q.delete())}}class Ql extends Rt{constructor(e,n){super(at.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qo(a){return"IndexedDbTransactionError"===a.name}class ai{constructor(e){this.store=e}put(e,n){let u;return void 0!==n?(It("SimpleDb","PUT",this.store.name,e,n),u=this.store.put(n,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),u=this.store.put(e)),yl(u)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),yl(this.store.add(e))}get(e){return yl(this.store.get(e)).next(n=>(void 0===n&&(n=null),It("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),yl(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),yl(this.store.count())}W(e,n){const u=this.options(e,n);if(u.index||"function"!=typeof this.store.getAll){const f=this.cursor(u),_=[];return this.H(f,(w,O)=>{_.push(O)}).next(()=>_)}{const f=this.store.getAll(u.range);return new lt((_,w)=>{f.onerror=O=>{w(O.target.error)},f.onsuccess=O=>{_(O.target.result)}})}}J(e,n){const u=this.store.getAll(e,null===n?void 0:n);return new lt((f,_)=>{u.onerror=w=>{_(w.target.error)},u.onsuccess=w=>{f(w.target.result)}})}Y(e,n){It("SimpleDb","DELETE ALL",this.store.name);const u=this.options(e,n);u.Z=!1;const f=this.cursor(u);return this.H(f,(_,w,O)=>O.delete())}X(e,n){let u;n?u=e:(u={},n=e);const f=this.cursor(u);return this.H(f,n)}tt(e){const n=this.cursor({});return new lt((u,f)=>{n.onerror=_=>{const w=$u(_.target.error);f(w)},n.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(O=>{O?w.continue():u()}):u()}})}H(e,n){const u=[];return new lt((f,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const O=w.target.result;if(!O)return void f();const H=new La(O),q=n(O.primaryKey,O.value,H);if(q instanceof lt){const ae=q.catch(Oe=>(H.done(),lt.reject(Oe)));u.push(ae)}H.isDone?f():null===H.G?O.continue():O.continue(H.G)}}).next(()=>lt.waitFor(u))}options(e,n){let u;return void 0!==e&&("string"==typeof e?u=e:n=e),{index:u,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const u=this.store.index(e.index);return e.Z?u.openKeyCursor(e.range,n):u.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function yl(a){return new lt((e,n)=>{a.onsuccess=u=>{e(u.target.result)},a.onerror=u=>{const f=$u(u.target.error);n(f)}})}let dh=!1;function $u(a){const e=xo.D((0,ze.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(n)>=0){const u=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dh||(dh=!0,setTimeout(()=>{throw u},0)),u}}return a}class Ja{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;It("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){n.task=null;try{It("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(u){qo(u)?It("IndexBackiller","Ignoring IndexedDB error during index backfill: ",u):yield Eo(u)}yield n.nt(6e4)}))}}class Qa{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,we.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",u=>n.it(u,e))})()}it(e,n){const u=new Set;let f=n,_=!0;return lt.doWhile(()=>!0===_&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!u.has(w))return It("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,f).next(O=>{f-=O,u.add(w)});_=!1})).next(()=>n-f)}rt(e,n,u){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(f=>this.localStore.localDocuments.getNextDocuments(e,n,f,u).next(_=>{const w=_.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(f,_)).next(O=>(It("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,n,O))).next(()=>w.size)}))}ot(e,n){let u=e;return n.changes.forEach((f,_)=>{const w=xl(_);ma(w,u)>0&&(u=w)}),new Hi(u.readTime,u.documentKey,Math.max(n.batchId,e.largestBatchId))}}let ao=(()=>{class a{constructor(n,u){this.previousValue=n,u&&(u.sequenceNumberHandler=f=>this.ut(f),this.ct=f=>u.writeSequenceNumber(f))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}return a.at=-1,a})();class zu{constructor(e,n,u,f,_,w,O,H){this.databaseId=e,this.appId=n,this.persistenceKey=u,this.host=f,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=O,this.useFetchStreams=H}}class vi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vi&&e.projectId===this.projectId&&e.database===this.database}}function gu(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function wo(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function kl(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function bi(a){return null==a}function lo(a){return 0===a&&1/a==-1/0}function Wu(a){return"number"==typeof a&&Number.isInteger(a)&&!lo(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}class T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class D{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(f){throw f instanceof DOMException?new T("Invalid base64 string: "+f):f}}(e);return new D(n)}static fromUint8Array(e){const n=function(u){let f="";for(let _=0;_<u.length;++_)f+=String.fromCharCode(u[_]);return f}(e);return new D(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let u=0;u<e.length;u++)n[u]=e.charCodeAt(u);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}D.EMPTY_BYTE_STRING=new D("");const x=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $(a){if(tn(!!a),"string"==typeof a){let e=0;const n=x.exec(a);if(tn(!!n),n[1]){let f=n[1];f=(f+"000000000").substr(0,9),e=Number(f)}const u=new Date(a);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:J(a.seconds),nanos:J(a.nanos)}}function J(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function se(a){return"string"==typeof a?D.fromBase64String(a):D.fromUint8Array(a)}function Ue(a){var e,n;return"server_timestamp"===(null===(n=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function St(a){const e=a.mapValue.fields.__previous_value__;return Ue(e)?St(e):e}function cn(a){const e=$(a.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}const an={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sr={nullValue:"NULL_VALUE"};function Ei(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ue(a)?4:Vt(a)?9007199254740991:10:$t()}function Vi(a,e){if(a===e)return!0;const n=Ei(a);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return cn(a).isEqual(cn(e));case 3:return function(u,f){if("string"==typeof u.timestampValue&&"string"==typeof f.timestampValue&&u.timestampValue.length===f.timestampValue.length)return u.timestampValue===f.timestampValue;const _=$(u.timestampValue),w=$(f.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return f=e,se(a.bytesValue).isEqual(se(f.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,f){return J(u.geoPointValue.latitude)===J(f.geoPointValue.latitude)&&J(u.geoPointValue.longitude)===J(f.geoPointValue.longitude)}(a,e);case 2:return function(u,f){if("integerValue"in u&&"integerValue"in f)return J(u.integerValue)===J(f.integerValue);if("doubleValue"in u&&"doubleValue"in f){const _=J(u.doubleValue),w=J(f.doubleValue);return _===w?lo(_)===lo(w):isNaN(_)&&isNaN(w)}return!1}(a,e);case 9:return Hr(a.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:return function(u,f){const _=u.mapValue.fields||{},w=f.mapValue.fields||{};if(gu(_)!==gu(w))return!1;for(const O in _)if(_.hasOwnProperty(O)&&(void 0===w[O]||!Vi(_[O],w[O])))return!1;return!0}(a,e);default:return $t()}var f}function uo(a,e){return void 0!==(a.values||[]).find(n=>Vi(n,e))}function co(a,e){if(a===e)return 0;const n=Ei(a),u=Ei(e);if(n!==u)return mn(n,u);switch(n){case 0:case 9007199254740991:return 0;case 1:return mn(a.booleanValue,e.booleanValue);case 2:return function(f,_){const w=J(f.integerValue||f.doubleValue),O=J(_.integerValue||_.doubleValue);return w<O?-1:w>O?1:w===O?0:isNaN(w)?isNaN(O)?0:-1:1}(a,e);case 3:return to(a.timestampValue,e.timestampValue);case 4:return to(cn(a),cn(e));case 5:return mn(a.stringValue,e.stringValue);case 6:return function(f,_){const w=se(f),O=se(_);return w.compareTo(O)}(a.bytesValue,e.bytesValue);case 7:return function(f,_){const w=f.split("/"),O=_.split("/");for(let H=0;H<w.length&&H<O.length;H++){const q=mn(w[H],O[H]);if(0!==q)return q}return mn(w.length,O.length)}(a.referenceValue,e.referenceValue);case 8:return function(f,_){const w=mn(J(f.latitude),J(_.latitude));return 0!==w?w:mn(J(f.longitude),J(_.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return function(f,_){const w=f.values||[],O=_.values||[];for(let H=0;H<w.length&&H<O.length;++H){const q=co(w[H],O[H]);if(q)return q}return mn(w.length,O.length)}(a.arrayValue,e.arrayValue);case 10:return function(f,_){if(f===an.mapValue&&_===an.mapValue)return 0;if(f===an.mapValue)return 1;if(_===an.mapValue)return-1;const w=f.fields||{},O=Object.keys(w),H=_.fields||{},q=Object.keys(H);O.sort(),q.sort();for(let ae=0;ae<O.length&&ae<q.length;++ae){const Oe=mn(O[ae],q[ae]);if(0!==Oe)return Oe;const Ze=co(w[O[ae]],H[q[ae]]);if(0!==Ze)return Ze}return mn(O.length,q.length)}(a.mapValue,e.mapValue);default:throw $t()}}function to(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return mn(a,e);const n=$(a),u=$(e),f=mn(n.seconds,u.seconds);return 0!==f?f:mn(n.nanos,u.nanos)}function va(a){return Xa(a)}function Xa(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(u){const f=$(u);return`time(${f.seconds},${f.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?se(a.bytesValue).toBase64():"referenceValue"in a?on.fromName(a.referenceValue).toString():"geoPointValue"in a?`geo(${(e=a.geoPointValue).latitude},${e.longitude})`:"arrayValue"in a?function(u){let f="[",_=!0;for(const w of u.values||[])_?_=!1:f+=",",f+=Xa(w);return f+"]"}(a.arrayValue):"mapValue"in a?function(u){const f=Object.keys(u.fields||{}).sort();let _="{",w=!0;for(const O of f)w?w=!1:_+=",",_+=`${O}:${Xa(u.fields[O])}`;return _+"}"}(a.mapValue):$t();var e}function Do(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function U(a){return!!a&&"integerValue"in a}function z(a){return!!a&&"arrayValue"in a}function ee(a){return!!a&&"nullValue"in a}function Ee(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function je(a){return!!a&&"mapValue"in a}function Xe(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return wo(a.mapValue.fields,(n,u)=>e.mapValue.fields[n]=Xe(u)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xe(a.arrayValue.values[n]);return e}return Object.assign({},a)}function Vt(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}function Dn(a){return"nullValue"in a?sr:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Do(vi.empty(),on.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?{mapValue:{}}:$t()}function Pn(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Do(vi.empty(),on.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?{mapValue:{}}:"mapValue"in a?an:$t()}function en(a,e){const n=co(a.value,e.value);return 0!==n?n:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function ar(a,e){const n=co(a.value,e.value);return 0!==n?n:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Mn{constructor(e,n){this.position=e,this.inclusive=n}}function Yo(a,e,n){let u=0;for(let f=0;f<a.position.length;f++){const _=e[f],w=a.position[f];if(u=_.field.isKeyField()?on.comparator(on.fromName(w.referenceValue),n.key):co(w,n.data.field(_.field)),"desc"===_.dir&&(u*=-1),0!==u)break}return u}function fs(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Vi(a.position[n],e.position[n]))return!1;return!0}class eu{}class _r extends eu{constructor(e,n,u){super(),this.field=e,this.op=n,this.value=u}static create(e,n,u){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,u):new ph(e,n,u):"array-contains"===n?new _f(e,u):"in"===n?new wm(e,u):"not-in"===n?new hy(e,u):"array-contains-any"===n?new yf(e,u):new _r(e,n,u)}static createKeyFieldInFilter(e,n,u){return"in"===n?new dy(e,u):new gh(e,u)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(co(n,this.value)):null!==n&&Ei(this.value)===Ei(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Vr extends eu{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new Vr(e,n)}matches(e){return ps(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return null!==e?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ps(a){return"and"===a.op}function Io(a){return"or"===a.op}function Ku(a){return dd(a)&&ps(a)}function dd(a){for(const e of a.filters)if(e instanceof Vr)return!1;return!0}function hh(a){if(a instanceof _r)return a.field.canonicalString()+a.op.toString()+va(a.value);if(Ku(a))return a.filters.map(e=>hh(e)).join(",");{const e=a.filters.map(n=>hh(n)).join(",");return`${a.op}(${e})`}}function hd(a,e){return a instanceof _r?(n=a,(u=e)instanceof _r&&n.op===u.op&&n.field.isEqual(u.field)&&Vi(n.value,u.value)):a instanceof Vr?function(n,u){return u instanceof Vr&&n.op===u.op&&n.filters.length===u.filters.length&&n.filters.reduce((f,_,w)=>f&&hd(_,u.filters[w]),!0)}(a,e):void $t();var n,u}function fh(a,e){const n=a.filters.concat(e);return Vr.create(n,a.op)}function Bp(a){return a instanceof _r?`${(e=a).field.canonicalString()} ${e.op} ${va(e.value)}`:a instanceof Vr?function(e){return e.op.toString()+" {"+e.getFilters().map(Bp).join(" ,")+"}"}(a):"Filter";var e}class ph extends _r{constructor(e,n,u){super(e,n,u),this.key=on.fromName(u.referenceValue)}matches(e){const n=on.comparator(e.key,this.key);return this.matchesComparison(n)}}class dy extends _r{constructor(e,n){super(e,"in",n),this.keys=Vp(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gh extends _r{constructor(e,n){super(e,"not-in",n),this.keys=Vp(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vp(a,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(u=>on.fromName(u.referenceValue))}class _f extends _r{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return z(n)&&uo(n.arrayValue,this.value)}}class wm extends _r{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&uo(this.value.arrayValue,n)}}class hy extends _r{constructor(e,n){super(e,"not-in",n)}matches(e){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!uo(this.value.arrayValue,n)}}class yf extends _r{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!z(n)||!n.arrayValue.values)&&n.arrayValue.values.some(u=>uo(this.value.arrayValue,u))}}class fd{constructor(e,n="asc"){this.field=e,this.dir=n}}function fy(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Ss{constructor(e,n){this.comparator=e,this.root=n||Co.EMPTY}insert(e,n){return new Ss(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Co.BLACK,null,null))}remove(e){return new Ss(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Co.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const u=this.comparator(e,n.key);if(0===u)return n.value;u<0?n=n.left:u>0&&(n=n.right)}return null}indexOf(e){let n=0,u=this.root;for(;!u.isEmpty();){const f=this.comparator(e,u.key);if(0===f)return n+u.left.size;f<0?u=u.left:(n+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,u)=>(e(n,u),!1))}toString(){const e=[];return this.inorderTraversal((n,u)=>(e.push(`${n}:${u}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,n,u,f){this.isReverse=f,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=n?u(e.key,n):1,n&&f&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Co{constructor(e,n,u,f,_){this.key=e,this.value=n,this.color=u??Co.RED,this.left=f??Co.EMPTY,this.right=_??Co.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,u,f,_){return new Co(e??this.key,n??this.value,u??this.color,f??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,u){let f=this;const _=u(e,f.key);return f=_<0?f.copy(null,null,null,f.left.insert(e,n,u),null):0===_?f.copy(null,n,null,null,null):f.copy(null,null,null,null,f.right.insert(e,n,u)),f.fixUp()}removeMin(){if(this.left.isEmpty())return Co.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let u,f=this;if(n(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,n),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===n(e,f.key)){if(f.right.isEmpty())return Co.EMPTY;u=f.right.min(),f=f.copy(u.key,u.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,n))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $t();const e=this.left.check();if(e!==this.right.check())throw $t();return e+(this.isRed()?0:1)}}Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1,Co.EMPTY=new class{constructor(){this.size=0}get key(){throw $t()}get value(){throw $t()}get color(){throw $t()}get left(){throw $t()}get right(){throw $t()}copy(a,e,n,u,f){return this}insert(a,e,n){return new Co(a,e)}remove(a,e){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Si{constructor(e){this.comparator=e,this.data=new Ss(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,u)=>(e(n),!1))}forEachInRange(e,n){const u=this.data.getIteratorFrom(e[0]);for(;u.hasNext();){const f=u.getNext();if(this.comparator(f.key,e[1])>=0)return;n(f.key)}}forEachWhile(e,n){let u;for(u=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mh(this.data.getIterator())}getIteratorFrom(e){return new mh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(u=>{n=n.add(u)}),n}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const n=this.data.getIterator(),u=e.data.getIterator();for(;n.hasNext();){const f=n.getNext().key,_=u.getNext().key;if(0!==this.comparator(f,_))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Si(this.comparator);return n.data=e,n}}class mh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tu(a){return a.hasNext()?a.getNext():void 0}class Zo{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Zo([])}unionWith(e){let n=new Si(hr.comparator);for(const u of this.fields)n=n.add(u);for(const u of e)n=n.add(u);return new Zo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hr(this.fields,e.fields,(n,u)=>n.isEqual(u))}}class As{constructor(e){this.value=e}static empty(){return new As({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let u=0;u<e.length-1;++u)if(n=(n.mapValue.fields||{})[e.get(u)],!je(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xe(n)}setAll(e){let n=hr.emptyPath(),u={},f=[];e.forEach((w,O)=>{if(!n.isImmediateParentOf(O)){const H=this.getFieldsMap(n);this.applyChanges(H,u,f),u={},f=[],n=O.popLast()}w?u[O.lastSegment()]=Xe(w):f.push(O.lastSegment())});const _=this.getFieldsMap(n);this.applyChanges(_,u,f)}delete(e){const n=this.field(e.popLast());je(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let u=0;u<e.length;++u){let f=n.mapValue.fields[e.get(u)];je(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},n.mapValue.fields[e.get(u)]=f),n=f}return n.mapValue.fields}applyChanges(e,n,u){wo(n,(f,_)=>e[f]=_);for(const f of u)delete e[f]}clone(){return new As(Xe(this.value))}}function vf(a){const e=[];return wo(a.fields,(n,u)=>{const f=new hr([n]);if(je(u)){const _=vf(u.mapValue).fields;if(0===_.length)e.push(f);else for(const w of _)e.push(f.child(w))}else e.push(f)}),new Zo(e)}class Jr{constructor(e,n,u,f,_,w,O){this.key=e,this.documentType=n,this.version=u,this.readTime=f,this.createTime=_,this.data=w,this.documentState=O}static newInvalidDocument(e){return new Jr(e,0,wn.min(),wn.min(),wn.min(),As.empty(),0)}static newFoundDocument(e,n,u,f){return new Jr(e,1,n,wn.min(),u,f,0)}static newNoDocument(e,n){return new Jr(e,2,n,wn.min(),wn.min(),As.empty(),0)}static newUnknownDocument(e,n){return new Jr(e,3,n,wn.min(),wn.min(),As.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(wn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class py{constructor(e,n=null,u=[],f=[],_=null,w=null,O=null){this.path=e,this.collectionGroup=n,this.orderBy=u,this.filters=f,this.limit=_,this.startAt=w,this.endAt=O,this._t=null}}function Gp(a,e=null,n=[],u=[],f=null,_=null,w=null){return new py(a,e,n,u,f,_,w)}function mu(a){const e=qt(a);if(null===e._t){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(u=>hh(u)).join(","),n+="|ob:",n+=e.orderBy.map(u=>{return(f=u).field.canonicalString()+f.dir;var f}).join(","),bi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(u=>va(u)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(u=>va(u)).join(",")),e._t=n}return e._t}function pd(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!fy(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!hd(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!fs(a.startAt,e.startAt)&&fs(a.endAt,e.endAt)}function qu(a){return on.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function bf(a,e){return a.filters.filter(n=>n instanceof _r&&n.field.isEqual(e))}function jp(a,e,n){let u=sr,f=!0;for(const _ of bf(a,e)){let w=sr,O=!0;switch(_.op){case"<":case"<=":w=Dn(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,O=!1;break;case"!=":case"not-in":w=sr}en({value:u,inclusive:f},{value:w,inclusive:O})<0&&(u=w,f=O)}if(null!==n)for(let _=0;_<a.orderBy.length;++_)if(a.orderBy[_].field.isEqual(e)){const w=n.position[_];en({value:u,inclusive:f},{value:w,inclusive:n.inclusive})<0&&(u=w,f=n.inclusive);break}return{value:u,inclusive:f}}function Dm(a,e,n){let u=an,f=!0;for(const _ of bf(a,e)){let w=an,O=!0;switch(_.op){case">=":case">":w=Pn(_.value),O=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,O=!1;break;case"!=":case"not-in":w=an}ar({value:u,inclusive:f},{value:w,inclusive:O})>0&&(u=w,f=O)}if(null!==n)for(let _=0;_<a.orderBy.length;++_)if(a.orderBy[_].field.isEqual(e)){const w=n.position[_];ar({value:u,inclusive:f},{value:w,inclusive:n.inclusive})>0&&(u=w,f=n.inclusive);break}return{value:u,inclusive:f}}class vl{constructor(e,n=null,u=[],f=[],_=null,w="F",O=null,H=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=u,this.filters=f,this.limit=_,this.limitType=w,this.startAt=O,this.endAt=H,this.wt=null,this.gt=null}}function Im(a,e,n,u,f,_,w,O){return new vl(a,e,n,u,f,_,w,O)}function Ic(a){return new vl(a)}function Jo(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function _h(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function gd(a){for(const e of a.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function yh(a){return null!==a.collectionGroup}function Os(a){const e=qt(a);if(null===e.wt){e.wt=[];const n=gd(e),u=_h(e);if(null!==n&&null===u)n.isKeyField()||e.wt.push(new fd(n)),e.wt.push(new fd(hr.keyField(),"asc"));else{let f=!1;for(const _ of e.explicitOrderBy)e.wt.push(_),_.field.isKeyField()&&(f=!0);if(!f){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new fd(hr.keyField(),_))}}}return e.wt}function ho(a){const e=qt(a);if(!e.gt)if("F"===e.limitType)e.gt=Gp(e.path,e.collectionGroup,Os(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const _ of Os(e))n.push(new fd(_.field,"desc"===_.dir?"asc":"desc"));const u=e.endAt?new Mn(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new Mn(e.startAt.position,e.startAt.inclusive):null;e.gt=Gp(e.path,e.collectionGroup,n,e.filters,e.limit,u,f)}return e.gt}function vh(a,e){e.getFirstInequalityField(),gd(a);const n=a.filters.concat([e]);return new vl(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function bh(a,e,n){return new vl(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function Ef(a,e){return pd(ho(a),ho(e))&&a.limitType===e.limitType}function A(a){return`${mu(ho(a))}|lt:${a.limitType}`}function v(a){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(u=>Bp(u)).join(", ")}]`),bi(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(u=>{return`${(f=u).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(u=>va(u)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(u=>va(u)).join(",")),`Target(${n})`}(ho(a))}; limitType=${a.limitType})`}function E(a,e){return e.isFoundDocument()&&function(n,u){const f=u.key.path;return null!==n.collectionGroup?u.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(f):on.isDocumentKey(n.path)?n.path.isEqual(f):n.path.isImmediateParentOf(f)}(a,e)&&function(n,u){for(const f of Os(n))if(!f.field.isKeyField()&&null===u.data.field(f.field))return!1;return!0}(a,e)&&function(n,u){for(const f of n.filters)if(!f.matches(u))return!1;return!0}(a,e)&&(u=e,!((n=a).startAt&&!function(f,_,w){const O=Yo(f,_,w);return f.inclusive?O<=0:O<0}(n.startAt,Os(n),u)||n.endAt&&!function(f,_,w){const O=Yo(f,_,w);return f.inclusive?O>=0:O>0}(n.endAt,Os(n),u)));var n,u}function N(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Q(a){return(e,n)=>{let u=!1;for(const f of Os(a)){const _=ce(f,e,n);if(0!==_)return _;u=u||f.field.isKeyField()}return 0}}function ce(a,e,n){const u=a.field.isKeyField()?on.comparator(e.key,n.key):function(f,_,w){const O=_.data.field(f),H=w.data.field(f);return null!==O&&null!==H?co(O,H):$t()}(a.field,e,n);switch(a.dir){case"asc":return u;case"desc":return-1*u;default:return $t()}}function rt(a,e){if(a.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lo(e)?"-0":e}}function Ut(a){return{integerValue:""+a}}function bn(a,e){return Wu(e)?Ut(e):rt(a,e)}class Rn{constructor(){this._=void 0}}function fr(a,e,n){return a instanceof Po?function(u,f){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return f&&(_.fields.__previous_value__=f),{mapValue:_}}(n,e):a instanceof el?Eh(a,e):a instanceof Ea?md(a,e):function(u,f){const _=ba(u,f),w=Fl(_)+Fl(u.It);return U(_)&&U(u.It)?Ut(w):rt(u.Tt,w)}(a,e)}function xi(a,e,n){return a instanceof el?Eh(a,e):a instanceof Ea?md(a,e):n}function ba(a,e){return a instanceof Ua?U(n=e)||(u=n)&&"doubleValue"in u?e:{integerValue:0}:null;var u,n}class Po extends Rn{}class el extends Rn{constructor(e){super(),this.elements=e}}function Eh(a,e){const n=nu(e);for(const u of a.elements)n.some(f=>Vi(f,u))||n.push(u);return{arrayValue:{values:n}}}class Ea extends Rn{constructor(e){super(),this.elements=e}}function md(a,e){let n=nu(e);for(const u of a.elements)n=n.filter(f=>!Vi(f,u));return{arrayValue:{values:n}}}class Ua extends Rn{constructor(e,n){super(),this.Tt=e,this.It=n}}function Fl(a){return J(a.integerValue||a.doubleValue)}function nu(a){return z(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class ru{constructor(e,n){this.field=e,this.transform=n}}class _d{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class wf{}function gy(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new Dh(a.key,wi.none()):new If(a.key,a.data,wi.none());{const n=a.data,u=As.empty();let f=new Si(hr.comparator);for(let _ of e.fields)if(!f.has(_)){let w=n.field(_);null===w&&_.length>1&&(_=_.popLast(),w=n.field(_)),null===w?u.delete(_):u.set(_,w),f=f.add(_)}return new Zu(a.key,u,new Zo(f.toArray()),wi.none())}}function my(a,e,n){a instanceof If?function(u,f,_){const w=u.value.clone(),O=yd(u.fieldTransforms,f,_.transformResults);w.setAll(O),f.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(a,e,n):a instanceof Zu?function(u,f,_){if(!Yu(u.precondition,f))return void f.convertToUnknownDocument(_.version);const w=yd(u.fieldTransforms,f,_.transformResults),O=f.data;O.setAll(yy(u)),O.setAll(w),f.convertToFoundDocument(_.version,O).setHasCommittedMutations()}(a,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Df(a,e,n,u){return a instanceof If?function(f,_,w,O){if(!Yu(f.precondition,_))return w;const H=f.value.clone(),q=vy(f.fieldTransforms,O,_);return H.setAll(q),_.convertToFoundDocument(_.version,H).setHasLocalMutations(),null}(a,e,n,u):a instanceof Zu?function(f,_,w,O){if(!Yu(f.precondition,_))return w;const H=vy(f.fieldTransforms,O,_),q=_.data;return q.setAll(yy(f)),q.setAll(H),_.convertToFoundDocument(_.version,q).setHasLocalMutations(),null===w?null:w.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(ae=>ae.field))}(a,e,n,u):(w=n,Yu(a.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):w);var _,w}function _y(a,e){let n=null;for(const u of a.fieldTransforms){const f=e.data.field(u.field),_=ba(u.transform,f||null);null!=_&&(null===n&&(n=As.empty()),n.set(u.field,_))}return n||null}function y0(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(n=a.fieldTransforms)&&void 0===u||n&&u&&Hr(n,u,(f,_)=>function wh(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(n=a.transform)instanceof el&&u instanceof el||n instanceof Ea&&u instanceof Ea?Hr(n.elements,u.elements,Vi):n instanceof Ua&&u instanceof Ua?Vi(n.It,u.It):n instanceof Po&&u instanceof Po);var n,u}(f,_))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var n,u}class If extends wf{constructor(e,n,u,f=[]){super(),this.key=e,this.value=n,this.precondition=u,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class Zu extends wf{constructor(e,n,u,f,_=[]){super(),this.key=e,this.data=n,this.fieldMask=u,this.precondition=f,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function yy(a){const e=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const u=a.data.field(n);e.set(n,u)}}),e}function yd(a,e,n){const u=new Map;tn(a.length===n.length);for(let f=0;f<n.length;f++){const _=a[f],w=_.transform,O=e.data.field(_.field);u.set(_.field,xi(w,O,n[f]))}return u}function vy(a,e,n){const u=new Map;for(const f of a){const _=f.transform,w=n.data.field(f.field);u.set(f.field,fr(_,w,e))}return u}class Dh extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class by extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aw{constructor(e){this.count=e}}var Gs,di;function Hp(a){switch(a){default:return $t();case at.CANCELLED:case at.UNKNOWN:case at.DEADLINE_EXCEEDED:case at.RESOURCE_EXHAUSTED:case at.INTERNAL:case at.UNAVAILABLE:case at.UNAUTHENTICATED:return!1;case at.INVALID_ARGUMENT:case at.NOT_FOUND:case at.ALREADY_EXISTS:case at.PERMISSION_DENIED:case at.FAILED_PRECONDITION:case at.ABORTED:case at.OUT_OF_RANGE:case at.UNIMPLEMENTED:case at.DATA_LOSS:return!0}}function Cm(a){if(void 0===a)return xn("GRPC error has no .code"),at.UNKNOWN;switch(a){case Gs.OK:return at.OK;case Gs.CANCELLED:return at.CANCELLED;case Gs.UNKNOWN:return at.UNKNOWN;case Gs.DEADLINE_EXCEEDED:return at.DEADLINE_EXCEEDED;case Gs.RESOURCE_EXHAUSTED:return at.RESOURCE_EXHAUSTED;case Gs.INTERNAL:return at.INTERNAL;case Gs.UNAVAILABLE:return at.UNAVAILABLE;case Gs.UNAUTHENTICATED:return at.UNAUTHENTICATED;case Gs.INVALID_ARGUMENT:return at.INVALID_ARGUMENT;case Gs.NOT_FOUND:return at.NOT_FOUND;case Gs.ALREADY_EXISTS:return at.ALREADY_EXISTS;case Gs.PERMISSION_DENIED:return at.PERMISSION_DENIED;case Gs.FAILED_PRECONDITION:return at.FAILED_PRECONDITION;case Gs.ABORTED:return at.ABORTED;case Gs.OUT_OF_RANGE:return at.OUT_OF_RANGE;case Gs.UNIMPLEMENTED:return at.UNIMPLEMENTED;case Gs.DATA_LOSS:return at.DATA_LOSS;default:return $t()}}(di=Gs||(Gs={}))[di.OK=0]="OK",di[di.CANCELLED=1]="CANCELLED",di[di.UNKNOWN=2]="UNKNOWN",di[di.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",di[di.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",di[di.NOT_FOUND=5]="NOT_FOUND",di[di.ALREADY_EXISTS=6]="ALREADY_EXISTS",di[di.PERMISSION_DENIED=7]="PERMISSION_DENIED",di[di.UNAUTHENTICATED=16]="UNAUTHENTICATED",di[di.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",di[di.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",di[di.ABORTED=10]="ABORTED",di[di.OUT_OF_RANGE=11]="OUT_OF_RANGE",di[di.UNIMPLEMENTED=12]="UNIMPLEMENTED",di[di.INTERNAL=13]="INTERNAL",di[di.UNAVAILABLE=14]="UNAVAILABLE",di[di.DATA_LOSS=15]="DATA_LOSS";class _u{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),u=this.inner[n];if(void 0!==u)for(const[f,_]of u)if(this.equalsFn(f,e))return _}has(e){return void 0!==this.get(e)}set(e,n){const u=this.mapKeyFn(e),f=this.inner[u];if(void 0===f)return this.inner[u]=[[e,n]],void this.innerSize++;for(let _=0;_<f.length;_++)if(this.equalsFn(f[_][0],e))return void(f[_]=[e,n]);f.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),u=this.inner[n];if(void 0===u)return!1;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return 1===u.length?delete this.inner[n]:u.splice(f,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,u)=>{for(const[f,_]of u)e(f,_)})}isEmpty(){return kl(this.inner)}size(){return this.innerSize}}const $p=new Ss(on.comparator);function wa(){return $p}const Cc=new Ss(on.comparator);function Tc(...a){let e=Cc;for(const n of a)e=e.insert(n.key,n);return e}function Ih(a){let e=Cc;return a.forEach((n,u)=>e=e.insert(n,u.overlayedDocument)),e}function iu(){return bl()}function Cf(){return bl()}function bl(){return new _u(a=>a.toString(),(a,e)=>a.isEqual(e))}const zp=new Ss(on.comparator),v0=new Si(on.comparator);function yr(...a){let e=v0;for(const n of a)e=e.add(n);return e}const b0=new Si(mn);function Sc(){return b0}class Tf{constructor(e,n,u,f,_){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=u,this.documentUpdates=f,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,n,u){const f=new Map;return f.set(e,Ch.createSynthesizedTargetChangeForCurrentChange(e,n,u)),new Tf(wn.min(),f,Sc(),wa(),yr())}}class Ch{constructor(e,n,u,f,_){this.resumeToken=e,this.current=n,this.addedDocuments=u,this.modifiedDocuments=f,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,n,u){return new Ch(u,n,yr(),yr(),yr())}}class Sf{constructor(e,n,u,f){this.Et=e,this.removedTargetIds=n,this.key=u,this.At=f}}class Af{constructor(e,n){this.targetId=e,this.Rt=n}}class Wp{constructor(e,n,u=D.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=n,this.resumeToken=u,this.cause=f}}class Ac{constructor(){this.Pt=0,this.vt=w0(),this.bt=D.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=yr(),n=yr(),u=yr();return this.vt.forEach((f,_)=>{switch(_){case 0:e=e.add(f);break;case 2:n=n.add(f);break;case 1:u=u.add(f);break;default:$t()}}),new Ch(this.bt,this.Vt,e,n,u)}kt(){this.St=!1,this.vt=w0()}$t(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class E0{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=wa(),this.Kt=Tm(),this.Gt=new Si(mn)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const u=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&u.xt(e.resumeToken);break;case 1:u.Ft(),u.Dt||u.kt(),u.xt(e.resumeToken);break;case 2:u.Ft(),u.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(u.Bt(),u.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),u.xt(e.resumeToken));break;default:$t()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((u,f)=>{this.Jt(f)&&n(f)})}Zt(e){const n=e.targetId,u=e.Rt.count,f=this.Xt(n);if(f){const _=f.target;if(qu(_))if(0===u){const w=new on(_.path);this.zt(n,w,Jr.newNoDocument(w,wn.min()))}else tn(1===u);else this.te(n)!==u&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((_,w)=>{const O=this.Xt(w);if(O){if(_.current&&qu(O.target)){const H=new on(O.target.path);null!==this.Ut.get(H)||this.ne(w,H)||this.zt(w,H,Jr.newNoDocument(H,e))}_.Ct&&(n.set(w,_.Nt()),_.kt())}});let u=yr();this.Kt.forEach((_,w)=>{let O=!0;w.forEachWhile(H=>{const q=this.Xt(H);return!q||2===q.purpose||(O=!1,!1)}),O&&(u=u.add(_))}),this.Ut.forEach((_,w)=>w.setReadTime(e));const f=new Tf(e,n,this.Gt,this.Ut,u);return this.Ut=wa(),this.Kt=Tm(),this.Gt=new Si(mn),f}jt(e,n){if(!this.Jt(e))return;const u=this.ne(e,n.key)?2:0;this.Ht(e).$t(n.key,u),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,u){if(!this.Jt(e))return;const f=this.Ht(e);this.ne(e,n)?f.$t(n,1):f.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),u&&(this.Ut=this.Ut.insert(n,u))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let n=this.qt.get(e);return n||(n=new Ac,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new Si(mn),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=null!==this.Xt(e);return n||It("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Ac),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Tm(){return new Ss(on.comparator)}function w0(){return new Ss(on.comparator)}const Ey={asc:"ASCENDING",desc:"DESCENDING"},Of={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sm={and:"AND",or:"OR"};class Am{constructor(e,n){this.databaseId=e,this.yt=n}}function Ju(a,e){return a.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kp(a,e){return a.yt?e.toBase64():e.toUint8Array()}function qp(a,e){return Ju(a,e.toTimestamp())}function Ns(a){return tn(!!a),wn.fromTimestamp(function(e){const n=$(e);return new dr(n.seconds,n.nanos)}(a))}function Om(a,e){return(n=a,new mr(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Yp(a){const e=mr.fromString(a);return tn(Iy(e)),e}function Nf(a,e){return Om(a.databaseId,e.path)}function su(a,e){const n=Yp(e);if(n.get(1)!==a.databaseId.projectId)throw new Rt(at.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Rt(at.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new on(yu(n))}function Zp(a,e){return Om(a.databaseId,e)}function Nm(a){const e=Yp(a);return 4===e.length?mr.emptyPath():yu(e)}function Th(a){return new mr(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function yu(a){return tn(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function vd(a,e,n){return{name:Nf(a,e),fields:n.value.mapValue.fields}}function Mm(a,e,n){const u=su(a,e.name),f=Ns(e.updateTime),_=e.createTime?Ns(e.createTime):wn.min(),w=new As({mapValue:{fields:e.fields}}),O=Jr.newFoundDocument(u,f,_,w);return n&&O.setHasCommittedMutations(),n?O.setHasCommittedMutations():O}function Mf(a,e){let n;if(e instanceof If)n={update:vd(a,e.key,e.value)};else if(e instanceof Dh)n={delete:Nf(a,e.key)};else if(e instanceof Zu)n={update:vd(a,e.key,e.data),updateMask:aE(e.fieldMask)};else{if(!(e instanceof by))return $t();n={verify:Nf(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(u=>function(f,_){const w=_.transform;if(w instanceof Po)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof el)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Ea)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Ua)return{fieldPath:_.field.canonicalString(),increment:w.It};throw $t()}(0,u))),e.precondition.isNone||(n.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:qp(a,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:$t()),n;var f}function wy(a,e){const n=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?wi.updateTime(Ns(f.updateTime)):void 0!==f.exists?wi.exists(f.exists):wi.none():wi.none(),u=e.updateTransforms?e.updateTransforms.map(f=>function(_,w){let O=null;"setToServerValue"in w?(tn("REQUEST_TIME"===w.setToServerValue),O=new Po):"appendMissingElements"in w?O=new el(w.appendMissingElements.values||[]):"removeAllFromArray"in w?O=new Ea(w.removeAllFromArray.values||[]):"increment"in w?O=new Ua(_,w.increment):$t();const H=hr.fromServerFormat(w.fieldPath);return new ru(H,O)}(a,f)):[];var f;if(e.update){const f=su(a,e.update.name),_=new As({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Zo((e.updateMask.fieldPaths||[]).map(q=>hr.fromServerFormat(q)));return new Zu(f,_,w,n,u)}return new If(f,_,n,u)}if(e.delete){const f=su(a,e.delete);return new Dh(f,n)}if(e.verify){const f=su(a,e.verify);return new by(f,n)}return $t()}function Rm(a,e){return{documents:[Zp(a,e.path)]}}function xm(a,e){const n={structuredQuery:{}},u=e.path;null!==e.collectionGroup?(n.parent=Zp(a,u),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Zp(a,u.popLast()),n.structuredQuery.from=[{collectionId:u.lastSegment()}]);const f=function(H){if(0!==H.length)return km(Vr.create(H,"and"))}(e.filters);f&&(n.structuredQuery.where=f);const _=function(H){if(0!==H.length)return H.map(q=>{return{field:Nc((ae=q).field),direction:Dy(ae.dir)};var ae})}(e.orderBy);_&&(n.structuredQuery.orderBy=_);const w=(q=e.limit,a.yt||bi(q)?q:{value:q});var q,O,H;return null!==w&&(n.structuredQuery.limit=w),e.startAt&&(n.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(n.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),n}function Pm(a){let e=Nm(a.parent);const n=a.structuredQuery,u=n.from?n.from.length:0;let f=null;if(u>0){tn(1===u);const ae=n.from[0];ae.allDescendants?f=ae.collectionId:e=e.child(ae.collectionId)}let _=[];n.where&&(_=function(ae){const Oe=C0(ae);return Oe instanceof Vr&&Ku(Oe)?Oe.getFilters():[Oe]}(n.where));let w=[];n.orderBy&&(w=n.orderBy.map(ae=>{return new fd(Mc((Oe=ae).field),function(Ze){switch(Ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Oe.direction));var Oe}));let O=null;n.limit&&(O=function(ae){let Oe;return Oe="object"==typeof ae?ae.value:ae,bi(Oe)?null:Oe}(n.limit));let H=null;var ae;n.startAt&&(H=new Mn((ae=n.startAt).values||[],!!ae.before));let q=null;return n.endAt&&(q=function(ae){return new Mn(ae.values||[],!ae.before)}(n.endAt)),Im(e,f,w,_,O,"F",H,q)}function C0(a){return void 0!==a.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Mc(e.unaryFilter.field);return _r.create(n,"==",{doubleValue:NaN});case"IS_NULL":const u=Mc(e.unaryFilter.field);return _r.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Mc(e.unaryFilter.field);return _r.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=Mc(e.unaryFilter.field);return _r.create(_,"!=",{nullValue:"NULL_VALUE"});default:return $t()}}(a):void 0!==a.fieldFilter?_r.create(Mc((e=a).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==a.compositeFilter?function(e){return Vr.create(e.compositeFilter.filters.map(n=>C0(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return $t()}}(e.compositeFilter.op))}(a):$t();var e}function Dy(a){return Ey[a]}function Oc(a){return Of[a]}function Jp(a){return Sm[a]}function Nc(a){return{fieldPath:a.canonicalString()}}function Mc(a){return hr.fromServerFormat(a.fieldPath)}function km(a){return a instanceof _r?function(e){if("=="===e.op){if(Ee(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NAN"}};if(ee(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ee(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NOT_NAN"}};if(ee(e.value))return{unaryFilter:{field:Nc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(e.field),op:Oc(e.op),value:e.value}}}(a):a instanceof Vr?function(e){const n=e.getFilters().map(u=>km(u));return 1===n.length?n[0]:{compositeFilter:{op:Jp(e.op),filters:n}}}(a):$t()}function aE(a){const e=[];return a.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Iy(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function tl(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Rf(e)),e=Fm(a.get(n),e);return Rf(e)}function Fm(a,e){let n=e;const u=a.length;for(let f=0;f<u;f++){const _=a.charAt(f);switch(_){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=_}}return n}function Rf(a){return a+"\x01\x01"}function vu(a){const e=a.length;if(tn(e>=2),2===e)return tn("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),mr.emptyPath();const n=e-2,u=[];let f="";for(let _=0;_<e;){const w=a.indexOf("\x01",_);switch((w<0||w>n)&&$t(),a.charAt(w+1)){case"\x01":const O=a.substring(_,w);let H;0===f.length?H=O:(f+=O,H=f,f=""),u.push(H);break;case"\x10":f+=a.substring(_,w),f+="\0";break;case"\x11":f+=a.substring(_,w+1);break;default:$t()}_=w+2}return new mr(u)}const T0=["userId","batchId"];function xf(a,e){return[a,tl(e)]}function Lm(a,e,n){return[a,tl(e),n]}const S0={},A0=["prefixPath","collectionGroup","readTime","documentId"],Cy=["prefixPath","collectionGroup","documentId"],Ty=["collectionGroup","readTime","prefixPath","documentId"],Qp=["canonicalId","targetId"],O0=["targetId","path"],Xp=["path","targetId"],N0=["collectionId","parent"],fo=["indexId","uid"],M0=["uid","sequenceNumber"],R0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Um=["indexId","uid","orderedDocumentKey"],Bm=["userId","collectionPath","documentId"],lE=["userId","collectionPath","largestBatchId"],uE=["userId","collectionGroup","largestBatchId"],x0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cE=[...x0,"documentOverlays"],eg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],P0=eg,uw=[...P0,"indexConfiguration","indexState","indexEntries"];class Sh extends Jl{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function To(a,e){const n=qt(a);return xo.M(n.re,e)}class tg{constructor(e,n,u,f){this.batchId=e,this.localWriteTime=n,this.baseMutations=u,this.mutations=f}applyToRemoteDocument(e,n){const u=n.mutationResults;for(let f=0;f<this.mutations.length;f++){const _=this.mutations[f];_.key.isEqual(e.key)&&my(_,e,u[f])}}applyToLocalView(e,n){for(const u of this.baseMutations)u.key.isEqual(e.key)&&(n=Df(u,e,n,this.localWriteTime));for(const u of this.mutations)u.key.isEqual(e.key)&&(n=Df(u,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const u=Cf();return this.mutations.forEach(f=>{const _=e.get(f.key),w=_.overlayedDocument;let O=this.applyToLocalView(w,_.mutatedFields);O=n.has(f.key)?null:O;const H=gy(w,O);null!==H&&u.set(f.key,H),w.isValidDocument()||w.convertToNoDocument(wn.min())}),u}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),yr())}isEqual(e){return this.batchId===e.batchId&&Hr(this.mutations,e.mutations,(n,u)=>y0(n,u))&&Hr(this.baseMutations,e.baseMutations,(n,u)=>y0(n,u))}}class Vm{constructor(e,n,u,f){this.batch=e,this.commitVersion=n,this.mutationResults=u,this.docVersions=f}static from(e,n,u){tn(e.mutations.length===u.length);let f=zp;const _=e.mutations;for(let w=0;w<_.length;w++)f=f.insert(_[w].key,u[w].version);return new Vm(e,n,u,f)}}class Gm{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bd{constructor(e,n,u,f,_=wn.min(),w=wn.min(),O=D.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=u,this.sequenceNumber=f,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=O}withSequenceNumber(e){return new bd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new bd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class k0{constructor(e){this.oe=e}}function Sy(a,e){const n=e.key,u={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())u.document={name:Nf(f=a.oe,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:Ju(f,_.version.toTimestamp()),createTime:Ju(f,_.createTime.toTimestamp())};else if(e.isNoDocument())u.noDocument={path:n.path.toArray(),readTime:kf(e.version)};else{if(!e.isUnknownDocument())return $t();u.unknownDocument={path:n.path.toArray(),version:kf(e.version)}}var f,_;return u}function Pf(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function kf(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(a){const e=new dr(a.seconds,a.nanoseconds);return wn.fromTimestamp(e)}function Ah(a,e){const n=(e.baseMutations||[]).map(_=>wy(a.oe,_));for(let _=0;_<e.mutations.length-1;++_)_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(e.mutations[_].updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_);const u=e.mutations.map(_=>wy(a.oe,_)),f=dr.fromMillis(e.localWriteTimeMs);return new tg(e.batchId,f,n,u)}function Oh(a){const e=Rc(a.readTime),n=void 0!==a.lastLimboFreeSnapshotVersion?Rc(a.lastLimboFreeSnapshotVersion):wn.min();let u;var f;return void 0!==a.query.documents?(tn(1===(f=a.query).documents.length),u=ho(Ic(Nm(f.documents[0])))):u=ho(Pm(a.query)),new bd(u,a.targetId,0,a.lastListenSequenceNumber,e,n,D.fromBase64String(a.resumeToken))}function Ay(a,e){const n=kf(e.snapshotVersion),u=kf(e.lastLimboFreeSnapshotVersion);let f;f=qu(e.target)?Rm(a.oe,e.target):xm(a.oe,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mu(e.target),readTime:n,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:u,query:f}}function Hm(a){const e=Pm({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?bh(e,e.limit,"L"):e}function bu(a,e){return new Gm(e.largestBatchId,wy(a.oe,e.overlayMutation))}function Oy(a,e){const n=e.path.lastSegment();return[a,tl(e.path.popLast()),n]}function ng(a,e,n,u){return{indexId:a,uid:e.uid||"",sequenceNumber:n,readTime:kf(u.readTime),documentKey:tl(u.documentKey.path),largestBatchId:u.largestBatchId}}class Ll{getBundleMetadata(e,n){return Eu(e).get(n).next(u=>{if(u)return{id:(f=u).bundleId,createTime:Rc(f.createTime),version:f.version};var f})}saveBundleMetadata(e,n){return Eu(e).put({bundleId:(u=n).id,createTime:kf(Ns(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return Ed(e).get(n).next(u=>{if(u)return{name:(f=u).name,query:Hm(f.bundledQuery),readTime:Rc(f.readTime)};var f})}saveNamedQuery(e,n){return Ed(e).put({name:(u=n).name,readTime:kf(Ns(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Eu(a){return To(a,"bundles")}function Ed(a){return To(a,"namedQueries")}class wd{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){return new wd(e,n.uid||"")}getOverlay(e,n){return gs(e).get(Oy(this.userId,n)).next(u=>u?bu(this.Tt,u):null)}getOverlays(e,n){const u=iu();return lt.forEach(n,f=>this.getOverlay(e,f).next(_=>{null!==_&&u.set(f,_)})).next(()=>u)}saveOverlays(e,n,u){const f=[];return u.forEach((_,w)=>{const O=new Gm(n,w);f.push(this.ce(e,O))}),lt.waitFor(f)}removeOverlaysForBatchId(e,n,u){const f=new Set;n.forEach(w=>f.add(tl(w.getCollectionPath())));const _=[];return f.forEach(w=>{const O=IDBKeyRange.bound([this.userId,w,u],[this.userId,w,u+1],!1,!0);_.push(gs(e).Y("collectionPathOverlayIndex",O))}),lt.waitFor(_)}getOverlaysForCollection(e,n,u){const f=iu(),_=tl(n),w=IDBKeyRange.bound([this.userId,_,u],[this.userId,_,Number.POSITIVE_INFINITY],!0);return gs(e).W("collectionPathOverlayIndex",w).next(O=>{for(const H of O){const q=bu(this.Tt,H);f.set(q.getKey(),q)}return f})}getOverlaysForCollectionGroup(e,n,u,f){const _=iu();let w;const O=IDBKeyRange.bound([this.userId,n,u],[this.userId,n,Number.POSITIVE_INFINITY],!0);return gs(e).X({index:"collectionGroupOverlayIndex",range:O},(H,q,ae)=>{const Oe=bu(this.Tt,q);_.size()<f||Oe.largestBatchId===w?(_.set(Oe.getKey(),Oe),w=Oe.largestBatchId):ae.done()}).next(()=>_)}ce(e,n){return gs(e).put(function(u,f,_){const[w,O,H]=Oy(f,_.mutation.key);return{userId:f,collectionPath:O,documentId:H,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Mf(u.oe,_.mutation)}}(this.Tt,this.userId,n))}}function gs(a){return To(a,"documentOverlays")}class Qu{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(J(e.integerValue));else if("doubleValue"in e){const u=J(e.doubleValue);isNaN(u)?this.fe(n,13):(this.fe(n,15),lo(u)?n.de(0):n.de(u))}else if("timestampValue"in e){const u=e.timestampValue;this.fe(n,20),"string"==typeof u?n._e(u):(n._e(`${u.seconds||""}`),n.de(u.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(se(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const u=e.geoPointValue;this.fe(n,45),n.de(u.latitude||0),n.de(u.longitude||0)}else"mapValue"in e?Vt(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):$t()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const u=e.fields||{};this.fe(n,55);for(const f of Object.keys(u))this.we(f,n),this.he(u[f],n)}Ie(e,n){const u=e.values||[];this.fe(n,50);for(const f of u)this.he(f,n)}ye(e,n){this.fe(n,37),on.fromName(e).path.forEach(u=>{this.fe(n,60),this.Te(u,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}function Dd(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function Xu(a){const e=64-function(n){let u=0;for(let f=0;f<8;++f){const _=Dd(255&n[f]);if(u+=_,8!==_)break}return u}(a);return Math.ceil(e/8)}Qu.Ee=new Qu;class pe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let u=n.next();for(;!u.done;)this.Re(u.value),u=n.next();this.Pe()}ve(e){const n=e[Symbol.iterator]();let u=n.next();for(;!u.done;)this.be(u.value),u=n.next();this.Ve()}Se(e){for(const n of e){const u=n.charCodeAt(0);if(u<128)this.Re(u);else if(u<2048)this.Re(960|u>>>6),this.Re(128|63&u);else if(n<"\ud800"||"\udbff"<n)this.Re(480|u>>>12),this.Re(128|63&u>>>6),this.Re(128|63&u);else{const f=n.codePointAt(0);this.Re(240|f>>>18),this.Re(128|63&f>>>12),this.Re(128|63&f>>>6),this.Re(128|63&f)}}this.Pe()}De(e){for(const n of e){const u=n.charCodeAt(0);if(u<128)this.be(u);else if(u<2048)this.be(960|u>>>6),this.be(128|63&u);else if(n<"\ud800"||"\udbff"<n)this.be(480|u>>>12),this.be(128|63&u>>>6),this.be(128|63&u);else{const f=n.codePointAt(0);this.be(240|f>>>18),this.be(128|63&f>>>12),this.be(128|63&f>>>6),this.be(128|63&f)}}this.Ve()}Ce(e){const n=this.xe(e),u=Xu(n);this.Ne(1+u),this.buffer[this.position++]=255&u;for(let f=n.length-u;f<n.length;++f)this.buffer[this.position++]=255&n[f]}ke(e){const n=this.xe(e),u=Xu(n);this.Ne(1+u),this.buffer[this.position++]=~(255&u);for(let f=n.length-u;f<n.length;++f)this.buffer[this.position++]=~(255&n[f])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(f){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,f,!1),new Uint8Array(_.buffer)}(e),u=0!=(128&n[0]);n[0]^=u?255:128;for(let f=1;f<n.length;++f)n[f]^=u?255:0;return n}Re(e){const n=255&e;0===n?(this.Me(0),this.Me(255)):255===n?(this.Me(255),this.Me(0)):this.Me(n)}be(e){const n=255&e;0===n?(this.Fe(0),this.Fe(255)):255===n?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let u=2*this.buffer.length;u<n&&(u=n);const f=new Uint8Array(u);f.set(this.buffer),this.buffer=f}}class xc{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class Id{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Nh{constructor(){this.Le=new pe,this.qe=new xc(this.Le),this.Ue=new Id(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Cd{constructor(e,n,u,f){this.indexId=e,this.documentKey=n,this.arrayValue=u,this.directionalValue=f}Ge(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,u=new Uint8Array(n);return u.set(this.directionalValue,0),n!==e?u.set([0],this.directionalValue.length):++u[u.length-1],new Cd(this.indexId,this.documentKey,this.arrayValue,u)}}function Pc(a,e){let n=a.indexId-e.indexId;return 0!==n?n:(n=rg(a.arrayValue,e.arrayValue),0!==n?n:(n=rg(a.directionalValue,e.directionalValue),0!==n?n:on.comparator(a.documentKey,e.documentKey)))}function rg(a,e){for(let n=0;n<a.length&&n<e.length;++n){const u=a[n]-e[n];if(0!==u)return u}return a.length-e.length}class Ms{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const u=n;u.isInequality()?this.ze=u:this.je.push(u)}}We(e){tn(e.collectionGroup===this.collectionId);const n=ga(e);if(void 0!==n&&!this.He(n))return!1;const u=Ts(e);let f=0,_=0;for(;f<u.length&&this.He(u[f]);++f);if(f===u.length)return!0;if(void 0!==this.ze){const w=u[f];if(!this.Je(this.ze,w)||!this.Ye(this.Qe[_++],w))return!1;++f}for(;f<u.length;++f)if(_>=this.Qe.length||!this.Ye(this.Qe[_++],u[f]))return!1;return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function $i(a){var e,n;if(tn(a instanceof _r||a instanceof Vr),a instanceof _r){if(a instanceof wm){const f=(null===(n=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(_=>_r.create(a.field,"==",_)))||[];return Vr.create(f,"or")}return a}const u=a.filters.map(f=>$i(f));return Vr.create(u,a.op)}function $m(a){if(0===a.getFilters().length)return[];const e=Td($i(a));return tn(My(e)),Mh(e)||Ny(e)?[e]:e.getFilters()}function Mh(a){return a instanceof _r}function Ny(a){return a instanceof Vr&&Ku(a)}function My(a){return Mh(a)||Ny(a)||function(e){if(e instanceof Vr&&Io(e)){for(const n of e.getFilters())if(!Mh(n)&&!Ny(n))return!1;return!0}return!1}(a)}function Td(a){if(tn(a instanceof _r||a instanceof Vr),a instanceof _r)return a;if(1===a.filters.length)return Td(a.filters[0]);const e=a.filters.map(u=>Td(u));let n=Vr.create(e,a.op);return n=ec(n),My(n)?n:(tn(n instanceof Vr),tn(ps(n)),tn(n.filters.length>1),n.filters.reduce((u,f)=>zm(u,f)))}function zm(a,e){let n;return tn(a instanceof _r||a instanceof Vr),tn(e instanceof _r||e instanceof Vr),n=a instanceof _r?e instanceof _r?Vr.create([a,e],"and"):Sd(a,e):e instanceof _r?Sd(e,a):function(u,f){if(tn(u.filters.length>0&&f.filters.length>0),ps(u)&&ps(f))return fh(u,f.getFilters());const _=Io(u)?u:f,w=Io(u)?f:u,O=_.filters.map(H=>zm(H,w));return Vr.create(O,"or")}(a,e),ec(n)}function Sd(a,e){if(ps(e))return fh(e,a.getFilters());{const n=e.filters.map(u=>zm(a,u));return Vr.create(n,"or")}}function ec(a){if(tn(a instanceof _r||a instanceof Vr),a instanceof _r)return a;const e=a.getFilters();if(1===e.length)return ec(e[0]);if(dd(a))return a;const n=e.map(f=>ec(f)),u=[];return n.forEach(f=>{f instanceof _r?u.push(f):f instanceof Vr&&(f.op===a.op?u.push(...f.filters):u.push(f))}),1===u.length?u[0]:Vr.create(u,a.op)}class Ry{constructor(){this.Ze=new ig}addToCollectionParentIndex(e,n){return this.Ze.add(n),lt.resolve()}getCollectionParents(e,n){return lt.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return lt.resolve()}deleteFieldIndex(e,n){return lt.resolve()}getDocumentsMatchingTarget(e,n){return lt.resolve(null)}getIndexType(e,n){return lt.resolve(0)}getFieldIndexes(e,n){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,n){return lt.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,n){return lt.resolve(Hi.min())}updateCollectionGroup(e,n,u){return lt.resolve()}updateIndexEntries(e,n){return lt.resolve()}}class ig{constructor(){this.index={}}add(e){const n=e.lastSegment(),u=e.popLast(),f=this.index[n]||new Si(mr.comparator),_=!f.has(u);return this.index[n]=f.add(u),_}has(e){const n=e.lastSegment(),u=e.popLast(),f=this.index[n];return f&&f.has(u)}getEntries(e){return(this.index[e]||new Si(mr.comparator)).toArray()}}const sg=new Uint8Array(0);class F0{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new ig,this.tn=new _u(u=>mu(u),(u,f)=>pd(u,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const u=n.lastSegment(),f=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const _={collectionId:u,parent:tl(f)};return Wm(e).put(_)}return lt.resolve()}getCollectionParents(e,n){const u=[],f=IDBKeyRange.bound([n,""],[pa(n),""],!1,!0);return Wm(e).W(f).next(_=>{for(const w of _){if(w.collectionId!==n)break;u.push(vu(w.parent))}return u})}addFieldIndex(e,n){const u=Ff(e),f={indexId:(w=n).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var w;delete f.indexId;const _=u.add(f);if(n.indexState){const w=Ad(e);return _.next(O=>{w.put(ng(O,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return _.next()}deleteFieldIndex(e,n){const u=Ff(e),f=Ad(e),_=Rh(e);return u.delete(n.indexId).next(()=>f.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const u=Rh(e);let f=!0;const _=new Map;return lt.forEach(this.en(n),w=>this.nn(e,w).next(O=>{f&&(f=!!O),_.set(w,O)})).next(()=>{if(f){let w=yr();const O=[];return lt.forEach(_,(H,q)=>{var ae;It("IndexedDbIndexManager",`Using index ${ae=H,`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(Nr=>`${Nr.fieldPath}:${Nr.kind}`).join(",")}`} to execute ${mu(n)}`);const Oe=function(Nr,xs){const Dr=ga(xs);if(void 0===Dr)return null;for(const ei of bf(Nr,Dr.fieldPath))switch(ei.op){case"array-contains-any":return ei.value.arrayValue.values||[];case"array-contains":return[ei.value]}return null}(q,H),Ze=function(Nr,xs){const Dr=new Map;for(const ei of Ts(xs))for(const po of bf(Nr,ei.fieldPath))switch(po.op){case"==":case"in":Dr.set(ei.fieldPath.canonicalString(),po.value);break;case"not-in":case"!=":return Dr.set(ei.fieldPath.canonicalString(),po.value),Array.from(Dr.values())}return null}(q,H),Ot=function(Nr,xs){const Dr=[];let ei=!0;for(const po of Ts(xs)){const Ha=0===po.kind?jp(Nr,po.fieldPath,Nr.startAt):Dm(Nr,po.fieldPath,Nr.startAt);Dr.push(Ha.value),ei&&(ei=Ha.inclusive)}return new Mn(Dr,ei)}(q,H),Gt=function(Nr,xs){const Dr=[];let ei=!0;for(const po of Ts(xs)){const Ha=0===po.kind?Dm(Nr,po.fieldPath,Nr.endAt):jp(Nr,po.fieldPath,Nr.endAt);Dr.push(Ha.value),ei&&(ei=Ha.inclusive)}return new Mn(Dr,ei)}(q,H),dn=this.sn(H,q,Ot),An=this.sn(H,q,Gt),Ai=this.rn(H,q,Ze),Hs=this.on(H.indexId,Oe,dn,Ot.inclusive,An,Gt.inclusive,Ai);return lt.forEach(Hs,Nr=>u.J(Nr,n.limit).next(xs=>{xs.forEach(Dr=>{const ei=on.fromSegments(Dr.documentKey);w.has(ei)||(w=w.add(ei),O.push(ei))})}))}).next(()=>O)}return lt.resolve(null)})}en(e){let n=this.tn.get(e);return n||(n=0===e.filters.length?[e]:$m(Vr.create(e.filters,"and")).map(u=>Gp(e.path,e.collectionGroup,e.orderBy,u.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,u,f,_,w,O){const H=(null!=n?n.length:1)*Math.max(u.length,_.length),q=H/(null!=n?n.length:1),ae=[];for(let Oe=0;Oe<H;++Oe){const Ze=n?this.un(n[Oe/q]):sg,Ot=this.cn(e,Ze,u[Oe%q],f),Gt=this.an(e,Ze,_[Oe%q],w),dn=O.map(An=>this.cn(e,Ze,An,!0));ae.push(...this.createRange(Ot,Gt,dn))}return ae}cn(e,n,u,f){const _=new Cd(e,on.empty(),n,u);return f?_:_.Ge()}an(e,n,u,f){const _=new Cd(e,on.empty(),n,u);return f?_.Ge():_}nn(e,n){const u=new Ms(n),f=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,f).next(_=>{let w=null;for(const O of _)u.We(O)&&(!w||O.fields.length>w.fields.length)&&(w=O);return w})}getIndexType(e,n){let u=2;const f=this.en(n);return lt.forEach(f,_=>this.nn(e,_).next(w=>{w?0!==u&&w.fields.length<function(O){let H=new Si(hr.comparator),q=!1;for(const ae of O.filters)for(const Oe of ae.getFlattenedFilters())Oe.field.isKeyField()||("array-contains"===Oe.op||"array-contains-any"===Oe.op?q=!0:H=H.add(Oe.field));for(const ae of O.orderBy)ae.field.isKeyField()||(H=H.add(ae.field));return H.size+(q?1:0)}(_)&&(u=1):u=0})).next(()=>null!==n.limit&&f.length>1&&2===u?1:u)}hn(e,n){const u=new Nh;for(const f of Ts(e)){const _=n.data.field(f.fieldPath);if(null==_)return null;const w=u.Ke(f.kind);Qu.Ee.ae(_,w)}return u.Be()}un(e){const n=new Nh;return Qu.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const u=new Nh;return Qu.Ee.ae(Do(this.databaseId,n),u.Ke(function(f){const _=Ts(f);return 0===_.length?0:_[_.length-1].kind}(e))),u.Be()}rn(e,n,u){if(null===u)return[];let f=[];f.push(new Nh);let _=0;for(const w of Ts(e)){const O=u[_++];for(const H of f)if(this.fn(n,w.fieldPath)&&z(O))f=this.dn(f,w,O);else{const q=H.Ke(w.kind);Qu.Ee.ae(O,q)}}return this._n(f)}sn(e,n,u){return this.rn(e,n,u.position)}_n(e){const n=[];for(let u=0;u<e.length;++u)n[u]=e[u].Be();return n}dn(e,n,u){const f=[...e],_=[];for(const w of u.arrayValue.values||[])for(const O of f){const H=new Nh;H.seed(O.Be()),Qu.Ee.ae(w,H.Ke(n.kind)),_.push(H)}return _}fn(e,n){return!!e.filters.find(u=>u instanceof _r&&u.field.isEqual(n)&&("in"===u.op||"not-in"===u.op))}getFieldIndexes(e,n){const u=Ff(e),f=Ad(e);return(n?u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):u.W()).next(_=>{const w=[];return lt.forEach(_,O=>f.get([O.indexId,this.uid]).next(H=>{w.push(function(q,ae){const Oe=ae?new $r(ae.sequenceNumber,new Hi(Rc(ae.readTime),new on(vu(ae.documentKey)),ae.largestBatchId)):$r.empty(),Ze=q.fields.map(([Ot,Gt])=>new oi(hr.fromServerFormat(Ot),Gt));return new Rl(q.indexId,q.collectionGroup,Ze,Oe)}(O,H))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((u,f)=>{const _=u.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==_?_:mn(u.collectionGroup,f.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,u){const f=Ff(e),_=Ad(e);return this.wn(e).next(w=>f.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(O=>lt.forEach(O,H=>_.put(ng(H.indexId,this.user,w,u)))))}updateIndexEntries(e,n){const u=new Map;return lt.forEach(n,(f,_)=>{const w=u.get(f.collectionGroup);return(w?lt.resolve(w):this.getFieldIndexes(e,f.collectionGroup)).next(O=>(u.set(f.collectionGroup,O),lt.forEach(O,H=>this.mn(e,f,H).next(q=>{const ae=this.gn(_,H);return q.isEqual(ae)?lt.resolve():this.yn(e,_,H,q,ae)}))))})}pn(e,n,u,f){return Rh(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.ln(u,n.key),documentKey:n.key.path.toArray()})}In(e,n,u,f){return Rh(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.ln(u,n.key),n.key.path.toArray()])}mn(e,n,u){const f=Rh(e);let _=new Si(Pc);return f.X({index:"documentKeyIndex",range:IDBKeyRange.only([u.indexId,this.uid,this.ln(u,n)])},(w,O)=>{_=_.add(new Cd(u.indexId,n,O.arrayValue,O.directionalValue))}).next(()=>_)}gn(e,n){let u=new Si(Pc);const f=this.hn(n,e);if(null==f)return u;const _=ga(n);if(null!=_){const w=e.data.field(_.fieldPath);if(z(w))for(const O of w.arrayValue.values||[])u=u.add(new Cd(n.indexId,e.key,this.un(O),f))}else u=u.add(new Cd(n.indexId,e.key,sg,f));return u}yn(e,n,u,f,_){It("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const w=[];return function(O,H,q,ae,Oe){const Ze=O.getIterator(),Ot=H.getIterator();let Gt=tu(Ze),dn=tu(Ot);for(;Gt||dn;){let An=!1,Ai=!1;if(Gt&&dn){const Hs=q(Gt,dn);Hs<0?Ai=!0:Hs>0&&(An=!0)}else null!=Gt?Ai=!0:An=!0;An?(ae(dn),dn=tu(Ot)):Ai?(Oe(Gt),Gt=tu(Ze)):(Gt=tu(Ze),dn=tu(Ot))}}(f,_,Pc,O=>{w.push(this.pn(e,n,u,O))},O=>{w.push(this.In(e,n,u,O))}),lt.waitFor(w)}wn(e){let n=1;return Ad(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(u,f,_)=>{_.done(),n=f.sequenceNumber+1}).next(()=>n)}createRange(e,n,u){u=u.sort((w,O)=>Pc(w,O)).filter((w,O,H)=>!O||0!==Pc(w,H[O-1]));const f=[];f.push(e);for(const w of u){const O=Pc(w,e),H=Pc(w,n);if(0===O)f[0]=e.Ge();else if(O>0&&H<0)f.push(w),f.push(w.Ge());else if(H>0)break}f.push(n);const _=[];for(let w=0;w<f.length;w+=2){if(this.Tn(f[w],f[w+1]))return[];_.push(IDBKeyRange.bound([f[w].indexId,this.uid,f[w].arrayValue,f[w].directionalValue,sg,[]],[f[w+1].indexId,this.uid,f[w+1].arrayValue,f[w+1].directionalValue,sg,[]]))}return _}Tn(e,n){return Pc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(tc)}getMinOffset(e,n){return lt.mapArray(this.en(n),u=>this.nn(e,u).next(f=>f||$t())).next(tc)}}function Wm(a){return To(a,"collectionParents")}function Rh(a){return To(a,"indexEntries")}function Ff(a){return To(a,"indexConfiguration")}function Ad(a){return To(a,"indexState")}function tc(a){tn(0!==a.length);let e=a[0].indexState.offset,n=e.largestBatchId;for(let u=1;u<a.length;u++){const f=a[u].indexState.offset;ma(f,e)<0&&(e=f),n<f.largestBatchId&&(n=f.largestBatchId)}return new Hi(e.readTime,e.documentKey,n)}const Km={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qo{constructor(e,n,u){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=u}static withCacheSize(e){return new Qo(e,Qo.DEFAULT_COLLECTION_PERCENTILE,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wu(a,e,n){const u=a.store("mutations"),f=a.store("documentMutations"),_=[],w=IDBKeyRange.only(n.batchId);let O=0;const H=u.X({range:w},(ae,Oe,Ze)=>(O++,Ze.delete()));_.push(H.next(()=>{tn(1===O)}));const q=[];for(const ae of n.mutations){const Oe=Lm(e,ae.key.path,n.batchId);_.push(f.delete(Oe)),q.push(ae.key)}return lt.waitFor(_).next(()=>q)}function kc(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw $t();e=a.noDocument}return JSON.stringify(e).length}Qo.DEFAULT_COLLECTION_PERCENTILE=10,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qo.DEFAULT=new Qo(41943040,Qo.DEFAULT_COLLECTION_PERCENTILE,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qo.DISABLED=new Qo(-1,0,0);class So{constructor(e,n,u,f){this.userId=e,this.Tt=n,this.indexManager=u,this.referenceDelegate=f,this.En={}}static ue(e,n,u,f){tn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new So(_,n,u,f)}checkEmpty(e){let n=!0;const u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fc(e).X({index:"userMutationsIndex",range:u},(f,_,w)=>{n=!1,w.done()}).next(()=>n)}addMutationBatch(e,n,u,f){const _=xh(e),w=Fc(e);return w.add({}).next(O=>{tn("number"==typeof O);const H=new tg(O,n,u,f),q=function(Ze,Ot,Gt){const dn=Gt.baseMutations.map(Ai=>Mf(Ze.oe,Ai)),An=Gt.mutations.map(Ai=>Mf(Ze.oe,Ai));return{userId:Ot,batchId:Gt.batchId,localWriteTimeMs:Gt.localWriteTime.toMillis(),baseMutations:dn,mutations:An}}(this.Tt,this.userId,H),ae=[];let Oe=new Si((Ze,Ot)=>mn(Ze.canonicalString(),Ot.canonicalString()));for(const Ze of f){const Ot=Lm(this.userId,Ze.key.path,O);Oe=Oe.add(Ze.key.path.popLast()),ae.push(w.put(q)),ae.push(_.put(Ot,S0))}return Oe.forEach(Ze=>{ae.push(this.indexManager.addToCollectionParentIndex(e,Ze))}),e.addOnCommittedListener(()=>{this.En[O]=H.keys()}),lt.waitFor(ae).next(()=>H)})}lookupMutationBatch(e,n){return Fc(e).get(n).next(u=>u?(tn(u.userId===this.userId),Ah(this.Tt,u)):null)}An(e,n){return this.En[n]?lt.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(u=>{if(u){const f=u.keys();return this.En[n]=f,f}return null})}getNextMutationBatchAfterBatchId(e,n){const u=n+1,f=IDBKeyRange.lowerBound([this.userId,u]);let _=null;return Fc(e).X({index:"userMutationsIndex",range:f},(w,O,H)=>{O.userId===this.userId&&(tn(O.batchId>=u),_=Ah(this.Tt,O)),H.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let u=-1;return Fc(e).X({index:"userMutationsIndex",range:n,reverse:!0},(f,_,w)=>{u=_.batchId,w.done()}).next(()=>u)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fc(e).W("userMutationsIndex",n).next(u=>u.map(f=>Ah(this.Tt,f)))}getAllMutationBatchesAffectingDocumentKey(e,n){const u=xf(this.userId,n.path),f=IDBKeyRange.lowerBound(u),_=[];return xh(e).X({range:f},(w,O,H)=>{const[q,ae,Oe]=w,Ze=vu(ae);if(q===this.userId&&n.path.isEqual(Ze))return Fc(e).get(Oe).next(Ot=>{if(!Ot)throw $t();tn(Ot.userId===this.userId),_.push(Ah(this.Tt,Ot))});H.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let u=new Si(mn);const f=[];return n.forEach(_=>{const w=xf(this.userId,_.path),O=IDBKeyRange.lowerBound(w),H=xh(e).X({range:O},(q,ae,Oe)=>{const[Ze,Ot,Gt]=q,dn=vu(Ot);Ze===this.userId&&_.path.isEqual(dn)?u=u.add(Gt):Oe.done()});f.push(H)}),lt.waitFor(f).next(()=>this.Rn(e,u))}getAllMutationBatchesAffectingQuery(e,n){const u=n.path,f=u.length+1,_=xf(this.userId,u),w=IDBKeyRange.lowerBound(_);let O=new Si(mn);return xh(e).X({range:w},(H,q,ae)=>{const[Oe,Ze,Ot]=H,Gt=vu(Ze);Oe===this.userId&&u.isPrefixOf(Gt)?Gt.length===f&&(O=O.add(Ot)):ae.done()}).next(()=>this.Rn(e,O))}Rn(e,n){const u=[],f=[];return n.forEach(_=>{f.push(Fc(e).get(_).next(w=>{if(null===w)throw $t();tn(w.userId===this.userId),u.push(Ah(this.Tt,w))}))}),lt.waitFor(f).next(()=>u)}removeMutationBatch(e,n){return wu(e.re,this.userId,n).next(u=>(e.addOnCommittedListener(()=>{this.Pn(n.batchId)}),lt.forEach(u,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return lt.resolve();const u=IDBKeyRange.lowerBound([this.userId]),f=[];return xh(e).X({range:u},(_,w,O)=>{if(_[0]===this.userId){const H=vu(_[1]);f.push(H)}else O.done()}).next(()=>{tn(0===f.length)})})}containsKey(e,n){return xy(e,this.userId,n)}vn(e){return Py(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xy(a,e,n){const u=xf(e,n.path),f=u[1],_=IDBKeyRange.lowerBound(u);let w=!1;return xh(a).X({range:_,Z:!0},(O,H,q)=>{const[ae,Oe,Ze]=O;ae===e&&Oe===f&&(w=!0),q.done()}).next(()=>w)}function Fc(a){return To(a,"mutations")}function xh(a){return To(a,"documentMutations")}function Py(a){return To(a,"mutationQueues")}class Od{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Od(0)}static Sn(){return new Od(-1)}}class Ph{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const u=new Od(n.highestTargetId);return n.highestTargetId=u.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>wn.fromTimestamp(new dr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,u){return this.Dn(e).next(f=>(f.highestListenSequenceNumber=n,u&&(f.lastRemoteSnapshotVersion=u.toTimestamp()),n>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=n),this.Cn(e,f)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(u=>(u.targetCount+=1,this.Nn(n,u),this.Cn(e,u))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Xo(e).delete(n.targetId)).next(()=>this.Dn(e)).next(u=>(tn(u.targetCount>0),u.targetCount-=1,this.Cn(e,u)))}removeTargets(e,n,u){let f=0;const _=[];return Xo(e).X((w,O)=>{const H=Oh(O);H.sequenceNumber<=n&&null===u.get(H.targetId)&&(f++,_.push(this.removeTargetData(e,H)))}).next(()=>lt.waitFor(_)).next(()=>f)}forEachTarget(e,n){return Xo(e).X((u,f)=>{const _=Oh(f);n(_)})}Dn(e){return qm(e).get("targetGlobalKey").next(n=>(tn(null!==n),n))}Cn(e,n){return qm(e).put("targetGlobalKey",n)}xn(e,n){return Xo(e).put(Ay(this.Tt,n))}Nn(e,n){let u=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,u=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,u=!0),u}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const u=mu(n),f=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]);let _=null;return Xo(e).X({range:f,index:"queryTargetsIndex"},(w,O,H)=>{const q=Oh(O);pd(n,q.target)&&(_=q,H.done())}).next(()=>_)}addMatchingKeys(e,n,u){const f=[],_=Du(e);return n.forEach(w=>{const O=tl(w.path);f.push(_.put({targetId:u,path:O})),f.push(this.referenceDelegate.addReference(e,u,w))}),lt.waitFor(f)}removeMatchingKeys(e,n,u){const f=Du(e);return lt.forEach(n,_=>{const w=tl(_.path);return lt.waitFor([f.delete([u,w]),this.referenceDelegate.removeReference(e,u,_)])})}removeMatchingKeysForTargetId(e,n){const u=Du(e),f=IDBKeyRange.bound([n],[n+1],!1,!0);return u.delete(f)}getMatchingKeysForTargetId(e,n){const u=IDBKeyRange.bound([n],[n+1],!1,!0),f=Du(e);let _=yr();return f.X({range:u,Z:!0},(w,O,H)=>{const q=vu(w[1]),ae=new on(q);_=_.add(ae)}).next(()=>_)}containsKey(e,n){const u=tl(n.path),f=IDBKeyRange.bound([u],[pa(u)],!1,!0);let _=0;return Du(e).X({index:"documentTargetsIndex",Z:!0,range:f},([w,O],H,q)=>{0!==w&&(_++,q.done())}).next(()=>_>0)}ie(e,n){return Xo(e).get(n).next(u=>u?Oh(u):null)}}function Xo(a){return To(a,"targets")}function qm(a){return To(a,"targetGlobal")}function Du(a){return To(a,"targetDocuments")}function Ym([a,e],[n,u]){const f=mn(a,n);return 0===f?mn(e,u):f}class Lc{constructor(e){this.kn=e,this.buffer=new Si(Ym),this.$n=0}Mn(){return++this.$n}On(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const u=this.buffer.last();Ym(n,u)<0&&(this.buffer=this.buffer.delete(u).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Zm{constructor(e,n,u){this.garbageCollector=e,this.asyncQueue=n,this.localStore=u,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var n=this;It("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){n.Fn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(u){qo(u)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Eo(u)}yield n.Bn(3e5)}))}}class Nd{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(u=>Math.floor(n/100*u))}nthSequenceNumber(e,n){if(0===n)return lt.resolve(ao.at);const u=new Lc(n);return this.Ln.forEachTarget(e,f=>u.On(f.sequenceNumber)).next(()=>this.Ln.Un(e,f=>u.On(f))).next(()=>u.maxValue)}removeTargets(e,n,u){return this.Ln.removeTargets(e,n,u)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(Km)):this.getCacheSize(e).next(u=>u<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Km):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let u,f,_,w,O,H,q;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Oe=>(Oe>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Oe}`),f=this.params.maximumSequenceNumbersToCollect):f=Oe,w=Date.now(),this.nthSequenceNumber(e,f))).next(Oe=>(u=Oe,O=Date.now(),this.removeTargets(e,u,n))).next(Oe=>(_=Oe,H=Date.now(),this.removeOrphanedDocuments(e,u))).next(Oe=>(q=Date.now(),vn()<=ot.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ae}ms\n\tDetermined least recently used ${f} in `+(O-w)+`ms\n\tRemoved ${_} targets in `+(H-O)+`ms\n\tRemoved ${Oe} documents in `+(q-H)+`ms\nTotal Duration: ${q-ae}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:_,documentsRemoved:Oe})))}}class Jm{constructor(e,n){this.db=e,this.garbageCollector=new Nd(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(u=>n.next(f=>u+f))}Gn(e){let n=0;return this.Un(e,u=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(u,f)=>n(f))}addReference(e,n,u){return Lf(e,u)}removeReference(e,n,u){return Lf(e,u)}removeTargets(e,n,u){return this.db.getTargetCache().removeTargets(e,n,u)}markPotentiallyOrphaned(e,n){return Lf(e,n)}jn(e,n){return function(u,f){let _=!1;return Py(u).tt(w=>xy(u,w,f).next(O=>(O&&(_=!0),lt.resolve(!O)))).next(()=>_)}(e,n)}removeOrphanedDocuments(e,n){const u=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let _=0;return this.Qn(e,(w,O)=>{if(O<=n){const H=this.jn(e,w).next(q=>{if(!q)return _++,u.getEntry(e,w).next(()=>(u.removeEntry(w,wn.min()),Du(e).delete([0,tl(w.path)])))});f.push(H)}}).next(()=>lt.waitFor(f)).next(()=>u.apply(e)).next(()=>_)}removeTarget(e,n){const u=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,u)}updateLimboDocument(e,n){return Lf(e,n)}Qn(e,n){const u=Du(e);let f,_=ao.at;return u.X({index:"documentTargetsIndex"},([w,O],{path:H,sequenceNumber:q})=>{0===w?(_!==ao.at&&n(new on(vu(f)),_),_=q,f=H):_=ao.at}).next(()=>{_!==ao.at&&n(new on(vu(f)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(a,e){return Du(a).put((u=a.currentSequenceNumber,{targetId:0,path:tl(e.path),sequenceNumber:u}));var u}class Uf{constructor(){this.changes=new _u(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const u=this.changes.get(n);return void 0!==u?lt.resolve(u):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ky{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,u){return Md(e).put(u)}removeEntry(e,n,u){return Md(e).delete(function(f,_){const w=f.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Pf(_),w[w.length-1]]}(n,u))}updateMetadata(e,n){return this.getMetadata(e).next(u=>(u.byteSize+=n,this.zn(e,u)))}getEntry(e,n){let u=Jr.newInvalidDocument(n);return Md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kh(n))},(f,_)=>{u=this.Wn(n,_)}).next(()=>u)}Hn(e,n){let u={size:0,document:Jr.newInvalidDocument(n)};return Md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kh(n))},(f,_)=>{u={document:this.Wn(n,_),size:kc(_)}}).next(()=>u)}getEntries(e,n){let u=wa();return this.Jn(e,n,(f,_)=>{const w=this.Wn(f,_);u=u.insert(f,w)}).next(()=>u)}Yn(e,n){let u=wa(),f=new Ss(on.comparator);return this.Jn(e,n,(_,w)=>{const O=this.Wn(_,w);u=u.insert(_,O),f=f.insert(_,kc(w))}).next(()=>({documents:u,Zn:f}))}Jn(e,n,u){if(n.isEmpty())return lt.resolve();let f=new Si(Uy);n.forEach(H=>f=f.add(H));const _=IDBKeyRange.bound(kh(f.first()),kh(f.last())),w=f.getIterator();let O=w.getNext();return Md(e).X({index:"documentKeyIndex",range:_},(H,q,ae)=>{const Oe=on.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;O&&Uy(O,Oe)<0;)u(O,null),O=w.getNext();O&&O.isEqual(Oe)&&(u(O,q),O=w.hasNext()?w.getNext():null),O?ae.j(kh(O)):ae.done()}).next(()=>{for(;O;)u(O,null),O=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,n,u,f){const _=n.path,w=[_.popLast().toArray(),_.lastSegment(),Pf(u.readTime),u.documentKey.path.isEmpty()?"":u.documentKey.path.lastSegment()],O=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Md(e).W(IDBKeyRange.bound(w,O,!0)).next(H=>{let q=wa();for(const ae of H){const Oe=this.Wn(on.fromSegments(ae.prefixPath.concat(ae.collectionGroup,ae.documentId)),ae);Oe.isFoundDocument()&&(E(n,Oe)||f.has(Oe.key))&&(q=q.insert(Oe.key,Oe))}return q})}getAllFromCollectionGroup(e,n,u,f){let _=wa();const w=Ly(n,u),O=Ly(n,Hi.max());return Md(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,O,!0)},(H,q,ae)=>{const Oe=this.Wn(on.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);_=_.insert(Oe.key,Oe),_.size===f&&ae.done()}).next(()=>_)}newChangeBuffer(e){return new L0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Ul(e).get("remoteDocumentGlobalKey").next(n=>(tn(!!n),n))}zn(e,n){return Ul(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const u=function jm(a,e){let n;if(e.document)n=Mm(a.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const u=on.fromSegments(e.noDocument.path),f=Rc(e.noDocument.readTime);n=Jr.newNoDocument(u,f),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return $t();{const u=on.fromSegments(e.unknownDocument.path),f=Rc(e.unknownDocument.version);n=Jr.newUnknownDocument(u,f)}}return e.readTime&&n.setReadTime(function(u){const f=new dr(u[0],u[1]);return wn.fromTimestamp(f)}(e.readTime)),n}(this.Tt,n);if(!u.isNoDocument()||!u.version.isEqual(wn.min()))return u}return Jr.newInvalidDocument(e)}}function Fy(a){return new ky(a)}class L0 extends Uf{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new _u(u=>u.toString(),(u,f)=>u.isEqual(f))}applyChanges(e){const n=[];let u=0,f=new Si((_,w)=>mn(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const O=this.ts.get(_);if(n.push(this.Xn.removeEntry(e,_,O.readTime)),w.isValidDocument()){const H=Sy(this.Xn.Tt,w);f=f.add(_.path.popLast());const q=kc(H);u+=q-O.size,n.push(this.Xn.addEntry(e,_,H))}else if(u-=O.size,this.trackRemovals){const H=Sy(this.Xn.Tt,w.convertToNoDocument(wn.min()));n.push(this.Xn.addEntry(e,_,H))}}),f.forEach(_=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,_))}),n.push(this.Xn.updateMetadata(e,u)),lt.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(u=>(this.ts.set(n,{size:u.size,readTime:u.document.readTime}),u.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:u,Zn:f})=>(f.forEach((_,w)=>{this.ts.set(_,{size:w,readTime:u.get(_).readTime})}),u))}}function Ul(a){return To(a,"remoteDocumentGlobal")}function Md(a){return To(a,"remoteDocumentsV14")}function kh(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ly(a,e){const n=e.documentKey.path.toArray();return[a,Pf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Uy(a,e){const n=a.path.toArray(),u=e.path.toArray();let f=0;for(let _=0;_<n.length-2&&_<u.length-2;++_)if(f=mn(n[_],u[_]),f)return f;return f=mn(n.length,u.length),f||(f=mn(n[n.length-2],u[u.length-2]),f||mn(n[n.length-1],u[u.length-1]))}class U0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class nl{constructor(e,n,u,f){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=u,this.indexManager=f}getDocument(e,n){let u=null;return this.documentOverlayCache.getOverlay(e,n).next(f=>(u=f,this.remoteDocumentCache.getEntry(e,n))).next(f=>(null!==u&&Df(u.mutation,f,Zo.empty(),dr.now()),f))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(u=>this.getLocalViewOfDocuments(e,u,yr()).next(()=>u))}getLocalViewOfDocuments(e,n,u=yr()){const f=iu();return this.populateOverlays(e,f,n).next(()=>this.computeViews(e,n,f,u).next(_=>{let w=Tc();return _.forEach((O,H)=>{w=w.insert(O,H.overlayedDocument)}),w}))}getOverlayedDocuments(e,n){const u=iu();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,yr()))}populateOverlays(e,n,u){const f=[];return u.forEach(_=>{n.has(_)||f.push(_)}),this.documentOverlayCache.getOverlays(e,f).next(_=>{_.forEach((w,O)=>{n.set(w,O)})})}computeViews(e,n,u,f){let _=wa();const w=bl(),O=bl();return n.forEach((H,q)=>{const ae=u.get(q.key);f.has(q.key)&&(void 0===ae||ae.mutation instanceof Zu)?_=_.insert(q.key,q):void 0!==ae?(w.set(q.key,ae.mutation.getFieldMask()),Df(ae.mutation,q,ae.mutation.getFieldMask(),dr.now())):w.set(q.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,_).next(H=>(H.forEach((q,ae)=>w.set(q,ae)),n.forEach((q,ae)=>{var Oe;return O.set(q,new U0(ae,null!==(Oe=w.get(q))&&void 0!==Oe?Oe:null))}),O))}recalculateAndSaveOverlays(e,n){const u=bl();let f=new Ss((w,O)=>w-O),_=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(w=>{for(const O of w)O.keys().forEach(H=>{const q=n.get(H);if(null===q)return;let ae=u.get(H)||Zo.empty();ae=O.applyToLocalView(q,ae),u.set(H,ae);const Oe=(f.get(O.batchId)||yr()).add(H);f=f.insert(O.batchId,Oe)})}).next(()=>{const w=[],O=f.getReverseIterator();for(;O.hasNext();){const H=O.getNext(),q=H.key,ae=H.value,Oe=Cf();ae.forEach(Ze=>{if(!_.has(Ze)){const Ot=gy(n.get(Ze),u.get(Ze));null!==Ot&&Oe.set(Ze,Ot),_=_.add(Ze)}}),w.push(this.documentOverlayCache.saveOverlays(e,q,Oe))}return lt.waitFor(w)}).next(()=>u)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(u=>this.recalculateAndSaveOverlays(e,u))}getDocumentsMatchingQuery(e,n,u){return on.isDocumentKey((f=n).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):yh(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,u):this.getDocumentsMatchingCollectionQuery(e,n,u);var f}getNextDocuments(e,n,u,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,u,f).next(_=>{const w=f-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,u.largestBatchId,f-_.size):lt.resolve(iu());let O=-1,H=_;return w.next(q=>lt.forEach(q,(ae,Oe)=>(O<Oe.largestBatchId&&(O=Oe.largestBatchId),_.get(ae)?lt.resolve():this.remoteDocumentCache.getEntry(e,ae).next(Ze=>{H=H.insert(ae,Ze)}))).next(()=>this.populateOverlays(e,q,_)).next(()=>this.computeViews(e,H,q,yr())).next(ae=>({batchId:O,changes:Ih(ae)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new on(n)).next(u=>{let f=Tc();return u.isFoundDocument()&&(f=f.insert(u.key,u)),f})}getDocumentsMatchingCollectionGroupQuery(e,n,u){const f=n.collectionGroup;let _=Tc();return this.indexManager.getCollectionParents(e,f).next(w=>lt.forEach(w,O=>{const H=(q=n,ae=O.child(f),new vl(ae,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ae;return this.getDocumentsMatchingCollectionQuery(e,H,u).next(q=>{q.forEach((ae,Oe)=>{_=_.insert(ae,Oe)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,n,u){let f;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,u.largestBatchId).next(_=>(f=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,u,f))).next(_=>{f.forEach((O,H)=>{const q=H.getKey();null===_.get(q)&&(_=_.insert(q,Jr.newInvalidDocument(q)))});let w=Tc();return _.forEach((O,H)=>{const q=f.get(O);void 0!==q&&Df(q.mutation,H,Zo.empty(),dr.now()),E(n,H)&&(w=w.insert(O,H))}),w})}}class og{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return lt.resolve(this.es.get(n))}saveBundleMetadata(e,n){var u;return this.es.set(n.id,{id:(u=n).id,version:u.version,createTime:Ns(u.createTime)}),lt.resolve()}getNamedQuery(e,n){return lt.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,{name:(u=n).name,query:Hm(u.bundledQuery),readTime:Ns(u.readTime)}),lt.resolve();var u}}class Qm{constructor(){this.overlays=new Ss(on.comparator),this.ss=new Map}getOverlay(e,n){return lt.resolve(this.overlays.get(n))}getOverlays(e,n){const u=iu();return lt.forEach(n,f=>this.getOverlay(e,f).next(_=>{null!==_&&u.set(f,_)})).next(()=>u)}saveOverlays(e,n,u){return u.forEach((f,_)=>{this.ce(e,n,_)}),lt.resolve()}removeOverlaysForBatchId(e,n,u){const f=this.ss.get(u);return void 0!==f&&(f.forEach(_=>this.overlays=this.overlays.remove(_)),this.ss.delete(u)),lt.resolve()}getOverlaysForCollection(e,n,u){const f=iu(),_=n.length+1,w=new on(n.child("")),O=this.overlays.getIteratorFrom(w);for(;O.hasNext();){const H=O.getNext().value,q=H.getKey();if(!n.isPrefixOf(q.path))break;q.path.length===_&&H.largestBatchId>u&&f.set(H.getKey(),H)}return lt.resolve(f)}getOverlaysForCollectionGroup(e,n,u,f){let _=new Ss((q,ae)=>q-ae);const w=this.overlays.getIterator();for(;w.hasNext();){const q=w.getNext().value;if(q.getKey().getCollectionGroup()===n&&q.largestBatchId>u){let ae=_.get(q.largestBatchId);null===ae&&(ae=iu(),_=_.insert(q.largestBatchId,ae)),ae.set(q.getKey(),q)}}const O=iu(),H=_.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((q,ae)=>O.set(q,ae)),!(O.size()>=f)););return lt.resolve(O)}ce(e,n,u){const f=this.overlays.get(u.key);if(null!==f){const w=this.ss.get(f.largestBatchId).delete(u.key);this.ss.set(f.largestBatchId,w)}this.overlays=this.overlays.insert(u.key,new Gm(n,u));let _=this.ss.get(n);void 0===_&&(_=yr(),this.ss.set(n,_)),this.ss.set(n,_.add(u.key))}}class ag{constructor(){this.rs=new Si(ko.os),this.us=new Si(ko.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const u=new ko(e,n);this.rs=this.rs.add(u),this.us=this.us.add(u)}hs(e,n){e.forEach(u=>this.addReference(u,n))}removeReference(e,n){this.ls(new ko(e,n))}fs(e,n){e.forEach(u=>this.removeReference(u,n))}ds(e){const n=new on(new mr([])),u=new ko(n,e),f=new ko(n,e+1),_=[];return this.us.forEachInRange([u,f],w=>{this.ls(w),_.push(w.key)}),_}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new on(new mr([])),u=new ko(n,e),f=new ko(n,e+1);let _=yr();return this.us.forEachInRange([u,f],w=>{_=_.add(w.key)}),_}containsKey(e){const n=new ko(e,0),u=this.rs.firstAfterOrEqual(n);return null!==u&&e.isEqual(u.key)}}class ko{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return on.comparator(e.key,n.key)||mn(e.gs,n.gs)}static cs(e,n){return mn(e.gs,n.gs)||on.comparator(e.key,n.key)}}class pr{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new Si(ko.os)}checkEmpty(e){return lt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,u,f){const _=this.ys;this.ys++;const w=new tg(_,n,u,f);this.mutationQueue.push(w);for(const O of f)this.ps=this.ps.add(new ko(O.key,_)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return lt.resolve(w)}lookupMutationBatch(e,n){return lt.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const f=this.Ts(n+1),_=f<0?0:f;return lt.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const u=new ko(n,0),f=new ko(n,Number.POSITIVE_INFINITY),_=[];return this.ps.forEachInRange([u,f],w=>{const O=this.Is(w.gs);_.push(O)}),lt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let u=new Si(mn);return n.forEach(f=>{const _=new ko(f,0),w=new ko(f,Number.POSITIVE_INFINITY);this.ps.forEachInRange([_,w],O=>{u=u.add(O.gs)})}),lt.resolve(this.Es(u))}getAllMutationBatchesAffectingQuery(e,n){const u=n.path,f=u.length+1;let _=u;on.isDocumentKey(_)||(_=_.child(""));const w=new ko(new on(_),0);let O=new Si(mn);return this.ps.forEachWhile(H=>{const q=H.key.path;return!!u.isPrefixOf(q)&&(q.length===f&&(O=O.add(H.gs)),!0)},w),lt.resolve(this.Es(O))}Es(e){const n=[];return e.forEach(u=>{const f=this.Is(u);null!==f&&n.push(f)}),n}removeMutationBatch(e,n){tn(0===this.As(n.batchId,"removed")),this.mutationQueue.shift();let u=this.ps;return lt.forEach(n.mutations,f=>{const _=new ko(f.key,n.batchId);return u=u.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.ps=u})}Pn(e){}containsKey(e,n){const u=new ko(n,0),f=this.ps.firstAfterOrEqual(u);return lt.resolve(n.isEqual(f&&f.key))}performConsistencyCheck(e){return lt.resolve()}As(e,n){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Xm{constructor(e){this.Rs=e,this.docs=new Ss(on.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const u=n.key,f=this.docs.get(u),_=f?f.size:0,w=this.Rs(n);return this.docs=this.docs.insert(u,{document:n.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const u=this.docs.get(n);return lt.resolve(u?u.document.mutableCopy():Jr.newInvalidDocument(n))}getEntries(e,n){let u=wa();return n.forEach(f=>{const _=this.docs.get(f);u=u.insert(f,_?_.document.mutableCopy():Jr.newInvalidDocument(f))}),lt.resolve(u)}getDocumentsMatchingQuery(e,n,u,f){let _=wa();const w=n.path,O=new on(w.child("")),H=this.docs.getIteratorFrom(O);for(;H.hasNext();){const{key:q,value:{document:ae}}=H.getNext();if(!w.isPrefixOf(q.path))break;q.path.length>w.length+1||ma(xl(ae),u)<=0||(f.has(ae.key)||E(n,ae))&&(_=_.insert(ae.key,ae.mutableCopy()))}return lt.resolve(_)}getAllFromCollectionGroup(e,n,u,f){$t()}Ps(e,n){return lt.forEach(this.docs,u=>n(u))}newChangeBuffer(e){return new By(this)}getSize(e){return lt.resolve(this.size)}}class By extends Uf{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((u,f)=>{f.isValidDocument()?n.push(this.Xn.addEntry(e,f)):this.Xn.removeEntry(u)}),lt.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}class Vy{constructor(e){this.persistence=e,this.vs=new _u(n=>mu(n),pd),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.bs=0,this.Vs=new ag,this.targetCount=0,this.Ss=Od.Vn()}forEachTarget(e,n){return this.vs.forEach((u,f)=>n(f)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,u){return u&&(this.lastRemoteSnapshotVersion=u),n>this.bs&&(this.bs=n),lt.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new Od(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,lt.resolve()}updateTargetData(e,n){return this.xn(n),lt.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,n,u){let f=0;const _=[];return this.vs.forEach((w,O)=>{O.sequenceNumber<=n&&null===u.get(O.targetId)&&(this.vs.delete(w),_.push(this.removeMatchingKeysForTargetId(e,O.targetId)),f++)}),lt.waitFor(_).next(()=>f)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,n){const u=this.vs.get(n)||null;return lt.resolve(u)}addMatchingKeys(e,n,u){return this.Vs.hs(n,u),lt.resolve()}removeMatchingKeys(e,n,u){this.Vs.fs(n,u);const f=this.persistence.referenceDelegate,_=[];return f&&n.forEach(w=>{_.push(f.markPotentiallyOrphaned(e,w))}),lt.waitFor(_)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),lt.resolve()}getMatchingKeysForTargetId(e,n){const u=this.Vs.ws(n);return lt.resolve(u)}containsKey(e,n){return lt.resolve(this.Vs.containsKey(n))}}class Gy{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new ao(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Vy(this),this.indexManager=new Ry,this.remoteDocumentCache=new Xm(u=>this.referenceDelegate.ks(u)),this.Tt=new k0(n),this.$s=new og(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let u=this.Ds[e.toKey()];return u||(u=new pr(n,this.referenceDelegate),this.Ds[e.toKey()]=u),u}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,n,u){It("MemoryPersistence","Starting transaction:",e);const f=new Iu(this.Cs.next());return this.referenceDelegate.Ms(),u(f).next(_=>this.referenceDelegate.Os(f).next(()=>_)).toPromise().then(_=>(f.raiseOnCommittedEvent(),_))}Fs(e,n){return lt.or(Object.values(this.Ds).map(u=>()=>u.containsKey(e,n)))}}class Iu extends Jl{constructor(e){super(),this.currentSequenceNumber=e}}class Rd{constructor(e){this.persistence=e,this.Bs=new ag,this.Ls=null}static qs(e){return new Rd(e)}get Us(){if(this.Ls)return this.Ls;throw $t()}addReference(e,n,u){return this.Bs.addReference(u,n),this.Us.delete(u.toString()),lt.resolve()}removeReference(e,n,u){return this.Bs.removeReference(u,n),this.Us.add(u.toString()),lt.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),lt.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(f=>this.Us.add(f.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,n.targetId).next(f=>{f.forEach(_=>this.Us.add(_.toString()))}).next(()=>u.removeTargetData(e,n))}Ms(){this.Ls=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Us,u=>{const f=on.fromPath(u);return this.Ks(e,f).next(_=>{_||n.removeEntry(f,wn.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(u=>{u?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return lt.or([()=>lt.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Fs(e,n)])}}class B0{constructor(e){this.Tt=e}F(e,n,u,f){const _=new Za("createOrUpgrade",n);var O;u<1&&f>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0}),O.createObjectStore("documentMutations"),e_(e),function(O){O.createObjectStore("remoteDocuments")}(e));let w=lt.resolve();return u<3&&f>=3&&(0!==u&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),e_(e)),w=w.next(()=>function(O){const H=O.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",q)}(_))),u<4&&f>=4&&(0!==u&&(w=w.next(()=>function(O,H){return H.store("mutations").W().next(q=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0});const ae=H.store("mutations"),Oe=q.map(Ze=>ae.put(Ze));return lt.waitFor(Oe)})}(e,_))),w=w.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),u<5&&f>=5&&(w=w.next(()=>this.Gs(_))),u<6&&f>=6&&(w=w.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(_)))),u<7&&f>=7&&(w=w.next(()=>this.js(_))),u<8&&f>=8&&(w=w.next(()=>this.zs(e,_))),u<9&&f>=9&&(w=w.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),u<10&&f>=10&&(w=w.next(()=>this.Ws(_))),u<11&&f>=11&&(w=w.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),u<12&&f>=12&&(w=w.next(()=>{!function(O){const H=O.createObjectStore("documentOverlays",{keyPath:Bm});H.createIndex("collectionPathOverlayIndex",lE,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",uE,{unique:!1})}(e)})),u<13&&f>=13&&(w=w.next(()=>function(O){const H=O.createObjectStore("remoteDocumentsV14",{keyPath:A0});H.createIndex("documentKeyIndex",Cy),H.createIndex("collectionGroupIndex",Ty)}(e)).next(()=>this.Hs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),u<14&&f>=14&&(w=w.next(()=>this.Js(e,_))),u<15&&f>=15&&(w=w.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:fo}).createIndex("sequenceNumberIndex",M0,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:R0}).createIndex("documentKeyIndex",Um,{unique:!1})}(e))),w}Qs(e){let n=0;return e.store("remoteDocuments").X((u,f)=>{n+=kc(f)}).next(()=>{const u={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",u)})}Gs(e){const n=e.store("mutationQueues"),u=e.store("mutations");return n.W().next(f=>lt.forEach(f,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return u.W("userMutationsIndex",w).next(O=>lt.forEach(O,H=>{tn(H.userId===_.userId);const q=Ah(this.Tt,H);return wu(e,_.userId,q).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),u=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const _=[];return u.X((w,O)=>{const H=new mr(w),q=[0,tl(H)];_.push(n.get(q).next(ae=>ae?lt.resolve():n.put({targetId:0,path:tl(H),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>lt.waitFor(_))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:N0});const u=n.store("collectionParents"),f=new ig,_=w=>{if(f.add(w)){const O=w.lastSegment(),H=w.popLast();return u.put({collectionId:O,parent:tl(H)})}};return n.store("remoteDocuments").X({Z:!0},(w,O)=>{const H=new mr(w);return _(H.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([w,O,H],q)=>{const ae=vu(O);return _(ae.popLast())}))}Ws(e){const n=e.store("targets");return n.X((u,f)=>{const _=Oh(f),w=Ay(this.Tt,_);return n.put(w)})}Hs(e,n){const u=n.store("remoteDocuments"),f=[];return u.X((_,w)=>{const O=n.store("remoteDocumentsV14"),H=(q=w,q.document?new on(mr.fromString(q.document.name).popFirst(5)):q.noDocument?on.fromSegments(q.noDocument.path):q.unknownDocument?on.fromSegments(q.unknownDocument.path):$t()).path.toArray();var q;const ae={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};f.push(O.put(ae))}).next(()=>lt.waitFor(f))}Js(e,n){const u=n.store("mutations"),f=Fy(this.Tt),_=new Gy(Rd.qs,this.Tt.oe);return u.W().next(w=>{const O=new Map;return w.forEach(H=>{var q;let ae=null!==(q=O.get(H.userId))&&void 0!==q?q:yr();Ah(this.Tt,H).keys().forEach(Oe=>ae=ae.add(Oe)),O.set(H.userId,ae)}),lt.forEach(O,(H,q)=>{const ae=new ye(q),Oe=wd.ue(this.Tt,ae),Ze=_.getIndexManager(ae),Ot=So.ue(ae,this.Tt,Ze,_.referenceDelegate);return new nl(f,Ot,Oe,Ze).recalculateAndSaveOverlaysForDocumentKeys(new Sh(n,ao.at),H).next()})})}}function e_(a){a.createObjectStore("targetDocuments",{keyPath:O0}).createIndex("documentTargetsIndex",Xp,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qp,{unique:!0}),a.createObjectStore("targetGlobal")}const lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class t_{constructor(e,n,u,f,_,w,O,H,q,ae,Oe=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=u,this.Ys=_,this.window=w,this.document=O,this.Zs=q,this.Xs=ae,this.ti=Oe,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=Ze=>Promise.resolve(),!t_.C())throw new Rt(at.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jm(this,f),this.oi=n+"main",this.Tt=new k0(H),this.ui=new xo(this.oi,this.ti,new B0(this.Tt)),this.Ns=new Ph(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Fy(this.Tt),this.$s=new Ll,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ae&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(at.FAILED_PRECONDITION,lg);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new ao(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var n=this;return this.ri=function(){var u=(0,we.Z)(function*(f){if(n.started)return e(f)});return function(f){return u.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var n=(0,we.Z)(function*(u){null===u.newVersion&&(yield e())});return function(u){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,we.Z)(function*(){n.started&&(yield n.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(qo(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Fo(e).get("owner").next(n=>lt.resolve(this.yi(n)))}pi(e){return Uc(e).delete(this.clientId)}Ii(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",u=>{const f=To(u,"clientMetadata");return f.W().next(_=>{const w=e.Ei(_,18e5),O=_.filter(H=>-1===w.indexOf(H));return lt.forEach(O,H=>f.delete(H.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ci)for(const u of n)e.ci.removeItem(e.Ai(u.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?lt.resolve(!0):Fo(e).get("owner").next(n=>{if(null!==n&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new Rt(at.FAILED_PRECONDITION,lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uc(e).W().next(u=>void 0===this.Ei(u,5e3).find(f=>!(this.clientId===f.clientId||!(!this.networkEnabled&&f.networkEnabled||!this.inForeground&&f.inForeground&&this.networkEnabled===f.networkEnabled))))}).next(n=>(this.isPrimary!==n&&It("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,we.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const u=new Sh(n,ao.at);return e.mi(u).next(()=>e.pi(u))}),e.ui.close(),e.Vi()})()}Ei(e,n){return e.filter(u=>this.Ti(u.updateTimeMs,n)&&!this.Ri(u.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Uc(e).W().next(n=>this.Ei(n,18e5).map(u=>u.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return So.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new F0(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return wd.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,n,u){It("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===n?"readonly":"readwrite",_=15===(w=this.ti)?uw:14===w?P0:13===w?eg:12===w?cE:11===w?x0:void $t();var w;let O;return this.ui.runTransaction(e,f,_,H=>(O=new Sh(H,this.Cs?this.Cs.next():ao.at),"readwrite-primary"===n?this._i(O).next(q=>!!q||this.wi(O)).next(q=>{if(!q)throw xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Rt(at.FAILED_PRECONDITION,Hu);return u(O)}).next(q=>this.gi(O).next(()=>q)):this.Di(O).next(()=>u(O)))).then(H=>(O.raiseOnCommittedEvent(),H))}Di(e){return Fo(e).get("owner").next(n=>{if(null!==n&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Rt(at.FAILED_PRECONDITION,lg)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fo(e).put("owner",n)}static C(){return xo.C()}mi(e){const n=Fo(e);return n.get("owner").next(u=>this.yi(u)?(It("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):lt.resolve())}Ti(e,n){const u=Date.now();return!(e<u-n||e>u&&(xn(`Detected an update time that is in the future: ${e} > ${u}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const n=/(?:Version|Mobile)\/1[456]/;(0,ze.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const u=null!==(null===(n=this.ci)||void 0===n?void 0:n.getItem(this.Ai(e)));return It("IndexedDbPersistence",`Client '${e}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return xn("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){xn("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fo(a){return To(a,"owner")}function Uc(a){return To(a,"clientMetadata")}function ug(a,e){let n=a.projectId;return a.isDefaultDatabase||(n+="."+a.database),"firestore/"+e+"/"+n+"/"}class El{constructor(e,n,u,f){this.targetId=e,this.fromCache=n,this.Ci=u,this.xi=f}static Ni(e,n){let u=yr(),f=yr();for(const _ of n.docChanges)switch(_.type){case 0:u=u.add(_.doc.key);break;case 1:f=f.add(_.doc.key)}return new El(e,n.fromCache,u,f)}}class jy{constructor(){this.ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,u,f){return this.Mi(e,n).next(_=>_||this.Oi(e,n,f,u)).next(_=>_||this.Fi(e,n))}Mi(e,n){if(Jo(n))return lt.resolve(null);let u=ho(n);return this.indexManager.getIndexType(e,u).next(f=>0===f?null:(null!==n.limit&&1===f&&(n=bh(n,null,"F"),u=ho(n)),this.indexManager.getDocumentsMatchingTarget(e,u).next(_=>{const w=yr(..._);return this.$i.getDocuments(e,w).next(O=>this.indexManager.getMinOffset(e,u).next(H=>{const q=this.Bi(n,O);return this.Li(n,q,w,H.readTime)?this.Mi(e,bh(n,null,"F")):this.qi(e,q,n,H)}))})))}Oi(e,n,u,f){return Jo(n)||f.isEqual(wn.min())?this.Fi(e,n):this.$i.getDocuments(e,u).next(_=>{const w=this.Bi(n,_);return this.Li(n,w,u,f)?this.Fi(e,n):(vn()<=ot.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),v(n)),this.qi(e,w,n,cd(f,-1)))})}Bi(e,n){let u=new Si(Q(e));return n.forEach((f,_)=>{E(e,_)&&(u=u.add(_))}),u}Li(e,n,u,f){if(null===e.limit)return!1;if(u.size!==n.size)return!0;const _="F"===e.limitType?n.last():n.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(f)>0)}Fi(e,n){return vn()<=ot.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",v(n)),this.$i.getDocumentsMatchingQuery(e,n,Hi.min())}qi(e,n,u,f){return this.$i.getDocumentsMatchingQuery(e,u,f).next(_=>(n.forEach(w=>{_=_.insert(w.key,w)}),_))}}class n_{constructor(e,n,u,f){this.persistence=e,this.Ui=n,this.Tt=f,this.Ki=new Ss(mn),this.Gi=new _u(_=>mu(_),pd),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(u)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nl(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function Bf(a,e,n,u){return new n_(a,e,n,u)}function Hy(a,e){return cg.apply(this,arguments)}function cg(){return cg=(0,we.Z)(function*(a,e){const n=qt(a);return yield n.persistence.runTransaction("Handle user change","readonly",u=>{let f;return n.mutationQueue.getAllMutationBatches(u).next(_=>(f=_,n.zi(e),n.mutationQueue.getAllMutationBatches(u))).next(_=>{const w=[],O=[];let H=yr();for(const q of f){w.push(q.batchId);for(const ae of q.mutations)H=H.add(ae.key)}for(const q of _){O.push(q.batchId);for(const ae of q.mutations)H=H.add(ae.key)}return n.localDocuments.getDocuments(u,H).next(q=>({Wi:q,removedBatchIds:w,addedBatchIds:O}))})})}),cg.apply(this,arguments)}function $y(a){const e=qt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function r_(a,e,n){let u=yr(),f=yr();return n.forEach(_=>u=u.add(_)),e.getEntries(a,u).next(_=>{let w=wa();return n.forEach((O,H)=>{const q=_.get(O);H.isFoundDocument()!==q.isFoundDocument()&&(f=f.add(O)),H.isNoDocument()&&H.version.isEqual(wn.min())?(e.removeEntry(O,H.readTime),w=w.insert(O,H)):!q.isValidDocument()||H.version.compareTo(q.version)>0||0===H.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(H),w=w.insert(O,H)):It("LocalStore","Ignoring outdated watch update for ",O,". Current version:",q.version," Watch version:",H.version)}),{Hi:w,Ji:f}})}function nc(a,e){const n=qt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",u=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(u,e)))}function Ba(a,e){const n=qt(a);return n.persistence.runTransaction("Allocate target","readwrite",u=>{let f;return n.Ns.getTargetData(u,e).next(_=>_?(f=_,lt.resolve(f)):n.Ns.allocateTargetId(u).next(w=>(f=new bd(e,w,0,u.currentSequenceNumber),n.Ns.addTargetData(u,f).next(()=>f))))}).then(u=>{const f=n.Ki.get(u.targetId);return(null===f||u.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(u.targetId,u),n.Gi.set(e,u.targetId)),u})}function rl(a,e,n){return i_.apply(this,arguments)}function i_(){return i_=(0,we.Z)(function*(a,e,n){const u=qt(a),f=u.Ki.get(e),_=n?"readwrite":"readwrite-primary";try{n||(yield u.persistence.runTransaction("Release target",_,w=>u.persistence.referenceDelegate.removeTarget(w,f)))}catch(w){if(!qo(w))throw w;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}u.Ki=u.Ki.remove(e),u.Gi.delete(f.target)}),i_.apply(this,arguments)}function Vf(a,e,n){const u=qt(a);let f=wn.min(),_=yr();return u.persistence.runTransaction("Execute query","readonly",w=>function(O,H,q){const ae=qt(O),Oe=ae.Gi.get(q);return void 0!==Oe?lt.resolve(ae.Ki.get(Oe)):ae.Ns.getTargetData(H,q)}(u,w,ho(e)).next(O=>{if(O)return f=O.lastLimboFreeSnapshotVersion,u.Ns.getMatchingKeysForTargetId(w,O.targetId).next(H=>{_=H})}).next(()=>u.Ui.getDocumentsMatchingQuery(w,e,n?f:wn.min(),n?_:yr())).next(O=>(dg(u,N(e),O),{documents:O,Yi:_})))}function Cu(a,e){const n=qt(a),u=qt(n.Ns),f=n.Ki.get(e);return f?Promise.resolve(f.target):n.persistence.runTransaction("Get target data","readonly",_=>u.ie(_,e).next(w=>w?w.target:null))}function Fh(a,e){const n=qt(a),u=n.Qi.get(e)||wn.min();return n.persistence.runTransaction("Get new document changes","readonly",f=>n.ji.getAllFromCollectionGroup(f,e,cd(u,-1),Number.MAX_SAFE_INTEGER)).then(f=>(dg(n,e,f),f))}function dg(a,e,n){let u=a.Qi.get(e)||wn.min();n.forEach((f,_)=>{_.readTime.compareTo(u)>0&&(u=_.readTime)}),a.Qi.set(e,u)}function hg(){return hg=(0,we.Z)(function*(a,e,n,u){const f=qt(a);let _=yr(),w=wa();for(const q of n){const ae=e.Zi(q.metadata.name);q.document&&(_=_.add(ae));const Oe=e.Xi(q);Oe.setReadTime(e.tr(q.metadata.readTime)),w=w.insert(ae,Oe)}const O=f.ji.newChangeBuffer({trackRemovals:!0}),H=yield Ba(f,(q=u,ho(Ic(mr.fromString(`__bundle__/docs/${q}`)))));var q;return f.persistence.runTransaction("Apply bundle documents","readwrite",q=>r_(q,O,w).next(ae=>(O.apply(q),ae)).next(ae=>f.Ns.removeMatchingKeysForTargetId(q,H.targetId).next(()=>f.Ns.addMatchingKeys(q,_,H.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(q,ae.Hi,ae.Ji)).next(()=>ae.Hi)))}),hg.apply(this,arguments)}function H0(a,e){return s_.apply(this,arguments)}function s_(){return s_=(0,we.Z)(function*(a,e,n=yr()){const u=yield Ba(a,ho(Hm(e.bundledQuery))),f=qt(a);return f.persistence.runTransaction("Save named query","readwrite",_=>{const w=Ns(e.readTime);if(u.snapshotVersion.compareTo(w)>=0)return f.$s.saveNamedQuery(_,e);const O=u.withResumeToken(D.EMPTY_BYTE_STRING,w);return f.Ki=f.Ki.insert(O.targetId,O),f.Ns.updateTargetData(_,O).next(()=>f.Ns.removeMatchingKeysForTargetId(_,u.targetId)).next(()=>f.Ns.addMatchingKeys(_,n,u.targetId)).next(()=>f.$s.saveNamedQuery(_,e))})}),s_.apply(this,arguments)}function zy(a,e){return`firestore_clients_${a}_${e}`}function o_(a,e,n){let u=`firestore_mutations_${a}_${n}`;return e.isAuthenticated()&&(u+=`_${e.uid}`),u}function fg(a,e){return`firestore_targets_${a}_${e}`}class Lh{constructor(e,n,u,f){this.user=e,this.batchId=n,this.state=u,this.error=f}static er(e,n,u){const f=JSON.parse(u);let _,w="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return w&&f.error&&(w="string"==typeof f.error.message&&"string"==typeof f.error.code,w&&(_=new Rt(f.error.code,f.error.message))),w?new Lh(e,n,f.state,_):(xn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${u}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rc{constructor(e,n,u){this.targetId=e,this.state=n,this.error=u}static er(e,n){const u=JSON.parse(n);let f,_="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return _&&u.error&&(_="string"==typeof u.error.message&&"string"==typeof u.error.code,_&&(f=new Rt(u.error.code,u.error.message))),_?new rc(e,u.state,f):(xn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const u=JSON.parse(n);let f="object"==typeof u&&u.activeTargetIds instanceof Array,_=Sc();for(let w=0;f&&w<u.activeTargetIds.length;++w)f=Wu(u.activeTargetIds[w]),_=_.add(u.activeTargetIds[w]);return f?new Bc(e,_):(xn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Wy{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Wy(n.clientId,n.onlineState):(xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gf{constructor(){this.activeTargetIds=Sc()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pg{constructor(e,n,u,f,_){this.window=e,this.Ys=n,this.persistenceKey=u,this.rr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ss(mn),this.started=!1,this.hr=[];const w=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.lr=zy(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Gf),this._r=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const n=yield e.syncEngine.Si();for(const f of n){if(f===e.rr)continue;const _=e.getItem(zy(e.persistenceKey,f));if(_){const w=Bc.er(f,_);w&&(e.ar=e.ar.insert(w.clientId,w))}}e.pr();const u=e.storage.getItem(e.gr);if(u){const f=e.Ir(u);f&&e.Tr(f)}for(const f of e.hr)e.cr(f);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((u,f)=>{f.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,u){this.Ar(e,n,u),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(fg(this.persistenceKey,e));if(u){const f=rc.er(e,u);f&&(n=f.state)}}return this.Pr.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fg(this.persistenceKey,e))}updateQueryState(e,n,u){this.vr(e,n,u)}handleUserChange(e,n,u){n.forEach(f=>{this.Rr(f)}),this.currentUser=e,u.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return It("SharedClientState","READ",e,n),n}setItem(e,n){It("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var n=this;const u=e;if(u.storageArea===this.storage){if(It("SharedClientState","EVENT",u.key,u.newValue),u.key===this.lr)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,we.Z)(function*(){if(n.started){if(null!==u.key)if(n._r.test(u.key)){if(null==u.newValue){const f=n.Sr(u.key);return n.Dr(f,null)}{const f=n.Cr(u.key,u.newValue);if(f)return n.Dr(f.clientId,f)}}else if(n.wr.test(u.key)){if(null!==u.newValue){const f=n.Nr(u.key,u.newValue);if(f)return n.kr(f)}}else if(n.mr.test(u.key)){if(null!==u.newValue){const f=n.$r(u.key,u.newValue);if(f)return n.Mr(f)}}else if(u.key===n.gr){if(null!==u.newValue){const f=n.Ir(u.newValue);if(f)return n.Tr(f)}}else if(u.key===n.dr){const f=function(_){let w=ao.at;if(null!=_)try{const O=JSON.parse(_);tn("number"==typeof O),w=O}catch(O){xn("SharedClientState","Failed to read sequence number from WebStorage",O)}return w}(u.newValue);f!==ao.at&&n.sequenceNumberHandler(f)}else if(u.key===n.yr){const f=n.Or(u.newValue);yield Promise.all(f.map(_=>n.syncEngine.Fr(_)))}}else n.hr.push(u)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,n,u){const f=new Lh(this.currentUser,e,n,u),_=o_(this.persistenceKey,this.currentUser,e);this.setItem(_,f.nr())}Rr(e){const n=o_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,n,u){const f=fg(this.persistenceKey,e),_=new rc(e,n,u);this.setItem(f,_.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const u=this.Sr(e);return Bc.er(u,n)}Nr(e,n){const u=this.wr.exec(e),f=Number(u[1]);return Lh.er(new ye(void 0!==u[2]?u[2]:null),f,n)}$r(e,n){const u=this.mr.exec(e),f=Number(u[1]);return rc.er(f,n)}Ir(e){return Wy.er(e)}Or(e){return JSON.parse(e)}kr(e){var n=this;return(0,we.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Br(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const u=n?this.ar.insert(e,n):this.ar.remove(e),f=this.Er(this.ar),_=this.Er(u),w=[],O=[];return _.forEach(H=>{f.has(H)||w.push(H)}),f.forEach(H=>{_.has(H)||O.push(H)}),this.syncEngine.qr(w,O).then(()=>{this.ar=u})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=Sc();return e.forEach((u,f)=>{n=n.unionWith(f.activeTargetIds)}),n}}class $0{constructor(){this.Ur=new Gf,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,u){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,u){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Gf,Promise.resolve()}handleUserChange(e,n,u){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uh{Gr(e){}shutdown(){}}class ea{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bh=null;function gg(){return null===Bh?Bh=268435456+Math.round(2147483648*Math.random()):Bh++,"0x"+Bh.toString(16)}const Vh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ky{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const Ao="WebChannelConnection";class Gh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,u,f,_){const w=gg(),O=this.fo(e,n);It("RestConnection",`Sending RPC '${e}' ${w}:`,O,u);const H={};return this._o(H,f,_),this.wo(e,O,H,u).then(q=>(It("RestConnection",`Received RPC '${e}' ${w}: `,q),q),q=>{throw Qn("RestConnection",`RPC '${e}' ${w} failed with error: `,q,"url: ",O,"request:",u),q})}mo(e,n,u,f,_,w){return this.lo(e,n,u,f,_)}_o(e,n,u){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ye,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((f,_)=>e[_]=f),u&&u.headers.forEach((f,_)=>e[_]=f)}fo(e,n){return`${this.co}/v1/${n}:${Vh[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,u,f){const _=gg();return new Promise((w,O)=>{const H=new B;H.setWithCredentials(!0),H.listenOnce(Yl.COMPLETE,()=>{try{switch(H.getLastErrorCode()){case Nl.NO_ERROR:const ae=H.getResponseJson();It(Ao,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(ae)),w(ae);break;case Nl.TIMEOUT:It(Ao,`RPC '${e}' ${_} timed out`),O(new Rt(at.DEADLINE_EXCEEDED,"Request time out"));break;case Nl.HTTP_ERROR:const Oe=H.getStatus();if(It(Ao,`RPC '${e}' ${_} failed with status:`,Oe,"response text:",H.getResponseText()),Oe>0){let Ze=H.getResponseJson();Array.isArray(Ze)&&(Ze=Ze[0]);const Ot=Ze?.error;if(Ot&&Ot.status&&Ot.message){const Gt=function(dn){const An=dn.toLowerCase().replace(/_/g,"-");return Object.values(at).indexOf(An)>=0?An:at.UNKNOWN}(Ot.status);O(new Rt(Gt,Ot.message))}else O(new Rt(at.UNKNOWN,"Server responded with status "+H.getStatus()))}else O(new Rt(at.UNAVAILABLE,"Connection failed."));break;default:$t()}}finally{It(Ao,`RPC '${e}' ${_} completed.`)}});const q=JSON.stringify(f);It(Ao,`RPC '${e}' ${_} sending request:`,f),H.send(n,"POST",q,u,15)})}yo(e,n,u){const f=gg(),_=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=Gu(),O=Ec(),H={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(H.xmlHttpFactory=new P({})),this._o(H.initMessageHeaders,n,u),H.encodeInitMessageHeaders=!0;const q=_.join("");It(Ao,`Creating RPC '${e}' stream ${f}: ${q}`,H);const ae=w.createWebChannel(q,H);let Oe=!1,Ze=!1;const Ot=new Ky({Yr:dn=>{Ze?It(Ao,`Not sending because RPC '${e}' stream ${f} is closed:`,dn):(Oe||(It(Ao,`Opening RPC '${e}' stream ${f} transport.`),ae.open(),Oe=!0),It(Ao,`RPC '${e}' stream ${f} sending:`,dn),ae.send(dn))},Zr:()=>ae.close()}),Gt=(dn,An,Ai)=>{dn.listen(An,Hs=>{try{Ai(Hs)}catch(Nr){setTimeout(()=>{throw Nr},0)}})};return Gt(ae,K.EventType.OPEN,()=>{Ze||It(Ao,`RPC '${e}' stream ${f} transport opened.`)}),Gt(ae,K.EventType.CLOSE,()=>{Ze||(Ze=!0,It(Ao,`RPC '${e}' stream ${f} transport closed`),Ot.oo())}),Gt(ae,K.EventType.ERROR,dn=>{Ze||(Ze=!0,Qn(Ao,`RPC '${e}' stream ${f} transport errored:`,dn),Ot.oo(new Rt(at.UNAVAILABLE,"The operation could not be completed")))}),Gt(ae,K.EventType.MESSAGE,dn=>{var An;if(!Ze){const Ai=dn.data[0];tn(!!Ai);const Nr=Ai.error||(null===(An=Ai[0])||void 0===An?void 0:An.error);if(Nr){It(Ao,`RPC '${e}' stream ${f} received error:`,Nr);const xs=Nr.status;let Dr=function(po){const Ha=Gs[po];if(void 0!==Ha)return Cm(Ha)}(xs),ei=Nr.message;void 0===Dr&&(Dr=at.INTERNAL,ei="Unknown error status: "+xs+" with message "+Nr.message),Ze=!0,Ot.oo(new Rt(Dr,ei)),ae.close()}else It(Ao,`RPC '${e}' stream ${f} received:`,Ai),Ot.uo(Ai)}}),Gt(O,gl.STAT_EVENT,dn=>{dn.stat===ha.PROXY?It(Ao,`RPC '${e}' stream ${f} detected buffering proxy`):dn.stat===ha.NOPROXY&&It(Ao,`RPC '${e}' stream ${f} detected no buffering proxy`)}),setTimeout(()=>{Ot.ro()},0),Ot}}function il(){return typeof window<"u"?window:null}function Vc(){return typeof document<"u"?document:null}function xd(a){return new Am(a,!0)}class jh{constructor(e,n,u=1e3,f=1.5,_=6e4){this.Ys=e,this.timerId=n,this.po=u,this.Io=f,this.To=_,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.bo()),u=Math.max(0,Date.now()-this.Ro),f=Math.max(0,n-u);f>0&&It("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${u} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,f,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class a_{constructor(e,n,u,f,_,w,O,H){this.Ys=e,this.So=u,this.Do=f,this.connection=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=O,this.listener=H,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new jh(e,n)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,we.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,n){var u=this;return(0,we.Z)(function*(){u.Uo(),u.Ko(),u.ko.cancel(),u.Co++,4!==e?u.ko.reset():n&&n.code===at.RESOURCE_EXHAUSTED?(xn(n.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),u.ko.Po()):n&&n.code===at.UNAUTHENTICATED&&3!==u.state&&(u.authCredentialsProvider.invalidateToken(),u.appCheckCredentialsProvider.invalidateToken()),null!==u.stream&&(u.Go(),u.stream.close(),u.stream=null),u.state=e,yield u.listener.no(n)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([u,f])=>{this.Co===n&&this.jo(u,f)},u=>{e(()=>{const f=new Rt(at.UNKNOWN,"Fetching auth token failed: "+u.message);return this.zo(f)})})}jo(e,n){const u=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{u(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(f=>{u(()=>this.zo(f))}),this.stream.onMessage(f=>{u(()=>this.onMessage(f))})}Oo(){var e=this;this.state=5,this.ko.vo((0,we.Z)(function*(){e.state=0,e.start()}))}zo(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mg extends a_{constructor(e,n,u,f,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,u,f,w),this.Tt=_}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=function lw(a,e){let n;if("targetChange"in e){const u="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:$t(),f=e.targetChange.targetIds||[],_=function(H,q){return H.yt?(tn(void 0===q||"string"==typeof q),D.fromBase64String(q||"")):(tn(void 0===q||q instanceof Uint8Array),D.fromUint8Array(q||new Uint8Array))}(a,e.targetChange.resumeToken),w=e.targetChange.cause,O=w&&function(H){const q=void 0===H.code?at.UNKNOWN:Cm(H.code);return new Rt(q,H.message||"")}(w);n=new Wp(u,f,_,O||null)}else if("documentChange"in e){const u=e.documentChange,f=su(a,u.document.name),_=Ns(u.document.updateTime),w=u.document.createTime?Ns(u.document.createTime):wn.min(),O=new As({mapValue:{fields:u.document.fields}}),H=Jr.newFoundDocument(f,_,w,O);n=new Sf(u.targetIds||[],u.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const u=e.documentDelete,f=su(a,u.document),_=u.readTime?Ns(u.readTime):wn.min(),w=Jr.newNoDocument(f,_);n=new Sf([],u.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const u=e.documentRemove,f=su(a,u.document);n=new Sf([],u.removedTargetIds||[],f,null)}else{if(!("filter"in e))return $t();{const u=e.filter,_=new aw(u.count||0);n=new Af(u.targetId,_)}}var H;return n}(this.Tt,e),u=function(f){if(!("targetChange"in f))return wn.min();const _=f.targetChange;return _.targetIds&&_.targetIds.length?wn.min():_.readTime?Ns(_.readTime):wn.min()}(e);return this.listener.Ho(n,u)}Jo(e){const n={};n.database=Th(this.Tt),n.addTarget=function(f,_){let w;const O=_.target;return w=qu(O)?{documents:Rm(f,O)}:{query:xm(f,O)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=Kp(f,_.resumeToken):_.snapshotVersion.compareTo(wn.min())>0&&(w.readTime=Ju(f,_.snapshotVersion.toTimestamp())),w}(this.Tt,e);const u=function I0(a,e){const n=function(u,f){switch(f){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $t()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);u&&(n.labels=u),this.qo(n)}Yo(e){const n={};n.database=Th(this.Tt),n.removeTarget=e,this.qo(n)}}class ic extends a_{constructor(e,n,u,f,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,u,f,w),this.Tt=_,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(tn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=function oE(a,e){return a&&a.length>0?(tn(void 0!==e),a.map(n=>function(u,f){let _=Ns(u.updateTime?u.updateTime:f);return _.isEqual(wn.min())&&(_=Ns(f)),new _d(_,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),u=Ns(e.commitTime);return this.listener.eu(u,n)}return tn(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Th(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(u=>Mf(this.Tt,u))};this.qo(n)}}class l_ extends class{}{constructor(e,n,u,f){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=u,this.Tt=f,this.iu=!1}ru(){if(this.iu)throw new Rt(at.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,u){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.lo(e,n,u,f,_)).catch(f=>{throw"FirebaseError"===f.name?(f.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Rt(at.UNKNOWN,f.toString())})}mo(e,n,u,f){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,w])=>this.connection.mo(e,n,u,_,w,f)).catch(_=>{throw"FirebaseError"===_.name?(_.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Rt(at.UNKNOWN,_.toString())})}terminate(){this.iu=!0}}class z0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(xn(n),this.cu=!1):It("OnlineStateTracker",n)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class W0{constructor(e,n,u,f,_){var w=this;this.localStore=e,this.datastore=n,this.asyncQueue=u,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=_,this.yu.Gr(O=>{u.enqueueAndForget((0,we.Z)(function*(){var H;ou(w)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,we.Z)(function*(q){const ae=qt(q);ae.mu.add(4),yield sc(ae),ae.pu.set("Unknown"),ae.mu.delete(4),yield $h(ae)}),function(q){return H.apply(this,arguments)})(w))}))}),this.pu=new z0(u,f)}}function $h(a){return _g.apply(this,arguments)}function _g(){return _g=(0,we.Z)(function*(a){if(ou(a))for(const e of a.gu)yield e(!0)}),_g.apply(this,arguments)}function sc(a){return jf.apply(this,arguments)}function jf(){return jf=(0,we.Z)(function*(a){for(const e of a.gu)yield e(!1)}),jf.apply(this,arguments)}function yg(a,e){const n=qt(a);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),Yy(n)?vg(n):ac(n).Mo()&&Va(n,e))}function Hf(a,e){const n=qt(a),u=ac(n);n.wu.delete(e),u.Mo()&&u_(n,e),0===n.wu.size&&(u.Mo()?u.Bo():ou(n)&&n.pu.set("Unknown"))}function Va(a,e){a.Iu.Ot(e.targetId),ac(a).Jo(e)}function u_(a,e){a.Iu.Ot(e),ac(a).Yo(e)}function vg(a){a.Iu=new E0({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>a.wu.get(e)||null}),ac(a).start(),a.pu.au()}function Yy(a){return ou(a)&&!ac(a).$o()&&a.wu.size>0}function ou(a){return 0===qt(a).mu.size}function bg(a){a.Iu=void 0}function K0(a){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,we.Z)(function*(a){a.wu.forEach((e,n)=>{Va(a,e)})}),Eg.apply(this,arguments)}function q0(a,e){return zh.apply(this,arguments)}function zh(){return zh=(0,we.Z)(function*(a,e){bg(a),Yy(a)?(a.pu.fu(e),vg(a)):a.pu.set("Unknown")}),zh.apply(this,arguments)}function Zy(a,e,n){return wg.apply(this,arguments)}function wg(){return wg=(0,we.Z)(function*(a,e,n){if(a.pu.set("Online"),e instanceof Wp&&2===e.state&&e.cause)try{yield(u=(0,we.Z)(function*(f,_){const w=_.cause;for(const O of _.targetIds)f.wu.has(O)&&(yield f.remoteSyncer.rejectListen(O,w),f.wu.delete(O),f.Iu.removeTarget(O))}),function(f,_){return u.apply(this,arguments)})(a,e)}catch(u){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),u),yield Pd(a,u)}else if(e instanceof Sf?a.Iu.Qt(e):e instanceof Af?a.Iu.Zt(e):a.Iu.Wt(e),!n.isEqual(wn.min()))try{const u=yield $y(a.localStore);n.compareTo(u)>=0&&(yield function(f,_){const w=f.Iu.ee(_);return w.targetChanges.forEach((O,H)=>{if(O.resumeToken.approximateByteSize()>0){const q=f.wu.get(H);q&&f.wu.set(H,q.withResumeToken(O.resumeToken,_))}}),w.targetMismatches.forEach(O=>{const H=f.wu.get(O);if(!H)return;f.wu.set(O,H.withResumeToken(D.EMPTY_BYTE_STRING,H.snapshotVersion)),u_(f,O);const q=new bd(H.target,O,1,H.sequenceNumber);Va(f,q)}),f.remoteSyncer.applyRemoteEvent(w)}(a,n))}catch(u){It("RemoteStore","Failed to raise snapshot:",u),yield Pd(a,u)}var u}),wg.apply(this,arguments)}function Pd(a,e,n){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,we.Z)(function*(a,e,n){if(!qo(e))throw e;a.mu.add(1),yield sc(a),a.pu.set("Offline"),n||(n=()=>$y(a.localStore)),a.asyncQueue.enqueueRetryable((0,we.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield n(),a.mu.delete(1),yield $h(a)}))}),Jy.apply(this,arguments)}function Y0(a,e){return e().catch(n=>Pd(a,n,e))}function $f(a){return c_.apply(this,arguments)}function c_(){return c_=(0,we.Z)(function*(a){const e=qt(a),n=Ga(e);let u=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Z0(e);)try{const f=yield nc(e.localStore,u);if(null===f){0===e._u.length&&n.Bo();break}u=f.batchId,Tu(e,f)}catch(f){yield Pd(e,f)}Dg(e)&&Qy(e)}),c_.apply(this,arguments)}function Z0(a){return ou(a)&&a._u.length<10}function Tu(a,e){a._u.push(e);const n=Ga(a);n.Mo()&&n.Xo&&n.tu(e.mutations)}function Dg(a){return ou(a)&&!Ga(a).$o()&&a._u.length>0}function Qy(a){Ga(a).start()}function J0(a){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,we.Z)(function*(a){Ga(a).su()}),Ig.apply(this,arguments)}function Xy(a){return d_.apply(this,arguments)}function d_(){return d_=(0,we.Z)(function*(a){const e=Ga(a);for(const n of a._u)e.tu(n.mutations)}),d_.apply(this,arguments)}function dE(a,e,n){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,we.Z)(function*(a,e,n){const u=a._u.shift(),f=Vm.from(u,e,n);yield Y0(a,()=>a.remoteSyncer.applySuccessfulWrite(f)),yield $f(a)}),Wh.apply(this,arguments)}function hE(a,e){return ev.apply(this,arguments)}function ev(){return ev=(0,we.Z)(function*(a,e){var n;e&&Ga(a).Xo&&(yield(n=(0,we.Z)(function*(u,f){if(Hp(_=f.code)&&_!==at.ABORTED){const w=u._u.shift();Ga(u).Fo(),yield Y0(u,()=>u.remoteSyncer.rejectFailedWrite(w.batchId,f)),yield $f(u)}var _}),function(u,f){return n.apply(this,arguments)})(a,e)),Dg(a)&&Qy(a)}),ev.apply(this,arguments)}function zf(a,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,we.Z)(function*(a,e){const n=qt(a);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const u=ou(n);n.mu.add(3),yield sc(n),u&&n.pu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),yield $h(n)}),Wf.apply(this,arguments)}function oc(a,e){return h_.apply(this,arguments)}function h_(){return h_=(0,we.Z)(function*(a,e){const n=qt(a);e?(n.mu.delete(2),yield $h(n)):e||(n.mu.add(2),yield sc(n),n.pu.set("Unknown"))}),h_.apply(this,arguments)}function ac(a){return a.Tu||(a.Tu=function(e,n,u){const f=qt(e);return f.ru(),new mg(n,f.connection,f.authCredentials,f.appCheckCredentials,f.Tt,u)}(a.datastore,a.asyncQueue,{Xr:K0.bind(null,a),no:q0.bind(null,a),Ho:Zy.bind(null,a)}),a.gu.push(function(){var e=(0,we.Z)(function*(n){n?(a.Tu.Fo(),Yy(a)?vg(a):a.pu.set("Unknown")):(yield a.Tu.stop(),bg(a))});return function(n){return e.apply(this,arguments)}}())),a.Tu}function Ga(a){return a.Eu||(a.Eu=function(e,n,u){const f=qt(e);return f.ru(),new ic(n,f.connection,f.authCredentials,f.appCheckCredentials,f.Tt,u)}(a.datastore,a.asyncQueue,{Xr:J0.bind(null,a),no:hE.bind(null,a),nu:Xy.bind(null,a),eu:dE.bind(null,a)}),a.gu.push(function(){var e=(0,we.Z)(function*(n){n?(a.Eu.Fo(),yield $f(a)):(yield a.Eu.stop(),a._u.length>0&&(It("RemoteStore",`Stopping write stream with ${a._u.length} pending writes`),a._u=[]))});return function(n){return e.apply(this,arguments)}}())),a.Eu}class Kf{constructor(e,n,u,f,_){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=u,this.op=f,this.removalCallback=_,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,n,u,f,_){const w=Date.now()+u,O=new Kf(e,n,w,f,_);return O.start(u),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(at.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gc(a,e){if(xn("AsyncQueue",`${e}: ${a}`),qo(a))return new Rt(at.UNAVAILABLE,`${e}: ${a}`);throw a}class kd{constructor(e){this.comparator=e?(n,u)=>e(n,u)||on.comparator(n.key,u.key):(n,u)=>on.comparator(n.key,u.key),this.keyedMap=Tc(),this.sortedSet=new Ss(this.comparator)}static emptySet(e){return new kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,u)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),u=e.sortedSet.getIterator();for(;n.hasNext();){const f=n.getNext().key,_=u.getNext().key;if(!f.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const u=new kd;return u.comparator=this.comparator,u.keyedMap=e,u.sortedSet=n,u}}class f_{constructor(){this.Au=new Ss(on.comparator)}track(e){const n=e.doc.key,u=this.Au.get(n);u?0!==e.type&&3===u.type?this.Au=this.Au.insert(n,e):3===e.type&&1!==u.type?this.Au=this.Au.insert(n,{type:u.type,doc:e.doc}):2===e.type&&2===u.type?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):2===e.type&&0===u.type?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):1===e.type&&0===u.type?this.Au=this.Au.remove(n):1===e.type&&2===u.type?this.Au=this.Au.insert(n,{type:1,doc:u.doc}):0===e.type&&1===u.type?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):$t():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,u)=>{e.push(u)}),e}}class jc{constructor(e,n,u,f,_,w,O,H,q){this.query=e,this.docs=n,this.oldDocs=u,this.docChanges=f,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=O,this.excludesMetadataChanges=H,this.hasCachedResults=q}static fromInitialDocuments(e,n,u,f,_){const w=[];return n.forEach(O=>{w.push({type:0,doc:O})}),new jc(e,n,kd.emptySet(n),w,u,f,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,u=e.docChanges;if(n.length!==u.length)return!1;for(let f=0;f<n.length;f++)if(n[f].type!==u[f].type||!n[f].doc.isEqual(u[f].doc))return!1;return!0}}class lc{constructor(){this.Pu=void 0,this.listeners=[]}}class Cg{constructor(){this.queries=new _u(e=>A(e),Ef),this.onlineState="Unknown",this.vu=new Set}}function Fd(a,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,we.Z)(function*(a,e){const n=qt(a),u=e.query;let f=!1,_=n.queries.get(u);if(_||(f=!0,_=new lc),f)try{_.Pu=yield n.onListen(u)}catch(w){const O=Gc(w,`Initialization of query '${v(e.query)}' failed`);return void e.onError(O)}n.queries.set(u,_),_.listeners.push(e),e.bu(n.onlineState),_.Pu&&e.Vu(_.Pu)&&g_(n)}),Hc.apply(this,arguments)}function p_(a,e){return qf.apply(this,arguments)}function qf(){return qf=(0,we.Z)(function*(a,e){const n=qt(a),u=e.query;let f=!1;const _=n.queries.get(u);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),f=0===_.listeners.length)}if(f)return n.queries.delete(u),n.onUnlisten(u)}),qf.apply(this,arguments)}function Yf(a,e){const n=qt(a);let u=!1;for(const f of e){const w=n.queries.get(f.query);if(w){for(const O of w.listeners)O.Vu(f)&&(u=!0);w.Pu=f}}u&&g_(n)}function Q0(a,e,n){const u=qt(a),f=u.queries.get(e);if(f)for(const _ of f.listeners)_.onError(n);u.queries.delete(e)}function g_(a){a.vu.forEach(e=>{e.next()})}class Ld{constructor(e,n,u){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=u||{}}Vu(e){if(!this.options.includeMetadataChanges){const u=[];for(const f of e.docChanges)3!==f.type&&u.push(f);e=new jc(e.query,e.docs,e.oldDocs,u,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){return!e.fromCache||(!this.options.$u||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class X0{constructor(e,n){this.Mu=e,this.byteLength=n}Ou(){return"metadata"in this.Mu}}class eb{constructor(e){this.Tt=e}Zi(e){return su(this.Tt,e)}Xi(e){return e.metadata.exists?Mm(this.Tt,e.document,!1):Jr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Ns(e)}}class fE{constructor(e,n,u){this.Fu=e,this.localStore=n,this.Tt=u,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tv(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const u=mr.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(u.get(u.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,u=new eb(this.Tt);for(const f of e)if(f.metadata.queries){const _=u.Zi(f.metadata.name);for(const w of f.metadata.queries){const O=(n.get(w)||yr()).add(_);n.set(w,O)}}return n}complete(){var e=this;return(0,we.Z)(function*(){const n=yield function j0(a,e,n,u){return hg.apply(this,arguments)}(e.localStore,new eb(e.Tt),e.documents,e.Fu.id),u=e.Lu(e.documents);for(const f of e.queries)yield H0(e.localStore,f,u.get(f.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:n}})()}}function tv(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class nv{constructor(e){this.key=e}}class rv{constructor(e){this.key=e}}class iv{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=yr(),this.mutatedKeys=yr(),this.ju=Q(e),this.zu=new kd(this.ju)}get Wu(){return this.Ku}Hu(e,n){const u=n?n.Ju:new f_,f=n?n.zu:this.zu;let _=n?n.mutatedKeys:this.mutatedKeys,w=f,O=!1;const H="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,q="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((ae,Oe)=>{const Ze=f.get(ae),Ot=E(this.query,Oe)?Oe:null,Gt=!!Ze&&this.mutatedKeys.has(Ze.key),dn=!!Ot&&(Ot.hasLocalMutations||this.mutatedKeys.has(Ot.key)&&Ot.hasCommittedMutations);let An=!1;Ze&&Ot?Ze.data.isEqual(Ot.data)?Gt!==dn&&(u.track({type:3,doc:Ot}),An=!0):this.Yu(Ze,Ot)||(u.track({type:2,doc:Ot}),An=!0,(H&&this.ju(Ot,H)>0||q&&this.ju(Ot,q)<0)&&(O=!0)):!Ze&&Ot?(u.track({type:0,doc:Ot}),An=!0):Ze&&!Ot&&(u.track({type:1,doc:Ze}),An=!0,(H||q)&&(O=!0)),An&&(Ot?(w=w.add(Ot),_=dn?_.add(ae):_.delete(ae)):(w=w.delete(ae),_=_.delete(ae)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ae="F"===this.query.limitType?w.last():w.first();w=w.delete(ae.key),_=_.delete(ae.key),u.track({type:1,doc:ae})}return{zu:w,Ju:u,Li:O,mutatedKeys:_}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,u){const f=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const _=e.Ju.Ru();_.sort((q,ae)=>function(Oe,Ze){const Ot=Gt=>{switch(Gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t()}};return Ot(Oe)-Ot(Ze)}(q.type,ae.type)||this.ju(q.doc,ae.doc)),this.Zu(u);const w=n?this.Xu():[],O=0===this.Qu.size&&this.current?1:0,H=O!==this.Gu;return this.Gu=O,0!==_.length||H?{snapshot:new jc(this.query,e.zu,f,_,e.mutatedKeys,0===O,H,!1,!!u&&u.resumeToken.approximateByteSize()>0),tc:w}:{tc:w}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new f_,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=yr(),this.zu.forEach(u=>{this.ec(u.key)&&(this.Qu=this.Qu.add(u.key))});const n=[];return e.forEach(u=>{this.Qu.has(u)||n.push(new rv(u))}),this.Qu.forEach(u=>{e.has(u)||n.push(new nv(u))}),n}nc(e){this.Ku=e.Yi,this.Qu=yr();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return jc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class sv{constructor(e,n,u){this.query=e,this.targetId=n,this.view=u}}class tb{constructor(e){this.key=e,this.ic=!1}}class nb{constructor(e,n,u,f,_,w){this.localStore=e,this.remoteStore=n,this.eventManager=u,this.sharedClientState=f,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.rc={},this.oc=new _u(O=>A(O),Ef),this.uc=new Map,this.cc=new Set,this.ac=new Ss(on.comparator),this.hc=new Map,this.lc=new ag,this.fc={},this.dc=new Map,this._c=Od.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Zf(a,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,we.Z)(function*(a,e){const n=Qh(a);let u,f;const _=n.oc.get(e);if(_)u=_.targetId,n.sharedClientState.addLocalQueryTarget(u),f=_.view.sc();else{const w=yield Ba(n.localStore,ho(e));n.isPrimaryClient&&yg(n.remoteStore,w);const O=n.sharedClientState.addLocalQueryTarget(w.targetId);u=w.targetId,f=yield Kh(n,e,u,"current"===O,w.resumeToken)}return f}),Tg.apply(this,arguments)}function Kh(a,e,n,u,f){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,we.Z)(function*(a,e,n,u,f){a.mc=(Oe,Ze,Ot)=>{return(Gt=(0,we.Z)(function*(dn,An,Ai,Hs){let Nr=An.view.Hu(Ai);Nr.Li&&(Nr=yield Vf(dn.localStore,An.query,!1).then(({documents:ei})=>An.view.Hu(ei,Nr)));const xs=Hs&&Hs.targetChanges.get(An.targetId),Dr=An.view.applyChanges(Nr,dn.isPrimaryClient,xs);return no(dn,An.targetId,Dr.tc),Dr.snapshot}),function(dn,An,Ai,Hs){return Gt.apply(this,arguments)})(a,Oe,Ze,Ot);var Gt};const _=yield Vf(a.localStore,e,!0),w=new iv(e,_.Yi),O=w.Hu(_.documents),H=Ch.createSynthesizedTargetChangeForCurrentChange(n,u&&"Offline"!==a.onlineState,f),q=w.applyChanges(O,a.isPrimaryClient,H);no(a,n,q.tc);const ae=new sv(e,n,w);return a.oc.set(e,ae),a.uc.has(n)?a.uc.get(n).push(e):a.uc.set(n,[e]),q.snapshot}),Jf.apply(this,arguments)}function ov(a,e){return m_.apply(this,arguments)}function m_(){return m_=(0,we.Z)(function*(a,e){const n=qt(a),u=n.oc.get(e),f=n.uc.get(u.targetId);if(f.length>1)return n.uc.set(u.targetId,f.filter(_=>!Ef(_,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(u.targetId),n.sharedClientState.isActiveQueryTarget(u.targetId)||(yield rl(n.localStore,u.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(u.targetId),Hf(n.remoteStore,u.targetId),Pi(n,u.targetId)}).catch(Eo))):(Pi(n,u.targetId),yield rl(n.localStore,u.targetId,!0))}),m_.apply(this,arguments)}function Sg(){return Sg=(0,we.Z)(function*(a,e,n){const u=ep(a);try{const f=yield function(_,w){const O=qt(_),H=dr.now(),q=w.reduce((Ze,Ot)=>Ze.add(Ot.key),yr());let ae,Oe;return O.persistence.runTransaction("Locally write mutations","readwrite",Ze=>{let Ot=wa(),Gt=yr();return O.ji.getEntries(Ze,q).next(dn=>{Ot=dn,Ot.forEach((An,Ai)=>{Ai.isValidDocument()||(Gt=Gt.add(An))})}).next(()=>O.localDocuments.getOverlayedDocuments(Ze,Ot)).next(dn=>{ae=dn;const An=[];for(const Ai of w){const Hs=_y(Ai,ae.get(Ai.key).overlayedDocument);null!=Hs&&An.push(new Zu(Ai.key,Hs,vf(Hs.value.mapValue),wi.exists(!0)))}return O.mutationQueue.addMutationBatch(Ze,H,An,w)}).next(dn=>{Oe=dn;const An=dn.applyToLocalDocumentSet(ae,Gt);return O.documentOverlayCache.saveOverlays(Ze,dn.batchId,An)})}).then(()=>({batchId:Oe.batchId,changes:Ih(ae)}))}(u.localStore,e);u.sharedClientState.addPendingMutation(f.batchId),function(_,w,O){let H=_.fc[_.currentUser.toKey()];H||(H=new Ss(mn)),H=H.insert(w,O),_.fc[_.currentUser.toKey()]=H}(u,f.batchId,n),yield zi(u,f.changes),yield $f(u.remoteStore)}catch(f){const _=Gc(f,"Failed to persist write");n.reject(_)}}),Sg.apply(this,arguments)}function $c(a,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,we.Z)(function*(a,e){const n=qt(a);try{const u=yield function G0(a,e){const n=qt(a),u=e.snapshotVersion;let f=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=n.ji.newChangeBuffer({trackRemovals:!0});f=n.Ki;const O=[];e.targetChanges.forEach((ae,Oe)=>{const Ze=f.get(Oe);if(!Ze)return;O.push(n.Ns.removeMatchingKeys(_,ae.removedDocuments,Oe).next(()=>n.Ns.addMatchingKeys(_,ae.addedDocuments,Oe)));let Ot=Ze.withSequenceNumber(_.currentSequenceNumber);var Gt,dn,An;e.targetMismatches.has(Oe)?Ot=Ot.withResumeToken(D.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):ae.resumeToken.approximateByteSize()>0&&(Ot=Ot.withResumeToken(ae.resumeToken,u)),f=f.insert(Oe,Ot),dn=Ot,An=ae,(0===(Gt=Ze).resumeToken.approximateByteSize()||dn.snapshotVersion.toMicroseconds()-Gt.snapshotVersion.toMicroseconds()>=3e8||An.addedDocuments.size+An.modifiedDocuments.size+An.removedDocuments.size>0)&&O.push(n.Ns.updateTargetData(_,Ot))});let H=wa(),q=yr();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&O.push(n.persistence.referenceDelegate.updateLimboDocument(_,ae))}),O.push(r_(_,w,e.documentUpdates).next(ae=>{H=ae.Hi,q=ae.Ji})),!u.isEqual(wn.min())){const ae=n.Ns.getLastRemoteSnapshotVersion(_).next(Oe=>n.Ns.setTargetsMetadata(_,_.currentSequenceNumber,u));O.push(ae)}return lt.waitFor(O).next(()=>w.apply(_)).next(()=>n.localDocuments.getLocalViewOfDocuments(_,H,q)).next(()=>H)}).then(_=>(n.Ki=f,_))}(n.localStore,e);e.targetChanges.forEach((f,_)=>{const w=n.hc.get(_);w&&(tn(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?w.ic=!0:f.modifiedDocuments.size>0?tn(w.ic):f.removedDocuments.size>0&&(tn(w.ic),w.ic=!1))}),yield zi(n,u,e)}catch(u){yield Eo(u)}}),Qf.apply(this,arguments)}function zc(a,e,n){const u=qt(a);if(u.isPrimaryClient&&0===n||!u.isPrimaryClient&&1===n){const f=[];u.oc.forEach((_,w)=>{const O=w.view.bu(e);O.snapshot&&f.push(O.snapshot)}),function(_,w){const O=qt(_);O.onlineState=w;let H=!1;O.queries.forEach((q,ae)=>{for(const Oe of ae.listeners)Oe.bu(w)&&(H=!0)}),H&&g_(O)}(u.eventManager,e),f.length&&u.rc.Ho(f),u.onlineState=e,u.isPrimaryClient&&u.sharedClientState.setOnlineState(e)}}function __(a,e,n){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,we.Z)(function*(a,e,n){const u=qt(a);u.sharedClientState.updateQueryState(e,"rejected",n);const f=u.hc.get(e),_=f&&f.key;if(_){let w=new Ss(on.comparator);w=w.insert(_,Jr.newNoDocument(_,wn.min()));const O=yr().add(_),H=new Tf(wn.min(),new Map,new Si(mn),w,O);yield $c(u,H),u.ac=u.ac.remove(_),u.hc.delete(e),wl(u)}else yield rl(u.localStore,e,!1).then(()=>Pi(u,e,n)).catch(Eo)}),Ag.apply(this,arguments)}function Og(a,e){return Su.apply(this,arguments)}function Su(){return Su=(0,we.Z)(function*(a,e){const n=qt(a),u=e.batch.batchId;try{const f=yield function V0(a,e){const n=qt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const f=e.batch.keys(),_=n.ji.newChangeBuffer({trackRemovals:!0});return function(w,O,H,q){const ae=H.batch,Oe=ae.keys();let Ze=lt.resolve();return Oe.forEach(Ot=>{Ze=Ze.next(()=>q.getEntry(O,Ot)).next(Gt=>{const dn=H.docVersions.get(Ot);tn(null!==dn),Gt.version.compareTo(dn)<0&&(ae.applyToRemoteDocument(Gt,H),Gt.isValidDocument()&&(Gt.setReadTime(H.commitVersion),q.addEntry(Gt)))})}),Ze.next(()=>w.mutationQueue.removeMutationBatch(O,ae))}(n,u,e,_).next(()=>_.apply(u)).next(()=>n.mutationQueue.performConsistencyCheck(u)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(u,f,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,function(w){let O=yr();for(let H=0;H<w.mutationResults.length;++H)w.mutationResults[H].transformResults.length>0&&(O=O.add(w.batch.mutations[H].key));return O}(e))).next(()=>n.localDocuments.getDocuments(u,f))})}(n.localStore,e);Bl(n,u,null),Vd(n,u),n.sharedClientState.updateMutationState(u,"acknowledged"),yield zi(n,f)}catch(f){yield Eo(f)}}),Su.apply(this,arguments)}function ib(a,e,n){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,we.Z)(function*(a,e,n){const u=qt(a);try{const f=yield function(_,w){const O=qt(_);return O.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let q;return O.mutationQueue.lookupMutationBatch(H,w).next(ae=>(tn(null!==ae),q=ae.keys(),O.mutationQueue.removeMutationBatch(H,ae))).next(()=>O.mutationQueue.performConsistencyCheck(H)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(H,q,w)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,q)).next(()=>O.localDocuments.getDocuments(H,q))})}(u.localStore,e);Bl(u,e,n),Vd(u,e),u.sharedClientState.updateMutationState(e,"rejected",n),yield zi(u,f)}catch(f){yield Eo(f)}}),Ud.apply(this,arguments)}function Bd(){return Bd=(0,we.Z)(function*(a,e){const n=qt(a);ou(n.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const u=yield function(_){const w=qt(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>w.mutationQueue.getHighestUnacknowledgedBatchId(O))}(n.localStore);if(-1===u)return void e.resolve();const f=n.dc.get(u)||[];f.push(e),n.dc.set(u,f)}catch(u){const f=Gc(u,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),Bd.apply(this,arguments)}function Vd(a,e){(a.dc.get(e)||[]).forEach(n=>{n.resolve()}),a.dc.delete(e)}function Bl(a,e,n){const u=qt(a);let f=u.fc[u.currentUser.toKey()];if(f){const _=f.get(e);_&&(n?_.reject(n):_.resolve(),f=f.remove(e)),u.fc[u.currentUser.toKey()]=f}}function Pi(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const u of a.uc.get(e))a.oc.delete(u),n&&a.rc.gc(u,n);a.uc.delete(e),a.isPrimaryClient&&a.lc.ds(e).forEach(u=>{a.lc.containsKey(u)||qh(a,u)})}function qh(a,e){a.cc.delete(e.path.canonicalString());const n=a.ac.get(e);null!==n&&(Hf(a.remoteStore,n),a.ac=a.ac.remove(e),a.hc.delete(n),wl(a))}function no(a,e,n){for(const u of n)u instanceof nv?(a.lc.addReference(u.key,e),Gd(a,u)):u instanceof rv?(It("SyncEngine","Document no longer in limbo: "+u.key),a.lc.removeReference(u.key,e),a.lc.containsKey(u.key)||qh(a,u.key)):$t()}function Gd(a,e){const n=e.key,u=n.path.canonicalString();a.ac.get(n)||a.cc.has(u)||(It("SyncEngine","New document in limbo: "+n),a.cc.add(u),wl(a))}function wl(a){for(;a.cc.size>0&&a.ac.size<a.maxConcurrentLimboResolutions;){const e=a.cc.values().next().value;a.cc.delete(e);const n=new on(mr.fromString(e)),u=a._c.next();a.hc.set(u,new tb(n)),a.ac=a.ac.insert(n,u),yg(a.remoteStore,new bd(ho(Ic(n.path)),u,2,ao.at))}}function zi(a,e,n){return au.apply(this,arguments)}function au(){return au=(0,we.Z)(function*(a,e,n){const u=qt(a),f=[],_=[],w=[];var O;u.oc.isEmpty()||(u.oc.forEach((O,H)=>{w.push(u.mc(H,e,n).then(q=>{if((q||n)&&u.isPrimaryClient&&u.sharedClientState.updateQueryState(H.targetId,q?.fromCache?"not-current":"current"),q){f.push(q);const ae=El.Ni(H.targetId,q);_.push(ae)}}))}),yield Promise.all(w),u.rc.Ho(f),yield(O=(0,we.Z)(function*(H,q){const ae=qt(H);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",Oe=>lt.forEach(q,Ze=>lt.forEach(Ze.Ci,Ot=>ae.persistence.referenceDelegate.addReference(Oe,Ze.targetId,Ot)).next(()=>lt.forEach(Ze.xi,Ot=>ae.persistence.referenceDelegate.removeReference(Oe,Ze.targetId,Ot)))))}catch(Oe){if(!qo(Oe))throw Oe;It("LocalStore","Failed to update sequence numbers: "+Oe)}for(const Oe of q){const Ze=Oe.targetId;if(!Oe.fromCache){const Ot=ae.Ki.get(Ze),dn=Ot.withLastLimboFreeSnapshotVersion(Ot.snapshotVersion);ae.Ki=ae.Ki.insert(Ze,dn)}}}),function(H,q){return O.apply(this,arguments)})(u.localStore,_))}),au.apply(this,arguments)}function Yh(a,e){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,we.Z)(function*(a,e){const n=qt(a);if(!n.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const u=yield Hy(n.localStore,e);n.currentUser=e,(f=n).dc.forEach(w=>{w.forEach(O=>{O.reject(new Rt(at.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.dc.clear(),n.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),yield zi(n,u.Wi)}var f}),Vl.apply(this,arguments)}function Wc(a,e){const n=qt(a),u=n.hc.get(e);if(u&&u.ic)return yr().add(u.key);{let f=yr();const _=n.uc.get(e);if(!_)return f;for(const w of _){const O=n.oc.get(w);f=f.unionWith(O.view.Wu)}return f}}function jd(a,e){return as.apply(this,arguments)}function as(){return as=(0,we.Z)(function*(a,e){const n=qt(a),u=yield Vf(n.localStore,e.query,!0),f=e.view.nc(u);return n.isPrimaryClient&&no(n,e.targetId,f.tc),f}),as.apply(this,arguments)}function Hd(a,e){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,we.Z)(function*(a,e){const n=qt(a);return Fh(n.localStore,e).then(u=>zi(n,u))}),Kc.apply(this,arguments)}function Zh(a,e,n,u){return qc.apply(this,arguments)}function qc(){return qc=(0,we.Z)(function*(a,e,n,u){const f=qt(a),_=yield function(w,O){const H=qt(w),q=qt(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",ae=>q.An(ae,O).next(Oe=>Oe?H.localDocuments.getDocuments(ae,Oe):lt.resolve(null)))}(f.localStore,e);var O;null!==_?("pending"===n?yield $f(f.remoteStore):"acknowledged"===n||"rejected"===n?(Bl(f,e,u||null),Vd(f,e),O=e,qt(qt(f.localStore).mutationQueue).Pn(O)):$t(),yield zi(f,_)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),qc.apply(this,arguments)}function Ng(){return Ng=(0,we.Z)(function*(a,e){const n=qt(a);if(Qh(n),ep(n),!0===e&&!0!==n.wc){const u=n.sharedClientState.getAllActiveQueryTargets(),f=yield y_(n,u.toArray());n.wc=!0,yield oc(n.remoteStore,!0);for(const _ of f)yg(n.remoteStore,_)}else if(!1===e&&!1!==n.wc){const u=[];let f=Promise.resolve();n.uc.forEach((_,w)=>{n.sharedClientState.isLocalQueryTarget(w)?u.push(w):f=f.then(()=>(Pi(n,w),rl(n.localStore,w,!0))),Hf(n.remoteStore,w)}),yield f,yield y_(n,u),function(_){const w=qt(_);w.hc.forEach((O,H)=>{Hf(w.remoteStore,H)}),w.lc._s(),w.hc=new Map,w.ac=new Ss(on.comparator)}(n),n.wc=!1,yield oc(n.remoteStore,!1)}}),Ng.apply(this,arguments)}function y_(a,e,n){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,we.Z)(function*(a,e,n){const u=qt(a),f=[],_=[];for(const w of e){let O;const H=u.uc.get(w);if(H&&0!==H.length){O=yield Ba(u.localStore,ho(H[0]));for(const q of H){const ae=u.oc.get(q),Oe=yield jd(u,ae);Oe.snapshot&&_.push(Oe.snapshot)}}else{const q=yield Cu(u.localStore,w);O=yield Ba(u.localStore,q),yield Kh(u,Yc(q),w,!1,O.resumeToken)}f.push(O)}return u.rc.Ho(_),f}),Xf.apply(this,arguments)}function Yc(a){return Im(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function lv(a){const e=qt(a);return qt(qt(e.localStore).persistence).Si()}function Jh(a,e,n,u){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,we.Z)(function*(a,e,n,u){const f=qt(a);if(f.wc)return void It("SyncEngine","Ignoring unexpected query state notification.");const _=f.uc.get(e);if(_&&_.length>0)switch(n){case"current":case"not-current":{const w=yield Fh(f.localStore,N(_[0])),O=Tf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,D.EMPTY_BYTE_STRING);yield zi(f,w,O);break}case"rejected":yield rl(f.localStore,e,!0),Pi(f,e,u);break;default:$t()}}),Mg.apply(this,arguments)}function uv(a,e,n){return $d.apply(this,arguments)}function $d(){return $d=(0,we.Z)(function*(a,e,n){const u=Qh(a);if(u.wc){for(const f of e){if(u.uc.has(f)){It("SyncEngine","Adding an already active target "+f);continue}const _=yield Cu(u.localStore,f),w=yield Ba(u.localStore,_);yield Kh(u,Yc(_),w.targetId,!1,w.resumeToken),yg(u.remoteStore,w)}for(const f of n)u.uc.has(f)&&(yield rl(u.localStore,f,!1).then(()=>{Hf(u.remoteStore,f),Pi(u,f)}).catch(Eo))}}),$d.apply(this,arguments)}function Qh(a){const e=qt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=$c.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__.bind(null,e),e.rc.Ho=Yf.bind(null,e.eventManager),e.rc.gc=Q0.bind(null,e.eventManager),e}function ep(a){const e=qt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Og.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ib.bind(null,e),e}class Rg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,we.Z)(function*(){n.Tt=xd(e.databaseInfo.databaseId),n.sharedClientState=n.Ic(e),n.persistence=n.Tc(e),yield n.persistence.start(),n.localStore=n.Ec(e),n.gcScheduler=n.Ac(e,n.localStore),n.indexBackfillerScheduler=n.Rc(e,n.localStore)})()}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return Bf(this.persistence,new jy,e.initialUser,this.Tt)}Tc(e){return new Gy(Rd.qs,this.Tt)}Ic(e){return new $0}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tp extends Rg{constructor(e,n,u){super(),this.Pc=e,this.cacheSizeBytes=n,this.forceOwnership=u,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,u=this;return(0,we.Z)(function*(){yield n().call(u,e),yield u.Pc.initialize(u,e),yield ep(u.Pc.syncEngine),yield $f(u.Pc.remoteStore),yield u.persistence.di(()=>(u.gcScheduler&&!u.gcScheduler.started&&u.gcScheduler.start(),u.indexBackfillerScheduler&&!u.indexBackfillerScheduler.started&&u.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return Bf(this.persistence,new jy,e.initialUser,this.Tt)}Ac(e,n){return new Zm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Rc(e,n){const u=new Qa(n,this.persistence);return new Ja(e.asyncQueue,u)}Tc(e){const n=ug(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Qo.withCacheSize(this.cacheSizeBytes):Qo.DEFAULT;return new t_(this.synchronizeTabs,n,e.clientId,u,e.asyncQueue,il(),Vc(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new $0}}class xg extends tp{constructor(e,n){super(e,n,!1),this.Pc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,u=this;return(0,we.Z)(function*(){yield n().call(u,e);const f=u.Pc.syncEngine;u.sharedClientState instanceof pg&&(u.sharedClientState.syncEngine={Br:Zh.bind(null,f),Lr:Jh.bind(null,f),qr:uv.bind(null,f),Si:lv.bind(null,f),Fr:Hd.bind(null,f)},yield u.sharedClientState.start()),yield u.persistence.di(function(){var _=(0,we.Z)(function*(w){yield function av(a,e){return Ng.apply(this,arguments)}(u.Pc.syncEngine,w),u.gcScheduler&&(w&&!u.gcScheduler.started?u.gcScheduler.start():w||u.gcScheduler.stop()),u.indexBackfillerScheduler&&(w&&!u.indexBackfillerScheduler.started?u.indexBackfillerScheduler.start():w||u.indexBackfillerScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}Ic(e){const n=il();if(!pg.C(n))throw new Rt(at.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const u=ug(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pg(n,e.asyncQueue,u,e.clientId,e.initialUser)}}class Pg{initialize(e,n){var u=this;return(0,we.Z)(function*(){u.localStore||(u.localStore=e.localStore,u.sharedClientState=e.sharedClientState,u.datastore=u.createDatastore(n),u.remoteStore=u.createRemoteStore(n),u.eventManager=u.createEventManager(n),u.syncEngine=u.createSyncEngine(n,!e.synchronizeTabs),u.sharedClientState.onlineStateHandler=f=>zc(u.syncEngine,f,1),u.remoteStore.remoteSyncer.handleCredentialChange=Yh.bind(null,u.syncEngine),yield oc(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cg}createDatastore(e){const n=xd(e.databaseInfo.databaseId),u=new Gh(e.databaseInfo);return new l_(e.authCredentials,e.appCheckCredentials,u,n)}createRemoteStore(e){return n=this.localStore,u=this.datastore,f=e.asyncQueue,_=O=>zc(this.syncEngine,O,0),w=ea.C()?new ea:new Uh,new W0(n,u,f,_,w);var n,u,f,_,w}createSyncEngine(e,n){return function(u,f,_,w,O,H,q){const ae=new nb(u,f,_,w,O,H);return q&&(ae.wc=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,we.Z)(function*(n){const u=qt(n);It("RemoteStore","RemoteStore shutting down."),u.mu.add(5),yield sc(u),u.yu.shutdown(),u.pu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Xh(a,e=10240){let n=0;return{read:()=>(0,we.Z)(function*(){if(n<a.byteLength){const u={value:a.slice(n,n+e),done:!1};return n+=e,u}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class uc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class kg{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new ci,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(u=>{u&&u.Ou()?this.metadata.resolve(u.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(u?.Mu)}`))},u=>this.metadata.reject(u))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,we.Z)(function*(){const n=yield e.Cc();if(null===n)return null;const u=e.Sc.decode(n),f=Number(u);isNaN(f)&&e.xc(`length string (${u}) is not valid number`);const _=yield e.Nc(f);return new X0(JSON.parse(_),n.length+f)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,we.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const n=e.kc();n<0&&e.xc("Reached the end of bundle when a length string is expected.");const u=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),u})()}Nc(e){var n=this;return(0,we.Z)(function*(){for(;n.buffer.length<e;)(yield n.$c())&&n.xc("Reached the end of bundle when more is expected.");const u=n.Sc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),u})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,we.Z)(function*(){const n=yield e.Vc.read();if(!n.done){const u=new Uint8Array(e.buffer.length+n.value.length);u.set(e.buffer),u.set(n.value,e.buffer.length),e.buffer=u}return n.done})()}}class dv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,we.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Rt(at.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield(f=(0,we.Z)(function*(_,w){const O=qt(_),H=Th(O.Tt)+"/documents",q={documents:w.map(Ot=>Nf(O.Tt,Ot))},ae=yield O.mo("BatchGetDocuments",H,q,w.length),Oe=new Map;ae.forEach(Ot=>{const Gt=function D0(a,e){return"found"in e?function(n,u){tn(!!u.found);const f=su(n,u.found.name),_=Ns(u.found.updateTime),w=u.found.createTime?Ns(u.found.createTime):wn.min(),O=new As({mapValue:{fields:u.found.fields}});return Jr.newFoundDocument(f,_,w,O)}(a,e):"missing"in e?function(n,u){tn(!!u.missing),tn(!!u.readTime);const f=su(n,u.missing),_=Ns(u.readTime);return Jr.newNoDocument(f,_)}(a,e):$t()}(O.Tt,Ot);Oe.set(Gt.key.toString(),Gt)});const Ze=[];return w.forEach(Ot=>{const Gt=Oe.get(Ot.toString());tn(!!Gt),Ze.push(Gt)}),Ze}),function(_,w){return f.apply(this,arguments)})(n.datastore,e);var f;return u.forEach(f=>n.recordVersion(f)),u})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var u;e.mutations.forEach(u=>{n.delete(u.key.toString())}),n.forEach((u,f)=>{const _=on.fromPath(f);e.mutations.push(new by(_,e.precondition(_)))}),yield(u=(0,we.Z)(function*(f,_){const w=qt(f),O=Th(w.Tt)+"/documents",H={writes:_.map(q=>Mf(w.Tt,q))};yield w.lo("Commit",O,H)}),function(f,_){return u.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw $t();n=wn.min()}const u=this.readVersions.get(e.key.toString());if(u){if(!n.isEqual(u))throw new Rt(at.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(wn.min())?wi.exists(!1):wi.updateTime(n):wi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(wn.min()))throw new Rt(at.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(n)}return wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ef{constructor(e,n,u,f,_){this.asyncQueue=e,this.datastore=n,this.options=u,this.updateFunction=f,this.deferred=_,this.Mc=u.maxAttempts,this.ko=new jh(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,we.Z)(function*(){const n=new dv(e.datastore),u=e.Fc(n);u&&u.then(f=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(f)}).catch(_=>{e.Bc(_)}))}).catch(f=>{e.Bc(f)})}))}Fc(e){try{const n=this.updateFunction(e);return!bi(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Hp(n)}return!1}}class Fg{constructor(e,n,u,f){var _=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=u,this.databaseInfo=f,this.user=ye.UNAUTHENTICATED,this.clientId=fa.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(u,function(){var w=(0,we.Z)(function*(O){It("FirestoreClient","Received user=",O.uid),yield _.authCredentialListener(O),_.user=O});return function(O){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(u,w=>(It("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rt(at.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(u){const f=Gc(u,"Failed to shutdown persistence");n.reject(f)}})),n.promise}}function Lg(a,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,we.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=yield a.getConfiguration();yield e.initialize(n);let u=n.initialUser;a.setCredentialChangeListener(function(){var f=(0,we.Z)(function*(_){u.isEqual(_)||(yield Hy(e.localStore,_),u=_)});return function(_){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=e}),Ug.apply(this,arguments)}function tf(a,e){return nf.apply(this,arguments)}function nf(){return nf=(0,we.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const n=yield rf(a);It("FirestoreClient","Initializing OnlineComponentProvider");const u=yield a.getConfiguration();yield e.initialize(n,u),a.setCredentialChangeListener(f=>zf(e.remoteStore,f)),a.setAppCheckTokenChangeListener((f,_)=>zf(e.remoteStore,_)),a.onlineComponents=e}),nf.apply(this,arguments)}function rf(a){return np.apply(this,arguments)}function np(){return np=(0,we.Z)(function*(a){return a.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield Lg(a,new Rg)),a.offlineComponents}),np.apply(this,arguments)}function rp(a){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,we.Z)(function*(a){return a.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield tf(a,new Pg)),a.onlineComponents}),Bg.apply(this,arguments)}function v_(a){return rf(a).then(e=>e.persistence)}function ip(a){return rf(a).then(e=>e.localStore)}function Vg(a){return rp(a).then(e=>e.remoteStore)}function sp(a){return rp(a).then(e=>e.syncEngine)}function Zc(a){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,we.Z)(function*(a){const e=yield rp(a),n=e.eventManager;return n.onListen=Zf.bind(null,e.syncEngine),n.onUnlisten=ov.bind(null,e.syncEngine),n}),Gg.apply(this,arguments)}function w_(a,e,n={}){const u=new ci;return a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(f,_,w,O,H){const q=new uc({next:Oe=>{_.enqueueAndForget(()=>p_(f,ae));const Ze=Oe.docs.has(w);!Ze&&Oe.fromCache?H.reject(new Rt(at.UNAVAILABLE,"Failed to get document because the client is offline.")):Ze&&Oe.fromCache&&O&&"server"===O.source?H.reject(new Rt(at.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Oe)},error:Oe=>H.reject(Oe)}),ae=new Ld(Ic(w.path),q,{includeMetadataChanges:!0,$u:!0});return Fd(f,ae)}(yield Zc(a),a.asyncQueue,e,n,u)})),u.promise}function Hg(a,e,n={}){const u=new ci;return a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(f,_,w,O,H){const q=new uc({next:Oe=>{_.enqueueAndForget(()=>p_(f,ae)),Oe.fromCache&&"server"===O.source?H.reject(new Rt(at.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Oe)},error:Oe=>H.reject(Oe)}),ae=new Ld(w,q,{includeMetadataChanges:!0,$u:!0});return Fd(f,ae)}(yield Zc(a),a.asyncQueue,e,n,u)})),u.promise}const Au=new Map;function Jc(a,e,n){if(!n)throw new Rt(at.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function cc(a,e,n,u){if(!0===e&&!0===u)throw new Rt(at.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function mv(a){if(!on.isDocumentKey(a))throw new Rt(at.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function op(a){if(on.isDocumentKey(a))throw new Rt(at.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function lu(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(n=a).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof a?"a function":$t()}function Er(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Rt(at.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lu(a);throw new Rt(at.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function $g(a,e){if(e<=0)throw new Rt(at.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class _v{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new Rt(at.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Rt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zd{constructor(e,n,u,f){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=u,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _v({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rt(at.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Rt(at.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _v(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new ml;switch(n.type){case"gapi":return new ch(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Rt(at.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Au.get(e);n&&(It("ComponentProvider","Removing Datastore"),Au.delete(e),n.terminate())}(this),Promise.resolve()}}class Qi{constructor(e,n,u){this.converter=n,this._key=u,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qi(this.firestore,e,this._key)}}class Uo{constructor(e,n,u){this.converter=n,this._query=u,this.type="query",this.firestore=e}withConverter(e){return new Uo(this.firestore,e,this._query)}}class Ou extends Uo{constructor(e,n,u){super(e,n,Ic(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qi(this.firestore,null,new on(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function zg(a,e,...n){if(a=(0,ze.m9)(a),Jc("collection","path",e),a instanceof zd){const u=mr.fromString(e,...n);return op(u),new Ou(a,null,u)}{if(!(a instanceof Qi||a instanceof Ou))throw new Rt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=a._path.child(mr.fromString(e,...n));return op(u),new Ou(a.firestore,null,u)}}function Rs(a,e,...n){if(a=(0,ze.m9)(a),1===arguments.length&&(e=fa.R()),Jc("doc","path",e),a instanceof zd){const u=mr.fromString(e,...n);return mv(u),new Qi(a,null,new on(u))}{if(!(a instanceof Qi||a instanceof Ou))throw new Rt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=a._path.child(mr.fromString(e,...n));return mv(u),new Qi(a.firestore,a instanceof Ou?a.converter:null,new on(u))}}function Wg(a,e){return a=(0,ze.m9)(a),e=(0,ze.m9)(e),(a instanceof Qi||a instanceof Ou)&&(e instanceof Qi||e instanceof Ou)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function Kg(a,e){return a=(0,ze.m9)(a),e=(0,ze.m9)(e),a instanceof Uo&&e instanceof Uo&&a.firestore===e.firestore&&Ef(a._query,e._query)&&a.converter===e.converter}class yv{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new jh(this,"async_queue_retry"),this.Hc=()=>{const n=Vc();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=Vc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=Vc();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new ci;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(n){if(!qo(n))throw n;It("AsyncQueue","Operation failed with retryable error: "+n)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(u=>{throw this.Qc=u,this.jc=!1,xn("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(u)),u}).then(u=>(this.jc=!1,u))));return this.qc=n,n}enqueueAfterDelay(e,n,u){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const f=Kf.createAndSchedule(this,e,n,u,_=>this.Xc(_));return this.Gc.push(f),f}Jc(){this.Qc&&$t()}verifyOperationInProgress(){}ta(){var e=this;return(0,we.Z)(function*(){let n;do{n=e.qc,yield n}while(n!==e.qc)})()}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,u)=>n.targetTimeMs-u.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function qg(a){return function(e,n){if("object"!=typeof e||null===e)return!1;const u=e;for(const f of["next","error","complete"])if(f in u&&"function"==typeof u[f])return!0;return!1}(a)}class vv{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,u){this._progressObserver={next:e,error:n,complete:u}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qi extends zd{constructor(e,n,u,f){super(e,n,u,f),this.type="firestore",this._queue=new yv,this._persistenceKey=f?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Di(this),this._firestoreClient.terminate()}}function js(a){return a._firestoreClient||Di(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function Di(a){var e;const n=a._freezeSettings(),u=(_=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new zu(a._databaseId,_,a._persistenceKey,(O=n).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var _,O;a._firestoreClient=new Fg(a._authCredentials,a._appCheckCredentials,a._queue,u)}function Xc(a,e,n){const u=new ci;return a.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Lg(a,n),yield tf(a,e),u.resolve()}catch(f){const _=f;if(!("FirebaseError"===(w=_).name?w.code===at.FAILED_PRECONDITION||w.code===at.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw _;Qn("Error enabling offline persistence. Falling back to persistence disabled: "+_),u.reject(_)}var w})).then(()=>u.promise)}function Xi(a){if(a._initialized||a._terminated)throw new Rt(at.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ro(D.fromBase64String(e))}catch(n){throw new Rt(at.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ro(D.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Rt(at.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wd{constructor(e){this._methodName=e}}class Kd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Rt(at.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Rt(at.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mn(this._lat,e._lat)||mn(this._long,e._long)}}const uu=/^__.*__$/;class C_{constructor(e,n,u){this.data=e,this.fieldMask=n,this.fieldTransforms=u}toMutation(e,n){return null!==this.fieldMask?new Zu(e,this.data,this.fieldMask,n,this.fieldTransforms):new If(e,this.data,n,this.fieldTransforms)}}class qd{constructor(e,n,u){this.data=e,this.fieldMask=n,this.fieldTransforms=u}toMutation(e,n){return new Zu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ev(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t()}}class af{constructor(e,n,u,f,_,w){this.settings=e,this.databaseId=n,this.Tt=u,this.ignoreUndefinedProperties=f,void 0===_&&this.ia(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const u=null===(n=this.path)||void 0===n?void 0:n.child(e),f=this.oa({path:u,ca:!1});return f.aa(e),f}ha(e){var n;const u=null===(n=this.path)||void 0===n?void 0:n.child(e),f=this.oa({path:u,ca:!1});return f.ia(),f}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return hp(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Ev(this.ra)&&uu.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class wv{constructor(e,n,u){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=u||xd(e)}wa(e,n,u,f=!1){return new af({ra:e,methodName:n,_a:u,path:hr.emptyPath(),ca:!1,da:f},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Mu(a){const e=a._freezeSettings(),n=xd(a._databaseId);return new wv(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Zg(a,e,n,u,f,_={}){const w=a.wa(_.merge||_.mergeFields?2:0,e,n,f);cp("Data must be an object, but it was:",w,u);const O=Da(u,w);let H,q;if(_.merge)H=new Zo(w.fieldMask),q=w.fieldTransforms;else if(_.mergeFields){const ae=[];for(const Oe of _.mergeFields){const Ze=td(e,Oe,n);if(!w.contains(Ze))throw new Rt(at.INVALID_ARGUMENT,`Field '${Ze}' is specified in your field mask but missing from your input data.`);A_(ae,Ze)||ae.push(Ze)}H=new Zo(ae),q=w.fieldTransforms.filter(Oe=>H.covers(Oe.field))}else H=null,q=w.fieldTransforms;return new C_(new As(O),H,q)}class Yd extends Wd{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yd}}function hc(a,e,n){return new af({ra:3,_a:e.settings._a,methodName:a._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class wr extends Wd{_toFieldTransform(e){return new ru(e.path,new Po)}isEqual(e){return e instanceof wr}}class Zd extends Wd{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=hc(this,e,!0),u=this.ma.map(_=>ed(_,n)),f=new el(u);return new ru(e.path,f)}isEqual(e){return this===e}}class up extends Wd{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=hc(this,e,!0),u=this.ma.map(_=>ed(_,n)),f=new Ea(u);return new ru(e.path,f)}isEqual(e){return this===e}}class T_ extends Wd{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new Ua(e.Tt,bn(e.Tt,this.ga));return new ru(e.path,n)}isEqual(e){return this===e}}function Dl(a,e,n,u){const f=a.wa(1,e,n);cp("Data must be an object, but it was:",f,u);const _=[],w=As.empty();wo(u,(H,q)=>{const ae=dp(e,H,n);q=(0,ze.m9)(q);const Oe=f.ha(ae);if(q instanceof Yd)_.push(ae);else{const Ze=ed(q,Oe);null!=Ze&&(_.push(ae),w.set(ae,Ze))}});const O=new Zo(_);return new qd(w,O,f.fieldTransforms)}function Jd(a,e,n,u,f,_){const w=a.wa(1,e,n),O=[td(e,u,n)],H=[f];if(_.length%2!=0)throw new Rt(at.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ze=0;Ze<_.length;Ze+=2)O.push(td(e,_[Ze])),H.push(_[Ze+1]);const q=[],ae=As.empty();for(let Ze=O.length-1;Ze>=0;--Ze)if(!A_(q,O[Ze])){const Ot=O[Ze];let Gt=H[Ze];Gt=(0,ze.m9)(Gt);const dn=w.ha(Ot);if(Gt instanceof Yd)q.push(Ot);else{const An=ed(Gt,dn);null!=An&&(q.push(Ot),ae.set(Ot,An))}}const Oe=new Zo(q);return new qd(ae,Oe,w.fieldTransforms)}function Il(a,e,n,u=!1){return ed(n,a.wa(u?4:3,e))}function ed(a,e){if(S_(a=(0,ze.m9)(a)))return cp("Unsupported field value:",e,a),Da(a,e);if(a instanceof Wd)return function(n,u){if(!Ev(u.ra))throw u.fa(`${n._methodName}() can only be used with update() and set()`);if(!u.path)throw u.fa(`${n._methodName}() is not currently supported inside arrays`);const f=n._toFieldTransform(u);f&&u.fieldTransforms.push(f)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(n,u){const f=[];let _=0;for(const w of n){let O=ed(w,u.la(_));null==O&&(O={nullValue:"NULL_VALUE"}),f.push(O),_++}return{arrayValue:{values:f}}}(a,e)}return function(n,u){if(null===(n=(0,ze.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return bn(u.Tt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const f=dr.fromDate(n);return{timestampValue:Ju(u.Tt,f)}}if(n instanceof dr){const f=new dr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ju(u.Tt,f)}}if(n instanceof Kd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ro)return{bytesValue:Kp(u.Tt,n._byteString)};if(n instanceof Qi){const f=u.databaseId,_=n.firestore._databaseId;if(!_.isEqual(f))throw u.fa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Om(n.firestore._databaseId||u.databaseId,n._key.path)}}throw u.fa(`Unsupported field value: ${lu(n)}`)}(a,e)}function Da(a,e){const n={};return kl(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(a,(u,f)=>{const _=ed(f,e.ua(u));null!=_&&(n[u]=_)}),{mapValue:{fields:n}}}function S_(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof dr||a instanceof Kd||a instanceof ro||a instanceof Qi||a instanceof Wd)}function cp(a,e,n){if(!S_(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const u=lu(n);throw e.fa("an object"===u?a+" a custom object":a+" "+u)}var u}function td(a,e,n){if((e=(0,ze.m9)(e))instanceof dc)return e._internalPath;if("string"==typeof e)return dp(a,e);throw hp("Field path arguments must be of type string or ",a,!1,void 0,n)}const lb=new RegExp("[~\\*/\\[\\]]");function dp(a,e,n){if(e.search(lb)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new dc(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function hp(a,e,n,u,f){const _=u&&!u.isEmpty(),w=void 0!==f;let O=`Function ${e}() called with invalid data`;n&&(O+=" (via `toFirestore()`)"),O+=". ";let H="";return(_||w)&&(H+=" (found",_&&(H+=` in field ${u}`),w&&(H+=` in document ${f}`),H+=")"),new Rt(at.INVALID_ARGUMENT,O+a+H)}function A_(a,e){return a.some(n=>n.isEqual(e))}class Ru{constructor(e,n,u,f,_){this._firestore=e,this._userDataWriter=n,this._key=u,this._document=f,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Qi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Dv extends Ru{data(){return super.data()}}function fp(a,e){return"string"==typeof e?dp(a,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function Iv(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Rt(at.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O_{}class pp extends O_{}function fi(a,e,...n){let u=[];e instanceof O_&&u.push(e),u=u.concat(n),function(f){const _=f.filter(O=>O instanceof fc).length,w=f.filter(O=>O instanceof gp).length;if(_>1||_>0&&w>0)throw new Rt(at.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(u);for(const f of u)a=f._apply(a);return a}class gp extends pp{constructor(e,n,u){super(),this._field=e,this._op=n,this._value=u,this.type="where"}static _create(e,n,u){return new gp(e,n,u)}_apply(e){const n=this._parse(e);return Qd(e._query,n),new Uo(e.firestore,e.converter,vh(e._query,n))}_parse(e){const n=Mu(e.firestore);return function(f,_,w,O,H,q,ae){let Oe;if(H.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new Rt(at.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){df(ae,q);const Ze=[];for(const Ot of ae)Ze.push(cf(O,f,Ot));Oe={arrayValue:{values:Ze}}}else Oe=cf(O,f,ae)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||df(ae,q),Oe=Il(w,"where",ae,"in"===q||"not-in"===q);return _r.create(H,q,Oe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class fc extends O_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fc(e,n)}_parse(e){const n=this._queryConstraints.map(u=>u._parse(e)).filter(u=>u.getFilters().length>0);return 1===n.length?n[0]:Vr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,f){let _=u;const w=f.getFlattenedFilters();for(const O of w)Qd(_,O),_=vh(_,O)}(e._query,n),new Uo(e.firestore,e.converter,vh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Gl extends pp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gl(e,n)}_apply(e){const n=function(u,f,_){if(null!==u.startAt)throw new Rt(at.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Rt(at.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new fd(f,_);return function(O,H){if(null===_h(O)){const q=gd(O);null!==q&&M_(0,q,H.field)}}(u,w),w}(e._query,this._field,this._direction);return new Uo(e.firestore,e.converter,function(u,f){const _=u.explicitOrderBy.concat([f]);return new vl(u.path,u.collectionGroup,_,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class lr extends pp{constructor(e,n,u){super(),this.type=e,this._limit=n,this._limitType=u}static _create(e,n,u){return new lr(e,n,u)}_apply(e){return new Uo(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}}class _p extends pp{constructor(e,n,u){super(),this.type=e,this._docOrFields=n,this._inclusive=u}static _create(e,n,u){return new _p(e,n,u)}_apply(e){const n=Cl(e,this.type,this._docOrFields,this._inclusive);return new Uo(e.firestore,e.converter,(f=n,new vl((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,f,u.endAt)));var u,f}}class yp extends pp{constructor(e,n,u){super(),this.type=e,this._docOrFields=n,this._inclusive=u}static _create(e,n,u){return new yp(e,n,u)}_apply(e){const n=Cl(e,this.type,this._docOrFields,this._inclusive);return new Uo(e.firestore,e.converter,(f=n,new vl((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,f)));var u,f}}function Cl(a,e,n,u){if(n[0]=(0,ze.m9)(n[0]),n[0]instanceof Ru)return function(f,_,w,O,H){if(!O)throw new Rt(at.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const q=[];for(const ae of Os(f))if(ae.field.isKeyField())q.push(Do(_,O.key));else{const Oe=O.data.field(ae.field);if(Ue(Oe))throw new Rt(at.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Oe){const Ze=ae.field.canonicalString();throw new Rt(at.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ze}' (used as the orderBy) does not exist.`)}q.push(Oe)}return new Mn(q,H)}(a._query,a.firestore._databaseId,e,n[0]._document,u);{const f=Mu(a.firestore);return function(_,w,O,H,q,ae){const Oe=_.explicitOrderBy;if(q.length>Oe.length)throw new Rt(at.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ze=[];for(let Ot=0;Ot<q.length;Ot++){const Gt=q[Ot];if(Oe[Ot].field.isKeyField()){if("string"!=typeof Gt)throw new Rt(at.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Gt}`);if(!yh(_)&&-1!==Gt.indexOf("/"))throw new Rt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Gt}' contains a slash.`);const dn=_.path.child(mr.fromString(Gt));if(!on.isDocumentKey(dn))throw new Rt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${dn}' is not because it contains an odd number of segments.`);const An=new on(dn);Ze.push(Do(w,An))}else{const dn=Il(O,H,Gt);Ze.push(dn)}}return new Mn(Ze,ae)}(a._query,a.firestore._databaseId,f,e,n,u)}}function cf(a,e,n){if("string"==typeof(n=(0,ze.m9)(n))){if(""===n)throw new Rt(at.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yh(e)&&-1!==n.indexOf("/"))throw new Rt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const u=e.path.child(mr.fromString(n));if(!on.isDocumentKey(u))throw new Rt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return Do(a,new on(u))}if(n instanceof Qi)return Do(a,n._key);throw new Rt(at.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(n)}.`)}function df(a,e){if(!Array.isArray(a)||0===a.length)throw new Rt(at.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qd(a,e){if(e.isInequality()){const u=gd(a),f=e.field;if(null!==u&&!u.isEqual(f))throw new Rt(at.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${u.toString()}' and '${f.toString()}'`);const _=_h(a);null!==_&&M_(0,f,_)}const n=function(u,f){for(const _ of u)for(const w of _.getFlattenedFilters())if(f.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Rt(at.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function M_(a,e,n){if(!n.isEqual(e))throw new Rt(at.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Sv{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return J(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(se(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw $t()}}convertObject(e,n){const u={};return wo(e.fields,(f,_)=>{u[f]=this.convertValue(_,n)}),u}convertGeoPoint(e){return new Kd(J(e.latitude),J(e.longitude))}convertArray(e,n){return(e.values||[]).map(u=>this.convertValue(u,n))}convertServerTimestamp(e,n){switch(n){case"previous":const u=St(e);return null==u?null:this.convertValue(u,n);case"estimate":return this.convertTimestamp(cn(e));default:return null}}convertTimestamp(e){const n=$(e);return new dr(n.seconds,n.nanos)}convertDocumentKey(e,n){const u=mr.fromString(e);tn(Iy(u));const f=new vi(u.get(1),u.get(3)),_=new on(u.popFirst(5));return f.isEqual(n)||xn(`Document ${_} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),_}}function rd(a,e,n){let u;return u=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,u}class Av extends Sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qi(this.firestore,null,n)}}class jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hl extends Ru{constructor(e,n,u,f,_,w){super(e,n,u,f,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const u=this._document.data.field(fp("DocumentSnapshot.get",e));if(null!==u)return this._userDataWriter.convertValue(u,n.serverTimestamps)}}}class pc extends Hl{data(e={}){return super.data(e)}}class $l{constructor(e,n,u,f){this._firestore=e,this._userDataWriter=n,this._snapshot=f,this.metadata=new jl(f.hasPendingWrites,f.fromCache),this.query=u}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(u=>{e.call(n,new pc(this._firestore,this._userDataWriter,u.key,u,new jl(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Rt(at.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,f){if(u._snapshot.oldDocs.isEmpty()){let _=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new pc(u._firestore,u._userDataWriter,w.doc.key,w.doc,new jl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:_++}))}{let _=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>f||3!==w.type).map(w=>{const O=new pc(u._firestore,u._userDataWriter,w.doc.key,w.doc,new jl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let H=-1,q=-1;return 0!==w.type&&(H=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),q=_.indexOf(w.doc.key)),{type:ls(w.type),doc:O,oldIndex:H,newIndex:q}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ls(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t()}}function cb(a,e){return a instanceof Hl&&e instanceof Hl?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof $l&&e instanceof $l&&a._firestore===e._firestore&&Kg(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class sl extends Sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qi(this.firestore,null,n)}}function Rv(a,e,n){a=Er(a,Qi);const u=Er(a.firestore,qi),f=rd(a.converter,e,n);return id(u,[Zg(Mu(u),"setDoc",a._key,f,null!==a.converter,n).toMutation(a._key,wi.none())])}function xv(a,e,n,...u){a=Er(a,Qi);const f=Er(a.firestore,qi),_=Mu(f);let w;return w="string"==typeof(e=(0,ze.m9)(e))||e instanceof dc?Jd(_,"updateDoc",a._key,e,n,u):Dl(_,"updateDoc",a._key,e),id(f,[w.toMutation(a._key,wi.exists(!0))])}function Xg(a,...e){var n,u,f;a=(0,ze.m9)(a);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||qg(e[w])||(_=e[w],w++);const O={includeMetadataChanges:_.includeMetadataChanges};if(qg(e[w])){const Oe=e[w];e[w]=null===(n=Oe.next)||void 0===n?void 0:n.bind(Oe),e[w+1]=null===(u=Oe.error)||void 0===u?void 0:u.bind(Oe),e[w+2]=null===(f=Oe.complete)||void 0===f?void 0:f.bind(Oe)}let H,q,ae;if(a instanceof Qi)q=Er(a.firestore,qi),ae=Ic(a._key.path),H={next:Oe=>{e[w]&&e[w](gc(q,a,Oe))},error:e[w+1],complete:e[w+2]};else{const Oe=Er(a,Uo);q=Er(Oe.firestore,qi),ae=Oe._query;const Ze=new sl(q);H={next:Ot=>{e[w]&&e[w](new $l(q,Ze,Oe,Ot))},error:e[w+1],complete:e[w+2]},Iv(a._query)}return function(Oe,Ze,Ot,Gt){const dn=new uc(Gt),An=new Ld(Ze,dn,Ot);return Oe.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Fd(yield Zc(Oe),An)})),()=>{dn.bc(),Oe.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return p_(yield Zc(Oe),An)}))}}(js(q),ae,O,H)}function id(a,e){return function(n,u){const f=new ci;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function rb(a,e,n){return Sg.apply(this,arguments)}(yield sp(n),u,f)})),f.promise}(js(a),e)}function gc(a,e,n){const u=n.docs.get(e._key),f=new sl(a);return new Hl(a,f,e._key,u,new jl(n.hasPendingWrites,n.fromCache),e.converter)}const Xd={maxAttempts:5};class mc{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mu(e)}set(e,n,u){this._verifyNotCommitted();const f=zl(e,this._firestore),_=rd(f.converter,n,u),w=Zg(this._dataReader,"WriteBatch.set",f._key,_,null!==f.converter,u);return this._mutations.push(w.toMutation(f._key,wi.none())),this}update(e,n,u,...f){this._verifyNotCommitted();const _=zl(e,this._firestore);let w;return w="string"==typeof(n=(0,ze.m9)(n))||n instanceof dc?Jd(this._dataReader,"WriteBatch.update",_._key,n,u,f):Dl(this._dataReader,"WriteBatch.update",_._key,n),this._mutations.push(w.toMutation(_._key,wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zl(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(n._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(at.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zl(a,e){if((a=(0,ze.m9)(a)).firestore!==e)throw new Rt(at.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class wp extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Mu(e)}get(e){const n=zl(e,this._firestore),u=new Av(this._firestore);return this._transaction.lookup([n._key]).then(f=>{if(!f||1!==f.length)return $t();const _=f[0];if(_.isFoundDocument())return new Ru(this._firestore,u,_.key,_,n.converter);if(_.isNoDocument())return new Ru(this._firestore,u,n._key,null,n.converter);throw $t()})}set(e,n,u){const f=zl(e,this._firestore),_=rd(f.converter,n,u),w=Zg(this._dataReader,"Transaction.set",f._key,_,null!==f.converter,u);return this._transaction.set(f._key,w),this}update(e,n,u,...f){const _=zl(e,this._firestore);let w;return w="string"==typeof(n=(0,ze.m9)(n))||n instanceof dc?Jd(this._dataReader,"Transaction.update",_._key,n,u,f):Dl(this._dataReader,"Transaction.update",_._key,n),this._transaction.update(_._key,w),this}delete(e){const n=zl(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=zl(e,this._firestore),u=new sl(this._firestore);return super.get(e).then(f=>new Hl(this._firestore,u,n._key,f._document,new jl(!1,!1),n.converter))}}!function(a,e=!0){Ye=yt.SDK_VERSION,(0,yt._registerComponent)(new mt.wA("firestore",(n,{instanceIdentifier:u,options:f})=>{const _=n.getProvider("app").getImmediate(),w=new qi(new Ml(n.getProvider("auth-internal")),new os(n.getProvider("app-check-internal")),function(O,H){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new Rt(at.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vi(O.options.projectId,H)}(_,u),_);return f=Object.assign({useFetchStreams:e},f),w._setSettings(f),w},"PUBLIC").setMultipleInstances(!0)),(0,yt.registerVersion)(ne,"3.9.0",a),(0,yt.registerVersion)(ne,"3.9.0","esm2017")}();function Wl(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Rt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function Cp(){if(typeof Uint8Array>"u")throw new Rt("unimplemented","Uint8Arrays are not available in this environment.")}function U_(){if(!function S(){return typeof atob<"u"}())throw new Rt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class th{constructor(e){this._delegate=e}static fromBase64String(e){return U_(),new th(ro.fromBase64String(e))}static fromUint8Array(e){return Cp(),new th(ro.fromUint8Array(e))}toBase64(){return U_(),this._delegate.toBase64()}toUint8Array(){return Cp(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function od(a){return function nh(a,e){if("object"!=typeof a||null===a)return!1;const n=a;for(const u of e)if(u in n&&"function"==typeof n[u])return!0;return!1}(a,["next","error","complete"])}class Pv{enableIndexedDbPersistence(e,n){return function Ii(a,e){Xi(a=Er(a,qi));const n=js(a),u=a._freezeSettings(),f=new Pg;return Xc(n,f,new tp(f,u.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Pr(a){Xi(a=Er(a,qi));const e=js(a),n=a._freezeSettings(),u=new Pg;return Xc(e,u,new xg(u,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Gi(a){if(a._initialized&&!a._terminated)throw new Rt(at.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ci;return a._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(n=(0,we.Z)(function*(u){if(!xo.C())return Promise.resolve();const f=u+"main";yield xo.delete(f)}),function(u){return n.apply(this,arguments)})(ug(a._databaseId,a._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class xu{constructor(e,n,u){this._delegate=n,this._persistenceProvider=u,this.INTERNAL={delete:()=>this.terminate()},e instanceof vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,u={}){!function sb(a,e,n,u={}){var f;const _=(a=Er(a,zd))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&Qn("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${n}`,ssl:!1})),u.mockUserToken){let w,O;if("string"==typeof u.mockUserToken)w=u.mockUserToken,O=ye.MOCK_USER;else{w=(0,ze.Sg)(u.mockUserToken,null===(f=a._app)||void 0===f?void 0:f.options.projectId);const H=u.mockUserToken.sub||u.mockUserToken.user_id;if(!H)throw new Rt(at.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new ye(H)}a._authCredentials=new _l(new Ro(w,O))}}(this._delegate,e,n,u)}enableNetwork(){return function Nu(a){return function E_(a){return a.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield v_(a),n=yield Vg(a);return e.setNetworkEnabled(!0),function(u){const f=qt(u);return f.mu.delete(0),$h(f)}(n)}))}(js(a=Er(a,qi)))}(this._delegate)}disableNetwork(){return function lp(a){return function jg(a){return a.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield v_(a),n=yield Vg(a);return e.setNetworkEnabled(!1),(u=(0,we.Z)(function*(f){const _=qt(f);_.mu.add(0),yield sc(_),_.pu.set("Offline")}),function(f){return u.apply(this,arguments)})(n);var u}))}(js(a=Er(a,qi)))}(this._delegate)}enablePersistence(e){let n=!1,u=!1;return e&&(n=!!e.synchronizeTabs,u=!!e.experimentalForceOwningTab,cc("synchronizeTabs",n,"experimentalForceOwningTab",u)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,u)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ap(a){return function(e){const n=new ci;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Lo(a,e){return Bd.apply(this,arguments)}(yield sp(e),n)})),n.promise}(js(a=Er(a,qi)))}(this._delegate)}onSnapshotsInSync(e){return function k_(a,e){return function fv(a,e){const n=new uc(e);return a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return u=yield Zc(a),f=n,qt(u).vu.add(f),void f.next();var u,f})),()=>{n.bc(),a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return u=yield Zc(a),f=n,void qt(u).vu.delete(f);var u,f}))}}(js(a=Er(a,qi)),qg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Rt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ih(this,zg(this._delegate,e))}catch(n){throw ja(n,"collection()","Firestore.collection()")}}doc(e){try{return new cu(this,Rs(this._delegate,e))}catch(n){throw ja(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ca(this,function ob(a,e){if(a=Er(a,zd),Jc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Rt(at.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Uo(a,null,(n=e,new vl(mr.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw ja(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Dp(a,e,n){a=Er(a,qi);const u=Object.assign(Object.assign({},Xd),n);return function(f){if(f.maxAttempts<1)throw new Rt(at.INVALID_ARGUMENT,"Max attempts must be at least 1")}(u),function(f,_,w){const O=new ci;return f.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const H=yield function b_(a){return rp(a).then(e=>e.datastore)}(f);new ef(f.asyncQueue,H,w,_,O).run()})),O.promise}(js(a),f=>e(new wp(a,f)),u)}(this._delegate,n=>e(new B_(this,n)))}batch(){return js(this._delegate),new Tp(new mc(this._delegate,e=>id(this._delegate,e)))}loadBundle(e){return function hi(a,e){const n=js(a=Er(a,qi)),u=new vv;return function pv(a,e,n,u){const f=function(_,w){let O;return O="string"==typeof _?(new TextEncoder).encode(_):_,H=function(H,q){if(H instanceof Uint8Array)return Xh(H,q);if(H instanceof ArrayBuffer)return Xh(new Uint8Array(H),q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new kg(H,w);var H}(n,xd(e));a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function cv(a,e,n){const u=qt(a);var f;(f=(0,we.Z)(function*(_,w,O){try{const H=yield w.getMetadata();if(yield function(Ze,Ot){const Gt=qt(Ze),dn=Ns(Ot.createTime);return Gt.persistence.runTransaction("hasNewerBundle","readonly",An=>Gt.$s.getBundleMetadata(An,Ot.id)).then(An=>!!An&&An.createTime.compareTo(dn)>=0)}(_.localStore,H))return yield w.close(),O._completeWith({taskState:"Success",documentsLoaded:(Ze=H).totalDocuments,bytesLoaded:Ze.totalBytes,totalDocuments:Ze.totalDocuments,totalBytes:Ze.totalBytes}),Promise.resolve(new Set);O._updateProgress(tv(H));const q=new fE(H,_.localStore,w.Tt);let ae=yield w.yc();for(;ae;){const Ze=yield q.Bu(ae);Ze&&O._updateProgress(Ze),ae=yield w.yc()}const Oe=yield q.complete();return yield zi(_,Oe.Uu,void 0),yield function(Ze,Ot){const Gt=qt(Ze);return Gt.persistence.runTransaction("Save bundle","readwrite",dn=>Gt.$s.saveBundleMetadata(dn,Ot))}(_.localStore,H),O._completeWith(Oe.progress),Promise.resolve(Oe.qu)}catch(H){return Qn("SyncEngine",`Loading bundle failed with ${H}`),O._failWith(H),Promise.resolve(new Set)}var Ze}),function(_,w,O){return f.apply(this,arguments)})(u,e,n).then(f=>{u.sharedClientState.notifyBundleLoaded(f)})}(yield sp(a),f,u)}))}(n,a._databaseId,e,u),u}(this._delegate,e)}namedQuery(e){return function or(a,e){return function gv(a,e){return a.asyncQueue.enqueue((0,we.Z)(function*(){return function(n,u){const f=qt(n);return f.persistence.runTransaction("Get named query","readonly",_=>f.$s.getNamedQuery(_,u))}(yield ip(a),e)}))}(js(a=Er(a,qi)),e).then(n=>n?new Uo(a,null,n.query):null)}(this._delegate,e).then(n=>n?new Ca(this,n):null)}}class Pu extends Sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new th(new ro(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return cu.forKey(n,this.firestore,null)}}class B_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Pu(e)}get(e){const n=sh(e);return this._delegate.get(n).then(u=>new Sp(this._firestore,new Hl(this._firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,n.converter)))}set(e,n,u){const f=sh(e);return u?(Wl("Transaction.set",u),this._delegate.set(f,n,u)):this._delegate.set(f,n),this}update(e,n,u,...f){const _=sh(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,u,...f),this}delete(e){const n=sh(e);return this._delegate.delete(n),this}}class Tp{constructor(e){this._delegate=e}set(e,n,u){const f=sh(e);return u?(Wl("WriteBatch.set",u),this._delegate.set(f,n,u)):this._delegate.set(f,n),this}update(e,n,u,...f){const _=sh(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,u,...f),this}delete(e){const n=sh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class rh{constructor(e,n,u){this._firestore=e,this._userDataWriter=n,this._delegate=u}fromFirestore(e,n){const u=new pc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _c(this._firestore,u),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const u=rh.INSTANCES;let f=u.get(e);f||(f=new WeakMap,u.set(e,f));let _=f.get(n);return _||(_=new rh(e,new Pu(e),n),f.set(n,_)),_}}rh.INSTANCES=new WeakMap;class cu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Pu(e)}static forPath(e,n,u){if(e.length%2!=0)throw new Rt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new cu(n,new Qi(n._delegate,u,new on(e)))}static forKey(e,n,u){return new cu(n,new Qi(n._delegate,u,e))}get id(){return this._delegate.id}get parent(){return new ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ih(this.firestore,zg(this._delegate,e))}catch(n){throw ja(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof Qi&&Wg(this._delegate,e)}set(e,n){n=Wl("DocumentReference.set",n);try{return n?Rv(this._delegate,e,n):Rv(this._delegate,e)}catch(u){throw ja(u,"setDoc()","DocumentReference.set()")}}update(e,n,...u){try{return 1===arguments.length?xv(this._delegate,e):xv(this._delegate,e,n,...u)}catch(f){throw ja(f,"updateDoc()","DocumentReference.update()")}}delete(){return function db(a){return id(Er(a.firestore,qi),[new Dh(a._key,wi.none())])}(this._delegate)}onSnapshot(...e){const n=V_(e),u=kv(e,f=>new Sp(this.firestore,new Hl(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return Xg(this._delegate,n,u)}get(e){let n;return n="cache"===e?.source?function x_(a){a=Er(a,Qi);const e=Er(a.firestore,qi),n=js(e),u=new sl(e);return function hv(a,e){const n=new ci;return a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(u=(0,we.Z)(function*(f,_,w){try{const O=yield function(H,q){const ae=qt(H);return ae.persistence.runTransaction("read document","readonly",Oe=>ae.localDocuments.getDocument(Oe,q))}(f,_);O.isFoundDocument()?w.resolve(O):O.isNoDocument()?w.resolve(null):w.reject(new Rt(at.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const H=Gc(O,`Failed to get document '${_} from cache`);w.reject(H)}}),function(f,_,w){return u.apply(this,arguments)})(yield ip(a),e,n);var u})),n.promise}(n,a._key).then(f=>new Hl(e,u,a._key,f,new jl(null!==f&&f.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function Qg(a){a=Er(a,Qi);const e=Er(a.firestore,qi);return w_(js(e),a._key,{source:"server"}).then(n=>gc(e,a,n))}(this._delegate):function bp(a){a=Er(a,Qi);const e=Er(a.firestore,qi);return w_(js(e),a._key).then(n=>gc(e,a,n))}(this._delegate),n.then(u=>new Sp(this.firestore,new Hl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)))}withConverter(e){return new cu(this.firestore,this._delegate.withConverter(e?rh.getInstance(this.firestore,e):null))}}function ja(a,e,n){return a.message=a.message.replace(e,n),a}function V_(a){for(const e of a)if("object"==typeof e&&!od(e))return e;return{}}function kv(a,e){var n,u;let f;return f=od(a[0])?a[0]:od(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:_=>{f.next&&f.next(e(_))},error:null===(n=f.error)||void 0===n?void 0:n.bind(f),complete:null===(u=f.complete)||void 0===u?void 0:u.bind(f)}}class Sp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new cu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return cb(this._delegate,e._delegate)}}class _c extends Sp{data(e){const n=this._delegate.data(e);return function Ko(a,e){a||$t()}(void 0!==n),n}}class Ca{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Pu(e)}where(e,n,u){try{return new Ca(this.firestore,fi(this._delegate,function ub(a,e,n){const u=e,f=fp("where",a);return gp._create(f,u,n)}(e,n,u)))}catch(f){throw ja(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ca(this.firestore,fi(this._delegate,function lf(a,e="asc"){const n=e,u=fp("orderBy",a);return Gl._create(u,n)}(e,n)))}catch(u){throw ja(u,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ca(this.firestore,fi(this._delegate,function Tv(a){return $g("limit",a),lr._create("limit",a,"F")}(e)))}catch(n){throw ja(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ca(this.firestore,fi(this._delegate,function uf(a){return $g("limitToLast",a),lr._create("limitToLast",a,"L")}(e)))}catch(n){throw ja(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ca(this.firestore,fi(this._delegate,function ms(...a){return _p._create("startAt",a,!0)}(...e)))}catch(n){throw ja(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ca(this.firestore,fi(this._delegate,function Jg(...a){return _p._create("startAfter",a,!1)}(...e)))}catch(n){throw ja(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ca(this.firestore,fi(this._delegate,function vp(...a){return yp._create("endBefore",a,!1)}(...e)))}catch(n){throw ja(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ca(this.firestore,fi(this._delegate,function N_(...a){return yp._create("endAt",a,!0)}(...e)))}catch(n){throw ja(n,"endAt()","Query.endAt()")}}isEqual(e){return Kg(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Mv(a){a=Er(a,Uo);const e=Er(a.firestore,qi),n=js(e),u=new sl(e);return function D_(a,e){const n=new ci;return a.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(u=(0,we.Z)(function*(f,_,w){try{const O=yield Vf(f,_,!0),H=new iv(_,O.Yi),q=H.Hu(O.documents),ae=H.applyChanges(q,!1);w.resolve(ae.snapshot)}catch(O){const H=Gc(O,`Failed to execute query '${_} against cache`);w.reject(H)}}),function(f,_,w){return u.apply(this,arguments)})(yield ip(a),e,n);var u})),n.promise}(n,a._query).then(f=>new $l(e,u,a,f))}(this._delegate):"server"===e?.source?function P_(a){a=Er(a,Uo);const e=Er(a.firestore,qi),n=js(e),u=new sl(e);return Hg(n,a._query,{source:"server"}).then(f=>new $l(e,u,a,f))}(this._delegate):function Nv(a){a=Er(a,Uo);const e=Er(a.firestore,qi),n=js(e),u=new sl(e);return Iv(a._query),Hg(n,a._query).then(f=>new $l(e,u,a,f))}(this._delegate),n.then(u=>new j_(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)))}onSnapshot(...e){const n=V_(e),u=kv(e,f=>new j_(this.firestore,new $l(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return Xg(this._delegate,n,u)}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?rh.getInstance(this.firestore,e):null))}}class G_{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new _c(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class j_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ca(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _c(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new G_(this._firestore,n))}forEach(e,n){this._delegate.forEach(u=>{e.call(n,new _c(this._firestore,u))})}isEqual(e){return cb(this._delegate,e._delegate)}}class ih extends Ca{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new cu(this.firestore,e):null}doc(e){try{return new cu(this.firestore,void 0===e?Rs(this._delegate):Rs(this._delegate,e))}catch(n){throw ja(n,"doc()","CollectionReference.doc()")}}add(e){return function Ia(a,e){const n=Er(a.firestore,qi),u=Rs(a),f=rd(a.converter,e);return id(n,[Zg(Mu(a.firestore),"addDoc",u._key,f,null!==a.converter,{}).toMutation(u._key,wi.exists(!1))]).then(()=>u)}(this._delegate,e).then(n=>new cu(this.firestore,n))}isEqual(e){return Wg(this._delegate,e._delegate)}withConverter(e){return new ih(this.firestore,this._delegate.withConverter(e?rh.getInstance(this.firestore,e):null))}}function sh(a){return Er(a,Qi)}class tm{constructor(...e){this._delegate=new dc(...e)}static documentId(){return new tm(hr.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof dc&&this._delegate._internalPath.isEqual(e._internalPath)}}class oh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fb(){return new wr("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new oh(e)}static delete(){const e=function hb(){return new Yd("deleteField")}();return e._methodName="FieldValue.delete",new oh(e)}static arrayUnion(...e){const n=function Ip(...a){return new Zd("arrayUnion",a)}(...e);return n._methodName="FieldValue.arrayUnion",new oh(n)}static arrayRemove(...e){const n=function hf(...a){return new up("arrayRemove",a)}(...e);return n._methodName="FieldValue.arrayRemove",new oh(n)}static increment(e){const n=function F_(a){return new T_("increment",a)}(e);return n._methodName="FieldValue.increment",new oh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const H_={Firestore:xu,GeoPoint:Kd,Timestamp:dr,Blob:th,Transaction:B_,WriteBatch:Tp,DocumentReference:cu,DocumentSnapshot:Sp,Query:Ca,QueryDocumentSnapshot:_c,QuerySnapshot:j_,CollectionReference:ih,FieldPath:tm,FieldValue:oh,setLogLevel:function ff(a){!function xr(a){Nt.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function rm(a){(function nm(a,e){a.INTERNAL.registerComponent(new mt.wA("firestore-compat",n=>{const u=n.getProvider("app-compat").getImmediate(),f=n.getProvider("firestore").getImmediate();return e(u,f)},"PUBLIC").setServiceProps(Object.assign({},H_)))})(a,(e,n)=>new xu(e,n,new Pv)),a.registerVersion("@firebase/firestore-compat","0.3.5")}(gt.Z);var ku=G(1205),im=G(6217),gb=G(9260);function Ap(a,e){return function $_(a,e=Z.z){return new p.y(n=>{let u;return null!=e?e.schedule(()=>{u=a.onSnapshot({includeMetadataChanges:!0},n)}):u=a.onSnapshot({includeMetadataChanges:!0},n),()=>{u?.()}})}(a,e)}function sm(a,e){return Ap(a,e).pipe((0,ve.U)(n=>({payload:n,type:"query"})))}function om(a,e){return sm(a,e).pipe((0,He.O)(void 0),be(),(0,ve.U)(([n,u])=>{const f=u.payload.docChanges(),_=f.map(w=>({type:w.type,payload:w}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,O)=>{const H=f.find(ae=>ae.doc.ref.isEqual(w.ref)),q=n?.payload.docs.find(ae=>ae.ref.isEqual(w.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(w.metadata)||!H&&q&&JSON.stringify(q.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:w}})}),_}))}function z_(a,e,n){return om(a,n).pipe((0,ke.R)((u,f)=>function W_(a,e,n){return e.forEach(u=>{n.indexOf(u.type)>-1&&(a=function mb(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return K_(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=a.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return K_(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return K_(a,e.oldIndex,1)}return a}(a,u))}),a}(u,f.map(_=>_.payload),e),[]),(0,et.x)(),(0,ve.U)(u=>u.map(f=>({type:f.type,payload:f}))))}function K_(a,e,n,...u){const f=a.slice();return f.splice(e,n,...u),f}function Lv(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Uv{constructor(e,n,u){this.ref=e,this.query=n,this.afs=u}stateChanges(e){let n=om(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,ve.U)(u=>u.filter(f=>e.indexOf(f.type)>-1)))),n.pipe((0,He.O)(void 0),be(),(0,Ke.h)(([u,f])=>f.length>0||!u),(0,ve.U)(([u,f])=>f),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ke.R)((n,u)=>[...n,...u],[]))}snapshotChanges(e){const n=Lv(e);return z_(this.query,n,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return sm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(n=>n.payload.docs.map(u=>e.idField?Object.assign(Object.assign({},u.data()),{[e.idField]:u.id}):u.data())),xe.iC)}get(e){return(0,Ie.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new q_(this.ref.doc(e),this.afs)}}class q_{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const u=this.ref.collection(e),{ref:f,query:_}=Mp(u,n);return new Uv(f,_,this.afs)}snapshotChanges(){return function Fv(a,e){return Ap(a,e).pipe((0,He.O)(void 0),be(),(0,ve.U)(([n,u])=>u.exists?n?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ve.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,Ie.D)(this.ref.get(e)).pipe(xe.iC)}}class Op{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?om(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(n=>n.filter(u=>e.indexOf(u.type)>-1)),(0,Ke.h)(n=>n.length>0),xe.iC):om(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ke.R)((n,u)=>[...n,...u],[]))}snapshotChanges(e){const n=Lv(e);return z_(this.query,n,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return sm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(u=>u.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),xe.iC)}get(e){return(0,Ie.D)(this.query.get(e)).pipe(xe.iC)}}const Np=new b.OlP("angularfire2.enableFirestorePersistence"),am=new b.OlP("angularfire2.firestore.persistenceSettings"),_b=new b.OlP("angularfire2.firestore.settings"),lm=new b.OlP("angularfire2.firestore.use-emulator");function Mp(a,e=(n=>n)){return{query:e(a),ref:a}}let Bv=(()=>{class a{constructor(n,u,f,_,w,O,H,q,ae,Oe,Ze,Ot,Gt,dn,An,Ai,Hs){this.schedulers=H;const Nr=(0,_t.on)(n,O,u),xs=ae;Oe&&(0,ku.nw)(Nr,O,Ze,Gt,dn,An,Ot,Ai),[this.firestore,this.persistenceEnabled$]=(0,_t.cc)(`${Nr.name}.firestore`,"AngularFirestore",Nr.name,()=>{const Dr=O.runOutsideAngular(()=>Nr.firestore());if(_&&Dr.settings(_),xs&&Dr.useEmulator(...xs),f&&!(0,xt.PM)(w)){const ei=()=>{try{return(0,Ie.D)(Dr.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(po){return typeof console<"u"&&console.warn(po),(0,Pe.of)(!1)}};return[Dr,O.runOutsideAngular(ei)]}return[Dr,(0,Pe.of)(!1)]},[_,xs,f])}collection(n,u){let f;f="string"==typeof n?this.firestore.collection(n):n;const{ref:_,query:w}=Mp(f,u),O=this.schedulers.ngZone.run(()=>_);return new Uv(O,w,this)}collectionGroup(n,u){const f=u||(w=>w),_=this.firestore.collectionGroup(n);return new Op(f(_),this)}doc(n){let u;u="string"==typeof n?this.firestore.doc(n):n;const f=this.schedulers.ngZone.run(()=>u);return new q_(f,this)}createId(){return this.firestore.collection("_").doc().id}}return a.\u0275fac=function(n){return new(n||a)(b.LFG(_t.Dh),b.LFG(_t.xv,8),b.LFG(Np,8),b.LFG(_b,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(xe.HU),b.LFG(am,8),b.LFG(lm,8),b.LFG(ku.zQ,8),b.LFG(ku.Qv,8),b.LFG(ku.L6,8),b.LFG(ku._Q,8),b.LFG(ku.rT,8),b.LFG(ku.lh,8),b.LFG(ku.f7,8),b.LFG(im.nm,8))},a.\u0275prov=b.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),yb=(()=>{class a{constructor(){gb.Z.registerVersion("angularfire",xe.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:a,providers:[{provide:Np,useValue:!0},{provide:am,useValue:n}]}}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=b.oAB({type:a}),a.\u0275inj=b.cJS({providers:[Bv]}),a})()},2011:(sn,qe,G)=>{G.d(qe,{Dh:()=>Le,GT:()=>xe,cc:()=>Ke,hO:()=>et,on:()=>be,pX:()=>Pe,xv:()=>Ae});var b=G(4650),Z=G(9260),p=G(2122);sn=G.hmd(sn);const Ie=["ngOnDestroy"],Pe=(gt,we,yt,mt={})=>new Proxy(gt,{get:(ot,ze)=>yt.runOutsideAngular(()=>{var Ft;if(gt[ze])return!(null===(Ft=mt?.spy)||void 0===Ft)&&Ft.get&&mt.spy.get(ze,gt[ze]),gt[ze];if(Ie.indexOf(ze)>-1)return()=>{};const Se=we.toPromise().then(Te=>{const We=Te&&Te[ze];return"function"==typeof We?We.bind(Te):We&&We.then?We.then(ft=>yt.run(()=>ft)):yt.run(()=>We)});return new Proxy(()=>{},{get:(Te,We)=>Se[We],apply:(Te,We,ft)=>Se.then(wt=>{var Qt;const jt=wt&&wt(...ft);return!(null===(Qt=mt?.spy)||void 0===Qt)&&Qt.apply&&mt.spy.apply(ze,ft,jt),jt})})})}),xe=(gt,we)=>{we.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(mt=>{Object.defineProperty(gt.prototype,mt,Object.getOwnPropertyDescriptor(yt.prototype||yt,mt))})})};class He{constructor(we){return we}}const Le=new b.OlP("angularfire2.app.options"),Ae=new b.OlP("angularfire2.app.name");function be(gt,we,yt){const ot="object"==typeof yt&&yt||{};ot.name=ot.name||"string"==typeof yt&&yt||"[DEFAULT]";const Ft=Z.Z.apps.filter(Se=>Se&&Se.name===ot.name)[0]||we.runOutsideAngular(()=>Z.Z.initializeApp(gt,ot));try{JSON.stringify(gt)!==JSON.stringify(Ft.options)&&ve("error",`${Ft.name} Firebase App already initialized with different options${sn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new He(Ft)}const ve=(gt,...we)=>{(0,b.X6Q)()&&typeof console<"u"&&console[gt](...we)},ke={provide:He,useFactory:be,deps:[Le,b.R0b,[new b.FiY,Ae]]};let et=(()=>{class gt{constructor(yt){Z.Z.registerVersion("angularfire",p.q4.full,"core"),Z.Z.registerVersion("angularfire",p.q4.full,"app-compat"),Z.Z.registerVersion("angular",b.q4F.full,yt.toString())}static initializeApp(yt,mt){return{ngModule:gt,providers:[{provide:Le,useValue:yt},{provide:Ae,useValue:mt}]}}}return gt.\u0275fac=function(yt){return new(yt||gt)(b.LFG(b.Lbi))},gt.\u0275mod=b.oAB({type:gt}),gt.\u0275inj=b.cJS({providers:[ke]}),gt})();function Ke(gt,we,yt,mt,ot){const[,ze,Ft]=globalThis.\u0275AngularfireInstanceCache.find(Se=>Se[0]===gt)||[];if(ze)return function _t(gt,we){try{return gt.toString()===we.toString()}catch{return gt===we}}(ot,Ft)||(tt("error",`${we} was already initialized on the ${yt} Firebase App with different settings.${xt?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:ot,was:Ft})),ze;{const Se=mt();return globalThis.\u0275AngularfireInstanceCache.push([gt,Se,ot]),Se}}const xt=!!sn.hot,tt=(gt,...we)=>{(0,b.X6Q)()&&typeof console<"u"&&console[gt](...we)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(sn,qe,G)=>{G.d(qe,{q4:()=>gu,iC:()=>to,fc:()=>uo,HU:()=>an,vb:()=>se,JM:()=>J});var b=G(4650),Z=G(259),p=G(5861),Ie=G(9681),Pe=G(2090),xe=G(4859),He=G(1877),Le=G(8766);const Ae="@firebase/installations",be="0.6.4",ve=1e4,ke=`w:${be}`,et="FIS_v2",Ke="https://firebaseinstallations.googleapis.com/v1",_t=36e5,we=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yt(U){return U instanceof Pe.ZR&&U.code.includes("request-failed")}function mt({projectId:U}){return`${Ke}/projects/${U}/installations`}function ot(U){return{token:U.token,requestStatus:2,expiresIn:wt(U.expiresIn),creationTime:Date.now()}}function ze(U,z){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(U,z){const Ee=(yield z.json()).error;return we.create("request-failed",{requestName:U,serverCode:Ee.code,serverMessage:Ee.message,serverStatus:Ee.status})})).apply(this,arguments)}function Se({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function We(U){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(U){const z=yield U();return z.status>=500&&z.status<600?U():z})).apply(this,arguments)}function wt(U){return Number(U.replace("s","000"))}function $e(){return($e=(0,p.Z)(function*({appConfig:U,heartbeatServiceProvider:z},{fid:ee}){const Ee=mt(U),je=Se(U),Xe=z.getImmediate({optional:!0});if(Xe){const en=yield Xe.getHeartbeatsHeader();en&&je.append("x-firebase-client",en)}const Dn={method:"POST",headers:je,body:JSON.stringify({fid:ee,authVersion:et,appId:U.appId,sdkVersion:ke})},Pn=yield We(()=>fetch(Ee,Dn));if(Pn.ok){const en=yield Pn.json();return{fid:en.fid||ee,registrationStatus:2,refreshToken:en.refreshToken,authToken:ot(en.authToken)}}throw yield ze("Create Installation",Pn)})).apply(this,arguments)}function ut(U){return new Promise(z=>{setTimeout(z,U)})}const dt=/^[cdef][\w-]{21}$/,vt="";function ht(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const ee=function Bt(U){return function Qe(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return dt.test(ee)?ee:vt}catch{return vt}}function At(U){return`${U.appName}!${U.appId}`}const hn=new Map;function Kt(U,z){const ee=At(U);Nn(ee,z),function Un(U,z){const ee=function jn(){return!Hn&&"BroadcastChannel"in self&&(Hn=new BroadcastChannel("[Firebase] FID Change"),Hn.onmessage=U=>{Nn(U.data.key,U.data.fid)}),Hn}();ee&&ee.postMessage({key:U,fid:z}),function Lr(){0===hn.size&&Hn&&(Hn.close(),Hn=null)}()}(ee,z)}function Nn(U,z){const ee=hn.get(U);if(ee)for(const Ee of ee)Ee(z)}let Hn=null;const zn="firebase-installations-database",Bn=1,kn="firebase-installations-store";let Yn=null;function tr(){return Yn||(Yn=(0,Le.X3)(zn,Bn,{upgrade:(U,z)=>{0===z&&U.createObjectStore(kn)}})),Yn}function un(U,z){return On.apply(this,arguments)}function On(){return(On=(0,p.Z)(function*(U,z){const ee=At(U),je=(yield tr()).transaction(kn,"readwrite"),Xe=je.objectStore(kn),Vt=yield Xe.get(ee);return yield Xe.put(z,ee),yield je.done,(!Vt||Vt.fid!==z.fid)&&Kt(U,z.fid),z})).apply(this,arguments)}function Pt(U){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(U){const z=At(U),Ee=(yield tr()).transaction(kn,"readwrite");yield Ee.objectStore(kn).delete(z),yield Ee.done})).apply(this,arguments)}function ti(U,z){return kr.apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(U,z){const ee=At(U),je=(yield tr()).transaction(kn,"readwrite"),Xe=je.objectStore(kn),Vt=yield Xe.get(ee),Dn=z(Vt);return void 0===Dn?yield Xe.delete(ee):yield Xe.put(Dn,ee),yield je.done,Dn&&(!Vt||Vt.fid!==Dn.fid)&&Kt(U,Dn.fid),Dn})).apply(this,arguments)}function Wr(U){return Kr.apply(this,arguments)}function Kr(){return Kr=(0,p.Z)(function*(U){let z;const ee=yield ti(U.appConfig,Ee=>{const je=function In(U){return ni(U||{fid:ht(),registrationStatus:0})}(Ee),Xe=function fn(U,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(we.create("app-offline"))};const ee={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},Ee=function Zt(U,z){return Wn.apply(this,arguments)}(U,ee);return{installationEntry:ee,registrationPromise:Ee}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:nr(U)}:{installationEntry:z}}(U,je);return z=Xe.registrationPromise,Xe.installationEntry});return ee.fid===vt?{installationEntry:yield z}:{installationEntry:ee,registrationPromise:z}}),Kr.apply(this,arguments)}function Wn(){return Wn=(0,p.Z)(function*(U,z){try{const ee=yield function jt(U,z){return $e.apply(this,arguments)}(U,z);return un(U.appConfig,ee)}catch(ee){throw yt(ee)&&409===ee.customData.serverCode?yield Pt(U.appConfig):yield un(U.appConfig,{fid:z.fid,registrationStatus:0}),ee}}),Wn.apply(this,arguments)}function nr(U){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(U){let z=yield rr(U.appConfig);for(;1===z.registrationStatus;)yield ut(100),z=yield rr(U.appConfig);if(0===z.registrationStatus){const{installationEntry:ee,registrationPromise:Ee}=yield Wr(U);return Ee||ee}return z})).apply(this,arguments)}function rr(U){return ti(U,z=>{if(!z)throw we.create("installation-not-found");return ni(z)})}function ni(U){return function qr(U){return 1===U.registrationStatus&&U.registrationTime+ve<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function cr(){return(cr=(0,p.Z)(function*({appConfig:U,heartbeatServiceProvider:z},ee){const Ee=function Sn(U,{fid:z}){return`${mt(U)}/${z}/authTokens:generate`}(U,ee),je=function Te(U,{refreshToken:z}){const ee=Se(U);return ee.append("Authorization",function Qt(U){return`${et} ${U}`}(z)),ee}(U,ee),Xe=z.getImmediate({optional:!0});if(Xe){const en=yield Xe.getHeartbeatsHeader();en&&je.append("x-firebase-client",en)}const Dn={method:"POST",headers:je,body:JSON.stringify({installation:{sdkVersion:ke,appId:U.appId}})},Pn=yield We(()=>fetch(Ee,Dn));if(Pn.ok)return ot(yield Pn.json());throw yield ze("Generate Auth Token",Pn)})).apply(this,arguments)}function Ir(U){return br.apply(this,arguments)}function br(){return br=(0,p.Z)(function*(U,z=!1){let ee;const Ee=yield ti(U.appConfig,Xe=>{if(!pt(Xe))throw we.create("not-registered");const Vt=Xe.authToken;if(!z&&function bt(U){return 2===U.requestStatus&&!function he(U){const z=Date.now();return z<U.creationTime||U.creationTime+U.expiresIn<z+_t}(U)}(Vt))return Xe;if(1===Vt.requestStatus)return ee=function Lt(U,z){return Et.apply(this,arguments)}(U,z),Xe;{if(!navigator.onLine)throw we.create("app-offline");const Dn=function fe(U){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:z})}(Xe);return ee=function me(U,z){return De.apply(this,arguments)}(U,Dn),Dn}});return ee?yield ee:Ee.authToken}),br.apply(this,arguments)}function Et(){return(Et=(0,p.Z)(function*(U,z){let ee=yield Fe(U.appConfig);for(;1===ee.authToken.requestStatus;)yield ut(100),ee=yield Fe(U.appConfig);const Ee=ee.authToken;return 0===Ee.requestStatus?Ir(U,z):Ee})).apply(this,arguments)}function Fe(U){return ti(U,z=>{if(!pt(z))throw we.create("not-registered");return function te(U){return 1===U.requestStatus&&U.requestTime+ve<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function De(){return De=(0,p.Z)(function*(U,z){try{const ee=yield function Cn(U,z){return cr.apply(this,arguments)}(U,z),Ee=Object.assign(Object.assign({},z),{authToken:ee});return yield un(U.appConfig,Ee),ee}catch(ee){if(!yt(ee)||401!==ee.customData.serverCode&&404!==ee.customData.serverCode){const Ee=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield un(U.appConfig,Ee)}else yield Pt(U.appConfig);throw ee}}),De.apply(this,arguments)}function pt(U){return void 0!==U&&2===U.registrationStatus}function X(){return(X=(0,p.Z)(function*(U){const z=U,{installationEntry:ee,registrationPromise:Ee}=yield Wr(z);return Ee?Ee.catch(console.error):Ir(z).catch(console.error),ee.fid})).apply(this,arguments)}function de(){return de=(0,p.Z)(function*(U,z=!1){const ee=U;return yield function ge(U){return le.apply(this,arguments)}(ee),(yield Ir(ee,z)).token}),de.apply(this,arguments)}function le(){return(le=(0,p.Z)(function*(U){const{registrationPromise:z}=yield Wr(U);z&&(yield z)})).apply(this,arguments)}function es(U){return we.create("missing-app-config-values",{valueName:U})}const _s="installations",Wi=U=>{const z=U.getProvider("app").getImmediate(),ee=function Qr(U){if(!U||!U.options)throw es("App Configuration");if(!U.name)throw es("App Name");const z=["projectId","apiKey","appId"];for(const ee of z)if(!U.options[ee])throw es(ee);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(z);return{app:z,appConfig:ee,heartbeatServiceProvider:(0,Ie._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},Ps=U=>{const z=U.getProvider("app").getImmediate(),ee=(0,Ie._getProvider)(z,_s).getImmediate();return{getId:()=>function ie(U){return X.apply(this,arguments)}(ee),getToken:je=>function Ve(U){return de.apply(this,arguments)}(ee,je)}};(function ts(){(0,Ie._registerComponent)(new xe.wA(_s,Wi,"PUBLIC")),(0,Ie._registerComponent)(new xe.wA("installations-internal",Ps,"PRIVATE"))})(),(0,Ie.registerVersion)(Ae,be),(0,Ie.registerVersion)(Ae,be,"esm2017");const Zn="@firebase/remote-config",Tr=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ws{constructor(z,ee,Ee,je){this.client=z,this.storage=ee,this.storageCache=Ee,this.logger=je}isCachedDataFresh(z,ee){if(!ee)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ee=Date.now()-ee,je=Ee<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${je}.`),je}fetch(z){var ee=this;return(0,p.Z)(function*(){const[Ee,je]=yield Promise.all([ee.storage.getLastSuccessfulFetchTimestampMillis(),ee.storage.getLastSuccessfulFetchResponse()]);if(je&&ee.isCachedDataFresh(z.cacheMaxAgeMillis,Ee))return je;z.eTag=je&&je.eTag;const Xe=yield ee.client.fetch(z),Vt=[ee.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&Vt.push(ee.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(Vt),Xe})()}}function Ur(U=navigator){return U.languages&&U.languages[0]||U.language}class Fi{constructor(z,ee,Ee,je,Xe,Vt){this.firebaseInstallations=z,this.sdkVersion=ee,this.namespace=Ee,this.projectId=je,this.apiKey=Xe,this.appId=Vt}fetch(z){var ee=this;return(0,p.Z)(function*(){const[Ee,je]=yield Promise.all([ee.firebaseInstallations.getId(),ee.firebaseInstallations.getToken()]),Vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ee.projectId}/namespaces/${ee.namespace}:fetch?key=${ee.apiKey}`,Dn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},Pn={sdk_version:ee.sdkVersion,app_instance_id:Ee,app_instance_id_token:je,app_id:ee.appId,language_code:Ur()},en={method:"POST",headers:Dn,body:JSON.stringify(Pn)},ar=fetch(Vt,en),Mn=new Promise((ps,Io)=>{z.signal.addEventListener(()=>{const Ku=new Error("The operation was aborted.");Ku.name="AbortError",Io(Ku)})});let Yo;try{yield Promise.race([ar,Mn]),Yo=yield ar}catch(ps){let Io="fetch-client-network";throw"AbortError"===ps?.name&&(Io="fetch-timeout"),Tr.create(Io,{originalErrorMessage:ps?.message})}let fs=Yo.status;const eu=Yo.headers.get("ETag")||void 0;let _r,Vr;if(200===Yo.status){let ps;try{ps=yield Yo.json()}catch(Io){throw Tr.create("fetch-client-parse",{originalErrorMessage:Io?.message})}_r=ps.entries,Vr=ps.state}if("INSTANCE_STATE_UNSPECIFIED"===Vr?fs=500:"NO_CHANGE"===Vr?fs=304:("NO_TEMPLATE"===Vr||"EMPTY_CONFIG"===Vr)&&(_r={}),304!==fs&&200!==fs)throw Tr.create("fetch-status",{httpStatus:fs});return{status:fs,eTag:eu,config:_r}})()}}class Ce{constructor(z,ee){this.client=z,this.storage=ee}fetch(z){var ee=this;return(0,p.Z)(function*(){const Ee=(yield ee.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ee.attemptFetch(z,Ee)})()}attemptFetch(z,{throttleEndTimeMillis:ee,backoffCount:Ee}){var je=this;return(0,p.Z)(function*(){yield function Fs(U,z){return new Promise((ee,Ee)=>{const je=Math.max(z-Date.now(),0),Xe=setTimeout(ee,je);U.addEventListener(()=>{clearTimeout(Xe),Ee(Tr.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,ee);try{const Xe=yield je.client.fetch(z);return yield je.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function Ge(U){if(!(U instanceof Pe.ZR&&U.customData))return!1;const z=Number(U.customData.httpStatus);return 429===z||500===z||503===z||504===z}(Xe))throw Xe;const Vt={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(Ee),backoffCount:Ee+1};return yield je.storage.setThrottleMetadata(Vt),je.attemptFetch(z,Vt)}})()}}class Jt{constructor(z,ee,Ee,je,Xe){this.app=z,this._client=ee,this._storageCache=Ee,this._storage=je,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yn(U,z){const ee=U.target.error||void 0;return Tr.create(z,{originalErrorMessage:ee&&ee?.message})}const Vn="app_namespace_store";class si{constructor(z,ee,Ee,je=function Ks(){return new Promise((U,z)=>{try{const ee=indexedDB.open("firebase_remote_config",1);ee.onerror=Ee=>{z(yn(Ee,"storage-open"))},ee.onsuccess=Ee=>{U(Ee.target.result)},ee.onupgradeneeded=Ee=>{0===Ee.oldVersion&&Ee.target.result.createObjectStore(Vn,{keyPath:"compositeKey"})}}catch(ee){z(Tr.create("storage-open",{originalErrorMessage:ee?.message}))}})}()){this.appId=z,this.appName=ee,this.namespace=Ee,this.openDbPromise=je}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var ee=this;return(0,p.Z)(function*(){const Ee=yield ee.openDbPromise;return new Promise((je,Xe)=>{const Dn=Ee.transaction([Vn],"readonly").objectStore(Vn),Pn=ee.createCompositeKey(z);try{const en=Dn.get(Pn);en.onerror=ar=>{Xe(yn(ar,"storage-get"))},en.onsuccess=ar=>{const Mn=ar.target.result;je(Mn?Mn.value:void 0)}}catch(en){Xe(Tr.create("storage-get",{originalErrorMessage:en?.message}))}})})()}set(z,ee){var Ee=this;return(0,p.Z)(function*(){const je=yield Ee.openDbPromise;return new Promise((Xe,Vt)=>{const Pn=je.transaction([Vn],"readwrite").objectStore(Vn),en=Ee.createCompositeKey(z);try{const ar=Pn.put({compositeKey:en,value:ee});ar.onerror=Mn=>{Vt(yn(Mn,"storage-set"))},ar.onsuccess=()=>{Xe()}}catch(ar){Vt(Tr.create("storage-set",{originalErrorMessage:ar?.message}))}})})()}delete(z){var ee=this;return(0,p.Z)(function*(){const Ee=yield ee.openDbPromise;return new Promise((je,Xe)=>{const Dn=Ee.transaction([Vn],"readwrite").objectStore(Vn),Pn=ee.createCompositeKey(z);try{const en=Dn.delete(Pn);en.onerror=ar=>{Xe(yn(ar,"storage-delete"))},en.onsuccess=()=>{je()}}catch(en){Xe(Tr.create("storage-delete",{originalErrorMessage:en?.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class Rr{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,p.Z)(function*(){const ee=z.storage.getLastFetchStatus(),Ee=z.storage.getLastSuccessfulFetchTimestampMillis(),je=z.storage.getActiveConfig(),Xe=yield ee;Xe&&(z.lastFetchStatus=Xe);const Vt=yield Ee;Vt&&(z.lastSuccessfulFetchTimestampMillis=Vt);const Dn=yield je;Dn&&(z.activeConfig=Dn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function bs(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,p.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ls(){(0,Ie._registerComponent)(new xe.wA("remote-config",function U(z,{instanceIdentifier:ee}){const Ee=z.getProvider("app").getImmediate(),je=z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Tr.create("registration-window");if(!(0,Pe.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:Xe,apiKey:Vt,appId:Dn}=Ee.options;if(!Xe)throw Tr.create("registration-project-id");if(!Vt)throw Tr.create("registration-api-key");if(!Dn)throw Tr.create("registration-app-id");const Pn=new si(Dn,Ee.name,ee=ee||"firebase"),en=new Rr(Pn),ar=new He.Yd(Zn);ar.logLevel=He.in.ERROR;const Mn=new Fi(je,Ie.SDK_VERSION,ee,Xe,Vt,Dn),Yo=new Ce(Mn,Pn),fs=new Ws(Yo,Pn,en,ar),eu=new Jt(Ee,fs,en,Pn,ar);return function Zr(U){const z=(0,Pe.m9)(U);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(eu),eu},"PUBLIC").setMultipleInstances(!0)),(0,Ie.registerVersion)(Zn,"0.4.4"),(0,Ie.registerVersion)(Zn,"0.4.4","esm2017")}();const Zi="/firebase-messaging-sw.js",Oo="/firebase-cloud-messaging-push-scope",Go="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ta="https://fcmregistrations.googleapis.com/v1",na="google.c.a.c_id",ra="google.c.a.c_l",mo="google.c.a.ts",Es="google.c.a.e";var hs=(()=>{return(U=hs||(hs={})).PUSH_RECEIVED="push-received",U.NOTIFICATION_CLICKED="notification-clicked",hs;var U})();function Ys(U){const z=new Uint8Array(U);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ol(U){const ee=(U+"=".repeat((4-U.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ee=atob(ee),je=new Uint8Array(Ee.length);for(let Xe=0;Xe<Ee.length;++Xe)je[Xe]=Ee.charCodeAt(Xe);return je}const Sa="fcm_token_details_db",is=5,_o="fcm_token_object_Store";function Zs(){return Zs=(0,p.Z)(function*(U){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(Sa))return null;let z=null;return(yield(0,Le.X3)(Sa,is,{upgrade:(Ee=(0,p.Z)(function*(je,Xe,Vt,Dn){var Pn;if(Xe<2||!je.objectStoreNames.contains(_o))return;const en=Dn.objectStore(_o),ar=yield en.index("fcmSenderId").get(U);if(yield en.clear(),ar)if(2===Xe){const Mn=ar;if(!Mn.auth||!Mn.p256dh||!Mn.endpoint)return;z={token:Mn.fcmToken,createTime:null!==(Pn=Mn.createTime)&&void 0!==Pn?Pn:Date.now(),subscriptionOptions:{auth:Mn.auth,p256dh:Mn.p256dh,endpoint:Mn.endpoint,swScope:Mn.swScope,vapidKey:"string"==typeof Mn.vapidKey?Mn.vapidKey:Ys(Mn.vapidKey)}}}else if(3===Xe){const Mn=ar;z={token:Mn.fcmToken,createTime:Mn.createTime,subscriptionOptions:{auth:Ys(Mn.auth),p256dh:Ys(Mn.p256dh),endpoint:Mn.endpoint,swScope:Mn.swScope,vapidKey:Ys(Mn.vapidKey)}}}else if(4===Xe){const Mn=ar;z={token:Mn.fcmToken,createTime:Mn.createTime,subscriptionOptions:{auth:Ys(Mn.auth),p256dh:Ys(Mn.p256dh),endpoint:Mn.endpoint,swScope:Mn.swScope,vapidKey:Ys(Mn.vapidKey)}}}}),function(Xe,Vt,Dn,Pn){return Ee.apply(this,arguments)})})).close(),yield(0,Le.Lj)(Sa),yield(0,Le.Lj)("fcm_vapid_details_db"),yield(0,Le.Lj)("undefined"),function jo(U){if(!U||!U.subscriptionOptions)return!1;const{subscriptionOptions:z}=U;return"number"==typeof U.createTime&&U.createTime>0&&"string"==typeof U.token&&U.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}(z)?z:null;var Ee}),Zs.apply(this,arguments)}const al="firebase-messaging-database",Gr=1,Ki="firebase-messaging-store";let Js=null;function Qs(){return Js||(Js=(0,Le.X3)(al,Gr,{upgrade:(U,z)=>{0===z&&U.createObjectStore(Ki)}})),Js}function sa(U){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,p.Z)(function*(U){const z=Ds(U),Ee=yield(yield Qs()).transaction(Ki).objectStore(Ki).get(z);if(Ee)return Ee;{const je=yield function ws(U){return Zs.apply(this,arguments)}(U.appConfig.senderId);if(je)return yield Us(U,je),je}}),Xs.apply(this,arguments)}function Us(U,z){return ll.apply(this,arguments)}function ll(){return(ll=(0,p.Z)(function*(U,z){const ee=Ds(U),je=(yield Qs()).transaction(Ki,"readwrite");return yield je.objectStore(Ki).put(z,ee),yield je.done,z})).apply(this,arguments)}function Tl(){return(Tl=(0,p.Z)(function*(U){const z=Ds(U),Ee=(yield Qs()).transaction(Ki,"readwrite");yield Ee.objectStore(Ki).delete(z),yield Ee.done})).apply(this,arguments)}function Ds({appConfig:U}){return U.appId}const Or=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oa(U,z){return No.apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(U,z){const ee=yield Ho(U),Ee=mi(z),je={method:"POST",headers:ee,body:JSON.stringify(Ee)};let Xe;try{Xe=yield(yield fetch(ul(U.appConfig),je)).json()}catch(Vt){throw Or.create("token-subscribe-failed",{errorInfo:Vt?.toString()})}if(Xe.error)throw Or.create("token-subscribe-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Or.create("token-subscribe-no-token");return Xe.token})).apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(U,z){const ee=yield Ho(U),Ee=mi(z.subscriptionOptions),je={method:"PATCH",headers:ee,body:JSON.stringify(Ee)};let Xe;try{Xe=yield(yield fetch(`${ul(U.appConfig)}/${z.token}`,je)).json()}catch(Vt){throw Or.create("token-update-failed",{errorInfo:Vt?.toString()})}if(Xe.error)throw Or.create("token-update-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Or.create("token-update-no-token");return Xe.token})).apply(this,arguments)}function yo(U,z){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(U,z){const Ee={method:"DELETE",headers:yield Ho(U)};try{const Xe=yield(yield fetch(`${ul(U.appConfig)}/${z}`,Ee)).json();if(Xe.error)throw Or.create("token-unsubscribe-failed",{errorInfo:Xe.error.message})}catch(je){throw Or.create("token-unsubscribe-failed",{errorInfo:je?.toString()})}})).apply(this,arguments)}function ul({projectId:U}){return`${ta}/projects/${U}/registrations`}function Ho(U){return Is.apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*({appConfig:U,installations:z}){const ee=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U.apiKey,"x-goog-firebase-installations-auth":`FIS ${ee}`})})).apply(this,arguments)}function mi({p256dh:U,auth:z,endpoint:ee,vapidKey:Ee}){const je={web:{endpoint:ee,auth:z,p256dh:U}};return Ee!==Go&&(je.web.applicationPubKey=Ee),je}const Aa=6048e5;function vo(){return vo=(0,p.Z)(function*(U){const z=yield function cl(U,z){return la.apply(this,arguments)}(U.swRegistration,U.vapidKey),ee={vapidKey:U.vapidKey,swScope:U.swRegistration.scope,endpoint:z.endpoint,auth:Ys(z.getKey("auth")),p256dh:Ys(z.getKey("p256dh"))},Ee=yield sa(U.firebaseDependencies);if(Ee){if(function Kl(U,z){return z.vapidKey===U.vapidKey&&z.endpoint===U.endpoint&&z.auth===U.auth&&z.p256dh===U.p256dh}(Ee.subscriptionOptions,ee))return Date.now()>=Ee.createTime+Aa?function Sl(U,z){return Ln.apply(this,arguments)}(U,{token:Ee.token,createTime:Date.now(),subscriptionOptions:ee}):Ee.token;try{yield yo(U.firebaseDependencies,Ee.token)}catch(je){console.warn(je)}return bo(U.firebaseDependencies,ee)}return bo(U.firebaseDependencies,ee)}),vo.apply(this,arguments)}function aa(){return aa=(0,p.Z)(function*(U){const z=yield sa(U.firebaseDependencies);z&&(yield yo(U.firebaseDependencies,z.token),yield function za(U){return Tl.apply(this,arguments)}(U.firebaseDependencies));const ee=yield U.swRegistration.pushManager.getSubscription();return!ee||ee.unsubscribe()}),aa.apply(this,arguments)}function Ln(){return Ln=(0,p.Z)(function*(U,z){try{const ee=yield function Br(U,z){return Mi.apply(this,arguments)}(U.firebaseDependencies,z),Ee=Object.assign(Object.assign({},z),{token:ee,createTime:Date.now()});return yield Us(U.firebaseDependencies,Ee),ee}catch(ee){throw yield function Ji(U){return aa.apply(this,arguments)}(U),ee}}),Ln.apply(this,arguments)}function bo(U,z){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(U,z){const Ee={token:yield oa(U,z),createTime:Date.now(),subscriptionOptions:z};return yield Us(U,Ee),Ee.token})).apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(U,z){return(yield U.pushManager.getSubscription())||U.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ol(z)})})).apply(this,arguments)}function Mo(U){const z={from:U.from,collapseKey:U.collapse_key,messageId:U.fcmMessageId};return function Oa(U,z){if(!z.notification)return;U.notification={};const ee=z.notification.title;ee&&(U.notification.title=ee);const Ee=z.notification.body;Ee&&(U.notification.body=Ee);const je=z.notification.image;je&&(U.notification.image=je);const Xe=z.notification.icon;Xe&&(U.notification.icon=Xe)}(z,U),function j(U,z){z.data&&(U.data=z.data)}(z,U),function R(U,z){var ee,Ee,je,Xe,Vt;if(!(z.fcmOptions||null!==(ee=z.notification)&&void 0!==ee&&ee.click_action))return;U.fcmOptions={};const Dn=null!==(je=null===(Ee=z.fcmOptions)||void 0===Ee?void 0:Ee.link)&&void 0!==je?je:null===(Xe=z.notification)||void 0===Xe?void 0:Xe.click_action;Dn&&(U.fcmOptions.link=Dn);const Pn=null===(Vt=z.fcmOptions)||void 0===Vt?void 0:Vt.analytics_label;Pn&&(U.fcmOptions.analyticsLabel=Pn)}(z,U),z}function oe(U,z){const ee=[];for(let Ee=0;Ee<U.length;Ee++)ee.push(U.charAt(Ee)),Ee<z.length&&ee.push(z.charAt(Ee));return ee.join("")}function ln(U){return Or.create("missing-app-config-values",{valueName:U})}oe("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oe("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jr{constructor(z,ee,Ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const je=function ct(U){if(!U||!U.options)throw ln("App Configuration Object");if(!U.name)throw ln("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:ee}=U;for(const Ee of z)if(!ee[Ee])throw ln(Ee);return{appName:U.name,projectId:ee.projectId,apiKey:ee.apiKey,appId:ee.appId,senderId:ee.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:je,installations:ee,analyticsProvider:Ee}}_delete(){return Promise.resolve()}}function Li(U){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(U){try{U.swRegistration=yield navigator.serviceWorker.register(Zi,{scope:Oo}),U.swRegistration.update().catch(()=>{})}catch(z){throw Or.create("failed-service-worker-registration",{browserErrorMessage:z?.message})}})).apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(U,z){if(!z&&!U.swRegistration&&(yield Li(U)),z||!U.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw Or.create("invalid-sw-registration");U.swRegistration=z}})).apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(U,z){z?U.vapidKey=z:U.vapidKey||(U.vapidKey=Go)})).apply(this,arguments)}function _i(){return _i=(0,p.Z)(function*(U,z){if(!navigator)throw Or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Or.create("permission-blocked");return yield function Vs(U,z){return Na.apply(this,arguments)}(U,z?.vapidKey),yield function so(U,z){return oo.apply(this,arguments)}(U,z?.serviceWorkerRegistration),function Wa(U){return vo.apply(this,arguments)}(U)}),_i.apply(this,arguments)}function ua(){return(ua=(0,p.Z)(function*(U,z,ee){const Ee=function ca(U){switch(U){case hs.NOTIFICATION_CLICKED:return"notification_open";case hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(z);(yield U.firebaseDependencies.analyticsProvider.get()).logEvent(Ee,{message_id:ee[na],message_name:ee[ra],message_time:ee[mo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zo(){return zo=(0,p.Z)(function*(U,z){const ee=z.data;if(!ee.isFirebaseMessaging)return;U.onMessageHandler&&ee.messageType===hs.PUSH_RECEIVED&&("function"==typeof U.onMessageHandler?U.onMessageHandler(Mo(ee)):U.onMessageHandler.next(Mo(ee)));const Ee=ee.data;(function F(U){return"object"==typeof U&&!!U&&na in U})(Ee)&&"1"===Ee[Es]&&(yield function ss(U,z,ee){return ua.apply(this,arguments)}(U,ee.messageType,Ee))}),zo.apply(this,arguments)}const Ma="@firebase/messaging",Ra=U=>{const z=new jr(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),U.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ee=>function Cs(U,z){return zo.apply(this,arguments)}(z,ee)),z},Wo=U=>{const z=U.getProvider("messaging").getImmediate();return{getToken:Ee=>function Al(U,z){return _i.apply(this,arguments)}(z,Ee)}};function Ol(){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(){try{yield(0,Pe.eu)()}catch{return!1}return typeof window<"u"&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ka(){(0,Ie._registerComponent)(new xe.wA("messaging",Ra,"PUBLIC")),(0,Ie._registerComponent)(new xe.wA("messaging-internal",Wo,"PRIVATE")),(0,Ie.registerVersion)(Ma,"0.12.4"),(0,Ie.registerVersion)(Ma,"0.12.4","esm2017")}();const pl="analytics",Vu="firebase_id",Ui="origin",yi=6e4,ui="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ql="https://www.googletagmanager.com/gtag/js",Bi=new He.Yd("@firebase/analytics");function Gu(U){return Promise.all(U.map(z=>z.catch(ee=>ee)))}function gl(){return(gl=(0,p.Z)(function*(U,z,ee,Ee,je,Xe){const Vt=Ee[je];try{if(Vt)yield z[Vt];else{const Pn=(yield Gu(ee)).find(en=>en.measurementId===je);Pn&&(yield z[Pn.appId])}}catch(Dn){Bi.error(Dn)}U("config",je,Xe)})).apply(this,arguments)}function P(){return(P=(0,p.Z)(function*(U,z,ee,Ee,je){try{let Xe=[];if(je&&je.send_to){let Vt=je.send_to;Array.isArray(Vt)||(Vt=[Vt]);const Dn=yield Gu(ee);for(const Pn of Vt){const en=Dn.find(Mn=>Mn.measurementId===Pn),ar=en&&z[en.appId];if(!ar){Xe=[];break}Xe.push(ar)}}0===Xe.length&&(Xe=Object.values(z)),yield Promise.all(Xe),U("event",Ee,je||{})}catch(Xe){Bi.error(Xe)}})).apply(this,arguments)}const Ye=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Nt=30,It=new class xr{constructor(z={},ee=1e3){this.throttleMetadata=z,this.intervalMillis=ee}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,ee){this.throttleMetadata[z]=ee}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function xn(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function ir(){return(ir=(0,p.Z)(function*(U){var z;const{appId:ee,apiKey:Ee}=U,je={method:"GET",headers:xn(Ee)},Xe=ui.replace("{app-id}",ee),Vt=yield fetch(Xe,je);if(200!==Vt.status&&304!==Vt.status){let Dn="";try{const Pn=yield Vt.json();null!==(z=Pn.error)&&void 0!==z&&z.message&&(Dn=Pn.error.message)}catch{}throw Ye.create("config-fetch-failed",{httpStatus:Vt.status,responseMessage:Dn})}return Vt.json()})).apply(this,arguments)}function tn(){return(tn=(0,p.Z)(function*(U,z=It,ee){const{appId:Ee,apiKey:je,measurementId:Xe}=U.options;if(!Ee)throw Ye.create("no-app-id");if(!je){if(Xe)return{measurementId:Xe,appId:Ee};throw Ye.create("no-api-key")}const Vt=z.getThrottleMetadata(Ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dn=new ci;return setTimeout((0,p.Z)(function*(){Dn.abort()}),void 0!==ee?ee:yi),Ko({appId:Ee,apiKey:je,measurementId:Xe},Vt,Dn,z)})).apply(this,arguments)}function Ko(U,z,ee){return qt.apply(this,arguments)}function qt(){return qt=(0,p.Z)(function*(U,{throttleEndTimeMillis:z,backoffCount:ee},Ee,je=It){var Xe;const{appId:Vt,measurementId:Dn}=U;try{yield function at(U,z){return new Promise((ee,Ee)=>{const je=Math.max(z-Date.now(),0),Xe=setTimeout(ee,je);U.addEventListener(()=>{clearTimeout(Xe),Ee(Ye.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(Ee,z)}catch(Pn){if(Dn)return Bi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dn} provided in the "measurementId" field in the local Firebase config. [${Pn?.message}]`),{appId:Vt,measurementId:Dn};throw Pn}try{const Pn=yield function Qn(U){return ir.apply(this,arguments)}(U);return je.deleteThrottleMetadata(Vt),Pn}catch(Pn){const en=Pn;if(!function Rt(U){if(!(U instanceof Pe.ZR&&U.customData))return!1;const z=Number(U.customData.httpStatus);return 429===z||500===z||503===z||504===z}(en)){if(je.deleteThrottleMetadata(Vt),Dn)return Bi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dn} provided in the "measurementId" field in the local Firebase config. [${en?.message}]`),{appId:Vt,measurementId:Dn};throw Pn}const ar=503===Number(null===(Xe=en?.customData)||void 0===Xe?void 0:Xe.httpStatus)?(0,Pe.$s)(ee,je.intervalMillis,Nt):(0,Pe.$s)(ee,je.intervalMillis),Mn={throttleEndTimeMillis:Date.now()+ar,backoffCount:ee+1};return je.setThrottleMetadata(Vt,Mn),Bi.debug(`Calling attemptFetch again in ${ar} millis`),Ko(U,Mn,Ee,je)}}),qt.apply(this,arguments)}class ci{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}let Ro,mn;function _l(){return(_l=(0,p.Z)(function*(U,z,ee,Ee,je){if(je&&je.global)U("event",ee,Ee);else{const Xe=yield z;U("event",ee,Object.assign(Object.assign({},Ee),{send_to:Xe}))}})).apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(){if(!(0,Pe.hl)())return Bi.warn(Ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(U){return Bi.warn(Ye.create("indexeddb-unavailable",{errorInfo:U?.toString()}).message),!1}return!0})).apply(this,arguments)}function mr(){return mr=(0,p.Z)(function*(U,z,ee,Ee,je,Xe,Vt){var Dn;const Pn=function $t(U){return tn.apply(this,arguments)}(U);Pn.then(fs=>{ee[fs.measurementId]=fs.appId,U.options.measurementId&&fs.measurementId!==U.options.measurementId&&Bi.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${fs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fs=>Bi.error(fs)),z.push(Pn);const en=function dr(){return wn.apply(this,arguments)}().then(fs=>{if(fs)return Ee.getId()}),[ar,Mn]=yield Promise.all([Pn,en]);(function ne(U){const z=window.document.getElementsByTagName("script");for(const ee of Object.values(z))if(ee.src&&ee.src.includes(ql)&&ee.src.includes(U))return ee;return null})(Xe)||function Ec(U,z){const ee=document.createElement("script");ee.src=`${ql}?l=${U}&id=${z}`,ee.async=!0,document.head.appendChild(ee)}(Xe,ar.measurementId),mn&&(je("consent","default",mn),function Hr(U){mn=U}(void 0)),je("js",new Date);const Yo=null!==(Dn=Vt?.config)&&void 0!==Dn?Dn:{};return Yo[Ui]="firebase",Yo.update=!0,null!=Mn&&(Yo[Vu]=Mn),je("config",ar.measurementId,Yo),Ro&&(je("set",Ro),function pa(U){Ro=U}(void 0)),ar.measurementId}),mr.apply(this,arguments)}class wc{constructor(z){this.app=z}_delete(){return delete hr[this.app.options.appId],Promise.resolve()}}let hr={},on=[];const Rl={};let ju,oi,ga="dataLayer",Ts="gtag",Ya=!1;function xl(U,z,ee){!function cd(){const U=[];if((0,Pe.ru)()&&U.push("This is a browser extension environment."),(0,Pe.zI)()||U.push("Cookies are not available."),U.length>0){const z=U.map((Ee,je)=>`(${je+1}) ${Ee}`).join(" "),ee=Ye.create("invalid-analytics-context",{errorInfo:z});Bi.warn(ee.message)}}();const Ee=U.options.appId;if(!Ee)throw Ye.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw Ye.create("no-api-key");Bi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=hr[Ee])throw Ye.create("already-exists",{id:Ee});if(!Ya){!function Nl(U){let z=[];Array.isArray(window[U])?z=window[U]:window[U]=z}(ga);const{wrappedGtag:Xe,gtagCore:Vt}=function B(U,z,ee,Ee,je){let Xe=function(...Vt){window[Ee].push(arguments)};return window[je]&&"function"==typeof window[je]&&(Xe=window[je]),window[je]=function K(U,z,ee,Ee){function Xe(){return Xe=(0,p.Z)(function*(Vt,Dn,Pn){try{"event"===Vt?yield function ha(U,z,ee,Ee,je){return P.apply(this,arguments)}(U,z,ee,Dn,Pn):"config"===Vt?yield function Yl(U,z,ee,Ee,je,Xe){return gl.apply(this,arguments)}(U,z,ee,Ee,Dn,Pn):"consent"===Vt?U("consent","update",Pn):U("set",Dn)}catch(en){Bi.error(en)}}),Xe.apply(this,arguments)}return function je(Vt,Dn,Pn){return Xe.apply(this,arguments)}}(Xe,U,z,ee),{gtagCore:Xe,wrappedGtag:window[je]}}(hr,on,Rl,ga,Ts);oi=Xe,ju=Vt,Ya=!0}return hr[Ee]=function qa(U,z,ee,Ee,je,Xe,Vt){return mr.apply(this,arguments)}(U,on,Rl,z,ju,ga,ee),new wc(U)}function Hu(){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,p.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}const qo="@firebase/analytics";!function yl(){(0,Ie._registerComponent)(new xe.wA(pl,(z,{options:ee})=>xl(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),ee),"PUBLIC")),(0,Ie._registerComponent)(new xe.wA("analytics-internal",function U(z){try{const ee=z.getProvider(pl).getImmediate();return{logEvent:(Ee,je,Xe)=>function La(U,z,ee,Ee){U=(0,Pe.m9)(U),function ml(U,z,ee,Ee,je){return _l.apply(this,arguments)}(oi,hr[U.app.options.appId],z,ee,Ee).catch(je=>Bi.error(je))}(ee,Ee,je,Xe)}}catch(ee){throw Ye.create("interop-component-reg-failed",{reason:ee})}},"PRIVATE")),(0,Ie.registerVersion)(qo,"0.9.4"),(0,Ie.registerVersion)(qo,"0.9.4","esm2017")}();var dh=G(4408),Ja=G(7565);const ao=new class Qa extends Ja.v{}(class $u extends dh.o{constructor(z,ee){super(z,ee),this.scheduler=z,this.work=ee}schedule(z,ee=0){return ee>0?super.schedule(z,ee):(this.delay=ee,this.state=z,this.scheduler.flush(this),this)}execute(z,ee){return ee>0||this.closed?super.execute(z,ee):this._execute(z,ee)}requestAsyncId(z,ee,Ee=0){return null!=Ee&&Ee>0||null==Ee&&this.delay>0?super.requestAsyncId(z,ee,Ee):(z.flush(this),0)}});var ya=G(4986),Pl=G(8505),zu=G(5363),vi=G(9468);const gu=new b.GfV("7.5.0"),wo="__angularfire_symbol__analyticsIsSupportedValue",kl="__angularfire_symbol__analyticsIsSupported",bi="__angularfire_symbol__remoteConfigIsSupportedValue",lo="__angularfire_symbol__remoteConfigIsSupported",Wu="__angularfire_symbol__messagingIsSupportedValue",T="__angularfire_symbol__messagingIsSupported";function J(U,z,ee){if(z){if(1===z.length)return z[0];const Xe=z.filter(Vt=>Vt.app===ee);if(1===Xe.length)return Xe[0]}return ee.container.getProvider(U).getImmediate({optional:!0})}globalThis[kl]||(globalThis[kl]=Hu().then(U=>globalThis[wo]=U).catch(()=>globalThis[wo]=!1)),globalThis[T]||(globalThis[T]=Ol().then(U=>globalThis[Wu]=U).catch(()=>globalThis[Wu]=!1)),globalThis[lo]||(globalThis[lo]=bs().then(U=>globalThis[bi]=U).catch(()=>globalThis[bi]=!1));const se=(U,z)=>{const ee=z?[z]:(0,Z.C6)(),Ee=[];return ee.forEach(je=>{je.container.getProvider(U).instances.forEach(Vt=>{Ee.includes(Vt)||Ee.push(Vt)})}),Ee};function Ue(){}class St{constructor(z,ee=ao){this.zone=z,this.delegate=ee}now(){return this.delegate.now()}schedule(z,ee,Ee){const je=this.zone;return this.delegate.schedule(function(Vt){je.runGuarded(()=>{z.apply(this,[Vt])})},ee,Ee)}}class cn{constructor(z){this.zone=z,this.task=null}call(z,ee){const Ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ue,{},Ue,Ue)),ee.pipe((0,Pl.b)({next:Ee,complete:Ee,error:Ee})).subscribe(z).add(Ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let an=(()=>{class U{constructor(ee){this.ngZone=ee,this.outsideAngular=ee.runOutsideAngular(()=>new St(Zone.current)),this.insideAngular=ee.run(()=>new St(Zone.current,ya.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return U.\u0275fac=function(ee){return new(ee||U)(b.LFG(b.R0b))},U.\u0275prov=b.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function sr(){const U=globalThis.\u0275AngularFireScheduler;if(!U)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return U}function uo(U){return U.pipe((0,zu.Q)(sr().outsideAngular))}function to(U){return sr(),function va(U){return function(ee){return(ee=ee.lift(new cn(U.ngZone))).pipe((0,vi.R)(U.outsideAngular),(0,zu.Q)(U.insideAngular))}}(sr())(U)}},5114:(sn,qe,G)=>{G.d(qe,{$:()=>ul,A:()=>ve,B:()=>Ke,G:()=>Ps,H:()=>Xr,J:()=>Ce,L:()=>bt,M:()=>Vo,N:()=>ta,P:()=>ya,Q:()=>na,R:()=>Za,T:()=>ra,U:()=>Go,V:()=>hs,W:()=>Ys,X:()=>ws,Y:()=>Bs,Z:()=>oa,_:()=>Br,a:()=>vn,a0:()=>Wa,a1:()=>Ji,a2:()=>Sl,a3:()=>bo,a4:()=>cl,a5:()=>Kl,a6:()=>Oa,a7:()=>j,a8:()=>F,a9:()=>oe,aA:()=>he,aB:()=>Pn,aC:()=>uo,aD:()=>Vi,aE:()=>Cr,aI:()=>xn,aL:()=>Es,aa:()=>Li,ab:()=>so,ac:()=>Vs,af:()=>ss,ag:()=>ca,ah:()=>Cs,ak:()=>Ki,al:()=>Pa,an:()=>ql,ao:()=>gl,ap:()=>We,aq:()=>st,ar:()=>ge,as:()=>yt,at:()=>mu,au:()=>ps,av:()=>Ct,aw:()=>mt,ax:()=>Se,ay:()=>fs,az:()=>wt,b:()=>Ye,c:()=>Wu,d:()=>x,e:()=>S,f:()=>va,g:()=>Ee,h:()=>U,i:()=>wn,j:()=>Vt,k:()=>jp,l:()=>ai,m:()=>Im,o:()=>Le,r:()=>dh,s:()=>Ql,u:()=>ao});var b=G(5861),Z=G(2090),p=G(9681),Ie=G(1877),Pe=G(655),xe=G(4859);const Le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ke=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_t=function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xt=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gt=new Ie.Yd("@firebase/auth");function we(A,...v){gt.logLevel<=Ie.in.ERROR&&gt.error(`Auth (${p.SDK_VERSION}): ${A}`,...v)}function yt(A,...v){throw Ft(A,...v)}function mt(A,...v){return Ft(A,...v)}function ot(A,v,E){const N=Object.assign(Object.assign({},_t()),{[v]:E});return new Z.LL("auth","Firebase",N).create(v,{appName:A.name})}function ze(A,v,E){if(!(v instanceof E))throw E.name!==v.constructor.name&&yt(A,"argument-error"),ot(A,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ft(A,...v){if("string"!=typeof A){const E=v[0],N=[...v.slice(1)];return N[0]&&(N[0].appName=A.name),A._errorFactory.create(E,...N)}return xt.create(A,...v)}function Se(A,v,...E){if(!A)throw Ft(v,...E)}function Te(A){const v="INTERNAL ASSERTION FAILED: "+A;throw we(v),new Error(v)}function We(A,v){A||Te(v)}const ft=new Map;function wt(A){We(A instanceof Function,"Expected a class definition");let v=ft.get(A);return v?(We(v instanceof A,"Instance stored in cache mismatched with class"),v):(v=new A,ft.set(A,v),v)}function $e(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function ut(){return"http:"===Qe()||"https:"===Qe()}function Qe(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class ht{constructor(v,E){this.shortDelay=v,this.longDelay=E,We(E>v,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bt(A,v){We(A.emulator,"Emulator should always be set here");const{url:E}=A.emulator;return v?`${E}${v.startsWith("/")?v.slice(1):v}`:E}class At{static initialize(v,E,N){this.fetchImpl=v,E&&(this.headersImpl=E),N&&(this.responseImpl=N)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new ht(3e4,6e4);function nn(A,v){return A.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:A.tenantId}):v}function Tt(A,v,E,N){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,b.Z)(function*(A,v,E,N,Q={}){return Un(A,Q,(0,b.Z)(function*(){let ce={},rt={};N&&("GET"===v?rt=N:ce={body:JSON.stringify(N)});const Ut=(0,Z.xO)(Object.assign({key:A.config.apiKey},rt)).slice(1),bn=yield A._getAdditionalHeaders();return bn["Content-Type"]="application/json",A.languageCode&&(bn["X-Firebase-Locale"]=A.languageCode),At.fetch()(zn(A,A.config.apiHost,E,Ut),Object.assign({method:v,headers:bn,referrerPolicy:"no-referrer"},ce))}))})).apply(this,arguments)}function Un(A,v,E){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,b.Z)(function*(A,v,E){A._canInitEmulator=!1;const N=Object.assign(Object.assign({},hn),v);try{const Q=new Bn(A),ce=yield Promise.race([E(),Q.promise]);Q.clearNetworkTimeout();const rt=yield ce.json();if("needConfirmation"in rt)throw kn(A,"account-exists-with-different-credential",rt);if(ce.ok&&!("errorMessage"in rt))return rt;{const Ut=ce.ok?rt.errorMessage:rt.error.message,[bn,Rn]=Ut.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===bn)throw kn(A,"credential-already-in-use",rt);if("EMAIL_EXISTS"===bn)throw kn(A,"email-already-in-use",rt);if("USER_DISABLED"===bn)throw kn(A,"user-disabled",rt);const fr=N[bn]||bn.toLowerCase().replace(/[_\s]+/g,"-");if(Rn)throw ot(A,fr,Rn);yt(A,fr)}}catch(Q){if(Q instanceof Z.ZR)throw Q;yt(A,"internal-error",{message:String(Q)})}})).apply(this,arguments)}function jn(A,v,E,N){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,b.Z)(function*(A,v,E,N,Q={}){const ce=yield Tt(A,v,E,N,Q);return"mfaPendingCredential"in ce&&yt(A,"multi-factor-auth-required",{_serverResponse:ce}),ce})).apply(this,arguments)}function zn(A,v,E,N){const Q=`${v}${E}?${N}`;return A.config.emulator?Bt(A.config,Q):`${A.config.apiScheme}://${Q}`}class Bn{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((E,N)=>{this.timer=setTimeout(()=>N(mt(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(A,v,E){const N={appName:A.name};E.email&&(N.email=E.email),E.phoneNumber&&(N.phoneNumber=E.phoneNumber);const Q=mt(A,v,N);return Q.customData._tokenResponse=E,Q}function tr(){return(tr=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function On(){return(On=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function vr(){return(vr=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function ti(A){if(A)try{const v=new Date(Number(A));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function Kr(){return(Kr=(0,b.Z)(function*(A,v=!1){const E=(0,Z.m9)(A),N=yield E.getIdToken(v),Q=fn(N);Se(Q&&Q.exp&&Q.auth_time&&Q.iat,E.auth,"internal-error");const ce="object"==typeof Q.firebase?Q.firebase:void 0,rt=ce?.sign_in_provider;return{claims:Q,token:N,authTime:ti(In(Q.auth_time)),issuedAtTime:ti(In(Q.iat)),expirationTime:ti(In(Q.exp)),signInProvider:rt||null,signInSecondFactor:ce?.sign_in_second_factor||null}})).apply(this,arguments)}function In(A){return 1e3*Number(A)}function fn(A){const[v,E,N]=A.split(".");if(void 0===v||void 0===E||void 0===N)return we("JWT malformed, contained fewer than 3 sections"),null;try{const Q=(0,Z.tV)(E);return Q?JSON.parse(Q):(we("Failed to decode base64 JWT payload"),null)}catch(Q){return we("Caught error parsing JWT payload as JSON",Q?.toString()),null}}function Wn(A,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,b.Z)(function*(A,v,E=!1){if(E)return v;try{return yield v}catch(N){throw N instanceof Z.ZR&&function gn({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(N)&&A.auth.currentUser===A&&(yield A.auth.signOut()),N}})).apply(this,arguments)}class rr{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var E;if(v){const N=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),N}{this.errorBackoff=3e4;const Q=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,Q)}}schedule(v=!1){var E=this;if(!this.isRunning)return;const N=this.getInterval(v);this.timerId=setTimeout((0,b.Z)(function*(){yield E.iteration()}),N)}iteration(){var v=this;return(0,b.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&v.schedule(!0))}v.schedule()})()}}class ni{constructor(v,E){this.createdAt=v,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=ti(this.lastLoginAt),this.creationTime=ti(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qr(A){return Cn.apply(this,arguments)}function Cn(){return Cn=(0,b.Z)(function*(A){var v;const E=A.auth,N=yield A.getIdToken(),Q=yield Wn(A,function Pt(A,v){return vr.apply(this,arguments)}(E,{idToken:N}));Se(Q?.users.length,E,"internal-error");const ce=Q.users[0];A._notifyReloadListener(ce);const rt=null!==(v=ce.providerUserInfo)&&void 0!==v&&v.length?function br(A){return A.map(v=>{var{providerId:E}=v,N=(0,Pe._T)(v,["providerId"]);return{providerId:E,uid:N.rawId||"",displayName:N.displayName||null,email:N.email||null,phoneNumber:N.phoneNumber||null,photoURL:N.photoUrl||null}})}(ce.providerUserInfo):[],Ut=function Ir(A,v){return[...A.filter(N=>!v.some(Q=>Q.providerId===N.providerId)),...v]}(A.providerData,rt),fr=!!A.isAnonymous&&!(A.email&&ce.passwordHash||Ut?.length),xi={uid:ce.localId,displayName:ce.displayName||null,photoURL:ce.photoUrl||null,email:ce.email||null,emailVerified:ce.emailVerified||!1,phoneNumber:ce.phoneNumber||null,tenantId:ce.tenantId||null,providerData:Ut,metadata:new ni(ce.createdAt,ce.lastLoginAt),isAnonymous:fr};Object.assign(A,xi)}),Cn.apply(this,arguments)}function Sn(){return(Sn=(0,b.Z)(function*(A){const v=(0,Z.m9)(A);yield qr(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function Et(){return(Et=(0,b.Z)(function*(A,v){const E=yield Un(A,{},(0,b.Z)(function*(){const N=(0,Z.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:Q,apiKey:ce}=A.config,rt=zn(A,Q,"/v1/token",`key=${ce}`),Ut=yield A._getAdditionalHeaders();return Ut["Content-Type"]="application/x-www-form-urlencoded",At.fetch()(rt,{method:"POST",headers:Ut,body:N})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class Fe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Se(v.idToken,"internal-error"),Se(typeof v.idToken<"u","internal-error"),Se(typeof v.refreshToken<"u","internal-error");const E="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function Zt(A){const v=fn(A);return Se(v,"internal-error"),Se(typeof v.exp<"u","internal-error"),Se(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,E)}getToken(v,E=!1){var N=this;return(0,b.Z)(function*(){return Se(!N.accessToken||N.refreshToken,v,"user-token-expired"),E||!N.accessToken||N.isExpired?N.refreshToken?(yield N.refresh(v,N.refreshToken),N.accessToken):null:N.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,E){var N=this;return(0,b.Z)(function*(){const{accessToken:Q,refreshToken:ce,expiresIn:rt}=yield function Lt(A,v){return Et.apply(this,arguments)}(v,E);N.updateTokensAndExpiration(Q,ce,Number(rt))})()}updateTokensAndExpiration(v,E,N){this.refreshToken=E||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*N}static fromJSON(v,E){const{refreshToken:N,accessToken:Q,expirationTime:ce}=E,rt=new Fe;return N&&(Se("string"==typeof N,"internal-error",{appName:v}),rt.refreshToken=N),Q&&(Se("string"==typeof Q,"internal-error",{appName:v}),rt.accessToken=Q),ce&&(Se("number"==typeof ce,"internal-error",{appName:v}),rt.expirationTime=ce),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Fe,this.toJSON())}_performRefresh(){return Te("not implemented")}}function me(A,v){Se("string"==typeof A||typeof A>"u","internal-error",{appName:v})}class De{constructor(v){var{uid:E,auth:N,stsTokenManager:Q}=v,ce=(0,Pe._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=N,this.stsTokenManager=Q,this.accessToken=Q.accessToken,this.displayName=ce.displayName||null,this.email=ce.email||null,this.emailVerified=ce.emailVerified||!1,this.phoneNumber=ce.phoneNumber||null,this.photoURL=ce.photoURL||null,this.isAnonymous=ce.isAnonymous||!1,this.tenantId=ce.tenantId||null,this.providerData=ce.providerData?[...ce.providerData]:[],this.metadata=new ni(ce.createdAt||void 0,ce.lastLoginAt||void 0)}getIdToken(v){var E=this;return(0,b.Z)(function*(){const N=yield Wn(E,E.stsTokenManager.getToken(E.auth,v));return Se(N,E.auth,"internal-error"),E.accessToken!==N&&(E.accessToken=N,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),N})()}getIdTokenResult(v){return function Wr(A){return Kr.apply(this,arguments)}(this,v)}reload(){return function cr(A){return Sn.apply(this,arguments)}(this)}_assign(v){this!==v&&(Se(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(E=>Object.assign({},E)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const E=new De(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return E.metadata._copy(this.metadata),E}_onReload(v){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,E=!1){var N=this;return(0,b.Z)(function*(){let Q=!1;v.idToken&&v.idToken!==N.stsTokenManager.accessToken&&(N.stsTokenManager.updateFromServerResponse(v),Q=!0),E&&(yield qr(N)),yield N.auth._persistUserIfCurrent(N),Q&&N.auth._notifyListenersIfCurrent(N)})()}delete(){var v=this;return(0,b.Z)(function*(){const E=yield v.getIdToken();return yield Wn(v,function Yn(A,v){return tr.apply(this,arguments)}(v.auth,{idToken:E})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,E){var N,Q,ce,rt,Ut,bn,Rn,fr;const xi=null!==(N=E.displayName)&&void 0!==N?N:void 0,ba=null!==(Q=E.email)&&void 0!==Q?Q:void 0,Po=null!==(ce=E.phoneNumber)&&void 0!==ce?ce:void 0,el=null!==(rt=E.photoURL)&&void 0!==rt?rt:void 0,Eh=null!==(Ut=E.tenantId)&&void 0!==Ut?Ut:void 0,Ea=null!==(bn=E._redirectEventId)&&void 0!==bn?bn:void 0,md=null!==(Rn=E.createdAt)&&void 0!==Rn?Rn:void 0,Ua=null!==(fr=E.lastLoginAt)&&void 0!==fr?fr:void 0,{uid:Fl,emailVerified:nu,isAnonymous:ru,providerData:wh,stsTokenManager:_d}=E;Se(Fl&&_d,v,"internal-error");const wi=Fe.fromJSON(this.name,_d);Se("string"==typeof Fl,v,"internal-error"),me(xi,v.name),me(ba,v.name),Se("boolean"==typeof nu,v,"internal-error"),Se("boolean"==typeof ru,v,"internal-error"),me(Po,v.name),me(el,v.name),me(Eh,v.name),me(Ea,v.name),me(md,v.name),me(Ua,v.name);const Yu=new De({uid:Fl,auth:v,email:ba,emailVerified:nu,displayName:xi,isAnonymous:ru,photoURL:el,phoneNumber:Po,tenantId:Eh,stsTokenManager:wi,createdAt:md,lastLoginAt:Ua});return wh&&Array.isArray(wh)&&(Yu.providerData=wh.map(wf=>Object.assign({},wf))),Ea&&(Yu._redirectEventId=Ea),Yu}static _fromIdTokenResponse(v,E,N=!1){return(0,b.Z)(function*(){const Q=new Fe;Q.updateFromServerResponse(E);const ce=new De({uid:E.localId,auth:v,stsTokenManager:Q,isAnonymous:N});return yield qr(ce),ce})()}}const bt=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(E,N){var Q=this;return(0,b.Z)(function*(){Q.storage[E]=N})()}_get(E){var N=this;return(0,b.Z)(function*(){const Q=N.storage[E];return void 0===Q?null:Q})()}_remove(E){var N=this;return(0,b.Z)(function*(){delete N.storage[E]})()}_addListener(E,N){}_removeListener(E,N){}}return A.type="NONE",A})();function he(A,v,E){return`firebase:${A}:${v}:${E}`}class fe{constructor(v,E,N){this.persistence=v,this.auth=E,this.userKey=N;const{config:Q,name:ce}=this.auth;this.fullUserKey=he(this.userKey,Q.apiKey,ce),this.fullPersistenceKey=he("persistence",Q.apiKey,ce),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,b.Z)(function*(){const E=yield v.persistence._get(v.fullUserKey);return E?De._fromJSON(v.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var E=this;return(0,b.Z)(function*(){if(E.persistence===v)return;const N=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=v,N?E.setCurrentUser(N):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,E,N="authUser"){return(0,b.Z)(function*(){if(!E.length)return new fe(wt(bt),v,N);const Q=(yield Promise.all(E.map(function(){var Rn=(0,b.Z)(function*(fr){if(yield fr._isAvailable())return fr});return function(fr){return Rn.apply(this,arguments)}}()))).filter(Rn=>Rn);let ce=Q[0]||wt(bt);const rt=he(N,v.config.apiKey,v.name);let Ut=null;for(const Rn of E)try{const fr=yield Rn._get(rt);if(fr){const xi=De._fromJSON(v,fr);Rn!==ce&&(Ut=xi),ce=Rn;break}}catch{}const bn=Q.filter(Rn=>Rn._shouldAllowMigration);return ce._shouldAllowMigration&&bn.length?(ce=bn[0],Ut&&(yield ce._set(rt,Ut.toJSON())),yield Promise.all(E.map(function(){var Rn=(0,b.Z)(function*(fr){if(fr!==ce)try{yield fr._remove(rt)}catch{}});return function(fr){return Rn.apply(this,arguments)}}())),new fe(ce,v,N)):new fe(ce,v,N)})()}}function te(A){const v=A.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(de(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(ie(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(le(v))return"Blackberry";if(Re(v))return"Webos";if(X(v))return"Safari";if((v.includes("chrome/")||Ve(v))&&!v.includes("edge/"))return"Chrome";if(ge(v))return"Android";{const N=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===N?.length)return N[1]}return"Other"}function ie(A=(0,Z.z$)()){return/firefox\//i.test(A)}function X(A=(0,Z.z$)()){const v=A.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Ve(A=(0,Z.z$)()){return/crios\//i.test(A)}function de(A=(0,Z.z$)()){return/iemobile/i.test(A)}function ge(A=(0,Z.z$)()){return/android/i.test(A)}function le(A=(0,Z.z$)()){return/blackberry/i.test(A)}function Re(A=(0,Z.z$)()){return/webos/i.test(A)}function st(A=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function Ct(A=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function En(A=(0,Z.z$)()){return st(A)||ge(A)||Re(A)||le(A)||/windows phone/i.test(A)||de(A)}function Qr(A,v=[]){let E;switch(A){case"Browser":E=te((0,Z.z$)());break;case"Worker":E=`${te((0,Z.z$)())}-${A}`;break;default:E=A}const N=v.length?v.join(","):"FirebaseCore-web";return`${E}/JsCore/${p.SDK_VERSION}/${N}`}class es{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,E){const N=ce=>new Promise((rt,Ut)=>{try{rt(v(ce))}catch(bn){Ut(bn)}});N.onAbort=E,this.queue.push(N);const Q=this.queue.length-1;return()=>{this.queue[Q]=()=>Promise.resolve()}}runMiddleware(v){var E=this;return(0,b.Z)(function*(){if(E.auth.currentUser===v)return;const N=[];try{for(const Q of E.queue)yield Q(v),Q.onAbort&&N.push(Q.onAbort)}catch(Q){N.reverse();for(const ce of N)try{ce()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:Q?.message})}})()}}class _s{constructor(v,E,N){this.app=v,this.heartbeatServiceProvider=E,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.beforeStateQueue=new es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(v,E){var N=this;return E&&(this._popupRedirectResolver=wt(E)),this._initializationPromise=this.queue((0,b.Z)(function*(){var Q,ce;if(!N._deleted&&(N.persistenceManager=yield fe.create(N,v),!N._deleted)){if(null!==(Q=N._popupRedirectResolver)&&void 0!==Q&&Q._shouldInitProactively)try{yield N._popupRedirectResolver._initialize(N)}catch{}yield N.initializeCurrentUser(E),N.lastNotifiedUid=(null===(ce=N.currentUser)||void 0===ce?void 0:ce.uid)||null,!N._deleted&&(N._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,b.Z)(function*(){if(v._deleted)return;const E=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||E){if(v.currentUser&&E&&v.currentUser.uid===E.uid)return v._currentUser._assign(E),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(E,!0)}})()}initializeCurrentUser(v){var E=this;return(0,b.Z)(function*(){var N;const Q=yield E.assertedPersistence.getCurrentUser();let ce=Q,rt=!1;if(v&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const Ut=null===(N=E.redirectUser)||void 0===N?void 0:N._redirectEventId,bn=ce?._redirectEventId,Rn=yield E.tryRedirectSignIn(v);(!Ut||Ut===bn)&&Rn?.user&&(ce=Rn.user,rt=!0)}if(!ce)return E.directlySetCurrentUser(null);if(!ce._redirectEventId){if(rt)try{yield E.beforeStateQueue.runMiddleware(ce)}catch(Ut){ce=Q,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(Ut))}return ce?E.reloadAndSetCurrentUserOrClear(ce):E.directlySetCurrentUser(null)}return Se(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===ce._redirectEventId?E.directlySetCurrentUser(ce):E.reloadAndSetCurrentUserOrClear(ce)})()}tryRedirectSignIn(v){var E=this;return(0,b.Z)(function*(){let N=null;try{N=yield E._popupRedirectResolver._completeRedirectFn(E,v,!0)}catch{yield E._setRedirectUser(null)}return N})()}reloadAndSetCurrentUserOrClear(v){var E=this;return(0,b.Z)(function*(){try{yield qr(v)}catch(N){if("auth/network-request-failed"!==N?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function vt(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var v=this;return(0,b.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var E=this;return(0,b.Z)(function*(){const N=v?(0,Z.m9)(v):null;return N&&Se(N.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(N&&N._clone(E))})()}_updateCurrentUser(v,E=!1){var N=this;return(0,b.Z)(function*(){if(!N._deleted)return v&&Se(N.tenantId===v.tenantId,N,"tenant-id-mismatch"),E||(yield N.beforeStateQueue.runMiddleware(v)),N.queue((0,b.Z)(function*(){yield N.directlySetCurrentUser(v),N.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,b.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var E=this;return this.queue((0,b.Z)(function*(){yield E.assertedPersistence.setPersistence(wt(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new Z.LL("auth","Firebase",v())}onAuthStateChanged(v,E,N){return this.registerStateListener(this.authStateSubscription,v,E,N)}beforeAuthStateChanged(v,E){return this.beforeStateQueue.pushCallback(v,E)}onIdTokenChanged(v,E,N){return this.registerStateListener(this.idTokenSubscription,v,E,N)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,E){var N=this;return(0,b.Z)(function*(){const Q=yield N.getOrInitRedirectPersistenceManager(E);return null===v?Q.removeCurrentUser():Q.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var E=this;return(0,b.Z)(function*(){if(!E.redirectPersistenceManager){const N=v&&wt(v)||E._popupRedirectResolver;Se(N,E,"argument-error"),E.redirectPersistenceManager=yield fe.create(E,[wt(N._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(v){var E=this;return(0,b.Z)(function*(){var N,Q;return E._isInitialized&&(yield E.queue((0,b.Z)(function*(){}))),(null===(N=E._currentUser)||void 0===N?void 0:N._redirectEventId)===v?E._currentUser:(null===(Q=E.redirectUser)||void 0===Q?void 0:Q._redirectEventId)===v?E.redirectUser:null})()}_persistUserIfCurrent(v){var E=this;return(0,b.Z)(function*(){if(v===E.currentUser)return E.queue((0,b.Z)(function*(){return E.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const N=null!==(E=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==N&&(this.lastNotifiedUid=N,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,E,N,Q){if(this._deleted)return()=>{};const ce="function"==typeof E?E:E.next.bind(E),rt=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(rt,this,"internal-error"),rt.then(()=>ce(this.currentUser)),"function"==typeof E?v.addObserver(E,N,Q):v.addObserver(E)}directlySetCurrentUser(v){var E=this;return(0,b.Z)(function*(){E.currentUser&&E.currentUser!==v&&E._currentUser._stopProactiveRefresh(),v&&E.isProactiveRefreshEnabled&&v._startProactiveRefresh(),E.currentUser=v,v?yield E.assertedPersistence.setCurrentUser(v):yield E.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,b.Z)(function*(){var E;const N={"X-Client-Version":v.clientVersion};v.app.options.appId&&(N["X-Firebase-gmpid"]=v.app.options.appId);const Q=yield null===(E=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return Q&&(N["X-Firebase-Client"]=Q),N})()}}function Cr(A){return(0,Z.m9)(A)}class Wi{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,Z.ne)(E=>this.observer=E)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ps(A,v,E){const N=Cr(A);Se(N._canInitEmulator,N,"emulator-config-failed"),Se(/^https?:\/\//.test(v),N,"invalid-emulator-scheme");const Q=!!E?.disableWarnings,ce=ts(v),{host:rt,port:Ut}=function Zn(A){const v=ts(A),E=/(\/\/)?([^?#/]+)/.exec(A.substr(v.length));if(!E)return{host:"",port:null};const N=E[2].split("@").pop()||"",Q=/^(\[[^\]]+\])(:|$)/.exec(N);if(Q){const ce=Q[1];return{host:ce,port:Yr(N.substr(ce.length+1))}}{const[ce,rt]=N.split(":");return{host:ce,port:Yr(rt)}}}(v);N.config.emulator={url:`${ce}//${rt}${null===Ut?"":`:${Ut}`}/`},N.settings.appVerificationDisabledForTesting=!0,N.emulatorConfig=Object.freeze({host:rt,port:Ut,protocol:ce.replace(":",""),options:Object.freeze({disableWarnings:Q})}),Q||function ri(){function A(){const v=document.createElement("p"),E=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function ts(A){const v=A.indexOf(":");return v<0?"":A.substr(0,v+1)}function Yr(A){if(!A)return null;const v=Number(A);return isNaN(v)?null:v}class Xr{constructor(v,E){this.providerId=v,this.signInMethod=E}toJSON(){return Te("not implemented")}_getIdTokenResponse(v){return Te("not implemented")}_linkToIdToken(v,E){return Te("not implemented")}_getReauthenticationResolver(v){return Te("not implemented")}}function ns(A,v){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:resetPassword",nn(A,v))})).apply(this,arguments)}function ks(A,v){return ds.apply(this,arguments)}function ds(){return(ds=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function rn(){return(rn=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:update",nn(A,v))})).apply(this,arguments)}function Sr(){return(Sr=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithPassword",nn(A,v))})).apply(this,arguments)}function pi(A,v){return ji.apply(this,arguments)}function ji(){return(ji=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:sendOobCode",nn(A,v))})).apply(this,arguments)}function Zr(){return(Zr=(0,b.Z)(function*(A,v){return pi(A,v)})).apply(this,arguments)}function gi(){return(gi=(0,b.Z)(function*(A,v){return pi(A,v)})).apply(this,arguments)}function Fn(){return(Fn=(0,b.Z)(function*(A,v){return pi(A,v)})).apply(this,arguments)}function ys(){return(ys=(0,b.Z)(function*(A,v){return pi(A,v)})).apply(this,arguments)}function vs(){return(vs=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithEmailLink",nn(A,v))})).apply(this,arguments)}function Ws(){return(Ws=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithEmailLink",nn(A,v))})).apply(this,arguments)}class Ur extends Xr{constructor(v,E,N,Q=null){super("password",N),this._email=v,this._password=E,this._tenantId=Q}static _fromEmailAndPassword(v,E){return new Ur(v,E,"password")}static _fromEmailAndCode(v,E,N=null){return new Ur(v,E,"emailLink",N)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(v){var E=this;return(0,b.Z)(function*(){switch(E.signInMethod){case"password":return function Gn(A,v){return Sr.apply(this,arguments)}(v,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function zs(A,v){return vs.apply(this,arguments)}(v,{email:E._email,oobCode:E._password});default:yt(v,"internal-error")}})()}_linkToIdToken(v,E){var N=this;return(0,b.Z)(function*(){switch(N.signInMethod){case"password":return ks(v,{idToken:E,returnSecureToken:!0,email:N._email,password:N._password});case"emailLink":return function Ni(A,v){return Ws.apply(this,arguments)}(v,{idToken:E,email:N._email,oobCode:N._password});default:yt(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function Fi(A,v){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithIdp",nn(A,v))})).apply(this,arguments)}class Ce extends Xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const E=new Ce(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(E.idToken=v.idToken),v.accessToken&&(E.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(E.nonce=v.nonce),v.pendingToken&&(E.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(E.accessToken=v.oauthToken,E.secret=v.oauthTokenSecret):yt("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:N,signInMethod:Q}=E,ce=(0,Pe._T)(E,["providerId","signInMethod"]);if(!N||!Q)return null;const rt=new Ce(N,Q);return rt.idToken=ce.idToken||void 0,rt.accessToken=ce.accessToken||void 0,rt.secret=ce.secret,rt.nonce=ce.nonce,rt.pendingToken=ce.pendingToken||null,rt}_getIdTokenResponse(v){return Fi(v,this.buildRequest())}_linkToIdToken(v,E){const N=this.buildRequest();return N.idToken=E,Fi(v,N)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,Fi(v,E)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),v.postBody=(0,Z.xO)(E)}return v}}function Dt(){return(Dt=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:sendVerificationCode",nn(A,v))})).apply(this,arguments)}function yn(){return(yn=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithPhoneNumber",nn(A,v))})).apply(this,arguments)}function Ar(){return(Ar=(0,b.Z)(function*(A,v){const E=yield jn(A,"POST","/v1/accounts:signInWithPhoneNumber",nn(A,v));if(E.temporaryProof)throw kn(A,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const $n={USER_NOT_FOUND:"user-not-found"};function si(){return(si=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithPhoneNumber",nn(A,Object.assign(Object.assign({},v),{operation:"REAUTH"})),$n)})).apply(this,arguments)}class Rr extends Xr{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,E){return new Rr({verificationId:v,verificationCode:E})}static _fromTokenResponse(v,E){return new Rr({phoneNumber:v,temporaryProof:E})}_getIdTokenResponse(v){return function Jt(A,v){return yn.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,E){return function Vn(A,v){return Ar.apply(this,arguments)}(v,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Ks(A,v){return si.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:E,verificationId:N,verificationCode:Q}=this.params;return v&&E?{temporaryProof:v,phoneNumber:E}:{sessionInfo:N,code:Q}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:E,verificationCode:N,phoneNumber:Q,temporaryProof:ce}=v;return N||E||Q||ce?new Rr({verificationId:E,verificationCode:N,phoneNumber:Q,temporaryProof:ce}):null}}class rs{constructor(v){var E,N,Q,ce,rt,Ut;const bn=(0,Z.zd)((0,Z.pd)(v)),Rn=null!==(E=bn.apiKey)&&void 0!==E?E:null,fr=null!==(N=bn.oobCode)&&void 0!==N?N:null,xi=function Ls(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Q=bn.mode)&&void 0!==Q?Q:null);Se(Rn&&fr&&xi,"argument-error"),this.apiKey=Rn,this.operation=xi,this.code=fr,this.continueUrl=null!==(ce=bn.continueUrl)&&void 0!==ce?ce:null,this.languageCode=null!==(rt=bn.languageCode)&&void 0!==rt?rt:null,this.tenantId=null!==(Ut=bn.tenantId)&&void 0!==Ut?Ut:null}static parseLink(v){const E=function qs(A){const v=(0,Z.zd)((0,Z.pd)(A)).link,E=v?(0,Z.zd)((0,Z.pd)(v)).deep_link_id:null,N=(0,Z.zd)((0,Z.pd)(A)).deep_link_id;return(N?(0,Z.zd)((0,Z.pd)(N)).link:null)||N||E||v||A}(v);try{return new rs(E)}catch{return null}}}let Vo=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(E,N){return Ur._fromEmailAndPassword(E,N)}static credentialWithLink(E,N){const Q=rs.parseLink(N);return Se(Q,"argument-error"),Ur._fromEmailAndCode(E,Q.code,Q.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class Zi{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Oo extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class Go extends Oo{static credentialFromJSON(v){const E="string"==typeof v?JSON.parse(v):v;return Se("providerId"in E&&"signInMethod"in E,"argument-error"),Ce._fromParams(E)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Se(v.idToken||v.accessToken,"argument-error"),Ce._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return Go.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return Go.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:E,oauthAccessToken:N,oauthTokenSecret:Q,pendingToken:ce,nonce:rt,providerId:Ut}=v;if(!N&&!Q&&!E&&!ce||!Ut)return null;try{return new Go(Ut)._credential({idToken:E,accessToken:N,nonce:rt,pendingToken:ce})}catch{return null}}}let ta=(()=>{class A extends Oo{constructor(){super("facebook.com")}static credential(E){return Ce._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return A.credential(E.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),na=(()=>{class A extends Oo{constructor(){super("google.com"),this.addScope("profile")}static credential(E,N){return Ce._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:N})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:N,oauthAccessToken:Q}=E;if(!N&&!Q)return null;try{return A.credential(N,Q)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),ra=(()=>{class A extends Oo{constructor(){super("github.com")}static credential(E){return Ce._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return A.credential(E.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Es extends Xr{constructor(v,E){super(v,v),this.pendingToken=E}_getIdTokenResponse(v){return Fi(v,this.buildRequest())}_linkToIdToken(v,E){const N=this.buildRequest();return N.idToken=E,Fi(v,N)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,Fi(v,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:N,signInMethod:Q,pendingToken:ce}=E;return N&&Q&&ce&&N===Q?new Es(N,ce):null}static _create(v,E){return new Es(v,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hs extends Zi{constructor(v){Se(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return hs.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return hs.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const E=Es.fromJSON(v);return Se(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:E,providerId:N}=v;if(!E||!N)return null;try{return Es._create(N,E)}catch{return null}}}let Ys=(()=>{class A extends Oo{constructor(){super("twitter.com")}static credential(E,N){return Ce._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:N})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:N,oauthTokenSecret:Q}=E;if(!N||!Q)return null;try{return A.credential(N,Q)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function ol(A,v){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signUp",nn(A,v))})).apply(this,arguments)}class is{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,E,N,Q=!1){return(0,b.Z)(function*(){const ce=yield De._fromIdTokenResponse(v,N,Q),rt=_o(N);return new is({user:ce,providerId:rt,_tokenResponse:N,operationType:E})})()}static _forOperation(v,E,N){return(0,b.Z)(function*(){yield v._updateTokensIfNecessary(N,!0);const Q=_o(N);return new is({user:v,providerId:Q,_tokenResponse:N,operationType:E})})()}}function _o(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function ws(A){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,b.Z)(function*(A){var v;const E=Cr(A);if(yield E._initializationPromise,null!==(v=E.currentUser)&&void 0!==v&&v.isAnonymous)return new is({user:E.currentUser,providerId:null,operationType:"signIn"});const N=yield ol(E,{returnSecureToken:!0}),Q=yield is._fromIdTokenResponse(E,"signIn",N,!0);return yield E._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class jo extends Z.ZR{constructor(v,E,N,Q){var ce;super(E.code,E.message),this.operationType=N,this.user=Q,Object.setPrototypeOf(this,jo.prototype),this.customData={appName:v.name,tenantId:null!==(ce=v.tenantId)&&void 0!==ce?ce:void 0,_serverResponse:E.customData._serverResponse,operationType:N}}static _fromErrorAndOperation(v,E,N,Q){return new jo(v,E,N,Q)}}function al(A,v,E,N){return("reauthenticate"===v?E._getReauthenticationResolver(A):E._getIdTokenResponse(A)).catch(ce=>{throw"auth/multi-factor-auth-required"===ce.code?jo._fromErrorAndOperation(A,ce,v,N):ce})}function Gr(A){return new Set(A.map(({providerId:v})=>v).filter(v=>!!v))}function Ki(A,v){return Js.apply(this,arguments)}function Js(){return Js=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A);yield Xs(!0,E,v);const{providerUserInfo:N}=yield function un(A,v){return On.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[v]}),Q=Gr(N||[]);return E.providerData=E.providerData.filter(ce=>Q.has(ce.providerId)),Q.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),Js.apply(this,arguments)}function Qs(A,v){return sa.apply(this,arguments)}function sa(){return(sa=(0,b.Z)(function*(A,v,E=!1){const N=yield Wn(A,v._linkToIdToken(A.auth,yield A.getIdToken()),E);return is._forOperation(A,"link",N)})).apply(this,arguments)}function Xs(A,v,E){return Us.apply(this,arguments)}function Us(){return(Us=(0,b.Z)(function*(A,v,E){yield qr(v);const Q=!1===A?"provider-already-linked":"no-such-provider";Se(Gr(v.providerData).has(E)===A,v.auth,Q)})).apply(this,arguments)}function ll(A,v){return za.apply(this,arguments)}function za(){return(za=(0,b.Z)(function*(A,v,E=!1){const{auth:N}=A,Q="reauthenticate";try{const ce=yield Wn(A,al(N,Q,v,A),E);Se(ce.idToken,N,"internal-error");const rt=fn(ce.idToken);Se(rt,N,"internal-error");const{sub:Ut}=rt;return Se(A.uid===Ut,N,"user-mismatch"),is._forOperation(A,Q,ce)}catch(ce){throw"auth/user-not-found"===ce?.code&&yt(N,"user-mismatch"),ce}})).apply(this,arguments)}function Tl(A,v){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,b.Z)(function*(A,v,E=!1){const N="signIn",Q=yield al(A,N,v),ce=yield is._fromIdTokenResponse(A,N,Q);return E||(yield A._updateCurrentUser(ce.user)),ce})).apply(this,arguments)}function Bs(A,v){return Or.apply(this,arguments)}function Or(){return(Or=(0,b.Z)(function*(A,v){return Tl(Cr(A),v)})).apply(this,arguments)}function oa(A,v){return No.apply(this,arguments)}function No(){return(No=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A);return yield Xs(!1,E,v.providerId),Qs(E,v)})).apply(this,arguments)}function Br(A,v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,b.Z)(function*(A,v){return ll((0,Z.m9)(A),v)})).apply(this,arguments)}function li(){return(li=(0,b.Z)(function*(A,v){return jn(A,"POST","/v1/accounts:signInWithCustomToken",nn(A,v))})).apply(this,arguments)}function ul(A,v){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,b.Z)(function*(A,v){const E=Cr(A),N=yield function yo(A,v){return li.apply(this,arguments)}(E,{token:v,returnSecureToken:!0}),Q=yield is._fromIdTokenResponse(E,"signIn",N);return yield E._updateCurrentUser(Q.user),Q}),Ho.apply(this,arguments)}class Is{constructor(v,E){this.factorId=v,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(v,E){return"phoneInfo"in E?mi._fromServerResponse(v,E):yt(v,"internal-error")}}class mi extends Is{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,E){return new mi(E)}}function Aa(A,v,E){var N;Se((null===(N=E.url)||void 0===N?void 0:N.length)>0,A,"invalid-continue-uri"),Se(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),v.continueUrl=E.url,v.dynamicLinkDomain=E.dynamicLinkDomain,v.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(Se(E.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),v.iOSBundleId=E.iOS.bundleId),E.android&&(Se(E.android.packageName.length>0,A,"missing-android-pkg-name"),v.androidInstallApp=E.android.installApp,v.androidMinimumVersionCode=E.android.minimumVersion,v.androidPackageName=E.android.packageName)}function Wa(A,v,E){return vo.apply(this,arguments)}function vo(){return vo=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A),Q={requestType:"PASSWORD_RESET",email:v};E&&Aa(N,Q,E),yield function ii(A,v){return gi.apply(this,arguments)}(N,Q)}),vo.apply(this,arguments)}function Ji(A,v,E){return aa.apply(this,arguments)}function aa(){return(aa=(0,b.Z)(function*(A,v,E){yield ns((0,Z.m9)(A),{oobCode:v,newPassword:E})})).apply(this,arguments)}function Sl(A,v){return Ln.apply(this,arguments)}function Ln(){return Ln=(0,b.Z)(function*(A,v){yield function ki(A,v){return rn.apply(this,arguments)}((0,Z.m9)(A),{oobCode:v})}),Ln.apply(this,arguments)}function bo(A,v){return $o.apply(this,arguments)}function $o(){return($o=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A),N=yield ns(E,{oobCode:v}),Q=N.requestType;switch(Se(Q,E,"internal-error"),Q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(N.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(N.mfaInfo,E,"internal-error");default:Se(N.email,E,"internal-error")}let ce=null;return N.mfaInfo&&(ce=Is._fromServerResponse(Cr(E),N.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.newEmail:N.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.email:N.newEmail)||null,multiFactorInfo:ce},operation:Q}})).apply(this,arguments)}function cl(A,v){return la.apply(this,arguments)}function la(){return(la=(0,b.Z)(function*(A,v){const{data:E}=yield bo((0,Z.m9)(A),v);return E.email})).apply(this,arguments)}function Kl(A,v,E){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,b.Z)(function*(A,v,E){const N=Cr(A),Q=yield ol(N,{returnSecureToken:!0,email:v,password:E}),ce=yield is._fromIdTokenResponse(N,"signIn",Q);return yield N._updateCurrentUser(ce.user),ce})).apply(this,arguments)}function Oa(A,v,E){return Bs((0,Z.m9)(A),Vo.credential(v,E))}function j(A,v,E){return R.apply(this,arguments)}function R(){return R=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A),Q={requestType:"EMAIL_SIGNIN",email:v};Se(E.handleCodeInApp,N,"argument-error"),E&&Aa(N,Q,E),yield function Bo(A,v){return Fn.apply(this,arguments)}(N,Q)}),R.apply(this,arguments)}function F(A,v){return"EMAIL_SIGNIN"===rs.parseLink(v)?.operation}function oe(A,v,E){return ct.apply(this,arguments)}function ct(){return(ct=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A),Q=Vo.credentialWithLink(v,E||$e());return Se(Q._tenantId===(N.tenantId||null),N,"tenant-id-mismatch"),Bs(N,Q)})).apply(this,arguments)}function jr(){return(jr=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:createAuthUri",nn(A,v))})).apply(this,arguments)}function Li(A,v){return Ri.apply(this,arguments)}function Ri(){return Ri=(0,b.Z)(function*(A,v){const N={identifier:v,continueUri:ut()?$e():"http://localhost"},{signinMethods:Q}=yield function ln(A,v){return jr.apply(this,arguments)}((0,Z.m9)(A),N);return Q||[]}),Ri.apply(this,arguments)}function so(A,v){return oo.apply(this,arguments)}function oo(){return oo=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A),Q={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};v&&Aa(E.auth,Q,v);const{email:ce}=yield function Mr(A,v){return Zr.apply(this,arguments)}(E.auth,Q);ce!==A.email&&(yield A.reload())}),oo.apply(this,arguments)}function Vs(A,v,E){return Na.apply(this,arguments)}function Na(){return Na=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A),ce={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:v};E&&Aa(N.auth,ce,E);const{email:rt}=yield function Ti(A,v){return ys.apply(this,arguments)}(N.auth,ce);rt!==A.email&&(yield A.reload())}),Na.apply(this,arguments)}function _i(){return(_i=(0,b.Z)(function*(A,v){return Tt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function ss(A,v){return ua.apply(this,arguments)}function ua(){return ua=(0,b.Z)(function*(A,{displayName:v,photoURL:E}){if(void 0===v&&void 0===E)return;const N=(0,Z.m9)(A),ce={idToken:yield N.getIdToken(),displayName:v,photoUrl:E,returnSecureToken:!0},rt=yield Wn(N,function Al(A,v){return _i.apply(this,arguments)}(N.auth,ce));N.displayName=rt.displayName||null,N.photoURL=rt.photoUrl||null;const Ut=N.providerData.find(({providerId:bn})=>"password"===bn);Ut&&(Ut.displayName=N.displayName,Ut.photoURL=N.photoURL),yield N._updateTokensIfNecessary(rt)}),ua.apply(this,arguments)}function ca(A,v){return zo((0,Z.m9)(A),v,null)}function Cs(A,v){return zo((0,Z.m9)(A),null,v)}function zo(A,v,E){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,b.Z)(function*(A,v,E){const{auth:N}=A,ce={idToken:yield A.getIdToken(),returnSecureToken:!0};v&&(ce.email=v),E&&(ce.password=E);const rt=yield Wn(A,ks(N,ce));yield A._updateTokensIfNecessary(rt,!0)})).apply(this,arguments)}class Ra{constructor(v,E,N={}){this.isNewUser=v,this.providerId=E,this.profile=N}}class Wo extends Ra{constructor(v,E,N,Q){super(v,E,N),this.username=Q}}class Ka extends Ra{constructor(v,E){super(v,"facebook.com",E)}}class Ol extends Wo{constructor(v,E){super(v,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class xa extends Ra{constructor(v,E){super(v,"google.com",E)}}class dl extends Wo{constructor(v,E,N){super(v,"twitter.com",E,N)}}function Pa(A){const{user:v,_tokenResponse:E}=A;return v.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Bu(A){var v,E;if(!A)return null;const{providerId:N}=A,Q=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},ce=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!N&&A?.idToken){const rt=null===(E=null===(v=fn(A.idToken))||void 0===v?void 0:v.firebase)||void 0===E?void 0:E.sign_in_provider;if(rt)return new Ra(ce,"anonymous"!==rt&&"custom"!==rt?rt:null)}if(!N)return null;switch(N){case"facebook.com":return new Ka(ce,Q);case"github.com":return new Ol(ce,Q);case"google.com":return new xa(ce,Q);case"twitter.com":return new dl(ce,Q,A.screenName||null);case"custom":case"anonymous":return new Ra(ce,null);default:return new Ra(ce,N,Q)}}(E)}class yi{constructor(v,E,N){this.type=v,this.credential=E,this.auth=N}static _fromIdtoken(v,E){return new yi("enroll",v,E)}static _fromMfaPendingCredential(v){return new yi("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var E,N;if(v?.multiFactorSession){if(null!==(E=v.multiFactorSession)&&void 0!==E&&E.pendingCredential)return yi._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(N=v.multiFactorSession)&&void 0!==N&&N.idToken)return yi._fromIdtoken(v.multiFactorSession.idToken)}return null}}class ui{constructor(v,E,N){this.session=v,this.hints=E,this.signInResolver=N}static _fromError(v,E){const N=Cr(v),Q=E.customData._serverResponse,ce=(Q.mfaInfo||[]).map(Ut=>Is._fromServerResponse(N,Ut));Se(Q.mfaPendingCredential,N,"internal-error");const rt=yi._fromMfaPendingCredential(Q.mfaPendingCredential);return new ui(rt,ce,function(){var Ut=(0,b.Z)(function*(bn){const Rn=yield bn._process(N,rt);delete Q.mfaInfo,delete Q.mfaPendingCredential;const fr=Object.assign(Object.assign({},Q),{idToken:Rn.idToken,refreshToken:Rn.refreshToken});switch(E.operationType){case"signIn":const xi=yield is._fromIdTokenResponse(N,E.operationType,fr);return yield N._updateCurrentUser(xi.user),xi;case"reauthenticate":return Se(E.user,N,"internal-error"),is._forOperation(E.user,E.operationType,fr);default:yt(N,"internal-error")}});return function(bn){return Ut.apply(this,arguments)}}())}resolveSignIn(v){var E=this;return(0,b.Z)(function*(){return E.signInResolver(v)})()}}function ql(A,v){var E;const N=(0,Z.m9)(A),Q=v;return Se(v.customData.operationType,N,"argument-error"),Se(null===(E=Q.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,N,"argument-error"),ui._fromError(N,Q)}class Nl{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(N=>Is._fromServerResponse(v.auth,N)))})}static _fromUser(v){return new Nl(v)}getSession(){var v=this;return(0,b.Z)(function*(){return yi._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,E){var N=this;return(0,b.Z)(function*(){const Q=v,ce=yield N.getSession(),rt=yield Wn(N.user,Q._process(N.user.auth,ce,E));return yield N.user._updateTokensIfNecessary(rt),N.user.reload()})()}unenroll(v){var E=this;return(0,b.Z)(function*(){const N="string"==typeof v?v:v.uid,Q=yield E.user.getIdToken();try{const ce=yield Wn(E.user,function Ec(A,v){return Tt(A,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(A,v))}(E.user.auth,{idToken:Q,mfaEnrollmentId:N}));E.enrolledFactors=E.enrolledFactors.filter(({uid:rt})=>rt!==N),yield E.user._updateTokensIfNecessary(ce),yield E.user.reload()}catch(ce){throw ce}})()}}const Yl=new WeakMap;function gl(A){const v=(0,Z.m9)(A);return Yl.has(v)||Yl.set(v,Nl._fromUser(v)),Yl.get(v)}const ha="__sak";class P{constructor(v,E){this.storageRetriever=v,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(ha,"1"),this.storage.removeItem(ha),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,E){return this.storage.setItem(v,JSON.stringify(E)),Promise.resolve()}_get(v){const E=this.storage.getItem(v);return Promise.resolve(E?JSON.parse(E):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ye=(()=>{class A extends P{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,N)=>this.onStorageEvent(E,N),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function K(){const A=(0,Z.z$)();return X(A)||st(A)}()&&function Ci(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=En(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const N of Object.keys(this.listeners)){const Q=this.storage.getItem(N),ce=this.localCache[N];Q!==ce&&E(N,ce,Q)}}onStorageEvent(E,N=!1){if(!E.key)return void this.forAllChangedKeys((Ut,bn,Rn)=>{this.notifyListeners(Ut,Rn)});const Q=E.key;if(N?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ut=this.storage.getItem(Q);if(E.newValue!==Ut)null!==E.newValue?this.storage.setItem(Q,E.newValue):this.storage.removeItem(Q);else if(this.localCache[Q]===E.newValue&&!N)return}const ce=()=>{const Ut=this.storage.getItem(Q);!N&&this.localCache[Q]===Ut||this.notifyListeners(Q,Ut)},rt=this.storage.getItem(Q);!function Ht(){return(0,Z.w1)()&&10===document.documentMode}()||rt===E.newValue||E.newValue===E.oldValue?ce():setTimeout(ce,10)}notifyListeners(E,N){this.localCache[E]=N;const Q=this.listeners[E];if(Q)for(const ce of Array.from(Q))ce(N&&JSON.parse(N))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,N,Q)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:N,newValue:Q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,N){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(N)}_removeListener(E,N){this.listeners[E]&&(this.listeners[E].delete(N),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,N){var Q=()=>super._set,ce=this;return(0,b.Z)(function*(){yield Q().call(ce,E,N),ce.localCache[E]=JSON.stringify(N)})()}_get(E){var N=()=>super._get,Q=this;return(0,b.Z)(function*(){const ce=yield N().call(Q,E);return Q.localCache[E]=JSON.stringify(ce),ce})()}_remove(E){var N=()=>super._remove,Q=this;return(0,b.Z)(function*(){yield N().call(Q,E),delete Q.localCache[E]})()}}return A.type="LOCAL",A})(),vn=(()=>{class A extends P{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,N){}_removeListener(E,N){}}return A.type="SESSION",A})();let It=(()=>{class A{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const N=this.receivers.find(ce=>ce.isListeningto(E));if(N)return N;const Q=new A(E);return this.receivers.push(Q),Q}isListeningto(E){return this.eventTarget===E}handleEvent(E){var N=this;return(0,b.Z)(function*(){const Q=E,{eventId:ce,eventType:rt,data:Ut}=Q.data,bn=N.handlersMap[rt];if(!bn?.size)return;Q.ports[0].postMessage({status:"ack",eventId:ce,eventType:rt});const Rn=Array.from(bn).map(function(){var xi=(0,b.Z)(function*(ba){return ba(Q.origin,Ut)});return function(ba){return xi.apply(this,arguments)}}()),fr=yield function xr(A){return Promise.all(A.map(function(){var v=(0,b.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(N){return{fulfilled:!1,reason:N}}});return function(E){return v.apply(this,arguments)}}()))}(Rn);Q.ports[0].postMessage({status:"done",eventId:ce,eventType:rt,response:fr})})()}_subscribe(E,N){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(N)}_unsubscribe(E,N){this.handlersMap[E]&&N&&this.handlersMap[E].delete(N),(!N||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function xn(A="",v=10){let E="";for(let N=0;N<v;N++)E+=Math.floor(10*Math.random());return A+E}class Qn{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,E,N=50){var Q=this;return(0,b.Z)(function*(){const ce=typeof MessageChannel<"u"?new MessageChannel:null;if(!ce)throw new Error("connection_unavailable");let rt,Ut;return new Promise((bn,Rn)=>{const fr=xn("",20);ce.port1.start();const xi=setTimeout(()=>{Rn(new Error("unsupported_event"))},N);Ut={messageChannel:ce,onMessage(ba){const Po=ba;if(Po.data.eventId===fr)switch(Po.data.status){case"ack":clearTimeout(xi),rt=setTimeout(()=>{Rn(new Error("timeout"))},3e3);break;case"done":clearTimeout(rt),bn(Po.data.response);break;default:clearTimeout(xi),clearTimeout(rt),Rn(new Error("invalid_response"))}}},Q.handlers.add(Ut),ce.port1.addEventListener("message",Ut.onMessage),Q.target.postMessage({eventType:v,eventId:fr,data:E},[ce.port2])}).finally(()=>{Ut&&Q.removeMessageHandler(Ut)})})()}}function ir(){return window}function tn(){return typeof ir().WorkerGlobalScope<"u"&&"function"==typeof ir().importScripts}function qt(){return(qt=(0,b.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ci="firebaseLocalStorageDb",Ro=1,ml="firebaseLocalStorage",_l="fbase_key";class Ml{constructor(v){this.request=v}toPromise(){return new Promise((v,E)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function ka(A,v){return A.transaction([ml],v?"readwrite":"readonly").objectStore(ml)}function Fa(){const A=indexedDB.open(ci,Ro);return new Promise((v,E)=>{A.addEventListener("error",()=>{E(A.error)}),A.addEventListener("upgradeneeded",()=>{const N=A.result;try{N.createObjectStore(ml,{keyPath:_l})}catch(Q){E(Q)}}),A.addEventListener("success",(0,b.Z)(function*(){const N=A.result;N.objectStoreNames.contains(ml)?v(N):(N.close(),yield function ch(){const A=indexedDB.deleteDatabase(ci);return new Ml(A).toPromise()}(),v(yield Fa()))}))})}function os(A,v,E){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,b.Z)(function*(A,v,E){const N=ka(A,!0).put({[_l]:v,value:E});return new Ml(N).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,b.Z)(function*(A,v){const E=ka(A,!1).get(v),N=yield new Ml(E).toPromise();return void 0===N?null:N.value})).apply(this,arguments)}function mn(A,v){const E=ka(A,!0).delete(v);return new Ml(E).toPromise()}const wn=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,b.Z)(function*(){return E.db||(E.db=yield Fa()),E.db})()}_withRetries(E){var N=this;return(0,b.Z)(function*(){let Q=0;for(;;)try{const ce=yield N._openDb();return yield E(ce)}catch(ce){if(Q++>3)throw ce;N.db&&(N.db.close(),N.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,b.Z)(function*(){return tn()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,b.Z)(function*(){E.receiver=It._getInstance(function Rt(){return tn()?self:null}()),E.receiver._subscribe("keyChanged",function(){var N=(0,b.Z)(function*(Q,ce){return{keyProcessed:(yield E._poll()).includes(ce.key)}});return function(Q,ce){return N.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var N=(0,b.Z)(function*(Q,ce){return["keyChanged"]});return function(Q,ce){return N.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,b.Z)(function*(){var N,Q;if(E.activeServiceWorker=yield function Ko(){return qt.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new Qn(E.activeServiceWorker);const ce=yield E.sender._send("ping",{},800);ce&&null!==(N=ce[0])&&void 0!==N&&N.fulfilled&&null!==(Q=ce[0])&&void 0!==Q&&Q.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var N=this;return(0,b.Z)(function*(){if(N.sender&&N.activeServiceWorker&&function at(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===N.activeServiceWorker)try{yield N.sender._send("keyChanged",{key:E},N.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const E=yield Fa();return yield os(E,ha,"1"),yield mn(E,ha),!0}catch{}return!1})()}_withPendingWrite(E){var N=this;return(0,b.Z)(function*(){N.pendingWrites++;try{yield E()}finally{N.pendingWrites--}})()}_set(E,N){var Q=this;return(0,b.Z)(function*(){return Q._withPendingWrite((0,b.Z)(function*(){return yield Q._withRetries(ce=>os(ce,E,N)),Q.localCache[E]=N,Q.notifyServiceWorker(E)}))})()}_get(E){var N=this;return(0,b.Z)(function*(){const Q=yield N._withRetries(ce=>function eo(A,v){return fa.apply(this,arguments)}(ce,E));return N.localCache[E]=Q,Q})()}_remove(E){var N=this;return(0,b.Z)(function*(){return N._withPendingWrite((0,b.Z)(function*(){return yield N._withRetries(Q=>mn(Q,E)),delete N.localCache[E],N.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,b.Z)(function*(){const N=yield E._withRetries(rt=>{const Ut=ka(rt,!1).getAll();return new Ml(Ut).toPromise()});if(!N)return[];if(0!==E.pendingWrites)return[];const Q=[],ce=new Set;for(const{fbase_key:rt,value:Ut}of N)ce.add(rt),JSON.stringify(E.localCache[rt])!==JSON.stringify(Ut)&&(E.notifyListeners(rt,Ut),Q.push(rt));for(const rt of Object.keys(E.localCache))E.localCache[rt]&&!ce.has(rt)&&(E.notifyListeners(rt,null),Q.push(rt));return Q})()}notifyListeners(E,N){this.localCache[E]=N;const Q=this.listeners[E];if(Q)for(const ce of Array.from(Q))ce(N)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,N){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(N)}_removeListener(E,N){this.listeners[E]&&(this.listeners[E].delete(N),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function hr(){return(hr=(0,b.Z)(function*(A){return(yield Tt(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rl(A){return new Promise((v,E)=>{const N=document.createElement("script");N.setAttribute("src",A),N.onload=v,N.onerror=Q=>{const ce=mt("internal-error");ce.customData=Q,E(ce)},N.type="text/javascript",N.charset="UTF-8",function on(){var A,v;return null!==(v=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==v?v:document}().appendChild(N)})}function ga(A){return`__${A}${Math.floor(1e6*Math.random())}`}const oi=1e12;class Ya{constructor(v){this.auth=v,this.counter=oi,this._widgets=new Map}render(v,E){const N=this.counter;return this._widgets.set(N,new $r(v,this.auth.name,E||{})),this.counter++,N}reset(v){var E;const N=v||oi;null===(E=this._widgets.get(N))||void 0===E||E.delete(),this._widgets.delete(N)}getResponse(v){var E;return(null===(E=this._widgets.get(v||oi))||void 0===E?void 0:E.getResponse())||""}execute(v){var E=this;return(0,b.Z)(function*(){var N;return null===(N=E._widgets.get(v||oi))||void 0===N||N.execute(),""})()}}class $r{constructor(v,E,N){this.params=N,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Q="string"==typeof v?document.getElementById(v):v;Se(Q,"argument-error",{appName:E}),this.container=Q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cd(A){const v=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<A;N++)v.push(E.charAt(Math.floor(Math.random()*E.length)));return v.join("")}(50);const{callback:v,"expired-callback":E}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xl=ga("rcb"),Hi=new ht(3e4,6e4);class Hu{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=ir().grecaptcha)||void 0===v||!v.render)}load(v,E=""){return Se(function Jl(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(E),v,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(ir().grecaptcha):new Promise((N,Q)=>{const ce=ir().setTimeout(()=>{Q(mt(v,"network-request-failed"))},Hi.get());ir()[xl]=()=>{ir().clearTimeout(ce),delete ir()[xl];const Ut=ir().grecaptcha;if(!Ut)return void Q(mt(v,"internal-error"));const bn=Ut.render;Ut.render=(Rn,fr)=>{const xi=bn(Rn,fr);return this.counter++,xi},this.hostLanguage=E,N(Ut)},Rl(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:xl,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(ce),Q(mt(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var E;return!(null===(E=ir().grecaptcha)||void 0===E||!E.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Eo{load(v){return(0,b.Z)(function*(){return new Ya(v)})()}clearedOneInstance(){}}const _a="recaptcha",lt={theme:"light",type:"image"};class Za{constructor(v,E=Object.assign({},lt),N){this.parameters=E,this.type=_a,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cr(N),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Q="string"==typeof v?document.getElementById(v):v;Se(Q,this.auth,"argument-error"),this.container=Q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Eo:new Hu,this.validateStartingState()}verify(){var v=this;return(0,b.Z)(function*(){v.assertNotDestroyed();const E=yield v.render(),N=v.getAssertedRecaptcha();return N.getResponse(E)||new Promise(ce=>{const rt=Ut=>{Ut&&(v.tokenChangeListeners.delete(rt),ce(Ut))};v.tokenChangeListeners.add(rt),v.isInvisible&&N.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return E=>{if(this.tokenChangeListeners.forEach(N=>N(E)),"function"==typeof v)v(E);else if("string"==typeof v){const N=ir()[v];"function"==typeof N&&N(E)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,b.Z)(function*(){if(yield v.init(),!v.widgetId){let E=v.container;if(!v.isInvisible){const N=document.createElement("div");E.appendChild(N),E=N}v.widgetId=v.getAssertedRecaptcha().render(E,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,b.Z)(function*(){Se(ut()&&!tn(),v.auth,"internal-error"),yield function xo(){let A=null;return new Promise(v=>{"complete"!==document.readyState?(A=()=>v(),window.addEventListener("load",A)):v()}).catch(v=>{throw A&&window.removeEventListener("load",A),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const E=yield function wc(A){return hr.apply(this,arguments)}(v.auth);Se(E,v.auth,"internal-error"),v.parameters.sitekey=E})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class La{constructor(v,E){this.verificationId=v,this.onConfirmation=E}confirm(v){const E=Rr._fromVerification(this.verificationId,v);return this.onConfirmation(E)}}function Ql(A,v,E){return qo.apply(this,arguments)}function qo(){return(qo=(0,b.Z)(function*(A,v,E){const N=Cr(A),Q=yield Ja(N,v,(0,Z.m9)(E));return new La(Q,ce=>Bs(N,ce))})).apply(this,arguments)}function ai(A,v,E){return yl.apply(this,arguments)}function yl(){return(yl=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A);yield Xs(!1,N,"phone");const Q=yield Ja(N.auth,v,(0,Z.m9)(E));return new La(Q,ce=>oa(N,ce))})).apply(this,arguments)}function dh(A,v,E){return $u.apply(this,arguments)}function $u(){return($u=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A),Q=yield Ja(N.auth,v,(0,Z.m9)(E));return new La(Q,ce=>Br(N,ce))})).apply(this,arguments)}function Ja(A,v,E){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,b.Z)(function*(A,v,E){var N;const Q=yield E.verify();try{let ce;if(Se("string"==typeof Q,A,"argument-error"),Se(E.type===_a,A,"argument-error"),ce="string"==typeof v?{phoneNumber:v}:v,"session"in ce){const rt=ce.session;if("phoneNumber"in ce)return Se("enroll"===rt.type,A,"internal-error"),(yield function Bi(A,v){return Tt(A,"POST","/v2/accounts/mfaEnrollment:start",nn(A,v))}(A,{idToken:rt.credential,phoneEnrollmentInfo:{phoneNumber:ce.phoneNumber,recaptchaToken:Q}})).phoneSessionInfo.sessionInfo;{Se("signin"===rt.type,A,"internal-error");const Ut=(null===(N=ce.multiFactorHint)||void 0===N?void 0:N.uid)||ce.multiFactorUid;return Se(Ut,A,"missing-multi-factor-info"),(yield function qa(A,v){return Tt(A,"POST","/v2/accounts/mfaSignIn:start",nn(A,v))}(A,{mfaPendingCredential:rt.credential,mfaEnrollmentId:Ut,phoneSignInInfo:{recaptchaToken:Q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:rt}=yield function nt(A,v){return Dt.apply(this,arguments)}(A,{phoneNumber:ce.phoneNumber,recaptchaToken:Q});return rt}}finally{E._reset()}}),Qa.apply(this,arguments)}function ao(A,v){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,b.Z)(function*(A,v){yield Qs((0,Z.m9)(A),v)})).apply(this,arguments)}let ya=(()=>{class A{constructor(E){this.providerId=A.PROVIDER_ID,this.auth=Cr(E)}verifyPhoneNumber(E,N){return Ja(this.auth,E,(0,Z.m9)(N))}static credential(E,N){return Rr._fromVerification(E,N)}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:N,temporaryProof:Q}=E;return N&&Q?Rr._fromTokenResponse(N,Q):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function Pl(A,v){return v?wt(v):(Se(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class zu extends Xr{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Fi(v,this._buildIdpRequest())}_linkToIdToken(v,E){return Fi(v,this._buildIdpRequest(E))}_getReauthenticationResolver(v){return Fi(v,this._buildIdpRequest())}_buildIdpRequest(v){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(E.idToken=v),E}}function vi(A){return Tl(A.auth,new zu(A),A.bypassAuthState)}function gu(A){const{auth:v,user:E}=A;return Se(E,v,"internal-error"),ll(E,new zu(A),A.bypassAuthState)}function wo(A){return kl.apply(this,arguments)}function kl(){return(kl=(0,b.Z)(function*(A){const{auth:v,user:E}=A;return Se(E,v,"internal-error"),Qs(E,new zu(A),A.bypassAuthState)})).apply(this,arguments)}class bi{constructor(v,E,N,Q,ce=!1){this.auth=v,this.resolver=N,this.user=Q,this.bypassAuthState=ce,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var v=this;return new Promise(function(){var E=(0,b.Z)(function*(N,Q){v.pendingPromise={resolve:N,reject:Q};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(ce){v.reject(ce)}});return function(N,Q){return E.apply(this,arguments)}}())}onAuthEvent(v){var E=this;return(0,b.Z)(function*(){const{urlResponse:N,sessionId:Q,postBody:ce,tenantId:rt,error:Ut,type:bn}=v;if(Ut)return void E.reject(Ut);const Rn={auth:E.auth,requestUri:N,sessionId:Q,tenantId:rt||void 0,postBody:ce||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(bn)(Rn))}catch(fr){E.reject(fr)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return vi;case"linkViaPopup":case"linkViaRedirect":return wo;case"reauthViaPopup":case"reauthViaRedirect":return gu;default:yt(this.auth,"internal-error")}}resolve(v){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lo=new ht(2e3,1e4);function Wu(A,v,E){return T.apply(this,arguments)}function T(){return(T=(0,b.Z)(function*(A,v,E){const N=Cr(A);ze(A,v,Zi);const Q=Pl(N,E);return new J(N,"signInViaPopup",v,Q).executeNotNull()})).apply(this,arguments)}function S(A,v,E){return D.apply(this,arguments)}function D(){return(D=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A);ze(N.auth,v,Zi);const Q=Pl(N.auth,E);return new J(N.auth,"reauthViaPopup",v,Q,N).executeNotNull()})).apply(this,arguments)}function x(A,v,E){return $.apply(this,arguments)}function $(){return($=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A);ze(N.auth,v,Zi);const Q=Pl(N.auth,E);return new J(N.auth,"linkViaPopup",v,Q,N).executeNotNull()})).apply(this,arguments)}let J=(()=>{class A extends bi{constructor(E,N,Q,ce,rt){super(E,N,ce,rt),this.provider=Q,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var E=this;return(0,b.Z)(function*(){const N=yield E.execute();return Se(N,E.auth,"internal-error"),N})()}onExecution(){var E=this;return(0,b.Z)(function*(){We(1===E.filter.length,"Popup operations only handle one event");const N=xn();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],N),E.authWindow.associatedEvent=N,E.resolver._originValidation(E.auth).catch(Q=>{E.reject(Q)}),E.resolver._isIframeWebStorageSupported(E.auth,Q=>{Q||E.reject(mt(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const E=()=>{var N,Q;this.pollId=null!==(Q=null===(N=this.authWindow)||void 0===N?void 0:N.window)&&void 0!==Q&&Q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,lo.get())};E()}}return A.currentPopupAction=null,A})();const se="pendingRedirect",Ue=new Map;class St extends bi{constructor(v,E,N=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,N),this.eventId=null}execute(){var v=()=>super.execute,E=this;return(0,b.Z)(function*(){let N=Ue.get(E.auth._key());if(!N){try{const ce=(yield function cn(A,v){return an.apply(this,arguments)}(E.resolver,E.auth))?yield v().call(E):null;N=()=>Promise.resolve(ce)}catch(Q){N=()=>Promise.reject(Q)}Ue.set(E.auth._key(),N)}return E.bypassAuthState||Ue.set(E.auth._key(),()=>Promise.resolve(null)),N()})()}onAuthEvent(v){var E=()=>super.onAuthEvent,N=this;return(0,b.Z)(function*(){if("signInViaRedirect"===v.type)return E().call(N,v);if("unknown"!==v.type){if(v.eventId){const Q=yield N.auth._redirectUserForId(v.eventId);if(Q)return N.user=Q,E().call(N,v);N.resolve(null)}}else N.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function an(){return(an=(0,b.Z)(function*(A,v){const E=to(v),N=co(A);if(!(yield N._isAvailable()))return!1;const Q="true"===(yield N._get(E));return yield N._remove(E),Q})).apply(this,arguments)}function sr(A,v){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,b.Z)(function*(A,v){return co(A)._set(to(v),"true")})).apply(this,arguments)}function Vi(){Ue.clear()}function uo(A,v){Ue.set(A._key(),v)}function co(A){return wt(A._redirectPersistence)}function to(A){return he(se,A.config.apiKey,A.name)}function va(A,v,E){return function Xa(A,v,E){return Do.apply(this,arguments)}(A,v,E)}function Do(){return(Do=(0,b.Z)(function*(A,v,E){const N=Cr(A);ze(A,v,Zi),yield N._initializationPromise;const Q=Pl(N,E);return yield sr(Q,N),Q._openRedirect(N,v,"signInViaRedirect")})).apply(this,arguments)}function U(A,v,E){return function z(A,v,E){return ee.apply(this,arguments)}(A,v,E)}function ee(){return(ee=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A);ze(N.auth,v,Zi),yield N.auth._initializationPromise;const Q=Pl(N.auth,E);yield sr(Q,N.auth);const ce=yield ar(N);return Q._openRedirect(N.auth,v,"reauthViaRedirect",ce)})).apply(this,arguments)}function Ee(A,v,E){return function je(A,v,E){return Xe.apply(this,arguments)}(A,v,E)}function Xe(){return(Xe=(0,b.Z)(function*(A,v,E){const N=(0,Z.m9)(A);ze(N.auth,v,Zi),yield N.auth._initializationPromise;const Q=Pl(N.auth,E);yield Xs(!1,N,v.providerId),yield sr(Q,N.auth);const ce=yield ar(N);return Q._openRedirect(N.auth,v,"linkViaRedirect",ce)})).apply(this,arguments)}function Vt(A,v){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,b.Z)(function*(A,v){return yield Cr(A)._initializationPromise,Pn(A,v,!1)})).apply(this,arguments)}function Pn(A,v){return en.apply(this,arguments)}function en(){return(en=(0,b.Z)(function*(A,v,E=!1){const N=Cr(A),Q=Pl(N,v),rt=yield new St(N,Q,E).execute();return rt&&!E&&(delete rt.user._redirectEventId,yield N._persistUserIfCurrent(rt.user),yield N._setRedirectUser(null,v)),rt})).apply(this,arguments)}function ar(A){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,b.Z)(function*(A){const v=xn(`${A.uid}:::`);return A._redirectEventId=v,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),v})).apply(this,arguments)}class fs{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let E=!1;return this.consumers.forEach(N=>{this.isEventForConsumer(v,N)&&(E=!0,this.sendToConsumer(v,N),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Vr(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _r(A);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=v,E=!0)),E}sendToConsumer(v,E){var N;if(v.error&&!_r(v)){const Q=(null===(N=v.error.code)||void 0===N?void 0:N.split("auth/")[1])||"internal-error";E.onError(mt(this.auth,Q))}else E.onAuthEvent(v)}isEventForConsumer(v,E){const N=null===E.eventId||!!v.eventId&&v.eventId===E.eventId;return E.filter.includes(v.type)&&N}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eu(v))}saveEventToCache(v){this.cachedEventUids.add(eu(v)),this.lastProcessedEventTime=Date.now()}}function eu(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(v=>v).join("-")}function _r({type:A,error:v}){return"unknown"===A&&"auth/no-auth-event"===v?.code}function ps(A){return Io.apply(this,arguments)}function Io(){return(Io=(0,b.Z)(function*(A,v={}){return Tt(A,"GET","/v1/projects",v)})).apply(this,arguments)}const Ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dd=/^https?/;function hd(){return(hd=(0,b.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:v}=yield ps(A);for(const E of v)try{if(fh(E))return}catch{}yt(A,"unauthorized-domain")})).apply(this,arguments)}function fh(A){const v=$e(),{protocol:E,hostname:N}=new URL(v);if(A.startsWith("chrome-extension://")){const rt=new URL(A);return""===rt.hostname&&""===N?"chrome-extension:"===E&&A.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===E&&rt.hostname===N}if(!dd.test(E))return!1;if(Ku.test(A))return N===A;const Q=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Q+"|"+Q+")$","i").test(N)}const Bp=new ht(3e4,6e4);function ph(){const A=ir().___jsl;if(A?.H)for(const v of Object.keys(A.H))if(A.H[v].r=A.H[v].r||[],A.H[v].L=A.H[v].L||[],A.H[v].r=[...A.H[v].L],A.CP)for(let E=0;E<A.CP.length;E++)A.CP[E]=null}let gh=null;const _f=new ht(5e3,15e3),wm="__/auth/iframe",hy="emulator/auth/iframe",yf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fy(A){const v=A.config;Se(v.authDomain,A,"auth-domain-config-required");const E=v.emulator?Bt(v,hy):`https://${A.config.authDomain}/${wm}`,N={apiKey:v.apiKey,appName:A.name,v:p.SDK_VERSION},Q=fd.get(A.config.apiHost);Q&&(N.eid=Q);const ce=A._getFrameworks();return ce.length&&(N.fw=ce.join(",")),`${E}?${(0,Z.xO)(N).slice(1)}`}function Dc(){return Dc=(0,b.Z)(function*(A){const v=yield function Vp(A){return gh=gh||function dy(A){return new Promise((v,E)=>{var N,Q,ce;function rt(){ph(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{ph(),E(mt(A,"network-request-failed"))},timeout:Bp.get()})}if(null!==(Q=null===(N=ir().gapi)||void 0===N?void 0:N.iframes)&&void 0!==Q&&Q.Iframe)v(gapi.iframes.getContext());else{if(null===(ce=ir().gapi)||void 0===ce||!ce.load){const Ut=ga("iframefcb");return ir()[Ut]=()=>{gapi.load?rt():E(mt(A,"network-request-failed"))},Rl(`https://apis.google.com/js/api.js?onload=${Ut}`).catch(bn=>E(bn))}rt()}}).catch(v=>{throw gh=null,v})}(A),gh}(A),E=ir().gapi;return Se(E,A,"internal-error"),v.open({where:document.body,url:fy(A),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yf,dontclear:!0},N=>new Promise(function(){var Q=(0,b.Z)(function*(ce,rt){yield N.restyle({setHideOnLeave:!1});const Ut=mt(A,"network-request-failed"),bn=ir().setTimeout(()=>{rt(Ut)},_f.get());function Rn(){ir().clearTimeout(bn),ce(N)}N.ping(Rn).then(Rn,()=>{rt(Ut)})});return function(ce,rt){return Q.apply(this,arguments)}}()))}),Dc.apply(this,arguments)}const Co={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Si=500,mh=600,tu="_blank",Zo="http://localhost";class As{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const py="__/auth/handler",Gp="emulator/auth/handler";function mu(A,v,E,N,Q,ce){Se(A.config.authDomain,A,"auth-domain-config-required"),Se(A.config.apiKey,A,"invalid-api-key");const rt={apiKey:A.config.apiKey,appName:A.name,authType:E,redirectUrl:N,v:p.SDK_VERSION,eventId:Q};if(v instanceof Zi){v.setDefaultLanguage(A.languageCode),rt.providerId=v.providerId||"",(0,Z.xb)(v.getCustomParameters())||(rt.customParameters=JSON.stringify(v.getCustomParameters()));for(const[bn,Rn]of Object.entries(ce||{}))rt[bn]=Rn}if(v instanceof Oo){const bn=v.getScopes().filter(Rn=>""!==Rn);bn.length>0&&(rt.scopes=bn.join(","))}A.tenantId&&(rt.tid=A.tenantId);const Ut=rt;for(const bn of Object.keys(Ut))void 0===Ut[bn]&&delete Ut[bn];return`${function pd({config:A}){return A.emulator?Bt(A,Gp):`https://${A.authDomain}/${py}`}(A)}?${(0,Z.xO)(Ut).slice(1)}`}const qu="webStorageSupport",jp=class bf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vn,this._completeRedirectFn=Pn,this._overrideRedirectResult=uo}_openPopup(v,E,N,Q){var ce=this;return(0,b.Z)(function*(){var rt;We(null===(rt=ce.eventManagers[v._key()])||void 0===rt?void 0:rt.manager,"_initialize() not called before _openPopup()");const Ut=mu(v,E,N,$e(),Q);return function vf(A,v,E,N=Si,Q=mh){const ce=Math.max((window.screen.availHeight-Q)/2,0).toString(),rt=Math.max((window.screen.availWidth-N)/2,0).toString();let Ut="";const bn=Object.assign(Object.assign({},Co),{width:N.toString(),height:Q.toString(),top:ce,left:rt}),Rn=(0,Z.z$)().toLowerCase();E&&(Ut=Ve(Rn)?tu:E),ie(Rn)&&(v=v||Zo,bn.scrollbars="yes");const fr=Object.entries(bn).reduce((ba,[Po,el])=>`${ba}${Po}=${el},`,"");if(function zt(A=(0,Z.z$)()){var v;return st(A)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(Rn)&&"_self"!==Ut)return function Jr(A,v){const E=document.createElement("a");E.href=A,E.target=v;const N=document.createEvent("MouseEvent");N.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(N)}(v||"",Ut),new As(null);const xi=window.open(v||"",Ut,fr);Se(xi,A,"popup-blocked");try{xi.focus()}catch{}return new As(xi)}(v,Ut,xn())})()}_openRedirect(v,E,N,Q){var ce=this;return(0,b.Z)(function*(){return yield ce._originValidation(v),function $t(A){ir().location.href=A}(mu(v,E,N,$e(),Q)),new Promise(()=>{})})()}_initialize(v){const E=v._key();if(this.eventManagers[E]){const{manager:Q,promise:ce}=this.eventManagers[E];return Q?Promise.resolve(Q):(We(ce,"If manager is not set, promise should be"),ce)}const N=this.initAndGetManager(v);return this.eventManagers[E]={promise:N},N.catch(()=>{delete this.eventManagers[E]}),N}initAndGetManager(v){var E=this;return(0,b.Z)(function*(){const N=yield function Ss(A){return Dc.apply(this,arguments)}(v),Q=new fs(v);return N.register("authEvent",ce=>(Se(ce?.authEvent,v,"invalid-auth-event"),{status:Q.onEvent(ce.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[v._key()]={manager:Q},E.iframes[v._key()]=N,Q})()}_isIframeWebStorageSupported(v,E){this.iframes[v._key()].send(qu,{type:qu},Q=>{var ce;const rt=null===(ce=Q?.[0])||void 0===ce?void 0:ce[qu];void 0!==rt&&E(!!rt),yt(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const E=v._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function hh(A){return hd.apply(this,arguments)}(v)),this.originValidationPromises[E]}get _shouldInitProactively(){return En()||X()||st()}};class Dm{constructor(v){this.factorId=v}_process(v,E,N){switch(E.type){case"enroll":return this._finalizeEnroll(v,E.credential,N);case"signin":return this._finalizeSignIn(v,E.credential);default:return Te("unexpected MultiFactorSessionType")}}}class vl extends Dm{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new vl(v)}_finalizeEnroll(v,E,N){return function Gu(A,v){return Tt(A,"POST","/v2/accounts/mfaEnrollment:finalize",nn(A,v))}(v,{idToken:E,displayName:N,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,E){return function mr(A,v){return Tt(A,"POST","/v2/accounts/mfaSignIn:finalize",nn(A,v))}(v,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Im=(()=>{class A{constructor(){}static assertion(E){return vl._fromCredential(E)}}return A.FACTOR_ID="phone",A})();var Ic="@firebase/auth";class _h{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var E=this;return(0,b.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const E=this.auth.onIdTokenChanged(N=>{v(N?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,E),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const E=this.internalListeners.get(v);E&&(this.internalListeners.delete(v),E(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,Z.Pz)("authIdTokenMaxAge"),function yh(A){(0,p._registerComponent)(new xe.wA("auth",(v,{options:E})=>{const N=v.getProvider("app").getImmediate(),Q=v.getProvider("heartbeat"),{apiKey:ce,authDomain:rt}=N.options;return((Ut,bn)=>{Se(ce&&!ce.includes(":"),"invalid-api-key",{appName:Ut.name}),Se(!rt?.includes(":"),"argument-error",{appName:Ut.name});const Rn={apiKey:ce,authDomain:rt,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qr(A)},fr=new _s(Ut,bn,Rn);return function jt(A,v){const E=v?.persistence||[],N=(Array.isArray(E)?E:[E]).map(wt);v?.errorMap&&A._updateErrorMap(v.errorMap),A._initializeWithPersistence(N,v?.popupRedirectResolver)}(fr,E),fr})(N,Q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,E,N)=>{v.getProvider("auth-internal").initialize()})),(0,p._registerComponent)(new xe.wA("auth-internal",v=>{const E=Cr(v.getProvider("auth").getImmediate());return new _h(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,p.registerVersion)(Ic,"0.21.5",function gd(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,p.registerVersion)(Ic,"0.21.5","esm2017")}("Browser")},2090:(sn,qe,G)=>{G.d(qe,{$s:()=>me,BH:()=>ze,DV:()=>Yn,Dv:()=>gn,G6:()=>dt,GJ:()=>Bn,L:()=>Ae,LL:()=>Kt,Pz:()=>ot,Sg:()=>Ft,UG:()=>We,UI:()=>un,US:()=>xe,Wj:()=>qr,Wl:()=>Un,Yr:()=>Qe,ZB:()=>ke,ZR:()=>hn,aH:()=>mt,b$:()=>Qt,cI:()=>Nn,dS:()=>cr,eu:()=>ht,g5:()=>p,gK:()=>rr,gQ:()=>Kr,h$:()=>Le,hl:()=>vt,hu:()=>Z,jU:()=>ft,lb:()=>Cn,m9:()=>bt,ne:()=>In,p$:()=>ve,pd:()=>Wr,r3:()=>kn,ru:()=>wt,tV:()=>be,uI:()=>Te,ug:()=>Sn,vZ:()=>On,w1:()=>$e,w9:()=>zn,xO:()=>ti,xb:()=>tr,z$:()=>Se,zI:()=>Bt,zd:()=>kr});const b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(he,fe){if(!he)throw p(fe)},p=function(he){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+he)},Ie=function(he){const fe=[];let te=0;for(let ie=0;ie<he.length;ie++){let X=he.charCodeAt(ie);X<128?fe[te++]=X:X<2048?(fe[te++]=X>>6|192,fe[te++]=63&X|128):55296==(64512&X)&&ie+1<he.length&&56320==(64512&he.charCodeAt(ie+1))?(X=65536+((1023&X)<<10)+(1023&he.charCodeAt(++ie)),fe[te++]=X>>18|240,fe[te++]=X>>12&63|128,fe[te++]=X>>6&63|128,fe[te++]=63&X|128):(fe[te++]=X>>12|224,fe[te++]=X>>6&63|128,fe[te++]=63&X|128)}return fe},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(he,fe){if(!Array.isArray(he))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let X=0;X<he.length;X+=3){const Ve=he[X],de=X+1<he.length,ge=de?he[X+1]:0,le=X+2<he.length,Re=le?he[X+2]:0;let zt=(15&ge)<<2|Re>>6,Ht=63&Re;le||(Ht=64,de||(zt=64)),ie.push(te[Ve>>2],te[(3&Ve)<<4|ge>>4],te[zt],te[Ht])}return ie.join("")},encodeString(he,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(he):this.encodeByteArray(Ie(he),fe)},decodeString(he,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(he):function(he){const fe=[];let te=0,ie=0;for(;te<he.length;){const X=he[te++];if(X<128)fe[ie++]=String.fromCharCode(X);else if(X>191&&X<224){const Ve=he[te++];fe[ie++]=String.fromCharCode((31&X)<<6|63&Ve)}else if(X>239&&X<365){const le=((7&X)<<18|(63&he[te++])<<12|(63&he[te++])<<6|63&he[te++])-65536;fe[ie++]=String.fromCharCode(55296+(le>>10)),fe[ie++]=String.fromCharCode(56320+(1023&le))}else{const Ve=he[te++],de=he[te++];fe[ie++]=String.fromCharCode((15&X)<<12|(63&Ve)<<6|63&de)}}return fe.join("")}(this.decodeStringToByteArray(he,fe))},decodeStringToByteArray(he,fe){this.init_();const te=fe?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let X=0;X<he.length;){const Ve=te[he.charAt(X++)],ge=X<he.length?te[he.charAt(X)]:0;++X;const Re=X<he.length?te[he.charAt(X)]:64;++X;const Ct=X<he.length?te[he.charAt(X)]:64;if(++X,null==Ve||null==ge||null==Re||null==Ct)throw new He;ie.push(Ve<<2|ge>>4),64!==Re&&(ie.push(ge<<4&240|Re>>2),64!==Ct&&ie.push(Re<<6&192|Ct))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let he=0;he<this.ENCODED_VALS.length;he++)this.byteToCharMap_[he]=this.ENCODED_VALS.charAt(he),this.charToByteMap_[this.byteToCharMap_[he]]=he,this.byteToCharMapWebSafe_[he]=this.ENCODED_VALS_WEBSAFE.charAt(he),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[he]]=he,he>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(he)]=he,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(he)]=he)}}};class He extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(he){const fe=Ie(he);return xe.encodeByteArray(fe,!0)},Ae=function(he){return Le(he).replace(/\./g,"")},be=function(he){try{return xe.decodeString(he,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function ve(he){return ke(void 0,he)}function ke(he,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===he&&(he={});break;case Array:he=[];break;default:return fe}for(const te in fe)!fe.hasOwnProperty(te)||!et(te)||(he[te]=ke(he[te],fe[te]));return he}function et(he){return"__proto__"!==he}const gt=()=>{try{return function Ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const he=process.env.__FIREBASE_DEFAULTS__;return he?JSON.parse(he):void 0})()||(()=>{if(typeof document>"u")return;let he;try{he=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const fe=he&&be(he[1]);return fe&&JSON.parse(fe)})()}catch(he){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${he}`)}},mt=()=>{var he;return null===(he=gt())||void 0===he?void 0:he.config},ot=he=>{var fe;return null===(fe=gt())||void 0===fe?void 0:fe[`_${he}`]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,te)=>{this.resolve=fe,this.reject=te})}wrapCallback(fe){return(te,ie)=>{te?this.reject(te):this.resolve(ie),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(te):fe(te,ie))}}}function Ft(he,fe){if(he.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=fe||"demo-project",X=he.iat||0,Ve=he.sub||he.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:X,exp:X+3600,auth_time:X,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},he);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(de)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function We(){var he;const fe=null===(he=gt())||void 0===he?void 0:he.forceEnvironment;if("node"===fe)return!0;if("browser"===fe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ft(){return"object"==typeof self&&self.self===self}function wt(){const he="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof he&&void 0!==he.id}function Qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $e(){const he=Se();return he.indexOf("MSIE ")>=0||he.indexOf("Trident/")>=0}function Qe(){return!0===b.NODE_CLIENT||!0===b.NODE_ADMIN}function dt(){return!We()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vt(){try{return"object"==typeof indexedDB}catch{return!1}}function ht(){return new Promise((he,fe)=>{try{let te=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(ie);X.onsuccess=()=>{X.result.close(),te||self.indexedDB.deleteDatabase(ie),he(!0)},X.onupgradeneeded=()=>{te=!1},X.onerror=()=>{var Ve;fe((null===(Ve=X.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(te){fe(te)}})}function Bt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class hn extends Error{constructor(fe,te,ie){super(te),this.code=fe,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(fe,te,ie){this.service=fe,this.serviceName=te,this.errors=ie}create(fe,...te){const ie=te[0]||{},X=`${this.service}/${fe}`,Ve=this.errors[fe],de=Ve?function nn(he,fe){return he.replace(Tt,(te,ie)=>{const X=fe[ie];return null!=X?String(X):`<${ie}?>`})}(Ve,ie):"Error";return new hn(X,`${this.serviceName}: ${de} (${X}).`,ie)}}const Tt=/\{\$([^}]+)}/g;function Nn(he){return JSON.parse(he)}function Un(he){return JSON.stringify(he)}const Hn=function(he){let fe={},te={},ie={},X="";try{const Ve=he.split(".");fe=Nn(be(Ve[0])||""),te=Nn(be(Ve[1])||""),X=Ve[2],ie=te.d||{},delete te.d}catch{}return{header:fe,claims:te,data:ie,signature:X}},zn=function(he){const te=Hn(he).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Bn=function(he){const fe=Hn(he).claims;return"object"==typeof fe&&!0===fe.admin};function kn(he,fe){return Object.prototype.hasOwnProperty.call(he,fe)}function Yn(he,fe){if(Object.prototype.hasOwnProperty.call(he,fe))return he[fe]}function tr(he){for(const fe in he)if(Object.prototype.hasOwnProperty.call(he,fe))return!1;return!0}function un(he,fe,te){const ie={};for(const X in he)Object.prototype.hasOwnProperty.call(he,X)&&(ie[X]=fe.call(te,he[X],X,he));return ie}function On(he,fe){if(he===fe)return!0;const te=Object.keys(he),ie=Object.keys(fe);for(const X of te){if(!ie.includes(X))return!1;const Ve=he[X],de=fe[X];if(Pt(Ve)&&Pt(de)){if(!On(Ve,de))return!1}else if(Ve!==de)return!1}for(const X of ie)if(!te.includes(X))return!1;return!0}function Pt(he){return null!==he&&"object"==typeof he}function ti(he){const fe=[];for(const[te,ie]of Object.entries(he))Array.isArray(ie)?ie.forEach(X=>{fe.push(encodeURIComponent(te)+"="+encodeURIComponent(X))}):fe.push(encodeURIComponent(te)+"="+encodeURIComponent(ie));return fe.length?"&"+fe.join("&"):""}function kr(he){const fe={};return he.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[X,Ve]=ie.split("=");fe[decodeURIComponent(X)]=decodeURIComponent(Ve)}}),fe}function Wr(he){const fe=he.indexOf("?");if(!fe)return"";const te=he.indexOf("#",fe);return he.substring(fe,te>0?te:void 0)}class Kr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let fe=1;fe<this.blockSize;++fe)this.pad_[fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(fe,te){te||(te=0);const ie=this.W_;if("string"==typeof fe)for(let Ct=0;Ct<16;Ct++)ie[Ct]=fe.charCodeAt(te)<<24|fe.charCodeAt(te+1)<<16|fe.charCodeAt(te+2)<<8|fe.charCodeAt(te+3),te+=4;else for(let Ct=0;Ct<16;Ct++)ie[Ct]=fe[te]<<24|fe[te+1]<<16|fe[te+2]<<8|fe[te+3],te+=4;for(let Ct=16;Ct<80;Ct++){const zt=ie[Ct-3]^ie[Ct-8]^ie[Ct-14]^ie[Ct-16];ie[Ct]=4294967295&(zt<<1|zt>>>31)}let Re,st,X=this.chain_[0],Ve=this.chain_[1],de=this.chain_[2],ge=this.chain_[3],le=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Re=ge^Ve&(de^ge),st=1518500249):(Re=Ve^de^ge,st=1859775393):Ct<60?(Re=Ve&de|ge&(Ve|de),st=2400959708):(Re=Ve^de^ge,st=3395469782);const zt=(X<<5|X>>>27)+Re+le+st+ie[Ct]&4294967295;le=ge,ge=de,de=4294967295&(Ve<<30|Ve>>>2),Ve=X,X=zt}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+Ve&4294967295,this.chain_[2]=this.chain_[2]+de&4294967295,this.chain_[3]=this.chain_[3]+ge&4294967295,this.chain_[4]=this.chain_[4]+le&4294967295}update(fe,te){if(null==fe)return;void 0===te&&(te=fe.length);const ie=te-this.blockSize;let X=0;const Ve=this.buf_;let de=this.inbuf_;for(;X<te;){if(0===de)for(;X<=ie;)this.compress_(fe,X),X+=this.blockSize;if("string"==typeof fe){for(;X<te;)if(Ve[de]=fe.charCodeAt(X),++de,++X,de===this.blockSize){this.compress_(Ve),de=0;break}}else for(;X<te;)if(Ve[de]=fe[X],++de,++X,de===this.blockSize){this.compress_(Ve),de=0;break}}this.inbuf_=de,this.total_+=te}digest(){const fe=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&te,te/=256;this.compress_(this.buf_);let ie=0;for(let X=0;X<5;X++)for(let Ve=24;Ve>=0;Ve-=8)fe[ie]=this.chain_[X]>>Ve&255,++ie;return fe}}function In(he,fe){const te=new fn(he,fe);return te.subscribe.bind(te)}class fn{constructor(fe,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{fe(this)}).catch(ie=>{this.error(ie)})}next(fe){this.forEachObserver(te=>{te.next(fe)})}error(fe){this.forEachObserver(te=>{te.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,te,ie){let X;if(void 0===fe&&void 0===te&&void 0===ie)throw new Error("Missing Observer.");X=function Wn(he,fe){if("object"!=typeof he||null===he)return!1;for(const te of fe)if(te in he&&"function"==typeof he[te])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:te,complete:ie},void 0===X.next&&(X.next=nr),void 0===X.error&&(X.error=nr),void 0===X.complete&&(X.complete=nr);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Ve}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,fe)}sendOne(fe,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{te(this.observers[fe])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}const gn=function(he,fe,te,ie){let X;if(ie<fe?X="at least "+fe:ie>te&&(X=0===te?"none":"no more than "+te),X)throw new Error(he+" failed: Was called with "+ie+(1===ie?" argument.":" arguments.")+" Expects "+X+".")};function rr(he,fe){return`${he} failed: ${fe} argument `}function qr(he,fe,te,ie){if((!ie||te)&&"function"!=typeof te)throw new Error(rr(he,fe)+"must be a valid function.")}function Cn(he,fe,te,ie){if((!ie||te)&&("object"!=typeof te||null===te))throw new Error(rr(he,fe)+"must be a valid context object.")}const cr=function(he){const fe=[];let te=0;for(let ie=0;ie<he.length;ie++){let X=he.charCodeAt(ie);if(X>=55296&&X<=56319){const Ve=X-55296;ie++,Z(ie<he.length,"Surrogate pair missing trail surrogate."),X=65536+(Ve<<10)+(he.charCodeAt(ie)-56320)}X<128?fe[te++]=X:X<2048?(fe[te++]=X>>6|192,fe[te++]=63&X|128):X<65536?(fe[te++]=X>>12|224,fe[te++]=X>>6&63|128,fe[te++]=63&X|128):(fe[te++]=X>>18|240,fe[te++]=X>>12&63|128,fe[te++]=X>>6&63|128,fe[te++]=63&X|128)}return fe},Sn=function(he){let fe=0;for(let te=0;te<he.length;te++){const ie=he.charCodeAt(te);ie<128?fe++:ie<2048?fe+=2:ie>=55296&&ie<=56319?(fe+=4,te++):fe+=3}return fe},br=1e3,Lt=2,Et=144e5,Fe=.5;function me(he,fe=br,te=Lt){const ie=fe*Math.pow(te,he),X=Math.round(Fe*ie*(Math.random()-.5)*2);return Math.min(Et,ie+X)}function bt(he){return he&&he._delegate?he._delegate:he}},6743:(sn,qe,G)=>{G.d(qe,{N:()=>b});const b={baseUrl:"https://psicoleigos.azurewebsites.net/",production:!0,firebase:{apiKey:"AIzaSyBZwKztkqkhS6b7UHmRBdOyeg1myLJEcR8",authDomain:"psicoleigos-eeee1.firebaseapp.com",projectId:"psicoleigos-eeee1",storageBucket:"psicoleigos-eeee1.appspot.com",messagingSenderId:"711814031287",appId:"1:711814031287:web:742f26ac4bafc1e2b7ea32",measurementId:"G-PL2WDP34XM"}}},3651:(sn,qe,G)=>{G.d(qe,{e:()=>be});var b=G(5114),xe=(G(2090),G(9681),G(1877),G(4859),G(4650)),He=G(3101),Le=G(1205),Ae=G(4629);let be=(()=>{class ve{constructor(et,Ke,_t,xt){this.afs=et,this.afAuth=Ke,this.router=_t,this.ngZone=xt,this.afAuth.authState.subscribe(tt=>{tt?(this.userData=tt,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(et,Ke){return this.afAuth.signInWithEmailAndPassword(et,Ke).then(_t=>{this.SetUserData(_t.user),this.afAuth.authState.subscribe(xt=>{xt&&this.router.navigate(["rpd"])})}).catch(_t=>{window.alert(_t.message)})}SignUp(et,Ke){return this.afAuth.createUserWithEmailAndPassword(et,Ke).then(_t=>{this.SendVerificationMail(),this.SetUserData(_t.user)}).catch(_t=>{window.alert(_t.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(et=>et.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(et){return this.afAuth.sendPasswordResetEmail(et).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Ke=>{window.alert(Ke)})}get isLoggedIn(){const et=JSON.parse(localStorage.getItem("user"));return null!==et&&!1!==et.emailVerified}GoogleAuth(){return this.AuthLogin(new b.Q)}AuthLogin(et){return this.afAuth.signInWithPopup(et).then(Ke=>{this.SetUserData(Ke.user),this.router.navigate(["rpd"])}).catch(Ke=>{window.alert(Ke)})}SetUserData(et){return this.afs.doc(`users/${et.uid}`).set({uid:et.uid,email:et.email,displayName:et.displayName,photoURL:et.photoURL,emailVerified:et.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["landing-page"])})}getUser(){const et=localStorage.getItem("user");let Ke;return Ke=et&&"null"!=et?JSON.parse(et):this.userData._delegate,Ke}}return ve.\u0275fac=function(et){return new(et||ve)(xe.LFG(He.ST),xe.LFG(Le.zQ),xe.LFG(Ae.F0),xe.LFG(xe.R0b))},ve.\u0275prov=xe.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})()},8410:(sn,qe,G)=>{var b=G(1481),Z=G(4629),p=G(4650),Ie=G(3651);let Pe=(()=>{class r{constructor(t,l){this.authService=t,this.router=l}canActivate(t,l){return!0!==this.authService.isLoggedIn&&!this.authService.userData&&this.router.navigate(["sign-up"]),!0}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(Ie.e),p.LFG(Z.F0))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),xe=(()=>{class r{constructor(t,l){this.authService=t,this.router=l}canActivate(t,l){return console.log("teste"),this.authService.isLoggedIn&&this.router.navigate(["rpd"]),!0}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(Ie.e),p.LFG(Z.F0))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const He=[{path:"landing-page",loadChildren:()=>Promise.all([G.e(592),G.e(601)]).then(G.bind(G,8601)).then(r=>r.LandingPageModule),canActivate:[xe]},{path:"rpd",loadChildren:()=>G.e(562).then(G.bind(G,8562)).then(r=>r.RpdModule),canActivate:[Pe]},{path:"sign-in",loadChildren:()=>G.e(592).then(G.bind(G,8471)).then(r=>r.SignInModule)},{path:"forgot-password",loadChildren:()=>G.e(163).then(G.bind(G,7163)).then(r=>r.ForgotPasswordModule)},{path:"sign-up",loadChildren:()=>G.e(148).then(G.bind(G,3148)).then(r=>r.SignUpModule)},{path:"verify-email",loadChildren:()=>G.e(454).then(G.bind(G,3454)).then(r=>r.VerifyEmailModule)},{path:"",loadChildren:()=>Promise.all([G.e(592),G.e(601)]).then(G.bind(G,8601)).then(r=>r.LandingPageModule),canActivate:[xe]}];let Le=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[Z.Bz.forRoot(He,{useHash:!0}),Z.Bz]}),r})();var Ae=G(6895);function be(r,i){1&r&&(p.TgZ(0,"div",2)(1,"div",3),p._UZ(2,"div",4),p.qZA()())}function ve(r,i){1&r&&p._UZ(0,"router-outlet")}let ke=(()=>{class r{constructor(){this.title="rpg-psicoleigos",this.loaded=!0}ngOnInit(){setTimeout(()=>{this.loaded=!1},1e3)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=p.Xpm({type:r,selectors:[["app-root"]],decls:3,vars:2,consts:[["class","spinner",4,"ngIf","ngIfElse"],["routerOutlet",""],[1,"spinner"],[1,"cell"],[1,"pl","pl-puzzle"]],template:function(t,l){if(1&t&&(p.YNc(0,be,3,0,"div",0),p.YNc(1,ve,1,0,"ng-template",null,1,p.W1O)),2&t){const d=p.MAs(2);p.Q6J("ngIf",l.loaded)("ngIfElse",d)}},dependencies:[Ae.O5,Z.lC],styles:['.spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.spinner[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#98e3f4}.pl[_ngcontent-%COMP%], .pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}.pl[_ngcontent-%COMP%]{margin:0 auto 1.5em;position:relative;width:3em;height:3em}.pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{background:currentColor;content:"";display:block;position:absolute;top:0;left:0;width:100%;height:50%;transform-origin:50% 100%;clip-path:polygon(0 0,100% 0,50% 100%);-webkit-clip-path:polygon(0 0,100% 0,50% 100%)}.pl-name[_ngcontent-%COMP%]{text-align:center}.pl-puzzle[_ngcontent-%COMP%]:before, .pl-puzzle[_ngcontent-%COMP%]:after{transform-origin:50% 50%;color:#98e3f4}.pl-puzzle[_ngcontent-%COMP%]:before{animation-name:_ngcontent-%COMP%_puzzleA}.pl-puzzle[_ngcontent-%COMP%]:after{animation-name:_ngcontent-%COMP%_puzzleB;background:#f5b0cb}@keyframes _ngcontent-%COMP%_puzzleA{0%{transform:translate(0) scale(1) rotate(0);z-index:1}12.5%{transform:translateY(50%) scale(1.5) rotate(-90deg);z-index:1}25%,50.1%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:1}25.1%,50%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:0}62.5%{transform:translateY(50%) scale(1.5) rotate(-270deg);z-index:1}75%{transform:translate(0) scale(1) rotate(-360deg);z-index:1}to{transform:translate(0) scale(1) rotate(-360deg);z-index:0}}@keyframes _ngcontent-%COMP%_puzzleB{0%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25.1%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:1}37.5%{transform:translateY(50%) scale(1.5) rotate(0);z-index:1}50%,75.1%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:1}50.1%,75%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:0}87.5%{transform:translateY(50%) scale(1.5) rotate(-180deg);z-index:1}to{transform:translate(25%,50%) scale(1) rotate(-270deg);z-index:1}}']}),r})();var et=G(9751),Ke=G(515),_t=G(9646),xt=G(7579),tt=G(8421),gt=G(5577),we=G(1144),yt=G(576),mt=G(3268);const ot=["addListener","removeListener"],ze=["addEventListener","removeEventListener"],Ft=["on","off"];function Se(r,i,t,l){if((0,yt.m)(t)&&(l=t,t=void 0),l)return Se(r,i,t).pipe((0,mt.Z)(l));const[d,m]=function wt(r){return(0,yt.m)(r.addEventListener)&&(0,yt.m)(r.removeEventListener)}(r)?ze.map(I=>k=>r[I](i,k,t)):function We(r){return(0,yt.m)(r.addListener)&&(0,yt.m)(r.removeListener)}(r)?ot.map(Te(r,i)):function ft(r){return(0,yt.m)(r.on)&&(0,yt.m)(r.off)}(r)?Ft.map(Te(r,i)):[];if(!d&&(0,we.z)(r))return(0,gt.z)(I=>Se(I,i,t))((0,tt.Xf)(r));if(!d)throw new TypeError("Invalid event target");return new et.y(I=>{const k=(...V)=>I.next(1<V.length?V:V[0]);return d(k),()=>m(k)})}function Te(r,i){return t=>l=>r[t](i,l)}var Qt=G(4986),jt=G(3532);function ut(r=0,i,t=Qt.P){let l=-1;return null!=i&&((0,jt.K)(i)?t=i:l=i),new et.y(d=>{let m=function $e(r){return r instanceof Date&&!isNaN(r)}(r)?+r-t.now():r;m<0&&(m=0);let I=0;return t.schedule(function(){d.closed||(d.next(I++),0<=l?this.schedule(void 0,l):d.complete())},m)})}const{isArray:Qe}=Array;function dt(r){return 1===r.length&&Qe(r[0])?r[0]:r}var vt=G(5403);var At=G(1135),hn=G(9841),Kt=G(5032);const nn=new et.y(Kt.Z);var Nn=G(3269);function Un(...r){const i=(0,Nn.jO)(r),t=dt(r);return t.length?new et.y(l=>{let d=t.map(()=>[]),m=t.map(()=>!1);l.add(()=>{d=m=null});for(let I=0;!l.closed&&I<t.length;I++)(0,tt.Xf)(t[I]).subscribe((0,vt.x)(l,k=>{if(d[I].push(k),d.every(V=>V.length)){const V=d.map(Y=>Y.shift());l.next(i?i(...V):V),d.some((Y,ue)=>!Y.length&&m[ue])&&l.complete()}},()=>{m[I]=!0,!d[I].length&&l.complete()}));return()=>{d=m=null}}):Ke.E}var Hn=G(6451),jn=G(7272),zn=G(4482);function Bn(r){return(0,zn.e)((i,t)=>{(0,tt.Xf)(r).subscribe((0,vt.x)(t,()=>t.complete(),Kt.Z)),!t.closed&&i.subscribe(t)})}var kn=G(9300),Yn=G(5698),tr=G(4004),un=G(8675),On=G(1884),Pt=G(3900),vr=G(8505),ti=G(4671);function kr(...r){const i=(0,Nn.jO)(r);return(0,zn.e)((t,l)=>{const d=r.length,m=new Array(d);let I=r.map(()=>!1),k=!1;for(let V=0;V<d;V++)(0,tt.Xf)(r[V]).subscribe((0,vt.x)(l,Y=>{m[V]=Y,!k&&!I[V]&&(I[V]=!0,(k=I.every(ti.y))&&(I=null))},Kt.Z));t.subscribe((0,vt.x)(l,V=>{if(k){const Y=[V,...m];l.next(i?i(...Y):Y)}}))})}G(9718);var Wn=G(433);function za(r,i){}function Tl(r,i){if(1&r&&(p.TgZ(0,"button",3),p._uU(1),p.YNc(2,za,0,0,"ng-template",4),p.qZA()),2&r){const t=i.$implicit;p.Q6J("ngbPanelToggle",t),p.xp6(1),p.hij(" ",t.title," "),p.xp6(1),p.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function Ds(r,i){}function Bs(r,i){}function Or(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"div",8),p.NdJ("ngbRef",function(d){p.CHM(t);const m=p.oxw().$implicit;return p.KtG(m.panelDiv=d)}),p.TgZ(1,"div",9),p.YNc(2,Bs,0,0,"ng-template",4),p.qZA()()}if(2&r){const t=p.oxw().$implicit;p.s9C("id",t.id),p.uIk("aria-labelledby",t.id+"-header"),p.xp6(2),p.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const oa=function(r,i){return{$implicit:r,opened:i}};function No(r,i){if(1&r&&(p.TgZ(0,"div")(1,"div",5),p.YNc(2,Ds,0,0,"ng-template",6),p.qZA(),p.YNc(3,Or,3,3,"div",7),p.qZA()),2&r){const t=i.$implicit,l=p.oxw(),d=p.MAs(1);p.Tol("accordion-item "+(t.cardClass||"")),p.xp6(1),p.Tol("accordion-header "+(t.type?"bg-"+t.type:l.type?"bg-"+l.type:"")),p.MGl("id","",t.id,"-header"),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||d)("ngTemplateOutletContext",p.WLB(8,oa,t,t.isOpen)),p.xp6(1),p.Q6J("ngIf",!l.destroyOnHide||t.isOpen||t.transitionRunning)}}function Br(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",1),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.close())}),p.qZA()}}const Mi=["*"];function yo(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",6),p.NdJ("click",function(){const m=p.CHM(t).$implicit,I=p.oxw();return I.focus(),p.KtG(I.select(m.id,I.NgbSlideEventSource.INDICATOR))}),p.qZA()}if(2&r){const t=i.$implicit,l=p.oxw();p.ekj("active",t.id===l.activeId),p.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===l.activeId)}}function li(r,i){}function ul(r,i){if(1&r&&(p.TgZ(0,"div",7)(1,"span",8),p.SDv(2,9),p.qZA(),p.YNc(3,li,0,0,"ng-template",10),p.qZA()),2&r){const t=i.$implicit,l=i.index,d=i.count;p.Q6J("id","slide-"+t.id),p.xp6(2),p.pQV(l+1)(d),p.QtT(2),p.xp6(1),p.Q6J("ngTemplateOutlet",t.tplRef)}}function Ho(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.arrowLeft())}),p._UZ(1,"span",12),p.TgZ(2,"span",8),p.SDv(3,13),p.qZA()()}}function Is(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",14),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.arrowRight())}),p._UZ(1,"span",15),p.TgZ(2,"span",8),p.SDv(3,16),p.qZA()()}}const mi=["ngbDatepickerDayView",""],Aa=["month"],Wa=["year"];function vo(r,i){if(1&r&&(p.TgZ(0,"option",5),p._uU(1),p.qZA()),2&r){const t=i.$implicit,l=p.oxw();p.Q6J("value",t),p.uIk("aria-label",l.i18n.getMonthFullName(t,l.date.year)),p.xp6(1),p.Oqu(l.i18n.getMonthShortName(t,l.date.year))}}function Ji(r,i){if(1&r&&(p.TgZ(0,"option",5),p._uU(1),p.qZA()),2&r){const t=i.$implicit,l=p.oxw();p.Q6J("value",t),p.xp6(1),p.Oqu(l.i18n.getYearNumerals(t))}}function aa(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"ngb-datepicker-navigation-select",7),p.NdJ("select",function(d){p.CHM(t);const m=p.oxw();return p.KtG(m.select.emit(d))}),p.qZA()}if(2&r){const t=p.oxw();p.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function Sl(r,i){1&r&&p._UZ(0,"div",0)}function Ln(r,i){1&r&&p._UZ(0,"div",0)}function bo(r,i){if(1&r&&(p.YNc(0,Sl,1,0,"div",9),p.TgZ(1,"div",10),p._uU(2),p.qZA(),p.YNc(3,Ln,1,0,"div",9)),2&r){const t=i.$implicit,l=i.index,d=p.oxw(2);p.Q6J("ngIf",l>0),p.xp6(2),p.hij(" ",d.i18n.getMonthLabel(t.firstDate)," "),p.xp6(1),p.Q6J("ngIf",l!==d.months.length-1)}}function $o(r,i){if(1&r&&p.YNc(0,bo,4,3,"ng-template",8),2&r){const t=p.oxw();p.Q6J("ngForOf",t.months)}}function cl(r,i){if(1&r&&(p.TgZ(0,"div",5),p._uU(1),p.qZA()),2&r){const t=p.oxw(2);p.xp6(1),p.Oqu(t.i18n.getWeekLabel())}}function la(r,i){if(1&r&&(p.TgZ(0,"div",6),p._uU(1),p.qZA()),2&r){const t=i.$implicit;p.xp6(1),p.Oqu(t)}}function Kl(r,i){if(1&r&&(p.TgZ(0,"div",2),p.YNc(1,cl,2,1,"div",3),p.YNc(2,la,2,1,"div",4),p.qZA()),2&r){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.datepicker.showWeekNumbers),p.xp6(1),p.Q6J("ngForOf",t.viewModel.weekdays)}}function Mo(r,i){if(1&r&&(p.TgZ(0,"div",11),p._uU(1),p.qZA()),2&r){const t=p.oxw(2).$implicit,l=p.oxw();p.xp6(1),p.Oqu(l.i18n.getWeekNumerals(t.number))}}function Oa(r,i){}function j(r,i){if(1&r&&p.YNc(0,Oa,0,0,"ng-template",14),2&r){const t=p.oxw().$implicit,l=p.oxw(3);p.Q6J("ngTemplateOutlet",l.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function R(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"div",12),p.NdJ("click",function(d){const I=p.CHM(t).$implicit;return p.oxw(3).doSelect(I),p.KtG(d.preventDefault())}),p.YNc(1,j,1,2,"ng-template",13),p.qZA()}if(2&r){const t=i.$implicit;p.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),p.Q6J("tabindex",t.tabindex),p.uIk("aria-label",t.ariaLabel),p.xp6(1),p.Q6J("ngIf",!t.hidden)}}function F(r,i){if(1&r&&(p.TgZ(0,"div",8),p.YNc(1,Mo,2,1,"div",9),p.YNc(2,R,2,9,"div",10),p.qZA()),2&r){const t=p.oxw().$implicit,l=p.oxw();p.xp6(1),p.Q6J("ngIf",l.datepicker.showWeekNumbers),p.xp6(1),p.Q6J("ngForOf",t.days)}}function oe(r,i){1&r&&p.YNc(0,F,3,2,"div",7),2&r&&p.Q6J("ngIf",!i.$implicit.collapsed)}const ct=["defaultDayTemplate"],ln=["content"];function jr(r,i){if(1&r&&p._UZ(0,"div",7),2&r){const l=i.currentMonth,d=i.selected,m=i.disabled,I=i.focused;p.Q6J("date",i.date)("currentMonth",l)("selected",d)("disabled",m)("focused",I)}}function Li(r,i){if(1&r&&(p.TgZ(0,"div",12),p._uU(1),p.qZA()),2&r){const t=p.oxw().$implicit,l=p.oxw(2);p.xp6(1),p.hij(" ",l.i18n.getMonthLabel(t.firstDate)," ")}}function Ri(r,i){if(1&r&&(p.TgZ(0,"div",9),p.YNc(1,Li,2,1,"div",10),p._UZ(2,"ngb-datepicker-month",11),p.qZA()),2&r){const t=i.$implicit,l=p.oxw(2);p.xp6(1),p.Q6J("ngIf","none"===l.navigation||l.displayMonths>1&&"select"===l.navigation),p.xp6(1),p.Q6J("month",t.firstDate)}}function so(r,i){if(1&r&&p.YNc(0,Ri,3,2,"div",8),2&r){const t=p.oxw();p.Q6J("ngForOf",t.model.months)}}function oo(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"ngb-datepicker-navigation",13),p.NdJ("navigate",function(d){p.CHM(t);const m=p.oxw();return p.KtG(m.onNavigateEvent(d))})("select",function(d){p.CHM(t);const m=p.oxw();return p.KtG(m.onNavigateDateSelect(d))}),p.qZA()}if(2&r){const t=p.oxw();p.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function Vs(r,i){}function Na(r,i){}const Al=["dialog"],_i=["ngbNavOutlet",""];function ss(r,i){}const ua=function(r){return{$implicit:r}};function ca(r,i){if(1&r&&(p.TgZ(0,"div",2),p.YNc(1,ss,0,0,"ng-template",3),p.qZA()),2&r){const t=p.oxw().$implicit,l=p.oxw();p.Q6J("item",t)("nav",l.nav)("role",l.paneRole),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",p.VKq(5,ua,t.active||l.isPanelTransitioning(t)))}}function Cs(r,i){if(1&r&&p.YNc(0,ca,2,7,"div",1),2&r){const t=i.$implicit,l=p.oxw();p.Q6J("ngIf",t.isPanelInDom()||l.isPanelTransitioning(t))}}function zo(r,i){1&r&&(p.TgZ(0,"span",9),p.SDv(1,10),p.qZA())}function Ma(r,i){1&r&&(p.TgZ(0,"span",9),p.SDv(1,11),p.qZA())}function Bu(r,i){1&r&&(p.TgZ(0,"span",9),p.SDv(1,12),p.qZA())}function Ra(r,i){1&r&&(p.TgZ(0,"span",9),p.SDv(1,13),p.qZA())}function Wo(r,i){1&r&&p._uU(0,"...")}function Ka(r,i){1&r&&(p.TgZ(0,"span",15),p._uU(1,"(current)"),p.qZA())}function Ol(r,i){if(1&r&&(p._uU(0),p.YNc(1,Ka,2,0,"span",14)),2&r){const t=i.$implicit,l=i.currentPage;p.hij(" ",t," "),p.xp6(1),p.Q6J("ngIf",t===l)}}function xa(r,i){}const dl=function(r){return{disabled:!0,currentPage:r}};function Pa(r,i){if(1&r&&(p.TgZ(0,"a",20),p.YNc(1,xa,0,0,"ng-template",8),p.qZA()),2&r){const t=p.oxw(2).$implicit,l=p.oxw(),d=p.MAs(9);p.xp6(1),p.Q6J("ngTemplateOutlet",(null==l.tplEllipsis?null:l.tplEllipsis.templateRef)||d)("ngTemplateOutletContext",p.VKq(2,dl,t))}}function hl(r,i){}const fl=function(r,i,t){return{disabled:r,$implicit:i,currentPage:t}};function fu(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"a",21),p.NdJ("click",function(d){p.CHM(t);const m=p.oxw().$implicit;return p.oxw(2).selectPage(m),p.KtG(d.preventDefault())}),p.YNc(1,hl,0,0,"ng-template",8),p.qZA()}if(2&r){const t=p.oxw().$implicit,l=p.oxw(),d=l.disabled,m=l.$implicit,I=p.oxw(),k=p.MAs(11);p.uIk("tabindex",d?"-1":null)("aria-disabled",d?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==I.tplNumber?null:I.tplNumber.templateRef)||k)("ngTemplateOutletContext",p.kEZ(4,fl,d,t,m))}}function da(r,i){if(1&r&&(p.TgZ(0,"li",17),p.YNc(1,Pa,2,4,"a",18),p.YNc(2,fu,2,8,"a",19),p.qZA()),2&r){const t=i.$implicit,l=p.oxw(),d=l.$implicit,m=l.disabled,I=p.oxw();p.ekj("active",t===d)("disabled",I.isEllipsis(t)||m),p.uIk("aria-current",t===d?"page":null),p.xp6(1),p.Q6J("ngIf",I.isEllipsis(t)),p.xp6(1),p.Q6J("ngIf",!I.isEllipsis(t))}}function bc(r,i){1&r&&p.YNc(0,da,3,7,"li",16),2&r&&p.Q6J("ngForOf",i.pages)}function pu(r,i){}const pl=function(r,i){return{disabled:r,currentPage:i}};function Vu(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",22),p.NdJ("click",function(d){return p.CHM(t),p.oxw().selectPage(1),p.KtG(d.preventDefault())}),p.YNc(2,pu,0,0,"ng-template",8),p.qZA()()}if(2&r){const t=p.oxw(),l=p.MAs(1);p.ekj("disabled",t.previousDisabled()),p.xp6(1),p.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||l)("ngTemplateOutletContext",p.WLB(6,pl,t.previousDisabled(),t.page))}}function Ui(r,i){}const yi=function(r){return{disabled:r}};function ui(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",23),p.NdJ("click",function(d){p.CHM(t);const m=p.oxw();return m.selectPage(m.page-1),p.KtG(d.preventDefault())}),p.YNc(2,Ui,0,0,"ng-template",8),p.qZA()()}if(2&r){const t=p.oxw(),l=p.MAs(3);p.ekj("disabled",t.previousDisabled()),p.xp6(1),p.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||l)("ngTemplateOutletContext",p.VKq(6,yi,t.previousDisabled()))}}function ql(r,i){}function Bi(r,i){}function Gu(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",24),p.NdJ("click",function(d){p.CHM(t);const m=p.oxw();return m.selectPage(m.page+1),p.KtG(d.preventDefault())}),p.YNc(2,Bi,0,0,"ng-template",8),p.qZA()()}if(2&r){const t=p.oxw(),l=p.MAs(5);p.ekj("disabled",t.nextDisabled()),p.xp6(1),p.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||l)("ngTemplateOutletContext",p.WLB(6,pl,t.nextDisabled(),t.page))}}function Ec(r,i){}function Nl(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",25),p.NdJ("click",function(d){p.CHM(t);const m=p.oxw();return m.selectPage(m.pageCount),p.KtG(d.preventDefault())}),p.YNc(2,Ec,0,0,"ng-template",8),p.qZA()()}if(2&r){const t=p.oxw(),l=p.MAs(7);p.ekj("disabled",t.nextDisabled()),p.xp6(1),p.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||l)("ngTemplateOutletContext",p.WLB(6,pl,t.nextDisabled(),t.page))}}const Yl=function(r,i,t){return{$implicit:r,pages:i,disabled:t}};function K(r,i){if(1&r&&(p.TgZ(0,"span"),p.SDv(1,1),p.ALo(2,"percent"),p.qZA()),2&r){const t=p.oxw();p.xp6(2),p.pQV(p.lcZ(2,1,t.getValue()/t.max)),p.QtT(1)}}function B(r,i){1&r&&p._uU(0),2&r&&p.Oqu(100===i.fill?"\u2605":"\u2606")}function ne(r,i){}function ye(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"span",2),p._uU(1),p.qZA(),p.TgZ(2,"span",3),p.NdJ("mouseenter",function(){const m=p.CHM(t).index,I=p.oxw();return p.KtG(I.enter(m+1))})("click",function(){const m=p.CHM(t).index,I=p.oxw();return p.KtG(I.handleClick(m+1))}),p.YNc(3,ne,0,0,"ng-template",4),p.qZA()}if(2&r){const t=i.index,l=p.oxw(),d=p.MAs(1);p.xp6(1),p.hij("(",t<l.nextRate?"*":" ",")"),p.xp6(1),p.Udp("cursor",l.isInteractive()?"pointer":"default"),p.xp6(1),p.Q6J("ngTemplateOutlet",l.starTemplate||l.starTemplateFromContent||d)("ngTemplateOutletContext",l.contexts[t])}}function Ye(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.changeHour(d.hourStep))}),p._UZ(1,"span",12),p.TgZ(2,"span",13),p.SDv(3,14),p.qZA()()}if(2&r){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function Nt(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.changeHour(-d.hourStep))}),p._UZ(1,"span",15),p.TgZ(2,"span",13),p.SDv(3,16),p.qZA()()}if(2&r){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function vn(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.changeMinute(d.minuteStep))}),p._UZ(1,"span",12),p.TgZ(2,"span",13),p.SDv(3,17),p.qZA()()}if(2&r){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function xr(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.changeMinute(-d.minuteStep))}),p._UZ(1,"span",15),p.TgZ(2,"span",13),p.SDv(3,18),p.qZA()()}if(2&r){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function It(r,i){1&r&&(p.TgZ(0,"div",5),p._uU(1,":"),p.qZA())}function xn(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw(2);return p.KtG(d.changeSecond(d.secondStep))}),p._UZ(1,"span",12),p.TgZ(2,"span",13),p.SDv(3,21),p.qZA()()}if(2&r){const t=p.oxw(2);p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function Qn(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const d=p.oxw(2);return p.KtG(d.changeSecond(-d.secondStep))}),p._UZ(1,"span",15),p.TgZ(2,"span",13),p.SDv(3,22),p.qZA()()}if(2&r){const t=p.oxw(2);p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function ir(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"div",19),p.YNc(1,xn,4,7,"button",3),p.TgZ(2,"input",20),p.NdJ("change",function(d){p.CHM(t);const m=p.oxw();return p.KtG(m.updateSecond(d.target.value))})("blur",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.handleBlur())})("input",function(d){p.CHM(t);const m=p.oxw();return p.KtG(m.formatInput(d.target))})("keydown.ArrowUp",function(d){p.CHM(t);const m=p.oxw();return m.changeSecond(m.secondStep),p.KtG(d.preventDefault())})("keydown.ArrowDown",function(d){p.CHM(t);const m=p.oxw();return m.changeSecond(-m.secondStep),p.KtG(d.preventDefault())}),p.qZA(),p.YNc(3,Qn,4,7,"button",3),p.qZA()}if(2&r){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.spinners),p.xp6(1),p.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),p.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),p.xp6(1),p.Q6J("ngIf",t.spinners)}}function $t(r,i){1&r&&p._UZ(0,"div",5)}function tn(r,i){if(1&r&&(p.ynx(0),p.SDv(1,27),p.BQk()),2&r){const t=p.oxw(2);p.xp6(1),p.pQV(t.i18n.getAfternoonPeriod()),p.QtT(1)}}function Ko(r,i){if(1&r&&p.SDv(0,28),2&r){const t=p.oxw(2);p.pQV(t.i18n.getMorningPeriod()),p.QtT(0)}}function qt(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"div",23)(1,"button",24),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.toggleMeridian())}),p.YNc(2,tn,2,1,"ng-container",25),p.YNc(3,Ko,1,1,"ng-template",null,26,p.W1O),p.qZA()()}if(2&r){const t=p.MAs(4),l=p.oxw();p.xp6(1),p.ekj("btn-sm",l.isSmallSize)("btn-lg",l.isLargeSize)("disabled",l.disabled),p.Q6J("disabled",l.disabled),p.xp6(1),p.Q6J("ngIf",l.model&&l.model.hour>=12)("ngIfElse",t)}}function at(r,i){if(1&r&&(p.TgZ(0,"strong",3),p._uU(1),p.qZA()),2&r){const t=p.oxw();p.xp6(1),p.Oqu(t.header)}}function Rt(r,i){}function ci(r,i){if(1&r){const t=p.EpF();p.TgZ(0,"div",4),p.YNc(1,Rt,0,0,"ng-template",5),p.TgZ(2,"button",6),p.NdJ("click",function(){p.CHM(t);const d=p.oxw();return p.KtG(d.hide())}),p.qZA()()}if(2&r){const t=p.oxw(),l=p.MAs(1);p.xp6(1),p.Q6J("ngTemplateOutlet",t.contentHeaderTpl||l)}}function Ro(r,i){if(1&r&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&r){const t=p.oxw().$implicit,l=p.oxw();p.Tol(l.highlightClass),p.xp6(1),p.Oqu(t)}}function ml(r,i){if(1&r&&p._uU(0),2&r){const t=p.oxw().$implicit;p.Oqu(t)}}function _l(r,i){if(1&r&&(p.YNc(0,Ro,2,3,"span",1),p.YNc(1,ml,1,1,"ng-template",null,2,p.W1O)),2&r){const t=i.odd,l=p.MAs(2);p.Q6J("ngIf",t)("ngIfElse",l)}}function os(r){return parseInt(`${r}`,10)}function Zl(r){return null!=r?`${r}`:""}function eo(r,i,t=0){return Math.max(Math.min(r,i),t)}function fa(r){return"string"==typeof r}function mn(r){return!isNaN(os(r))}function Hr(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}function pa(r){return null!=r}function wn(r){return mn(r)?`0${r}`.slice(-2):""}function mr(r,i){return r&&r.className&&r.className.split&&r.className.split(/\s+/).indexOf(i)>=0}function hr(r){return(r||document.body).getBoundingClientRect()}function Rl(r){return r.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const Ts={animation:!0,transitionTimerDelayMs:5},ju=()=>{},{transitionTimerDelayMs:oi}=Ts,Ya=new Map,$r=(r,i,t,l)=>{let d=l.context||{};const m=Ya.get(i);if(m)switch(l.runningTransition){case"continue":return Ke.E;case"stop":r.run(()=>m.transition$.complete()),d=Object.assign(m.context,d),Ya.delete(i)}const I=t(i,l.animation,d)||ju;if(!l.animation||"none"===window.getComputedStyle(i).transitionProperty)return r.run(()=>I()),(0,_t.of)(void 0).pipe(function on(r){return i=>new et.y(t=>i.subscribe({next:I=>r.run(()=>t.next(I)),error:I=>r.run(()=>t.error(I)),complete:()=>r.run(()=>t.complete())}))}(r));const k=new xt.x,V=new xt.x,Y=k.pipe(function Lr(...r){return i=>(0,jn.z)(i,(0,_t.of)(...r))}(!0));Ya.set(i,{transition$:k,complete:()=>{V.next(),V.complete()},context:d});const ue=function ga(r){const{transitionDelay:i,transitionDuration:t}=window.getComputedStyle(r);return 1e3*(parseFloat(i)+parseFloat(t))}(i);return r.runOutsideAngular(()=>{const Me=Se(i,"transitionend").pipe(Bn(Y),(0,kn.h)(({target:Je})=>Je===i));(function ht(...r){return 1===(r=dt(r)).length?(0,tt.Xf)(r[0]):new et.y(function Bt(r){return i=>{let t=[];for(let l=0;t&&!i.closed&&l<r.length;l++)t.push((0,tt.Xf)(r[l]).subscribe((0,vt.x)(i,d=>{if(t){for(let m=0;m<t.length;m++)m!==l&&t[m].unsubscribe();t=null}i.next(d)})))}}(r))})(ut(ue+oi).pipe(Bn(Y)),Me,V).pipe(Bn(Y)).subscribe(()=>{Ya.delete(i),r.run(()=>{I(),k.next(),k.complete()})})}),k.asObservable()},Hi=(r,i,t)=>{let{direction:l,maxSize:d,dimension:m}=t;const{classList:I}=r;function k(){I.add("collapse"),"show"===l?I.add("show"):I.remove("show")}if(i)return d||(d=function xl(r,i){if(typeof navigator>"u")return"0px";const{classList:t}=r,l=t.contains("show");l||t.add("show"),r.style[i]="";const d=r.getBoundingClientRect()[i]+"px";return l||t.remove("show"),d}(r,m),t.maxSize=d,r.style[m]="show"!==l?d:"0px",I.remove("collapse"),I.remove("collapsing"),I.remove("show"),hr(r),I.add("collapsing")),r.style[m]="show"===l?d:"0px",()=>{k(),I.remove("collapsing"),r.style[m]=""};k()};let ma=(()=>{class r{constructor(){this.animation=Ts.animation}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Hu=(()=>{class r{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(ma))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Jl=0,Eo=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),r})(),_a=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),r})(),lt=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),r})(),Za=(()=>{class r{constructor(){this.disabled=!1,this.id="ngb-panel-"+Jl++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new p.vpe,this.hidden=new p.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=p.lG2({type:r,selectors:[["ngb-panel"]],contentQueries:function(t,l,d){if(1&t&&(p.Suo(d,_a,4),p.Suo(d,Eo,4),p.Suo(d,lt,4)),2&t){let m;p.iGM(m=p.CRH())&&(l.titleTpls=m),p.iGM(m=p.CRH())&&(l.headerTpls=m),p.iGM(m=p.CRH())&&(l.contentTpls=m)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),r})(),xo=(()=>{class r{constructor(t){this._El=t,this.ngbRef=new p.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.SBq))},r.\u0275dir=p.lG2({type:r,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),r})(),La=(()=>{class r{constructor(t,l){this.accordion=t,this.panel=l}set ngbPanelToggle(t){t&&(this.panel=t)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36((0,p.Gpc)(()=>Ql)),p.Y36(Za,9))},r.\u0275dir=p.lG2({type:r,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,l){1&t&&p.NdJ("click",function(){return l.accordion.toggle(l.panel.id)}),2&t&&(p.Ikx("disabled",l.panel.disabled),p.uIk("aria-expanded",l.panel.isOpen)("aria-controls",l.panel.id),p.ekj("collapsed",!l.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),r})(),Ql=(()=>{class r{constructor(t,l,d){this._ngZone=l,this._changeDetector=d,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new p.vpe,this.shown=new p.vpe,this.hidden=new p.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const l=this._findPanelById(t);l&&this._changeOpenState(l,!l.isOpen)}ngAfterContentChecked(){fa(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Yn.q)(1)).subscribe(()=>{this.panels.forEach(t=>{const l=t.panelDiv;l?t.initClassDone||(t.initClassDone=!0,$r(this._ngZone,l,Hi,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,l){if(null!=t&&!t.disabled&&t.isOpen!==l){let d=!1;this.panelChange.emit({panelId:t.id,nextState:l,preventDefault:()=>{d=!0}}),d||(t.isOpen=l,t.transitionRunning=!0,l&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,l=!0){this.panels.forEach(d=>{d.id!==t&&d.isOpen&&(d.isOpen=!1,d.transitionRunning=l)})}_findPanelById(t){return this.panels.find(l=>l.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(l=>{l.transitionRunning&&$r(this._ngZone,l.panelDiv,Hi,{animation:t,runningTransition:"stop",context:{direction:l.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{l.transitionRunning=!1;const{id:m}=l;l.isOpen?(l.shown.emit(),this.shown.emit(m)):(l.hidden.emit(),this.hidden.emit(m))})})}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(Hu),p.Y36(p.R0b),p.Y36(p.sBO))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-accordion"]],contentQueries:function(t,l,d){if(1&t&&p.Suo(d,Za,4),2&t){let m;p.iGM(m=p.CRH())&&(l.panels=m)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,l){2&t&&p.uIk("aria-multiselectable",!l.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[p.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,l){1&t&&(p.YNc(0,Tl,3,3,"ng-template",0,1,p.W1O),p.YNc(2,No,4,11,"ng-template",2)),2&t&&(p.xp6(2),p.Q6J("ngForOf",l.panels))},dependencies:[Ae.ax,Ae.tP,La,xo,Eo,Ae.O5],encapsulation:2}),r})(),ai=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[Ql]}),r})();const yl=({classList:r})=>{r.remove("show")};let dh=(()=>{class r{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(ma))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),$u=(()=>{class r{constructor(t,l,d,m){this._renderer=l,this._element=d,this._zone=m,this.closed=new p.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=$r(this._zone,this._element.nativeElement,yl,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const l=t.type;l&&!l.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${l.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${l.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(dh),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(p.R0b))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,l){2&t&&p.ekj("fade",l.animation)("alert-dismissible",l.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[p.TTD,p.jDz],ngContentSelectors:Mi,decls:2,vars:1,consts:function(){let i;return i=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",i,3,"click",4,"ngIf"],["type","button","aria-label",i,1,"btn-close",3,"click"]]},template:function(t,l){1&t&&(p.F$t(),p.Hsn(0),p.YNc(1,Br,1,0,"button",0)),2&t&&(p.xp6(1),p.Q6J("ngIf",l.dismissible))},dependencies:[Ae.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),r})(),Ja=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[$u]}),r})();var Qa=(()=>{return(r=Qa||(Qa={})).START="start",r.END="end",Qa;var r})();const ao=({classList:r})=>r.contains("carousel-item-start")||r.contains("carousel-item-end"),Xl=r=>{r.remove("carousel-item-start"),r.remove("carousel-item-end")},ya=r=>{Xl(r),r.remove("carousel-item-prev"),r.remove("carousel-item-next")},Pl=(r,i,{direction:t})=>{const{classList:l}=r;return i?(ao(r)?Xl(l):(l.add("carousel-item-"+(t===Qa.START?"next":"prev")),hr(r),l.add("carousel-item-"+t)),()=>{ya(l),l.add("active")}):(Xl(l),ya(l),void l.add("active"))},zu=(r,i,{direction:t})=>{const{classList:l}=r;return i?(ao(r)?Xl(l):l.add("carousel-item-"+t),()=>{ya(l),l.remove("active")}):(Xl(l),ya(l),void l.remove("active"))};let vi=(()=>{class r{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(ma))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),gu=0,wo=(()=>{class r{constructor(t){this.tplRef=t,this.id="ngb-slide-"+gu++,this.slid=new p.vpe}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),r})(),kl=(()=>{class r{constructor(t,l,d,m,I){this._platformId=l,this._ngZone=d,this._cd=m,this._container=I,this.NgbSlideEventSource=bi,this._destroy$=new xt.x,this._interval$=new At.X(0),this._mouseHover$=new At.X(!1),this._focused$=new At.X(!1),this._pauseOnHover$=new At.X(!1),this._pauseOnFocus$=new At.X(!1),this._pause$=new At.X(!1),this._wrap$=new At.X(!1),this.slide=new p.vpe,this.slid=new p.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(bi.ARROW_LEFT)}arrowRight(){this.focus(),this.next(bi.ARROW_RIGHT)}ngAfterContentInit(){(0,Ae.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=(0,hn.a)([this.slide.pipe((0,tr.U)(l=>l.current),(0,un.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,un.O)(null))]).pipe((0,tr.U)(([l,d])=>{const m=this.slides.toArray(),I=this._getSlideIdxById(l);return d?m.length>1:I<m.length-1}),(0,On.x)());(0,hn.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,tr.U)(([l,d,m,I,k,V,Y])=>l||d&&m||I&&k||!Y?0:V),(0,On.x)(),(0,Pt.w)(l=>l>0?ut(l,l):nn),Bn(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(bi.TIMER)))}),this.slides.changes.pipe(Bn(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(r=>{Ya.get(r)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Yn.q)(1)).subscribe(()=>{for(const{id:t}of this.slides){const l=this._getSlideElement(t);t===this.activeId?l.classList.add("active"):l.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,l){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),l)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),Qa.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),Qa.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,l,d){const m=this._transitionIds;if(m&&(m[0]!==t||m[1]!==this.activeId))return;let I=this._getSlideById(t);if(I&&I.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:I.id,direction:l,paused:this._pause$.value,source:d});const k={animation:this.animation,runningTransition:"stop",context:{direction:l}},V=[],Y=this._getSlideById(this.activeId);if(Y){const Je=$r(this._ngZone,this._getSlideElement(Y.id),zu,k);Je.subscribe(()=>{Y.slid.emit({isShown:!1,direction:l,source:d})}),V.push(Je)}const ue=this.activeId;this.activeId=I.id;const Me=this._getSlideById(this.activeId),Ne=$r(this._ngZone,this._getSlideElement(I.id),Pl,k);Ne.subscribe(()=>{Me?.slid.emit({isShown:!0,direction:l,source:d})}),V.push(Ne),Un(...V).pipe((0,Yn.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:ue,current:I.id,direction:l,paused:this._pause$.value,source:d})})}this._cd.markForCheck()}_getSlideEventDirection(t,l){return this._getSlideIdxById(t)>this._getSlideIdxById(l)?Qa.END:Qa.START}_getSlideById(t){return this.slides.find(l=>l.id===t)||null}_getSlideIdxById(t){const l=this._getSlideById(t);return null!=l?this.slides.toArray().indexOf(l):-1}_getNextSlide(t){const l=this.slides.toArray(),d=this._getSlideIdxById(t);return d===l.length-1?this.wrap?l[0].id:l[l.length-1].id:l[d+1].id}_getPrevSlide(t){const l=this.slides.toArray(),d=this._getSlideIdxById(t);return 0===d?this.wrap?l[l.length-1].id:l[0].id:l[d-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(vi),p.Y36(p.Lbi),p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(p.SBq))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-carousel"]],contentQueries:function(t,l,d){if(1&t&&p.Suo(d,wo,4),2&t){let m;p.iGM(m=p.CRH())&&(l.slides=m)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,l){1&t&&p.NdJ("keydown.arrowLeft",function(){return l.keyboard&&l.arrowLeft()})("keydown.arrowRight",function(){return l.keyboard&&l.arrowRight()})("mouseenter",function(){return l.mouseHover=!0})("mouseleave",function(){return l.mouseHover=!1})("focusin",function(){return l.focused=!0})("focusout",function(){return l.focused=!1}),2&t&&(p.uIk("aria-activedescendant","slide-"+l.activeId),p.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[p.jDz],decls:6,vars:6,consts:function(){let i,t,l;return i=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,l=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],i,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],l]},template:function(t,l){1&t&&(p.TgZ(0,"div",0),p.YNc(1,yo,1,5,"button",1),p.qZA(),p.TgZ(2,"div",2),p.YNc(3,ul,4,4,"div",3),p.qZA(),p.YNc(4,Ho,4,0,"button",4),p.YNc(5,Is,4,0,"button",5)),2&t&&(p.ekj("visually-hidden",!l.showNavigationIndicators),p.xp6(1),p.Q6J("ngForOf",l.slides),p.xp6(2),p.Q6J("ngForOf",l.slides),p.xp6(1),p.Q6J("ngIf",l.showNavigationArrows),p.xp6(1),p.Q6J("ngIf",l.showNavigationArrows))},dependencies:[Ae.ax,Ae.tP,Ae.O5],encapsulation:2,changeDetection:0}),r})();var bi=(()=>{return(r=bi||(bi={})).TIMER="timer",r.ARROW_LEFT="arrowLeft",r.ARROW_RIGHT="arrowRight",r.INDICATOR="indicator",bi;var r})();let lo=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[kl]}),r})(),S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({}),r})();class D{constructor(i,t,l){this.year=Hr(i)?i:null,this.month=Hr(t)?t:null,this.day=Hr(l)?l:null}static from(i){return i instanceof D?i:i?new D(i.year,i.month,i.day):null}equals(i){return null!=i&&this.year===i.year&&this.month===i.month&&this.day===i.day}before(i){return!!i&&(this.year===i.year?this.month===i.month?this.day!==i.day&&this.day<i.day:this.month<i.month:this.year<i.year)}after(i){return!!i&&(this.year===i.year?this.month===i.month?this.day!==i.day&&this.day>i.day:this.month>i.month:this.year>i.year)}}function x(r,i){return!function J(r,i){return!r&&!i||!!r&&!!i&&r.equals(i)}(r,i)}function $(r,i){return!(!r&&!i||r&&i&&r.year===i.year&&r.month===i.month)}function Ue(r,i,t){return r&&i&&r.before(i)?i:r&&t&&r.after(t)?t:r||null}function St(r,i){const{minDate:t,maxDate:l,disabled:d,markDisabled:m}=i;return!(null==r||d||m&&m(r,{year:r.year,month:r.month})||t&&r.before(t)||l&&r.after(l))}function to(r){return new D(r.getFullYear(),r.getMonth()+1,r.getDate())}function va(r){const i=new Date(r.year,r.month-1,r.day,12);return isNaN(i.getTime())||i.setFullYear(r.year),i}let Do=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:function(){return function Xa(){return new U}()},providedIn:"root"}),r})(),U=(()=>{class r extends Do{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,l="d",d=1){let m=va(t),I=!0,k=m.getMonth();switch(l){case"y":m.setFullYear(m.getFullYear()+d);break;case"m":k+=d,m.setMonth(k),k%=12,k<0&&(k+=12);break;case"d":m.setDate(m.getDate()+d),I=!1;break;default:return t}return I&&m.getMonth()!==k&&m.setDate(0),to(m)}getPrev(t,l="d",d=1){return this.getNext(t,l,-d)}getWeekday(t){let d=va(t).getDay();return 0===d?7:d}getWeekNumber(t,l){7===l&&(l=0);const I=va(t[(11-l)%7]);I.setDate(I.getDate()+4-(I.getDay()||7));const k=I.getTime();return I.setMonth(0),I.setDate(1),Math.floor(Math.round((k-I.getTime())/864e5)/7)+1}getToday(){return to(new Date)}isValid(t){if(!(t&&Hr(t.year)&&Hr(t.month)&&Hr(t.day)&&0!==t.year))return!1;const l=va(t);return!isNaN(l.getTime())&&l.getFullYear()===t.year&&l.getMonth()+1===t.month&&l.getDate()===t.day}}return r.\u0275fac=function(){let i;return function(l){return(i||(i=p.n5z(r)))(l||r)}}(),r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac}),r})(),ee=(()=>{class r{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:function(t){let l=null;return l=t?new t:function z(r){return new Ee(r)}(p.LFG(p.soG)),l},providedIn:"root"}),r})(),Ee=(()=>{class r extends ee{constructor(t){super(),this._locale=t,this._monthsShort=(0,Ae.UT)(t,Ae.x.Standalone,Ae.Tn.Abbreviated),this._monthsFull=(0,Ae.UT)(t,Ae.x.Standalone,Ae.Tn.Wide)}getWeekdayLabel(t,l){const d=(0,Ae.Mn)(this._locale,Ae.x.Standalone,void 0===l?Ae.Tn.Short:l);return d.map((I,k)=>d[(k+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){const l=new Date(t.year,t.month-1,t.day);return(0,Ae.p6)(l,"fullDate",this._locale)}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(p.soG))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac}),r})(),je=(()=>{class r{constructor(t,l){this._calendar=t,this._i18n=l,this._VALIDATORS={dayTemplateData:d=>{if(this._state.dayTemplateData!==d)return{dayTemplateData:d}},displayMonths:d=>{if(Hr(d=os(d))&&d>0&&this._state.displayMonths!==d)return{displayMonths:d}},disabled:d=>{if(this._state.disabled!==d)return{disabled:d}},firstDayOfWeek:d=>{if(Hr(d=os(d))&&d>=0&&this._state.firstDayOfWeek!==d)return{firstDayOfWeek:d}},focusVisible:d=>{if(this._state.focusVisible!==d&&!this._state.disabled)return{focusVisible:d}},markDisabled:d=>{if(this._state.markDisabled!==d)return{markDisabled:d}},maxDate:d=>{const m=this.toValidDate(d,null);if(x(this._state.maxDate,m))return{maxDate:m}},minDate:d=>{const m=this.toValidDate(d,null);if(x(this._state.minDate,m))return{minDate:m}},navigation:d=>{if(this._state.navigation!==d)return{navigation:d}},outsideDays:d=>{if(this._state.outsideDays!==d)return{outsideDays:d}},weekdays:d=>{const m=!0===d||!1===d?Ae.Tn.Short:d,I=!0!==d&&!1!==d||d;if(this._state.weekdayWidth!==m||this._state.weekdaysVisible!==I)return{weekdayWidth:m,weekdaysVisible:I}}},this._model$=new xt.x,this._dateSelect$=new xt.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Ae.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,kn.h)(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,kn.h)(t=>null!==t))}set(t){let l=Object.keys(t).map(d=>this._VALIDATORS[d](t[d])).reduce((d,m)=>({...d,...m}),{});Object.keys(l).length>0&&this._nextState(l)}focus(t){const l=this.toValidDate(t,null);null!=l&&!this._state.disabled&&x(this._state.focusDate,l)&&this._nextState({focusDate:t})}focusSelect(){St(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const l=this.toValidDate(t,this._calendar.getToday());null!=l&&!this._state.disabled&&(!this._state.firstDate||$(this._state.firstDate,l))&&this._nextState({firstDate:l})}select(t,l={}){const d=this.toValidDate(t,null);null!=d&&!this._state.disabled&&(x(this._state.selectedDate,d)&&this._nextState({selectedDate:d}),l.emitEvent&&St(d,this._state)&&this._dateSelect$.next(d))}toValidDate(t,l){const d=D.from(t);return void 0===l&&(l=this._calendar.getToday()),this._calendar.isValid(d)?d:l}getMonth(t){for(let l of this._state.months)if(t.month===l.number&&t.year===l.year)return l;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const l=this._updateState(t);this._patchContexts(l),this._state=l,this._model$.next(this._state)}_patchContexts(t){const{months:l,displayMonths:d,selectedDate:m,focusDate:I,focusVisible:k,disabled:V,outsideDays:Y}=t;t.months.forEach(ue=>{ue.weeks.forEach(Me=>{Me.days.forEach(Ne=>{I&&(Ne.context.focused=I.equals(Ne.date)&&k),Ne.tabindex=!V&&I&&Ne.date.equals(I)&&I.month===ue.number?0:-1,!0===V&&(Ne.context.disabled=!0),void 0!==m&&(Ne.context.selected=null!==m&&m.equals(Ne.date)),ue.number!==Ne.date.month&&(Ne.hidden="hidden"===Y||"collapsed"===Y||d>1&&Ne.date.after(l[0].firstDate)&&Ne.date.before(l[d-1].lastDate))})})})}_updateState(t){const l=Object.assign({},this._state,t);let d=l.firstDate;if(("minDate"in t||"maxDate"in t)&&(function se(r,i){if(i&&r&&i.before(r))throw new Error(`'maxDate' ${i} should be greater than 'minDate' ${r}`)}(l.minDate,l.maxDate),l.focusDate=Ue(l.focusDate,l.minDate,l.maxDate),l.firstDate=Ue(l.firstDate,l.minDate,l.maxDate),d=l.focusDate),"disabled"in t&&(l.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(d=l.selectedDate),"focusVisible"in t||"focusDate"in t&&(l.focusDate=Ue(l.focusDate,l.minDate,l.maxDate),d=l.focusDate,0!==l.months.length&&l.focusDate&&!l.focusDate.before(l.firstDate)&&!l.focusDate.after(l.lastDate)))return l;if("firstDate"in t&&(l.firstDate=Ue(l.firstDate,l.minDate,l.maxDate),d=l.firstDate),d){const I=function Vi(r,i,t,l,d){const{displayMonths:m,months:I}=t,k=I.splice(0,I.length);return Array.from({length:m},(Y,ue)=>{const Me=Object.assign(r.getNext(i,"m",ue),{day:1});if(I[ue]=null,!d){const Ne=k.findIndex(Je=>Je.firstDate.equals(Me));-1!==Ne&&(I[ue]=k.splice(Ne,1)[0])}return Me}).forEach((Y,ue)=>{null===I[ue]&&(I[ue]=function uo(r,i,t,l,d={}){const{dayTemplateData:m,minDate:I,maxDate:k,firstDayOfWeek:V,markDisabled:Y,outsideDays:ue,weekdayWidth:Me,weekdaysVisible:Ne}=t,Je=r.getToday();d.firstDate=null,d.lastDate=null,d.number=i.month,d.year=i.year,d.weeks=d.weeks||[],d.weekdays=d.weekdays||[],i=function co(r,i,t){const l=r.getDaysPerWeek(),d=new D(i.year,i.month,1),m=r.getWeekday(d)%l;return r.getPrev(d,"d",(l+m-t)%l)}(r,i,V),Ne||(d.weekdays.length=0);for(let kt=0;kt<r.getWeeksPerMonth();kt++){let Yt=d.weeks[kt];Yt||(Yt=d.weeks[kt]={number:0,days:[],collapsed:!0});const pn=Yt.days;for(let Kn=0;Kn<r.getDaysPerWeek();Kn++){0===kt&&Ne&&(d.weekdays[Kn]=l.getWeekdayLabel(r.getWeekday(i),Me));const qn=new D(i.year,i.month,i.day),ur=r.getNext(qn),Jn=l.getDayAriaLabel(qn);let Fr=!!(I&&qn.before(I)||k&&qn.after(k));!Fr&&Y&&(Fr=Y(qn,{month:d.number,year:d.year}));let zr=qn.equals(Je),Yi=m?m(qn,{month:d.number,year:d.year}):void 0;null===d.firstDate&&qn.month===d.number&&(d.firstDate=qn),qn.month===d.number&&ur.month!==d.number&&(d.lastDate=qn);let Oi=pn[Kn];Oi||(Oi=pn[Kn]={}),Oi.date=qn,Oi.context=Object.assign(Oi.context||{},{$implicit:qn,date:qn,data:Yi,currentMonth:d.number,currentYear:d.year,disabled:Fr,focused:!1,selected:!1,today:zr}),Oi.tabindex=-1,Oi.ariaLabel=Jn,Oi.hidden=!1,i=ur}Yt.number=r.getWeekNumber(pn.map(Kn=>Kn.date),V),Yt.collapsed="collapsed"===ue&&pn[0].date.month!==d.number&&pn[pn.length-1].date.month!==d.number}return d}(r,Y,t,l,k.shift()||{}))}),I}(this._calendar,d,l,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);l.months=I,l.firstDate=I[0].firstDate,l.lastDate=I[I.length-1].lastDate,"selectedDate"in t&&!St(l.selectedDate,l)&&(l.selectedDate=null),"firstDate"in t&&(!l.focusDate||l.focusDate.before(l.firstDate)||l.focusDate.after(l.lastDate))&&(l.focusDate=d);const k=!this._state.firstDate||this._state.firstDate.year!==l.firstDate.year,V=!this._state.firstDate||this._state.firstDate.month!==l.firstDate.month;"select"===l.navigation?(("minDate"in t||"maxDate"in t||0===l.selectBoxes.years.length||k)&&(l.selectBoxes.years=function an(r,i,t){if(!r)return[];const l=i?Math.max(i.year,r.year-500):r.year-10,m=(t?Math.min(t.year,r.year+500):r.year+10)-l+1,I=Array(m);for(let k=0;k<m;k++)I[k]=l+k;return I}(l.firstDate,l.minDate,l.maxDate)),("minDate"in t||"maxDate"in t||0===l.selectBoxes.months.length||k)&&(l.selectBoxes.months=function cn(r,i,t,l){if(!i)return[];let d=r.getMonths(i.year);if(t&&i.year===t.year){const m=d.findIndex(I=>I===t.month);d=d.slice(m)}if(l&&i.year===l.year){const m=d.findIndex(I=>I===l.month);d=d.slice(0,m+1)}return d}(this._calendar,l.firstDate,l.minDate,l.maxDate))):l.selectBoxes={years:[],months:[]},("arrows"===l.navigation||"select"===l.navigation)&&(V||k||"minDate"in t||"maxDate"in t||"disabled"in t)&&(l.prevDisabled=l.disabled||function Ei(r,i,t){const l=Object.assign(r.getPrev(i,"m"),{day:1});return null!=t&&(l.year===t.year&&l.month<t.month||l.year<t.year&&1===t.month)}(this._calendar,l.firstDate,l.minDate),l.nextDisabled=l.disabled||function sr(r,i,t){const l=Object.assign(r.getNext(i,"m"),{day:1});return null!=t&&l.after(t)}(this._calendar,l.lastDate,l.maxDate))}return l}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(Do),p.LFG(ee))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac}),r})();var Xe=(()=>{return(r=Xe||(Xe={}))[r.PREV=0]="PREV",r[r.NEXT=1]="NEXT",Xe;var r})();let Vt=(()=>{class r{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(ee))},r.\u0275cmp=p.Xpm({type:r,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,l){2&t&&p.ekj("bg-primary",l.selected)("text-white",l.selected)("text-muted",l.isMuted())("outside",l.isMuted())("active",l.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[p.jDz],attrs:mi,decls:1,vars:1,template:function(t,l){1&t&&p._uU(0),2&t&&p.Oqu(l.i18n.getDayNumerals(l.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),r})(),Dn=(()=>{class r{constructor(t,l){this.i18n=t,this._renderer=l,this.select=new p.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new D(this.date.year,os(t),1))}changeYear(t){this.select.emit(new D(os(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(ee),p.Y36(p.Qsj))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,l){if(1&t&&(p.Gf(Aa,7,p.SBq),p.Gf(Wa,7,p.SBq)),2&t){let d;p.iGM(d=p.CRH())&&(l.monthSelect=d.first),p.iGM(d=p.CRH())&&(l.yearSelect=d.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[p.jDz],decls:6,vars:4,consts:function(){let i,t,l,d;return i=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,l=$localize`:@@ngb.datepicker.select-year:Select year`,d=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",i,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",l,"title",d,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,l){1&t&&(p.TgZ(0,"select",0,1),p.NdJ("change",function(m){return l.changeMonth(m.target.value)}),p.YNc(2,vo,2,3,"option",2),p.qZA(),p.TgZ(3,"select",3,4),p.NdJ("change",function(m){return l.changeYear(m.target.value)}),p.YNc(5,Ji,2,2,"option",2),p.qZA()),2&t&&(p.Q6J("disabled",l.disabled),p.xp6(2),p.Q6J("ngForOf",l.months),p.xp6(1),p.Q6J("disabled",l.disabled),p.xp6(2),p.Q6J("ngForOf",l.years))},dependencies:[Ae.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),r})(),Pn=(()=>{class r{constructor(t){this.i18n=t,this.navigation=Xe,this.months=[],this.navigate=new p.vpe,this.select=new p.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(ee))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[p.jDz],decls:8,vars:4,consts:function(){let i,t,l,d;return i=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,l=$localize`:@@ngb.datepicker.next-month:Next month`,d=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",i,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",l,"title",d,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,l){1&t&&(p.TgZ(0,"div",0)(1,"button",1),p.NdJ("click",function(m){return l.onClickPrev(m)}),p._UZ(2,"span",2),p.qZA()(),p.YNc(3,aa,1,4,"ngb-datepicker-navigation-select",3),p.YNc(4,$o,1,1,null,4),p.TgZ(5,"div",5)(6,"button",6),p.NdJ("click",function(m){return l.onClickNext(m)}),p._UZ(7,"span",2),p.qZA()()),2&t&&(p.xp6(1),p.Q6J("disabled",l.prevDisabled),p.xp6(2),p.Q6J("ngIf",l.showSelect),p.xp6(1),p.Q6J("ngIf",!l.showSelect),p.xp6(2),p.Q6J("disabled",l.nextDisabled))},dependencies:[Ae.O5,Ae.ax,Dn],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),r})();var en=(()=>{return(r=en||(en={}))[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.ArrowLeft=37]="ArrowLeft",r[r.ArrowUp=38]="ArrowUp",r[r.ArrowRight=39]="ArrowRight",r[r.ArrowDown=40]="ArrowDown",en;var r})();let ar=(()=>{class r{processKey(t,l){const{state:d,calendar:m}=l;switch(t.which){case en.PageUp:l.focusDate(m.getPrev(d.focusedDate,t.shiftKey?"y":"m",1));break;case en.PageDown:l.focusDate(m.getNext(d.focusedDate,t.shiftKey?"y":"m",1));break;case en.End:l.focusDate(t.shiftKey?d.maxDate:d.lastDate);break;case en.Home:l.focusDate(t.shiftKey?d.minDate:d.firstDate);break;case en.ArrowLeft:l.focusDate(m.getPrev(d.focusedDate,"d",1));break;case en.ArrowUp:l.focusDate(m.getPrev(d.focusedDate,"d",m.getDaysPerWeek()));break;case en.ArrowRight:l.focusDate(m.getNext(d.focusedDate,"d",1));break;case en.ArrowDown:l.focusDate(m.getNext(d.focusedDate,"d",m.getDaysPerWeek()));break;case en.Enter:case en.Space:l.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Mn=(()=>{class r{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Ae.Tn.Short}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),fs=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:function(){return function Yo(){return new eu}()},providedIn:"root"}),r})(),eu=(()=>{class r extends fs{fromModel(t){return t&&Hr(t.year)&&Hr(t.month)&&Hr(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&Hr(t.year)&&Hr(t.month)&&Hr(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return r.\u0275fac=function(){let i;return function(l){return(i||(i=p.n5z(r)))(l||r)}}(),r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac}),r})(),_r=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),r})(),Vr=(()=>{class r{constructor(t,l,d,m){this.i18n=t,this.datepicker=l,this._keyboardService=d,this._service=m}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(ee),p.Y36((0,p.Gpc)(()=>ps)),p.Y36(ar),p.Y36(je))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,l){1&t&&p.NdJ("keydown",function(m){return l.onKeyDown(m)})},inputs:{month:"month"},standalone:!0,features:[p.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&(p.YNc(0,Kl,3,2,"div",0),p.YNc(1,oe,1,1,"ng-template",1)),2&t&&(p.Q6J("ngIf",l.viewModel.weekdays.length>0),p.xp6(1),p.Q6J("ngForOf",l.viewModel.weeks))},dependencies:[Ae.O5,Ae.ax,Ae.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),r})(),ps=(()=>{class r{constructor(t,l,d,m,I,k,V,Y){this._service=t,this._calendar=l,this.i18n=d,this._elementRef=k,this._ngbDateAdapter=V,this._ngZone=Y,this._controlValue=null,this._destroyed$=new xt.x,this._publicState={},this.navigate=new p.vpe,this.dateSelect=new p.vpe,this.onChange=ue=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(ue=>this[ue]=m[ue]),t.dateSelect$.pipe(Bn(this._destroyed$)).subscribe(ue=>{this.dateSelect.emit(ue)}),t.model$.pipe(Bn(this._destroyed$)).subscribe(ue=>{const Me=ue.firstDate,Ne=this.model?this.model.firstDate:null;this._publicState={maxDate:ue.maxDate,minDate:ue.minDate,firstDate:ue.firstDate,lastDate:ue.lastDate,focusedDate:ue.focusDate,months:ue.months.map(Kn=>Kn.firstDate)};let Je=!1;if(!Me.equals(Ne)&&(this.navigate.emit({current:Ne?{year:Ne.year,month:Ne.month}:null,next:{year:Me.year,month:Me.month},preventDefault:()=>Je=!0}),Je&&null!==Ne))return void this._service.open(Ne);const kt=ue.selectedDate,Yt=ue.focusDate,pn=this.model?this.model.focusDate:null;this.model=ue,x(kt,this._controlValue)&&(this._controlValue=kt,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(kt))),x(Yt,pn)&&pn&&ue.focusVisible&&this.focus(),I.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(D.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Yn.q)(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(D.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=Se(this._contentEl.nativeElement,"focusin"),l=Se(this._contentEl.nativeElement,"focusout"),{nativeElement:d}=this._elementRef;(0,Hn.T)(t,l).pipe((0,kn.h)(({target:m,relatedTarget:I})=>!(mr(m,"ngb-dp-day")&&mr(I,"ngb-dp-day")&&d.contains(m)&&d.contains(I))),Bn(this._destroyed$)).subscribe(({type:m})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===m})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(l=>t[l]=this[l]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const l={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(d=>d in t).forEach(d=>l[d]=this[d]),this._service.set(l),"startDate"in t){const{currentValue:d,previousValue:m}=t.startDate;$(m,d)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case Xe.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Xe.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=D.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(je),p.Y36(Do),p.Y36(ee),p.Y36(Mn),p.Y36(p.sBO),p.Y36(p.SBq),p.Y36(fs),p.Y36(p.R0b))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-datepicker"]],contentQueries:function(t,l,d){if(1&t&&p.Suo(d,_r,7),2&t){let m;p.iGM(m=p.CRH())&&(l.contentTemplate=m.first)}},viewQuery:function(t,l){if(1&t&&(p.Gf(ct,7),p.Gf(ln,7)),2&t){let d;p.iGM(d=p.CRH())&&(l._defaultDayTemplate=d.first),p.iGM(d=p.CRH())&&(l._contentEl=d.first)}},hostVars:2,hostBindings:function(t,l){2&t&&p.ekj("disabled",l.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[p._Bn([{provide:Wn.JU,useExisting:(0,p.Gpc)(()=>r),multi:!0},je]),p.TTD,p.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,l){if(1&t&&(p.YNc(0,jr,1,5,"ng-template",null,0,p.W1O),p.YNc(2,so,1,1,"ng-template",null,1,p.W1O),p.TgZ(4,"div",2),p.YNc(5,oo,1,7,"ngb-datepicker-navigation",3),p.qZA(),p.TgZ(6,"div",4,5),p.YNc(8,Vs,0,0,"ng-template",6),p.qZA(),p.YNc(9,Na,0,0,"ng-template",6)),2&t){const d=p.MAs(3);p.xp6(5),p.Q6J("ngIf","none"!==l.navigation),p.xp6(1),p.ekj("ngb-dp-months",!l.contentTemplate),p.xp6(2),p.Q6J("ngTemplateOutlet",(null==l.contentTemplate?null:l.contentTemplate.templateRef)||d),p.xp6(1),p.Q6J("ngTemplateOutlet",l.footerTemplate)}},dependencies:[Ae.O5,Ae.ax,Ae.tP,Vt,Vr,Pn],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),r})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const fh=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Bp(r){const i=Array.from(r.querySelectorAll(fh)).filter(t=>-1!==t.tabIndex);return[i[0],i[i.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Hp=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[ps,Vr]}),r})(),Cf=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({}),r})();class bl{constructor(i,t,l){this.nodes=i,this.viewRef=t,this.componentRef=l}}let v0=(()=>{class r{constructor(t,l){this._el=t,this._zone=l}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Yn.q)(1)).subscribe(()=>{$r(this._zone,this._el.nativeElement,(t,l)=>{l&&hr(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return $r(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.SBq),p.Y36(p.R0b))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,l){2&t&&(p.Tol("modal-backdrop"+(l.backdropClass?" "+l.backdropClass:"")),p.ekj("show",!l.animation)("fade",l.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[p.jDz],decls:0,vars:0,template:function(t,l){},encapsulation:2}),r})();class yr{close(i){}dismiss(i){}}class b0{constructor(i,t,l,d){this._windowCmptRef=i,this._contentRef=t,this._backdropCmptRef=l,this._beforeDismiss=d,this._closed=new xt.x,this._dismissed=new xt.x,this._hidden=new xt.x,i.instance.dismissEvent.subscribe(m=>{this.dismiss(m)}),this.result=new Promise((m,I)=>{this._resolve=m,this._reject=I}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Bn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Bn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function dr(r){return r&&r.then}(t)?!1!==t&&this._dismiss(i):t.then(l=>{!1!==l&&this._dismiss(i)},()=>{})}else this._dismiss(i)}_removeModalElements(){const i=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,_t.of)(void 0);i.subscribe(()=>{const{nativeElement:l}=this._windowCmptRef.location;l.parentNode.removeChild(l),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:l}=this._backdropCmptRef.location;l.parentNode.removeChild(l),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Un(i,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Sc=(()=>{return(r=Sc||(Sc={}))[r.BACKDROP_CLICK=0]="BACKDROP_CLICK",r[r.ESC=1]="ESC",Sc;var r})();let Tf=(()=>{class r{constructor(t,l,d){this._document=t,this._elRef=l,this._zone=d,this._closed$=new xt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new p.vpe,this.shown=new xt.x,this.hidden=new xt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":fa(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Yn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,l={animation:this.animation,runningTransition:"stop"},I=Un($r(this._zone,t,()=>t.classList.remove("show"),l),$r(this._zone,this._dialogEl.nativeElement,()=>{},l));return I.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),I}_show(){const t={animation:this.animation,runningTransition:"continue"};Un($r(this._zone,this._elRef.nativeElement,(m,I)=>{I&&hr(m),m.classList.add("show")},t),$r(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Se(t,"keydown").pipe(Bn(this._closed$),(0,kn.h)(d=>d.which===en.Escape)).subscribe(d=>{this.keyboard?requestAnimationFrame(()=>{d.defaultPrevented||this._zone.run(()=>this.dismiss(Sc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let l=!1;Se(this._dialogEl.nativeElement,"mousedown").pipe(Bn(this._closed$),(0,vr.b)(()=>l=!1),(0,Pt.w)(()=>Se(t,"mouseup").pipe(Bn(this._closed$),(0,Yn.q)(1))),(0,kn.h)(({target:d})=>t===d)).subscribe(()=>{l=!0}),Se(t,"click").pipe(Bn(this._closed$)).subscribe(({target:d})=>{t===d&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!l&&this._zone.run(()=>this.dismiss(Sc.BACKDROP_CLICK))),l=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const l=t.querySelector("[ngbAutofocus]"),d=Bp(t)[0];(l||d||t).focus()}}_restoreFocus(){const t=this._document.body,l=this._elWithFocus;let d;d=l&&l.focus&&t.contains(l)?l:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>d.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&$r(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(Ae.K0),p.Y36(p.SBq),p.Y36(p.R0b))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-modal-window"]],viewQuery:function(t,l){if(1&t&&p.Gf(Al,7),2&t){let d;p.iGM(d=p.CRH())&&(l._dialogEl=d.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,l){2&t&&(p.uIk("aria-modal",!0)("aria-labelledby",l.ariaLabelledBy)("aria-describedby",l.ariaDescribedBy),p.Tol("modal d-block"+(l.windowClass?" "+l.windowClass:"")),p.ekj("fade",l.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[p.jDz],ngContentSelectors:Mi,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,l){1&t&&(p.F$t(),p.TgZ(0,"div",0,1)(2,"div",2),p.Hsn(3),p.qZA()()),2&t&&p.Tol("modal-dialog"+(l.size?" modal-"+l.size:"")+(l.centered?" modal-dialog-centered":"")+l.fullscreenClass+(l.scrollable?" modal-dialog-scrollable":"")+(l.modalDialogClass?" "+l.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),r})(),Ch=(()=>{class r{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),l=this._document.body,d=l.style,{overflow:m,paddingRight:I}=d;if(t>0){const k=parseFloat(window.getComputedStyle(l).paddingRight);d.paddingRight=`${k+t}px`}return d.overflow="hidden",()=>{t>0&&(d.paddingRight=I),d.overflow=m}}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(Ae.K0))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Sf=(()=>{class r{constructor(t,l,d,m,I,k,V){this._applicationRef=t,this._injector=l,this._environmentInjector=d,this._document=m,this._scrollBar=I,this._rendererFactory=k,this._ngZone=V,this._activeWindowCmptHasChanged=new xt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new p.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const Y=this._windowCmpts[this._windowCmpts.length-1];((r,i,t,l=!1)=>{r.runOutsideAngular(()=>{const d=Se(i,"focusin").pipe(Bn(t),(0,tr.U)(m=>m.target));Se(i,"keydown").pipe(Bn(t),(0,kn.h)(m=>m.which===en.Tab),kr(d)).subscribe(([m,I])=>{const[k,V]=Bp(i);(I===k||I===i)&&m.shiftKey&&(V.focus(),m.preventDefault()),I===V&&!m.shiftKey&&(k.focus(),m.preventDefault())}),l&&Se(i,"click").pipe(Bn(t),kr(d),(0,tr.U)(m=>m[1])).subscribe(m=>m.focus())})})(this._ngZone,Y.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(Y.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,l,d){const m=d.container instanceof HTMLElement?d.container:pa(d.container)?this._document.querySelector(d.container):this._document.body,I=this._rendererFactory.createRenderer(null,null);if(!m)throw new Error(`The specified modal container "${d.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const k=new yr,V=(t=d.injector||t).get(p.lqb,null)||this._environmentInjector,Y=this._getContentRef(t,V,l,k,d);let ue=!1!==d.backdrop?this._attachBackdrop(m):void 0,Me=this._attachWindowComponent(m,Y.nodes),Ne=new b0(Me,Y,ue,d.beforeDismiss);return this._registerModalRef(Ne),this._registerWindowCmpt(Me),Ne.hidden.pipe((0,Yn.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(I.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),k.close=Je=>{Ne.close(Je)},k.dismiss=Je=>{Ne.dismiss(Je)},this._applyWindowOptions(Me.instance,d),1===this._modalRefs.length&&I.addClass(this._document.body,"modal-open"),ue&&ue.instance&&(this._applyBackdropOptions(ue.instance,d),ue.changeDetectorRef.detectChanges()),Me.changeDetectorRef.detectChanges(),Ne}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(l=>l.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let l=(0,p.LMc)(v0,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(l.hostView),t.appendChild(l.location.nativeElement),l}_attachWindowComponent(t,l){let d=(0,p.LMc)(Tf,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:l});return this._applicationRef.attachView(d.hostView),t.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,l){this._windowAttributes.forEach(d=>{pa(l[d])&&(t[d]=l[d])})}_applyBackdropOptions(t,l){this._backdropAttributes.forEach(d=>{pa(l[d])&&(t[d]=l[d])})}_getContentRef(t,l,d,m,I){return d?d instanceof p.Rgc?this._createFromTemplateRef(d,m):fa(d)?this._createFromString(d):this._createFromComponent(t,l,d,m,I):new bl([])}_createFromTemplateRef(t,l){const m=t.createEmbeddedView({$implicit:l,close(I){l.close(I)},dismiss(I){l.dismiss(I)}});return this._applicationRef.attachView(m),new bl([m.rootNodes],m)}_createFromString(t){const l=this._document.createTextNode(`${t}`);return new bl([[l]])}_createFromComponent(t,l,d,m,I){const k=p.zs3.create({providers:[{provide:yr,useValue:m}],parent:t}),V=(0,p.LMc)(d,{environmentInjector:l,elementInjector:k}),Y=V.location.nativeElement;return I.scrollable&&Y.classList.add("component-host-scrollable"),this._applicationRef.attachView(V.hostView),new bl([[Y]],V.hostView,V)}_setAriaHidden(t){const l=t.parentElement;l&&t!==this._document.body&&(Array.from(l.children).forEach(d=>{d!==t&&"SCRIPT"!==d.nodeName&&(this._ariaHiddenValues.set(d,d.getAttribute("aria-hidden")),d.setAttribute("aria-hidden","true"))}),this._setAriaHidden(l))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,l)=>{t?l.setAttribute("aria-hidden",t):l.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const l=()=>{const d=this._modalRefs.indexOf(t);d>-1&&(this._modalRefs.splice(d,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(l,l)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const l=this._windowCmpts.indexOf(t);l>-1&&(this._windowCmpts.splice(l,1),this._activeWindowCmptHasChanged.next())})}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(p.z2F),p.LFG(p.zs3),p.LFG(p.lqb),p.LFG(Ae.K0),p.LFG(Ch),p.LFG(p.FYo),p.LFG(p.R0b))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Af=(()=>{class r{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(ma))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Wp=(()=>{class r{constructor(t,l,d){this._injector=t,this._modalStack=l,this._config=d}open(t,l={}){const d={...this._config,animation:this._config.animation,...l};return this._modalStack.open(this._injector,t,d)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(p.zs3),p.LFG(Sf),p.LFG(Af))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ac=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({providers:[Wp]}),r})();const Ju=({classList:r})=>(r.remove("show"),()=>r.remove("active")),Kp=(r,i)=>{i&&hr(r),r.classList.add("show")};let qp=(()=>{class r{constructor(t){this.elRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.SBq))},r.\u0275dir=p.lG2({type:r,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,l){2&t&&(p.Ikx("id",l.item.panelDomId),p.uIk("role",l.role?l.role:l.nav.roles?"tabpanel":void 0)("aria-labelledby",l.item.domId),p.ekj("fade",l.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),r})(),Ns=(()=>{class r{constructor(t,l){this._cd=t,this._ngZone=l,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Bn(this.nav.destroy$),(0,un.O)(this._activePane?.item||null),(0,On.x)(),function Zt(r){return(0,kn.h)((i,t)=>r<=t)}(1)).subscribe(t=>{const l={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?$r(this._ngZone,this._activePane.elRef.nativeElement,Ju,l).subscribe(()=>{const d=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),$r(this._ngZone,this._activePane.elRef.nativeElement,Kp,l).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),d&&(d.hidden.emit(),this.nav.hidden.emit(d.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(l=>l.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.sBO),p.Y36(p.R0b))},r.\u0275cmp=p.Xpm({type:r,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,l){if(1&t&&p.Gf(qp,5),2&t){let d;p.iGM(d=p.CRH())&&(l._panes=d)}},hostVars:2,hostBindings:function(t,l){2&t&&p.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[p.jDz],attrs:_i,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&p.YNc(0,Cs,1,1,"ng-template",0),2&t&&p.Q6J("ngForOf",l.nav.items)},dependencies:[qp,Ae.ax,Ae.O5,Ae.tP],encapsulation:2,changeDetection:0}),r})(),Yp=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[Ns]}),r})(),Nf=(()=>{class r{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),su=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),r})(),Zp=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),r})(),Nm=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),r})(),Th=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),r})(),yu=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),r})(),vd=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),r})(),Mm=(()=>{class r{constructor(t){this.templateRef=t}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(p.Rgc))},r.\u0275dir=p.lG2({type:r,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),r})(),D0=(()=>{class r{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new p.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,l){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),l<this.pageCount&&(l<this.pageCount-2?this.pages.push(-1):l===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,l=this.pageCount,d=Math.floor(this.maxSize/2);return this.page<=d?l=this.maxSize:this.pageCount-this.page<d?t=this.pageCount-this.maxSize:(t=this.page-d-1,l=this.page+(this.maxSize%2==0?d-1:d)),[t,l]}_applyPagination(){let l=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[l,l+this.maxSize]}_setPageInRange(t){const l=this.page;this.page=eo(t,this.pageCount,1),this.page!==l&&mn(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),mn(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let l=1;l<=this.pageCount;l++)this.pages.push(l);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let l=0,d=this.pageCount;[l,d]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(l,d),this._applyEllipses(l,d)}}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(Nf))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-pagination"]],contentQueries:function(t,l,d){if(1&t&&(p.Suo(d,su,5),p.Suo(d,Zp,5),p.Suo(d,Nm,5),p.Suo(d,Th,5),p.Suo(d,yu,5),p.Suo(d,vd,5),p.Suo(d,Mm,5)),2&t){let m;p.iGM(m=p.CRH())&&(l.tplEllipsis=m.first),p.iGM(m=p.CRH())&&(l.tplFirst=m.first),p.iGM(m=p.CRH())&&(l.tplLast=m.first),p.iGM(m=p.CRH())&&(l.tplNext=m.first),p.iGM(m=p.CRH())&&(l.tplNumber=m.first),p.iGM(m=p.CRH())&&(l.tplPrevious=m.first),p.iGM(m=p.CRH())&&(l.tplPages=m.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[p.TTD,p.jDz],decls:20,vars:12,consts:function(){let i,t,l,d,m,I,k,V;return i=$localize`:@@ngb.pagination.first:`,t=$localize`:@@ngb.pagination.previous:`,l=$localize`:@@ngb.pagination.next:`,d=$localize`:@@ngb.pagination.last:`,m=$localize`:@@ngb.pagination.first-aria:First`,I=$localize`:@@ngb.pagination.previous-aria:Previous`,k=$localize`:@@ngb.pagination.next-aria:Next`,V=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],i,t,l,d,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",m,"href","",1,"page-link",3,"click"],["aria-label",I,"href","",1,"page-link",3,"click"],["aria-label",k,"href","",1,"page-link",3,"click"],["aria-label",V,"href","",1,"page-link",3,"click"]]},template:function(t,l){if(1&t&&(p.YNc(0,zo,2,0,"ng-template",null,0,p.W1O),p.YNc(2,Ma,2,0,"ng-template",null,1,p.W1O),p.YNc(4,Bu,2,0,"ng-template",null,2,p.W1O),p.YNc(6,Ra,2,0,"ng-template",null,3,p.W1O),p.YNc(8,Wo,1,0,"ng-template",null,4,p.W1O),p.YNc(10,Ol,2,2,"ng-template",null,5,p.W1O),p.YNc(12,bc,1,1,"ng-template",null,6,p.W1O),p.TgZ(14,"ul"),p.YNc(15,Vu,3,9,"li",7),p.YNc(16,ui,3,8,"li",7),p.YNc(17,ql,0,0,"ng-template",8),p.YNc(18,Gu,3,9,"li",7),p.YNc(19,Nl,3,9,"li",7),p.qZA()),2&t){const d=p.MAs(13);p.xp6(14),p.Tol("pagination"+(l.size?" pagination-"+l.size:"")),p.xp6(1),p.Q6J("ngIf",l.boundaryLinks),p.xp6(1),p.Q6J("ngIf",l.directionLinks),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==l.tplPages?null:l.tplPages.templateRef)||d)("ngTemplateOutletContext",p.kEZ(8,Yl,l.page,l.pages,l.disabled)),p.xp6(1),p.Q6J("ngIf",l.directionLinks),p.xp6(1),p.Q6J("ngIf",l.boundaryLinks)}},dependencies:[Ae.O5,Ae.ax,Ae.tP],encapsulation:2,changeDetection:0}),r})(),Mf=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[D0]}),r})(),Mc=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({}),r})(),km=(()=>{class r{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),aE=(()=>{class r{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!mn(t)||t<=0?100:t}get max(){return this._max}getValue(){return eo(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(km))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,l){2&t&&(p.uIk("aria-valuenow",l.getValue())("aria-valuemax",l.max)("aria-label",l.ariaLabel),p.Udp("height",l.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[p.jDz],ngContentSelectors:Mi,decls:3,vars:11,consts:function(){let i;return i=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],i]},template:function(t,l){1&t&&(p.F$t(),p.TgZ(0,"div"),p.YNc(1,K,3,3,"span",0),p.Hsn(2),p.qZA()),2&t&&(p.MT6("progress-bar",l.type?l.textType?" bg-"+l.type:" text-bg-"+l.type:"","",l.textType?" text-"+l.textType:"",""),p.Udp("width",l.getPercentValue(),"%"),p.ekj("progress-bar-animated",l.animated)("progress-bar-striped",l.striped),p.xp6(1),p.Q6J("ngIf",l.showValue))},dependencies:[Ae.O5,Ae.Zx],encapsulation:2,changeDetection:0}),r})(),Iy=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[aE]}),r})(),tl=(()=>{class r{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Fm=(()=>{class r{constructor(t,l){this._changeDetectorRef=l,this.contexts=[],this.disabled=!1,this.hover=new p.vpe,this.leave=new p.vpe,this.rateChange=new p.vpe(!0),this.onChange=d=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case en.ArrowDown:case en.ArrowLeft:this.update(this.rate-1);break;case en.ArrowUp:case en.ArrowRight:this.update(this.rate+1);break;case en.Home:this.update(0);break;case en.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,l=!0){const d=eo(t,this.max,0);this.isInteractive()&&this.rate!==d&&(this.rate=d,this.rateChange.emit(this.rate)),l&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((l,d)=>l.fill=Math.round(100*eo(t-d,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,l)=>({fill:0,index:l}))}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(tl),p.Y36(p.sBO))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-rating"]],contentQueries:function(t,l,d){if(1&t&&p.Suo(d,p.Rgc,5),2&t){let m;p.iGM(m=p.CRH())&&(l.starTemplateFromContent=m.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,l){1&t&&p.NdJ("blur",function(){return l.handleBlur()})("keydown",function(m){return l.handleKeyDown(m)})("mouseleave",function(){return l.reset()}),2&t&&(p.Ikx("tabindex",l.disabled?-1:l.tabindex),p.uIk("aria-valuemax",l.max)("aria-valuenow",l.nextRate)("aria-valuetext",l.ariaValueText())("aria-disabled",!!l.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[p._Bn([{provide:Wn.JU,useExisting:(0,p.Gpc)(()=>r),multi:!0}]),p.TTD,p.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&(p.YNc(0,B,1,1,"ng-template",null,0,p.W1O),p.YNc(2,ye,4,5,"ng-template",1)),2&t&&(p.xp6(2),p.Q6J("ngForOf",l.contexts))},dependencies:[Ae.ax,Ae.tP],encapsulation:2,changeDetection:0}),r})(),Rf=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[Fm]}),r})();class vu{constructor(i,t,l){this.hour=os(i),this.minute=os(t),this.second=os(l)}changeHour(i=1){this.updateHour((isNaN(this.hour)?0:this.hour)+i)}updateHour(i){this.hour=mn(i)?(i<0?24+i:i)%24:NaN}changeMinute(i=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+i)}updateMinute(i){mn(i)?(this.minute=i%60<0?60+i%60:i%60,this.changeHour(Math.floor(i/60))):this.minute=NaN}changeSecond(i=1){this.updateSecond((isNaN(this.second)?0:this.second)+i)}updateSecond(i){mn(i)?(this.second=i<0?60+i%60:i%60,this.changeMinute(Math.floor(i/60))):this.second=NaN}isValid(i=!0){return mn(this.hour)&&mn(this.minute)&&(!i||mn(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let T0=(()=>{class r{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Lm=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:function(){return function xf(){return new S0}()},providedIn:"root"}),r})(),S0=(()=>{class r extends Lm{fromModel(t){return t&&Hr(t.hour)&&Hr(t.minute)?{hour:t.hour,minute:t.minute,second:Hr(t.second)?t.second:null}:null}toModel(t){return t&&Hr(t.hour)&&Hr(t.minute)?{hour:t.hour,minute:t.minute,second:Hr(t.second)?t.second:null}:null}}return r.\u0275fac=function(){let i;return function(l){return(i||(i=p.n5z(r)))(l||r)}}(),r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac}),r})(),Cy=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=p.Yz7({token:r,factory:function(t){let l=null;return l=t?new t:function A0(r){return new Ty(r)}(p.LFG(p.soG)),l},providedIn:"root"}),r})(),Ty=(()=>{class r extends Cy{constructor(t){super(),this._periods=(0,Ae.ol)(t,Ae.x.Standalone,Ae.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(p.soG))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac}),r})();const Qp=/[^0-9]/g;let O0=(()=>{class r{constructor(t,l,d,m){this._config=t,this._ngbTimeAdapter=l,this._cd=d,this.i18n=m,this.onChange=I=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=Hr(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=Hr(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=Hr(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const l=this._ngbTimeAdapter.fromModel(t);this.model=l?new vu(l.hour,l.minute,l.second):new vu,!this.seconds&&(!l||!mn(l.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const l=!!this.model&&this.model.hour>=12,d=os(t);this.model?.updateHour(this.meridian&&(l&&d<12||!l&&12===d)?d+12:d),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(os(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(os(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(Qp,"")}formatHour(t){return mn(t)?wn(this.meridian?t%12==0?12:t%12:t%24):wn(NaN)}formatMinSec(t){return wn(mn(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!mn(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return r.\u0275fac=function(t){return new(t||r)(p.Y36(T0),p.Y36(Lm),p.Y36(p.sBO),p.Y36(Cy))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[p._Bn([{provide:Wn.JU,useExisting:(0,p.Gpc)(()=>r),multi:!0}]),p.TTD,p.jDz],decls:16,vars:25,consts:function(){let i,t,l,d,m,I,k,V,Y,ue,Me,Ne,Je,kt;return i=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,l=$localize`:@@ngb.timepicker.MM:MM`,d=$localize`:@@ngb.timepicker.minutes:Minutes`,m=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,I=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,k=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,V=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,Y=$localize`:@@ngb.timepicker.SS:SS`,ue=$localize`:@@ngb.timepicker.seconds:Seconds`,Me=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,Ne=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,Je=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,kt=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",i,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",l,"aria-label",d,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],m,[1,"chevron","ngb-tp-chevron","bottom"],I,k,V,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",Y,"aria-label",ue,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],Me,Ne,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],Je,kt]},template:function(t,l){1&t&&(p.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),p.YNc(3,Ye,4,7,"button",3),p.TgZ(4,"input",4),p.NdJ("change",function(m){return l.updateHour(m.target.value)})("blur",function(){return l.handleBlur()})("input",function(m){return l.formatInput(m.target)})("keydown.ArrowUp",function(m){return l.changeHour(l.hourStep),m.preventDefault()})("keydown.ArrowDown",function(m){return l.changeHour(-l.hourStep),m.preventDefault()}),p.qZA(),p.YNc(5,Nt,4,7,"button",3),p.qZA(),p.TgZ(6,"div",5),p._uU(7,":"),p.qZA(),p.TgZ(8,"div",6),p.YNc(9,vn,4,7,"button",3),p.TgZ(10,"input",7),p.NdJ("change",function(m){return l.updateMinute(m.target.value)})("blur",function(){return l.handleBlur()})("input",function(m){return l.formatInput(m.target)})("keydown.ArrowUp",function(m){return l.changeMinute(l.minuteStep),m.preventDefault()})("keydown.ArrowDown",function(m){return l.changeMinute(-l.minuteStep),m.preventDefault()}),p.qZA(),p.YNc(11,xr,4,7,"button",3),p.qZA(),p.YNc(12,It,2,0,"div",8),p.YNc(13,ir,4,9,"div",9),p.YNc(14,$t,1,0,"div",8),p.YNc(15,qt,5,9,"div",10),p.qZA()()),2&t&&(p.ekj("disabled",l.disabled),p.Q6J("disabled",l.disabled),p.xp6(3),p.Q6J("ngIf",l.spinners),p.xp6(1),p.ekj("form-control-sm",l.isSmallSize)("form-control-lg",l.isLargeSize),p.Q6J("value",l.formatHour(null==l.model?null:l.model.hour))("readOnly",l.readonlyInputs)("disabled",l.disabled),p.xp6(1),p.Q6J("ngIf",l.spinners),p.xp6(4),p.Q6J("ngIf",l.spinners),p.xp6(1),p.ekj("form-control-sm",l.isSmallSize)("form-control-lg",l.isLargeSize),p.Q6J("value",l.formatMinSec(null==l.model?null:l.model.minute))("readOnly",l.readonlyInputs)("disabled",l.disabled),p.xp6(1),p.Q6J("ngIf",l.spinners),p.xp6(1),p.Q6J("ngIf",l.seconds),p.xp6(1),p.Q6J("ngIf",l.seconds),p.xp6(1),p.Q6J("ngIf",l.meridian),p.xp6(1),p.Q6J("ngIf",l.meridian))},dependencies:[Ae.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),r})(),Xp=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[O0]}),r})();const N0=(r,i)=>{const{classList:t}=r;if(i)return t.add("fade"),hr(r),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},fo=({classList:r})=>(r.add("showing"),()=>{r.remove("show","showing")});let M0=(()=>{class r{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(ma))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),R0=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=p.lG2({type:r,selectors:[["","ngbToastHeader",""]],standalone:!0}),r})(),Um=(()=>{class r{constructor(t,l,d,m){this.ariaLive=t,this._zone=d,this._element=m,this.contentHeaderTpl=null,this.shown=new p.vpe,this.hidden=new p.vpe,null==this.ariaLive&&(this.ariaLive=l.ariaLive),this.delay=l.delay,this.autohide=l.autohide,this.animation=l.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Yn.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=$r(this._zone,this._element.nativeElement,fo,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=$r(this._zone,this._element.nativeElement,N0,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return r.\u0275fac=function(t){return new(t||r)(p.$8M("aria-live"),p.Y36(M0),p.Y36(p.R0b),p.Y36(p.SBq))},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-toast"]],contentQueries:function(t,l,d){if(1&t&&p.Suo(d,R0,7,p.Rgc),2&t){let m;p.iGM(m=p.CRH())&&(l.contentHeaderTpl=m.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,l){2&t&&(p.uIk("aria-live",l.ariaLive),p.ekj("fade",l.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[p.TTD,p.jDz],ngContentSelectors:Mi,decls:5,vars:1,consts:function(){let i;return i=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",i,1,"btn-close",3,"click"]]},template:function(t,l){1&t&&(p.F$t(),p.YNc(0,at,2,1,"ng-template",null,0,p.W1O),p.YNc(2,ci,3,1,"ng-template",1),p.TgZ(3,"div",2),p.Hsn(4),p.qZA()),2&t&&(p.xp6(2),p.Q6J("ngIf",l.contentHeaderTpl||l.header))},dependencies:[Ae.O5,Ae.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),r})(),Bm=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[Um]}),r})(),eg=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({}),r})(),P0=(()=>{class r{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const l=Zl(this.result),d=Array.isArray(this.term)?this.term:[this.term],m=Y=>this.accentSensitive?Y:Rl(Y),I=d.map(Y=>function qa(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(m(Zl(Y)))).filter(Y=>Y),k=this.accentSensitive?l:Rl(l),V=I.length?k.split(new RegExp(`(${I.join("|")})`,"gmi")):[l];if(this.accentSensitive)this.parts=V;else{let Y=0;this.parts=V.map(ue=>l.substring(Y,Y+=ue.length))}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=p.Xpm({type:r,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[p.TTD,p.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,l){1&t&&p.YNc(0,_l,3,2,"ng-template",0),2&t&&p.Q6J("ngForOf",l.parts)},dependencies:[Ae.O5,Ae.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),r})();new p.OlP("live announcer delay",{providedIn:"root",factory:function tg(){return 100}});let jm=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[P0]}),r})(),bu=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({}),r})();const Oy=[ai,Ja,lo,S,Hp,Cf,Ac,Yp,bu,Mf,Mc,Iy,Rf,Xp,Bm,eg,jm];let ng=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[Oy,ai,Ja,lo,S,Hp,Cf,Ac,Yp,bu,Mf,Mc,Iy,Rf,Xp,Bm,eg,jm]}),r})();var Ll=G(2011),Eu=G(1205),Ed=G(8996),gs=G(2122),Qu=G(3942),Dd=G(5861),Xu=G(9681),pe=G(2090),xc=G(4859);const Id="firebasestorage.googleapis.com",Nh="storageBucket";class Ms extends pe.ZR{constructor(i,t,l=0){super($m(i),`Firebase Storage: ${t} (${$m(i)})`),this.status_=l,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ms.prototype)}get status(){return this.status_}set status(i){this.status_=i}_codeEquals(i){return $m(i)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(i){this.customData.serverResponse=i,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var $i=(()=>{return(r=$i||($i={})).UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment",$i;var r})();function $m(r){return"storage/"+r}function Mh(){return new Ms($i.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ec(){return new Ms($i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ry(){return new Ms($i.CANCELED,"User canceled the upload/download.")}function Wm(){return new Ms($i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tc(r){return new Ms($i.INVALID_ARGUMENT,r)}function Km(){return new Ms($i.APP_DELETED,"The Firebase app was deleted.")}function Qo(r){return new Ms($i.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wu(r,i){return new Ms($i.INVALID_FORMAT,"String does not match format '"+r+"': "+i)}function kc(r){throw new Ms($i.INTERNAL_ERROR,"Internal error: "+r)}class So{constructor(i,t){this.bucket=i,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const i=encodeURIComponent;return"/b/"+i(this.bucket)+"/o/"+i(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(i,t){let l;try{l=So.makeFromUrl(i,t)}catch{return new So(i,"")}if(""===l.path)return l;throw function sg(r){return new Ms($i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}(i)}static makeFromUrl(i,t){let l=null;const d="([A-Za-z0-9.\\-_]+)",k=new RegExp("^gs://"+d+"(/(.*))?$","i");function Y(Jn){Jn.path_=decodeURIComponent(Jn.path)}const Me=t.replace(/[.]/g,"\\."),ur=[{regex:k,indices:{bucket:1,path:3},postModify:function m(Jn){"/"===Jn.path.charAt(Jn.path.length-1)&&(Jn.path_=Jn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Me}/v[A-Za-z0-9_]+/b/${d}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Y},{regex:new RegExp(`^https?://${t===Id?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${d}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Y}];for(let Jn=0;Jn<ur.length;Jn++){const Fr=ur[Jn],zr=Fr.regex.exec(i);if(zr){let Oi=zr[Fr.indices.path];Oi||(Oi=""),l=new So(zr[Fr.indices.bucket],Oi),Fr.postModify(l);break}}if(null==l)throw function ig(r){return new Ms($i.INVALID_URL,"Invalid URL '"+r+"'.")}(i);return l}}class xy{constructor(i){this.promise_=Promise.reject(i)}getPromise(){return this.promise_}cancel(i=!1){}}function Xo(r){return"string"==typeof r||r instanceof String}function qm(r){return Du()&&r instanceof Blob}function Du(){return typeof Blob<"u"&&!(0,pe.UG)()}function Ym(r,i,t,l){if(l<i)throw tc(`Invalid value for '${r}'. Expected ${i} or greater.`);if(l>t)throw tc(`Invalid value for '${r}'. Expected ${t} or less.`)}function Lc(r,i,t){let l=i;return null==t&&(l=`https://${i}`),`${t}://${l}/v0${r}`}function Zm(r){const i=encodeURIComponent;let t="?";for(const l in r)r.hasOwnProperty(l)&&(t=t+(i(l)+"=")+i(r[l])+"&");return t=t.slice(0,-1),t}var Nd=(()=>{return(r=Nd||(Nd={}))[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT",Nd;var r})();function Jm(r,i){const t=r>=500&&r<600,d=-1!==[408,429].indexOf(r),m=-1!==i.indexOf(r);return t||d||m}class Lf{constructor(i,t,l,d,m,I,k,V,Y,ue,Me,Ne=!0){this.url_=i,this.method_=t,this.headers_=l,this.body_=d,this.successCodes_=m,this.additionalRetryCodes_=I,this.callback_=k,this.errorCallback_=V,this.timeout_=Y,this.progressCallback_=ue,this.connectionFactory_=Me,this.retry=Ne,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Je,kt)=>{this.resolve_=Je,this.reject_=kt,this.start_()})}start_(){const t=(l,d)=>{const m=this.resolve_,I=this.reject_,k=d.connection;if(d.wasSuccessCode)try{const V=this.callback_(k,k.getResponse());!function Py(r){return void 0!==r}(V)?m():m(V)}catch(V){I(V)}else if(null!==k){const V=Mh();V.serverResponse=k.getErrorText(),I(this.errorCallback_?this.errorCallback_(k,V):V)}else I(d.canceled?this.appDelete_?Km():Ry():ec())};this.canceled_?t(0,new Uf(!1,null,!0)):this.backoffId_=function Fc(r,i,t){let l=1,d=null,m=null,I=!1,k=0;function V(){return 2===k}let Y=!1;function ue(...pn){Y||(Y=!0,i.apply(null,pn))}function Me(pn){d=setTimeout(()=>{d=null,r(Je,V())},pn)}function Ne(){m&&clearTimeout(m)}function Je(pn,...Kn){if(Y)return void Ne();if(pn)return Ne(),void ue.call(null,pn,...Kn);if(V()||I)return Ne(),void ue.call(null,pn,...Kn);let ur;l<64&&(l*=2),1===k?(k=2,ur=0):ur=1e3*(l+Math.random()),Me(ur)}let kt=!1;function Yt(pn){kt||(kt=!0,Ne(),!Y&&(null!==d?(pn||(k=2),clearTimeout(d),Me(0)):pn||(k=1)))}return Me(0),m=setTimeout(()=>{I=!0,Yt(!0)},t),Yt}((l,d)=>{if(d)return void l(!1,new Uf(!1,null,!0));const m=this.connectionFactory_();this.pendingConnection_=m;const I=k=>{null!==this.progressCallback_&&this.progressCallback_(k.loaded,k.lengthComputable?k.total:-1)};null!==this.progressCallback_&&m.addUploadProgressListener(I),m.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&m.removeUploadProgressListener(I),this.pendingConnection_=null;const k=m.getErrorCode()===Nd.NO_ERROR,V=m.getStatus();if(!k||Jm(V,this.additionalRetryCodes_)&&this.retry){const ue=m.getErrorCode()===Nd.ABORT;return void l(!1,new Uf(!1,null,ue))}const Y=-1!==this.successCodes_.indexOf(V);l(!0,new Uf(Y,m))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(i){this.canceled_=!0,this.appDelete_=i||!1,null!==this.backoffId_&&function xh(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Uf{constructor(i,t,l){this.wasSuccessCode=i,this.connection=t,this.canceled=!!l}}function Ly(...r){const i=function kh(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==i){const t=new i;for(let l=0;l<r.length;l++)t.append(r[l]);return t.getBlob()}if(Du())return new Blob(r);throw new Ms($i.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const nl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class og{constructor(i,t){this.data=i,this.contentType=t||null}}function Qm(r,i){switch(r){case nl.RAW:return new og(ag(i));case nl.BASE64:case nl.BASE64URL:return new og(pr(r,i));case nl.DATA_URL:return new og(function By(r){const i=new Xm(r);return i.base64?pr(nl.BASE64,i.rest):function ko(r){let i;try{i=decodeURIComponent(r)}catch{throw wu(nl.DATA_URL,"Malformed data URL.")}return ag(i)}(i.rest)}(i),function Vy(r){return new Xm(r).contentType}(i))}throw Mh()}function ag(r){const i=[];for(let t=0;t<r.length;t++){let l=r.charCodeAt(t);l<=127?i.push(l):l<=2047?i.push(192|l>>6,128|63&l):55296==(64512&l)?t<r.length-1&&56320==(64512&r.charCodeAt(t+1))?(l=65536|(1023&l)<<10|1023&r.charCodeAt(++t),i.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|63&l)):i.push(239,191,189):56320==(64512&l)?i.push(239,191,189):i.push(224|l>>12,128|l>>6&63,128|63&l)}return new Uint8Array(i)}function pr(r,i){switch(r){case nl.BASE64:{const d=-1!==i.indexOf("-"),m=-1!==i.indexOf("_");if(d||m)throw wu(r,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case nl.BASE64URL:{const d=-1!==i.indexOf("+"),m=-1!==i.indexOf("/");if(d||m)throw wu(r,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function U0(r){if(typeof atob>"u")throw function Ad(r){return new Ms($i.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(r)}(i)}catch(d){throw d.message.includes("polyfill")?d:wu(r,"Invalid character found")}const l=new Uint8Array(t.length);for(let d=0;d<t.length;d++)l[d]=t.charCodeAt(d);return l}class Xm{constructor(i){this.base64=!1,this.contentType=null;const t=i.match(/^data:([^,]+)?,/);if(null===t)throw wu(nl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const l=t[1]||null;null!=l&&(this.base64=function Gy(r,i){return r.length>=i.length&&r.substring(r.length-i.length)===i}(l,";base64"),this.contentType=this.base64?l.substring(0,l.length-7):l),this.rest=i.substring(i.indexOf(",")+1)}}class Iu{constructor(i,t){let l=0,d="";qm(i)?(this.data_=i,l=i.size,d=i.type):i instanceof ArrayBuffer?(t?this.data_=new Uint8Array(i):(this.data_=new Uint8Array(i.byteLength),this.data_.set(new Uint8Array(i))),l=this.data_.length):i instanceof Uint8Array&&(t?this.data_=i:(this.data_=new Uint8Array(i.length),this.data_.set(i)),l=i.length),this.size_=l,this.type_=d}size(){return this.size_}type(){return this.type_}slice(i,t){if(qm(this.data_)){const d=function Uy(r,i,t){return r.webkitSlice?r.webkitSlice(i,t):r.mozSlice?r.mozSlice(i,t):r.slice?r.slice(i,t):null}(this.data_,i,t);return null===d?null:new Iu(d)}{const l=new Uint8Array(this.data_.buffer,i,t-i);return new Iu(l,!0)}}static getBlob(...i){if(Du()){const t=i.map(l=>l instanceof Iu?l.data_:l);return new Iu(Ly.apply(null,t))}{const t=i.map(I=>Xo(I)?Qm(nl.RAW,I).data:I.data_);let l=0;t.forEach(I=>{l+=I.byteLength});const d=new Uint8Array(l);let m=0;return t.forEach(I=>{for(let k=0;k<I.length;k++)d[m++]=I[k]}),new Iu(d,!0)}}uploadData(){return this.data_}}function Rd(r){let i;try{i=JSON.parse(r)}catch{return null}return function Ph(r){return"object"==typeof r&&!Array.isArray(r)}(i)?i:null}function lg(r){const i=r.lastIndexOf("/",r.length-2);return-1===i?r:r.slice(i+1)}function t_(r,i){return i}class Fo{constructor(i,t,l,d){this.server=i,this.local=t||i,this.writable=!!l,this.xform=d||t_}}let Uc=null;function El(){if(Uc)return Uc;const r=[];r.push(new Fo("bucket")),r.push(new Fo("generation")),r.push(new Fo("metageneration")),r.push(new Fo("name","fullPath",!0));const t=new Fo("name");t.xform=function i(m,I){return function ug(r){return!Xo(r)||r.length<2?r:lg(r)}(I)},r.push(t);const d=new Fo("size");return d.xform=function l(m,I){return void 0!==I?Number(I):I},r.push(d),r.push(new Fo("timeCreated")),r.push(new Fo("updated")),r.push(new Fo("md5Hash",null,!0)),r.push(new Fo("cacheControl",null,!0)),r.push(new Fo("contentDisposition",null,!0)),r.push(new Fo("contentEncoding",null,!0)),r.push(new Fo("contentLanguage",null,!0)),r.push(new Fo("contentType",null,!0)),r.push(new Fo("metadata","customMetadata",!0)),Uc=r,Uc}function Bf(r,i,t){const l=Rd(i);return null===l?null:function n_(r,i,t){const l={type:"file"},d=t.length;for(let m=0;m<d;m++){const I=t[m];l[I.local]=I.xform(l,i[I.server])}return function jy(r,i){Object.defineProperty(r,"ref",{get:function t(){const m=new So(r.bucket,r.fullPath);return i._makeStorageReference(m)}})}(l,r),l}(r,l,t)}function cg(r,i){const t={},l=i.length;for(let d=0;d<l;d++){const m=i[d];m.writable&&(t[m.server]=r[m.local])}return JSON.stringify(t)}const V0="prefixes",$y="items";class nc{constructor(i,t,l,d){this.url=i,this.method=t,this.handler=l,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ba(r){if(!r)throw Mh()}function rl(r,i){return function t(l,d){const m=Bf(r,d,i);return Ba(null!==m),m}}function Cu(r){return function i(t,l){let d;return d=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function zm(){return new Ms($i.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Td(){return new Ms($i.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function My(r){return new Ms($i.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===t.getStatus()?function Sd(r){return new Ms($i.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}(r.path):l,d.status=t.getStatus(),d.serverResponse=l.serverResponse,d}}function Fh(r){const i=Cu(r);return function t(l,d){let m=i(l,d);return 404===l.getStatus()&&(m=function Ny(r){return new Ms($i.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}(r.path)),m.serverResponse=d.serverResponse,m}}function dg(r,i,t){const d=Lc(i.fullServerUrl(),r.host,r._protocol),I=r.maxOperationRetryTime,k=new nc(d,"GET",rl(r,t),I);return k.errorHandler=Fh(i),k}function j0(r,i,t,l,d){const m={};m.prefix=i.isRoot?"":i.path+"/",t&&t.length>0&&(m.delimiter=t),l&&(m.pageToken=l),d&&(m.maxResults=d);const k=Lc(i.bucketOnlyServerUrl(),r.host,r._protocol),Y=r.maxOperationRetryTime,ue=new nc(k,"GET",function i_(r,i){return function t(l,d){const m=function r_(r,i,t){const l=Rd(t);return null===l?null:function G0(r,i,t){const l={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[V0])for(const d of t[V0]){const m=d.replace(/\/$/,""),I=r._makeStorageReference(new So(i,m));l.prefixes.push(I)}if(t[$y])for(const d of t[$y]){const m=r._makeStorageReference(new So(i,d.name));l.items.push(m)}return l}(r,i,l)}(r,i,d);return Ba(null!==m),m}}(r,i.bucket),Y);return ue.urlParams=m,ue.errorHandler=Cu(i),ue}function fg(r,i,t){const l=Object.assign({},t);return l.fullPath=r.path,l.size=i.size(),l.contentType||(l.contentType=function o_(r,i){return r&&r.contentType||i&&i.type()||"application/octet-stream"}(null,i)),l}class rc{constructor(i,t,l,d){this.current=i,this.total=t,this.finalized=!!l,this.metadata=d||null}}function Bc(r,i){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch{Ba(!1)}return Ba(!!t&&-1!==(i||["active"]).indexOf(t)),t}const Uh={STATE_CHANGED:"state_changed"},ea={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Bh(r){switch(r){case"running":case"pausing":case"canceling":return ea.RUNNING;case"paused":return ea.PAUSED;case"success":return ea.SUCCESS;case"canceled":return ea.CANCELED;default:return ea.ERROR}}class gg{constructor(i,t,l){if(function Od(r){return"function"==typeof r}(i)||null!=t||null!=l)this.next=i,this.error=t??void 0,this.complete=l??void 0;else{const m=i;this.next=m.next,this.error=m.error,this.complete=m.complete}}}function Vh(r){return(...i)=>{Promise.resolve().then(()=>r(...i))}}let Ky=null;class Ao{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nd.NO_ERROR,this.sendPromise_=new Promise(i=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nd.ABORT,i()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nd.NETWORK_ERROR,i()}),this.xhr_.addEventListener("load",()=>{i()})})}send(i,t,l,d){if(this.sent_)throw kc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,i,!0),void 0!==d)for(const m in d)d.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,d[m].toString());return void 0!==l?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(i){return this.xhr_.getResponseHeader(i)}addUploadProgressListener(i){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",i)}removeUploadProgressListener(i){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",i)}}class Gh extends Ao{initXhr(){this.xhr_.responseType="text"}}function il(){return Ky?Ky():new Gh}class mg{constructor(i,t,l=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=i,this._blob=t,this._metadata=l,this._mappings=El(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=d=>{if(this._request=void 0,this._chunkMultiplier=1,d._codeEquals($i.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const m=this.isExponentialBackoffExpired();if(Jm(d.status,[])){if(!m)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();d=ec()}this._error=d,this._transition("error")}},this._metadataErrorHandler=d=>{this._request=void 0,d._codeEquals($i.CANCELED)?this.completeTransitions_():(this._error=d,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((d,m)=>{this._resolve=d,this._reject=m,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const i=this._transferred;return t=>this._updateProgress(i+t)}_shouldDoResumable(i){return i.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(i){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,l])=>{switch(this._state){case"running":i(t,l);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((i,t)=>{const l=function Wy(r,i,t,l,d){const m=i.bucketOnlyServerUrl(),I=fg(i,l,d),k={name:I.fullPath},V=Lc(m,r.host,r._protocol),ue={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l.size()}`,"X-Goog-Upload-Header-Content-Type":I.contentType,"Content-Type":"application/json; charset=utf-8"},Me=cg(I,t),kt=new nc(V,"POST",function Je(Yt){let pn;Bc(Yt);try{pn=Yt.getResponseHeader("X-Goog-Upload-URL")}catch{Ba(!1)}return Ba(Xo(pn)),pn},r.maxUploadRetryTime);return kt.urlParams=k,kt.headers=ue,kt.body=Me,kt.errorHandler=Cu(i),kt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),d=this._ref.storage._makeRequest(l,il,i,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._uploadUrl=m,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const i=this._uploadUrl;this._resolveToken((t,l)=>{const d=function Gf(r,i,t,l){const V=new nc(t,"POST",function m(Y){const ue=Bc(Y,["active","final"]);let Me=null;try{Me=Y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ba(!1)}Me||Ba(!1);const Ne=Number(Me);return Ba(!isNaN(Ne)),new rc(Ne,l.size(),"final"===ue)},r.maxUploadRetryTime);return V.headers={"X-Goog-Upload-Command":"query"},V.errorHandler=Cu(i),V}(this._ref.storage,this._ref._location,i,this._blob),m=this._ref.storage._makeRequest(d,il,t,l);this._request=m,m.getPromise().then(I=>{this._request=void 0,this._updateProgress(I.current),this._needToFetchStatus=!1,I.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const i=262144*this._chunkMultiplier,t=new rc(this._transferred,this._blob.size()),l=this._uploadUrl;this._resolveToken((d,m)=>{let I;try{I=function $0(r,i,t,l,d,m,I,k){const V=new rc(0,0);if(I?(V.current=I.current,V.total=I.total):(V.current=0,V.total=l.size()),l.size()!==V.total)throw function Rh(){return new Ms($i.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Y=V.total-V.current;let ue=Y;d>0&&(ue=Math.min(ue,d));const Me=V.current;let Je="";Je=0===ue?"finalize":Y===ue?"upload, finalize":"upload";const kt={"X-Goog-Upload-Command":Je,"X-Goog-Upload-Offset":`${V.current}`},Yt=l.slice(Me,Me+ue);if(null===Yt)throw Wm();const ur=new nc(t,"POST",function pn(Jn,Fr){const zr=Bc(Jn,["active","final"]),Yi=V.current+ue,Oi=l.size();let io;return io="final"===zr?rl(i,m)(Jn,Fr):null,new rc(Yi,Oi,"final"===zr,io)},i.maxUploadRetryTime);return ur.headers=kt,ur.body=Yt.uploadData(),ur.progressCallback=k||null,ur.errorHandler=Cu(r),ur}(this._ref._location,this._ref.storage,l,this._blob,i,this._mappings,t,this._makeProgressCallback())}catch(V){return this._error=V,void this._transition("error")}const k=this._ref.storage._makeRequest(I,il,d,m,!1);this._request=k,k.getPromise().then(V=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(V.current),V.finalized?(this._metadata=V.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((i,t)=>{const l=dg(this._ref.storage,this._ref._location,this._mappings),d=this._ref.storage._makeRequest(l,il,i,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((i,t)=>{const l=function Lh(r,i,t,l,d){const m=i.bucketOnlyServerUrl(),I={"X-Goog-Upload-Protocol":"multipart"},V=function k(){let ur="";for(let Jn=0;Jn<2;Jn++)ur+=Math.random().toString().slice(2);return ur}();I["Content-Type"]="multipart/related; boundary="+V;const Y=fg(i,l,d),ue=cg(Y,t),Je=Iu.getBlob("--"+V+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ue+"\r\n--"+V+"\r\nContent-Type: "+Y.contentType+"\r\n\r\n",l,"\r\n--"+V+"--");if(null===Je)throw Wm();const kt={name:Y.fullPath},Yt=Lc(m,r.host,r._protocol),Kn=r.maxUploadRetryTime,qn=new nc(Yt,"POST",rl(r,t),Kn);return qn.urlParams=kt,qn.headers=I,qn.body=Je.uploadData(),qn.errorHandler=Cu(i),qn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),d=this._ref.storage._makeRequest(l,il,i,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(i){const t=this._transferred;this._transferred=i,this._transferred!==t&&this._notifyObservers()}_transition(i){if(this._state!==i)switch(i){case"canceling":case"pausing":this._state=i,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=i,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=i,this._notifyObservers();break;case"canceled":this._error=Ry(),this._state=i,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const i=Bh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:i,metadata:this._metadata,task:this,ref:this._ref}}on(i,t,l,d){const m=new gg(t||void 0,l||void 0,d||void 0);return this._addObserver(m),()=>{this._removeObserver(m)}}then(i,t){return this._promise.then(i,t)}catch(i){return this.then(null,i)}_addObserver(i){this._observers.push(i),this._notifyObserver(i)}_removeObserver(i){const t=this._observers.indexOf(i);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let i=!0;switch(Bh(this._state)){case ea.SUCCESS:Vh(this._resolve.bind(null,this.snapshot))();break;case ea.CANCELED:case ea.ERROR:Vh(this._reject.bind(null,this._error))();break;default:i=!1}i&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(i){switch(Bh(this._state)){case ea.RUNNING:case ea.PAUSED:i.next&&Vh(i.next.bind(i,this.snapshot))();break;case ea.SUCCESS:i.complete&&Vh(i.complete.bind(i))();break;default:i.error&&Vh(i.error.bind(i,this._error))()}}resume(){const i="paused"===this._state||"pausing"===this._state;return i&&this._transition("running"),i}pause(){const i="running"===this._state;return i&&this._transition("pausing"),i}cancel(){const i="running"===this._state||"pausing"===this._state;return i&&this._transition("canceling"),i}}class ic{constructor(i,t){this._service=i,this._location=t instanceof So?t:So.makeFromUrl(t,i.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(i,t){return new ic(i,t)}get root(){const i=new So(this._location.bucket,"");return this._newRef(this._service,i)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lg(this._location.path)}get storage(){return this._service}get parent(){const i=function B0(r){if(0===r.length)return null;const i=r.lastIndexOf("/");return-1===i?"":r.slice(0,i)}(this._location.path);if(null===i)return null;const t=new So(this._location.bucket,i);return new ic(this._service,t)}_throwIfRoot(i){if(""===this._location.path)throw Qo(i)}}function _g(r,i,t){return sc.apply(this,arguments)}function sc(){return(sc=(0,Dd.Z)(function*(r,i,t){const d=yield jf(r,{pageToken:t});i.prefixes.push(...d.prefixes),i.items.push(...d.items),null!=d.nextPageToken&&(yield _g(r,i,d.nextPageToken))})).apply(this,arguments)}function jf(r,i){null!=i&&"number"==typeof i.maxResults&&Ym("options.maxResults",1,1e3,i.maxResults);const t=i||{},l=j0(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(l,il)}function Va(r){r._throwIfRoot("getDownloadURL");const i=function H0(r,i,t){const d=Lc(i.fullServerUrl(),r.host,r._protocol),I=r.maxOperationRetryTime,k=new nc(d,"GET",function Vf(r,i){return function t(l,d){const m=Bf(r,d,i);return Ba(null!==m),function Hy(r,i,t,l){const d=Rd(i);if(null===d||!Xo(d.downloadTokens))return null;const m=d.downloadTokens;if(0===m.length)return null;const I=encodeURIComponent;return m.split(",").map(Y=>{const Me=r.fullPath;return Lc("/b/"+I(r.bucket)+"/o/"+I(Me),t,l)+Zm({alt:"media",token:Y})})[0]}(m,d,r.host,r._protocol)}}(r,t),I);return k.errorHandler=Fh(i),k}(r.storage,r._location,El());return r.storage.makeRequestWithTokens(i,il).then(t=>{if(null===t)throw function Ff(){return new Ms($i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function vg(r,i){const t=function e_(r,i){const t=i.split("/").filter(l=>l.length>0).join("/");return 0===r.length?t:r+"/"+t}(r._location.path,i),l=new So(r._location.bucket,t);return new ic(r.storage,l)}function bg(r,i){if(r instanceof zh){const t=r;if(null==t._bucket)throw function F0(){return new Ms($i.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nh+"' property when initializing the app?")}();const l=new ic(t,t._bucket);return null!=i?bg(l,i):l}return void 0!==i?vg(r,i):r}function K0(r,i){if(i&&function Yy(r){return/^[A-Za-z]+:\/\//.test(r)}(i)){if(r instanceof zh)return function ou(r,i){return new ic(r,i)}(r,i);throw tc("To use ref(service, url), the first argument must be a Storage instance.")}return bg(r,i)}function Eg(r,i){const t=i?.[Nh];return null==t?null:So.makeFromBucketSpec(t,r)}class zh{constructor(i,t,l,d,m){this.app=i,this._authProvider=t,this._appCheckProvider=l,this._url=d,this._firebaseVersion=m,this._bucket=null,this._host=Id,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=d?So.makeFromBucketSpec(d,this._host):Eg(this._host,this.app.options)}get host(){return this._host}set host(i){this._host=i,this._bucket=null!=this._url?So.makeFromBucketSpec(this._url,i):Eg(i,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(i){Ym("time",0,Number.POSITIVE_INFINITY,i),this._maxUploadRetryTime=i}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(i){Ym("time",0,Number.POSITIVE_INFINITY,i),this._maxOperationRetryTime=i}_getAuthToken(){var i=this;return(0,Dd.Z)(function*(){if(i._overrideAuthToken)return i._overrideAuthToken;const t=i._authProvider.getImmediate({optional:!0});if(t){const l=yield t.getToken();if(null!==l)return l.accessToken}return null})()}_getAppCheckToken(){var i=this;return(0,Dd.Z)(function*(){const t=i._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(i=>i.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(i){return new ic(this,i)}_makeRequest(i,t,l,d,m=!0){if(this._deleted)return new xy(Km());{const I=function Md(r,i,t,l,d,m,I=!0){const k=Zm(r.urlParams),V=r.url+k,Y=Object.assign({},r.headers);return function L0(r,i){i&&(r["X-Firebase-GMPID"]=i)}(Y,i),function ky(r,i){null!==i&&i.length>0&&(r.Authorization="Firebase "+i)}(Y,t),function Fy(r,i){r["X-Firebase-Storage-Version"]="webjs/"+(i??"AppManager")}(Y,m),function Ul(r,i){null!==i&&(r["X-Firebase-AppCheck"]=i)}(Y,l),new Lf(V,r.method,Y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,d,I)}(i,this._appId,l,d,t,this._firebaseVersion,m);return this._requests.add(I),I.getPromise().then(()=>this._requests.delete(I),()=>this._requests.delete(I)),I}}makeRequestWithTokens(i,t){var l=this;return(0,Dd.Z)(function*(){const[d,m]=yield Promise.all([l._getAuthToken(),l._getAppCheckToken()]);return l._makeRequest(i,t,d,m).getPromise()})()}}const Zy="@firebase/storage";function Xy(r,i){return K0(r=(0,pe.m9)(r),i)}function zf(r,{instanceIdentifier:i}){const t=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),d=r.getProvider("app-check-internal");return new zh(t,l,d,i,Xu.SDK_VERSION)}!function Wf(){(0,Xu._registerComponent)(new xc.wA("storage",zf,"PUBLIC").setMultipleInstances(!0)),(0,Xu.registerVersion)(Zy,"0.11.2",""),(0,Xu.registerVersion)(Zy,"0.11.2","esm2017")}();class oc{constructor(i,t,l){this._delegate=i,this.task=t,this.ref=l}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class h_{constructor(i,t){this._delegate=i,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oc(this._delegate.snapshot,this,this._ref)}then(i,t){return this._delegate.then(l=>{if(i)return i(new oc(l,this,this._ref))},t)}on(i,t,l,d){let m;return t&&(m="function"==typeof t?I=>t(new oc(I,this,this._ref)):{next:t.next?I=>t.next(new oc(I,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(i,m,l||void 0,d||void 0)}}class ac{constructor(i,t){this._delegate=i,this._service=t}get prefixes(){return this._delegate.prefixes.map(i=>new Ga(i,this._service))}get items(){return this._delegate.items.map(i=>new Ga(i,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ga{constructor(i,t){this._delegate=i,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(i){const t=function d_(r,i){return vg(r,i)}(this._delegate,i);return new Ga(t,this.storage)}get root(){return new Ga(this._delegate.root,this.storage)}get parent(){const i=this._delegate.parent;return null==i?null:new Ga(i,this.storage)}put(i,t){return this._throwIfRoot("put"),new h_(function c_(r,i,t){return function z0(r,i,t){return r._throwIfRoot("uploadBytesResumable"),new mg(r,new Iu(i),t)}(r=(0,pe.m9)(r),i,t)}(this._delegate,i,t),this)}putString(i,t=nl.RAW,l){this._throwIfRoot("putString");const d=Qm(t,i),m=Object.assign({},l);return null==m.contentType&&null!=d.contentType&&(m.contentType=d.contentType),new h_(new mg(this._delegate,new Iu(d.data,!0),m),this)}listAll(){return function Qy(r){return function $h(r){const i={prefixes:[],items:[]};return _g(r,i).then(()=>i)}(r=(0,pe.m9)(r))}(this._delegate).then(i=>new ac(i,this.storage))}list(i){return function Dg(r,i){return jf(r=(0,pe.m9)(r),i)}(this._delegate,i||void 0).then(t=>new ac(t,this.storage))}getMetadata(){return function Z0(r){return function yg(r){r._throwIfRoot("getMetadata");const i=dg(r.storage,r._location,El());return r.storage.makeRequestWithTokens(i,il)}(r=(0,pe.m9)(r))}(this._delegate)}updateMetadata(i){return function Tu(r,i){return function Hf(r,i){r._throwIfRoot("updateMetadata");const t=function s_(r,i,t,l){const m=Lc(i.fullServerUrl(),r.host,r._protocol),k=cg(t,l),Y=r.maxOperationRetryTime,ue=new nc(m,"PATCH",rl(r,l),Y);return ue.headers={"Content-Type":"application/json; charset=utf-8"},ue.body=k,ue.errorHandler=Fh(i),ue}(r.storage,r._location,i,El());return r.storage.makeRequestWithTokens(t,il)}(r=(0,pe.m9)(r),i)}(this._delegate,i)}getDownloadURL(){return function J0(r){return Va(r=(0,pe.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ig(r){return function u_(r){r._throwIfRoot("deleteObject");const i=function zy(r,i){const l=Lc(i.fullServerUrl(),r.host,r._protocol),k=new nc(l,"DELETE",function I(V,Y){},r.maxOperationRetryTime);return k.successCodes=[200,204],k.errorHandler=Fh(i),k}(r.storage,r._location);return r.storage.makeRequestWithTokens(i,il)}(r=(0,pe.m9)(r))}(this._delegate)}_throwIfRoot(i){if(""===this._delegate._location.path)throw Qo(i)}}class Kf{constructor(i,t){this.app=i,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(i){if(Gc(i))throw tc("ref() expected a child path but got a URL, use refFromURL instead.");return new Ga(Xy(this._delegate,i),this)}refFromURL(i){if(!Gc(i))throw tc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{So.makeFromUrl(i,this._delegate.host)}catch{throw tc("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ga(Xy(this._delegate,i),this)}setMaxUploadRetryTime(i){this._delegate.maxUploadRetryTime=i}setMaxOperationRetryTime(i){this._delegate.maxOperationRetryTime=i}useEmulator(i,t,l={}){!function Wh(r,i,t,l={}){!function q0(r,i,t,l={}){r.host=`${i}:${t}`,r._protocol="http";const{mockUserToken:d}=l;d&&(r._overrideAuthToken="string"==typeof d?d:(0,pe.Sg)(d,r.app.options.projectId))}(r,i,t,l)}(this._delegate,i,t,l)}}function Gc(r){return/^[A-Za-z]+:\/\//.test(r)}function lc(r,{instanceIdentifier:i}){const t=r.getProvider("app-compat").getImmediate(),l=r.getProvider("storage").getImmediate({identifier:i});return new Kf(t,l)}!function Cg(r){const i={TaskState:ea,TaskEvent:Uh,StringFormat:nl,Storage:Kf,Reference:Ga};r.INTERNAL.registerComponent(new xc.wA("storage-compat",lc,"PUBLIC").setServiceProps(i).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.3.2")}(Qu.Z);var Fd=G(6217),Hc=G(9260);function qf(r){const i=function p_(r){return new et.y(i=>{const t=I=>i.next(I);t(r.snapshot);const m=r.on("state_changed",t);return r.then(I=>{t(I),i.complete()},I=>{t(r.snapshot),(I=>{i.error(I)})(I)}),function(){m()}}).pipe(function wd(r,i=Qt.z){return(0,zn.e)((t,l)=>{let d=null,m=null,I=null;const k=()=>{if(d){d.unsubscribe(),d=null;const Y=m;m=null,l.next(Y)}};function V(){const Y=I+r,ue=i.now();if(ue<Y)return d=this.schedule(void 0,Y-ue),void l.add(d);k()}t.subscribe((0,vt.x)(l,Y=>{m=Y,I=i.now(),d||(d=i.schedule(V,r),l.add(d))},()=>{k(),l.complete()},void 0,()=>{m=d=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>i,percentageChanges:()=>i.pipe((0,tr.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Yf(r){return{getDownloadURL:()=>(0,_t.of)(void 0).pipe(gs.fc,(0,Pt.w)(()=>r.getDownloadURL()),gs.iC),getMetadata:()=>(0,_t.of)(void 0).pipe(gs.fc,(0,Pt.w)(()=>r.getMetadata()),gs.iC),delete:()=>(0,Ed.D)(r.delete()),child:i=>Yf(r.child(i)),updateMetadata:i=>(0,Ed.D)(r.updateMetadata(i)),put:(i,t)=>qf(r.put(i,t)),putString:(i,t,l)=>qf(r.putString(i,t,l)),list:i=>(0,Ed.D)(r.list(i)),listAll:()=>(0,Ed.D)(r.listAll())}}const Q0=new p.OlP("angularfire2.storageBucket"),g_=new p.OlP("angularfire2.storage.maxUploadRetryTime"),Ld=new p.OlP("angularfire2.storage.maxOperationRetryTime"),X0=new p.OlP("angularfire2.storage.use-emulator");let eb=(()=>{class r{constructor(t,l,d,m,I,k,V,Y,ue,Me){const Ne=(0,Ll.on)(t,I,l);this.storage=(0,Ll.cc)(`${Ne.name}.storage.${d}`,"AngularFireStorage",Ne.name,()=>{const Je=I.runOutsideAngular(()=>Ne.storage(d||void 0)),kt=ue;return kt&&Je.useEmulator(...kt),V&&Je.setMaxUploadRetryTime(V),Y&&Je.setMaxOperationRetryTime(Y),Je},[V,Y])}ref(t){return Yf(this.storage.ref(t))}refFromURL(t){return Yf(this.storage.refFromURL(t))}upload(t,l,d){return Yf(this.storage.ref(t)).put(l,d)}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(Ll.Dh),p.LFG(Ll.xv,8),p.LFG(Q0,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(gs.HU),p.LFG(g_,8),p.LFG(Ld,8),p.LFG(X0,8),p.LFG(Fd.nm,8))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),tv=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({}),r})(),nv=(()=>{class r{constructor(){Hc.Z.registerVersion("angularfire",gs.q4.full,"gcs-compat")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({providers:[eb],imports:[tv]}),r})();var rv=G(3101),iv=G(3099),sv=G(5026);G(9568);var Zf=G(1877);const Tg="@firebase/database";let Jf="";function ov(r){Jf=r}class m_{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,t){null==t?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,pe.Wl)(t))}get(i){const t=this.domStorage_.getItem(this.prefixedName_(i));return null==t?null:(0,pe.cI)(t)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class rb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,t){null==t?delete this.cache_[i]:this.cache_[i]=t}get(i){return(0,pe.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const Sg=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const i=window[r];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new m_(i)}}catch{}return new rb},$c=Sg("localStorage"),Qf=Sg("sessionStorage"),zc=new Zf.Yd("@firebase/database"),__=function(){let r=1;return function(){return r++}}(),Ag=function(r){const i=(0,pe.dS)(r),t=new pe.gQ;t.update(i);const l=t.digest();return pe.US.encodeByteArray(l)},Og=function(...r){let i="";for(let t=0;t<r.length;t++){const l=r[t];Array.isArray(l)||l&&"object"==typeof l&&"number"==typeof l.length?i+=Og.apply(null,l):i+="object"==typeof l?(0,pe.Wl)(l):l,i+=" "}return i};let Su=null,ib=!0;const Ud=function(r,i){(0,pe.hu)(!i||!0===r||!1===r,"Can't turn on custom loggers persistently."),!0===r?(zc.logLevel=Zf.in.VERBOSE,Su=zc.log.bind(zc),i&&Qf.set("logging_enabled",!0)):"function"==typeof r?Su=r:(Su=null,Qf.remove("logging_enabled"))},Lo=function(...r){if(!0===ib&&(ib=!1,null===Su&&!0===Qf.get("logging_enabled")&&Ud(!0)),Su){const i=Og.apply(null,r);Su(i)}},Bd=function(r){return function(...i){Lo(r,...i)}},Vd=function(...r){const i="FIREBASE INTERNAL ERROR: "+Og(...r);zc.error(i)},Bl=function(...r){const i=`FIREBASE FATAL ERROR: ${Og(...r)}`;throw zc.error(i),new Error(i)},Pi=function(...r){const i="FIREBASE WARNING: "+Og(...r);zc.warn(i)},no=function(r){return"number"==typeof r&&(r!=r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},wl="[MIN_NAME]",zi="[MAX_NAME]",au=function(r,i){if(r===i)return 0;if(r===wl||i===zi)return-1;if(i===wl||r===zi)return 1;{const t=Xf(r),l=Xf(i);return null!==t?null!==l?t-l==0?r.length-i.length:t-l:-1:null!==l?1:r<i?-1:1}},Yh=function(r,i){return r===i?0:r<i?-1:1},Vl=function(r,i){if(i&&r in i)return i[r];throw new Error("Missing required key ("+r+") in object: "+(0,pe.Wl)(i))},Wc=function(r){if("object"!=typeof r||null===r)return(0,pe.Wl)(r);const i=[];for(const l in r)i.push(l);i.sort();let t="{";for(let l=0;l<i.length;l++)0!==l&&(t+=","),t+=(0,pe.Wl)(i[l]),t+=":",t+=Wc(r[i[l]]);return t+="}",t},jd=function(r,i){const t=r.length;if(t<=i)return[r];const l=[];for(let d=0;d<t;d+=i)l.push(r.substring(d,d+i>t?t:d+i));return l};function as(r,i){for(const t in r)r.hasOwnProperty(t)&&i(t,r[t])}const Hd=function(r){(0,pe.hu)(!no(r),"Invalid JSON number");const l=1023;let d,m,I,k,V;0===r?(m=0,I=0,d=1/r==-1/0?1:0):(d=r<0,(r=Math.abs(r))>=Math.pow(2,1-l)?(k=Math.min(Math.floor(Math.log(r)/Math.LN2),l),m=k+l,I=Math.round(r*Math.pow(2,52-k)-Math.pow(2,52))):(m=0,I=Math.round(r/Math.pow(2,-1074))));const Y=[];for(V=52;V;V-=1)Y.push(I%2?1:0),I=Math.floor(I/2);for(V=11;V;V-=1)Y.push(m%2?1:0),m=Math.floor(m/2);Y.push(d?1:0),Y.reverse();const ue=Y.join("");let Me="";for(V=0;V<64;V+=8){let Ne=parseInt(ue.substr(V,8),2).toString(16);1===Ne.length&&(Ne="0"+Ne),Me+=Ne}return Me.toLowerCase()},av=new RegExp("^-?(0*)\\d{1,10}$"),Xf=function(r){if(av.test(r)){const i=Number(r);if(i>=-2147483648&&i<=2147483647)return i}return null},Yc=function(r){try{r()}catch(i){setTimeout(()=>{throw Pi("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},lv=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jh=function(r,i){const t=setTimeout(r,i);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Mg{constructor(i,t){this.appName_=i,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(l=>this.appCheck=l)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((t,l)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(t,l):t(null)},0)})}addTokenChangeListener(i){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(l=>l.addTokenListener(i))}notifyForInvalidToken(){Pi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class uv{constructor(i,t,l){this.appName_=i,this.firebaseOptions_=t,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(d=>this.auth_=d)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(t=>t&&"auth/token-not-initialized"===t.code?(Lo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,l)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(t,l):t(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(t=>t.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(t=>t.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pi(i)}}let $d=(()=>{class r{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return r.OWNER="owner",r})();const xg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kg="websocket",dv="long_polling";class ef{constructor(i,t,l,d,m=!1,I="",k=!1,V=!1){this.secure=t,this.namespace=l,this.webSocketOnly=d,this.nodeAdmin=m,this.persistenceKey=I,this.includeNamespaceInQueryParams=k,this.isUsingEmulator=V,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$c.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&$c.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Lg(r,i,t){let l;if((0,pe.hu)("string"==typeof i,"typeof type must == string"),(0,pe.hu)("object"==typeof t,"typeof params must == object"),i===kg)l=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else{if(i!==dv)throw new Error("Unknown connection type: "+i);l=(r.secure?"https://":"http://")+r.internalHost+"/.lp?"}(function Fg(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams})(r)&&(t.ns=r.namespace);const d=[];return as(t,(m,I)=>{d.push(m+"="+I)}),l+d.join("&")}class Ug{constructor(){this.counters_={}}incrementCounter(i,t=1){(0,pe.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=t}get(){return(0,pe.p$)(this.counters_)}}const tf={},nf={};function rf(r){const i=r.toString();return tf[i]||(tf[i]=new Ug),tf[i]}class rp{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,t){this.closeAfterResponse=i,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,t){for(this.pendingResponses[i]=t;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let d=0;d<l.length;++d)l[d]&&Yc(()=>{this.onMessage_(l[d])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Au{constructor(i,t,l,d,m,I,k){this.connId=i,this.repoInfo=t,this.applicationId=l,this.appCheckToken=d,this.authToken=m,this.transportSessionId=I,this.lastSessionId=k,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bd(i),this.stats_=rf(t),this.urlFn=V=>(this.appCheckToken&&(V.ac=this.appCheckToken),Lg(t,dv,V))}open(i,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rp(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(r){if((0,pe.Yr)()||"complete"===document.readyState)r();else{let i=!1;const t=function(){document.body?i||(i=!0,r()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jc((...m)=>{const[I,k,V,Y,ue]=m;if(this.incrementIncomingBytes_(m),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===I)this.id=k,this.password=V;else{if("close"!==I)throw new Error("Unrecognized command received: "+I);k?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(k,()=>{this.onClosed_()})):this.onClosed_()}},(...m)=>{const[I,k]=m;this.incrementIncomingBytes_(m),this.myPacketOrderer.handleResponse(I,k)},()=>{this.onClosed_()},this.urlFn);const l={start:"t"};l.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(l.cb=this.scriptTagHolder.uniqueCallbackIdentifier),l.v="5",this.transportSessionId&&(l.s=this.transportSessionId),this.lastSessionId&&(l.ls=this.lastSessionId),this.applicationId&&(l.p=this.applicationId),this.appCheckToken&&(l.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&xg.test(location.hostname)&&(l.r="f");const d=this.urlFn(l);this.log_("Connecting via long-poll to "+d),this.scriptTagHolder.addTag(d,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Au.forceAllow_=!0}static forceDisallow(){Au.forceDisallow_=!0}static isAvailable(){return!((0,pe.Yr)()||!Au.forceAllow_&&(Au.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const t=(0,pe.Wl)(i);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const l=(0,pe.h$)(t),d=jd(l,1840);for(let m=0;m<d.length;m++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,d.length,d[m]),this.curSegmentNum++}addDisconnectPingFrame(i,t){if((0,pe.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const l={dframe:"t"};l.id=i,l.pw=t,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const t=(0,pe.Wl)(i).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Jc{constructor(i,t,l,d){if(this.onDisconnect=l,this.urlFn=d,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,pe.Yr)())this.commandCB=i,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=__(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Jc.createIFrame_();let m="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(m='<script>document.domain="'+document.domain+'";<\/script>');const I="<html><body>"+m+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(I),this.myIFrame.doc.close()}catch(k){Lo("frame writing exception"),k.stack&&Lo(k.stack),Lo(k)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||Lo("No IE domain setting required")}catch{const l=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,t){for(this.myID=i,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let t=this.urlFn(i),l="",d=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+l.length<=1870;){const I=this.pendingSegs.shift();l=l+"&seg"+d+"="+I.seg+"&ts"+d+"="+I.ts+"&d"+d+"="+I.d,d++}return t+=l,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(i,t,l){this.pendingSegs.push({seg:i,ts:t,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(i,t){this.outstandingRequests.add(t);const l=()=>{this.outstandingRequests.delete(t),this.newRequest_()},d=setTimeout(l,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(d),l()})}addTag(i,t){(0,pe.Yr)()?this.doNodeLongPoll(i,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=i,l.onload=l.onreadystatechange=function(){const d=l.readyState;(!d||"loaded"===d||"complete"===d)&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),t())},l.onerror=()=>{Lo("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}let op=null;typeof MozWebSocket<"u"?op=MozWebSocket:typeof WebSocket<"u"&&(op=WebSocket);let lu=(()=>{class r{constructor(t,l,d,m,I,k,V){this.connId=t,this.applicationId=d,this.appCheckToken=m,this.authToken=I,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bd(this.connId),this.stats_=rf(l),this.connURL=r.connectionURL_(l,k,V,m,d),this.nodeAdmin=l.nodeAdmin}static connectionURL_(t,l,d,m,I){const k={v:"5"};return!(0,pe.Yr)()&&typeof location<"u"&&location.hostname&&xg.test(location.hostname)&&(k.r="f"),l&&(k.s=l),d&&(k.ls=d),m&&(k.ac=m),I&&(k.p=I),Lg(t,kg,k)}open(t,l){this.onDisconnect=l,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$c.set("previous_websocket_failure",!0);try{let d;if((0,pe.Yr)()){d={headers:{"User-Agent":`Firebase/5/${Jf}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const I=process.env,k=0===this.connURL.indexOf("wss://")?I.HTTPS_PROXY||I.https_proxy:I.HTTP_PROXY||I.http_proxy;k&&(d.proxy={origin:k})}this.mySock=new op(this.connURL,[],d)}catch(d){this.log_("Error instantiating WebSocket.");const m=d.message||d.data;return m&&this.log_(m),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=d=>{this.handleIncomingFrame(d)},this.mySock.onerror=d=>{this.log_("WebSocket error.  Closing connection.");const m=d.message||d.data;m&&this.log_(m),this.onClosed_()}}start(){}static forceDisallow(){r.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const d=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);d&&d.length>1&&parseFloat(d[1])<4.4&&(t=!0)}return!t&&null!==op&&!r.forceDisallow_}static previouslyFailed(){return $c.isInMemoryStorage||!0===$c.get("previous_websocket_failure")}markConnectionHealthy(){$c.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const l=this.frames.join("");this.frames=null;const d=(0,pe.cI)(l);this.onMessage(d)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,pe.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const l=Number(t);if(!isNaN(l))return this.handleNewFrameCount_(l),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const l=t.data;if(this.bytesReceived+=l.length,this.stats_.incrementCounter("bytes_received",l.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(l);else{const d=this.extractFrameCount_(l);null!==d&&this.appendFrame_(d)}}send(t){this.resetKeepAlive();const l=(0,pe.Wl)(t);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const d=jd(l,16384);d.length>1&&this.sendString_(String(d.length));for(let m=0;m<d.length;m++)this.sendString_(d[m])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(l){this.log_("Exception thrown from WebSocket.send():",l.message||l.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return r.responsesRequiredToBeHealthy=2,r.healthyTimeout=3e4,r})(),Er=(()=>{class r{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Au,lu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const l=lu&&lu.isAvailable();let d=l&&!lu.previouslyFailed();if(t.webSocketOnly&&(l||Pi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0),d)this.transports_=[lu];else{const m=this.transports_=[];for(const I of r.ALL_TRANSPORTS)I&&I.isAvailable()&&m.push(I);r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return r.globalTransportInitialized_=!1,r})();class vv{constructor(i,t,l,d,m,I,k,V,Y,ue){this.id=i,this.repoInfo_=t,this.applicationId_=l,this.appCheckToken_=d,this.authToken_=m,this.onMessage_=I,this.onReady_=k,this.onDisconnect_=V,this.onKill_=Y,this.lastSessionId=ue,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bd("c:"+this.id+":"),this.transportManager_=new Er(t),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,l)},Math.floor(0));const d=i.healthyTimeout||0;d>0&&(this.healthyTimeout_=Jh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(d)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return t=>{i===this.conn_?this.onConnectionLost_(t):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return t=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(t):i===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const t=i.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const t=Vl("t",i),l=Vl("d",i);if("c"===t)this.onSecondaryControl_(l);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(l)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const t=Vl("t",i),l=Vl("d",i);"c"===t?this.onControl_(l):"d"===t&&this.onDataMessage_(l)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const t=Vl("t",i);if("d"in i){const l=i.d;if("h"===t){const d=Object.assign({},l);this.repoInfo_.isUsingEmulator&&(d.h=this.repoInfo_.host),this.onHandshake_(d)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let d=0;d<this.pendingDataMessages.length;++d)this.onDataMessage_(this.pendingDataMessages[d]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(l):"r"===t?this.onReset_(l):"e"===t?Vd("Server Error: "+l):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vd("Unknown control packet command: "+t)}}onHandshake_(i){const t=i.ts,l=i.v,d=i.h;this.sessionId=i.s,this.repoInfo_.host=d,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==l&&Pi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,l),Jh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,t){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($c.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class I_{put(i,t,l,d){}merge(i,t,l,d){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,t,l){}onDisconnectMerge(i,t,l){}onDisconnectCancel(i,t){}reportStats(i){}}class qi{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,pe.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...t){if(Array.isArray(this.listeners_[i])){const l=[...this.listeners_[i]];for(let d=0;d<l.length;d++)l[d].callback.apply(l[d].context,t)}}on(i,t,l){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:t,context:l});const d=this.getInitialEvent(i);d&&t.apply(l,d)}off(i,t,l){this.validateEventType_(i);const d=this.listeners_[i]||[];for(let m=0;m<d.length;m++)if(d[m].callback===t&&(!l||l===d[m].context))return void d.splice(m,1)}validateEventType_(i){(0,pe.hu)(this.allowedEvents_.find(t=>t===i),"Unknown event: "+i)}}class Qc extends qi{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,pe.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qc}getInitialEvent(i){return(0,pe.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}const ab=32,js=768;class Di{constructor(i,t){if(void 0===t){this.pieces_=i.split("/");let l=0;for(let d=0;d<this.pieces_.length;d++)this.pieces_[d].length>0&&(this.pieces_[l]=this.pieces_[d],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=t}toString(){let i="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(i+="/"+this.pieces_[t]);return i||"/"}}function Ii(){return new Di("")}function Pr(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Xc(r){return r.pieces_.length-r.pieceNum_}function Gi(r){let i=r.pieceNum_;return i<r.pieces_.length&&i++,new Di(r.pieces_,i)}function ap(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function lp(r,i=0){return r.pieces_.slice(r.pieceNum_+i)}function bv(r){if(r.pieceNum_>=r.pieces_.length)return null;const i=[];for(let t=r.pieceNum_;t<r.pieces_.length-1;t++)i.push(r.pieces_[t]);return new Di(i,0)}function hi(r,i){const t=[];for(let l=r.pieceNum_;l<r.pieces_.length;l++)t.push(r.pieces_[l]);if(i instanceof Di)for(let l=i.pieceNum_;l<i.pieces_.length;l++)t.push(i.pieces_[l]);else{const l=i.split("/");for(let d=0;d<l.length;d++)l[d].length>0&&t.push(l[d])}return new Di(t,0)}function or(r){return r.pieceNum_>=r.pieces_.length}function Xi(r,i){const t=Pr(r),l=Pr(i);if(null===t)return i;if(t===l)return Xi(Gi(r),Gi(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+r+")")}function sf(r,i){const t=lp(r,0),l=lp(i,0);for(let d=0;d<t.length&&d<l.length;d++){const m=au(t[d],l[d]);if(0!==m)return m}return t.length===l.length?0:t.length<l.length?-1:1}function Yg(r,i){if(Xc(r)!==Xc(i))return!1;for(let t=r.pieceNum_,l=i.pieceNum_;t<=r.pieces_.length;t++,l++)if(r.pieces_[t]!==i.pieces_[l])return!1;return!0}function ro(r,i){let t=r.pieceNum_,l=i.pieceNum_;if(Xc(r)>Xc(i))return!1;for(;t<r.pieces_.length;){if(r.pieces_[t]!==i.pieces_[l])return!1;++t,++l}return!0}class dc{constructor(i,t){this.errorPrefix_=t,this.parts_=lp(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=(0,pe.ug)(this.parts_[l]);Kd(this)}}function Kd(r){if(r.byteLength_>js)throw new Error(r.errorPrefix_+"has a key path longer than "+js+" bytes ("+r.byteLength_+").");if(r.parts_.length>ab)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ab+") or object contains a cycle "+uu(r))}function uu(r){return 0===r.parts_.length?"":"in property '"+r.parts_.join(".")+"'"}class C_ extends qi{constructor(){let i,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",i="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",i="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",i="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const l=!document[i];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}static getInstance(){return new C_}getInitialEvent(i){return(0,pe.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const qd=1e3;let up,hc=(()=>{class r extends I_{constructor(t,l,d,m,I,k,V,Y){if(super(),this.repoInfo_=t,this.applicationId_=l,this.onDataUpdate_=d,this.onConnectStatus_=m,this.onServerInfoUpdate_=I,this.authTokenProvider_=k,this.appCheckTokenProvider_=V,this.authOverride_=Y,this.id=r.nextPersistentConnectionId_++,this.log_=Bd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Y&&!(0,pe.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");C_.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Qc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,l,d){const m=++this.requestNumber_,I={r:m,a:t,b:l};this.log_((0,pe.Wl)(I)),(0,pe.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(I),d&&(this.requestCBHash_[m]=d)}get(t){this.initConnection_();const l=new pe.BH,m={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:k=>{const V=k.d;"ok"===k.s?l.resolve(V):l.reject(V)}};return this.outstandingGets_.push(m),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),l.promise}listen(t,l,d,m){this.initConnection_();const I=t._queryIdentifier,k=t._path.toString();this.log_("Listen called for "+k+" "+I),this.listens.has(k)||this.listens.set(k,new Map),(0,pe.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,pe.hu)(!this.listens.get(k).has(I),"listen() called twice for same path/queryId.");const V={onComplete:m,hashFn:l,query:t,tag:d};this.listens.get(k).set(I,V),this.connected_&&this.sendListen_(V)}sendGet_(t){const l=this.outstandingGets_[t];this.sendRequest("g",l.request,d=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),l.onComplete&&l.onComplete(d)})}sendListen_(t){const l=t.query,d=l._path.toString(),m=l._queryIdentifier;this.log_("Listen on "+d+" for "+m);const I={p:d};t.tag&&(I.q=l._queryObject,I.t=t.tag),I.h=t.hashFn(),this.sendRequest("q",I,V=>{const Y=V.d,ue=V.s;r.warnOnListenWarnings_(Y,l),(this.listens.get(d)&&this.listens.get(d).get(m))===t&&(this.log_("listen response",V),"ok"!==ue&&this.removeListen_(d,m),t.onComplete&&t.onComplete(ue,Y))})}static warnOnListenWarnings_(t,l){if(t&&"object"==typeof t&&(0,pe.r3)(t,"w")){const d=(0,pe.DV)(t,"w");if(Array.isArray(d)&&~d.indexOf("no_index")){const m='".indexOn": "'+l._queryParams.getIndex().toString()+'"',I=l._path.toString();Pi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${m} at ${I} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,pe.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,l=(0,pe.w9)(t)?"auth":"gauth",d={cred:t};null===this.authOverride_?d.noauth=!0:"object"==typeof this.authOverride_&&(d.authvar=this.authOverride_),this.sendRequest(l,d,m=>{const I=m.s,k=m.d||"error";this.authToken_===t&&("ok"===I?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(I,k))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const l=t.s,d=t.d||"error";"ok"===l?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(l,d)})}unlisten(t,l){const d=t._path.toString(),m=t._queryIdentifier;this.log_("Unlisten called for "+d+" "+m),(0,pe.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(d,m)&&this.connected_&&this.sendUnlisten_(d,m,t._queryObject,l)}sendUnlisten_(t,l,d,m){this.log_("Unlisten on "+t+" for "+l);const I={p:t};m&&(I.q=d,I.t=m),this.sendRequest("n",I)}onDisconnectPut(t,l,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,l,d):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:l,onComplete:d})}onDisconnectMerge(t,l,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,l,d):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:l,onComplete:d})}onDisconnectCancel(t,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:l})}sendOnDisconnect_(t,l,d,m){const I={p:l,d};this.log_("onDisconnect "+t,I),this.sendRequest(t,I,k=>{m&&setTimeout(()=>{m(k.s,k.d)},Math.floor(0))})}put(t,l,d,m){this.putInternal("p",t,l,d,m)}merge(t,l,d,m){this.putInternal("m",t,l,d,m)}putInternal(t,l,d,m,I){this.initConnection_();const k={p:l,d};void 0!==I&&(k.h=I),this.outstandingPuts_.push({action:t,request:k,onComplete:m}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+l)}sendPut_(t){const l=this.outstandingPuts_[t].action,d=this.outstandingPuts_[t].request,m=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(l,d,I=>{this.log_(l+" response",I),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),m&&m(I.s,I.d)})}reportStats(t){if(this.connected_){const l={c:t};this.log_("reportStats",l),this.sendRequest("s",l,d=>{"ok"!==d.s&&this.log_("reportStats","Error sending stats: "+d.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,pe.Wl)(t));const l=t.r,d=this.requestCBHash_[l];d&&(delete this.requestCBHash_[l],d(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,l){this.log_("handleServerMessage",t,l),"d"===t?this.onDataUpdate_(l.p,l.d,!1,l.t):"m"===t?this.onDataUpdate_(l.p,l.d,!0,l.t):"c"===t?this.onListenRevoked_(l.p,l.q):"ac"===t?this.onAuthRevoked_(l.s,l.d):"apc"===t?this.onAppCheckRevoked_(l.s,l.d):"sd"===t?this.onSecurityDebugPacket_(l):Vd("Unrecognized action received from server: "+(0,pe.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,l){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=l,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,pe.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let l=Math.max(0,this.reconnectDelay_-t);l=Math.random()*l,this.log_("Trying to reconnect in "+l+"ms"),this.scheduleConnect_(l),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Dd.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const l=t.onDataMessage_.bind(t),d=t.onReady_.bind(t),m=t.onRealtimeDisconnect_.bind(t),I=t.id+":"+r.nextConnectionId_++,k=t.lastSessionId;let V=!1,Y=null;const ue=function(){Y?Y.close():(V=!0,m())};t.realtime_={close:ue,sendRequest:function(Je){(0,pe.hu)(Y,"sendRequest call when we're not connected not allowed."),Y.sendRequest(Je)}};const Ne=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Je,kt]=yield Promise.all([t.authTokenProvider_.getToken(Ne),t.appCheckTokenProvider_.getToken(Ne)]);V?Lo("getToken() completed but was canceled"):(Lo("getToken() completed. Creating connection."),t.authToken_=Je&&Je.accessToken,t.appCheckToken_=kt&&kt.token,Y=new vv(I,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,l,d,m,Yt=>{Pi(Yt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},k))}catch(Je){t.log_("Failed to get token: "+Je),V||(t.repoInfo_.nodeAdmin&&Pi(Je),ue())}}})()}interrupt(t){Lo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Lo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,pe.xb)(this.interruptReasons_)&&(this.reconnectDelay_=qd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const l=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:l})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const l=this.outstandingPuts_[t];l&&"h"in l.request&&l.queued&&(l.onComplete&&l.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,l){let d;d=l?l.map(I=>Wc(I)).join("$"):"default";const m=this.removeListen_(t,d);m&&m.onComplete&&m.onComplete("permission_denied")}removeListen_(t,l){const d=new Di(t).toString();let m;if(this.listens.has(d)){const I=this.listens.get(d);m=I.get(l),I.delete(l),0===I.size&&this.listens.delete(d)}else m=void 0;return m}onAuthRevoked_(t,l){Lo("Auth token revoked: "+t+"/"+l),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,l){Lo("App check token revoked: "+t+"/"+l),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const l of t.values())this.sendListen_(l);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let l="js";(0,pe.Yr)()&&(l=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+l+"."+Jf.replace(/\./g,"-")]=1,(0,pe.uI)()?t["framework.cordova"]=1:(0,pe.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qc.getInstance().currentlyOnline();return(0,pe.xb)(this.interruptReasons_)&&t}}return r.nextPersistentConnectionId_=0,r.nextConnectionId_=0,r})();class wr{constructor(i,t){this.name=i,this.node=t}static Wrap(i,t){return new wr(i,t)}}class Zd{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,t){const l=new wr(wl,i),d=new wr(wl,t);return 0!==this.compare(l,d)}minPost(){return wr.MIN}}class T_ extends Zd{static get __EMPTY_NODE(){return up}static set __EMPTY_NODE(i){up=i}compare(i,t){return au(i.name,t.name)}isDefinedOn(i){throw(0,pe.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,t){return!1}minPost(){return wr.MIN}maxPost(){return new wr(zi,up)}makePost(i,t){return(0,pe.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new wr(i,up)}toString(){return".key"}}const Dl=new T_;class Jd{constructor(i,t,l,d,m=null){this.isReverse_=d,this.resultGenerator_=m,this.nodeStack_=[];let I=1;for(;!i.isEmpty();)if(I=t?l(i.key,t):1,d&&(I*=-1),I<0)i=this.isReverse_?i.left:i.right;else{if(0===I){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,i=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let td,Il=(()=>{class r{constructor(t,l,d,m,I){this.key=t,this.value=l,this.color=d??r.RED,this.left=m??Da.EMPTY_NODE,this.right=I??Da.EMPTY_NODE}copy(t,l,d,m,I){return new r(t??this.key,l??this.value,d??this.color,m??this.left,I??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,l,d){let m=this;const I=d(t,m.key);return m=I<0?m.copy(null,null,null,m.left.insert(t,l,d),null):0===I?m.copy(null,l,null,null,null):m.copy(null,null,null,null,m.right.insert(t,l,d)),m.fixUp_()}removeMin_(){if(this.left.isEmpty())return Da.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,l){let d,m;if(d=this,l(t,d.key)<0)!d.left.isEmpty()&&!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.remove(t,l),null);else{if(d.left.isRed_()&&(d=d.rotateRight_()),!d.right.isEmpty()&&!d.right.isRed_()&&!d.right.left.isRed_()&&(d=d.moveRedRight_()),0===l(t,d.key)){if(d.right.isEmpty())return Da.EMPTY_NODE;m=d.right.min_(),d=d.copy(m.key,m.value,null,null,d.right.removeMin_())}d=d.copy(null,null,null,null,d.right.remove(t,l))}return d.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),l=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,l)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return r.RED=!0,r.BLACK=!1,r})();class Da{constructor(i,t=Da.EMPTY_NODE){this.comparator_=i,this.root_=t}insert(i,t){return new Da(this.comparator_,this.root_.insert(i,t,this.comparator_).copy(null,null,Il.BLACK,null,null))}remove(i){return new Da(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,Il.BLACK,null,null))}get(i){let t,l=this.root_;for(;!l.isEmpty();){if(t=this.comparator_(i,l.key),0===t)return l.value;t<0?l=l.left:t>0&&(l=l.right)}return null}getPredecessorKey(i){let t,l=this.root_,d=null;for(;!l.isEmpty();){if(t=this.comparator_(i,l.key),0===t){if(l.left.isEmpty())return d?d.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}t<0?l=l.left:t>0&&(d=l,l=l.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new Jd(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,t){return new Jd(this.root_,i,this.comparator_,!1,t)}getReverseIteratorFrom(i,t){return new Jd(this.root_,i,this.comparator_,!0,t)}getReverseIterator(i){return new Jd(this.root_,null,this.comparator_,!0,i)}}function S_(r,i){return au(r.name,i.name)}function cp(r,i){return au(r,i)}Da.EMPTY_NODE=new class ed{copy(i,t,l,d,m){return this}insert(i,t,l){return new Il(i,t,null)}remove(i,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const dp=function(r){return"number"==typeof r?"number:"+Hd(r):"string:"+r},hp=function(r){if(r.isLeafNode()){const i=r.val();(0,pe.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,pe.r3)(i,".sv"),"Priority must be a string or number.")}else(0,pe.hu)(r===td||r.isEmpty(),"priority of unexpected type.");(0,pe.hu)(r===td||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let A_,Dv,fp,Ru=(()=>{class r{constructor(t,l=r.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=l,this.lazyHash_=null,(0,pe.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),hp(this.priorityNode_)}static set __childrenNodeConstructor(t){A_=t}static get __childrenNodeConstructor(){return A_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new r(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return or(t)?this:".priority"===Pr(t)?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,l){return null}updateImmediateChild(t,l){return".priority"===t?this.updatePriority(l):l.isEmpty()&&".priority"!==t?this:r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,l).updatePriority(this.priorityNode_)}updateChild(t,l){const d=Pr(t);return null===d?l:l.isEmpty()&&".priority"!==d?this:((0,pe.hu)(".priority"!==d||1===Xc(t),".priority must be the last token in a path"),this.updateImmediateChild(d,r.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gi(t),l)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,l){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dp(this.priorityNode_.val())+":");const l=typeof this.value_;t+=l+":",t+="number"===l?Hd(this.value_):this.value_,this.lazyHash_=Ag(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===r.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof r.__childrenNodeConstructor?-1:((0,pe.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const l=typeof t.value_,d=typeof this.value_,m=r.VALUE_TYPE_ORDER.indexOf(l),I=r.VALUE_TYPE_ORDER.indexOf(d);return(0,pe.hu)(m>=0,"Unknown leaf type: "+l),(0,pe.hu)(I>=0,"Unknown leaf type: "+d),m===I?"object"===d?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:I-m}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return r.VALUE_TYPE_ORDER=["object","boolean","number","string"],r})();const fi=new class pp extends Zd{compare(i,t){const l=i.node.getPriority(),d=t.node.getPriority(),m=l.compareTo(d);return 0===m?au(i.name,t.name):m}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,t){return!i.getPriority().equals(t.getPriority())}minPost(){return wr.MIN}maxPost(){return new wr(zi,new Ru("[PRIORITY-POST]",fp))}makePost(i,t){const l=Dv(i);return new wr(t,new Ru("[PRIORITY-POST]",l))}toString(){return".priority"}},gp=Math.log(2);class ub{constructor(i){this.count=parseInt(Math.log(i+1)/gp,10),this.current_=this.count-1;const d=(m=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&d}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const fc=function(r,i,t,l){r.sort(i);const d=function(V,Y){const ue=Y-V;let Me,Ne;if(0===ue)return null;if(1===ue)return Me=r[V],Ne=t?t(Me):Me,new Il(Ne,Me.node,Il.BLACK,null,null);{const Je=parseInt(ue/2,10)+V,kt=d(V,Je),Yt=d(Je+1,Y);return Me=r[Je],Ne=t?t(Me):Me,new Il(Ne,Me.node,Il.BLACK,kt,Yt)}},k=function(V){let Y=null,ue=null,Me=r.length;const Ne=function(kt,Yt){const pn=Me-kt,Kn=Me;Me-=kt;const qn=d(pn+1,Kn),ur=r[pn],Jn=t?t(ur):ur;Je(new Il(Jn,ur.node,Yt,null,qn))},Je=function(kt){Y?(Y.left=kt,Y=kt):(ue=kt,Y=kt)};for(let kt=0;kt<V.count;++kt){const Yt=V.nextBitIsOne(),pn=Math.pow(2,V.count-(kt+1));Yt?Ne(pn,Il.BLACK):(Ne(pn,Il.BLACK),Ne(pn,Il.RED))}return ue}(new ub(r.length));return new Da(l||i,k)};let Cv;const mp={};class Gl{constructor(i,t){this.indexes_=i,this.indexSet_=t}static get Default(){return(0,pe.hu)(mp&&fi,"ChildrenNode.ts has not been loaded"),Cv=Cv||new Gl({".priority":mp},{".priority":fi}),Cv}get(i){const t=(0,pe.DV)(this.indexes_,i);if(!t)throw new Error("No index defined for "+i);return t instanceof Da?t:null}hasIndex(i){return(0,pe.r3)(this.indexSet_,i.toString())}addIndex(i,t){(0,pe.hu)(i!==Dl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let d=!1;const m=t.getIterator(wr.Wrap);let k,I=m.getNext();for(;I;)d=d||i.isDefinedOn(I.node),l.push(I),I=m.getNext();k=d?fc(l,i.getCompare()):mp;const V=i.toString(),Y=Object.assign({},this.indexSet_);Y[V]=i;const ue=Object.assign({},this.indexes_);return ue[V]=k,new Gl(ue,Y)}addToIndexes(i,t){const l=(0,pe.UI)(this.indexes_,(d,m)=>{const I=(0,pe.DV)(this.indexSet_,m);if((0,pe.hu)(I,"Missing index implementation for "+m),d===mp){if(I.isDefinedOn(i.node)){const k=[],V=t.getIterator(wr.Wrap);let Y=V.getNext();for(;Y;)Y.name!==i.name&&k.push(Y),Y=V.getNext();return k.push(i),fc(k,I.getCompare())}return mp}{const k=t.get(i.name);let V=d;return k&&(V=V.remove(new wr(i.name,k))),V.insert(i,i.node)}});return new Gl(l,this.indexSet_)}removeFromIndexes(i,t){const l=(0,pe.UI)(this.indexes_,d=>{if(d===mp)return d;{const m=t.get(i.name);return m?d.remove(new wr(i.name,m)):d}});return new Gl(l,this.indexSet_)}}let lf,lr=(()=>{class r{constructor(t,l,d){this.children_=t,this.priorityNode_=l,this.indexMap_=d,this.lazyHash_=null,this.priorityNode_&&hp(this.priorityNode_),this.children_.isEmpty()&&(0,pe.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return lf||(lf=new r(new Da(cp),null,Gl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lf}updatePriority(t){return this.children_.isEmpty()?this:new r(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const l=this.children_.get(t);return null===l?lf:l}}getChild(t){const l=Pr(t);return null===l?this:this.getImmediateChild(l).getChild(Gi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,l){if((0,pe.hu)(l,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(l);{const d=new wr(t,l);let m,I;l.isEmpty()?(m=this.children_.remove(t),I=this.indexMap_.removeFromIndexes(d,this.children_)):(m=this.children_.insert(t,l),I=this.indexMap_.addToIndexes(d,this.children_));const k=m.isEmpty()?lf:this.priorityNode_;return new r(m,k,I)}}updateChild(t,l){const d=Pr(t);if(null===d)return l;{(0,pe.hu)(".priority"!==Pr(t)||1===Xc(t),".priority must be the last token in a path");const m=this.getImmediateChild(d).updateChild(Gi(t),l);return this.updateImmediateChild(d,m)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const l={};let d=0,m=0,I=!0;if(this.forEachChild(fi,(k,V)=>{l[k]=V.val(t),d++,I&&r.INTEGER_REGEXP_.test(k)?m=Math.max(m,Number(k)):I=!1}),!t&&I&&m<2*d){const k=[];for(const V in l)k[V]=l[V];return k}return t&&!this.getPriority().isEmpty()&&(l[".priority"]=this.getPriority().val()),l}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+dp(this.getPriority().val())+":"),this.forEachChild(fi,(l,d)=>{const m=d.hash();""!==m&&(t+=":"+l+":"+m)}),this.lazyHash_=""===t?"":Ag(t)}return this.lazyHash_}getPredecessorChildName(t,l,d){const m=this.resolveIndex_(d);if(m){const I=m.getPredecessorKey(new wr(t,l));return I?I.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const l=this.resolveIndex_(t);if(l){const d=l.minKey();return d&&d.name}return this.children_.minKey()}getFirstChild(t){const l=this.getFirstChildName(t);return l?new wr(l,this.children_.get(l)):null}getLastChildName(t){const l=this.resolveIndex_(t);if(l){const d=l.maxKey();return d&&d.name}return this.children_.maxKey()}getLastChild(t){const l=this.getLastChildName(t);return l?new wr(l,this.children_.get(l)):null}forEachChild(t,l){const d=this.resolveIndex_(t);return d?d.inorderTraversal(m=>l(m.name,m.node)):this.children_.inorderTraversal(l)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,l){const d=this.resolveIndex_(l);if(d)return d.getIteratorFrom(t,m=>m);{const m=this.children_.getIteratorFrom(t.name,wr.Wrap);let I=m.peek();for(;null!=I&&l.compare(I,t)<0;)m.getNext(),I=m.peek();return m}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,l){const d=this.resolveIndex_(l);if(d)return d.getReverseIteratorFrom(t,m=>m);{const m=this.children_.getReverseIteratorFrom(t.name,wr.Wrap);let I=m.peek();for(;null!=I&&l.compare(I,t)>0;)m.getNext(),I=m.peek();return m}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===uf?-1:0}withIndex(t){if(t===Dl||this.indexMap_.hasIndex(t))return this;{const l=this.indexMap_.addIndex(t,this.children_);return new r(this.children_,this.priorityNode_,l)}}isIndexed(t){return t===Dl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const l=t;if(this.getPriority().equals(l.getPriority())){if(this.children_.count()===l.children_.count()){const d=this.getIterator(fi),m=l.getIterator(fi);let I=d.getNext(),k=m.getNext();for(;I&&k;){if(I.name!==k.name||!I.node.equals(k.node))return!1;I=d.getNext(),k=m.getNext()}return null===I&&null===k}return!1}return!1}}resolveIndex_(t){return t===Dl?null:this.indexMap_.get(t.toString())}}return r.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,r})();const uf=new class Tv extends lr{constructor(){super(new Da(cp),lr.EMPTY_NODE,Gl.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return lr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wr,{MIN:{value:new wr(wl,lr.EMPTY_NODE)},MAX:{value:new wr(zi,uf)}}),T_.__EMPTY_NODE=lr.EMPTY_NODE,Ru.__childrenNodeConstructor=lr,function lb(r){td=r}(uf),function O_(r){fp=r}(uf);const _p=!0;function ms(r,i=null){if(null===r)return lr.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(i=r[".priority"]),(0,pe.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Ru(r,ms(i));if(r instanceof Array||!_p){let t=lr.EMPTY_NODE;return as(r,(l,d)=>{if((0,pe.r3)(r,l)&&"."!==l.substring(0,1)){const m=ms(d);(m.isLeafNode()||!m.isEmpty())&&(t=t.updateImmediateChild(l,m))}}),t.updatePriority(ms(i))}{const t=[];let l=!1;if(as(r,(I,k)=>{if("."!==I.substring(0,1)){const V=ms(k);V.isEmpty()||(l=l||!V.getPriority().isEmpty(),t.push(new wr(I,V)))}}),0===t.length)return lr.EMPTY_NODE;const m=fc(t,S_,I=>I.name,cp);if(l){const I=fc(t,fi.getCompare());return new lr(m,ms(i),new Gl({".priority":I},{".priority":fi}))}return new lr(m,ms(i),Gl.Default)}}!function Iv(r){Dv=r}(ms);class Jg extends Zd{constructor(i){super(),this.indexPath_=i,(0,pe.hu)(!or(i)&&".priority"!==Pr(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,t){const l=this.extractChild(i.node),d=this.extractChild(t.node),m=l.compareTo(d);return 0===m?au(i.name,t.name):m}makePost(i,t){const l=ms(i),d=lr.EMPTY_NODE.updateChild(this.indexPath_,l);return new wr(t,d)}maxPost(){const i=lr.EMPTY_NODE.updateChild(this.indexPath_,uf);return new wr(zi,i)}toString(){return lp(this.indexPath_,0).join("/")}}const vp=new class yp extends Zd{compare(i,t){const l=i.node.compareTo(t.node);return 0===l?au(i.name,t.name):l}isDefinedOn(i){return!0}indexedValueChanged(i,t){return!i.equals(t)}minPost(){return wr.MIN}maxPost(){return wr.MAX}makePost(i,t){const l=ms(i);return new wr(t,l)}toString(){return".value"}};function N_(r){return{type:"value",snapshotNode:r}}function Cl(r,i){return{type:"child_added",snapshotNode:i,childName:r}}function cf(r,i){return{type:"child_removed",snapshotNode:i,childName:r}}function df(r,i,t){return{type:"child_changed",snapshotNode:i,childName:r,oldSnap:t}}class M_{constructor(i){this.index_=i}updateChild(i,t,l,d,m,I){(0,pe.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");const k=i.getImmediateChild(t);return k.getChild(d).equals(l.getChild(d))&&k.isEmpty()===l.isEmpty()||(null!=I&&(l.isEmpty()?i.hasChild(t)?I.trackChildChange(cf(t,k)):(0,pe.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):k.isEmpty()?I.trackChildChange(Cl(t,l)):I.trackChildChange(df(t,l,k))),i.isLeafNode()&&l.isEmpty())?i:i.updateImmediateChild(t,l).withIndex(this.index_)}updateFullNode(i,t,l){return null!=l&&(i.isLeafNode()||i.forEachChild(fi,(d,m)=>{t.hasChild(d)||l.trackChildChange(cf(d,m))}),t.isLeafNode()||t.forEachChild(fi,(d,m)=>{if(i.hasChild(d)){const I=i.getImmediateChild(d);I.equals(m)||l.trackChildChange(df(d,m,I))}else l.trackChildChange(Cl(d,m))})),t.withIndex(this.index_)}updatePriority(i,t){return i.isEmpty()?lr.EMPTY_NODE:i.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nd{constructor(i){this.indexedFilter_=new M_(i.getIndex()),this.index_=i.getIndex(),this.startPost_=nd.getStartPost_(i),this.endPost_=nd.getEndPost_(i),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(i){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),i)<=0:this.index_.compare(this.getStartPost(),i)<0,l=this.endIsInclusive_?this.index_.compare(i,this.getEndPost())<=0:this.index_.compare(i,this.getEndPost())<0;return t&&l}updateChild(i,t,l,d,m,I){return this.matches(new wr(t,l))||(l=lr.EMPTY_NODE),this.indexedFilter_.updateChild(i,t,l,d,m,I)}updateFullNode(i,t,l){t.isLeafNode()&&(t=lr.EMPTY_NODE);let d=t.withIndex(this.index_);d=d.updatePriority(lr.EMPTY_NODE);const m=this;return t.forEachChild(fi,(I,k)=>{m.matches(new wr(I,k))||(d=d.updateImmediateChild(I,lr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,d,l)}updatePriority(i,t){return i}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(i){if(i.hasStart()){const t=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),t)}return i.getIndex().minPost()}static getEndPost_(i){if(i.hasEnd()){const t=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),t)}return i.getIndex().maxPost()}}class Sv{constructor(i){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const l=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?l<=0:l<0},this.withinEndPost=t=>{const l=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?l<=0:l<0},this.rangedFilter_=new nd(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft(),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}updateChild(i,t,l,d,m,I){return this.rangedFilter_.matches(new wr(t,l))||(l=lr.EMPTY_NODE),i.getImmediateChild(t).equals(l)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,t,l,d,m,I):this.fullLimitUpdateChild_(i,t,l,m,I)}updateFullNode(i,t,l){let d;if(t.isLeafNode()||t.isEmpty())d=lr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let m;d=lr.EMPTY_NODE.withIndex(this.index_),m=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let I=0;for(;m.hasNext()&&I<this.limit_;){const k=m.getNext();if(this.withinDirectionalStart(k)){if(!this.withinDirectionalEnd(k))break;d=d.updateImmediateChild(k.name,k.node),I++}}}else{let m;d=t.withIndex(this.index_),d=d.updatePriority(lr.EMPTY_NODE),m=this.reverse_?d.getReverseIterator(this.index_):d.getIterator(this.index_);let I=0;for(;m.hasNext();){const k=m.getNext();I<this.limit_&&this.withinDirectionalStart(k)&&this.withinDirectionalEnd(k)?I++:d=d.updateImmediateChild(k.name,lr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,d,l)}updatePriority(i,t){return i}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(i,t,l,d,m){let I;if(this.reverse_){const Me=this.index_.getCompare();I=(Ne,Je)=>Me(Je,Ne)}else I=this.index_.getCompare();const k=i;(0,pe.hu)(k.numChildren()===this.limit_,"");const V=new wr(t,l),Y=this.reverse_?k.getFirstChild(this.index_):k.getLastChild(this.index_),ue=this.rangedFilter_.matches(V);if(k.hasChild(t)){const Me=k.getImmediateChild(t);let Ne=d.getChildAfterChild(this.index_,Y,this.reverse_);for(;null!=Ne&&(Ne.name===t||k.hasChild(Ne.name));)Ne=d.getChildAfterChild(this.index_,Ne,this.reverse_);const Je=null==Ne?1:I(Ne,V);if(ue&&!l.isEmpty()&&Je>=0)return m?.trackChildChange(df(t,l,Me)),k.updateImmediateChild(t,l);{m?.trackChildChange(cf(t,Me));const Yt=k.updateImmediateChild(t,lr.EMPTY_NODE);return null!=Ne&&this.rangedFilter_.matches(Ne)?(m?.trackChildChange(Cl(Ne.name,Ne.node)),Yt.updateImmediateChild(Ne.name,Ne.node)):Yt}}return l.isEmpty()?i:ue&&I(Y,V)>=0?(null!=m&&(m.trackChildChange(cf(Y.name,Y.node)),m.trackChildChange(Cl(t,l))),k.updateImmediateChild(t,l).updateImmediateChild(Y.name,lr.EMPTY_NODE)):i}}class rd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,pe.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,pe.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,pe.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,pe.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,pe.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fi}copy(){const i=new rd;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.startAfterSet_=this.startAfterSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.endBeforeSet_=this.endBeforeSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function R_(r,i,t){const l=r.copy();return l.startSet_=!0,void 0===i&&(i=null),l.indexStartValue_=i,null!=t?(l.startNameSet_=!0,l.indexStartName_=t):(l.startNameSet_=!1,l.indexStartName_=""),l}function Ov(r,i,t){const l=r.copy();return l.endSet_=!0,void 0===i&&(i=null),l.indexEndValue_=i,void 0!==t?(l.endNameSet_=!0,l.indexEndName_=t):(l.endNameSet_=!1,l.indexEndName_=""),l}function Hl(r,i){const t=r.copy();return t.index_=i,t}function pc(r){const i={};if(r.isDefault())return i;let t;if(r.index_===fi?t="$priority":r.index_===vp?t="$value":r.index_===Dl?t="$key":((0,pe.hu)(r.index_ instanceof Jg,"Unrecognized index type!"),t=r.index_.toString()),i.orderBy=(0,pe.Wl)(t),r.startSet_){const l=r.startAfterSet_?"startAfter":"startAt";i[l]=(0,pe.Wl)(r.indexStartValue_),r.startNameSet_&&(i[l]+=","+(0,pe.Wl)(r.indexStartName_))}if(r.endSet_){const l=r.endBeforeSet_?"endBefore":"endAt";i[l]=(0,pe.Wl)(r.indexEndValue_),r.endNameSet_&&(i[l]+=","+(0,pe.Wl)(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?i.limitToFirst=r.limit_:i.limitToLast=r.limit_),i}function $l(r){const i={};if(r.startSet_&&(i.sp=r.indexStartValue_,r.startNameSet_&&(i.sn=r.indexStartName_),i.sin=!r.startAfterSet_),r.endSet_&&(i.ep=r.indexEndValue_,r.endNameSet_&&(i.en=r.indexEndName_),i.ein=!r.endBeforeSet_),r.limitSet_){i.l=r.limit_;let t=r.viewFrom_;""===t&&(t=r.isViewFromLeft()?"l":"r"),i.vf=t}return r.index_!==fi&&(i.i=r.index_.toString()),i}class ls extends I_{constructor(i,t,l,d){super(),this.repoInfo_=i,this.onDataUpdate_=t,this.authTokenProvider_=l,this.appCheckTokenProvider_=d,this.log_=Bd("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,t){return void 0!==t?"tag$"+t:((0,pe.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,t,l,d){const m=i._path.toString();this.log_("Listen called for "+m+" "+i._queryIdentifier);const I=ls.getListenId_(i,l),k={};this.listens_[I]=k;const V=pc(i._queryParams);this.restRequest_(m+".json",V,(Y,ue)=>{let Me=ue;if(404===Y&&(Me=null,Y=null),null===Y&&this.onDataUpdate_(m,Me,!1,l),(0,pe.DV)(this.listens_,I)===k){let Ne;Ne=Y?401===Y?"permission_denied":"rest_error:"+Y:"ok",d(Ne,null)}})}unlisten(i,t){const l=ls.getListenId_(i,t);delete this.listens_[l]}get(i){const t=pc(i._queryParams),l=i._path.toString(),d=new pe.BH;return this.restRequest_(l+".json",t,(m,I)=>{let k=I;404===m&&(k=null,m=null),null===m?(this.onDataUpdate_(l,k,!1,null),d.resolve(k)):d.reject(new Error(k))}),d.promise}refreshAuthToken(i){}restRequest_(i,t={},l){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([d,m])=>{d&&d.accessToken&&(t.auth=d.accessToken),m&&m.token&&(t.ac=m.token);const I=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,pe.xO)(t);this.log_("Sending REST request for "+I);const k=new XMLHttpRequest;k.onreadystatechange=()=>{if(l&&4===k.readyState){this.log_("REST Response for "+I+" received. status:",k.status,"response:",k.responseText);let V=null;if(k.status>=200&&k.status<300){try{V=(0,pe.cI)(k.responseText)}catch{Pi("Failed to parse JSON response for "+I+": "+k.responseText)}l(null,V)}else 401!==k.status&&404!==k.status&&Pi("Got unsuccessful REST response for "+I+" Status: "+k.status),l(k.status);l=null}},k.open("GET",I,!0),k.send()})}}class cb{constructor(){this.rootNode_=lr.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,t){this.rootNode_=this.rootNode_.updateChild(i,t)}}function bp(){return{value:null,children:new Map}}function sl(r,i,t){if(or(i))r.value=t,r.children.clear();else if(null!==r.value)r.value=r.value.updateChild(i,t);else{const l=Pr(i);r.children.has(l)||r.children.set(l,bp()),sl(r.children.get(l),i=Gi(i),t)}}function x_(r,i){if(or(i))return r.value=null,r.children.clear(),!0;if(null!==r.value){if(r.value.isLeafNode())return!1;{const t=r.value;return r.value=null,t.forEachChild(fi,(l,d)=>{sl(r,new Di(l),d)}),x_(r,i)}}if(r.children.size>0){const t=Pr(i);return i=Gi(i),r.children.has(t)&&x_(r.children.get(t),i)&&r.children.delete(t),0===r.children.size}return!0}function Qg(r,i,t){null!==r.value?t(i,r.value):function Nv(r,i){r.children.forEach((t,l)=>{i(l,t)})}(r,(l,d)=>{Qg(d,new Di(i.toString()+"/"+l),t)})}class Mv{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),t=Object.assign({},i);return this.last_&&as(this.last_,(l,d)=>{t[l]=t[l]-d}),this.last_=i,t}}class db{constructor(i,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Mv(i);const l=1e4+2e4*Math.random();Jh(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const i=this.statsListener_.get(),t={};let l=!1;as(i,(d,m)=>{m>0&&(0,pe.r3)(this.statsToReport_,d)&&(t[d]=m,l=!0)}),l&&this.server_.reportStats(t),Jh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ia=(()=>{return(r=Ia||(Ia={}))[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ia;var r})();function id(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class gc{constructor(i,t,l){this.path=i,this.affectedTree=t,this.revert=l,this.type=Ia.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(or(this.path)){if(null!=this.affectedTree.value)return(0,pe.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Di(i));return new gc(Ii(),t,this.revert)}}return(0,pe.hu)(Pr(this.path)===i,"operationForChild called for unrelated child."),new gc(Gi(this.path),this.affectedTree,this.revert)}}class Ep{constructor(i,t){this.source=i,this.path=t,this.type=Ia.LISTEN_COMPLETE}operationForChild(i){return or(this.path)?new Ep(this.source,Ii()):new Ep(this.source,Gi(this.path))}}class sd{constructor(i,t,l){this.source=i,this.path=t,this.snap=l,this.type=Ia.OVERWRITE}operationForChild(i){return or(this.path)?new sd(this.source,Ii(),this.snap.getImmediateChild(i)):new sd(this.source,Gi(this.path),this.snap)}}class Xd{constructor(i,t,l){this.source=i,this.path=t,this.children=l,this.type=Ia.MERGE}operationForChild(i){if(or(this.path)){const t=this.children.subtree(new Di(i));return t.isEmpty()?null:t.value?new sd(this.source,Ii(),t.value):new Xd(this.source,Ii(),t)}return(0,pe.hu)(Pr(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new Xd(this.source,Gi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mc{constructor(i,t,l){this.node_=i,this.fullyInitialized_=t,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(or(i))return this.isFullyInitialized()&&!this.filtered_;const t=Pr(i);return this.isCompleteForChild(t)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}class zl{constructor(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()}}function Dp(r,i,t,l,d,m){const I=l.filter(k=>k.type===t);I.sort((k,V)=>function fb(r,i,t){if(null==i.childName||null==t.childName)throw(0,pe.g5)("Should only compare child_ events.");const l=new wr(i.childName,i.snapshotNode),d=new wr(t.childName,t.snapshotNode);return r.index_.compare(l,d)}(r,k,V)),I.forEach(k=>{const V=function hb(r,i,t){return"value"===i.type||"child_removed"===i.type||(i.prevName=t.getPredecessorChildName(i.childName,i.snapshotNode,r.index_)),i}(r,k,m);d.forEach(Y=>{Y.respondsTo(k.type)&&i.push(Y.createEvent(V,r.query_))})})}function Ip(r,i){return{eventCache:r,serverCache:i}}function hf(r,i,t,l){return Ip(new mc(i,t,l),r.serverCache)}function F_(r,i,t,l){return Ip(r.eventCache,new mc(i,t,l))}function L_(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function eh(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let em;class us{constructor(i,t=(()=>(em||(em=new Da(Yh)),em))()){this.value=i,this.children=t}static fromObject(i){let t=new us(null);return as(i,(l,d)=>{t=t.set(new Di(l),d)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,t){if(null!=this.value&&t(this.value))return{path:Ii(),value:this.value};if(or(i))return null;{const l=Pr(i),d=this.children.get(l);if(null!==d){const m=d.findRootMostMatchingPathAndValue(Gi(i),t);return null!=m?{path:hi(new Di(l),m.path),value:m.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(or(i))return this;{const t=Pr(i),l=this.children.get(t);return null!==l?l.subtree(Gi(i)):new us(null)}}set(i,t){if(or(i))return new us(t,this.children);{const l=Pr(i),m=(this.children.get(l)||new us(null)).set(Gi(i),t),I=this.children.insert(l,m);return new us(this.value,I)}}remove(i){if(or(i))return this.children.isEmpty()?new us(null):new us(null,this.children);{const t=Pr(i),l=this.children.get(t);if(l){const d=l.remove(Gi(i));let m;return m=d.isEmpty()?this.children.remove(t):this.children.insert(t,d),null===this.value&&m.isEmpty()?new us(null):new us(this.value,m)}return this}}get(i){if(or(i))return this.value;{const t=Pr(i),l=this.children.get(t);return l?l.get(Gi(i)):null}}setTree(i,t){if(or(i))return t;{const l=Pr(i),m=(this.children.get(l)||new us(null)).setTree(Gi(i),t);let I;return I=m.isEmpty()?this.children.remove(l):this.children.insert(l,m),new us(this.value,I)}}fold(i){return this.fold_(Ii(),i)}fold_(i,t){const l={};return this.children.inorderTraversal((d,m)=>{l[d]=m.fold_(hi(i,d),t)}),t(i,this.value,l)}findOnPath(i,t){return this.findOnPath_(i,Ii(),t)}findOnPath_(i,t,l){const d=!!this.value&&l(t,this.value);if(d)return d;if(or(i))return null;{const m=Pr(i),I=this.children.get(m);return I?I.findOnPath_(Gi(i),hi(t,m),l):null}}foreachOnPath(i,t){return this.foreachOnPath_(i,Ii(),t)}foreachOnPath_(i,t,l){if(or(i))return this;{this.value&&l(t,this.value);const d=Pr(i),m=this.children.get(d);return m?m.foreachOnPath_(Gi(i),hi(t,d),l):new us(null)}}foreach(i){this.foreach_(Ii(),i)}foreach_(i,t){this.children.inorderTraversal((l,d)=>{d.foreach_(hi(i,l),t)}),this.value&&t(i,this.value)}foreachChild(i){this.children.inorderTraversal((t,l)=>{l.value&&i(t,l.value)})}}class Wl{constructor(i){this.writeTree_=i}static empty(){return new Wl(new us(null))}}function Cp(r,i,t){if(or(i))return new Wl(new us(t));{const l=r.writeTree_.findRootMostValueAndPath(i);if(null!=l){const d=l.path;let m=l.value;const I=Xi(d,i);return m=m.updateChild(I,t),new Wl(r.writeTree_.set(d,m))}{const d=new us(t),m=r.writeTree_.setTree(i,d);return new Wl(m)}}}function U_(r,i,t){let l=r;return as(t,(d,m)=>{l=Cp(l,hi(i,d),m)}),l}function th(r,i){if(or(i))return Wl.empty();{const t=r.writeTree_.setTree(i,new us(null));return new Wl(t)}}function od(r,i){return null!=nh(r,i)}function nh(r,i){const t=r.writeTree_.findRootMostValueAndPath(i);return null!=t?r.writeTree_.get(t.path).getChild(Xi(t.path,i)):null}function Pv(r){const i=[],t=r.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(fi,(l,d)=>{i.push(new wr(l,d))}):r.writeTree_.children.inorderTraversal((l,d)=>{null!=d.value&&i.push(new wr(l,d.value))}),i}function xu(r,i){if(or(i))return r;{const t=nh(r,i);return new Wl(null!=t?new us(t):r.writeTree_.subtree(i))}}function Pu(r){return r.writeTree_.isEmpty()}function ff(r,i){return B_(Ii(),r.writeTree_,i)}function B_(r,i,t){if(null!=i.value)return t.updateChild(r,i.value);{let l=null;return i.children.inorderTraversal((d,m)=>{".priority"===d?((0,pe.hu)(null!==m.value,"Priority writes must always be leaf nodes"),l=m.value):t=B_(hi(r,d),m,t)}),!t.getChild(r).isEmpty()&&null!==l&&(t=t.updateChild(hi(r,".priority"),l)),t}}function Tp(r,i){return Fv(i,r)}function kv(r,i){if(r.snap)return ro(r.path,i);for(const t in r.children)if(r.children.hasOwnProperty(t)&&ro(hi(r.path,t),i))return!0;return!1}function _c(r){return r.visible}function Ca(r,i,t){let l=Wl.empty();for(let d=0;d<r.length;++d){const m=r[d];if(i(m)){const I=m.path;let k;if(m.snap)ro(t,I)?(k=Xi(t,I),l=Cp(l,k,m.snap)):ro(I,t)&&(k=Xi(I,t),l=Cp(l,Ii(),m.snap.getChild(k)));else{if(!m.children)throw(0,pe.g5)("WriteRecord should have .snap or .children");if(ro(t,I))k=Xi(t,I),l=U_(l,k,m.children);else if(ro(I,t))if(k=Xi(I,t),or(k))l=U_(l,Ii(),m.children);else{const V=(0,pe.DV)(m.children,Pr(k));if(V){const Y=V.getChild(Gi(k));l=Cp(l,Ii(),Y)}}}}}return l}function G_(r,i,t,l,d){if(l||d){const m=xu(r.visibleWrites,i);return!d&&Pu(m)?t:d||null!=t||od(m,Ii())?ff(Ca(r.allWrites,function(Y){return(Y.visible||d)&&(!l||!~l.indexOf(Y.writeId))&&(ro(Y.path,i)||ro(i,Y.path))},i),t||lr.EMPTY_NODE):null}{const m=nh(r.visibleWrites,i);if(null!=m)return m;{const I=xu(r.visibleWrites,i);return Pu(I)?t:null!=t||od(I,Ii())?ff(I,t||lr.EMPTY_NODE):null}}}function nm(r,i,t,l){return G_(r.writeTree,r.treePath,i,t,l)}function rm(r,i){return function j_(r,i,t){let l=lr.EMPTY_NODE;const d=nh(r.visibleWrites,i);if(d)return d.isLeafNode()||d.forEachChild(fi,(m,I)=>{l=l.updateImmediateChild(m,I)}),l;if(t){const m=xu(r.visibleWrites,i);return t.forEachChild(fi,(I,k)=>{const V=ff(xu(m,new Di(I)),k);l=l.updateImmediateChild(I,V)}),Pv(m).forEach(I=>{l=l.updateImmediateChild(I.name,I.node)}),l}return Pv(xu(r.visibleWrites,i)).forEach(I=>{l=l.updateImmediateChild(I.name,I.node)}),l}(r.writeTree,r.treePath,i)}function ku(r,i,t,l){return function ih(r,i,t,l,d){(0,pe.hu)(l||d,"Either existingEventSnap or existingServerSnap must exist");const m=hi(i,t);if(od(r.visibleWrites,m))return null;{const I=xu(r.visibleWrites,m);return Pu(I)?d.getChild(t):ff(I,d.getChild(t))}}(r.writeTree,r.treePath,i,t,l)}function im(r,i){return function tm(r,i){return nh(r.visibleWrites,i)}(r.writeTree,hi(r.treePath,i))}function $_(r,i,t){return function sh(r,i,t,l){const d=hi(i,t),m=nh(r.visibleWrites,d);return null!=m?m:l.isCompleteForChild(t)?ff(xu(r.visibleWrites,d),l.getNode().getImmediateChild(t)):null}(r.writeTree,r.treePath,i,t)}function Ap(r,i){return Fv(hi(r.treePath,i),r.writeTree)}function Fv(r,i){return{treePath:r,writeTree:i}}class sm{constructor(){this.changeMap=new Map}trackChildChange(i){const t=i.type,l=i.childName;(0,pe.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,pe.hu)(".priority"!==l,"Only non-priority child changes can be tracked.");const d=this.changeMap.get(l);if(d){const m=d.type;if("child_added"===t&&"child_removed"===m)this.changeMap.set(l,df(l,i.snapshotNode,d.snapshotNode));else if("child_removed"===t&&"child_added"===m)this.changeMap.delete(l);else if("child_removed"===t&&"child_changed"===m)this.changeMap.set(l,cf(l,d.oldSnap));else if("child_changed"===t&&"child_added"===m)this.changeMap.set(l,Cl(l,i.snapshotNode));else{if("child_changed"!==t||"child_changed"!==m)throw(0,pe.g5)("Illegal combination of changes: "+i+" occurred after "+d);this.changeMap.set(l,df(l,i.snapshotNode,d.oldSnap))}}else this.changeMap.set(l,i)}getChanges(){return Array.from(this.changeMap.values())}}const z_=new class om{getCompleteChild(i){return null}getChildAfterChild(i,t,l){return null}};class W_{constructor(i,t,l=null){this.writes_=i,this.viewCache_=t,this.optCompleteServerCache_=l}getCompleteChild(i){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(i))return t.getNode().getImmediateChild(i);{const l=null!=this.optCompleteServerCache_?new mc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $_(this.writes_,i,l)}}getChildAfterChild(i,t,l){const d=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:eh(this.viewCache_),m=function gb(r,i,t,l,d,m){return function oh(r,i,t,l,d,m,I){let k;const V=xu(r.visibleWrites,i),Y=nh(V,Ii());if(null!=Y)k=Y;else{if(null==t)return[];k=ff(V,t)}if(k=k.withIndex(I),k.isEmpty()||k.isLeafNode())return[];{const ue=[],Me=I.getCompare(),Ne=m?k.getReverseIteratorFrom(l,I):k.getIteratorFrom(l,I);let Je=Ne.getNext();for(;Je&&ue.length<d;)0!==Me(Je,l)&&ue.push(Je),Je=Ne.getNext();return ue}}(r.writeTree,r.treePath,i,t,l,d,m)}(this.writes_,d,t,1,l,i);return 0===m.length?null:m[0]}}function q_(r,i,t,l,d,m){const I=i.eventCache;if(null!=im(l,t))return i;{let k,V;if(or(t))if((0,pe.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const Y=eh(i),Me=rm(l,Y instanceof lr?Y:lr.EMPTY_NODE);k=r.filter.updateFullNode(i.eventCache.getNode(),Me,m)}else{const Y=nm(l,eh(i));k=r.filter.updateFullNode(i.eventCache.getNode(),Y,m)}else{const Y=Pr(t);if(".priority"===Y){(0,pe.hu)(1===Xc(t),"Can't have a priority with additional path components");const ue=I.getNode();V=i.serverCache.getNode();const Me=ku(l,t,ue,V);k=null!=Me?r.filter.updatePriority(ue,Me):I.getNode()}else{const ue=Gi(t);let Me;if(I.isCompleteForChild(Y)){V=i.serverCache.getNode();const Ne=ku(l,t,I.getNode(),V);Me=null!=Ne?I.getNode().getImmediateChild(Y).updateChild(ue,Ne):I.getNode().getImmediateChild(Y)}else Me=$_(l,Y,i.serverCache);k=null!=Me?r.filter.updateChild(I.getNode(),Y,Me,ue,d,m):I.getNode()}}return hf(i,k,I.isFullyInitialized()||or(t),r.filter.filtersNodes())}}function Op(r,i,t,l,d,m,I,k){const V=i.serverCache;let Y;const ue=I?r.filter:r.filter.getIndexedFilter();if(or(t))Y=ue.updateFullNode(V.getNode(),l,null);else if(ue.filtersNodes()&&!V.isFiltered()){const Je=V.getNode().updateChild(t,l);Y=ue.updateFullNode(V.getNode(),Je,null)}else{const Je=Pr(t);if(!V.isCompleteForPath(t)&&Xc(t)>1)return i;const kt=Gi(t),pn=V.getNode().getImmediateChild(Je).updateChild(kt,l);Y=".priority"===Je?ue.updatePriority(V.getNode(),pn):ue.updateChild(V.getNode(),Je,pn,kt,z_,null)}const Me=F_(i,Y,V.isFullyInitialized()||or(t),ue.filtersNodes());return q_(r,Me,t,d,new W_(d,Me,m),k)}function Np(r,i,t,l,d,m,I){const k=i.eventCache;let V,Y;const ue=new W_(d,i,m);if(or(t))Y=r.filter.updateFullNode(i.eventCache.getNode(),l,I),V=hf(i,Y,!0,r.filter.filtersNodes());else{const Me=Pr(t);if(".priority"===Me)Y=r.filter.updatePriority(i.eventCache.getNode(),l),V=hf(i,Y,k.isFullyInitialized(),k.isFiltered());else{const Ne=Gi(t),Je=k.getNode().getImmediateChild(Me);let kt;if(or(Ne))kt=l;else{const Yt=ue.getCompleteChild(Me);kt=null!=Yt?".priority"===ap(Ne)&&Yt.getChild(bv(Ne)).isEmpty()?Yt:Yt.updateChild(Ne,l):lr.EMPTY_NODE}V=Je.equals(kt)?i:hf(i,r.filter.updateChild(k.getNode(),Me,kt,Ne,ue,I),k.isFullyInitialized(),r.filter.filtersNodes())}}return V}function am(r,i){return r.eventCache.isCompleteForChild(i)}function lm(r,i,t){return t.foreach((l,d)=>{i=i.updateChild(l,d)}),i}function Mp(r,i,t,l,d,m,I,k){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let Y,V=i;Y=or(t)?l:new us(null).setTree(t,l);const ue=i.serverCache.getNode();return Y.children.inorderTraversal((Me,Ne)=>{if(ue.hasChild(Me)){const kt=lm(0,i.serverCache.getNode().getImmediateChild(Me),Ne);V=Op(r,V,new Di(Me),kt,d,m,I,k)}}),Y.children.inorderTraversal((Me,Ne)=>{const Je=!i.serverCache.isCompleteForChild(Me)&&null===Ne.value;if(!ue.hasChild(Me)&&!Je){const Yt=lm(0,i.serverCache.getNode().getImmediateChild(Me),Ne);V=Op(r,V,new Di(Me),Yt,d,m,I,k)}}),V}class e{constructor(i,t){this.query_=i,this.eventRegistrations_=[];const l=this.query_._queryParams,d=new M_(l.getIndex()),m=function Av(r){return r.loadsAllData()?new M_(r.getIndex()):r.hasLimit()?new Sv(r):new nd(r)}(l);this.processor_=function K_(r){return{filter:r}}(m);const I=t.serverCache,k=t.eventCache,V=d.updateFullNode(lr.EMPTY_NODE,I.getNode(),null),Y=m.updateFullNode(lr.EMPTY_NODE,k.getNode(),null),ue=new mc(V,I.isFullyInitialized(),d.filtersNodes()),Me=new mc(Y,k.isFullyInitialized(),m.filtersNodes());this.viewCache_=Ip(Me,ue),this.eventGenerator_=new zl(this.query_)}get query(){return this.query_}}function f(r,i){const t=eh(r.viewCache_);return t&&(r.query._queryParams.loadsAllData()||!or(i)&&!t.getImmediateChild(Pr(i)).isEmpty())?t.getChild(i):null}function _(r){return 0===r.eventRegistrations_.length}function O(r,i,t){const l=[];if(t){(0,pe.hu)(null==i,"A cancel should cancel all event registrations.");const d=r.query._path;r.eventRegistrations_.forEach(m=>{const I=m.createCancelEvent(t,d);I&&l.push(I)})}if(i){let d=[];for(let m=0;m<r.eventRegistrations_.length;++m){const I=r.eventRegistrations_[m];if(I.matches(i)){if(i.hasAnyCallback()){d=d.concat(r.eventRegistrations_.slice(m+1));break}}else d.push(I)}r.eventRegistrations_=d}else r.eventRegistrations_=[];return l}function H(r,i,t,l){i.type===Ia.MERGE&&null!==i.source.queryId&&((0,pe.hu)(eh(r.viewCache_),"We should always have a full cache before handling merges"),(0,pe.hu)(L_(r.viewCache_),"Missing event cache, even though we have a server cache"));const d=r.viewCache_,m=function Lv(r,i,t,l,d){const m=new sm;let I,k;if(t.type===Ia.OVERWRITE){const Y=t;Y.source.fromUser?I=Np(r,i,Y.path,Y.snap,l,d,m):((0,pe.hu)(Y.source.fromServer,"Unknown source."),k=Y.source.tagged||i.serverCache.isFiltered()&&!or(Y.path),I=Op(r,i,Y.path,Y.snap,l,d,k,m))}else if(t.type===Ia.MERGE){const Y=t;Y.source.fromUser?I=function _b(r,i,t,l,d,m,I){let k=i;return l.foreach((V,Y)=>{const ue=hi(t,V);am(i,Pr(ue))&&(k=Np(r,k,ue,Y,d,m,I))}),l.foreach((V,Y)=>{const ue=hi(t,V);am(i,Pr(ue))||(k=Np(r,k,ue,Y,d,m,I))}),k}(r,i,Y.path,Y.children,l,d,m):((0,pe.hu)(Y.source.fromServer,"Unknown source."),k=Y.source.tagged||i.serverCache.isFiltered(),I=Mp(r,i,Y.path,Y.children,l,d,k,m))}else if(t.type===Ia.ACK_USER_WRITE){const Y=t;I=Y.revert?function a(r,i,t,l,d,m){let I;if(null!=im(l,t))return i;{const k=new W_(l,i,d),V=i.eventCache.getNode();let Y;if(or(t)||".priority"===Pr(t)){let ue;if(i.serverCache.isFullyInitialized())ue=nm(l,eh(i));else{const Me=i.serverCache.getNode();(0,pe.hu)(Me instanceof lr,"serverChildren would be complete if leaf node"),ue=rm(l,Me)}Y=r.filter.updateFullNode(V,ue,m)}else{const ue=Pr(t);let Me=$_(l,ue,i.serverCache);null==Me&&i.serverCache.isCompleteForChild(ue)&&(Me=V.getImmediateChild(ue)),Y=null!=Me?r.filter.updateChild(V,ue,Me,Gi(t),k,m):i.eventCache.getNode().hasChild(ue)?r.filter.updateChild(V,ue,lr.EMPTY_NODE,Gi(t),k,m):V,Y.isEmpty()&&i.serverCache.isFullyInitialized()&&(I=nm(l,eh(i)),I.isLeafNode()&&(Y=r.filter.updateFullNode(Y,I,m)))}return I=i.serverCache.isFullyInitialized()||null!=im(l,Ii()),hf(i,Y,I,r.filter.filtersNodes())}}(r,i,Y.path,l,d,m):function Bv(r,i,t,l,d,m,I){if(null!=im(d,t))return i;const k=i.serverCache.isFiltered(),V=i.serverCache;if(null!=l.value){if(or(t)&&V.isFullyInitialized()||V.isCompleteForPath(t))return Op(r,i,t,V.getNode().getChild(t),d,m,k,I);if(or(t)){let Y=new us(null);return V.getNode().forEachChild(Dl,(ue,Me)=>{Y=Y.set(new Di(ue),Me)}),Mp(r,i,t,Y,d,m,k,I)}return i}{let Y=new us(null);return l.foreach((ue,Me)=>{const Ne=hi(t,ue);V.isCompleteForPath(Ne)&&(Y=Y.set(ue,V.getNode().getChild(Ne)))}),Mp(r,i,t,Y,d,m,k,I)}}(r,i,Y.path,Y.affectedTree,l,d,m)}else{if(t.type!==Ia.LISTEN_COMPLETE)throw(0,pe.g5)("Unknown operation type: "+t.type);I=function yb(r,i,t,l,d){const m=i.serverCache;return q_(r,F_(i,m.getNode(),m.isFullyInitialized()||or(t),m.isFiltered()),t,l,z_,d)}(r,i,t.path,l,m)}const V=m.getChanges();return function Uv(r,i,t){const l=i.eventCache;if(l.isFullyInitialized()){const d=l.getNode().isLeafNode()||l.getNode().isEmpty(),m=L_(r);(t.length>0||!r.eventCache.isFullyInitialized()||d&&!l.getNode().equals(m)||!l.getNode().getPriority().equals(m.getPriority()))&&t.push(N_(L_(i)))}}(i,I,V),{viewCache:I,changes:V}}(r.processor_,d,i,t,l);return function mb(r,i){(0,pe.hu)(i.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),(0,pe.hu)(i.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}(r.processor_,m.viewCache),(0,pe.hu)(m.viewCache.serverCache.isFullyInitialized()||!d.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=m.viewCache,ae(r,m.changes,m.viewCache.eventCache.getNode(),null)}function ae(r,i,t,l){return function wp(r,i,t,l){const d=[],m=[];return i.forEach(I=>{"child_changed"===I.type&&r.index_.indexedValueChanged(I.oldSnap,I.snapshotNode)&&m.push(function Qd(r,i){return{type:"child_moved",snapshotNode:i,childName:r}}(I.childName,I.snapshotNode))}),Dp(r,d,"child_removed",i,l,t),Dp(r,d,"child_added",i,l,t),Dp(r,d,"child_moved",m,l,t),Dp(r,d,"child_changed",i,l,t),Dp(r,d,"value",i,l,t),d}(r.eventGenerator_,i,t,l?[l]:r.eventRegistrations_)}let Oe,Gv;class Ze{constructor(){this.views=new Map}}function An(r,i,t,l){const d=i.source.queryId;if(null!==d){const m=r.views.get(d);return(0,pe.hu)(null!=m,"SyncTree gave us an op for an invalid query."),H(m,i,t,l)}{let m=[];for(const I of r.views.values())m=m.concat(H(I,i,t,l));return m}}function Ai(r,i,t,l,d){const I=r.views.get(i._queryIdentifier);if(!I){let k=nm(t,d?l:null),V=!1;k?V=!0:l instanceof lr?(k=rm(t,l),V=!1):(k=lr.EMPTY_NODE,V=!1);const Y=Ip(new mc(k,V,!1),new mc(l,d,!1));return new e(i,Y)}return I}function xs(r){const i=[];for(const t of r.views.values())t.query._queryParams.loadsAllData()||i.push(t);return i}function Dr(r,i){let t=null;for(const l of r.views.values())t=t||f(l,i);return t}function ei(r,i){return i._queryParams.loadsAllData()?Vv(r):r.views.get(i._queryIdentifier)}function po(r,i){return null!=ei(r,i)}function Ha(r){return null!=Vv(r)}function Vv(r){for(const i of r.views.values())if(i.query._queryParams.loadsAllData())return i;return null}let fD=1;class vb{constructor(i){this.listenProvider_=i,this.syncPointTree_=new us(null),this.pendingWriteTree_=function H_(){return{visibleWrites:Wl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bb(r,i,t,l,d){return function rh(r,i,t,l,d){(0,pe.hu)(l>r.lastWriteId,"Stacking an older write on top of newer ones"),void 0===d&&(d=!0),r.allWrites.push({path:i,snap:t,writeId:l,visible:d}),d&&(r.visibleWrites=Cp(r.visibleWrites,i,t)),r.lastWriteId=l}(r.pendingWriteTree_,i,t,l,d),d?um(r,new sd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,t)):[]}function Rp(r,i,t=!1){const l=function ja(r,i){for(let t=0;t<r.allWrites.length;t++){const l=r.allWrites[t];if(l.writeId===i)return l}return null}(r.pendingWriteTree_,i);if(function V_(r,i){const t=r.allWrites.findIndex(k=>k.writeId===i);(0,pe.hu)(t>=0,"removeWrite called with nonexistent writeId.");const l=r.allWrites[t];r.allWrites.splice(t,1);let d=l.visible,m=!1,I=r.allWrites.length-1;for(;d&&I>=0;){const k=r.allWrites[I];k.visible&&(I>=t&&kv(k,l.path)?d=!1:ro(l.path,k.path)&&(m=!0)),I--}return!!d&&(m?(function Sp(r){r.visibleWrites=Ca(r.allWrites,_c,Ii()),r.lastWriteId=r.allWrites.length>0?r.allWrites[r.allWrites.length-1].writeId:-1}(r),!0):(l.snap?r.visibleWrites=th(r.visibleWrites,l.path):as(l.children,V=>{r.visibleWrites=th(r.visibleWrites,hi(l.path,V))}),!0))}(r.pendingWriteTree_,i)){let m=new us(null);return null!=l.snap?m=m.set(Ii(),!0):as(l.children,I=>{m=m.set(new Di(I),!0)}),um(r,new gc(l.path,m,t))}return[]}function Y_(r,i,t){return um(r,new sd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,t))}function Z_(r,i,t,l,d=!1){const m=i._path,I=r.syncPointTree_.get(m);let k=[];if(I&&("default"===i._queryIdentifier||po(I,i))){const V=function Nr(r,i,t,l){const d=i._queryIdentifier,m=[];let I=[];const k=Ha(r);if("default"===d)for(const[V,Y]of r.views.entries())I=I.concat(O(Y,t,l)),_(Y)&&(r.views.delete(V),Y.query._queryParams.loadsAllData()||m.push(Y.query));else{const V=r.views.get(d);V&&(I=I.concat(O(V,t,l)),_(V)&&(r.views.delete(d),V.query._queryParams.loadsAllData()||m.push(V.query)))}return k&&!Ha(r)&&m.push(new(function Gt(){return(0,pe.hu)(Oe,"Reference.ts has not been loaded"),Oe}())(i._repo,i._path)),{removed:m,events:I}}(I,i,t,l);(function dn(r){return 0===r.views.size})(I)&&(r.syncPointTree_=r.syncPointTree_.remove(m));const Y=V.removed;if(k=V.events,!d){const ue=-1!==Y.findIndex(Ne=>Ne._queryParams.loadsAllData()),Me=r.syncPointTree_.findOnPath(m,(Ne,Je)=>Ha(Je));if(ue&&!Me){const Ne=r.syncPointTree_.subtree(m);if(!Ne.isEmpty()){const Je=function _w(r){return r.fold((i,t,l)=>{if(t&&Ha(t))return[Vv(t)];{let d=[];return t&&(d=xs(t)),as(l,(m,I)=>{d=d.concat(I)}),d}})}(Ne);for(let kt=0;kt<Je.length;++kt){const Yt=Je[kt],pn=Yt.query,Kn=Db(r,Yt);r.listenProvider_.startListening(Wv(pn),dm(r,pn),Kn.hashFn,Kn.onComplete)}}}!Me&&Y.length>0&&!l&&(ue?r.listenProvider_.stopListening(Wv(i),null):Y.forEach(Ne=>{const Je=r.queryToTagMap.get(J_(Ne));r.listenProvider_.stopListening(Wv(Ne),Je)}))}!function vE(r,i){for(let t=0;t<i.length;++t){const l=i[t];if(!l._queryParams.loadsAllData()){const d=J_(l),m=r.queryToTagMap.get(d);r.queryToTagMap.delete(d),r.tagToQueryMap.delete(m)}}}(r,Y)}return k}function Eb(r,i,t,l){const d=Hv(r,l);if(null!=d){const m=$v(d),I=m.path,k=m.queryId,V=Xi(I,i);return zv(r,I,new sd(id(k),V,t))}return[]}function wb(r,i,t,l=!1){const d=i._path;let m=null,I=!1;r.syncPointTree_.foreachOnPath(d,(Ne,Je)=>{const kt=Xi(Ne,d);m=m||Dr(Je,kt),I=I||Ha(Je)});let V,k=r.syncPointTree_.get(d);k?(I=I||Ha(k),m=m||Dr(k,Ii())):(k=new Ze,r.syncPointTree_=r.syncPointTree_.set(d,k)),null!=m?V=!0:(V=!1,m=lr.EMPTY_NODE,r.syncPointTree_.subtree(d).foreachChild((Je,kt)=>{const Yt=Dr(kt,Ii());Yt&&(m=m.updateImmediateChild(Je,Yt))}));const Y=po(k,i);if(!Y&&!i._queryParams.loadsAllData()){const Ne=J_(i);(0,pe.hu)(!r.queryToTagMap.has(Ne),"View does not exist, but we have a tag");const Je=function yw(){return fD++}();r.queryToTagMap.set(Ne,Je),r.tagToQueryMap.set(Je,Ne)}let Me=function Hs(r,i,t,l,d,m){const I=Ai(r,i,l,d,m);return r.views.has(i._queryIdentifier)||r.views.set(i._queryIdentifier,I),function w(r,i){r.eventRegistrations_.push(i)}(I,t),function q(r,i){const t=r.viewCache_.eventCache,l=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(fi,(m,I)=>{l.push(Cl(m,I))}),t.isFullyInitialized()&&l.push(N_(t.getNode())),ae(r,l,t.getNode(),i)}(I,t)}(k,i,t,Tp(r.pendingWriteTree_,d),m,V);if(!Y&&!I&&!l){const Ne=ei(k,i);Me=Me.concat(function vw(r,i,t){const l=i._path,d=dm(r,i),m=Db(r,t),I=r.listenProvider_.startListening(Wv(i),d,m.hashFn,m.onComplete),k=r.syncPointTree_.subtree(l);if(d)(0,pe.hu)(!Ha(k.value),"If we're adding a query, it shouldn't be shadowed");else{const V=k.fold((Y,ue,Me)=>{if(!or(Y)&&ue&&Ha(ue))return[Vv(ue).query];{let Ne=[];return ue&&(Ne=Ne.concat(xs(ue).map(Je=>Je.query))),as(Me,(Je,kt)=>{Ne=Ne.concat(kt)}),Ne}});for(let Y=0;Y<V.length;++Y){const ue=V[Y];r.listenProvider_.stopListening(Wv(ue),dm(r,ue))}}return I}(r,i,Ne))}return Me}function jv(r,i,t){const d=r.pendingWriteTree_,m=r.syncPointTree_.findOnPath(i,(I,k)=>{const Y=Dr(k,Xi(I,i));if(Y)return Y});return G_(d,i,m,t,!0)}function um(r,i){return yE(i,r.syncPointTree_,null,Tp(r.pendingWriteTree_,Ii()))}function yE(r,i,t,l){if(or(r.path))return cm(r,i,t,l);{const d=i.get(Ii());null==t&&null!=d&&(t=Dr(d,Ii()));let m=[];const I=Pr(r.path),k=r.operationForChild(I),V=i.children.get(I);if(V&&k){const Y=t?t.getImmediateChild(I):null,ue=Ap(l,I);m=m.concat(yE(k,V,Y,ue))}return d&&(m=m.concat(An(d,r,l,t))),m}}function cm(r,i,t,l){const d=i.get(Ii());null==t&&null!=d&&(t=Dr(d,Ii()));let m=[];return i.children.inorderTraversal((I,k)=>{const V=t?t.getImmediateChild(I):null,Y=Ap(l,I),ue=r.operationForChild(I);ue&&(m=m.concat(cm(ue,k,V,Y)))}),d&&(m=m.concat(An(d,r,l,t))),m}function Db(r,i){const t=i.query,l=dm(r,t);return{hashFn:()=>(function n(r){return r.viewCache_.serverCache.getNode()}(i)||lr.EMPTY_NODE).hash(),onComplete:d=>{if("ok"===d)return l?function _E(r,i,t){const l=Hv(r,t);if(l){const d=$v(l),m=d.path,I=d.queryId,k=Xi(m,i);return zv(r,m,new Ep(id(I),k))}return[]}(r,t._path,l):function pw(r,i){return um(r,new Ep({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(r,t._path);{const m=function qc(r,i){let t="Unknown Error";"too_big"===r?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===r?t="Client doesn't have permission to access the desired data.":"unavailable"===r&&(t="The service is unavailable");const l=new Error(r+" at "+i._path.toString()+": "+t);return l.code=r.toUpperCase(),l}(d,t);return Z_(r,t,null,m)}}}}function dm(r,i){const t=J_(i);return r.queryToTagMap.get(t)}function J_(r){return r._path.toString()+"$"+r._queryIdentifier}function Hv(r,i){return r.tagToQueryMap.get(i)}function $v(r){const i=r.indexOf("$");return(0,pe.hu)(-1!==i&&i<r.length-1,"Bad queryKey."),{queryId:r.substr(i+1),path:new Di(r.substr(0,i))}}function zv(r,i,t){const l=r.syncPointTree_.get(i);return(0,pe.hu)(l,"Missing sync point for query tag that we're tracking"),An(l,t,Tp(r.pendingWriteTree_,i),null)}function Wv(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(function mE(){return(0,pe.hu)(Gv,"Reference.ts has not been loaded"),Gv}())(r._repo,r._path):r}class Ib{constructor(i){this.node_=i}getImmediateChild(i){const t=this.node_.getImmediateChild(i);return new Ib(t)}node(){return this.node_}}class Cb{constructor(i,t){this.syncTree_=i,this.path_=t}getImmediateChild(i){const t=hi(this.path_,i);return new Cb(this.syncTree_,t)}node(){return jv(this.syncTree_,this.path_)}}const Q_=function(r){return(r=r||{}).timestamp=r.timestamp||(new Date).getTime(),r},bE=function(r,i,t){return r&&"object"==typeof r?((0,pe.hu)(".sv"in r,"Unexpected leaf node or priority contents"),"string"==typeof r[".sv"]?Tb(r[".sv"],i,t):"object"==typeof r[".sv"]?ad(r[".sv"],i):void(0,pe.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2))):r},Tb=function(r,i,t){if("timestamp"===r)return t.timestamp;(0,pe.hu)(!1,"Unexpected server value: "+r)},ad=function(r,i,t){r.hasOwnProperty("increment")||(0,pe.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const l=r.increment;"number"!=typeof l&&(0,pe.hu)(!1,"Unexpected increment value: "+l);const d=i.node();if((0,pe.hu)(null!==d&&typeof d<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!d.isLeafNode())return l;const I=d.getValue();return"number"!=typeof I?l:I+l},EE=function(r,i,t,l){return xp(i,new Cb(t,r),l)},X_=function(r,i,t){return xp(r,new Ib(i),t)};function xp(r,i,t){const l=r.getPriority().val(),d=bE(l,i.getImmediateChild(".priority"),t);let m;if(r.isLeafNode()){const I=r,k=bE(I.getValue(),i,t);return k!==I.getValue()||d!==I.getPriority().val()?new Ru(k,ms(d)):r}{const I=r;return m=I,d!==I.getPriority().val()&&(m=m.updatePriority(new Ru(d))),I.forEachChild(fi,(k,V)=>{const Y=xp(V,i.getImmediateChild(k),t);Y!==V&&(m=m.updateImmediateChild(k,Y))}),m}}class Sb{constructor(i="",t=null,l={children:{},childCount:0}){this.name=i,this.parent=t,this.node=l}}function Kv(r,i){let t=i instanceof Di?i:new Di(i),l=r,d=Pr(t);for(;null!==d;){const m=(0,pe.DV)(l.node.children,d)||{children:{},childCount:0};l=new Sb(d,l,m),t=Gi(t),d=Pr(t)}return l}function Pp(r){return r.node.value}function hm(r,i){r.node.value=i,Yv(r)}function ey(r){return r.node.childCount>0}function qv(r,i){as(r.node.children,(t,l)=>{i(new Sb(t,r,l))})}function Ab(r,i,t,l){t&&!l&&i(r),qv(r,d=>{Ab(d,i,!0,l)}),t&&l&&i(r)}function kp(r){return new Di(null===r.parent?r.name:kp(r.parent)+"/"+r.name)}function Yv(r){null!==r.parent&&function Ob(r,i,t){const l=function bw(r){return void 0===Pp(r)&&!ey(r)}(t),d=(0,pe.r3)(r.node.children,i);l&&d?(delete r.node.children[i],r.node.childCount--,Yv(r)):!l&&!d&&(r.node.children[i]=t.node,r.node.childCount++,Yv(r))}(r.parent,r.name,r)}const Nb=/[\[\].#$\/\u0000-\u001F\u007F]/,DE=/[\[\].#$\u0000-\u001F\u007F]/,ty=10485760,fm=function(r){return"string"==typeof r&&0!==r.length&&!Nb.test(r)},IE=function(r){return"string"==typeof r&&0!==r.length&&!DE.test(r)},ny=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!no(r)||r&&"object"==typeof r&&(0,pe.r3)(r,".sv")},ld=function(r,i,t,l){l&&void 0===i||pm((0,pe.gK)(r,"value"),i,t)},pm=function(r,i,t){const l=t instanceof Di?new dc(t,r):t;if(void 0===i)throw new Error(r+"contains undefined "+uu(l));if("function"==typeof i)throw new Error(r+"contains a function "+uu(l)+" with contents = "+i.toString());if(no(i))throw new Error(r+"contains "+i.toString()+" "+uu(l));if("string"==typeof i&&i.length>ty/3&&(0,pe.ug)(i)>ty)throw new Error(r+"contains a string greater than "+ty+" utf8 bytes "+uu(l)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let d=!1,m=!1;if(as(i,(I,k)=>{if(".value"===I)d=!0;else if(".priority"!==I&&".sv"!==I&&(m=!0,!fm(I)))throw new Error(r+" contains an invalid key ("+I+") "+uu(l)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function pE(r,i){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(i),r.byteLength_+=(0,pe.ug)(i),Kd(r)})(l,I),pm(r,k,l),function Wd(r){const i=r.parts_.pop();r.byteLength_-=(0,pe.ug)(i),r.parts_.length>0&&(r.byteLength_-=1)}(l)}),d&&m)throw new Error(r+' contains ".value" child '+uu(l)+" in addition to actual children.")}},Rb=function(r,i,t,l){if(l&&void 0===i)return;const d=(0,pe.gK)(r,"values");if(!i||"object"!=typeof i||Array.isArray(i))throw new Error(d+" must be an object containing the children to replace.");const m=[];as(i,(I,k)=>{const V=new Di(I);if(pm(d,k,hi(t,V)),".priority"===ap(V)&&!ny(k))throw new Error(d+"contains an invalid value for '"+V.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");m.push(V)}),function(r,i){let t,l;for(t=0;t<i.length;t++){l=i[t];const m=lp(l);for(let I=0;I<m.length;I++)if((".priority"!==m[I]||I!==m.length-1)&&!fm(m[I]))throw new Error(r+"contains an invalid key ("+m[I]+") in path "+l.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}i.sort(sf);let d=null;for(t=0;t<i.length;t++){if(l=i[t],null!==d&&ro(d,l))throw new Error(r+"contains a path "+d.toString()+" that is ancestor of another path "+l.toString());d=l}}(d,m)},Zv=function(r,i,t){if(!t||void 0!==i){if(no(i))throw new Error((0,pe.gK)(r,"priority")+"is "+i.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ny(i))throw new Error((0,pe.gK)(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gm=function(r,i,t,l){if(!(l&&void 0===t||fm(t)))throw new Error((0,pe.gK)(r,i)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mm=function(r,i,t,l){if(!(l&&void 0===t||IE(t)))throw new Error((0,pe.gK)(r,i)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ww=function(r,i,t,l){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mm(r,i,t,l)},du=function(r,i){if(".info"===Pr(i))throw new Error(r+" failed = Can't modify data under /.info/")},xb=function(r,i){const t=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!fm(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==t.length&&!function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),IE(r)}(t))throw new Error((0,pe.gK)(r,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Dw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ry(r,i){let t=null;for(let l=0;l<i.length;l++){const d=i[l],m=d.getPath();null!==t&&!Yg(m,t.path)&&(r.eventLists_.push(t),t=null),null===t&&(t={events:[],path:m}),t.events.push(d)}t&&r.eventLists_.push(t)}function Pb(r,i,t){ry(r,t),Fp(r,l=>Yg(l,i))}function cs(r,i,t){ry(r,t),Fp(r,l=>ro(l,i)||ro(i,l))}function Fp(r,i){r.recursionDepth_++;let t=!0;for(let l=0;l<r.eventLists_.length;l++){const d=r.eventLists_[l];d&&(i(d.path)?(Iw(r.eventLists_[l]),r.eventLists_[l]=null):t=!1)}t&&(r.eventLists_=[]),r.recursionDepth_--}function Iw(r){for(let i=0;i<r.events.length;i++){const t=r.events[i];if(null!==t){r.events[i]=null;const l=t.getEventRunner();Su&&Lo("event: "+t.toString()),Yc(l)}}}const CE="repo_interrupt",pD=25;class gD{constructor(i,t,l,d){this.repoInfo_=i,this.forceRestClient_=t,this.authTokenProvider_=l,this.appCheckProvider_=d,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bp(),this.transactionQueueTree_=new Sb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Jv(r){const t=r.infoData_.getNode(new Di(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ah(r){return Q_({timestamp:Jv(r)})}function SE(r,i,t,l,d){r.dataUpdateCount++;const m=new Di(i);t=r.interceptServerDataCallback_?r.interceptServerDataCallback_(i,t):t;let I=[];if(d)if(l){const V=(0,pe.UI)(t,Y=>ms(Y));I=function gw(r,i,t,l){const d=Hv(r,l);if(d){const m=$v(d),I=m.path,k=m.queryId,V=Xi(I,i),Y=us.fromObject(t);return zv(r,I,new Xd(id(k),V,Y))}return[]}(r.serverSyncTree_,m,V,d)}else{const V=ms(t);I=Eb(r.serverSyncTree_,m,V,d)}else if(l){const V=(0,pe.UI)(t,Y=>ms(Y));I=function fw(r,i,t){const l=us.fromObject(t);return um(r,new Xd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,l))}(r.serverSyncTree_,m,V)}else{const V=ms(t);I=Y_(r.serverSyncTree_,m,V)}let k=m;I.length>0&&(k=vm(r,m)),cs(r.eventQueue_,k,I)}function Qv(r,i){Xv(r,"connected",i),!1===i&&function AE(r){ym(r,"onDisconnectEvents");const i=ah(r),t=bp();Qg(r.onDisconnect_,Ii(),(d,m)=>{const I=EE(d,m,r.serverSyncTree_,i);sl(t,d,I)});let l=[];Qg(t,Ii(),(d,m)=>{l=l.concat(Y_(r.serverSyncTree_,d,m));const I=r0(r,d);vm(r,I)}),r.onDisconnect_=bp(),cs(r.eventQueue_,Ii(),l)}(r)}function Xv(r,i,t){const l=new Di("/.info/"+i),d=ms(t);r.infoData_.updateSnapshot(l,d);const m=Y_(r.infoSyncTree_,l,d);cs(r.eventQueue_,l,m)}function e0(r){return r.nextWriteId_++}function kb(r,i,t,l,d){ym(r,"set",{path:i.toString(),value:t,priority:l});const m=ah(r),I=ms(t,l),k=jv(r.serverSyncTree_,i),V=X_(I,k,m),Y=e0(r),ue=bb(r.serverSyncTree_,i,V,Y,!0);ry(r.eventQueue_,ue),r.server_.put(i.toString(),I.val(!0),(Ne,Je)=>{const kt="ok"===Ne;kt||Pi("set at "+i+" failed: "+Ne);const Yt=Rp(r.serverSyncTree_,Y,!kt);cs(r.eventQueue_,i,Yt),lh(0,d,Ne,Je)});const Me=r0(r,i);vm(r,Me),cs(r.eventQueue_,Me,[])}function OE(r,i,t){r.server_.onDisconnectCancel(i.toString(),(l,d)=>{"ok"===l&&x_(r.onDisconnect_,i),lh(0,t,l,d)})}function iy(r,i,t,l){const d=ms(t);r.server_.onDisconnectPut(i.toString(),d.val(!0),(m,I)=>{"ok"===m&&sl(r.onDisconnect_,i,d),lh(0,l,m,I)})}function Ub(r,i,t){let l;l=".info"===Pr(i._path)?Z_(r.infoSyncTree_,i,t):Z_(r.serverSyncTree_,i,t),Pb(r.eventQueue_,i._path,l)}function Bb(r){r.persistentConnection_&&r.persistentConnection_.interrupt(CE)}function ym(r,...i){let t="";r.persistentConnection_&&(t=r.persistentConnection_.id+":"),Lo(t,...i)}function lh(r,i,t,l){i&&Yc(()=>{if("ok"===t)i(null);else{const d=(t||"error").toUpperCase();let m=d;l&&(m+=": "+l);const I=new Error(m);I.code=d,i(I)}})}function ME(r,i,t){return jv(r.serverSyncTree_,i,t)||lr.EMPTY_NODE}function t0(r,i=r.transactionQueueTree_){if(i||n0(r,i),Pp(i)){const t=Gb(r,i);(0,pe.hu)(t.length>0,"Sending zero length transaction queue"),t.every(d=>0===d.status)&&function _D(r,i,t){const l=t.map(Y=>Y.currentWriteId),d=ME(r,i,l);let m=d;const I=d.hash();for(let Y=0;Y<t.length;Y++){const ue=t[Y];(0,pe.hu)(0===ue.status,"tryToSendTransactionQueue_: items in queue should all be run."),ue.status=1,ue.retryCount++;const Me=Xi(i,ue.path);m=m.updateChild(Me,ue.currentOutputSnapshotRaw)}const k=m.val(!0),V=i;r.server_.put(V.toString(),k,Y=>{ym(r,"transaction put response",{path:V.toString(),status:Y});let ue=[];if("ok"===Y){const Me=[];for(let Ne=0;Ne<t.length;Ne++)t[Ne].status=2,ue=ue.concat(Rp(r.serverSyncTree_,t[Ne].currentWriteId)),t[Ne].onComplete&&Me.push(()=>t[Ne].onComplete(null,!0,t[Ne].currentOutputSnapshotResolved)),t[Ne].unwatcher();n0(r,Kv(r.transactionQueueTree_,i)),t0(r,r.transactionQueueTree_),cs(r.eventQueue_,i,ue);for(let Ne=0;Ne<Me.length;Ne++)Yc(Me[Ne])}else{if("datastale"===Y)for(let Me=0;Me<t.length;Me++)t[Me].status=3===t[Me].status?4:0;else{Pi("transaction at "+V.toString()+" failed: "+Y);for(let Me=0;Me<t.length;Me++)t[Me].status=4,t[Me].abortReason=Y}vm(r,i)}},I)}(r,kp(i),t)}else ey(i)&&qv(i,t=>{t0(r,t)})}function vm(r,i){const t=RE(r,i),l=kp(t);return function Sw(r,i,t){if(0===i.length)return;const l=[];let d=[];const I=i.filter(k=>0===k.status).map(k=>k.currentWriteId);for(let k=0;k<i.length;k++){const V=i[k],Y=Xi(t,V.path);let Me,ue=!1;if((0,pe.hu)(null!==Y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===V.status)ue=!0,Me=V.abortReason,d=d.concat(Rp(r.serverSyncTree_,V.currentWriteId,!0));else if(0===V.status)if(V.retryCount>=pD)ue=!0,Me="maxretry",d=d.concat(Rp(r.serverSyncTree_,V.currentWriteId,!0));else{const Ne=ME(r,V.path,I);V.currentInputSnapshot=Ne;const Je=i[k].update(Ne.val());if(void 0!==Je){pm("transaction failed: Data returned ",Je,V.path);let kt=ms(Je);"object"==typeof Je&&null!=Je&&(0,pe.r3)(Je,".priority")||(kt=kt.updatePriority(Ne.getPriority()));const pn=V.currentWriteId,Kn=ah(r),qn=X_(kt,Ne,Kn);V.currentOutputSnapshotRaw=kt,V.currentOutputSnapshotResolved=qn,V.currentWriteId=e0(r),I.splice(I.indexOf(pn),1),d=d.concat(bb(r.serverSyncTree_,V.path,qn,V.currentWriteId,V.applyLocally)),d=d.concat(Rp(r.serverSyncTree_,pn,!0))}else ue=!0,Me="nodata",d=d.concat(Rp(r.serverSyncTree_,V.currentWriteId,!0))}cs(r.eventQueue_,t,d),d=[],ue&&(i[k].status=2,setTimeout(i[k].unwatcher,Math.floor(0)),i[k].onComplete&&l.push("nodata"===Me?()=>i[k].onComplete(null,!1,i[k].currentInputSnapshot):()=>i[k].onComplete(new Error(Me),!1,null)))}n0(r,r.transactionQueueTree_);for(let k=0;k<l.length;k++)Yc(l[k]);t0(r,r.transactionQueueTree_)}(r,Gb(r,t),l),l}function RE(r,i){let t,l=r.transactionQueueTree_;for(t=Pr(i);null!==t&&void 0===Pp(l);)l=Kv(l,t),t=Pr(i=Gi(i));return l}function Gb(r,i){const t=[];return jb(r,i,t),t.sort((l,d)=>l.order-d.order),t}function jb(r,i,t){const l=Pp(i);if(l)for(let d=0;d<l.length;d++)t.push(l[d]);qv(i,d=>{jb(r,d,t)})}function n0(r,i){const t=Pp(i);if(t){let l=0;for(let d=0;d<t.length;d++)2!==t[d].status&&(t[l]=t[d],l++);t.length=l,hm(i,t.length>0?t:void 0)}qv(i,l=>{n0(r,l)})}function r0(r,i){const t=kp(RE(r,i)),l=Kv(r.transactionQueueTree_,i);return function wE(r,i,t){let l=t?r:r.parent;for(;null!==l;){if(i(l))return!0;l=l.parent}}(l,d=>{s0(r,d)}),s0(r,l),Ab(l,d=>{s0(r,d)}),t}function s0(r,i){const t=Pp(i);if(t){const l=[];let d=[],m=-1;for(let I=0;I<t.length;I++)3===t[I].status||(1===t[I].status?((0,pe.hu)(m===I-1,"All SENT items should be at beginning of queue."),m=I,t[I].status=3,t[I].abortReason="set"):((0,pe.hu)(0===t[I].status,"Unexpected transaction status in abort"),t[I].unwatcher(),d=d.concat(Rp(r.serverSyncTree_,t[I].currentWriteId,!0)),t[I].onComplete&&l.push(t[I].onComplete.bind(null,new Error("set"),!1,null))));-1===m?hm(i,void 0):t.length=m+1,cs(r.eventQueue_,kp(i),d);for(let I=0;I<l.length;I++)Yc(l[I])}}const o0=function(r,i){const t=Nw(r),l=t.namespace;return"firebase.com"===t.domain&&Bl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||"undefined"===l)&&"localhost"!==t.domain&&Bl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ef(t.host,t.secure,l,"ws"===t.scheme||"wss"===t.scheme,i,"",l!==t.subdomain),path:new Di(t.pathString)}},Nw=function(r){let i="",t="",l="",d="",m="",I=!0,k="https",V=443;if("string"==typeof r){let Y=r.indexOf("//");Y>=0&&(k=r.substring(0,Y-1),r=r.substring(Y+2));let ue=r.indexOf("/");-1===ue&&(ue=r.length);let Me=r.indexOf("?");-1===Me&&(Me=r.length),i=r.substring(0,Math.min(ue,Me)),ue<Me&&(d=function Aw(r){let i="";const t=r.split("/");for(let l=0;l<t.length;l++)if(t[l].length>0){let d=t[l];try{d=decodeURIComponent(d.replace(/\+/g," "))}catch{}i+="/"+d}return i}(r.substring(ue,Me)));const Ne=function Ow(r){const i={};"?"===r.charAt(0)&&(r=r.substring(1));for(const t of r.split("&")){if(0===t.length)continue;const l=t.split("=");2===l.length?i[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):Pi(`Invalid query segment '${t}' in query '${r}'`)}return i}(r.substring(Math.min(r.length,Me)));Y=i.indexOf(":"),Y>=0?(I="https"===k||"wss"===k,V=parseInt(i.substring(Y+1),10)):Y=i.length;const Je=i.slice(0,Y);if("localhost"===Je.toLowerCase())t="localhost";else if(Je.split(".").length<=2)t=Je;else{const kt=i.indexOf(".");l=i.substring(0,kt).toLowerCase(),t=i.substring(kt+1),m=l}"ns"in Ne&&(m=Ne.ns)}return{host:i,port:V,domain:t,subdomain:l,secure:I,scheme:k,pathString:d,namespace:m}},Hb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xE=function(){let r=0;const i=[];return function(t){const l=t===r;let d;r=t;const m=new Array(8);for(d=7;d>=0;d--)m[d]=Hb.charAt(t%64),t=Math.floor(t/64);(0,pe.hu)(0===t,"Cannot push at time == 0");let I=m.join("");if(l){for(d=11;d>=0&&63===i[d];d--)i[d]=0;i[d]++}else for(d=0;d<12;d++)i[d]=Math.floor(64*Math.random());for(d=0;d<12;d++)I+=Hb.charAt(i[d]);return(0,pe.hu)(20===I.length,"nextPushId: Length should be 20."),I}}();class $b{constructor(i,t,l,d){this.eventType=i,this.eventRegistration=t,this.snapshot=l,this.prevName=d}getPath(){const i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,pe.Wl)(this.snapshot.exportVal())}}class zb{constructor(i,t,l){this.eventRegistration=i,this.error=t,this.path=l}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Wb{constructor(i,t){this.snapshotCallback=i,this.cancelCallback=t}onValue(i,t){this.snapshotCallback.call(null,i,t)}onCancel(i){return(0,pe.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)}get hasCancelCallback(){return!!this.cancelCallback}matches(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context}}class PE{constructor(i,t){this._repo=i,this._path=t}cancel(){const i=new pe.BH;return OE(this._repo,this._path,i.wrapCallback(()=>{})),i.promise}remove(){du("OnDisconnect.remove",this._path);const i=new pe.BH;return iy(this._repo,this._path,null,i.wrapCallback(()=>{})),i.promise}set(i){du("OnDisconnect.set",this._path),ld("OnDisconnect.set",i,this._path,!1);const t=new pe.BH;return iy(this._repo,this._path,i,t.wrapCallback(()=>{})),t.promise}setWithPriority(i,t){du("OnDisconnect.setWithPriority",this._path),ld("OnDisconnect.setWithPriority",i,this._path,!1),Zv("OnDisconnect.setWithPriority",t,!1);const l=new pe.BH;return function Lb(r,i,t,l,d){const m=ms(t,l);r.server_.onDisconnectPut(i.toString(),m.val(!0),(I,k)=>{"ok"===I&&sl(r.onDisconnect_,i,m),lh(0,d,I,k)})}(this._repo,this._path,i,t,l.wrapCallback(()=>{})),l.promise}update(i){du("OnDisconnect.update",this._path),Rb("OnDisconnect.update",i,this._path,!1);const t=new pe.BH;return function mD(r,i,t,l){if((0,pe.xb)(t))return Lo("onDisconnect().update() called with empty data.  Don't do anything."),void lh(0,l,"ok",void 0);r.server_.onDisconnectMerge(i.toString(),t,(d,m)=>{"ok"===d&&as(t,(I,k)=>{const V=ms(k);sl(r.onDisconnect_,hi(i,I),V)}),lh(0,l,d,m)})}(this._repo,this._path,i,t.wrapCallback(()=>{})),t.promise}}class hu{constructor(i,t,l,d){this._repo=i,this._path=t,this._queryParams=l,this._orderByCalled=d}get key(){return or(this._path)?null:ap(this._path)}get ref(){return new yc(this._repo,this._path)}get _queryIdentifier(){const i=$l(this._queryParams),t=Wc(i);return"{}"===t?"default":t}get _queryObject(){return $l(this._queryParams)}isEqual(i){if(!((i=(0,pe.m9)(i))instanceof hu))return!1;const t=this._repo===i._repo,l=Yg(this._path,i._path);return t&&l&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Nu(r){let i="";for(let t=r.pieceNum_;t<r.pieces_.length;t++)""!==r.pieces_[t]&&(i+="/"+encodeURIComponent(String(r.pieces_[t])));return i||"/"}(this._path)}}function sy(r,i){if(!0===r._orderByCalled)throw new Error(i+": You can't combine multiple orderBy calls.")}function Lp(r){let i=null,t=null;if(r.hasStart()&&(i=r.getIndexStartValue()),r.hasEnd()&&(t=r.getIndexEndValue()),r.getIndex()===Dl){const l="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",d="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==wl)throw new Error(l);if("string"!=typeof i)throw new Error(d)}if(r.hasEnd()){if(r.getIndexEndName()!==zi)throw new Error(l);if("string"!=typeof t)throw new Error(d)}}else if(r.getIndex()===fi){if(null!=i&&!ny(i)||null!=t&&!ny(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,pe.hu)(r.getIndex()instanceof Jg||r.getIndex()===vp,"unknown index type."),null!=i&&"object"==typeof i||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Kb(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class yc extends hu{constructor(i,t){super(i,t,new rd,!1)}get parent(){const i=bv(this._path);return null===i?null:new yc(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}class bm{constructor(i,t,l){this._node=i,this.ref=t,this._index=l}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(i){const t=new Di(i),l=Em(this.ref,i);return new bm(this._node.getChild(t),l,fi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(i){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(l,d)=>i(new bm(d,Em(this.ref,l),fi)))}hasChild(i){const t=new Di(i);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Mw(r,i){return(r=(0,pe.m9)(r))._checkNotDeleted("ref"),void 0!==i?Em(r._root,i):r._root}function Rw(r,i){(r=(0,pe.m9)(r))._checkNotDeleted("refFromURL");const t=o0(i,r._repo.repoInfo_.nodeAdmin);xb("refFromURL",t);const l=t.repoInfo;return!r._repo.repoInfo_.isCustomHost()&&l.host!==r._repo.repoInfo_.host&&Bl("refFromURL: Host name does not match the current database: (found "+l.host+" but expected "+r._repo.repoInfo_.host+")"),Mw(r,t.path.toString())}function Em(r,i){return null===Pr((r=(0,pe.m9)(r))._path)?ww("child","path",i,!1):mm("child","path",i,!1),new yc(r._repo,hi(r._path,i))}function l0(r,i){r=(0,pe.m9)(r),du("set",r._path),ld("set",i,r._path,!1);const t=new pe.BH;return kb(r._repo,r._path,i,null,t.wrapCallback(()=>{})),t.promise}function FE(r,i){Rb("update",i,r._path,!1);const t=new pe.BH;return function Fb(r,i,t,l){ym(r,"update",{path:i.toString(),value:t});let d=!0;const m=ah(r),I={};if(as(t,(k,V)=>{d=!1,I[k]=EE(hi(i,k),ms(V),r.serverSyncTree_,m)}),d)Lo("update() called with empty data.  Don't do anything."),lh(0,l,"ok",void 0);else{const k=e0(r),V=function hw(r,i,t,l){!function cu(r,i,t,l){(0,pe.hu)(l>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:i,children:t,writeId:l,visible:!0}),r.visibleWrites=U_(r.visibleWrites,i,t),r.lastWriteId=l}(r.pendingWriteTree_,i,t,l);const d=us.fromObject(t);return um(r,new Xd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,d))}(r.serverSyncTree_,i,I,k);ry(r.eventQueue_,V),r.server_.merge(i.toString(),t,(Y,ue)=>{const Me="ok"===Y;Me||Pi("update at "+i+" failed: "+Y);const Ne=Rp(r.serverSyncTree_,k,!Me),Je=Ne.length>0?vm(r,i):i;cs(r.eventQueue_,Je,Ne),lh(0,l,Y,ue)}),as(t,Y=>{const ue=r0(r,hi(i,Y));vm(r,ue)}),cs(r.eventQueue_,i,[])}}(r._repo,r._path,i,t.wrapCallback(()=>{})),t.promise}function vD(r){r=(0,pe.m9)(r);const i=new Wb(()=>{}),t=new Up(i);return function Tw(r,i,t){const l=function mw(r,i){const t=i._path;let l=null;r.syncPointTree_.foreachOnPath(t,(Y,ue)=>{const Me=Xi(Y,t);l=l||Dr(ue,Me)});let d=r.syncPointTree_.get(t);d?l=l||Dr(d,Ii()):(d=new Ze,r.syncPointTree_=r.syncPointTree_.set(t,d));const m=null!=l,I=m?new mc(l,!0,!1):null;return function u(r){return L_(r.viewCache_)}(Ai(d,i,Tp(r.pendingWriteTree_,i._path),m?I.getNode():lr.EMPTY_NODE,m))}(r.serverSyncTree_,i);return null!=l?Promise.resolve(l):r.server_.get(i).then(d=>{const m=ms(d).withIndex(i._queryParams.getIndex());let I;if(wb(r.serverSyncTree_,i,t,!0),i._queryParams.loadsAllData())I=Y_(r.serverSyncTree_,i._path,m);else{const k=dm(r.serverSyncTree_,i);I=Eb(r.serverSyncTree_,i._path,m,k)}return cs(r.eventQueue_,i._path,I),Z_(r.serverSyncTree_,i,t,null,!0),m},d=>(ym(r,"get for query "+(0,pe.Wl)(i)+" failed: "+d),Promise.reject(new Error(d))))}(r._repo,r,t).then(l=>new bm(l,new yc(r._repo,r._path),r._queryParams.getIndex()))}class Up{constructor(i){this.callbackContext=i}respondsTo(i){return"value"===i}createEvent(i,t){const l=t._queryParams.getIndex();return new $b("value",this,new bm(i.snapshotNode,new yc(t._repo,t._path),l))}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,null)}createCancelEvent(i,t){return this.callbackContext.hasCancelCallback?new zb(this,i,t):null}matches(i){return i instanceof Up&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class oy{constructor(i,t){this.eventType=i,this.callbackContext=t}respondsTo(i){let t="children_added"===i?"child_added":i;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(i,t){return this.callbackContext.hasCancelCallback?new zb(this,i,t):null}createEvent(i,t){(0,pe.hu)(null!=i.childName,"Child events should have a childName.");const l=Em(new yc(t._repo,t._path),i.childName),d=t._queryParams.getIndex();return new $b(i.type,this,new bm(i.snapshotNode,l,d),i.prevName)}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,i.prevName)}matches(i){return i instanceof oy&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ay(r,i,t,l,d){let m;if("object"==typeof l&&(m=void 0,d=l),"function"==typeof l&&(m=l),d&&d.onlyOnce){const V=t,Y=(ue,Me)=>{Ub(r._repo,r,k),V(ue,Me)};Y.userCallback=t.userCallback,Y.context=t.context,t=Y}const I=new Wb(t,m||void 0),k="value"===i?new Up(I):new oy(i,I);return function NE(r,i,t){let l;l=".info"===Pr(i._path)?wb(r.infoSyncTree_,i,t):wb(r.serverSyncTree_,i,t),Pb(r.eventQueue_,i._path,l)}(r._repo,r,k),()=>Ub(r._repo,r,k)}function LE(r,i,t,l){return ay(r,"value",i,t,l)}function xw(r,i,t,l){return ay(r,"child_added",i,t,l)}function UE(r,i,t,l){return ay(r,"child_changed",i,t,l)}function BE(r,i,t,l){return ay(r,"child_moved",i,t,l)}function ly(r,i,t,l){return ay(r,"child_removed",i,t,l)}function VE(r,i,t){let l=null;const d=t?new Wb(t):null;"value"===i?l=new Up(d):i&&(l=new oy(i,d)),Ub(r._repo,r,l)}class ud{}class Pw extends ud{constructor(i,t){super(),this._value=i,this._key=t}_apply(i){ld("endAt",this._value,i._path,!0);const t=Ov(i._queryParams,this._value,this._key);if(Kb(t),Lp(t),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hu(i._repo,i._path,t,i._orderByCalled)}}class kw extends ud{constructor(i,t){super(),this._value=i,this._key=t}_apply(i){ld("endBefore",this._value,i._path,!1);const t=function jl(r,i,t){let l;return l=Ov(r,i,r.index_===Dl||t?t:wl),l.endBeforeSet_=!0,l}(i._queryParams,this._value,this._key);if(Kb(t),Lp(t),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hu(i._repo,i._path,t,i._orderByCalled)}}class GE extends ud{constructor(i,t){super(),this._value=i,this._key=t}_apply(i){ld("startAt",this._value,i._path,!0);const t=R_(i._queryParams,this._value,this._key);if(Kb(t),Lp(t),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hu(i._repo,i._path,t,i._orderByCalled)}}class Lw extends ud{constructor(i,t){super(),this._value=i,this._key=t}_apply(i){ld("startAfter",this._value,i._path,!1);const t=function gE(r,i,t){let l;return l=R_(r,i,r.index_===Dl||t?t:zi),l.startAfterSet_=!0,l}(i._queryParams,this._value,this._key);if(Kb(t),Lp(t),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hu(i._repo,i._path,t,i._orderByCalled)}}class HE extends ud{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hu(i._repo,i._path,function cw(r,i){const t=r.copy();return t.limitSet_=!0,t.limit_=i,t.viewFrom_="l",t}(i._queryParams,this._limit),i._orderByCalled)}}class vc extends ud{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hu(i._repo,i._path,function Xn(r,i){const t=r.copy();return t.limitSet_=!0,t.limit_=i,t.viewFrom_="r",t}(i._queryParams,this._limit),i._orderByCalled)}}class qb extends ud{constructor(i){super(),this._path=i}_apply(i){sy(i,"orderByChild");const t=new Di(this._path);if(or(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const l=new Jg(t),d=Hl(i._queryParams,l);return Lp(d),new hu(i._repo,i._path,d,!0)}}class DD extends ud{_apply(i){sy(i,"orderByKey");const t=Hl(i._queryParams,Dl);return Lp(t),new hu(i._repo,i._path,t,!0)}}class Vw extends ud{_apply(i){sy(i,"orderByPriority");const t=Hl(i._queryParams,fi);return Lp(t),new hu(i._repo,i._path,t,!0)}}class Gw extends ud{_apply(i){sy(i,"orderByValue");const t=Hl(i._queryParams,vp);return Lp(t),new hu(i._repo,i._path,t,!0)}}class Zb extends ud{constructor(i,t){super(),this._value=i,this._key=t}_apply(i){if(ld("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Pw(this._value,this._key)._apply(new GE(this._value,this._key)._apply(i))}}function Lu(r,...i){let t=(0,pe.m9)(r);for(const l of i)t=l._apply(t);return t}(function Ot(r){(0,pe.hu)(!Oe,"__referenceConstructor has already been defined"),Oe=r})(yc),function dw(r){(0,pe.hu)(!Gv,"__referenceConstructor has already been defined"),Gv=r}(yc);const Hw="FIREBASE_DATABASE_EMULATOR_HOST",c0={};let Jb=!1;function Qb(r,i,t,l,d){let m=l||r.options.databaseURL;void 0===m&&(r.options.projectId||Bl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lo("Using default host for project ",r.options.projectId),m=`${r.options.projectId}-default-rtdb.firebaseio.com`);let V,Y,I=o0(m,d),k=I.repoInfo;typeof process<"u"&&process.env&&(Y=process.env[Hw]),Y?(V=!0,m=`http://${Y}?ns=${k.namespace}`,I=o0(m,d),k=I.repoInfo):V=!I.repoInfo.secure;const ue=d&&V?new $d($d.OWNER):new uv(r.name,r.options,i);xb("Invalid Firebase Database URL",I),or(I.path)||Bl("Database URL must point to the root of a Firebase Database (not including a child path).");const Me=function Xb(r,i,t,l){let d=c0[i.name];d||(d={},c0[i.name]=d);let m=d[r.toURLString()];return m&&Bl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),m=new gD(r,Jb,t,l),d[r.toURLString()]=m,m}(k,r,ue,new Mg(r.name,t));return new pf(Me,r)}class pf{constructor(i,t){this._repoInternal=i,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function TE(r,i,t){if(r.stats_=rf(r.repoInfo_),r.forceRestClient_||lv())r.server_=new ls(r.repoInfo_,(l,d,m,I)=>{SE(r,l,d,m,I)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Qv(r,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,pe.Wl)(t)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}r.persistentConnection_=new hc(r.repoInfo_,i,(l,d,m,I)=>{SE(r,l,d,m,I)},l=>{Qv(r,l)},l=>{!function Cw(r,i){as(i,(t,l)=>{Xv(r,t,l)})}(r,l)},r.authTokenProvider_,r.appCheckProvider_,t),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(l=>{r.server_.refreshAuthToken(l)}),r.appCheckProvider_.addTokenChangeListener(l=>{r.server_.refreshAppCheckToken(l.token)}),r.statsReporter_=function np(r,i){const t=r.toString();return nf[t]||(nf[t]=i()),nf[t]}(r.repoInfo_,()=>new db(r.stats_,r.server_)),r.infoData_=new cb,r.infoSyncTree_=new vb({startListening:(l,d,m,I)=>{let k=[];const V=r.infoData_.getNode(l._path);return V.isEmpty()||(k=Y_(r.infoSyncTree_,l._path,V),setTimeout(()=>{I("ok")},0)),k},stopListening:()=>{}}),Xv(r,"connected",!1),r.serverSyncTree_=new vb({startListening:(l,d,m,I)=>(r.server_.listen(l,m,d,(k,V)=>{const Y=I(k,V);cs(r.eventQueue_,l._path,Y)}),[]),stopListening:(l,d)=>{r.server_.unlisten(l,d)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yc(this._repo,Ii())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zw(r,i){const t=c0[i];(!t||t[r.key]!==r)&&Bl(`Database ${i}(${r.repoInfo_}) has already been deleted.`),Bb(r),delete t[r.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&Bl("Cannot call "+i+" on a deleted database.")}}function eE(){Er.IS_TRANSPORT_INITIALIZED&&Pi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tE(){eE(),Au.forceDisallow()}function zE(){eE(),lu.forceDisallow(),Au.forceAllow()}function Yw(r,i){Ud(r,i)}const WE={".sv":"timestamp"};class Jw{constructor(i,t){this.committed=i,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hc.prototype.simpleListen=function(r,i){this.sendRequest("q",{p:r},i)},hc.prototype.echo=function(r,i){this.sendRequest("echo",{d:r},i)},function Zw(r){ov(Xu.SDK_VERSION),(0,Xu._registerComponent)(new xc.wA("database",(i,{instanceIdentifier:t})=>Qb(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Xu.registerVersion)(Tg,"0.14.4",r),(0,Xu.registerVersion)(Tg,"0.14.4","esm2017")}();const QE=new Zf.Yd("@firebase/database-compat"),nE=function(r){QE.warn("FIREBASE WARNING: "+r)};class h0{constructor(i){this._delegate=i}cancel(i){(0,pe.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,pe.Wj)("OnDisconnect.cancel","onComplete",i,!0);const t=this._delegate.cancel();return i&&t.then(()=>i(null),l=>i(l)),t}remove(i){(0,pe.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,pe.Wj)("OnDisconnect.remove","onComplete",i,!0);const t=this._delegate.remove();return i&&t.then(()=>i(null),l=>i(l)),t}set(i,t){(0,pe.Dv)("OnDisconnect.set",1,2,arguments.length),(0,pe.Wj)("OnDisconnect.set","onComplete",t,!0);const l=this._delegate.set(i);return t&&l.then(()=>t(null),d=>t(d)),l}setWithPriority(i,t,l){(0,pe.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,pe.Wj)("OnDisconnect.setWithPriority","onComplete",l,!0);const d=this._delegate.setWithPriority(i,t);return l&&d.then(()=>l(null),m=>l(m)),d}update(i,t){if((0,pe.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(i)){const d={};for(let m=0;m<i.length;++m)d[""+m]=i[m];i=d,nE("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,pe.Wj)("OnDisconnect.update","onComplete",t,!0);const l=this._delegate.update(i);return t&&l.then(()=>t(null),d=>t(d)),l}}class ew{constructor(i,t){this.committed=i,this.snapshot=t}toJSON(){return(0,pe.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class gf{constructor(i,t){this._database=i,this._delegate=t}val(){return(0,pe.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,pe.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,pe.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,pe.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(i){return(0,pe.Dv)("DataSnapshot.child",0,1,arguments.length),i=String(i),mm("DataSnapshot.child","path",i,!1),new gf(this._database,this._delegate.child(i))}hasChild(i){return(0,pe.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mm("DataSnapshot.hasChild","path",i,!1),this._delegate.hasChild(i)}getPriority(){return(0,pe.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(i){return(0,pe.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,pe.Wj)("DataSnapshot.forEach","action",i,!1),this._delegate.forEach(t=>i(new gf(this._database,t)))}hasChildren(){return(0,pe.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,pe.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,pe.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $a{constructor(i,t){this.database=i,this._delegate=t}on(i,t,l,d){var m;(0,pe.Dv)("Query.on",2,4,arguments.length),(0,pe.Wj)("Query.on","callback",t,!1);const I=$a.getCancelAndContextArgs_("Query.on",l,d),k=(Y,ue)=>{t.call(I.context,new gf(this.database,Y),ue)};k.userCallback=t,k.context=I.context;const V=null===(m=I.cancel)||void 0===m?void 0:m.bind(I.context);switch(i){case"value":return LE(this._delegate,k,V),t;case"child_added":return xw(this._delegate,k,V),t;case"child_removed":return ly(this._delegate,k,V),t;case"child_changed":return UE(this._delegate,k,V),t;case"child_moved":return BE(this._delegate,k,V),t;default:throw new Error((0,pe.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(i,t,l){if((0,pe.Dv)("Query.off",0,3,arguments.length),function(r,i,t){if(void 0!==i)switch(i){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,pe.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,i),(0,pe.Wj)("Query.off","callback",t,!0),(0,pe.lb)("Query.off","context",l,!0),t){const d=()=>{};d.userCallback=t,d.context=l,VE(this._delegate,i,d)}else VE(this._delegate,i)}get(){return vD(this._delegate).then(i=>new gf(this.database,i))}once(i,t,l,d){(0,pe.Dv)("Query.once",1,4,arguments.length),(0,pe.Wj)("Query.once","callback",t,!0);const m=$a.getCancelAndContextArgs_("Query.once",l,d),I=new pe.BH,k=(Y,ue)=>{const Me=new gf(this.database,Y);t&&t.call(m.context,Me,ue),I.resolve(Me)};k.userCallback=t,k.context=m.context;const V=Y=>{m.cancel&&m.cancel.call(m.context,Y),I.reject(Y)};switch(i){case"value":LE(this._delegate,k,V,{onlyOnce:!0});break;case"child_added":xw(this._delegate,k,V,{onlyOnce:!0});break;case"child_removed":ly(this._delegate,k,V,{onlyOnce:!0});break;case"child_changed":UE(this._delegate,k,V,{onlyOnce:!0});break;case"child_moved":BE(this._delegate,k,V,{onlyOnce:!0});break;default:throw new Error((0,pe.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return I.promise}limitToFirst(i){return(0,pe.Dv)("Query.limitToFirst",1,1,arguments.length),new $a(this.database,Lu(this._delegate,function wD(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new HE(r)}(i)))}limitToLast(i){return(0,pe.Dv)("Query.limitToLast",1,1,arguments.length),new $a(this.database,Lu(this._delegate,function Uw(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new vc(r)}(i)))}orderByChild(i){return(0,pe.Dv)("Query.orderByChild",1,1,arguments.length),new $a(this.database,Lu(this._delegate,function Bw(r){if("$key"===r)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===r)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===r)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mm("orderByChild","path",r,!1),new qb(r)}(i)))}orderByKey(){return(0,pe.Dv)("Query.orderByKey",0,0,arguments.length),new $a(this.database,Lu(this._delegate,function Fu(){return new DD}()))}orderByPriority(){return(0,pe.Dv)("Query.orderByPriority",0,0,arguments.length),new $a(this.database,Lu(this._delegate,function Yb(){return new Vw}()))}orderByValue(){return(0,pe.Dv)("Query.orderByValue",0,0,arguments.length),new $a(this.database,Lu(this._delegate,function jw(){return new Gw}()))}startAt(i=null,t){return(0,pe.Dv)("Query.startAt",0,2,arguments.length),new $a(this.database,Lu(this._delegate,function ED(r=null,i){return gm("startAt","key",i,!0),new GE(r,i)}(i,t)))}startAfter(i=null,t){return(0,pe.Dv)("Query.startAfter",0,2,arguments.length),new $a(this.database,Lu(this._delegate,function jE(r,i){return gm("startAfter","key",i,!0),new Lw(r,i)}(i,t)))}endAt(i=null,t){return(0,pe.Dv)("Query.endAt",0,2,arguments.length),new $a(this.database,Lu(this._delegate,function bD(r,i){return gm("endAt","key",i,!0),new Pw(r,i)}(i,t)))}endBefore(i=null,t){return(0,pe.Dv)("Query.endBefore",0,2,arguments.length),new $a(this.database,Lu(this._delegate,function Fw(r,i){return gm("endBefore","key",i,!0),new kw(r,i)}(i,t)))}equalTo(i,t){return(0,pe.Dv)("Query.equalTo",1,2,arguments.length),new $a(this.database,Lu(this._delegate,function $E(r,i){return gm("equalTo","key",i,!0),new Zb(r,i)}(i,t)))}toString(){return(0,pe.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,pe.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(i){if((0,pe.Dv)("Query.isEqual",1,1,arguments.length),!(i instanceof $a))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(i._delegate)}static getCancelAndContextArgs_(i,t,l){const d={cancel:void 0,context:void 0};if(t&&l)d.cancel=t,(0,pe.Wj)(i,"cancel",d.cancel,!0),d.context=l,(0,pe.lb)(i,"context",d.context,!0);else if(t)if("object"==typeof t&&null!==t)d.context=t;else{if("function"!=typeof t)throw new Error((0,pe.gK)(i,"cancelOrContext")+" must either be a cancel callback or a context object.");d.cancel=t}return d}get ref(){return new Uu(this.database,new yc(this._delegate._repo,this._delegate._path))}}class Uu extends $a{constructor(i,t){super(i,new hu(t._repo,t._path,new rd,!1)),this.database=i,this._delegate=t}getKey(){return(0,pe.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(i){return(0,pe.Dv)("Reference.child",1,1,arguments.length),"number"==typeof i&&(i=String(i)),new Uu(this.database,Em(this._delegate,i))}getParent(){(0,pe.Dv)("Reference.parent",0,0,arguments.length);const i=this._delegate.parent;return i?new Uu(this.database,i):null}getRoot(){return(0,pe.Dv)("Reference.root",0,0,arguments.length),new Uu(this.database,this._delegate.root)}set(i,t){(0,pe.Dv)("Reference.set",1,2,arguments.length),(0,pe.Wj)("Reference.set","onComplete",t,!0);const l=l0(this._delegate,i);return t&&l.then(()=>t(null),d=>t(d)),l}update(i,t){if((0,pe.Dv)("Reference.update",1,2,arguments.length),Array.isArray(i)){const d={};for(let m=0;m<i.length;++m)d[""+m]=i[m];i=d,nE("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}du("Reference.update",this._delegate._path),(0,pe.Wj)("Reference.update","onComplete",t,!0);const l=FE(this._delegate,i);return t&&l.then(()=>t(null),d=>t(d)),l}setWithPriority(i,t,l){(0,pe.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,pe.Wj)("Reference.setWithPriority","onComplete",l,!0);const d=function kE(r,i,t){if(du("setWithPriority",r._path),ld("setWithPriority",i,r._path,!1),Zv("setWithPriority",t,!1),".length"===r.key||".keys"===r.key)throw"setWithPriority failed: "+r.key+" is a read-only object.";const l=new pe.BH;return kb(r._repo,r._path,i,t,l.wrapCallback(()=>{})),l.promise}(this._delegate,i,t);return l&&d.then(()=>l(null),m=>l(m)),d}remove(i){(0,pe.Dv)("Reference.remove",0,1,arguments.length),(0,pe.Wj)("Reference.remove","onComplete",i,!0);const t=function yD(r){return du("remove",r._path),l0(r,null)}(this._delegate);return i&&t.then(()=>i(null),l=>i(l)),t}transaction(i,t,l){(0,pe.Dv)("Reference.transaction",1,3,arguments.length),(0,pe.Wj)("Reference.transaction","transactionUpdate",i,!1),(0,pe.Wj)("Reference.transaction","onComplete",t,!0),function(r,i,t,l){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,pe.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,l);const d=function qE(r,i,t){var l;if(r=(0,pe.m9)(r),du("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const d=null===(l=t?.applyLocally)||void 0===l||l,m=new pe.BH,k=LE(r,()=>{});return function Vb(r,i,t,l,d,m){ym(r,"transaction on "+i);const I={path:i,update:t,onComplete:l,status:null,order:__(),applyLocally:m,retryCount:0,unwatcher:d,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},k=ME(r,i,void 0);I.currentInputSnapshot=k;const V=I.update(k.val());if(void 0===V)I.unwatcher(),I.currentOutputSnapshotRaw=null,I.currentOutputSnapshotResolved=null,I.onComplete&&I.onComplete(null,!1,I.currentInputSnapshot);else{pm("transaction failed: Data returned ",V,I.path),I.status=0;const Y=Kv(r.transactionQueueTree_,i),ue=Pp(Y)||[];let Me;ue.push(I),hm(Y,ue),"object"==typeof V&&null!==V&&(0,pe.r3)(V,".priority")?(Me=(0,pe.DV)(V,".priority"),(0,pe.hu)(ny(Me),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Me=(jv(r.serverSyncTree_,i)||lr.EMPTY_NODE).getPriority().val();const Ne=ah(r),Je=ms(V,Me),kt=X_(Je,k,Ne);I.currentOutputSnapshotRaw=Je,I.currentOutputSnapshotResolved=kt,I.currentWriteId=e0(r);const Yt=bb(r.serverSyncTree_,i,kt,I.currentWriteId,I.applyLocally);cs(r.eventQueue_,i,Yt),t0(r,r.transactionQueueTree_)}}(r._repo,r._path,i,(V,Y,ue)=>{let Me=null;V?m.reject(V):(Me=new bm(ue,new yc(r._repo,r._path),fi),m.resolve(new Jw(Y,Me)))},k,d),m.promise}(this._delegate,i,{applyLocally:l}).then(m=>new ew(m.committed,new gf(this.database,m.snapshot)));return t&&d.then(m=>t(null,m.committed,m.snapshot),m=>t(m,!1,null)),d}setPriority(i,t){(0,pe.Dv)("Reference.setPriority",1,2,arguments.length),(0,pe.Wj)("Reference.setPriority","onComplete",t,!0);const l=function u0(r,i){r=(0,pe.m9)(r),du("setPriority",r._path),Zv("setPriority",i,!1);const t=new pe.BH;return kb(r._repo,hi(r._path,".priority"),i,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,i);return t&&l.then(()=>t(null),d=>t(d)),l}push(i,t){(0,pe.Dv)("Reference.push",0,2,arguments.length),(0,pe.Wj)("Reference.push","onComplete",t,!0);const l=function a0(r,i){r=(0,pe.m9)(r),du("push",r._path),ld("push",i,r._path,!0);const t=Jv(r._repo),l=xE(t),d=Em(r,l),m=Em(r,l);let I;return I=null!=i?l0(m,i).then(()=>m):Promise.resolve(m),d.then=I.then.bind(I),d.catch=I.then.bind(I,void 0),d}(this._delegate,i),d=l.then(I=>new Uu(this.database,I));t&&d.then(()=>t(null),I=>t(I));const m=new Uu(this.database,l);return m.then=d.then.bind(d),m.catch=d.catch.bind(d,void 0),m}onDisconnect(){return du("Reference.onDisconnect",this._delegate._path),new h0(new PE(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class f0{constructor(i,t){this._delegate=i,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:tE,forceLongPolling:zE}}useEmulator(i,t,l={}){!function Ww(r,i,t,l={}){(r=(0,pe.m9)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&Bl("Cannot call useEmulator() after instance has already been initialized.");const d=r._repoInternal;let m;if(d.repoInfo_.nodeAdmin)l.mockUserToken&&Bl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),m=new $d($d.OWNER);else if(l.mockUserToken){const I="string"==typeof l.mockUserToken?l.mockUserToken:(0,pe.Sg)(l.mockUserToken,r.app.options.projectId);m=new $d(I)}!function $w(r,i,t,l){r.repoInfo_=new ef(`${i}:${t}`,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0),l&&(r.authTokenProvider_=l)}(d,i,t,m)}(this._delegate,i,t,l)}ref(i){if((0,pe.Dv)("database.ref",0,1,arguments.length),i instanceof Uu){const t=Rw(this._delegate,i.toString());return new Uu(this,t)}{const t=Mw(this._delegate,i);return new Uu(this,t)}}refFromURL(i){(0,pe.Dv)("database.refFromURL",1,1,arguments.length);const l=Rw(this._delegate,i);return new Uu(this,l)}goOffline(){return(0,pe.Dv)("database.goOffline",0,0,arguments.length),function Kw(r){(r=(0,pe.m9)(r))._checkNotDeleted("goOffline"),Bb(r._repo)}(this._delegate)}goOnline(){return(0,pe.Dv)("database.goOnline",0,0,arguments.length),function qw(r){(r=(0,pe.m9)(r))._checkNotDeleted("goOnline"),function _m(r){r.persistentConnection_&&r.persistentConnection_.resume(CE)}(r._repo)}(this._delegate)}}f0.ServerValue={TIMESTAMP:function CD(){return WE}(),increment:r=>function KE(r){return{".sv":{increment:r}}}(r)};var tw=Object.freeze({__proto__:null,initStandalone:function TD({app:r,url:i,version:t,customAuthImpl:l,namespace:d,nodeAdmin:m=!1}){ov(t);const I=new xc.zt("auth-internal",new xc.H0("database-standalone"));return I.setComponent(new xc.wA("auth-internal",()=>l,"PRIVATE")),{instance:new f0(Qb(r,I,void 0,i,m),r),namespace:d}}});const Qw=f0.ServerValue;function tD(r){return null==r}function nD(r){return"function"==typeof r.set}function rD(r,i){return nD(i)?i:r.ref(i)}function iD(r,i){if(function eD(r){return"string"==typeof r}(r))return i.stringCase();if(nD(r))return i.firebaseCase();if(function SD(r){return"function"==typeof r.exportVal}(r))return i.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof r)}function uy(r,i,t="on",l=Qt.z){return new et.y(d=>{let m=null;return m=r[t](i,(I,k)=>{l.schedule(()=>{d.next({snapshot:I,prevKey:k})}),"once"===t&&l.schedule(()=>d.complete())},I=>{l.schedule(()=>d.error(I))}),"on"===t?{unsubscribe(){null!=m&&r.off(i,m)}}:{unsubscribe(){}}}).pipe((0,tr.U)(d=>{const{snapshot:m,prevKey:I}=d;let k=null;return m.exists()&&(k=m.key),{type:i,payload:m,prevKey:I,key:k}}),(0,iv.B)())}function nw(r,i){const t=r.length;for(let l=0;l<t;l++)if(r[l].payload.key===i)return l;return-1}function rw(r,i){const{payload:t,prevKey:l,key:d}=i,m=nw(r,d),I=function sD(r,i){if(tD(i))return 0;{const t=nw(r,i);return-1===t?r.length:t+1}}(r,l);switch(i.type){case"value":if(i.payload&&i.payload.exists()){let k=null;i.payload.forEach(V=>{const Y={payload:V,type:"value",prevKey:k,key:V.key};return k=V.key,r=[...r,Y],!1})}return r;case"child_added":if(m>-1){const k=r[m-1];(k&&k.key||null)!==l&&(r=r.filter(V=>V.payload.key!==t.key)).splice(I,0,i)}else{if(null==l)return[i,...r];(r=r.slice()).splice(I,0,i)}return r;case"child_removed":return r.filter(k=>k.payload.key!==t.key);case"child_changed":return r.map(k=>k.payload.key===d?i:k);case"child_moved":if(m>-1){const k=r.splice(m,1)[0];return(r=r.slice()).splice(I,0,k),r}return r;default:return r}}function mf(r){return(tD(r)||0===r.length)&&(r=["child_added","child_removed","child_changed","child_moved"]),r}function rE(r,i,t){return function p0(r,i,t){return uy(r,"value","once",t).pipe((0,Pt.w)(l=>{const d=[(0,_t.of)(l)];return i.forEach(m=>d.push(uy(r,m,"on",t))),(0,Hn.T)(...d).pipe((0,sv.R)(rw,[]))}),(0,On.x)())}(r,i=mf(i),t)}function g0(r,i,t){const l=(i=mf(i)).map(d=>uy(r,d,"on",t));return(0,Hn.T)(...l)}function m0(r,i){return function(l,d){return iD(l,{stringCase:()=>r.child(l)[i](d),firebaseCase:()=>l[i](d),snapshotCase:()=>l.ref[i](d)})}}function _0(r){return function(t){return t?iD(t,{stringCase:()=>r.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):r.remove()}}function aD(r,i){return function(){return uy(r,"value","on",i)}}!function Xw(r){r.INTERNAL.registerComponent(new xc.wA("database-compat",(i,{instanceIdentifier:t})=>{const l=i.getProvider("app-compat").getImmediate(),d=i.getProvider("database").getImmediate({identifier:t});return new f0(d,l)},"PUBLIC").setServiceProps({Reference:Uu,Query:$a,Database:f0,DataSnapshot:gf,enableLogging:Yw,INTERNAL:tw,ServerValue:Qw}).setMultipleInstances(!0)),r.registerVersion("@firebase/database-compat","0.3.4")}(Qu.Z);const ND=new p.OlP("angularfire2.realtimeDatabaseURL"),iw=new p.OlP("angularfire2.database.use-emulator");let lD=(()=>{class r{constructor(t,l,d,m,I,k,V,Y,ue,Me,Ne,Je,kt,Yt,pn){this.schedulers=k;const Kn=V,qn=(0,Ll.on)(t,I,l);Y&&(0,Eu.nw)(qn,I,ue,Ne,Je,kt,Me,Yt),this.database=(0,Ll.cc)(`${qn.name}.database.${d}`,"AngularFireDatabase",qn.name,()=>{const ur=I.runOutsideAngular(()=>qn.database(d||void 0));return Kn&&ur.useEmulator(...Kn),ur},[Kn])}list(t,l){const d=this.schedulers.ngZone.runOutsideAngular(()=>rD(this.database,t));let m=d;return l&&(m=l(d)),function AD(r,i){const t=i.schedulers.outsideAngular,l=i.schedulers.ngZone.run(()=>r.ref);return{query:r,update:m0(l,"update"),set:m0(l,"set"),push:d=>l.push(d),remove:_0(l),snapshotChanges:d=>rE(r,d,t).pipe(gs.iC),stateChanges:d=>g0(r,d,t).pipe(gs.iC),auditTrail:d=>function iE(r,i,t){return function sE(r,i,t){return function oD(r,i){return uy(r,"value","on",i).pipe((0,tr.U)(t=>{let l;return t.payload.forEach(d=>(l=d.key,!1)),{data:t,lastKeyToLoad:l}}))}(r,t).pipe(kr(i),(0,tr.U)(([d,m])=>{const I=d.lastKeyToLoad,k=m.map(V=>V.key);return{actions:m,lastKeyToLoad:I,loadedKeys:k}}),function tb(r){return(0,zn.e)((i,t)=>{let l=!1,d=0;i.subscribe((0,vt.x)(t,m=>(l||(l=!r(m,d++)))&&t.next(m)))})}(d=>-1===d.loadedKeys.indexOf(d.lastKeyToLoad)),(0,tr.U)(d=>d.actions))}(r,g0(r,i).pipe((0,sv.R)((d,m)=>[...d,m],[])),t)}(r,d,t).pipe(gs.iC),valueChanges:(d,m)=>rE(r,d,t).pipe((0,tr.U)(k=>k.map(V=>m&&m.idField?Object.assign(Object.assign({},V.payload.val()),{[m.idField]:V.key}):V.payload.val())),gs.iC)}}(m,this)}object(t){return function OD(r,i){return{query:r,snapshotChanges:()=>aD(r,i.schedulers.outsideAngular)().pipe(gs.iC),update:t=>r.ref.update(t),set:t=>r.ref.set(t),remove:()=>r.ref.remove(),valueChanges:()=>aD(r,i.schedulers.outsideAngular)().pipe(gs.iC,(0,tr.U)(l=>l.payload.exists()?l.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>rD(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return r.\u0275fac=function(t){return new(t||r)(p.LFG(Ll.Dh),p.LFG(Ll.xv,8),p.LFG(ND,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(gs.HU),p.LFG(iw,8),p.LFG(Eu.zQ,8),p.LFG(Eu.Qv,8),p.LFG(Eu.L6,8),p.LFG(Eu._Q,8),p.LFG(Eu.rT,8),p.LFG(Eu.lh,8),p.LFG(Eu.f7,8),p.LFG(Fd.nm,8))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),uD=(()=>{class r{constructor(){Hc.Z.registerVersion("angularfire",gs.q4.full,"rtdb-compat")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({providers:[lD]}),r})();var cD=G(6743),dD=G(529);let sw=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=p.oAB({type:r,bootstrap:[ke]}),r.\u0275inj=p.cJS({providers:[Ie.e],imports:[b.b2,Le,ng,Ll.hO.initializeApp(cD.N.firebase),Eu.ww,rv.yb,nv,uD,dD.JF]}),r})();b.q6().bootstrapModule(sw).catch(r=>console.error(r))},1135:(sn,qe,G)=>{G.d(qe,{X:()=>Z});var b=G(7579);class Z extends b.x{constructor(Ie){super(),this._value=Ie}get value(){return this.getValue()}_subscribe(Ie){const Pe=super._subscribe(Ie);return!Pe.closed&&Ie.next(this._value),Pe}getValue(){const{hasError:Ie,thrownError:Pe,_value:xe}=this;if(Ie)throw Pe;return this._throwIfClosed(),xe}next(Ie){super.next(this._value=Ie)}}},9751:(sn,qe,G)=>{G.d(qe,{y:()=>Le});var b=G(930),Z=G(727),p=G(8822),Ie=G(9635),Pe=G(2416),xe=G(576),He=G(2806);let Le=(()=>{class ke{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const _t=new ke;return _t.source=this,_t.operator=Ke,_t}subscribe(Ke,_t,xt){const tt=function ve(ke){return ke&&ke instanceof b.Lv||function be(ke){return ke&&(0,xe.m)(ke.next)&&(0,xe.m)(ke.error)&&(0,xe.m)(ke.complete)}(ke)&&(0,Z.Nn)(ke)}(Ke)?Ke:new b.Hp(Ke,_t,xt);return(0,He.x)(()=>{const{operator:gt,source:we}=this;tt.add(gt?gt.call(tt,we):we?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(_t){Ke.error(_t)}}forEach(Ke,_t){return new(_t=Ae(_t))((xt,tt)=>{const gt=new b.Hp({next:we=>{try{Ke(we)}catch(yt){tt(yt),gt.unsubscribe()}},error:tt,complete:xt});this.subscribe(gt)})}_subscribe(Ke){var _t;return null===(_t=this.source)||void 0===_t?void 0:_t.subscribe(Ke)}[p.L](){return this}pipe(...Ke){return(0,Ie.U)(Ke)(this)}toPromise(Ke){return new(Ke=Ae(Ke))((_t,xt)=>{let tt;this.subscribe(gt=>tt=gt,gt=>xt(gt),()=>_t(tt))})}}return ke.create=et=>new ke(et),ke})();function Ae(ke){var et;return null!==(et=ke??Pe.v.Promise)&&void 0!==et?et:Promise}},7579:(sn,qe,G)=>{G.d(qe,{x:()=>He});var b=G(9751),Z=G(727);const Ie=(0,G(3888).d)(Ae=>function(){Ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=G(8737),xe=G(2806);let He=(()=>{class Ae extends b.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ve){const ke=new Le(this,this);return ke.operator=ve,ke}_throwIfClosed(){if(this.closed)throw new Ie}next(ve){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ke of this.currentObservers)ke.next(ve)}})}error(ve){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ve;const{observers:ke}=this;for(;ke.length;)ke.shift().error(ve)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ve}=this;for(;ve.length;)ve.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ve;return(null===(ve=this.observers)||void 0===ve?void 0:ve.length)>0}_trySubscribe(ve){return this._throwIfClosed(),super._trySubscribe(ve)}_subscribe(ve){return this._throwIfClosed(),this._checkFinalizedStatuses(ve),this._innerSubscribe(ve)}_innerSubscribe(ve){const{hasError:ke,isStopped:et,observers:Ke}=this;return ke||et?Z.Lc:(this.currentObservers=null,Ke.push(ve),new Z.w0(()=>{this.currentObservers=null,(0,Pe.P)(Ke,ve)}))}_checkFinalizedStatuses(ve){const{hasError:ke,thrownError:et,isStopped:Ke}=this;ke?ve.error(et):Ke&&ve.complete()}asObservable(){const ve=new b.y;return ve.source=this,ve}}return Ae.create=(be,ve)=>new Le(be,ve),Ae})();class Le extends He{constructor(be,ve){super(),this.destination=be,this.source=ve}next(be){var ve,ke;null===(ke=null===(ve=this.destination)||void 0===ve?void 0:ve.next)||void 0===ke||ke.call(ve,be)}error(be){var ve,ke;null===(ke=null===(ve=this.destination)||void 0===ve?void 0:ve.error)||void 0===ke||ke.call(ve,be)}complete(){var be,ve;null===(ve=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===ve||ve.call(be)}_subscribe(be){var ve,ke;return null!==(ke=null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(be))&&void 0!==ke?ke:Z.Lc}}},930:(sn,qe,G)=>{G.d(qe,{Hp:()=>xt,Lv:()=>ke});var b=G(576),Z=G(727),p=G(2416),Ie=G(7849),Pe=G(5032);const xe=Ae("C",void 0,void 0);function Ae(mt,ot,ze){return{kind:mt,value:ot,error:ze}}var be=G(3410),ve=G(2806);class ke extends Z.w0{constructor(ot){super(),this.isStopped=!1,ot?(this.destination=ot,(0,Z.Nn)(ot)&&ot.add(this)):this.destination=yt}static create(ot,ze,Ft){return new xt(ot,ze,Ft)}next(ot){this.isStopped?we(function Le(mt){return Ae("N",mt,void 0)}(ot),this):this._next(ot)}error(ot){this.isStopped?we(function He(mt){return Ae("E",void 0,mt)}(ot),this):(this.isStopped=!0,this._error(ot))}complete(){this.isStopped?we(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ot){this.destination.next(ot)}_error(ot){try{this.destination.error(ot)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Ke(mt,ot){return et.call(mt,ot)}class _t{constructor(ot){this.partialObserver=ot}next(ot){const{partialObserver:ze}=this;if(ze.next)try{ze.next(ot)}catch(Ft){tt(Ft)}}error(ot){const{partialObserver:ze}=this;if(ze.error)try{ze.error(ot)}catch(Ft){tt(Ft)}else tt(ot)}complete(){const{partialObserver:ot}=this;if(ot.complete)try{ot.complete()}catch(ze){tt(ze)}}}class xt extends ke{constructor(ot,ze,Ft){let Se;if(super(),(0,b.m)(ot)||!ot)Se={next:ot??void 0,error:ze??void 0,complete:Ft??void 0};else{let Te;this&&p.v.useDeprecatedNextContext?(Te=Object.create(ot),Te.unsubscribe=()=>this.unsubscribe(),Se={next:ot.next&&Ke(ot.next,Te),error:ot.error&&Ke(ot.error,Te),complete:ot.complete&&Ke(ot.complete,Te)}):Se=ot}this.destination=new _t(Se)}}function tt(mt){p.v.useDeprecatedSynchronousErrorHandling?(0,ve.O)(mt):(0,Ie.h)(mt)}function we(mt,ot){const{onStoppedNotification:ze}=p.v;ze&&be.z.setTimeout(()=>ze(mt,ot))}const yt={closed:!0,next:Pe.Z,error:function gt(mt){throw mt},complete:Pe.Z}},727:(sn,qe,G)=>{G.d(qe,{Lc:()=>xe,w0:()=>Pe,Nn:()=>He});var b=G(576);const p=(0,G(3888).d)(Ae=>function(ve){Ae(this),this.message=ve?`${ve.length} errors occurred during unsubscription:\n${ve.map((ke,et)=>`${et+1}) ${ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ve});var Ie=G(8737);class Pe{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:ve}=this;if(ve)if(this._parentage=null,Array.isArray(ve))for(const Ke of ve)Ke.remove(this);else ve.remove(this);const{initialTeardown:ke}=this;if((0,b.m)(ke))try{ke()}catch(Ke){be=Ke instanceof p?Ke.errors:[Ke]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Ke of et)try{Le(Ke)}catch(_t){be=be??[],_t instanceof p?be=[...be,..._t.errors]:be.push(_t)}}if(be)throw new p(be)}}add(be){var ve;if(be&&be!==this)if(this.closed)Le(be);else{if(be instanceof Pe){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._finalizers=null!==(ve=this._finalizers)&&void 0!==ve?ve:[]).push(be)}}_hasParent(be){const{_parentage:ve}=this;return ve===be||Array.isArray(ve)&&ve.includes(be)}_addParent(be){const{_parentage:ve}=this;this._parentage=Array.isArray(ve)?(ve.push(be),ve):ve?[ve,be]:be}_removeParent(be){const{_parentage:ve}=this;ve===be?this._parentage=null:Array.isArray(ve)&&(0,Ie.P)(ve,be)}remove(be){const{_finalizers:ve}=this;ve&&(0,Ie.P)(ve,be),be instanceof Pe&&be._removeParent(this)}}Pe.EMPTY=(()=>{const Ae=new Pe;return Ae.closed=!0,Ae})();const xe=Pe.EMPTY;function He(Ae){return Ae instanceof Pe||Ae&&"closed"in Ae&&(0,b.m)(Ae.remove)&&(0,b.m)(Ae.add)&&(0,b.m)(Ae.unsubscribe)}function Le(Ae){(0,b.m)(Ae)?Ae():Ae.unsubscribe()}},2416:(sn,qe,G)=>{G.d(qe,{v:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(sn,qe,G)=>{G.d(qe,{a:()=>be});var b=G(9751),Z=G(4742),p=G(8996),Ie=G(4671),Pe=G(3268),xe=G(3269),He=G(1810),Le=G(5403),Ae=G(9672);function be(...et){const Ke=(0,xe.yG)(et),_t=(0,xe.jO)(et),{args:xt,keys:tt}=(0,Z.D)(et);if(0===xt.length)return(0,p.D)([],Ke);const gt=new b.y(function ve(et,Ke,_t=Ie.y){return xt=>{ke(Ke,()=>{const{length:tt}=et,gt=new Array(tt);let we=tt,yt=tt;for(let mt=0;mt<tt;mt++)ke(Ke,()=>{const ot=(0,p.D)(et[mt],Ke);let ze=!1;ot.subscribe((0,Le.x)(xt,Ft=>{gt[mt]=Ft,ze||(ze=!0,yt--),yt||xt.next(_t(gt.slice()))},()=>{--we||xt.complete()}))},xt)},xt)}}(xt,Ke,tt?we=>(0,He.n)(tt,we):Ie.y));return _t?gt.pipe((0,Pe.Z)(_t)):gt}function ke(et,Ke,_t){et?(0,Ae.f)(_t,et,Ke):Ke()}},7272:(sn,qe,G)=>{G.d(qe,{z:()=>Pe});var b=G(8189),p=G(3269),Ie=G(8996);function Pe(...xe){return function Z(){return(0,b.J)(1)}()((0,Ie.D)(xe,(0,p.yG)(xe)))}},515:(sn,qe,G)=>{G.d(qe,{E:()=>Z});const Z=new(G(9751).y)(Pe=>Pe.complete())},8996:(sn,qe,G)=>{G.d(qe,{D:()=>ot});var b=G(8421),Z=G(5363),p=G(9468),xe=G(9751),Le=G(2202),Ae=G(576),be=G(9672);function ke(ze,Ft){if(!ze)throw new Error("Iterable cannot be null");return new xe.y(Se=>{(0,be.f)(Se,Ft,()=>{const Te=ze[Symbol.asyncIterator]();(0,be.f)(Se,Ft,()=>{Te.next().then(We=>{We.done?Se.complete():Se.next(We.value)})},0,!0)})})}var et=G(3670),Ke=G(8239),_t=G(1144),xt=G(6495),tt=G(2206),gt=G(4532),we=G(3260);function ot(ze,Ft){return Ft?function mt(ze,Ft){if(null!=ze){if((0,et.c)(ze))return function Ie(ze,Ft){return(0,b.Xf)(ze).pipe((0,p.R)(Ft),(0,Z.Q)(Ft))}(ze,Ft);if((0,_t.z)(ze))return function He(ze,Ft){return new xe.y(Se=>{let Te=0;return Ft.schedule(function(){Te===ze.length?Se.complete():(Se.next(ze[Te++]),Se.closed||this.schedule())})})}(ze,Ft);if((0,Ke.t)(ze))return function Pe(ze,Ft){return(0,b.Xf)(ze).pipe((0,p.R)(Ft),(0,Z.Q)(Ft))}(ze,Ft);if((0,tt.D)(ze))return ke(ze,Ft);if((0,xt.T)(ze))return function ve(ze,Ft){return new xe.y(Se=>{let Te;return(0,be.f)(Se,Ft,()=>{Te=ze[Le.h](),(0,be.f)(Se,Ft,()=>{let We,ft;try{({value:We,done:ft}=Te.next())}catch(wt){return void Se.error(wt)}ft?Se.complete():Se.next(We)},0,!0)}),()=>(0,Ae.m)(Te?.return)&&Te.return()})}(ze,Ft);if((0,we.L)(ze))return function yt(ze,Ft){return ke((0,we.Q)(ze),Ft)}(ze,Ft)}throw(0,gt.z)(ze)}(ze,Ft):(0,b.Xf)(ze)}},8421:(sn,qe,G)=>{G.d(qe,{Xf:()=>et});var b=G(655),Z=G(1144),p=G(8239),Ie=G(9751),Pe=G(3670),xe=G(2206),He=G(4532),Le=G(6495),Ae=G(3260),be=G(576),ve=G(7849),ke=G(8822);function et(mt){if(mt instanceof Ie.y)return mt;if(null!=mt){if((0,Pe.c)(mt))return function Ke(mt){return new Ie.y(ot=>{const ze=mt[ke.L]();if((0,be.m)(ze.subscribe))return ze.subscribe(ot);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(mt);if((0,Z.z)(mt))return function _t(mt){return new Ie.y(ot=>{for(let ze=0;ze<mt.length&&!ot.closed;ze++)ot.next(mt[ze]);ot.complete()})}(mt);if((0,p.t)(mt))return function xt(mt){return new Ie.y(ot=>{mt.then(ze=>{ot.closed||(ot.next(ze),ot.complete())},ze=>ot.error(ze)).then(null,ve.h)})}(mt);if((0,xe.D)(mt))return gt(mt);if((0,Le.T)(mt))return function tt(mt){return new Ie.y(ot=>{for(const ze of mt)if(ot.next(ze),ot.closed)return;ot.complete()})}(mt);if((0,Ae.L)(mt))return function we(mt){return gt((0,Ae.Q)(mt))}(mt)}throw(0,He.z)(mt)}function gt(mt){return new Ie.y(ot=>{(function yt(mt,ot){var ze,Ft,Se,Te;return(0,b.mG)(this,void 0,void 0,function*(){try{for(ze=(0,b.KL)(mt);!(Ft=yield ze.next()).done;)if(ot.next(Ft.value),ot.closed)return}catch(We){Se={error:We}}finally{try{Ft&&!Ft.done&&(Te=ze.return)&&(yield Te.call(ze))}finally{if(Se)throw Se.error}}ot.complete()})})(mt,ot).catch(ze=>ot.error(ze))})}},6451:(sn,qe,G)=>{G.d(qe,{T:()=>xe});var b=G(8189),Z=G(8421),p=G(515),Ie=G(3269),Pe=G(8996);function xe(...He){const Le=(0,Ie.yG)(He),Ae=(0,Ie._6)(He,1/0),be=He;return be.length?1===be.length?(0,Z.Xf)(be[0]):(0,b.J)(Ae)((0,Pe.D)(be,Le)):p.E}},9646:(sn,qe,G)=>{G.d(qe,{of:()=>p});var b=G(3269),Z=G(8996);function p(...Ie){const Pe=(0,b.yG)(Ie);return(0,Z.D)(Ie,Pe)}},5403:(sn,qe,G)=>{G.d(qe,{x:()=>Z});var b=G(930);function Z(Ie,Pe,xe,He,Le){return new p(Ie,Pe,xe,He,Le)}class p extends b.Lv{constructor(Pe,xe,He,Le,Ae,be){super(Pe),this.onFinalize=Ae,this.shouldUnsubscribe=be,this._next=xe?function(ve){try{xe(ve)}catch(ke){Pe.error(ke)}}:super._next,this._error=Le?function(ve){try{Le(ve)}catch(ke){Pe.error(ke)}finally{this.unsubscribe()}}:super._error,this._complete=He?function(){try{He()}catch(ve){Pe.error(ve)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},4351:(sn,qe,G)=>{G.d(qe,{b:()=>p});var b=G(5577),Z=G(576);function p(Ie,Pe){return(0,Z.m)(Pe)?(0,b.z)(Ie,Pe,1):(0,b.z)(Ie,1)}},6590:(sn,qe,G)=>{G.d(qe,{d:()=>p});var b=G(4482),Z=G(5403);function p(Ie){return(0,b.e)((Pe,xe)=>{let He=!1;Pe.subscribe((0,Z.x)(xe,Le=>{He=!0,xe.next(Le)},()=>{He||xe.next(Ie),xe.complete()}))})}},1884:(sn,qe,G)=>{G.d(qe,{x:()=>Ie});var b=G(4671),Z=G(4482),p=G(5403);function Ie(xe,He=b.y){return xe=xe??Pe,(0,Z.e)((Le,Ae)=>{let be,ve=!0;Le.subscribe((0,p.x)(Ae,ke=>{const et=He(ke);(ve||!xe(be,et))&&(ve=!1,be=et,Ae.next(ke))}))})}function Pe(xe,He){return xe===He}},9300:(sn,qe,G)=>{G.d(qe,{h:()=>p});var b=G(4482),Z=G(5403);function p(Ie,Pe){return(0,b.e)((xe,He)=>{let Le=0;xe.subscribe((0,Z.x)(He,Ae=>Ie.call(Pe,Ae,Le++)&&He.next(Ae)))})}},590:(sn,qe,G)=>{G.d(qe,{P:()=>He});var b=G(6805),Z=G(9300),p=G(5698),Ie=G(6590),Pe=G(8068),xe=G(4671);function He(Le,Ae){const be=arguments.length>=2;return ve=>ve.pipe(Le?(0,Z.h)((ke,et)=>Le(ke,et,ve)):xe.y,(0,p.q)(1),be?(0,Ie.d)(Ae):(0,Pe.T)(()=>new b.K))}},4004:(sn,qe,G)=>{G.d(qe,{U:()=>p});var b=G(4482),Z=G(5403);function p(Ie,Pe){return(0,b.e)((xe,He)=>{let Le=0;xe.subscribe((0,Z.x)(He,Ae=>{He.next(Ie.call(Pe,Ae,Le++))}))})}},9718:(sn,qe,G)=>{G.d(qe,{h:()=>Z});var b=G(4004);function Z(p){return(0,b.U)(()=>p)}},8189:(sn,qe,G)=>{G.d(qe,{J:()=>p});var b=G(5577),Z=G(4671);function p(Ie=1/0){return(0,b.z)(Z.y,Ie)}},5577:(sn,qe,G)=>{G.d(qe,{z:()=>Le});var b=G(4004),Z=G(8421),p=G(4482),Ie=G(9672),Pe=G(5403),He=G(576);function Le(Ae,be,ve=1/0){return(0,He.m)(be)?Le((ke,et)=>(0,b.U)((Ke,_t)=>be(ke,Ke,et,_t))((0,Z.Xf)(Ae(ke,et))),ve):("number"==typeof be&&(ve=be),(0,p.e)((ke,et)=>function xe(Ae,be,ve,ke,et,Ke,_t,xt){const tt=[];let gt=0,we=0,yt=!1;const mt=()=>{yt&&!tt.length&&!gt&&be.complete()},ot=Ft=>gt<ke?ze(Ft):tt.push(Ft),ze=Ft=>{Ke&&be.next(Ft),gt++;let Se=!1;(0,Z.Xf)(ve(Ft,we++)).subscribe((0,Pe.x)(be,Te=>{et?.(Te),Ke?ot(Te):be.next(Te)},()=>{Se=!0},void 0,()=>{if(Se)try{for(gt--;tt.length&&gt<ke;){const Te=tt.shift();_t?(0,Ie.f)(be,_t,()=>ze(Te)):ze(Te)}mt()}catch(Te){be.error(Te)}}))};return Ae.subscribe((0,Pe.x)(be,ot,()=>{yt=!0,mt()})),()=>{xt?.()}}(ke,et,Ae,ve)))}},5363:(sn,qe,G)=>{G.d(qe,{Q:()=>Ie});var b=G(9672),Z=G(4482),p=G(5403);function Ie(Pe,xe=0){return(0,Z.e)((He,Le)=>{He.subscribe((0,p.x)(Le,Ae=>(0,b.f)(Le,Pe,()=>Le.next(Ae),xe),()=>(0,b.f)(Le,Pe,()=>Le.complete(),xe),Ae=>(0,b.f)(Le,Pe,()=>Le.error(Ae),xe)))})}},5026:(sn,qe,G)=>{G.d(qe,{R:()=>Ie});var b=G(4482),Z=G(5403);function Ie(Pe,xe){return(0,b.e)(function p(Pe,xe,He,Le,Ae){return(be,ve)=>{let ke=He,et=xe,Ke=0;be.subscribe((0,Z.x)(ve,_t=>{const xt=Ke++;et=ke?Pe(et,_t,xt):(ke=!0,_t),Le&&ve.next(et)},Ae&&(()=>{ke&&ve.next(et),ve.complete()})))}}(Pe,xe,arguments.length>=2,!0))}},3099:(sn,qe,G)=>{G.d(qe,{B:()=>Pe});var b=G(8421),Z=G(7579),p=G(930),Ie=G(4482);function Pe(He={}){const{connector:Le=(()=>new Z.x),resetOnError:Ae=!0,resetOnComplete:be=!0,resetOnRefCountZero:ve=!0}=He;return ke=>{let et,Ke,_t,xt=0,tt=!1,gt=!1;const we=()=>{Ke?.unsubscribe(),Ke=void 0},yt=()=>{we(),et=_t=void 0,tt=gt=!1},mt=()=>{const ot=et;yt(),ot?.unsubscribe()};return(0,Ie.e)((ot,ze)=>{xt++,!gt&&!tt&&we();const Ft=_t=_t??Le();ze.add(()=>{xt--,0===xt&&!gt&&!tt&&(Ke=xe(mt,ve))}),Ft.subscribe(ze),!et&&xt>0&&(et=new p.Hp({next:Se=>Ft.next(Se),error:Se=>{gt=!0,we(),Ke=xe(yt,Ae,Se),Ft.error(Se)},complete:()=>{tt=!0,we(),Ke=xe(yt,be),Ft.complete()}}),(0,b.Xf)(ot).subscribe(et))})(ke)}}function xe(He,Le,...Ae){if(!0===Le)return void He();if(!1===Le)return;const be=new p.Hp({next:()=>{be.unsubscribe(),He()}});return Le(...Ae).subscribe(be)}},8675:(sn,qe,G)=>{G.d(qe,{O:()=>Ie});var b=G(7272),Z=G(3269),p=G(4482);function Ie(...Pe){const xe=(0,Z.yG)(Pe);return(0,p.e)((He,Le)=>{(xe?(0,b.z)(Pe,He,xe):(0,b.z)(Pe,He)).subscribe(Le)})}},9468:(sn,qe,G)=>{G.d(qe,{R:()=>Z});var b=G(4482);function Z(p,Ie=0){return(0,b.e)((Pe,xe)=>{xe.add(p.schedule(()=>Pe.subscribe(xe),Ie))})}},3900:(sn,qe,G)=>{G.d(qe,{w:()=>Ie});var b=G(8421),Z=G(4482),p=G(5403);function Ie(Pe,xe){return(0,Z.e)((He,Le)=>{let Ae=null,be=0,ve=!1;const ke=()=>ve&&!Ae&&Le.complete();He.subscribe((0,p.x)(Le,et=>{Ae?.unsubscribe();let Ke=0;const _t=be++;(0,b.Xf)(Pe(et,_t)).subscribe(Ae=(0,p.x)(Le,xt=>Le.next(xe?xe(et,xt,_t,Ke++):xt),()=>{Ae=null,ke()}))},()=>{ve=!0,ke()}))})}},5698:(sn,qe,G)=>{G.d(qe,{q:()=>Ie});var b=G(515),Z=G(4482),p=G(5403);function Ie(Pe){return Pe<=0?()=>b.E:(0,Z.e)((xe,He)=>{let Le=0;xe.subscribe((0,p.x)(He,Ae=>{++Le<=Pe&&(He.next(Ae),Pe<=Le&&He.complete())}))})}},8505:(sn,qe,G)=>{G.d(qe,{b:()=>Pe});var b=G(576),Z=G(4482),p=G(5403),Ie=G(4671);function Pe(xe,He,Le){const Ae=(0,b.m)(xe)||He||Le?{next:xe,error:He,complete:Le}:xe;return Ae?(0,Z.e)((be,ve)=>{var ke;null===(ke=Ae.subscribe)||void 0===ke||ke.call(Ae);let et=!0;be.subscribe((0,p.x)(ve,Ke=>{var _t;null===(_t=Ae.next)||void 0===_t||_t.call(Ae,Ke),ve.next(Ke)},()=>{var Ke;et=!1,null===(Ke=Ae.complete)||void 0===Ke||Ke.call(Ae),ve.complete()},Ke=>{var _t;et=!1,null===(_t=Ae.error)||void 0===_t||_t.call(Ae,Ke),ve.error(Ke)},()=>{var Ke,_t;et&&(null===(Ke=Ae.unsubscribe)||void 0===Ke||Ke.call(Ae)),null===(_t=Ae.finalize)||void 0===_t||_t.call(Ae)}))}):Ie.y}},8068:(sn,qe,G)=>{G.d(qe,{T:()=>Ie});var b=G(6805),Z=G(4482),p=G(5403);function Ie(xe=Pe){return(0,Z.e)((He,Le)=>{let Ae=!1;He.subscribe((0,p.x)(Le,be=>{Ae=!0,Le.next(be)},()=>Ae?Le.complete():Le.error(xe())))})}function Pe(){return new b.K}},4408:(sn,qe,G)=>{G.d(qe,{o:()=>Pe});var b=G(727);class Z extends b.w0{constructor(He,Le){super()}schedule(He,Le=0){return this}}const p={setInterval(xe,He,...Le){const{delegate:Ae}=p;return Ae?.setInterval?Ae.setInterval(xe,He,...Le):setInterval(xe,He,...Le)},clearInterval(xe){const{delegate:He}=p;return(He?.clearInterval||clearInterval)(xe)},delegate:void 0};var Ie=G(8737);class Pe extends Z{constructor(He,Le){super(He,Le),this.scheduler=He,this.work=Le,this.pending=!1}schedule(He,Le=0){var Ae;if(this.closed)return this;this.state=He;const be=this.id,ve=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(ve,be,Le)),this.pending=!0,this.delay=Le,this.id=null!==(Ae=this.id)&&void 0!==Ae?Ae:this.requestAsyncId(ve,this.id,Le),this}requestAsyncId(He,Le,Ae=0){return p.setInterval(He.flush.bind(He,this),Ae)}recycleAsyncId(He,Le,Ae=0){if(null!=Ae&&this.delay===Ae&&!1===this.pending)return Le;null!=Le&&p.clearInterval(Le)}execute(He,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(He,Le);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(He,Le){let be,Ae=!1;try{this.work(He)}catch(ve){Ae=!0,be=ve||new Error("Scheduled action threw falsy error")}if(Ae)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:He,scheduler:Le}=this,{actions:Ae}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ie.P)(Ae,this),null!=He&&(this.id=this.recycleAsyncId(Le,He,null)),this.delay=null,super.unsubscribe()}}}},7565:(sn,qe,G)=>{G.d(qe,{v:()=>p});var b=G(6063);class Z{constructor(Pe,xe=Z.now){this.schedulerActionCtor=Pe,this.now=xe}schedule(Pe,xe=0,He){return new this.schedulerActionCtor(this,Pe).schedule(He,xe)}}Z.now=b.l.now;class p extends Z{constructor(Pe,xe=Z.now){super(Pe,xe),this.actions=[],this._active=!1}flush(Pe){const{actions:xe}=this;if(this._active)return void xe.push(Pe);let He;this._active=!0;do{if(He=Pe.execute(Pe.state,Pe.delay))break}while(Pe=xe.shift());if(this._active=!1,He){for(;Pe=xe.shift();)Pe.unsubscribe();throw He}}}},4986:(sn,qe,G)=>{G.d(qe,{P:()=>Ie,z:()=>p});var b=G(4408);const p=new(G(7565).v)(b.o),Ie=p},6063:(sn,qe,G)=>{G.d(qe,{l:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},3410:(sn,qe,G)=>{G.d(qe,{z:()=>b});const b={setTimeout(Z,p,...Ie){const{delegate:Pe}=b;return Pe?.setTimeout?Pe.setTimeout(Z,p,...Ie):setTimeout(Z,p,...Ie)},clearTimeout(Z){const{delegate:p}=b;return(p?.clearTimeout||clearTimeout)(Z)},delegate:void 0}},2202:(sn,qe,G)=>{G.d(qe,{h:()=>Z});const Z=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(sn,qe,G)=>{G.d(qe,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(sn,qe,G)=>{G.d(qe,{K:()=>Z});const Z=(0,G(3888).d)(p=>function(){p(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(sn,qe,G)=>{G.d(qe,{_6:()=>xe,jO:()=>Ie,yG:()=>Pe});var b=G(576),Z=G(3532);function p(He){return He[He.length-1]}function Ie(He){return(0,b.m)(p(He))?He.pop():void 0}function Pe(He){return(0,Z.K)(p(He))?He.pop():void 0}function xe(He,Le){return"number"==typeof p(He)?He.pop():Le}},4742:(sn,qe,G)=>{G.d(qe,{D:()=>Pe});const{isArray:b}=Array,{getPrototypeOf:Z,prototype:p,keys:Ie}=Object;function Pe(He){if(1===He.length){const Le=He[0];if(b(Le))return{args:Le,keys:null};if(function xe(He){return He&&"object"==typeof He&&Z(He)===p}(Le)){const Ae=Ie(Le);return{args:Ae.map(be=>Le[be]),keys:Ae}}}return{args:He,keys:null}}},8737:(sn,qe,G)=>{function b(Z,p){if(Z){const Ie=Z.indexOf(p);0<=Ie&&Z.splice(Ie,1)}}G.d(qe,{P:()=>b})},3888:(sn,qe,G)=>{function b(Z){const Ie=Z(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return Ie.prototype=Object.create(Error.prototype),Ie.prototype.constructor=Ie,Ie}G.d(qe,{d:()=>b})},1810:(sn,qe,G)=>{function b(Z,p){return Z.reduce((Ie,Pe,xe)=>(Ie[Pe]=p[xe],Ie),{})}G.d(qe,{n:()=>b})},2806:(sn,qe,G)=>{G.d(qe,{O:()=>Ie,x:()=>p});var b=G(2416);let Z=null;function p(Pe){if(b.v.useDeprecatedSynchronousErrorHandling){const xe=!Z;if(xe&&(Z={errorThrown:!1,error:null}),Pe(),xe){const{errorThrown:He,error:Le}=Z;if(Z=null,He)throw Le}}else Pe()}function Ie(Pe){b.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=Pe)}},9672:(sn,qe,G)=>{function b(Z,p,Ie,Pe=0,xe=!1){const He=p.schedule(function(){Ie(),xe?Z.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(Z.add(He),!xe)return He}G.d(qe,{f:()=>b})},4671:(sn,qe,G)=>{function b(Z){return Z}G.d(qe,{y:()=>b})},1144:(sn,qe,G)=>{G.d(qe,{z:()=>b});const b=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(sn,qe,G)=>{G.d(qe,{D:()=>Z});var b=G(576);function Z(p){return Symbol.asyncIterator&&(0,b.m)(p?.[Symbol.asyncIterator])}},576:(sn,qe,G)=>{function b(Z){return"function"==typeof Z}G.d(qe,{m:()=>b})},3670:(sn,qe,G)=>{G.d(qe,{c:()=>p});var b=G(8822),Z=G(576);function p(Ie){return(0,Z.m)(Ie[b.L])}},6495:(sn,qe,G)=>{G.d(qe,{T:()=>p});var b=G(2202),Z=G(576);function p(Ie){return(0,Z.m)(Ie?.[b.h])}},8239:(sn,qe,G)=>{G.d(qe,{t:()=>Z});var b=G(576);function Z(p){return(0,b.m)(p?.then)}},3260:(sn,qe,G)=>{G.d(qe,{L:()=>Ie,Q:()=>p});var b=G(655),Z=G(576);function p(Pe){return(0,b.FC)(this,arguments,function*(){const He=Pe.getReader();try{for(;;){const{value:Le,done:Ae}=yield(0,b.qq)(He.read());if(Ae)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(Le)}}finally{He.releaseLock()}})}function Ie(Pe){return(0,Z.m)(Pe?.getReader)}},3532:(sn,qe,G)=>{G.d(qe,{K:()=>Z});var b=G(576);function Z(p){return p&&(0,b.m)(p.schedule)}},4482:(sn,qe,G)=>{G.d(qe,{A:()=>Z,e:()=>p});var b=G(576);function Z(Ie){return(0,b.m)(Ie?.lift)}function p(Ie){return Pe=>{if(Z(Pe))return Pe.lift(function(xe){try{return Ie(xe,this)}catch(He){this.error(He)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(sn,qe,G)=>{G.d(qe,{Z:()=>Ie});var b=G(4004);const{isArray:Z}=Array;function Ie(Pe){return(0,b.U)(xe=>function p(Pe,xe){return Z(xe)?Pe(...xe):Pe(xe)}(Pe,xe))}},5032:(sn,qe,G)=>{function b(){}G.d(qe,{Z:()=>b})},9635:(sn,qe,G)=>{G.d(qe,{U:()=>p,z:()=>Z});var b=G(4671);function Z(...Ie){return p(Ie)}function p(Ie){return 0===Ie.length?b.y:1===Ie.length?Ie[0]:function(xe){return Ie.reduce((He,Le)=>Le(He),xe)}}},7849:(sn,qe,G)=>{G.d(qe,{h:()=>p});var b=G(2416),Z=G(3410);function p(Ie){Z.z.setTimeout(()=>{const{onUnhandledError:Pe}=b.v;if(!Pe)throw Ie;Pe(Ie)})}},4532:(sn,qe,G)=>{function b(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}G.d(qe,{z:()=>b})},655:(sn,qe,G)=>{function Ie($e,ut){var Qe={};for(var dt in $e)Object.prototype.hasOwnProperty.call($e,dt)&&ut.indexOf(dt)<0&&(Qe[dt]=$e[dt]);if(null!=$e&&"function"==typeof Object.getOwnPropertySymbols){var vt=0;for(dt=Object.getOwnPropertySymbols($e);vt<dt.length;vt++)ut.indexOf(dt[vt])<0&&Object.prototype.propertyIsEnumerable.call($e,dt[vt])&&(Qe[dt[vt]]=$e[dt[vt]])}return Qe}function ke($e,ut,Qe,dt){return new(Qe||(Qe=Promise))(function(ht,Bt){function At(nn){try{Kt(dt.next(nn))}catch(Tt){Bt(Tt)}}function hn(nn){try{Kt(dt.throw(nn))}catch(Tt){Bt(Tt)}}function Kt(nn){nn.done?ht(nn.value):function vt(ht){return ht instanceof Qe?ht:new Qe(function(Bt){Bt(ht)})}(nn.value).then(At,hn)}Kt((dt=dt.apply($e,ut||[])).next())})}function mt($e){return this instanceof mt?(this.v=$e,this):new mt($e)}function ot($e,ut,Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt,dt=Qe.apply($e,ut||[]),ht=[];return vt={},Bt("next"),Bt("throw"),Bt("return"),vt[Symbol.asyncIterator]=function(){return this},vt;function Bt(Nn){dt[Nn]&&(vt[Nn]=function(Un){return new Promise(function(Hn,jn){ht.push([Nn,Un,Hn,jn])>1||At(Nn,Un)})})}function At(Nn,Un){try{!function hn(Nn){Nn.value instanceof mt?Promise.resolve(Nn.value.v).then(Kt,nn):Tt(ht[0][2],Nn)}(dt[Nn](Un))}catch(Hn){Tt(ht[0][3],Hn)}}function Kt(Nn){At("next",Nn)}function nn(Nn){At("throw",Nn)}function Tt(Nn,Un){Nn(Un),ht.shift(),ht.length&&At(ht[0][0],ht[0][1])}}function Ft($e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,ut=$e[Symbol.asyncIterator];return ut?ut.call($e):($e=function xt($e){var ut="function"==typeof Symbol&&Symbol.iterator,Qe=ut&&$e[ut],dt=0;if(Qe)return Qe.call($e);if($e&&"number"==typeof $e.length)return{next:function(){return $e&&dt>=$e.length&&($e=void 0),{value:$e&&$e[dt++],done:!$e}}};throw new TypeError(ut?"Object is not iterable.":"Symbol.iterator is not defined.")}($e),Qe={},dt("next"),dt("throw"),dt("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe);function dt(ht){Qe[ht]=$e[ht]&&function(Bt){return new Promise(function(At,hn){!function vt(ht,Bt,At,hn){Promise.resolve(hn).then(function(Kt){ht({value:Kt,done:At})},Bt)}(At,hn,(Bt=$e[ht](Bt)).done,Bt.value)})}}}G.d(qe,{FC:()=>ot,KL:()=>Ft,_T:()=>Ie,mG:()=>ke,qq:()=>mt})},6895:(sn,qe,G)=>{G.d(qe,{Do:()=>we,EM:()=>Qs,HT:()=>Ie,JF:()=>za,K0:()=>xe,Mn:()=>dt,Mx:()=>ks,NF:()=>jo,O5:()=>gi,PM:()=>al,S$:()=>xt,Tn:()=>wt,UT:()=>vt,V_:()=>Ae,Ye:()=>yt,Zx:()=>mo,ax:()=>Mr,b0:()=>gt,bD:()=>is,ez:()=>Sa,mk:()=>rn,ol:()=>Qe,p6:()=>Wn,q:()=>p,sg:()=>Mr,tP:()=>Fs,w_:()=>Pe,x:()=>ft});var b=G(4650);let Z=null;function p(){return Z}function Ie(P){Z||(Z=P)}class Pe{}const xe=new b.OlP("DocumentToken");let He=(()=>{class P{historyGo(B){throw new Error("Not implemented")}}return P.\u0275fac=function(B){return new(B||P)},P.\u0275prov=b.Yz7({token:P,factory:function(){return function Le(){return(0,b.LFG)(be)}()},providedIn:"platform"}),P})();const Ae=new b.OlP("Location Initialized");let be=(()=>{class P extends He{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return p().getBaseHref(this._doc)}onPopState(B){const ne=p().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",B,!1),()=>ne.removeEventListener("popstate",B)}onHashChange(B){const ne=p().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",B,!1),()=>ne.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,ne,ye){ve()?this._history.pushState(B,ne,ye):this._location.hash=ye}replaceState(B,ne,ye){ve()?this._history.replaceState(B,ne,ye):this._location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return P.\u0275fac=function(B){return new(B||P)(b.LFG(xe))},P.\u0275prov=b.Yz7({token:P,factory:function(){return function ke(){return new be((0,b.LFG)(xe))}()},providedIn:"platform"}),P})();function ve(){return!!window.history.pushState}function et(P,K){if(0==P.length)return K;if(0==K.length)return P;let B=0;return P.endsWith("/")&&B++,K.startsWith("/")&&B++,2==B?P+K.substring(1):1==B?P+K:P+"/"+K}function Ke(P){const K=P.match(/#|\?|$/),B=K&&K.index||P.length;return P.slice(0,B-("/"===P[B-1]?1:0))+P.slice(B)}function _t(P){return P&&"?"!==P[0]?"?"+P:P}let xt=(()=>{class P{historyGo(B){throw new Error("Not implemented")}}return P.\u0275fac=function(B){return new(B||P)},P.\u0275prov=b.Yz7({token:P,factory:function(){return(0,b.f3M)(gt)},providedIn:"root"}),P})();const tt=new b.OlP("appBaseHref");let gt=(()=>{class P extends xt{constructor(B,ne){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=ne??this._platformLocation.getBaseHrefFromDOM()??(0,b.f3M)(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return et(this._baseHref,B)}path(B=!1){const ne=this._platformLocation.pathname+_t(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&B?`${ne}${ye}`:ne}pushState(B,ne,ye,Ye){const Nt=this.prepareExternalUrl(ye+_t(Ye));this._platformLocation.pushState(B,ne,Nt)}replaceState(B,ne,ye,Ye){const Nt=this.prepareExternalUrl(ye+_t(Ye));this._platformLocation.replaceState(B,ne,Nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return P.\u0275fac=function(B){return new(B||P)(b.LFG(He),b.LFG(tt,8))},P.\u0275prov=b.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),we=(()=>{class P extends xt{constructor(B,ne){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(B){const ne=et(this._baseHref,B);return ne.length>0?"#"+ne:ne}pushState(B,ne,ye,Ye){let Nt=this.prepareExternalUrl(ye+_t(Ye));0==Nt.length&&(Nt=this._platformLocation.pathname),this._platformLocation.pushState(B,ne,Nt)}replaceState(B,ne,ye,Ye){let Nt=this.prepareExternalUrl(ye+_t(Ye));0==Nt.length&&(Nt=this._platformLocation.pathname),this._platformLocation.replaceState(B,ne,Nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return P.\u0275fac=function(B){return new(B||P)(b.LFG(He),b.LFG(tt,8))},P.\u0275prov=b.Yz7({token:P,factory:P.\u0275fac}),P})(),yt=(()=>{class P{constructor(B){this._subject=new b.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const ne=this._locationStrategy.getBaseHref();this._basePath=function Ft(P){if(new RegExp("^(https?:)?//").test(P)){const[,B]=P.split(/\/\/[^\/]+/);return B}return P}(Ke(ze(ne))),this._locationStrategy.onPopState(ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:ye.state,type:ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,ne=""){return this.path()==this.normalize(B+_t(ne))}normalize(B){return P.stripTrailingSlash(function ot(P,K){if(!P||!K.startsWith(P))return K;const B=K.substring(P.length);return""===B||["/",";","?","#"].includes(B[0])?B:K}(this._basePath,ze(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,ne="",ye=null){this._locationStrategy.pushState(ye,"",B,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+_t(ne)),ye)}replaceState(B,ne="",ye=null){this._locationStrategy.replaceState(ye,"",B,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+_t(ne)),ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)})),()=>{const ne=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",ne){this._urlChangeListeners.forEach(ye=>ye(B,ne))}subscribe(B,ne,ye){return this._subject.subscribe({next:B,error:ne,complete:ye})}}return P.normalizeQueryParams=_t,P.joinWithSlash=et,P.stripTrailingSlash=Ke,P.\u0275fac=function(B){return new(B||P)(b.LFG(xt))},P.\u0275prov=b.Yz7({token:P,factory:function(){return function mt(){return new yt((0,b.LFG)(xt))}()},providedIn:"root"}),P})();function ze(P){return P.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Percent=1]="Percent",Te[Te.Currency=2]="Currency",Te[Te.Scientific=3]="Scientific",Te))(),ft=(()=>((ft=ft||{})[ft.Format=0]="Format",ft[ft.Standalone=1]="Standalone",ft))(),wt=(()=>((wt=wt||{})[wt.Narrow=0]="Narrow",wt[wt.Abbreviated=1]="Abbreviated",wt[wt.Wide=2]="Wide",wt[wt.Short=3]="Short",wt))(),Qt=(()=>((Qt=Qt||{})[Qt.Short=0]="Short",Qt[Qt.Medium=1]="Medium",Qt[Qt.Long=2]="Long",Qt[Qt.Full=3]="Full",Qt))(),jt=(()=>((jt=jt||{})[jt.Decimal=0]="Decimal",jt[jt.Group=1]="Group",jt[jt.List=2]="List",jt[jt.PercentSign=3]="PercentSign",jt[jt.PlusSign=4]="PlusSign",jt[jt.MinusSign=5]="MinusSign",jt[jt.Exponential=6]="Exponential",jt[jt.SuperscriptingExponent=7]="SuperscriptingExponent",jt[jt.PerMille=8]="PerMille",jt[jt.Infinity=9]="Infinity",jt[jt.NaN=10]="NaN",jt[jt.TimeSeparator=11]="TimeSeparator",jt[jt.CurrencyDecimal=12]="CurrencyDecimal",jt[jt.CurrencyGroup=13]="CurrencyGroup",jt))();function Qe(P,K,B){const ne=(0,b.cg1)(P),Ye=un([ne[b.wAp.DayPeriodsFormat],ne[b.wAp.DayPeriodsStandalone]],K);return un(Ye,B)}function dt(P,K,B){const ne=(0,b.cg1)(P),Ye=un([ne[b.wAp.DaysFormat],ne[b.wAp.DaysStandalone]],K);return un(Ye,B)}function vt(P,K,B){const ne=(0,b.cg1)(P),Ye=un([ne[b.wAp.MonthsFormat],ne[b.wAp.MonthsStandalone]],K);return un(Ye,B)}function hn(P,K){return un((0,b.cg1)(P)[b.wAp.DateFormat],K)}function Kt(P,K){return un((0,b.cg1)(P)[b.wAp.TimeFormat],K)}function nn(P,K){return un((0,b.cg1)(P)[b.wAp.DateTimeFormat],K)}function Tt(P,K){const B=(0,b.cg1)(P),ne=B[b.wAp.NumberSymbols][K];if(typeof ne>"u"){if(K===jt.CurrencyDecimal)return B[b.wAp.NumberSymbols][jt.Decimal];if(K===jt.CurrencyGroup)return B[b.wAp.NumberSymbols][jt.Group]}return ne}function Bn(P){if(!P[b.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[b.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function un(P,K){for(let B=K;B>-1;B--)if(typeof P[B]<"u")return P[B];throw new Error("Locale data API: locale data undefined")}function On(P){const[K,B]=P.split(":");return{hours:+K,minutes:+B}}const kr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Wr={},Kr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var In=(()=>((In=In||{})[In.Short=0]="Short",In[In.ShortGMT=1]="ShortGMT",In[In.Long=2]="Long",In[In.Extended=3]="Extended",In))(),fn=(()=>((fn=fn||{})[fn.FullYear=0]="FullYear",fn[fn.Month=1]="Month",fn[fn.Date=2]="Date",fn[fn.Hours=3]="Hours",fn[fn.Minutes=4]="Minutes",fn[fn.Seconds=5]="Seconds",fn[fn.FractionalSeconds=6]="FractionalSeconds",fn[fn.Day=7]="Day",fn))(),Zt=(()=>((Zt=Zt||{})[Zt.DayPeriods=0]="DayPeriods",Zt[Zt.Days=1]="Days",Zt[Zt.Months=2]="Months",Zt[Zt.Eras=3]="Eras",Zt))();function Wn(P,K,B,ne){let ye=function X(P){if(de(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[ye,Ye=1,Nt=1]=P.split("-").map(vn=>+vn);return nr(ye,Ye-1,Nt)}const B=parseFloat(P);if(!isNaN(P-B))return new Date(B);let ne;if(ne=P.match(kr))return function Ve(P){const K=new Date(0);let B=0,ne=0;const ye=P[8]?K.setUTCFullYear:K.setFullYear,Ye=P[8]?K.setUTCHours:K.setHours;P[9]&&(B=Number(P[9]+P[10]),ne=Number(P[9]+P[11])),ye.call(K,Number(P[1]),Number(P[2])-1,Number(P[3]));const Nt=Number(P[4]||0)-B,vn=Number(P[5]||0)-ne,xr=Number(P[6]||0),It=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return Ye.call(K,Nt,vn,xr,It),K}(ne)}const K=new Date(P);if(!de(K))throw new Error(`Unable to convert "${P}" into a date`);return K}(P);K=gn(B,K)||K;let vn,Nt=[];for(;K;){if(vn=Kr.exec(K),!vn){Nt.push(K);break}{Nt=Nt.concat(vn.slice(1));const xn=Nt.pop();if(!xn)break;K=xn}}let xr=ye.getTimezoneOffset();ne&&(xr=fe(ne,xr),ye=function ie(P,K,B){const ne=B?-1:1,ye=P.getTimezoneOffset();return function te(P,K){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+K),P}(P,ne*(fe(K,ye)-ye))}(ye,ne,!0));let It="";return Nt.forEach(xn=>{const Qn=function he(P){if(bt[P])return bt[P];let K;switch(P){case"G":case"GG":case"GGG":K=Sn(Zt.Eras,wt.Abbreviated);break;case"GGGG":K=Sn(Zt.Eras,wt.Wide);break;case"GGGGG":K=Sn(Zt.Eras,wt.Narrow);break;case"y":K=Cn(fn.FullYear,1,0,!1,!0);break;case"yy":K=Cn(fn.FullYear,2,0,!0,!0);break;case"yyy":K=Cn(fn.FullYear,3,0,!1,!0);break;case"yyyy":K=Cn(fn.FullYear,4,0,!1,!0);break;case"Y":K=pt(1);break;case"YY":K=pt(2,!0);break;case"YYY":K=pt(3);break;case"YYYY":K=pt(4);break;case"M":case"L":K=Cn(fn.Month,1,1);break;case"MM":case"LL":K=Cn(fn.Month,2,1);break;case"MMM":K=Sn(Zt.Months,wt.Abbreviated);break;case"MMMM":K=Sn(Zt.Months,wt.Wide);break;case"MMMMM":K=Sn(Zt.Months,wt.Narrow);break;case"LLL":K=Sn(Zt.Months,wt.Abbreviated,ft.Standalone);break;case"LLLL":K=Sn(Zt.Months,wt.Wide,ft.Standalone);break;case"LLLLL":K=Sn(Zt.Months,wt.Narrow,ft.Standalone);break;case"w":K=De(1);break;case"ww":K=De(2);break;case"W":K=De(1,!0);break;case"d":K=Cn(fn.Date,1);break;case"dd":K=Cn(fn.Date,2);break;case"c":case"cc":K=Cn(fn.Day,1);break;case"ccc":K=Sn(Zt.Days,wt.Abbreviated,ft.Standalone);break;case"cccc":K=Sn(Zt.Days,wt.Wide,ft.Standalone);break;case"ccccc":K=Sn(Zt.Days,wt.Narrow,ft.Standalone);break;case"cccccc":K=Sn(Zt.Days,wt.Short,ft.Standalone);break;case"E":case"EE":case"EEE":K=Sn(Zt.Days,wt.Abbreviated);break;case"EEEE":K=Sn(Zt.Days,wt.Wide);break;case"EEEEE":K=Sn(Zt.Days,wt.Narrow);break;case"EEEEEE":K=Sn(Zt.Days,wt.Short);break;case"a":case"aa":case"aaa":K=Sn(Zt.DayPeriods,wt.Abbreviated);break;case"aaaa":K=Sn(Zt.DayPeriods,wt.Wide);break;case"aaaaa":K=Sn(Zt.DayPeriods,wt.Narrow);break;case"b":case"bb":case"bbb":K=Sn(Zt.DayPeriods,wt.Abbreviated,ft.Standalone,!0);break;case"bbbb":K=Sn(Zt.DayPeriods,wt.Wide,ft.Standalone,!0);break;case"bbbbb":K=Sn(Zt.DayPeriods,wt.Narrow,ft.Standalone,!0);break;case"B":case"BB":case"BBB":K=Sn(Zt.DayPeriods,wt.Abbreviated,ft.Format,!0);break;case"BBBB":K=Sn(Zt.DayPeriods,wt.Wide,ft.Format,!0);break;case"BBBBB":K=Sn(Zt.DayPeriods,wt.Narrow,ft.Format,!0);break;case"h":K=Cn(fn.Hours,1,-12);break;case"hh":K=Cn(fn.Hours,2,-12);break;case"H":K=Cn(fn.Hours,1);break;case"HH":K=Cn(fn.Hours,2);break;case"m":K=Cn(fn.Minutes,1);break;case"mm":K=Cn(fn.Minutes,2);break;case"s":K=Cn(fn.Seconds,1);break;case"ss":K=Cn(fn.Seconds,2);break;case"S":K=Cn(fn.FractionalSeconds,1);break;case"SS":K=Cn(fn.FractionalSeconds,2);break;case"SSS":K=Cn(fn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":K=br(In.Short);break;case"ZZZZZ":K=br(In.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":K=br(In.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":K=br(In.Long);break;default:return null}return bt[P]=K,K}(xn);It+=Qn?Qn(ye,B,xr):"''"===xn?"'":xn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),It}function nr(P,K,B){const ne=new Date(0);return ne.setFullYear(P,K,B),ne.setHours(0,0,0),ne}function gn(P,K){const B=function ut(P){return(0,b.cg1)(P)[b.wAp.LocaleId]}(P);if(Wr[B]=Wr[B]||{},Wr[B][K])return Wr[B][K];let ne="";switch(K){case"shortDate":ne=hn(P,Qt.Short);break;case"mediumDate":ne=hn(P,Qt.Medium);break;case"longDate":ne=hn(P,Qt.Long);break;case"fullDate":ne=hn(P,Qt.Full);break;case"shortTime":ne=Kt(P,Qt.Short);break;case"mediumTime":ne=Kt(P,Qt.Medium);break;case"longTime":ne=Kt(P,Qt.Long);break;case"fullTime":ne=Kt(P,Qt.Full);break;case"short":const ye=gn(P,"shortTime"),Ye=gn(P,"shortDate");ne=rr(nn(P,Qt.Short),[ye,Ye]);break;case"medium":const Nt=gn(P,"mediumTime"),vn=gn(P,"mediumDate");ne=rr(nn(P,Qt.Medium),[Nt,vn]);break;case"long":const xr=gn(P,"longTime"),It=gn(P,"longDate");ne=rr(nn(P,Qt.Long),[xr,It]);break;case"full":const xn=gn(P,"fullTime"),Qn=gn(P,"fullDate");ne=rr(nn(P,Qt.Full),[xn,Qn])}return ne&&(Wr[B][K]=ne),ne}function rr(P,K){return K&&(P=P.replace(/\{([^}]+)}/g,function(B,ne){return null!=K&&ne in K?K[ne]:B})),P}function ni(P,K,B="-",ne,ye){let Ye="";(P<0||ye&&P<=0)&&(ye?P=1-P:(P=-P,Ye=B));let Nt=String(P);for(;Nt.length<K;)Nt="0"+Nt;return ne&&(Nt=Nt.slice(Nt.length-K)),Ye+Nt}function Cn(P,K,B=0,ne=!1,ye=!1){return function(Ye,Nt){let vn=function cr(P,K){switch(P){case fn.FullYear:return K.getFullYear();case fn.Month:return K.getMonth();case fn.Date:return K.getDate();case fn.Hours:return K.getHours();case fn.Minutes:return K.getMinutes();case fn.Seconds:return K.getSeconds();case fn.FractionalSeconds:return K.getMilliseconds();case fn.Day:return K.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,Ye);if((B>0||vn>-B)&&(vn+=B),P===fn.Hours)0===vn&&-12===B&&(vn=12);else if(P===fn.FractionalSeconds)return function qr(P,K){return ni(P,3).substring(0,K)}(vn,K);const xr=Tt(Nt,jt.MinusSign);return ni(vn,K,xr,ne,ye)}}function Sn(P,K,B=ft.Format,ne=!1){return function(ye,Ye){return function Ir(P,K,B,ne,ye,Ye){switch(B){case Zt.Months:return vt(K,ye,ne)[P.getMonth()];case Zt.Days:return dt(K,ye,ne)[P.getDay()];case Zt.DayPeriods:const Nt=P.getHours(),vn=P.getMinutes();if(Ye){const It=function kn(P){const K=(0,b.cg1)(P);return Bn(K),(K[b.wAp.ExtraData][2]||[]).map(ne=>"string"==typeof ne?On(ne):[On(ne[0]),On(ne[1])])}(K),xn=function Yn(P,K,B){const ne=(0,b.cg1)(P);Bn(ne);const Ye=un([ne[b.wAp.ExtraData][0],ne[b.wAp.ExtraData][1]],K)||[];return un(Ye,B)||[]}(K,ye,ne),Qn=It.findIndex(ir=>{if(Array.isArray(ir)){const[$t,tn]=ir,Ko=Nt>=$t.hours&&vn>=$t.minutes,qt=Nt<tn.hours||Nt===tn.hours&&vn<tn.minutes;if($t.hours<tn.hours){if(Ko&&qt)return!0}else if(Ko||qt)return!0}else if(ir.hours===Nt&&ir.minutes===vn)return!0;return!1});if(-1!==Qn)return xn[Qn]}return Qe(K,ye,ne)[Nt<12?0:1];case Zt.Eras:return function ht(P,K){return un((0,b.cg1)(P)[b.wAp.Eras],K)}(K,ne)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${B}`)}}(ye,Ye,P,K,B,ne)}}function br(P){return function(K,B,ne){const ye=-1*ne,Ye=Tt(B,jt.MinusSign),Nt=ye>0?Math.floor(ye/60):Math.ceil(ye/60);switch(P){case In.Short:return(ye>=0?"+":"")+ni(Nt,2,Ye)+ni(Math.abs(ye%60),2,Ye);case In.ShortGMT:return"GMT"+(ye>=0?"+":"")+ni(Nt,1,Ye);case In.Long:return"GMT"+(ye>=0?"+":"")+ni(Nt,2,Ye)+":"+ni(Math.abs(ye%60),2,Ye);case In.Extended:return 0===ne?"Z":(ye>=0?"+":"")+ni(Nt,2,Ye)+":"+ni(Math.abs(ye%60),2,Ye);default:throw new Error(`Unknown zone width "${P}"`)}}}const Lt=0,Et=4;function me(P){return nr(P.getFullYear(),P.getMonth(),P.getDate()+(Et-P.getDay()))}function De(P,K=!1){return function(B,ne){let ye;if(K){const Ye=new Date(B.getFullYear(),B.getMonth(),1).getDay()-1,Nt=B.getDate();ye=1+Math.floor((Nt+Ye)/7)}else{const Ye=me(B),Nt=function Fe(P){const K=nr(P,Lt,1).getDay();return nr(P,0,1+(K<=Et?Et:Et+7)-K)}(Ye.getFullYear()),vn=Ye.getTime()-Nt.getTime();ye=1+Math.round(vn/6048e5)}return ni(ye,P,Tt(ne,jt.MinusSign))}}function pt(P,K=!1){return function(B,ne){return ni(me(B).getFullYear(),P,Tt(ne,jt.MinusSign),K)}}const bt={};function fe(P,K){P=P.replace(/:/g,"");const B=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(B)?K:B}function de(P){return P instanceof Date&&!isNaN(P.valueOf())}const ge=/^(\d+)?\.((\d+)(-(\d+))?)?$/,le=22,Re=".",st="0",Ct=";",zt=",",Ht="#";function Yr(P){const K=parseInt(P);if(isNaN(K))throw new Error("Invalid integer literal when parsing "+P);return K}function ks(P,K){K=encodeURIComponent(K);for(const B of P.split(";")){const ne=B.indexOf("="),[ye,Ye]=-1==ne?[B,""]:[B.slice(0,ne),B.slice(ne+1)];if(ye.trim()===K)return decodeURIComponent(Ye)}return null}const ds=/\s+/,ki=[];let rn=(()=>{class P{constructor(B,ne,ye,Ye){this._iterableDiffers=B,this._keyValueDiffers=ne,this._ngEl=ye,this._renderer=Ye,this.initialClasses=ki,this.stateMap=new Map}set klass(B){this.initialClasses=null!=B?B.trim().split(ds):ki}set ngClass(B){this.rawClass="string"==typeof B?B.trim().split(ds):B}ngDoCheck(){for(const ne of this.initialClasses)this._updateState(ne,!0);const B=this.rawClass;if(Array.isArray(B)||B instanceof Set)for(const ne of B)this._updateState(ne,!0);else if(null!=B)for(const ne of Object.keys(B))this._updateState(ne,Boolean(B[ne]));this._applyStateDiff()}_updateState(B,ne){const ye=this.stateMap.get(B);void 0!==ye?(ye.enabled!==ne&&(ye.changed=!0,ye.enabled=ne),ye.touched=!0):this.stateMap.set(B,{enabled:ne,changed:!0,touched:!0})}_applyStateDiff(){for(const B of this.stateMap){const ne=B[0],ye=B[1];ye.changed?(this._toggleClass(ne,ye.enabled),ye.changed=!1):ye.touched||(ye.enabled&&this._toggleClass(ne,!1),this.stateMap.delete(ne)),ye.touched=!1}}_toggleClass(B,ne){(B=B.trim()).length>0&&B.split(ds).forEach(ye=>{ne?this._renderer.addClass(this._ngEl.nativeElement,ye):this._renderer.removeClass(this._ngEl.nativeElement,ye)})}}return P.\u0275fac=function(B){return new(B||P)(b.Y36(b.ZZ4),b.Y36(b.aQg),b.Y36(b.SBq),b.Y36(b.Qsj))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),P})();class ji{constructor(K,B,ne,ye){this.$implicit=K,this.ngForOf=B,this.index=ne,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mr=(()=>{class P{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,ne,ye){this._viewContainer=B,this._template=ne,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const ne=this._viewContainer;B.forEachOperation((ye,Ye,Nt)=>{if(null==ye.previousIndex)ne.createEmbeddedView(this._template,new ji(ye.item,this._ngForOf,-1,-1),null===Nt?void 0:Nt);else if(null==Nt)ne.remove(null===Ye?void 0:Ye);else if(null!==Ye){const vn=ne.get(Ye);ne.move(vn,Nt),Zr(vn,ye)}});for(let ye=0,Ye=ne.length;ye<Ye;ye++){const vn=ne.get(ye).context;vn.index=ye,vn.count=Ye,vn.ngForOf=this._ngForOf}B.forEachIdentityChange(ye=>{Zr(ne.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(B,ne){return!0}}return P.\u0275fac=function(B){return new(B||P)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(b.ZZ4))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function Zr(P,K){P.context.$implicit=K.item}let gi=(()=>{class P{constructor(B,ne){this._viewContainer=B,this._context=new Bo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){Fn("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){Fn("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,ne){return!0}}return P.\u0275fac=function(B){return new(B||P)(b.Y36(b.s_b),b.Y36(b.Rgc))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class Bo{constructor(){this.$implicit=null,this.ngIf=null}}function Fn(P,K){if(K&&!K.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,b.AaK)(K)}'.`)}let Fs=(()=>{class P{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const ne=this._viewContainerRef;if(this._viewRef&&ne.remove(ne.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ye,ngTemplateOutletContext:Ye,ngTemplateOutletInjector:Nt}=this;this._viewRef=ne.createEmbeddedView(ye,Ye,Nt?{injector:Nt}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(B){return new(B||P)(b.Y36(b.s_b))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[b.TTD]}),P})();let mo=(()=>{class P{constructor(B){this._locale=B}transform(B,ne,ye){if(!function ia(P){return!(null==P||""===P||P!=P)}(B))return null;ye=ye||this._locale;try{return function _s(P,K,B){return function Qr(P,K,B,ne,ye,Ye,Nt=!1){let vn="",xr=!1;if(isFinite(P)){let It=function ts(P){let ne,ye,Ye,Nt,vn,K=Math.abs(P)+"",B=0;for((ye=K.indexOf(Re))>-1&&(K=K.replace(Re,"")),(Ye=K.search(/e/i))>0?(ye<0&&(ye=Ye),ye+=+K.slice(Ye+1),K=K.substring(0,Ye)):ye<0&&(ye=K.length),Ye=0;K.charAt(Ye)===st;Ye++);if(Ye===(vn=K.length))ne=[0],ye=1;else{for(vn--;K.charAt(vn)===st;)vn--;for(ye-=Ye,ne=[],Nt=0;Ye<=vn;Ye++,Nt++)ne[Nt]=Number(K.charAt(Ye))}return ye>le&&(ne=ne.splice(0,le-1),B=ye-1,ye=1),{digits:ne,exponent:B,integerLen:ye}}(P);Nt&&(It=function Ps(P){if(0===P.digits[0])return P;const K=P.digits.length-P.integerLen;return P.exponent?P.exponent+=2:(0===K?P.digits.push(0,0):1===K&&P.digits.push(0),P.integerLen+=2),P}(It));let xn=K.minInt,Qn=K.minFrac,ir=K.maxFrac;if(Ye){const Rt=Ye.match(ge);if(null===Rt)throw new Error(`${Ye} is not a valid digit info`);const ci=Rt[1],Ro=Rt[3],ml=Rt[5];null!=ci&&(xn=Yr(ci)),null!=Ro&&(Qn=Yr(Ro)),null!=ml?ir=Yr(ml):null!=Ro&&Qn>ir&&(ir=Qn)}!function Zn(P,K,B){if(K>B)throw new Error(`The minimum number of digits after fraction (${K}) is higher than the maximum (${B}).`);let ne=P.digits,ye=ne.length-P.integerLen;const Ye=Math.min(Math.max(K,ye),B);let Nt=Ye+P.integerLen,vn=ne[Nt];if(Nt>0){ne.splice(Math.max(P.integerLen,Nt));for(let Qn=Nt;Qn<ne.length;Qn++)ne[Qn]=0}else{ye=Math.max(0,ye),P.integerLen=1,ne.length=Math.max(1,Nt=Ye+1),ne[0]=0;for(let Qn=1;Qn<Nt;Qn++)ne[Qn]=0}if(vn>=5)if(Nt-1<0){for(let Qn=0;Qn>Nt;Qn--)ne.unshift(0),P.integerLen++;ne.unshift(1),P.integerLen++}else ne[Nt-1]++;for(;ye<Math.max(0,Ye);ye++)ne.push(0);let xr=0!==Ye;const It=K+P.integerLen,xn=ne.reduceRight(function(Qn,ir,$t,tn){return tn[$t]=(ir+=Qn)<10?ir:ir-10,xr&&(0===tn[$t]&&$t>=It?tn.pop():xr=!1),ir>=10?1:0},0);xn&&(ne.unshift(xn),P.integerLen++)}(It,Qn,ir);let $t=It.digits,tn=It.integerLen;const Ko=It.exponent;let qt=[];for(xr=$t.every(Rt=>!Rt);tn<xn;tn++)$t.unshift(0);for(;tn<0;tn++)$t.unshift(0);tn>0?qt=$t.splice(tn,$t.length):(qt=$t,$t=[0]);const at=[];for($t.length>=K.lgSize&&at.unshift($t.splice(-K.lgSize,$t.length).join(""));$t.length>K.gSize;)at.unshift($t.splice(-K.gSize,$t.length).join(""));$t.length&&at.unshift($t.join("")),vn=at.join(Tt(B,ne)),qt.length&&(vn+=Tt(B,ye)+qt.join("")),Ko&&(vn+=Tt(B,jt.Exponential)+"+"+Ko)}else vn=Tt(B,jt.Infinity);return vn=P<0&&!xr?K.negPre+vn+K.negSuf:K.posPre+vn+K.posSuf,vn}(P,function Wi(P,K="-"){const B={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ne=P.split(Ct),ye=ne[0],Ye=ne[1],Nt=-1!==ye.indexOf(Re)?ye.split(Re):[ye.substring(0,ye.lastIndexOf(st)+1),ye.substring(ye.lastIndexOf(st)+1)],vn=Nt[0],xr=Nt[1]||"";B.posPre=vn.substring(0,vn.indexOf(Ht));for(let xn=0;xn<xr.length;xn++){const Qn=xr.charAt(xn);Qn===st?B.minFrac=B.maxFrac=xn+1:Qn===Ht?B.maxFrac=xn+1:B.posSuf+=Qn}const It=vn.split(zt);if(B.gSize=It[1]?It[1].length:0,B.lgSize=It[2]||It[1]?(It[2]||It[1]).length:0,Ye){const xn=ye.length-B.posPre.length-B.posSuf.length,Qn=Ye.indexOf(Ht);B.negPre=Ye.substring(0,Qn).replace(/'/g,""),B.negSuf=Ye.slice(Qn+xn).replace(/'/g,"")}else B.negPre=K+B.posPre,B.negSuf=B.posSuf;return B}(function Nn(P,K){return(0,b.cg1)(P)[b.wAp.NumberFormats][K]}(K,Te.Percent),Tt(K,jt.MinusSign)),K,jt.Group,jt.Decimal,B,!0).replace(new RegExp("%","g"),Tt(K,jt.PercentSign))}(function hs(P){if("string"==typeof P&&!isNaN(Number(P)-parseFloat(P)))return Number(P);if("number"!=typeof P)throw new Error(`${P} is not a number`);return P}(B),ye,ne)}catch(Ye){throw function Ce(P,K){return new b.vHH(2100,!1)}()}}}return P.\u0275fac=function(B){return new(B||P)(b.Y36(b.soG,16))},P.\u0275pipe=b.Yjl({name:"percent",type:P,pure:!0,standalone:!0}),P})();let Sa=(()=>{class P{}return P.\u0275fac=function(B){return new(B||P)},P.\u0275mod=b.oAB({type:P}),P.\u0275inj=b.cJS({}),P})();const is="browser",_o="server";function jo(P){return P===is}function al(P){return P===_o}let Qs=(()=>{class P{}return P.\u0275prov=(0,b.Yz7)({token:P,providedIn:"root",factory:()=>new sa((0,b.LFG)(xe),window)}),P})();class sa{constructor(K,B){this.document=K,this.window=B,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const B=function Us(P,K){const B=P.getElementById(K)||P.getElementsByName(K)[0];if(B)return B;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const ne=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let ye=ne.currentNode;for(;ye;){const Ye=ye.shadowRoot;if(Ye){const Nt=Ye.getElementById(K)||Ye.querySelector(`[name="${K}"]`);if(Nt)return Nt}ye=ne.nextNode()}}return null}(this.document,K);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=K)}}scrollToElement(K){const B=K.getBoundingClientRect(),ne=B.left+this.window.pageXOffset,ye=B.top+this.window.pageYOffset,Ye=this.offset();this.window.scrollTo(ne-Ye[0],ye-Ye[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Xs(this.window.history)||Xs(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Xs(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class za{}},529:(sn,qe,G)=>{G.d(qe,{JF:()=>br,eN:()=>ut});var b=G(6895),Z=G(4650),p=G(9646),Ie=G(9751),Pe=G(4351),xe=G(9300),He=G(4004);class Le{}class Ae{}class be{constructor(me){this.normalizedNames=new Map,this.lazyUpdate=null,me?this.lazyInit="string"==typeof me?()=>{this.headers=new Map,me.split("\n").forEach(De=>{const pt=De.indexOf(":");if(pt>0){const bt=De.slice(0,pt),he=bt.toLowerCase(),fe=De.slice(pt+1).trim();this.maybeSetNormalizedName(bt,he),this.headers.has(he)?this.headers.get(he).push(fe):this.headers.set(he,[fe])}})}:()=>{this.headers=new Map,Object.keys(me).forEach(De=>{let pt=me[De];const bt=De.toLowerCase();"string"==typeof pt&&(pt=[pt]),pt.length>0&&(this.headers.set(bt,pt),this.maybeSetNormalizedName(De,bt))})}:this.headers=new Map}has(me){return this.init(),this.headers.has(me.toLowerCase())}get(me){this.init();const De=this.headers.get(me.toLowerCase());return De&&De.length>0?De[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(me){return this.init(),this.headers.get(me.toLowerCase())||null}append(me,De){return this.clone({name:me,value:De,op:"a"})}set(me,De){return this.clone({name:me,value:De,op:"s"})}delete(me,De){return this.clone({name:me,value:De,op:"d"})}maybeSetNormalizedName(me,De){this.normalizedNames.has(De)||this.normalizedNames.set(De,me)}init(){this.lazyInit&&(this.lazyInit instanceof be?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(me=>this.applyUpdate(me)),this.lazyUpdate=null))}copyFrom(me){me.init(),Array.from(me.headers.keys()).forEach(De=>{this.headers.set(De,me.headers.get(De)),this.normalizedNames.set(De,me.normalizedNames.get(De))})}clone(me){const De=new be;return De.lazyInit=this.lazyInit&&this.lazyInit instanceof be?this.lazyInit:this,De.lazyUpdate=(this.lazyUpdate||[]).concat([me]),De}applyUpdate(me){const De=me.name.toLowerCase();switch(me.op){case"a":case"s":let pt=me.value;if("string"==typeof pt&&(pt=[pt]),0===pt.length)return;this.maybeSetNormalizedName(me.name,De);const bt=("a"===me.op?this.headers.get(De):void 0)||[];bt.push(...pt),this.headers.set(De,bt);break;case"d":const he=me.value;if(he){let fe=this.headers.get(De);if(!fe)return;fe=fe.filter(te=>-1===he.indexOf(te)),0===fe.length?(this.headers.delete(De),this.normalizedNames.delete(De)):this.headers.set(De,fe)}else this.headers.delete(De),this.normalizedNames.delete(De)}}forEach(me){this.init(),Array.from(this.normalizedNames.keys()).forEach(De=>me(this.normalizedNames.get(De),this.headers.get(De)))}}class ke{encodeKey(me){return xt(me)}encodeValue(me){return xt(me)}decodeKey(me){return decodeURIComponent(me)}decodeValue(me){return decodeURIComponent(me)}}const Ke=/%(\d[a-f0-9])/gi,_t={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xt(Fe){return encodeURIComponent(Fe).replace(Ke,(me,De)=>_t[De]??me)}function tt(Fe){return`${Fe}`}class gt{constructor(me={}){if(this.updates=null,this.cloneFrom=null,this.encoder=me.encoder||new ke,me.fromString){if(me.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function et(Fe,me){const De=new Map;return Fe.length>0&&Fe.replace(/^\?/,"").split("&").forEach(bt=>{const he=bt.indexOf("="),[fe,te]=-1==he?[me.decodeKey(bt),""]:[me.decodeKey(bt.slice(0,he)),me.decodeValue(bt.slice(he+1))],ie=De.get(fe)||[];ie.push(te),De.set(fe,ie)}),De}(me.fromString,this.encoder)}else me.fromObject?(this.map=new Map,Object.keys(me.fromObject).forEach(De=>{const pt=me.fromObject[De],bt=Array.isArray(pt)?pt.map(tt):[tt(pt)];this.map.set(De,bt)})):this.map=null}has(me){return this.init(),this.map.has(me)}get(me){this.init();const De=this.map.get(me);return De?De[0]:null}getAll(me){return this.init(),this.map.get(me)||null}keys(){return this.init(),Array.from(this.map.keys())}append(me,De){return this.clone({param:me,value:De,op:"a"})}appendAll(me){const De=[];return Object.keys(me).forEach(pt=>{const bt=me[pt];Array.isArray(bt)?bt.forEach(he=>{De.push({param:pt,value:he,op:"a"})}):De.push({param:pt,value:bt,op:"a"})}),this.clone(De)}set(me,De){return this.clone({param:me,value:De,op:"s"})}delete(me,De){return this.clone({param:me,value:De,op:"d"})}toString(){return this.init(),this.keys().map(me=>{const De=this.encoder.encodeKey(me);return this.map.get(me).map(pt=>De+"="+this.encoder.encodeValue(pt)).join("&")}).filter(me=>""!==me).join("&")}clone(me){const De=new gt({encoder:this.encoder});return De.cloneFrom=this.cloneFrom||this,De.updates=(this.updates||[]).concat(me),De}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(me=>this.map.set(me,this.cloneFrom.map.get(me))),this.updates.forEach(me=>{switch(me.op){case"a":case"s":const De=("a"===me.op?this.map.get(me.param):void 0)||[];De.push(tt(me.value)),this.map.set(me.param,De);break;case"d":if(void 0===me.value){this.map.delete(me.param);break}{let pt=this.map.get(me.param)||[];const bt=pt.indexOf(tt(me.value));-1!==bt&&pt.splice(bt,1),pt.length>0?this.map.set(me.param,pt):this.map.delete(me.param)}}}),this.cloneFrom=this.updates=null)}}class yt{constructor(){this.map=new Map}set(me,De){return this.map.set(me,De),this}get(me){return this.map.has(me)||this.map.set(me,me.defaultValue()),this.map.get(me)}delete(me){return this.map.delete(me),this}has(me){return this.map.has(me)}keys(){return this.map.keys()}}function ot(Fe){return typeof ArrayBuffer<"u"&&Fe instanceof ArrayBuffer}function ze(Fe){return typeof Blob<"u"&&Fe instanceof Blob}function Ft(Fe){return typeof FormData<"u"&&Fe instanceof FormData}class Te{constructor(me,De,pt,bt){let he;if(this.url=De,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=me.toUpperCase(),function mt(Fe){switch(Fe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||bt?(this.body=void 0!==pt?pt:null,he=bt):he=pt,he&&(this.reportProgress=!!he.reportProgress,this.withCredentials=!!he.withCredentials,he.responseType&&(this.responseType=he.responseType),he.headers&&(this.headers=he.headers),he.context&&(this.context=he.context),he.params&&(this.params=he.params)),this.headers||(this.headers=new be),this.context||(this.context=new yt),this.params){const fe=this.params.toString();if(0===fe.length)this.urlWithParams=De;else{const te=De.indexOf("?");this.urlWithParams=De+(-1===te?"?":te<De.length-1?"&":"")+fe}}else this.params=new gt,this.urlWithParams=De}serializeBody(){return null===this.body?null:ot(this.body)||ze(this.body)||Ft(this.body)||function Se(Fe){return typeof URLSearchParams<"u"&&Fe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ft(this.body)?null:ze(this.body)?this.body.type||null:ot(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(me={}){const De=me.method||this.method,pt=me.url||this.url,bt=me.responseType||this.responseType,he=void 0!==me.body?me.body:this.body,fe=void 0!==me.withCredentials?me.withCredentials:this.withCredentials,te=void 0!==me.reportProgress?me.reportProgress:this.reportProgress;let ie=me.headers||this.headers,X=me.params||this.params;const Ve=me.context??this.context;return void 0!==me.setHeaders&&(ie=Object.keys(me.setHeaders).reduce((de,ge)=>de.set(ge,me.setHeaders[ge]),ie)),me.setParams&&(X=Object.keys(me.setParams).reduce((de,ge)=>de.set(ge,me.setParams[ge]),X)),new Te(De,pt,he,{params:X,headers:ie,context:Ve,reportProgress:te,responseType:bt,withCredentials:fe})}}var We=(()=>((We=We||{})[We.Sent=0]="Sent",We[We.UploadProgress=1]="UploadProgress",We[We.ResponseHeader=2]="ResponseHeader",We[We.DownloadProgress=3]="DownloadProgress",We[We.Response=4]="Response",We[We.User=5]="User",We))();class ft{constructor(me,De=200,pt="OK"){this.headers=me.headers||new be,this.status=void 0!==me.status?me.status:De,this.statusText=me.statusText||pt,this.url=me.url||null,this.ok=this.status>=200&&this.status<300}}class wt extends ft{constructor(me={}){super(me),this.type=We.ResponseHeader}clone(me={}){return new wt({headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Qt extends ft{constructor(me={}){super(me),this.type=We.Response,this.body=void 0!==me.body?me.body:null}clone(me={}){return new Qt({body:void 0!==me.body?me.body:this.body,headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class jt extends ft{constructor(me){super(me,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${me.url||"(unknown url)"}`:`Http failure response for ${me.url||"(unknown url)"}: ${me.status} ${me.statusText}`,this.error=me.error||null}}function $e(Fe,me){return{body:me,headers:Fe.headers,context:Fe.context,observe:Fe.observe,params:Fe.params,reportProgress:Fe.reportProgress,responseType:Fe.responseType,withCredentials:Fe.withCredentials}}let ut=(()=>{class Fe{constructor(De){this.handler=De}request(De,pt,bt={}){let he;if(De instanceof Te)he=De;else{let ie,X;ie=bt.headers instanceof be?bt.headers:new be(bt.headers),bt.params&&(X=bt.params instanceof gt?bt.params:new gt({fromObject:bt.params})),he=new Te(De,pt,void 0!==bt.body?bt.body:null,{headers:ie,context:bt.context,params:X,reportProgress:bt.reportProgress,responseType:bt.responseType||"json",withCredentials:bt.withCredentials})}const fe=(0,p.of)(he).pipe((0,Pe.b)(ie=>this.handler.handle(ie)));if(De instanceof Te||"events"===bt.observe)return fe;const te=fe.pipe((0,xe.h)(ie=>ie instanceof Qt));switch(bt.observe||"body"){case"body":switch(he.responseType){case"arraybuffer":return te.pipe((0,He.U)(ie=>{if(null!==ie.body&&!(ie.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ie.body}));case"blob":return te.pipe((0,He.U)(ie=>{if(null!==ie.body&&!(ie.body instanceof Blob))throw new Error("Response is not a Blob.");return ie.body}));case"text":return te.pipe((0,He.U)(ie=>{if(null!==ie.body&&"string"!=typeof ie.body)throw new Error("Response is not a string.");return ie.body}));default:return te.pipe((0,He.U)(ie=>ie.body))}case"response":return te;default:throw new Error(`Unreachable: unhandled observe type ${bt.observe}}`)}}delete(De,pt={}){return this.request("DELETE",De,pt)}get(De,pt={}){return this.request("GET",De,pt)}head(De,pt={}){return this.request("HEAD",De,pt)}jsonp(De,pt){return this.request("JSONP",De,{params:(new gt).append(pt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(De,pt={}){return this.request("OPTIONS",De,pt)}patch(De,pt,bt={}){return this.request("PATCH",De,$e(bt,pt))}post(De,pt,bt={}){return this.request("POST",De,$e(bt,pt))}put(De,pt,bt={}){return this.request("PUT",De,$e(bt,pt))}}return Fe.\u0275fac=function(De){return new(De||Fe)(Z.LFG(Le))},Fe.\u0275prov=Z.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();function Qe(Fe,me){return me(Fe)}function dt(Fe,me){return(De,pt)=>me.intercept(De,{handle:bt=>Fe(bt,pt)})}const ht=new Z.OlP("HTTP_INTERCEPTORS"),Bt=new Z.OlP("HTTP_INTERCEPTOR_FNS");function At(){let Fe=null;return(me,De)=>(null===Fe&&(Fe=((0,Z.f3M)(ht,{optional:!0})??[]).reduceRight(dt,Qe)),Fe(me,De))}let hn=(()=>{class Fe extends Le{constructor(De,pt){super(),this.backend=De,this.injector=pt,this.chain=null}handle(De){if(null===this.chain){const pt=Array.from(new Set(this.injector.get(Bt)));this.chain=pt.reduceRight((bt,he)=>function vt(Fe,me,De){return(pt,bt)=>De.runInContext(()=>me(pt,he=>Fe(he,bt)))}(bt,he,this.injector),Qe)}return this.chain(De,pt=>this.backend.handle(pt))}}return Fe.\u0275fac=function(De){return new(De||Fe)(Z.LFG(Ae),Z.LFG(Z.lqb))},Fe.\u0275prov=Z.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const Yn=/^\)\]\}',?\n/;let un=(()=>{class Fe{constructor(De){this.xhrFactory=De}handle(De){if("JSONP"===De.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ie.y(pt=>{const bt=this.xhrFactory.build();if(bt.open(De.method,De.urlWithParams),De.withCredentials&&(bt.withCredentials=!0),De.headers.forEach((le,Re)=>bt.setRequestHeader(le,Re.join(","))),De.headers.has("Accept")||bt.setRequestHeader("Accept","application/json, text/plain, */*"),!De.headers.has("Content-Type")){const le=De.detectContentTypeHeader();null!==le&&bt.setRequestHeader("Content-Type",le)}if(De.responseType){const le=De.responseType.toLowerCase();bt.responseType="json"!==le?le:"text"}const he=De.serializeBody();let fe=null;const te=()=>{if(null!==fe)return fe;const le=bt.statusText||"OK",Re=new be(bt.getAllResponseHeaders()),st=function tr(Fe){return"responseURL"in Fe&&Fe.responseURL?Fe.responseURL:/^X-Request-URL:/m.test(Fe.getAllResponseHeaders())?Fe.getResponseHeader("X-Request-URL"):null}(bt)||De.url;return fe=new wt({headers:Re,status:bt.status,statusText:le,url:st}),fe},ie=()=>{let{headers:le,status:Re,statusText:st,url:Ct}=te(),zt=null;204!==Re&&(zt=typeof bt.response>"u"?bt.responseText:bt.response),0===Re&&(Re=zt?200:0);let Ht=Re>=200&&Re<300;if("json"===De.responseType&&"string"==typeof zt){const En=zt;zt=zt.replace(Yn,"");try{zt=""!==zt?JSON.parse(zt):null}catch(Ci){zt=En,Ht&&(Ht=!1,zt={error:Ci,text:zt})}}Ht?(pt.next(new Qt({body:zt,headers:le,status:Re,statusText:st,url:Ct||void 0})),pt.complete()):pt.error(new jt({error:zt,headers:le,status:Re,statusText:st,url:Ct||void 0}))},X=le=>{const{url:Re}=te(),st=new jt({error:le,status:bt.status||0,statusText:bt.statusText||"Unknown Error",url:Re||void 0});pt.error(st)};let Ve=!1;const de=le=>{Ve||(pt.next(te()),Ve=!0);let Re={type:We.DownloadProgress,loaded:le.loaded};le.lengthComputable&&(Re.total=le.total),"text"===De.responseType&&bt.responseText&&(Re.partialText=bt.responseText),pt.next(Re)},ge=le=>{let Re={type:We.UploadProgress,loaded:le.loaded};le.lengthComputable&&(Re.total=le.total),pt.next(Re)};return bt.addEventListener("load",ie),bt.addEventListener("error",X),bt.addEventListener("timeout",X),bt.addEventListener("abort",X),De.reportProgress&&(bt.addEventListener("progress",de),null!==he&&bt.upload&&bt.upload.addEventListener("progress",ge)),bt.send(he),pt.next({type:We.Sent}),()=>{bt.removeEventListener("error",X),bt.removeEventListener("abort",X),bt.removeEventListener("load",ie),bt.removeEventListener("timeout",X),De.reportProgress&&(bt.removeEventListener("progress",de),null!==he&&bt.upload&&bt.upload.removeEventListener("progress",ge)),bt.readyState!==bt.DONE&&bt.abort()}})}}return Fe.\u0275fac=function(De){return new(De||Fe)(Z.LFG(b.JF))},Fe.\u0275prov=Z.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();const On=new Z.OlP("XSRF_ENABLED"),vr=new Z.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),kr=new Z.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Wr{}let Kr=(()=>{class Fe{constructor(De,pt,bt){this.doc=De,this.platform=pt,this.cookieName=bt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const De=this.doc.cookie||"";return De!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,b.Mx)(De,this.cookieName),this.lastCookieString=De),this.lastToken}}return Fe.\u0275fac=function(De){return new(De||Fe)(Z.LFG(b.K0),Z.LFG(Z.Lbi),Z.LFG(vr))},Fe.\u0275prov=Z.Yz7({token:Fe,factory:Fe.\u0275fac}),Fe})();function In(Fe,me){const De=Fe.url.toLowerCase();if(!(0,Z.f3M)(On)||"GET"===Fe.method||"HEAD"===Fe.method||De.startsWith("http://")||De.startsWith("https://"))return me(Fe);const pt=(0,Z.f3M)(Wr).getToken(),bt=(0,Z.f3M)(kr);return null!=pt&&!Fe.headers.has(bt)&&(Fe=Fe.clone({headers:Fe.headers.set(bt,pt)})),me(Fe)}var Zt=(()=>((Zt=Zt||{})[Zt.Interceptors=0]="Interceptors",Zt[Zt.LegacyInterceptors=1]="LegacyInterceptors",Zt[Zt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Zt[Zt.NoXsrfProtection=3]="NoXsrfProtection",Zt[Zt.JsonpSupport=4]="JsonpSupport",Zt[Zt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Zt))();function Wn(Fe,me){return{\u0275kind:Fe,\u0275providers:me}}function nr(...Fe){const me=[ut,un,hn,{provide:Le,useExisting:hn},{provide:Ae,useExisting:un},{provide:Bt,useValue:In,multi:!0},{provide:On,useValue:!0},{provide:Wr,useClass:Kr}];for(const De of Fe)me.push(...De.\u0275providers);return(0,Z.MR2)(me)}const rr=new Z.OlP("LEGACY_INTERCEPTOR_FN");let br=(()=>{class Fe{}return Fe.\u0275fac=function(De){return new(De||Fe)},Fe.\u0275mod=Z.oAB({type:Fe}),Fe.\u0275inj=Z.cJS({providers:[nr(Wn(Zt.LegacyInterceptors,[{provide:rr,useFactory:At},{provide:Bt,useExisting:rr,multi:!0}]))]}),Fe})()},4650:(sn,qe,G)=>{G.d(qe,{$8M:()=>Jl,$WT:()=>Xr,$Z:()=>ea,AFp:()=>kE,ALo:()=>zv,AaK:()=>Le,BQk:()=>Fg,CHM:()=>oe,CRH:()=>mm,CZH:()=>u0,CqO:()=>rf,D6c:()=>Yt,EJc:()=>VE,EpF:()=>Ug,F$t:()=>Zc,F4k:()=>nf,FYo:()=>ig,FiY:()=>U,Gf:()=>Zv,GfV:()=>Rh,Gpc:()=>ve,Hsn:()=>Gg,Ikx:()=>vp,JOm:()=>Jr,KtG:()=>ct,LFG:()=>Lt,LMc:()=>io,LSH:()=>Um,Lbi:()=>ay,Lck:()=>Oe,MAs:()=>Rg,MGl:()=>jg,MMx:()=>An,MR2:()=>bd,MT6:()=>td,NdJ:()=>np,O4$:()=>ql,OlP:()=>ai,Oqu:()=>wr,P3R:()=>eg,PXZ:()=>qw,Q6J:()=>tp,QGY:()=>tf,Qsj:()=>sg,QtT:()=>Mp,R0b:()=>Fu,RDi:()=>Sm,Rgc:()=>xp,SBq:()=>ec,SDv:()=>am,Sil:()=>Fw,Suo:()=>gm,TTD:()=>Qs,TgZ:()=>Xh,Tol:()=>bv,Udp:()=>Gi,VKq:()=>_E,W1O:()=>Pb,WLB:()=>Z_,X6Q:()=>$a,XFs:()=>Pt,Xpm:()=>En,Xts:()=>To,Y36:()=>Uh,YKP:()=>ae,YNc:()=>ep,Yjl:()=>ts,Yz7:()=>Tt,Z0I:()=>jn,ZZ4:()=>m,_Bn:()=>H,_UZ:()=>kg,_Vd:()=>Td,_c5:()=>Je,_uU:()=>hc,aQg:()=>V,c2e:()=>UE,cJS:()=>Un,cg1:()=>nd,dDg:()=>$w,dqk:()=>In,eFA:()=>KE,eJc:()=>Jv,ekj:()=>ap,eoX:()=>Qb,f3M:()=>Fe,g9A:()=>oy,h0i:()=>q,hGG:()=>kt,hij:()=>Zd,iGM:()=>Rb,ifc:()=>X,ip1:()=>l0,jDz:()=>Hs,kEZ:()=>Eb,kL8:()=>rd,lG2:()=>Ps,lcZ:()=>vE,lqb:()=>gs,lri:()=>c0,n5z:()=>xl,oAB:()=>_s,oxw:()=>sp,pQV:()=>lm,q4F:()=>Ff,qLn:()=>wu,qOj:()=>Zf,qZA:()=>uc,rWj:()=>Jb,s9C:()=>E_,sBO:()=>Qw,s_b:()=>ey,soG:()=>ly,tb:()=>zE,tp0:()=>ee,uIk:()=>au,vHH:()=>tt,vpe:()=>ad,wAp:()=>Xn,xp6:()=>Xm,ynx:()=>ef,z2F:()=>d0,zSh:()=>ng,zs3:()=>El});var b=G(7579),Z=G(727),p=G(9751),Ie=G(6451),Pe=G(3099);function xe(s){for(let o in s)if(s[o]===xe)return o;throw Error("Could not find renamed property on target object.")}function He(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function Le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Ae(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const be=xe({__forward_ref__:xe});function ve(s){return s.__forward_ref__=ve,s.toString=function(){return Le(this())},s}function ke(s){return et(s)?s():s}function et(s){return"function"==typeof s&&s.hasOwnProperty(be)&&s.__forward_ref__===ve}function Ke(s){return s&&!!s.\u0275providers}const xt="https://g.co/ng/security#xss";class tt extends Error{constructor(o,c){super(gt(o,c)),this.code=o}}function gt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function we(s){return"string"==typeof s?s:null==s?"":String(s)}function Ft(s,o){throw new tt(-201,!1)}function At(s,o,c,h){throw new Error(`ASSERTION ERROR: ${s}`+(null==h?"":` [Expected=> ${c} ${h} ${o} <=Actual]`))}function Tt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Un(s){return{providers:s.providers||[],imports:s.imports||[]}}function Hn(s){return Lr(s,Yn)||Lr(s,un)}function jn(s){return null!==Hn(s)}function Lr(s,o){return s.hasOwnProperty(o)?s[o]:null}function kn(s){return s&&(s.hasOwnProperty(tr)||s.hasOwnProperty(On))?s[tr]:null}const Yn=xe({\u0275prov:xe}),tr=xe({\u0275inj:xe}),un=xe({ngInjectableDef:xe}),On=xe({ngInjectorDef:xe});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let vr;function kr(s){const o=vr;return vr=s,o}function Wr(s,o,c){const h=Hn(s);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&Pt.Optional?null:void 0!==o?o:void Ft(Le(s))}const In=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nr={},gn="__NG_DI_FLAG__",rr="ngTempTokenPath",ni="ngTokenPath",qr=/\n/gm,Cn="\u0275",cr="__source";let Sn;function Ir(s){const o=Sn;return Sn=s,o}function br(s,o=Pt.Default){if(void 0===Sn)throw new tt(-203,!1);return null===Sn?Wr(s,void 0,o):Sn.get(s,o&Pt.Optional?null:void 0,o)}function Lt(s,o=Pt.Default){return(function ti(){return vr}()||br)(ke(s),o)}function Fe(s,o=Pt.Default){return Lt(s,me(o))}function me(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function De(s){const o=[];for(let c=0;c<s.length;c++){const h=ke(s[c]);if(Array.isArray(h)){if(0===h.length)throw new tt(900,!1);let g,y=Pt.Default;for(let C=0;C<h.length;C++){const M=h[C],L=bt(M);"number"==typeof L?-1===L?g=M.token:y|=L:g=M}o.push(Lt(g,y))}else o.push(Lt(h))}return o}function pt(s,o){return s[gn]=o,s.prototype[gn]=o,s}function bt(s){return s[gn]}function te(s){return{toString:s}.toString()}var ie=(()=>((ie=ie||{})[ie.OnPush=0]="OnPush",ie[ie.Default=1]="Default",ie))(),X=(()=>{return(s=X||(X={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",X;var s})();const Ve={},de=[],ge=xe({\u0275cmp:xe}),le=xe({\u0275dir:xe}),Re=xe({\u0275pipe:xe}),st=xe({\u0275mod:xe}),Ct=xe({\u0275fac:xe}),zt=xe({__NG_ELEMENT_ID__:xe});let Ht=0;function En(s){return te(()=>{const o=Tr(s),c={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===ie.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||X.Emulated,id:"c"+Ht++,styles:s.styles||de,_:null,schemas:s.schemas||null,tView:null};ks(c);const h=s.dependencies;return c.directiveDefs=ds(h,!1),c.pipeDefs=ds(h,!0),c})}function Qr(s){return Zn(s)||Yr(s)}function es(s){return null!==s}function _s(s){return te(()=>({type:s.type,bootstrap:s.bootstrap||de,declarations:s.declarations||de,imports:s.imports||de,exports:s.exports||de,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Wi(s,o){if(null==s)return Ve;const c={};for(const h in s)if(s.hasOwnProperty(h)){let g=s[h],y=g;Array.isArray(g)&&(y=g[1],g=g[0]),c[g]=h,o&&(o[g]=y)}return c}function Ps(s){return te(()=>{const o=Tr(s);return ks(o),o})}function ts(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Zn(s){return s[ge]||null}function Yr(s){return s[le]||null}function ri(s){return s[Re]||null}function Xr(s){const o=Zn(s)||Yr(s)||ri(s);return null!==o&&o.standalone}function ns(s,o){const c=s[st]||null;if(!c&&!0===o)throw new Error(`Type ${Le(s)} does not have '\u0275mod' property.`);return c}function Tr(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||de,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Wi(s.inputs,o),outputs:Wi(s.outputs)}}function ks(s){s.features?.forEach(o=>o(s))}function ds(s,o){if(!s)return null;const c=o?ri:Qr;return()=>("function"==typeof s?s():s).map(h=>c(h)).filter(es)}const ki=0,rn=1,Gn=2,Sr=3,pi=4,ji=5,Mr=6,Zr=7,ii=8,gi=9,Bo=10,Fn=11,Ti=12,ys=13,zs=14,vs=15,Ni=16,Ws=17,Ur=18,Fi=19,Fs=20,Ge=21,Ce=22,Dt=1,Jt=2,yn=7,Vn=8,Ar=9,$n=10;function si(s){return Array.isArray(s)&&"object"==typeof s[Dt]}function Rr(s){return Array.isArray(s)&&!0===s[Dt]}function Ls(s){return 0!=(4&s.flags)}function qs(s){return s.componentOffset>-1}function rs(s){return 1==(1&s.flags)}function bs(s){return!!s.template}function Vo(s){return 0!=(256&s[Gn])}function Ki(s,o){return s.hasOwnProperty(Ct)?s[Ct]:null}class Js{constructor(o,c,h){this.previousValue=o,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function Qs(){return sa}function sa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Us),Xs}function Xs(){const s=za(this),o=s?.current;if(o){const c=s.previous;if(c===Ve)s.previous=o;else for(let h in o)c[h]=o[h];s.current=null,this.ngOnChanges(o)}}function Us(s,o,c,h){const g=this.declaredInputs[c],y=za(s)||function Tl(s,o){return s[ll]=o}(s,{previous:Ve,current:null}),C=y.current||(y.current={}),M=y.previous,L=M[g];C[g]=new Js(L&&L.currentValue,o,M===Ve),s[h]=o}Qs.ngInherit=!0;const ll="__ngSimpleChanges__";function za(s){return s[ll]||null}const Or=function(s,o,c){},oa="svg";function Br(s){for(;Array.isArray(s);)s=s[ki];return s}function yo(s,o){return Br(o[s])}function li(s,o){return Br(o[s.index])}function Ho(s,o){return s.data[o]}function Is(s,o){return s[o]}function mi(s,o){const c=o[s];return si(c)?c:c[ki]}function Wa(s){return 64==(64&s[Gn])}function Ji(s,o){return null==o?null:s[o]}function aa(s){s[Ur]=0}function Sl(s,o){s[ji]+=o;let c=s,h=s[Sr];for(;null!==h&&(1===o&&1===c[ji]||-1===o&&0===c[ji]);)h[ji]+=o,c=h,h=h[Sr]}const Ln={lFrame:fu(null),bindingsEnabled:!0};function Mo(){return Ln.bindingsEnabled}function R(){return Ln.lFrame.lView}function F(){return Ln.lFrame.tView}function oe(s){return Ln.lFrame.contextLView=s,s[ii]}function ct(s){return Ln.lFrame.contextLView=null,s}function ln(){let s=jr();for(;null!==s&&64===s.type;)s=s.parent;return s}function jr(){return Ln.lFrame.currentTNode}function Li(){const s=Ln.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function Ri(s,o){const c=Ln.lFrame;c.currentTNode=s,c.isParent=o}function so(){return Ln.lFrame.isParent}function oo(){Ln.lFrame.isParent=!1}function _i(){const s=Ln.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ss(){return Ln.lFrame.bindingIndex}function ca(){return Ln.lFrame.bindingIndex++}function Cs(s){const o=Ln.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function Ma(s){Ln.lFrame.inI18n=s}function Bu(s,o){const c=Ln.lFrame;c.bindingIndex=c.bindingRootIndex=s,Wo(o)}function Wo(s){Ln.lFrame.currentDirectiveIndex=s}function Ol(){return Ln.lFrame.currentQueryIndex}function xa(s){Ln.lFrame.currentQueryIndex=s}function dl(s){const o=s[rn];return 2===o.type?o.declTNode:1===o.type?s[Mr]:null}function Pa(s,o,c){if(c&Pt.SkipSelf){let g=o,y=s;for(;!(g=g.parent,null!==g||c&Pt.Host||(g=dl(y),null===g||(y=y[vs],10&g.type))););if(null===g)return!1;o=g,s=y}const h=Ln.lFrame=fl();return h.currentTNode=o,h.lView=s,!0}function hl(s){const o=fl(),c=s[rn];Ln.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function fl(){const s=Ln.lFrame,o=null===s?null:s.child;return null===o?fu(s):o}function fu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function da(){const s=Ln.lFrame;return Ln.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bc=da;function pu(){const s=da();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ui(){return Ln.lFrame.selectedIndex}function yi(s){Ln.lFrame.selectedIndex=s}function ui(){const s=Ln.lFrame;return Ho(s.tView,s.selectedIndex)}function ql(){Ln.lFrame.currentNamespace=oa}function gl(s,o){for(let c=o.directiveStart,h=o.directiveEnd;c<h;c++){const y=s.data[c].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:M,ngAfterViewInit:L,ngAfterViewChecked:W,ngOnDestroy:re}=y;C&&(s.contentHooks||(s.contentHooks=[])).push(-c,C),M&&((s.contentHooks||(s.contentHooks=[])).push(c,M),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,M)),L&&(s.viewHooks||(s.viewHooks=[])).push(-c,L),W&&((s.viewHooks||(s.viewHooks=[])).push(c,W),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,W)),null!=re&&(s.destroyHooks||(s.destroyHooks=[])).push(c,re)}}function ha(s,o,c){B(s,o,3,c)}function P(s,o,c,h){(3&s[Gn])===c&&B(s,o,c,h)}function K(s,o){let c=s[Gn];(3&c)===o&&(c&=2047,c+=1,s[Gn]=c)}function B(s,o,c,h){const y=h??-1,C=o.length-1;let M=0;for(let L=void 0!==h?65535&s[Ur]:0;L<C;L++)if("number"==typeof o[L+1]){if(M=o[L],null!=h&&M>=h)break}else o[L]<0&&(s[Ur]+=65536),(M<y||-1==y)&&(ne(s,c,o,L),s[Ur]=(4294901760&s[Ur])+L+2),L++}function ne(s,o,c,h){const g=c[h]<0,y=c[h+1],M=s[g?-c[h]:c[h]];if(g){if(s[Gn]>>11<s[Ur]>>16&&(3&s[Gn])===o){s[Gn]+=2048,Or(4,M,y);try{y.call(M)}finally{Or(5,M,y)}}}else{Or(4,M,y);try{y.call(M)}finally{Or(5,M,y)}}}const ye=-1;class Ye{constructor(o,c,h){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function tn(s,o,c){let h=0;for(;h<c.length;){const g=c[h];if("number"==typeof g){if(0!==g)break;h++;const y=c[h++],C=c[h++],M=c[h++];s.setAttribute(o,C,M,y)}else{const y=g,C=c[++h];qt(y)?s.setProperty(o,y,C):s.setAttribute(o,y,C),h++}}return h}function Ko(s){return 3===s||4===s||6===s}function qt(s){return 64===s.charCodeAt(0)}function at(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let h=0;h<o.length;h++){const g=o[h];"number"==typeof g?c=g:0===c||Rt(s,c,g,null,-1===c||2===c?o[++h]:null)}}return s}function Rt(s,o,c,h,g){let y=0,C=s.length;if(-1===o)C=-1;else for(;y<s.length;){const M=s[y++];if("number"==typeof M){if(M===o){C=-1;break}if(M>o){C=y-1;break}}}for(;y<s.length;){const M=s[y];if("number"==typeof M)break;if(M===c){if(null===h)return void(null!==g&&(s[y+1]=g));if(h===s[y+1])return void(s[y+2]=g)}y++,null!==h&&y++,null!==g&&y++}-1!==C&&(s.splice(C,0,o),y=C+1),s.splice(y++,0,c),null!==h&&s.splice(y++,0,h),null!==g&&s.splice(y++,0,g)}function ci(s){return s!==ye}function Ro(s){return 32767&s}function _l(s,o){let c=function ml(s){return s>>16}(s),h=o;for(;c>0;)h=h[vs],c--;return h}let Ml=!0;function ka(s){const o=Ml;return Ml=s,o}const Fa=255,os=5;let Zl=0;const eo={};function mn(s,o){const c=pa(s,o);if(-1!==c)return c;const h=o[rn];h.firstCreatePass&&(s.injectorIndex=o.length,Hr(h.data,s),Hr(o,null),Hr(h.blueprint,null));const g=dr(s,o),y=s.injectorIndex;if(ci(g)){const C=Ro(g),M=_l(g,o),L=M[rn].data;for(let W=0;W<8;W++)o[y+W]=M[C+W]|L[C+W]}return o[y+8]=g,y}function Hr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function pa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function dr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,h=null,g=o;for(;null!==g;){if(h=Hu(g),null===h)return ye;if(c++,g=g[vs],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return ye}function wn(s,o,c){!function fa(s,o,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(zt)&&(h=c[zt]),null==h&&(h=c[zt]=Zl++);const g=h&Fa;o.data[s+(g>>os)]|=1<<g}(s,o,c)}function mr(s,o,c){if(c&Pt.Optional||void 0!==s)return s;Ft()}function wc(s,o,c,h){if(c&Pt.Optional&&void 0===h&&(h=null),!(c&(Pt.Self|Pt.Host))){const g=s[gi],y=kr(void 0);try{return g?g.get(o,h,c&Pt.Optional):Wr(o,h,c&Pt.Optional)}finally{kr(y)}}return mr(h,0,c)}function hr(s,o,c,h=Pt.Default,g){if(null!==s){if(1024&o[Gn]){const C=function ma(s,o,c,h,g){let y=s,C=o;for(;null!==y&&null!==C&&1024&C[Gn]&&!(256&C[Gn]);){const M=on(y,C,c,h|Pt.Self,eo);if(M!==eo)return M;let L=y.parent;if(!L){const W=C[Ge];if(W){const re=W.get(c,eo,h);if(re!==eo)return re}L=Hu(C),C=C[vs]}y=L}return g}(s,o,c,h,eo);if(C!==eo)return C}const y=on(s,o,c,h,eo);if(y!==eo)return y}return wc(o,c,h,g)}function on(s,o,c,h,g){const y=function ju(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(zt)?s[zt]:void 0;return"number"==typeof o?o>=0?o&Fa:cd:o}(c);if("function"==typeof y){if(!Pa(o,s,h))return h&Pt.Host?mr(g,0,h):wc(o,c,h,g);try{const C=y(h);if(null!=C||h&Pt.Optional)return C;Ft()}finally{bc()}}else if("number"==typeof y){let C=null,M=pa(s,o),L=ye,W=h&Pt.Host?o[Ni][Mr]:null;for((-1===M||h&Pt.SkipSelf)&&(L=-1===M?dr(s,o):o[M+8],L!==ye&&Ya(h,!1)?(C=o[rn],M=Ro(L),o=_l(L,o)):M=-1);-1!==M;){const re=o[rn];if(oi(y,M,re.data)){const _e=Rl(M,o,c,C,h,W);if(_e!==eo)return _e}L=o[M+8],L!==ye&&Ya(h,o[rn].data[M+8]===W)&&oi(y,M,o)?(C=re,M=Ro(L),o=_l(L,o)):M=-1}}return g}function Rl(s,o,c,h,g,y){const C=o[rn],M=C.data[s+8],re=ga(M,C,c,null==h?qs(M)&&Ml:h!=C&&0!=(3&M.type),g&Pt.Host&&y===M);return null!==re?Ts(o,C,re,M):eo}function ga(s,o,c,h,g){const y=s.providerIndexes,C=o.data,M=1048575&y,L=s.directiveStart,re=y>>20,Be=g?M+re:s.directiveEnd;for(let it=h?M:M+re;it<Be;it++){const Mt=C[it];if(it<L&&c===Mt||it>=L&&Mt.type===c)return it}if(g){const it=C[L];if(it&&bs(it)&&it.type===c)return L}return null}function Ts(s,o,c,h){let g=s[c];const y=o.data;if(function Nt(s){return s instanceof Ye}(g)){const C=g;C.resolving&&function mt(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new tt(-200,`Circular dependency in DI detected for ${s}${c}`)}(function yt(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():we(s)}(y[c]));const M=ka(C.canSeeViewProviders);C.resolving=!0;const L=C.injectImpl?kr(C.injectImpl):null;Pa(s,h,Pt.Default);try{g=s[c]=C.factory(void 0,y,s,h),o.firstCreatePass&&c>=h.directiveStart&&function Yl(s,o,c){const{ngOnChanges:h,ngOnInit:g,ngDoCheck:y}=o.type.prototype;if(h){const C=sa(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,C),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,C)}g&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,g),y&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,y))}(c,y[c],o)}finally{null!==L&&kr(L),ka(M),C.resolving=!1,bc()}}return g}function oi(s,o,c){return!!(c[o+(s>>os)]&1<<s)}function Ya(s,o){return!(s&Pt.Self||s&Pt.Host&&o)}class $r{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,h){return hr(this._tNode,this._lView,o,me(h),c)}}function cd(){return new $r(ln(),R())}function xl(s){return te(()=>{const o=s.prototype.constructor,c=o[Ct]||Hi(o),h=Object.prototype;let g=Object.getPrototypeOf(s.prototype).constructor;for(;g&&g!==h;){const y=g[Ct]||Hi(g);if(y&&y!==c)return y;g=Object.getPrototypeOf(g)}return y=>new y})}function Hi(s){return et(s)?()=>{const o=Hi(ke(s));return o&&o()}:Ki(s)}function Hu(s){const o=s[rn],c=o.type;return 2===c?o.declTNode:1===c?s[Mr]:null}function Jl(s){return function qa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const h=c.length;let g=0;for(;g<h;){const y=c[g];if(Ko(y))break;if(0===y)g+=2;else if("number"==typeof y)for(g++;g<h&&"string"==typeof c[g];)g++;else{if(y===o)return c[g+1];g+=2}}}return null}(ln(),s)}const _a="__parameters__";function La(s,o,c){return te(()=>{const h=function xo(s){return function(...c){if(s){const h=s(...c);for(const g in h)this[g]=h[g]}}}(o);function g(...y){if(this instanceof g)return h.apply(this,y),this;const C=new g(...y);return M.annotation=C,M;function M(L,W,re){const _e=L.hasOwnProperty(_a)?L[_a]:Object.defineProperty(L,_a,{value:[]})[_a];for(;_e.length<=re;)_e.push(null);return(_e[re]=_e[re]||[]).push(C),L}}return c&&(g.prototype=Object.create(c.prototype)),g.prototype.ngMetadataName=s,g.annotationCls=g,g})}class ai{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Tt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function lo(s,o){s.forEach(c=>Array.isArray(c)?lo(c,o):o(c))}function Wu(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function T(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function S(s,o){const c=[];for(let h=0;h<s;h++)c.push(o);return c}function se(s,o,c){let h=St(s,o);return h>=0?s[1|h]=c:(h=~h,function $(s,o,c,h){let g=s.length;if(g==o)s.push(c,h);else if(1===g)s.push(h,s[0]),s[0]=c;else{for(g--,s.push(s[g-1],s[g]);g>o;)s[g]=s[g-2],g--;s[o]=c,s[o+1]=h}}(s,h,o,c)),h}function Ue(s,o){const c=St(s,o);if(c>=0)return s[1|c]}function St(s,o){return function an(s,o,c){let h=0,g=s.length>>c;for(;g!==h;){const y=h+(g-h>>1),C=s[y<<c];if(o===C)return y<<c;C>o?g=y:h=y+1}return~(g<<c)}(s,o,1)}const U=pt(La("Optional"),8),ee=pt(La("SkipSelf"),4);var Jr=(()=>((Jr=Jr||{})[Jr.Important=1]="Important",Jr[Jr.DashCase=2]="DashCase",Jr))();const py=/^>|^->|<!--|-->|--!>|<!-$/g,Gp=/(<|>)/,mu="\u200b$1\u200b";const qu=new Map;let bf=0;const yh="__ngContext__";function Os(s,o){si(o)?(s[yh]=o[Fs],function Dm(s){qu.set(s[Fs],s)}(o)):s[yh]=o}let Ut;function bn(s,o){return Ut(s,o)}function fr(s){const o=s[Sr];return Rr(o)?o[Sr]:o}function Po(s){return Eh(s[ys])}function el(s){return Eh(s[pi])}function Eh(s){for(;null!==s&&!Rr(s);)s=s[pi];return s}function Ea(s,o,c,h,g){if(null!=h){let y,C=!1;Rr(h)?y=h:si(h)&&(C=!0,h=h[ki]);const M=Br(h);0===s&&null!==c?null==g?vy(o,c,M):yd(o,c,M,g||null,!0):1===s&&null!==c?yd(o,c,M,g||null,!0):2===s?Cf(o,M,C):3===s&&o.destroyNode(M),null!=y&&function b0(s,o,c,h,g){const y=c[yn];y!==Br(c)&&Ea(o,s,h,y,g);for(let M=$n;M<c.length;M++){const L=c[M];zp(L[rn],L,s,o,h,y)}}(o,s,y,c,g)}}function md(s,o){return s.createText(o)}function Ua(s,o,c){s.setValue(o,c)}function Fl(s,o){return s.createComment(function pd(s){return s.replace(py,o=>o.replace(Gp,mu))}(o))}function nu(s,o,c){return s.createElement(o,c)}function gy(s,o){const c=s[Ar],h=c.indexOf(o),g=o[Sr];512&o[Gn]&&(o[Gn]&=-513,Sl(g,-1)),c.splice(h,1)}function my(s,o){if(s.length<=$n)return;const c=$n+o,h=s[c];if(h){const g=h[Ws];null!==g&&g!==s&&gy(g,h),o>0&&(s[c-1][pi]=h[pi]);const y=T(s,$n+o);!function ru(s,o){zp(s,o,o[Fn],2,null,null),o[ki]=null,o[Mr]=null}(h[rn],h);const C=y[Fi];null!==C&&C.detachView(y[rn]),h[Sr]=null,h[pi]=null,h[Gn]&=-65}return h}function Df(s,o){if(!(128&o[Gn])){const c=o[Fn];c.destroyNode&&zp(s,o,c,3,null,null),function wi(s){let o=s[ys];if(!o)return _y(s[rn],s);for(;o;){let c=null;if(si(o))c=o[ys];else{const h=o[$n];h&&(c=h)}if(!c){for(;o&&!o[pi]&&o!==s;)si(o)&&_y(o[rn],o),o=o[Sr];null===o&&(o=s),si(o)&&_y(o[rn],o),c=o&&o[pi]}o=c}}(o)}}function _y(s,o){if(!(128&o[Gn])){o[Gn]&=-65,o[Gn]|=128,function If(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let h=0;h<c.length;h+=2){const g=o[c[h]];if(!(g instanceof Ye)){const y=c[h+1];if(Array.isArray(y))for(let C=0;C<y.length;C+=2){const M=g[y[C]],L=y[C+1];Or(4,M,L);try{L.call(M)}finally{Or(5,M,L)}}else{Or(4,g,y);try{y.call(g)}finally{Or(5,g,y)}}}}}(s,o),function y0(s,o){const c=s.cleanup,h=o[Zr];let g=-1;if(null!==c)for(let y=0;y<c.length-1;y+=2)if("string"==typeof c[y]){const C=c[y+3];C>=0?h[g=C]():h[g=-C].unsubscribe(),y+=2}else{const C=h[g=c[y+1]];c[y].call(C)}if(null!==h){for(let y=g+1;y<h.length;y++)(0,h[y])();o[Zr]=null}}(s,o),1===o[rn].type&&o[Fn].destroy();const c=o[Ws];if(null!==c&&Rr(o[Sr])){c!==o[Sr]&&gy(c,o);const h=o[Fi];null!==h&&h.detachView(s)}!function Im(s){qu.delete(s[Fs])}(o)}}function Zu(s,o,c){return yy(s,o.parent,c)}function yy(s,o,c){let h=o;for(;null!==h&&40&h.type;)h=(o=h).parent;if(null===h)return c[ki];{const{componentOffset:g}=h;if(g>-1){const{encapsulation:y}=s.data[h.directiveStart+g];if(y===X.None||y===X.Emulated)return null}return li(h,c)}}function yd(s,o,c,h,g){s.insertBefore(o,c,h,g)}function vy(s,o,c){s.appendChild(o,c)}function Dh(s,o,c,h,g){null!==h?yd(s,o,c,h,g):vy(s,o,c)}function Gs(s,o){return s.parentNode(o)}function Hp(s,o,c){return _u(s,o,c)}function Cm(s,o,c){return 40&s.type?li(s,c):null}let $p,Af,Of,Ju,_u=Cm;function wa(s,o){_u=s,$p=o}function Cc(s,o,c,h){const g=Zu(s,h,o),y=o[Fn],M=Hp(h.parent||o[Mr],h,o);if(null!=g)if(Array.isArray(c))for(let L=0;L<c.length;L++)Dh(y,g,c[L],M,!1);else Dh(y,g,c,M,!1);void 0!==$p&&$p(y,h,o,c,g)}function Tc(s,o){if(null!==o){const c=o.type;if(3&c)return li(o,s);if(4&c)return iu(-1,s[o.index]);if(8&c){const h=o.child;if(null!==h)return Tc(s,h);{const g=s[o.index];return Rr(g)?iu(-1,g):Br(g)}}if(32&c)return bn(o,s)()||Br(s[o.index]);{const h=Ih(s,o);return null!==h?Array.isArray(h)?h[0]:Tc(fr(s[Ni]),h):Tc(s,o.next)}}return null}function Ih(s,o){return null!==o?s[Ni][Mr].projection[o.projection]:null}function iu(s,o){const c=$n+s+1;if(c<o.length){const h=o[c],g=h[rn].firstChild;if(null!==g)return Tc(h,g)}return o[yn]}function Cf(s,o,c){const h=Gs(s,o);h&&function by(s,o,c,h){s.removeChild(o,c,h)}(s,h,o,c)}function bl(s,o,c,h,g,y,C){for(;null!=c;){const M=h[c.index],L=c.type;if(C&&0===o&&(M&&Os(Br(M),h),c.flags|=2),32!=(32&c.flags))if(8&L)bl(s,o,c.child,h,g,y,!1),Ea(o,s,g,M,y);else if(32&L){const W=bn(c,h);let re;for(;re=W();)Ea(o,s,g,re,y);Ea(o,s,g,M,y)}else 16&L?yr(s,o,h,c,g,y):Ea(o,s,g,M,y);c=C?c.projectionNext:c.next}}function zp(s,o,c,h,g,y){bl(c,h,s.firstChild,o,g,y,!1)}function yr(s,o,c,h,g,y){const C=c[Ni],L=C[Mr].projection[h.projection];if(Array.isArray(L))for(let W=0;W<L.length;W++)Ea(o,s,g,L[W],y);else bl(s,o,L,C[Sr],g,y,!0)}function Ch(s,o,c){""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c)}function Sf(s,o,c){const{mergedAttrs:h,classes:g,styles:y}=c;null!==h&&tn(s,o,h),null!==g&&Ch(s,o,g),null!==y&&function Tf(s,o,c){s.setAttribute(o,"style",c)}(s,o,y)}function Ac(s){return function Wp(){if(void 0===Af&&(Af=null,In.trustedTypes))try{Af=In.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Af}()?.createHTML(s)||s}function Sm(s){Of=s}function Om(s){return function Kp(){if(void 0===Ju&&(Ju=null,In.trustedTypes))try{Ju=In.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ju}()?.createScriptURL(s)||s}class Yp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xt})`}}function yu(s){return s instanceof Yp?s.changingThisBreaksApplicationSecurity:s}function vd(s,o){const c=function Mm(s){return s instanceof Yp&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${xt})`)}return c===o}class xm{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(Ac(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch{return null}}}class Pm{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const c=this.inertDocument.createElement("template");return c.innerHTML=Ac(o),c}}const C0=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Dy(s){return(s=String(s)).match(C0)?s:"unsafe:"+s}function Oc(s){const o={};for(const c of s.split(","))o[c]=!0;return o}function Jp(...s){const o={};for(const c of s)for(const h in c)c.hasOwnProperty(h)&&(o[h]=!0);return o}const Nc=Oc("area,br,col,hr,img,wbr"),Mc=Oc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),km=Oc("rp,rt"),Fm=Jp(Nc,Jp(Mc,Oc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jp(km,Oc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jp(km,Mc)),Rf=Oc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xf=Jp(Rf,Oc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var fo=(()=>((fo=fo||{})[fo.NONE=0]="NONE",fo[fo.HTML=1]="HTML",fo[fo.STYLE=2]="STYLE",fo[fo.SCRIPT=3]="SCRIPT",fo[fo.URL=4]="URL",fo[fo.RESOURCE_URL=5]="RESOURCE_URL",fo))();function Um(s){const o=Sh();return o?o.sanitize(fo.URL,s)||"":vd(s,"URL")?yu(s):Dy(we(s))}function Bm(s){const o=Sh();if(o)return Om(o.sanitize(fo.RESOURCE_URL,s)||"");if(vd(s,"ResourceURL"))return Om(yu(s));throw new tt(904,!1)}function eg(s,o,c){return function cE(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Bm:Um}(o,c)(s)}function Sh(){const s=R();return s&&s[Ti]}const To=new ai("ENVIRONMENT_INITIALIZER"),tg=new ai("INJECTOR",-1),Vm=new ai("INJECTOR_DEF_TYPES");class Gm{get(o,c=nr){if(c===nr){const h=new Error(`NullInjectorError: No provider for ${Le(o)}!`);throw h.name="NullInjectorError",h}return c}}function bd(s){return{\u0275providers:s}}function k0(...s){return{\u0275providers:jm(0,s),\u0275fromNgModule:!0}}function jm(s,...o){const c=[],h=new Set;let g;return lo(o,y=>{const C=y;Pf(C,c,[],h)&&(g||(g=[]),g.push(C))}),void 0!==g&&Sy(g,c),c}function Sy(s,o){for(let c=0;c<s.length;c++){const{providers:g}=s[c];Rc(g,y=>{o.push(y)})}}function Pf(s,o,c,h){if(!(s=ke(s)))return!1;let g=null,y=kn(s);const C=!y&&Zn(s);if(y||C){if(C&&!C.standalone)return!1;g=s}else{const L=s.ngModule;if(y=kn(L),!y)return!1;g=L}const M=h.has(g);if(C){if(M)return!1;if(h.add(g),C.dependencies){const L="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const W of L)Pf(W,o,c,h)}}else{if(!y)return!1;{if(null!=y.imports&&!M){let W;h.add(g);try{lo(y.imports,re=>{Pf(re,o,c,h)&&(W||(W=[]),W.push(re))})}finally{}void 0!==W&&Sy(W,o)}if(!M){const W=Ki(g)||(()=>new g);o.push({provide:g,useFactory:W,deps:de},{provide:Vm,useValue:g,multi:!0},{provide:To,useValue:()=>Lt(g),multi:!0})}const L=y.providers;null==L||M||Rc(L,re=>{o.push(re)})}}return g!==s&&void 0!==s.providers}function Rc(s,o){for(let c of s)Ke(c)&&(c=c.\u0275providers),Array.isArray(c)?Rc(c,o):o(c)}const Ah=xe({provide:String,useValue:xe});function Oh(s){return null!==s&&"object"==typeof s&&Ah in s}function bu(s){return"function"==typeof s}const ng=new ai("Set Injector scope."),Ll={},Eu={};let Ed;function wd(){return void 0===Ed&&(Ed=new Gm),Ed}class gs{}class Qu extends gs{get destroyed(){return this._destroyed}constructor(o,c,h,g){super(),this.parent=c,this.source=h,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rg(o,C=>this.processProvider(C)),this.records.set(tg,Id(void 0,this)),g.has("environment")&&this.records.set(gs,Id(void 0,this));const y=this.records.get(ng);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Vm.multi,de,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const c=Ir(this),h=kr(void 0);try{return o()}finally{Ir(c),kr(h)}}get(o,c=nr,h=Pt.Default){this.assertNotDestroyed(),h=me(h);const g=Ir(this),y=kr(void 0);try{if(!(h&Pt.SkipSelf)){let M=this.records.get(o);if(void 0===M){const L=function Pc(s){return"function"==typeof s||"object"==typeof s&&s instanceof ai}(o)&&Hn(o);M=L&&this.injectableDefInScope(L)?Id(Dd(o),Ll):null,this.records.set(o,M)}if(null!=M)return this.hydrate(o,M)}return(h&Pt.Self?wd():this.parent).get(o,c=h&Pt.Optional&&c===nr?null:c)}catch(C){if("NullInjectorError"===C.name){if((C[rr]=C[rr]||[]).unshift(Le(o)),g)throw C;return function he(s,o,c,h){const g=s[rr];throw o[cr]&&g.unshift(o[cr]),s.message=function fe(s,o,c,h=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==Cn?s.slice(2):s;let g=Le(o);if(Array.isArray(o))g=o.map(Le).join(" -> ");else if("object"==typeof o){let y=[];for(let C in o)if(o.hasOwnProperty(C)){let M=o[C];y.push(C+":"+("string"==typeof M?JSON.stringify(M):Le(M)))}g=`{${y.join(", ")}}`}return`${c}${h?"("+h+")":""}[${g}]: ${s.replace(qr,"\n  ")}`}("\n"+s.message,g,c,h),s[ni]=g,s[rr]=null,s}(C,o,"R3InjectorError",this.source)}throw C}finally{kr(y),Ir(g)}}resolveInjectorInitializers(){const o=Ir(this),c=kr(void 0);try{const h=this.get(To.multi,de,Pt.Self);for(const g of h)g()}finally{Ir(o),kr(c)}}toString(){const o=[],c=this.records;for(const h of c.keys())o.push(Le(h));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tt(205,!1)}processProvider(o){let c=bu(o=ke(o))?o:ke(o&&o.provide);const h=function pe(s){return Oh(s)?Id(void 0,s.useValue):Id(xc(s),Ll)}(o);if(bu(o)||!0!==o.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=Id(void 0,Ll,!0),g.factory=()=>De(g.multi),this.records.set(c,g)),c=o,g.multi.push(o)}this.records.set(c,h)}hydrate(o,c){return c.value===Ll&&(c.value=Eu,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Cd(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ke(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Dd(s){const o=Hn(s),c=null!==o?o.factory:Ki(s);if(null!==c)return c;if(s instanceof ai)throw new tt(204,!1);if(s instanceof Function)return function Xu(s){const o=s.length;if(o>0)throw S(o,"?"),new tt(204,!1);const c=function zn(s){const o=s&&(s[Yn]||s[un]);return o?(function Bn(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new tt(204,!1)}function xc(s,o,c){let h;if(bu(s)){const g=ke(s);return Ki(g)||Dd(g)}if(Oh(s))h=()=>ke(s.useValue);else if(function Hm(s){return!(!s||!s.useFactory)}(s))h=()=>s.useFactory(...De(s.deps||[]));else if(function Ay(s){return!(!s||!s.useExisting)}(s))h=()=>Lt(ke(s.useExisting));else{const g=ke(s&&(s.useClass||s.provide));if(!function Nh(s){return!!s.deps}(s))return Ki(g)||Dd(g);h=()=>new g(...De(s.deps))}return h}function Id(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function rg(s,o){for(const c of s)Array.isArray(c)?rg(c,o):c&&Ke(c)?rg(c.\u0275providers,o):o(c)}class Ms{}class $i{}class My{resolveComponentFactory(o){throw function $m(s){const o=Error(`No component factory found for ${Le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Td=(()=>{class s{}return s.NULL=new My,s})();function zm(){return Sd(ln(),R())}function Sd(s,o){return new ec(li(s,o))}let ec=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=zm,s})();function Ry(s){return s instanceof ec?s.nativeElement:s}class ig{}let sg=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function F0(){const s=R(),c=mi(ln().index,s);return(si(c)?c:s)[Fn]}(),s})(),Wm=(()=>{class s{}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:()=>null}),s})();class Rh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ff=new Rh("15.2.4"),Ad={},tc="ngOriginalError";function Qo(s){return s[tc]}class wu{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Qo(o);for(;c&&Qo(c);)c=Qo(c);return c||null}}function Xo(s){return s instanceof Function?s():s}function Jm(s,o,c){let h=s.length;for(;;){const g=s.indexOf(o,c);if(-1===g)return g;if(0===g||s.charCodeAt(g-1)<=32){const y=o.length;if(g+y===h||s.charCodeAt(g+y)<=32)return g}c=g+1}}const Lf="ng-template";function Uf(s,o,c){let h=0,g=!0;for(;h<s.length;){let y=s[h++];if("string"==typeof y&&g){const C=s[h++];if(c&&"class"===y&&-1!==Jm(C.toLowerCase(),o,0))return!0}else{if(1===y){for(;h<s.length&&"string"==typeof(y=s[h++]);)if(y.toLowerCase()===o)return!0;return!1}"number"==typeof y&&(g=!1)}}return!1}function ky(s){return 4===s.type&&s.value!==Lf}function Fy(s,o,c){return o===(4!==s.type||c?s.value:Lf)}function L0(s,o,c){let h=4;const g=s.attrs||[],y=function Uy(s){for(let o=0;o<s.length;o++)if(Ko(s[o]))return o;return s.length}(g);let C=!1;for(let M=0;M<o.length;M++){const L=o[M];if("number"!=typeof L){if(!C)if(4&h){if(h=2|1&h,""!==L&&!Fy(s,L,c)||""===L&&1===o.length){if(Ul(h))return!1;C=!0}}else{const W=8&h?L:o[++M];if(8&h&&null!==s.attrs){if(!Uf(s.attrs,W,c)){if(Ul(h))return!1;C=!0}continue}const _e=Md(8&h?"class":L,g,ky(s),c);if(-1===_e){if(Ul(h))return!1;C=!0;continue}if(""!==W){let Be;Be=_e>y?"":g[_e+1].toLowerCase();const it=8&h?Be:null;if(it&&-1!==Jm(it,W,0)||2&h&&W!==Be){if(Ul(h))return!1;C=!0}}}}else{if(!C&&!Ul(h)&&!Ul(L))return!1;if(C&&Ul(L))continue;C=!1,h=L|1&h}}return Ul(h)||C}function Ul(s){return 0==(1&s)}function Md(s,o,c,h){if(null===o)return-1;let g=0;if(h||!c){let y=!1;for(;g<o.length;){const C=o[g];if(C===s)return g;if(3===C||6===C)y=!0;else{if(1===C||2===C){let M=o[++g];for(;"string"==typeof M;)M=o[++g];continue}if(4===C)break;if(0===C){g+=4;continue}}g+=y?1:2}return-1}return function U0(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const h=s[c];if("number"==typeof h)return-1;if(h===o)return c;c++}return-1}(o,s)}function kh(s,o,c=!1){for(let h=0;h<o.length;h++)if(L0(s,o[h],c))return!0;return!1}function nl(s,o){e:for(let c=0;c<o.length;c++){const h=o[c];if(s.length===h.length){for(let g=0;g<s.length;g++)if(s[g]!==h[g])continue e;return!0}}return!1}function og(s,o){return s?":not("+o.trim()+")":o}function Qm(s){let o=s[0],c=1,h=2,g="",y=!1;for(;c<s.length;){let C=s[c];if("string"==typeof C)if(2&h){const M=s[++c];g+="["+C+(M.length>0?'="'+M+'"':"")+"]"}else 8&h?g+="."+C:4&h&&(g+=" "+C);else""!==g&&!Ul(C)&&(o+=og(y,g),g=""),h=C,y=y||!Ul(h);c++}return""!==g&&(o+=og(y,g)),o}const pr={};function Xm(s){By(F(),R(),Ui()+s,!1)}function By(s,o,c,h){if(!h)if(3==(3&o[Gn])){const y=s.preOrderCheckHooks;null!==y&&ha(o,y,c)}else{const y=s.preOrderHooks;null!==y&&P(o,y,0,c)}yi(c)}function Uc(s,o=null,c=null,h){const g=ug(s,o,c,h);return g.resolveInjectorInitializers(),g}function ug(s,o=null,c=null,h,g=new Set){const y=[c||de,k0(s)];return h=h||("object"==typeof s?void 0:Le(s)),new Qu(y,o||wd(),h||null,g)}let El=(()=>{class s{static create(c,h){if(Array.isArray(c))return Uc({name:""},h,c,"");{const g=c.name??"";return Uc({name:g},c.parent,c.providers,g)}}}return s.THROW_IF_NOT_FOUND=nr,s.NULL=new Gm,s.\u0275prov=Tt({token:s,providedIn:"any",factory:()=>Lt(tg)}),s.__NG_ELEMENT_ID__=-1,s})();function Uh(s,o=Pt.Default){const c=R();return null===c?Lt(s,o):hr(ln(),c,ke(s),o)}function ea(){throw new Error("invalid")}function gg(s,o){const c=s.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const y=c[h+1];if(-1!==y){const C=s.data[y];xa(c[h]),C.contentQueries(2,o[y],y)}}}function Ao(s,o,c,h,g,y,C,M,L,W,re){const _e=o.blueprint.slice();return _e[ki]=g,_e[Gn]=76|h,(null!==re||s&&1024&s[Gn])&&(_e[Gn]|=1024),aa(_e),_e[Sr]=_e[vs]=s,_e[ii]=c,_e[Bo]=C||s&&s[Bo],_e[Fn]=M||s&&s[Fn],_e[Ti]=L||s&&s[Ti]||null,_e[gi]=W||s&&s[gi]||null,_e[Mr]=y,_e[Fs]=function jp(){return bf++}(),_e[Ge]=re,_e[Ni]=2==o.type?s[Ni]:_e,_e}function Gh(s,o,c,h,g){let y=s.data[o];if(null===y)y=il(s,o,c,h,g),function zo(){return Ln.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=c,y.value=h,y.attrs=g;const C=Li();y.injectorIndex=null===C?-1:C.injectorIndex}return Ri(y,!0),y}function il(s,o,c,h,g){const y=jr(),C=so(),L=s.data[o]=function _g(s,o,c,h,g,y){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?y:y&&y.parent,c,o,h,g);return null===s.firstChild&&(s.firstChild=L),null!==y&&(C?null==y.child&&null!==L.parent&&(y.child=L):null===y.next&&(y.next=L,L.prev=y)),L}function Vc(s,o,c,h){if(0===c)return-1;const g=o.length;for(let y=0;y<c;y++)o.push(h),s.blueprint.push(h),s.data.push(null);return g}function xd(s,o,c){hl(o);try{const h=s.viewQuery;null!==h&&ac(1,h,c);const g=s.template;null!==g&&a_(s,o,g,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&gg(s,o),s.staticViewQueries&&ac(2,s.viewQuery,c);const y=s.components;null!==y&&function Ky(s,o){for(let c=0;c<o.length;c++)hE(s,o[c])}(o,y)}catch(h){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),h}finally{o[Gn]&=-5,pu()}}function jh(s,o,c,h){const g=o[Gn];if(128!=(128&g)){hl(o);try{aa(o),function ua(s){return Ln.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&a_(s,o,c,2,h);const C=3==(3&g);if(C){const W=s.preOrderCheckHooks;null!==W&&ha(o,W,null)}else{const W=s.preOrderHooks;null!==W&&P(o,W,0,null),K(o,0)}if(function d_(s){for(let o=Po(s);null!==o;o=el(o)){if(!o[Jt])continue;const c=o[Ar];for(let h=0;h<c.length;h++){const g=c[h];512&g[Gn]||Sl(g[Sr],1),g[Gn]|=512}}}(o),function Xy(s){for(let o=Po(s);null!==o;o=el(o))for(let c=$n;c<o.length;c++){const h=o[c],g=h[rn];Wa(h)&&jh(g,h,g.template,h[ii])}}(o),null!==s.contentQueries&&gg(s,o),C){const W=s.contentCheckHooks;null!==W&&ha(o,W)}else{const W=s.contentHooks;null!==W&&P(o,W,1),K(o,1)}!function Bh(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const g=c[h];if(g<0)yi(~g);else{const y=g,C=c[++h],M=c[++h];Bu(C,y),M(2,o[y])}}}finally{yi(-1)}}(s,o);const M=s.components;null!==M&&function Vh(s,o){for(let c=0;c<o.length;c++)dE(s,o[c])}(o,M);const L=s.viewQuery;if(null!==L&&ac(2,L,h),C){const W=s.viewCheckHooks;null!==W&&ha(o,W)}else{const W=s.viewHooks;null!==W&&P(o,W,2),K(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Gn]&=-41,512&o[Gn]&&(o[Gn]&=-513,Sl(o[Sr],-1))}finally{pu()}}}function a_(s,o,c,h,g){const y=Ui(),C=2&h;try{yi(-1),C&&o.length>Ce&&By(s,o,Ce,!1),Or(C?2:0,g),c(h,g)}finally{yi(y),Or(C?3:1,g)}}function mg(s,o,c){if(Ls(o)){const g=o.directiveEnd;for(let y=o.directiveStart;y<g;y++){const C=s.data[y];C.contentQueries&&C.contentQueries(1,c[y],y)}}}function ic(s,o,c){Mo()&&(function q0(s,o,c,h){const g=c.directiveStart,y=c.directiveEnd;qs(c)&&function Z0(s,o,c){const h=li(o,s),g=qy(c),y=s[Bo],C=zf(s,Ao(s,g,null,c.onPush?32:16,h,o,y,y.createRenderer(h,c),null,null,null));s[o.index]=C}(o,c,s.data[g+c.componentOffset]),s.firstCreatePass||mn(c,o),Os(h,o);const C=c.initialInputs;for(let M=g;M<y;M++){const L=s.data[M],W=Ts(o,s,M,c);Os(W,o),null!==C&&Qy(0,M-g,W,L,0,C),bs(L)&&(mi(c.index,o)[ii]=Ts(o,s,M,c))}}(s,o,c,li(c,o)),64==(64&c.flags)&&zh(s,o,c))}function l_(s,o,c=li){const h=o.localNames;if(null!==h){let g=o.index+1;for(let y=0;y<h.length;y+=2){const C=h[y+1],M=-1===C?c(o,s):s[C];s[g++]=M}}}function qy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Hh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Hh(s,o,c,h,g,y,C,M,L,W){const re=Ce+h,_e=re+g,Be=function z0(s,o){const c=[];for(let h=0;h<o;h++)c.push(h<s?null:pr);return c}(re,_e),it="function"==typeof W?W():W;return Be[rn]={type:s,blueprint:Be,template:c,queries:null,viewQuery:M,declTNode:o,data:Be.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:L,consts:it,incompleteFirstPass:!1}}function $h(s,o,c,h){const g=Kf(o);null===c?g.push(h):(g.push(c),s.firstCreatePass&&Gc(s).push(h,g.length-1))}function sc(s,o,c,h){for(let g in s)if(s.hasOwnProperty(g)){c=null===c?{}:c;const y=s[g];null===h?jf(c,o,g,y):h.hasOwnProperty(g)&&jf(c,o,h[g],y)}return c}function jf(s,o,c,h){s.hasOwnProperty(c)?s[c].push(o,h):s[c]=[o,h]}function Va(s,o,c,h,g,y,C,M){const L=li(o,c);let re,W=o.inputs;!M&&null!=W&&(re=W[h])?(jc(s,c,re,h,g),qs(o)&&u_(c,o.index)):3&o.type&&(h=function Hf(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(h),g=null!=C?C(g,o.value||"",h):g,y.setProperty(L,h,g))}function u_(s,o){const c=mi(o,s);16&c[Gn]||(c[Gn]|=32)}function ou(s,o,c,h){if(Mo()){const g=null===h?null:{"":-1},y=function wg(s,o){const c=s.directiveRegistry;let h=null,g=null;if(c)for(let y=0;y<c.length;y++){const C=c[y];if(kh(o,C.selectors,!1))if(h||(h=[]),bs(C))if(null!==C.findHostDirectiveDefs){const M=[];g=g||new Map,C.findHostDirectiveDefs(C,M,g),h.unshift(...M,C),Pd(s,o,M.length)}else h.unshift(C),Pd(s,o,0);else g=g||new Map,C.findHostDirectiveDefs?.(C,h,g),h.push(C)}return null===h?null:[h,g]}(s,c);let C,M;null===y?C=M=null:[C,M]=y,null!==C&&bg(s,o,c,C,g,M),g&&function Jy(s,o,c){if(o){const h=s.localNames=[];for(let g=0;g<o.length;g+=2){const y=c[o[g+1]];if(null==y)throw new tt(-301,!1);h.push(o[g],y)}}}(c,h,g)}c.mergedAttrs=at(c.mergedAttrs,c.attrs)}function bg(s,o,c,h,g,y){for(let W=0;W<h.length;W++)wn(mn(c,o),s,h[W].type);!function $f(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}(c,s.data.length,h.length);for(let W=0;W<h.length;W++){const re=h[W];re.providersResolver&&re.providersResolver(re)}let C=!1,M=!1,L=Vc(s,o,h.length,null);for(let W=0;W<h.length;W++){const re=h[W];c.mergedAttrs=at(c.mergedAttrs,re.hostAttrs),c_(s,c,o,L,re),Y0(L,re,g),null!==re.contentQueries&&(c.flags|=4),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(c.flags|=64);const _e=re.type.prototype;!C&&(_e.ngOnChanges||_e.ngOnInit||_e.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),C=!0),!M&&(_e.ngOnChanges||_e.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),M=!0),L++}!function yg(s,o,c){const g=o.directiveEnd,y=s.data,C=o.attrs,M=[];let L=null,W=null;for(let re=o.directiveStart;re<g;re++){const _e=y[re],Be=c?c.get(_e):null,Mt=Be?Be.outputs:null;L=sc(_e.inputs,re,L,Be?Be.inputs:null),W=sc(_e.outputs,re,W,Mt);const Xt=null===L||null===C||ky(o)?null:J0(L,re,C);M.push(Xt)}null!==L&&(L.hasOwnProperty("class")&&(o.flags|=8),L.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=M,o.inputs=L,o.outputs=W}(s,c,y)}function zh(s,o,c){const h=c.directiveStart,g=c.directiveEnd,y=c.index,C=function Ra(){return Ln.lFrame.currentDirectiveIndex}();try{yi(y);for(let M=h;M<g;M++){const L=s.data[M],W=o[M];Wo(M),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Zy(L,W)}}finally{yi(-1),Wo(C)}}function Zy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Pd(s,o,c){o.componentOffset=c,(s.components||(s.components=[])).push(o.index)}function Y0(s,o,c){if(c){if(o.exportAs)for(let h=0;h<o.exportAs.length;h++)c[o.exportAs[h]]=s;bs(o)&&(c[""]=s)}}function c_(s,o,c,h,g){s.data[h]=g;const y=g.factory||(g.factory=Ki(g.type)),C=new Ye(y,bs(g),Uh);s.blueprint[h]=C,c[h]=C,function K0(s,o,c,h,g){const y=g.hostBindings;if(y){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const M=~o.index;(function Eg(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(C)!=M&&C.push(M),C.push(c,h,y)}}(s,o,h,Vc(s,c,g.hostVars,pr),g)}function Dg(s,o,c,h,g,y,C){if(null==y)s.removeAttribute(o,g,c);else{const M=null==C?we(y):C(y,h||"",g);s.setAttribute(o,g,M,c)}}function Qy(s,o,c,h,g,y){const C=y[o];if(null!==C){const M=h.setInput;for(let L=0;L<C.length;){const W=C[L++],re=C[L++],_e=C[L++];null!==M?h.setInput(c,_e,W,re):c[re]=_e}}}function J0(s,o,c){let h=null,g=0;for(;g<c.length;){const y=c[g];if(0!==y)if(5!==y){if("number"==typeof y)break;if(s.hasOwnProperty(y)){null===h&&(h=[]);const C=s[y];for(let M=0;M<C.length;M+=2)if(C[M]===o){h.push(y,C[M+1],c[g+1]);break}}g+=2}else g+=2;else g+=4}return h}function Ig(s,o,c,h){return[s,!0,!1,o,null,0,h,c,null,null]}function dE(s,o){const c=mi(o,s);if(Wa(c)){const h=c[rn];48&c[Gn]?jh(h,c,h.template,c[ii]):c[ji]>0&&Wh(c)}}function Wh(s){for(let h=Po(s);null!==h;h=el(h))for(let g=$n;g<h.length;g++){const y=h[g];if(Wa(y))if(512&y[Gn]){const C=y[rn];jh(C,y,C.template,y[ii])}else y[ji]>0&&Wh(y)}const c=s[rn].components;if(null!==c)for(let h=0;h<c.length;h++){const g=mi(c[h],s);Wa(g)&&g[ji]>0&&Wh(g)}}function hE(s,o){const c=mi(o,s),h=c[rn];(function ev(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(h,c),xd(h,c,c[ii])}function zf(s,o){return s[ys]?s[zs][pi]=o:s[ys]=o,s[zs]=o,o}function Wf(s){for(;s;){s[Gn]|=32;const o=fr(s);if(Vo(s)&&!o)return s;s=o}return null}function oc(s,o,c,h=!0){const g=o[Bo];g.begin&&g.begin();try{jh(s,o,s.template,c)}catch(C){throw h&&f_(o,C),C}finally{g.end&&g.end()}}function ac(s,o,c){xa(0),o(s,c)}function Kf(s){return s[Zr]||(s[Zr]=[])}function Gc(s){return s.cleanup||(s.cleanup=[])}function f_(s,o){const c=s[gi],h=c?c.get(wu,null):null;h&&h.handleError(o)}function jc(s,o,c,h,g){for(let y=0;y<c.length;){const C=c[y++],M=c[y++],L=o[C],W=s.data[C];null!==W.setInput?W.setInput(L,g,h,M):L[M]=g}}function Cg(s,o,c){let h=c?s.styles:null,g=c?s.classes:null,y=0;if(null!==o)for(let C=0;C<o.length;C++){const M=o[C];"number"==typeof M?y=M:1==y?g=Ae(g,M):2==y&&(h=Ae(h,M+": "+o[++C]+";"))}c?s.styles=h:s.stylesWithoutHost=h,c?s.classes=g:s.classesWithoutHost=g}function Fd(s,o,c,h,g=!1){for(;null!==c;){const y=o[c.index];if(null!==y&&h.push(Br(y)),Rr(y))for(let M=$n;M<y.length;M++){const L=y[M],W=L[rn].firstChild;null!==W&&Fd(L[rn],L,W,h)}const C=c.type;if(8&C)Fd(s,o,c.child,h);else if(32&C){const M=bn(c,o);let L;for(;L=M();)h.push(L)}else if(16&C){const M=Ih(o,c);if(Array.isArray(M))h.push(...M);else{const L=fr(o[Ni]);Fd(L[rn],L,M,h,!0)}}c=g?c.projectionNext:c.next}return h}class Hc{get rootNodes(){const o=this._lView,c=o[rn];return Fd(c,o,c.firstChild,[])}constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ii]}set context(o){this._lView[ii]=o}get destroyed(){return 128==(128&this._lView[Gn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Sr];if(Rr(o)){const c=o[Vn],h=c?c.indexOf(this):-1;h>-1&&(my(o,h),T(c,h))}this._attachedToViewContainer=!1}Df(this._lView[rn],this._lView)}onDestroy(o){$h(this._lView[rn],this._lView,null,o)}markForCheck(){Wf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Gn]&=-65}reattach(){this._lView[Gn]|=64}detectChanges(){oc(this._lView[rn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _d(s,o){zp(s,o,o[Fn],2,null,null)}(this._lView[rn],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new tt(902,!1);this._appRef=o}}class p_ extends Hc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;oc(o[rn],o,o[ii],!1)}checkNoChanges(){}get context(){return null}}class qf extends Td{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Zn(o);return new Ld(c,this.ngModule)}}function Yf(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class g_{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,h){h=me(h);const g=this.injector.get(o,Ad,h);return g!==Ad||c===Ad?g:this.parentInjector.get(o,c,h)}}class Ld extends $i{get inputs(){return Yf(this.componentDef.inputs)}get outputs(){return Yf(this.componentDef.outputs)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function ag(s){return s.map(Qm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,h,g){let y=(g=g||this.ngModule)instanceof gs?g:g?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const C=y?new g_(o,y):o,M=C.get(ig,null);if(null===M)throw new tt(407,!1);const L=C.get(Wm,null),W=M.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",_e=h?function W0(s,o,c){return s.selectRootElement(o,c===X.ShadowDom)}(W,h,this.componentDef.encapsulation):nu(W,re,function Q0(s){const o=s.toLowerCase();return"svg"===o?oa:"math"===o?"math":null}(re)),Be=this.componentDef.onPush?288:272,it=Hh(0,null,null,1,0,null,null,null,null,null),Mt=Ao(null,it,null,Be,null,null,M,W,L,C,null);let Xt,_n;hl(Mt);try{const Tn=this.componentDef;let er,Wt=null;Tn.findHostDirectiveDefs?(er=[],Wt=new Map,Tn.findHostDirectiveDefs(Tn,er,Wt),er.push(Tn)):er=[Tn];const gr=function fE(s,o){const c=s[rn],h=Ce;return s[h]=o,Gh(c,h,2,"#host",null)}(Mt,_e),$s=function tv(s,o,c,h,g,y,C,M){const L=g[rn];!function nv(s,o,c,h){for(const g of s)o.mergedAttrs=at(o.mergedAttrs,g.hostAttrs);null!==o.mergedAttrs&&(Cg(o,o.mergedAttrs,!0),null!==c&&Sf(h,c,o))}(h,s,o,C);const W=y.createRenderer(o,c),re=Ao(g,qy(c),null,c.onPush?32:16,g[s.index],s,y,W,M||null,null,null);return L.firstCreatePass&&Pd(L,s,h.length-1),zf(g,re),g[s.index]=re}(gr,_e,Tn,er,Mt,M,W);_n=Ho(it,Ce),_e&&function iv(s,o,c,h){if(h)tn(s,c,["ng-version",Ff.full]);else{const{attrs:g,classes:y}=function ko(s){const o=[],c=[];let h=1,g=2;for(;h<s.length;){let y=s[h];if("string"==typeof y)2===g?""!==y&&o.push(y,s[++h]):8===g&&c.push(y);else{if(!Ul(g))break;g=y}h++}return{attrs:o,classes:c}}(o.selectors[0]);g&&tn(s,c,g),y&&y.length>0&&Ch(s,c,y.join(" "))}}(W,Tn,_e,h),void 0!==c&&function sv(s,o,c){const h=s.projection=[];for(let g=0;g<o.length;g++){const y=c[g];h.push(null!=y?Array.from(y):null)}}(_n,this.ngContentSelectors,c),Xt=function rv(s,o,c,h,g,y){const C=ln(),M=g[rn],L=li(C,g);bg(M,g,C,c,null,h);for(let re=0;re<c.length;re++)Os(Ts(g,M,C.directiveStart+re,C),g);zh(M,g,C),L&&Os(L,g);const W=Ts(g,M,C.directiveStart+C.componentOffset,C);if(s[ii]=g[ii]=W,null!==y)for(const re of y)re(W,o);return mg(M,C,s),W}($s,Tn,er,Wt,Mt,[tb]),xd(it,Mt,null)}finally{pu()}return new X0(this.componentType,Xt,Sd(_n,Mt),Mt,_n)}}class X0 extends Ms{constructor(o,c,h,g,y){super(),this.location=h,this._rootLView=g,this._tNode=y,this.instance=c,this.hostView=this.changeDetectorRef=new p_(g),this.componentType=o}setInput(o,c){const h=this._tNode.inputs;let g;if(null!==h&&(g=h[o])){const y=this._rootLView;jc(y[rn],y,g,o,c),u_(y,this._tNode.index)}}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function tb(){const s=ln();gl(R()[rn],s)}function Zf(s){let o=function nb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const h=[s];for(;o;){let g;if(bs(s))g=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new tt(903,!1);g=o.\u0275dir}if(g){if(c){h.push(g);const C=s;C.inputs=Kh(s.inputs),C.declaredInputs=Kh(s.declaredInputs),C.outputs=Kh(s.outputs);const M=g.hostBindings;M&&m_(s,M);const L=g.viewQuery,W=g.contentQueries;if(L&&Jf(s,L),W&&ov(s,W),He(s.inputs,g.inputs),He(s.declaredInputs,g.declaredInputs),He(s.outputs,g.outputs),bs(g)&&g.data.animation){const re=s.data;re.animation=(re.animation||[]).concat(g.data.animation)}}const y=g.features;if(y)for(let C=0;C<y.length;C++){const M=y[C];M&&M.ngInherit&&M(s),M===Zf&&(c=!1)}}o=Object.getPrototypeOf(o)}!function Tg(s){let o=0,c=null;for(let h=s.length-1;h>=0;h--){const g=s[h];g.hostVars=o+=g.hostVars,g.hostAttrs=at(g.hostAttrs,c=at(c,g.hostAttrs))}}(h)}function Kh(s){return s===Ve?{}:s===de?[]:s}function Jf(s,o){const c=s.viewQuery;s.viewQuery=c?(h,g)=>{o(h,g),c(h,g)}:o}function ov(s,o){const c=s.contentQueries;s.contentQueries=c?(h,g,y)=>{o(h,g,y),c(h,g,y)}:o}function m_(s,o){const c=s.hostBindings;s.hostBindings=c?(h,g)=>{o(h,g),c(h,g)}:o}function Ud(s){return!!Vd(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Vd(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Pi(s,o,c){return s[o]=c}function no(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function Gd(s,o,c,h){const g=no(s,o,c);return no(s,o+1,h)||g}function au(s,o,c,h){const g=R();return no(g,ca(),o)&&(F(),function Tu(s,o,c,h,g,y){const C=li(s,o);Dg(o[Fn],C,y,s.value,c,h,g)}(ui(),g,s,o,c,h)),au}function Vl(s,o,c,h){return no(s,ca(),c)?o+we(c)+h:pr}function ep(s,o,c,h,g,y,C,M){const L=R(),W=F(),re=s+Ce,_e=W.firstCreatePass?function Qh(s,o,c,h,g,y,C,M,L){const W=o.consts,re=Gh(o,s,4,C||null,Ji(W,M));ou(o,c,re,Ji(W,L)),gl(o,re);const _e=re.tView=Hh(2,re,h,g,y,o.directiveRegistry,o.pipeRegistry,null,o.schemas,W);return null!==o.queries&&(o.queries.template(o,re),_e.queries=o.queries.embeddedTView(re)),re}(re,W,L,o,c,h,g,y,C):W.data[re];Ri(_e,!1);const Be=L[Fn].createComment("");Cc(W,L,Be,_e),Os(Be,L),zf(L,L[re]=Ig(Be,L,Be,_e)),rs(_e)&&ic(W,L,_e),null!=C&&l_(L,_e,M)}function Rg(s){return Is(function Vs(){return Ln.lFrame.contextLView}(),Ce+s)}function tp(s,o,c){const h=R();return no(h,ca(),o)&&Va(F(),ui(),h,s,o,h[Fn],c,!1),tp}function xg(s,o,c,h,g){const C=g?"class":"style";jc(s,c,o.inputs[C],C,h)}function Xh(s,o,c,h){const g=R(),y=F(),C=Ce+s,M=g[Fn],L=y.firstCreatePass?function Pg(s,o,c,h,g,y){const C=o.consts,L=Gh(o,s,2,h,Ji(C,g));return ou(o,c,L,Ji(C,y)),null!==L.attrs&&Cg(L,L.attrs,!1),null!==L.mergedAttrs&&Cg(L,L.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,L),L}(C,y,g,o,c,h):y.data[C],W=g[C]=nu(M,o,function Nl(){return Ln.lFrame.currentNamespace}()),re=rs(L);return Ri(L,!0),Sf(M,W,L),32!=(32&L.flags)&&Cc(y,g,W,L),0===function cl(){return Ln.lFrame.elementDepthCount}()&&Os(W,g),function la(){Ln.lFrame.elementDepthCount++}(),re&&(ic(y,g,L),mg(y,L,g)),null!==h&&l_(g,L),Xh}function uc(){let s=ln();so()?oo():(s=s.parent,Ri(s,!1));const o=s;!function Kl(){Ln.lFrame.elementDepthCount--}();const c=F();return c.firstCreatePass&&(gl(c,s),Ls(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function xn(s){return 0!=(8&s.flags)}(o)&&xg(c,o,R(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Qn(s){return 0!=(16&s.flags)}(o)&&xg(c,o,R(),o.stylesWithoutHost,!1),uc}function kg(s,o,c,h){return Xh(s,o,c,h),uc(),kg}function ef(s,o,c){const h=R(),g=F(),y=s+Ce,C=g.firstCreatePass?function dv(s,o,c,h,g){const y=o.consts,C=Ji(y,h),M=Gh(o,s,8,"ng-container",C);return null!==C&&Cg(M,C,!0),ou(o,c,M,Ji(y,g)),null!==o.queries&&o.queries.elementStart(o,M),M}(y,g,h,o,c):g.data[y];Ri(C,!0);const M=h[y]=h[Fn].createComment("");return Cc(g,h,M,C),Os(M,h),rs(C)&&(ic(g,h,C),mg(g,C,h)),null!=c&&l_(h,C),ef}function Fg(){let s=ln();const o=F();return so()?oo():(s=s.parent,Ri(s,!1)),o.firstCreatePass&&(gl(o,s),Ls(s)&&o.queries.elementEnd(s)),Fg}function Ug(){return R()}function tf(s){return!!s&&"function"==typeof s.then}function nf(s){return!!s&&"function"==typeof s.subscribe}const rf=nf;function np(s,o,c,h){const g=R(),y=F(),C=ln();return function v_(s,o,c,h,g,y,C){const M=rs(h),W=s.firstCreatePass&&Gc(s),re=o[ii],_e=Kf(o);let Be=!0;if(3&h.type||C){const Xt=li(h,o),_n=C?C(Xt):Xt,Tn=_e.length,er=C?gr=>C(Br(gr[h.index])):h.index;let Wt=null;if(!C&&M&&(Wt=function Bg(s,o,c,h){const g=s.cleanup;if(null!=g)for(let y=0;y<g.length-1;y+=2){const C=g[y];if(C===c&&g[y+1]===h){const M=o[Zr],L=g[y+2];return M.length>L?M[L]:null}"string"==typeof C&&(y+=2)}return null}(s,o,g,h.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=y,Wt.__ngLastListenerFn__=y,Be=!1;else{y=Vg(h,o,re,y,!1);const gr=c.listen(_n,g,y);_e.push(y,gr),W&&W.push(g,er,Tn,Tn+1)}}else y=Vg(h,o,re,y,!1);const it=h.outputs;let Mt;if(Be&&null!==it&&(Mt=it[g])){const Xt=Mt.length;if(Xt)for(let _n=0;_n<Xt;_n+=2){const $s=o[Mt[_n]][Mt[_n+1]].subscribe(y),go=_e.length;_e.push(y,$s),W&&W.push(g,h.index,go,-(go+1))}}}(y,g,g[Fn],C,s,o,h),np}function ip(s,o,c,h){try{return Or(6,o,c),!1!==c(h)}catch(g){return f_(s,g),!1}finally{Or(7,o,c)}}function Vg(s,o,c,h,g){return function y(C){if(C===Function)return h;Wf(s.componentOffset>-1?mi(s.index,o):o);let L=ip(o,c,h,C),W=y.__ngNextListenerFn__;for(;W;)L=ip(o,c,W,C)&&L,W=W.__ngNextListenerFn__;return g&&!1===L&&(C.preventDefault(),C.returnValue=!1),L}}function sp(s=1){return function pl(s){return(Ln.lFrame.contextLView=function Vu(s,o){for(;s>0;)o=o[vs],s--;return o}(s,Ln.lFrame.contextLView))[ii]}(s)}function b_(s,o){let c=null;const h=function Ly(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(!(1&c))return o[c+1]}return null}(s);for(let g=0;g<o.length;g++){const y=o[g];if("*"!==y){if(null===h?kh(s,y,!0):nl(h,y))return g}else c=g}return c}function Zc(s){const o=R()[Ni][Mr];if(!o.projection){const h=o.projection=S(s?s.length:1,null),g=h.slice();let y=o.child;for(;null!==y;){const C=s?b_(y,s):0;null!==C&&(g[C]?g[C].projectionNext=y:h[C]=y,g[C]=y),y=y.next}}}function Gg(s,o=0,c){const h=R(),g=F(),y=Gh(g,Ce+s,16,null,c||null);null===y.projection&&(y.projection=o),oo(),32!=(32&y.flags)&&function v0(s,o,c){yr(o[Fn],0,o,c,Zu(s,c,o),Hp(c.parent||o[Mr],c,o))}(g,h,y)}function E_(s,o,c){return jg(s,"",o,"",c),E_}function jg(s,o,c,h,g){const y=R(),C=Vl(y,o,c,h);return C!==pr&&Va(F(),ui(),y,s,C,y[Fn],g,!1),jg}function Jc(s,o){return s<<17|o<<2}function cc(s){return s>>17&32767}function lu(s){return 2|s}function Er(s){return(131068&s)>>2}function $g(s,o){return-131069&s|o<<2}function zd(s){return 1|s}function zg(s,o,c,h,g){const y=s[c+1],C=null===o;let M=h?cc(y):Er(y),L=!1;for(;0!==M&&(!1===L||C);){const re=s[M+1];ob(s[M],o)&&(L=!0,s[M+1]=h?zd(re):lu(re)),M=h?cc(re):Er(re)}L&&(s[c+1]=h?lu(y):zd(y))}function ob(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&St(s,o)>=0}const Rs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wg(s){return s.substring(Rs.key,Rs.keyEnd)}function qg(s,o){const c=Rs.textEnd;return c===o?-1:(o=Rs.keyEnd=function ab(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,Rs.key=o,c),Qc(s,o,c))}function Qc(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function Gi(s,o,c){return or(s,o,c,!1),Gi}function ap(s,o){return or(s,o,null,!0),ap}function bv(s){Xi(se,hi,s,!0)}function hi(s,o){for(let c=function yv(s){return function qi(s){Rs.key=0,Rs.keyEnd=0,Rs.value=0,Rs.valueEnd=0,Rs.textEnd=s.length}(s),qg(s,Qc(s,0,Rs.textEnd))}(o);c>=0;c=qg(o,c))se(s,Wg(o),!0)}function or(s,o,c,h){const g=R(),y=F(),C=Cs(2);y.firstUpdatePass&&Yg(y,s,C,h),o!==pr&&no(g,C,o)&&af(y,y.data[Ui()],g,g[Fn],s,g[C+1]=function Zg(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Le(yu(s)))),s}(o,c),h,C)}function Xi(s,o,c,h){const g=F(),y=Cs(2);g.firstUpdatePass&&Yg(g,null,y,h);const C=R();if(c!==pr&&no(C,y,c)){const M=g.data[Ui()];if(Yd(M,h)&&!sf(g,y)){let L=h?M.classesWithoutHost:M.stylesWithoutHost;null!==L&&(c=Ae(L,c||"")),xg(g,M,C,c,h)}else!function Ev(s,o,c,h,g,y,C,M){g===pr&&(g=de);let L=0,W=0,re=0<g.length?g[0]:null,_e=0<y.length?y[0]:null;for(;null!==re||null!==_e;){const Be=L<g.length?g[L+1]:void 0,it=W<y.length?y[W+1]:void 0;let Xt,Mt=null;re===_e?(L+=2,W+=2,Be!==it&&(Mt=_e,Xt=it)):null===_e||null!==re&&re<_e?(L+=2,Mt=re):(W+=2,Mt=_e,Xt=it),null!==Mt&&af(s,o,c,h,Mt,Xt,C,M),re=L<g.length?g[L]:null,_e=W<y.length?y[W]:null}}(g,M,C,C[Fn],C[y+1],C[y+1]=function C_(s,o,c){if(null==c||""===c)return de;const h=[],g=yu(c);if(Array.isArray(g))for(let y=0;y<g.length;y++)s(h,g[y],!0);else if("object"==typeof g)for(const y in g)g.hasOwnProperty(y)&&s(h,y,g[y]);else"string"==typeof g&&o(h,g);return h}(s,o,c),h,y)}}function sf(s,o){return o>=s.expandoStartIndex}function Yg(s,o,c,h){const g=s.data;if(null===g[c+1]){const y=g[Ui()],C=sf(s,c);Yd(y,h)&&null===o&&!C&&(o=!1),o=function ro(s,o,c,h){const g=function Ka(s){const o=Ln.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let y=h?o.residualClasses:o.residualStyles;if(null===g)0===(h?o.classBindings:o.styleBindings)&&(c=uu(c=Kd(null,s,o,c,h),o.attrs,h),y=null);else{const C=o.directiveStylingLast;if(-1===C||s[C]!==g)if(c=Kd(g,s,o,c,h),null===y){let L=function dc(s,o,c){const h=c?o.classBindings:o.styleBindings;if(0!==Er(h))return s[cc(h)]}(s,o,h);void 0!==L&&Array.isArray(L)&&(L=Kd(null,s,o,L[1],h),L=uu(L,o.attrs,h),function pE(s,o,c,h){s[cc(c?o.classBindings:o.styleBindings)]=h}(s,o,h,L))}else y=function Wd(s,o,c){let h;const g=o.directiveEnd;for(let y=1+o.directiveStylingLast;y<g;y++)h=uu(h,s[y].hostAttrs,c);return uu(h,o.attrs,c)}(s,o,h)}return void 0!==y&&(h?o.residualClasses=y:o.residualStyles=y),c}(g,y,o,h),function Uo(s,o,c,h,g,y){let C=y?o.classBindings:o.styleBindings,M=cc(C),L=Er(C);s[h]=c;let re,W=!1;if(Array.isArray(c)?(re=c[1],(null===re||St(c,re)>0)&&(W=!0)):re=c,g)if(0!==L){const Be=cc(s[M+1]);s[h+1]=Jc(Be,M),0!==Be&&(s[Be+1]=$g(s[Be+1],h)),s[M+1]=function op(s,o){return 131071&s|o<<17}(s[M+1],h)}else s[h+1]=Jc(M,0),0!==M&&(s[M+1]=$g(s[M+1],h)),M=h;else s[h+1]=Jc(L,0),0===M?M=h:s[L+1]=$g(s[L+1],h),L=h;W&&(s[h+1]=lu(s[h+1])),zg(s,re,h,!0),zg(s,re,h,!1),function Ou(s,o,c,h,g){const y=g?s.residualClasses:s.residualStyles;null!=y&&"string"==typeof o&&St(y,o)>=0&&(c[h+1]=zd(c[h+1]))}(o,re,s,h,y),C=Jc(M,L),y?o.classBindings=C:o.styleBindings=C}(g,y,o,c,C,h)}}function Kd(s,o,c,h,g){let y=null;const C=c.directiveEnd;let M=c.directiveStylingLast;for(-1===M?M=c.directiveStart:M++;M<C&&(y=o[M],h=uu(h,y.hostAttrs,g),y!==s);)M++;return null!==s&&(c.directiveStylingLast=M),h}function uu(s,o,c){const h=c?1:2;let g=-1;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?g=C:g===h&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),se(s,C,!!c||o[++y]))}return void 0===s?null:s}function af(s,o,c,h,g,y,C,M){if(!(3&o.type))return;const L=s.data,W=L[M+1],re=function _v(s){return 1==(1&s)}(W)?wv(L,o,c,g,Er(W),C):void 0;Mu(re)||(Mu(y)||function mv(s){return 2==(2&s)}(W)&&(y=wv(L,null,c,g,M,C)),function Sc(s,o,c,h,g){if(o)g?s.addClass(c,h):s.removeClass(c,h);else{let y=-1===h.indexOf("-")?void 0:Jr.DashCase;null==g?s.removeStyle(c,h,y):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),y|=Jr.Important),s.setStyle(c,h,g,y))}}(h,C,yo(Ui(),c),g,y))}function wv(s,o,c,h,g,y){const C=null===o;let M;for(;g>0;){const L=s[g],W=Array.isArray(L),re=W?L[1]:L,_e=null===re;let Be=c[g+1];Be===pr&&(Be=_e?de:void 0);let it=_e?Ue(Be,h):re===h?Be:void 0;if(W&&!Mu(it)&&(it=Ue(L,h)),Mu(it)&&(M=it,C))return M;const Mt=s[g+1];g=C?cc(Mt):Er(Mt)}if(null!==o){let L=y?o.residualClasses:o.residualStyles;null!=L&&(M=Ue(L,h))}return M}function Mu(s){return void 0!==s}function Yd(s,o){return 0!=(s.flags&(o?8:16))}function hc(s,o=""){const c=R(),h=F(),g=s+Ce,y=h.firstCreatePass?Gh(h,g,1,o,null):h.data[g],C=c[g]=md(c[Fn],o);Cc(h,c,C,y),Ri(y,!1)}function wr(s){return Zd("",s,""),wr}function Zd(s,o,c){const h=R(),g=Vl(h,s,o,c);return g!==pr&&function lc(s,o,c){const h=yo(o,s);Ua(s[Fn],h,c)}(h,Ui(),g),Zd}function td(s,o,c,h,g){Xi(se,hi,function Wc(s,o,c,h,g,y){const M=Gd(s,ss(),c,g);return Cs(2),M?o+we(c)+h+we(g)+y:pr}(R(),s,o,c,h,g),!0)}function vp(s,o,c){const h=R();return no(h,ca(),o)&&Va(F(),ui(),h,s,o,h[Fn],c,!0),vp}const Cl=void 0;var df=["en",[["a","p"],["AM","PM"],Cl],[["AM","PM"],Cl,Cl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cl,"{1} 'at' {0}",Cl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cf(s){const c=Math.floor(Math.abs(s)),h=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let Qd={};function nd(s){const o=function R_(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Av(o);if(c)return c;const h=o.split("-")[0];if(c=Av(h),c)return c;if("en"===h)return df;throw new tt(701,!1)}function rd(s){return nd(s)[Xn.PluralCase]}function Av(s){return s in Qd||(Qd[s]=In.ng&&In.ng.common&&In.ng.common.locales&&In.ng.common.locales[s]),Qd[s]}var Xn=(()=>((Xn=Xn||{})[Xn.LocaleId=0]="LocaleId",Xn[Xn.DayPeriodsFormat=1]="DayPeriodsFormat",Xn[Xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xn[Xn.DaysFormat=3]="DaysFormat",Xn[Xn.DaysStandalone=4]="DaysStandalone",Xn[Xn.MonthsFormat=5]="MonthsFormat",Xn[Xn.MonthsStandalone=6]="MonthsStandalone",Xn[Xn.Eras=7]="Eras",Xn[Xn.FirstDayOfWeek=8]="FirstDayOfWeek",Xn[Xn.WeekendRange=9]="WeekendRange",Xn[Xn.DateFormat=10]="DateFormat",Xn[Xn.TimeFormat=11]="TimeFormat",Xn[Xn.DateTimeFormat=12]="DateTimeFormat",Xn[Xn.NumberSymbols=13]="NumberSymbols",Xn[Xn.NumberFormats=14]="NumberFormats",Xn[Xn.CurrencyCode=15]="CurrencyCode",Xn[Xn.CurrencySymbol=16]="CurrencySymbol",Xn[Xn.CurrencyName=17]="CurrencyName",Xn[Xn.Currencies=18]="Currencies",Xn[Xn.Directionality=19]="Directionality",Xn[Xn.PluralCase=20]="PluralCase",Xn[Xn.ExtraData=21]="ExtraData",Xn))();const gE=["zero","one","two","few","many"],jl="en-US",pc={marker:"element"},$l={marker:"ICU"};var ls=(()=>((ls=ls||{})[ls.SHIFT=2]="SHIFT",ls[ls.APPEND_EAGERLY=1]="APPEND_EAGERLY",ls[ls.COMMENT=2]="COMMENT",ls))();let bp=jl;function sl(s){(function Bt(s,o){null==s&&At(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(bp=s.toLowerCase().replace(/_/g,"-"))}function Qg(s,o,c){const h=o.insertBeforeIndex,g=Array.isArray(h)?h[0]:h;return null===g?Cm(s,0,c):Br(c[g])}function Nv(s,o,c,h,g){const y=o.insertBeforeIndex;if(Array.isArray(y)){let C=h,M=null;if(3&o.type||(M=C,C=g),null!==C&&-1===o.componentOffset)for(let L=1;L<y.length;L++)yd(s,C,c[y[L]],M,!1)}}function Mv(s,o){if(s.push(o),s.length>1)for(let c=s.length-2;c>=0;c--){const h=s[c];P_(h)||Rv(h,o)&&null===xv(h)&&db(h,o.index)}}function P_(s){return!(64&s.type)}function Rv(s,o){return P_(o)||s.index>o.index}function xv(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function db(s,o){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=o:(wa(Qg,Nv),s.insertBeforeIndex=o)}function Ia(s,o){const c=s.data[o];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function id(s,o,c){const h=il(s,c,64,null,null);return Mv(o,h),h}function gc(s,o){const c=o[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function Ep(s){return s>>>17}function sd(s){return(131070&s)>>>1}let zl=0,wp=0;function Ip(s,o,c,h){const g=c[Fn];let C,y=null;for(let M=0;M<o.length;M++){const L=o[M];if("string"==typeof L){const W=o[++M];null===c[W]&&(c[W]=md(g,L))}else if("number"==typeof L)switch(1&L){case 0:const W=Ep(L);let re,_e;if(null===y&&(y=W,C=Gs(g,h)),W===y?(re=h,_e=C):(re=null,_e=Br(c[W])),null!==_e){const Xt=sd(L);yd(g,_e,c[Xt],re,!1);const Tn=Ia(s,Xt);if(null!==Tn&&"object"==typeof Tn){const er=gc(Tn,c);null!==er&&Ip(s,Tn.create[er],c,c[Tn.anchorIdx])}}break;case 1:const it=o[++M],Mt=o[++M];Dg(g,yo(L>>>1,c),null,null,it,Mt,null)}else switch(L){case $l:const W=o[++M],re=o[++M];null===c[re]&&Os(c[re]=Fl(g,W),c);break;case pc:const _e=o[++M],Be=o[++M];null===c[Be]&&Os(c[Be]=nu(g,_e,null),c)}}}function hf(s,o,c,h,g){for(let y=0;y<c.length;y++){const C=c[y],M=c[++y];if(C&g){let L="";for(let W=y+1;W<=y+M;W++){const re=c[W];if("string"==typeof re)L+=re;else if("number"==typeof re)if(re<0)L+=we(o[h-re]);else{const _e=re>>>2;switch(3&re){case 1:const Be=c[++W],it=c[++W],Mt=s.data[_e];"string"==typeof Mt?Dg(o[Fn],o[_e],null,Mt,Be,L,it):Va(s,Mt,o,Be,L,o[Fn],it,!1);break;case 0:const Xt=o[_e];null!==Xt&&Ua(o[Fn],Xt,L);break;case 2:L_(s,Ia(s,_e),o,L);break;case 3:F_(s,Ia(s,_e),h,o)}}}}else{const L=c[y+1];if(L>0&&3==(3&L)){const re=Ia(s,L>>>2);o[re.currentCaseLViewIndex]<0&&F_(s,re,h,o)}}y+=M}}function F_(s,o,c,h){let g=h[o.currentCaseLViewIndex];if(null!==g){let y=zl;g<0&&(g=h[o.currentCaseLViewIndex]=~g,y=-1),hf(s,h,o.update[g],c,y)}}function L_(s,o,c,h){const g=function em(s,o){let c=s.cases.indexOf(o);if(-1===c)switch(s.type){case 1:{const h=function Ov(s,o){const c=rd(o)(parseInt(s,10)),h=gE[c];return void 0!==h?h:"other"}(o,function x_(){return bp}());c=s.cases.indexOf(h),-1===c&&"other"!==h&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(o,h);if(gc(o,c)!==g&&(eh(s,o,c),c[o.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const C=c[o.anchorIdx];C&&Ip(s,o.create[g],c,C)}}function eh(s,o,c){let h=gc(o,c);if(null!==h){const g=o.remove[h];for(let y=0;y<g.length;y++){const C=g[y];if(C>0){const M=yo(C,c);null!==M&&Cf(c[Fn],M)}else eh(s,Ia(s,~C),c)}}}function pb(){const s=[];let c,h,o=-1;function y(M,L){o=0;const W=gc(M,L);h=null!==W?M.remove[W]:de}function C(){if(o<h.length){const M=h[o++];return M>0?c[M]:(s.push(o,h),y(c[rn].data[~M],c),C())}return 0===s.length?null:(h=s.pop(),o=s.pop(),C())}return function g(M,L){for(c=L;s.length;)s.pop();return y(M.value,L),C}}const od=/\ufffd(\d+):?\d*\ufffd/gi,Pv=/\ufffd(\d+)\ufffd/,xu=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Pu="\ufffd",ff=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,B_=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Tp=/\uE500/g;function V_(s,o,c,h,g,y,C){const M=Vc(s,h,1,null);let L=M<<ls.SHIFT,W=Li();o===W&&(W=null),null===W&&(L|=ls.APPEND_EAGERLY),C&&(L|=ls.COMMENT,function Rn(s){void 0===Ut&&(Ut=s())}(pb)),g.push(L,null===y?"":y);const re=il(s,M,C?32:1,null===y?"":y,null);Mv(c,re);const _e=re.index;return Ri(re,!1),null!==W&&o!==W&&function k_(s,o){let c=s.insertBeforeIndex;null===c?(wa(Qg,Nv),c=s.insertBeforeIndex=[null,o]):(function wt(s,o,c){s!=o&&At(c,s,o,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(o))}(W,_e),re}function kv(s,o,c,h,g,y,C){const M=C.match(od),L=V_(s,o,c,y,h,M?null:C,!1);M&&_c(g,C,L.index,null,0,null)}function _c(s,o,c,h,g,y){const C=s.length,M=C+1;s.push(null,null);const L=C+2,W=o.split(od);let re=0;for(let _e=0;_e<W.length;_e++){const Be=W[_e];if(1&_e){const it=g+parseInt(Be,10);s.push(-1-it),re|=G_(it)}else""!==Be&&s.push(Be)}return s.push(c<<2|(h?1:0)),h&&s.push(h,y),s[C]=re,s[M]=s.length-L,re}function G_(s){return 1<<Math.min(s,31)}function ih(s){let o,y,c="",h=0,g=!1;for(;null!==(o=ff.exec(s));)g?o[0]===`${Pu}/*${y}${Pu}`&&(h=o.index,g=!1):(c+=s.substring(h,o.index+o[0].length),y=o[1],g=!0);return c+=s.slice(h),c}function tm(s,o,c,h,g,y){let C=0;const M={type:g.type,currentCaseLViewIndex:Vc(s,o,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function gb(s,o,c){s.push(G_(o.mainBinding),2,-1-o.mainBinding,c<<2|2)})(c,g,y),function Xg(s,o,c){const h=s.data[o];null===h?s.data[o]=c:h.value=c}(s,y,M);const L=g.values;for(let W=0;W<L.length;W++){const re=L[W],_e=[];for(let Be=0;Be<re.length;Be++){const it=re[Be];if("string"!=typeof it){const Mt=_e.push(it)-1;re[Be]=`\x3c!--\ufffd${Mt}\ufffd--\x3e`}}C=nm(s,M,o,c,h,g.cases[W],re.join(""),_e)|C}C&&function $_(s,o,c){s.push(o,1,c<<2|3)}(c,C,y)}function oh(s){const o=[],c=[];let h=1,g=0;const y=H_(s=s.replace(xu,function(C,M,L){return h="select"===L?0:1,g=parseInt(M.slice(1),10),""}));for(let C=0;C<y.length;){let M=y[C++].trim();1===h&&(M=M.replace(/\s*(?:=)?(\w+)\s*/,"$1")),M.length&&o.push(M);const L=H_(y[C++]);o.length>c.length&&c.push(L)}return{type:h,mainBinding:g,cases:o,values:c}}function H_(s){if(!s)return[];let o=0;const c=[],h=[],g=/[{}]/g;let y;for(g.lastIndex=0;y=g.exec(s);){const M=y.index;if("}"==y[0]){if(c.pop(),0==c.length){const L=s.substring(o,M);xu.test(L)?h.push(oh(L)):h.push(L),o=M+1}}else{if(0==c.length){const L=s.substring(o,M);h.push(L),o=M+1}c.push("{")}}const C=s.substring(o);return h.push(C),h}function nm(s,o,c,h,g,y,C,M){const L=[],W=[],re=[];o.cases.push(y),o.create.push(L),o.remove.push(W),o.update.push(re);const Be=function Rm(s){const o=new Pm(s);return function I0(){try{return!!(new window.DOMParser).parseFromString(Ac(""),"text/html")}catch{return!1}}()?new xm(o):o}(function Am(){return void 0!==Of?Of:typeof document<"u"?document:void 0}()).getInertBodyElement(C),it=function Xp(s){return"content"in s&&function N0(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(Be)||Be;return it?rm(s,o,c,h,L,W,re,it,g,M,0):0}function rm(s,o,c,h,g,y,C,M,L,W,re){let _e=0,Be=M.firstChild;for(;Be;){const it=Vc(s,c,1,null);switch(Be.nodeType){case Node.ELEMENT_NODE:const Mt=Be,Xt=Mt.tagName.toLowerCase();if(Fm.hasOwnProperty(Xt)){Ap(g,pc,Xt,L,it),s.data[it]=Xt;const Wt=Mt.attributes;for(let gr=0;gr<Wt.length;gr++){const $s=Wt.item(gr),go=$s.name.toLowerCase();$s.value.match(od)?xf.hasOwnProperty(go)&&_c(C,$s.value,it,$s.name,0,Rf[go]?Dy:null):Fv(g,it,$s)}_e=rm(s,o,c,h,g,y,C,Be,it,W,re+1)|_e,ku(y,it,re)}break;case Node.TEXT_NODE:const _n=Be.textContent||"",Tn=_n.match(od);Ap(g,null,Tn?"":_n,L,it),ku(y,it,re),Tn&&(_e=_c(C,_n,it,null,0,null)|_e);break;case Node.COMMENT_NODE:const er=Pv.exec(Be.textContent||"");if(er){const gr=W[parseInt(er[1],10)];Ap(g,$l,"",L,it),tm(s,c,h,L,gr,it),im(y,it,re)}}Be=Be.nextSibling}return _e}function ku(s,o,c){0===c&&s.push(o)}function im(s,o,c){0===c&&(s.push(~o),s.push(o))}function Ap(s,o,c,h,g){null!==o&&s.push(o),s.push(c,g,function mc(s,o,c){return s|o<<17|c<<1}(0,h,g))}function Fv(s,o,c){s.push(o<<1|1,c.name,c.value)}function Op(s,o,c=-1){const h=F(),g=R(),y=Ce+s,C=Ji(h.consts,o),M=Li();h.firstCreatePass&&function ja(s,o,c,h,g,y){const C=Li(),M=[],L=[],W=[[]];g=function sh(s,o){if(function j_(s){return-1===s}(o))return ih(s);{const c=s.indexOf(`:${o}${Pu}`)+2+o.toString().length,h=s.search(new RegExp(`${Pu}\\/\\*\\d+:${o}${Pu}`));return ih(s.substring(c,h))}}(g,y);const re=function rh(s){return s.replace(Tp," ")}(g).split(B_);for(let _e=0;_e<re.length;_e++){let Be=re[_e];if(1&_e){const it=47===Be.charCodeAt(0),Xt=(Be.charCodeAt(it?1:0),Ce+Number.parseInt(Be.substring(it?2:1)));if(it)W.shift(),Ri(Li(),!1);else{const _n=id(s,W[0],Xt);W.unshift([]),Ri(_n,!0)}}else{const it=H_(Be);for(let Mt=0;Mt<it.length;Mt++){let Xt=it[Mt];if(1&Mt){const _n=Xt;if("object"!=typeof _n)throw new Error(`Unable to parse ICU expression in "${g}" message.`);tm(s,c,L,o,_n,V_(s,C,W[0],c,M,"",!0).index)}else""!==Xt&&kv(s,C,W[0],M,L,c,Xt)}}}s.data[h]={create:M,update:L}}(h,null===M?0:M.index,g,y,C,c);const L=h.data[y],re=yy(h,M===g[Mr]?null:M,g);(function fb(s,o,c,h){const g=s[Fn];for(let y=0;y<o.length;y++){const C=o[y++],M=o[y],W=(C&ls.APPEND_EAGERLY)===ls.APPEND_EAGERLY,re=C>>>ls.SHIFT;let _e=s[re];null===_e&&(_e=s[re]=(C&ls.COMMENT)===ls.COMMENT?g.createComment(M):md(g,M)),W&&null!==c&&yd(g,c,_e,h,!1)}})(g,L.create,re,M&&8&M.type?g[M.index]:null),Ma(!0)}function am(s,o,c){Op(s,o,c),function Np(){Ma(!1)}()}function lm(s){return function Dp(s){s&&(zl|=1<<Math.min(wp,31)),wp++}(no(R(),ca(),s)),lm}function Mp(s){!function hb(s,o,c){if(wp>0){const h=s.data[c];hf(s,o,Array.isArray(h)?h:h.update,ss()-wp-1,zl)}zl=0,wp=0}(F(),R(),s+Ce)}function a(s,o,c,h,g){if(s=ke(s),Array.isArray(s))for(let y=0;y<s.length;y++)a(s[y],o,c,h,g);else{const y=F(),C=R();let M=bu(s)?s:ke(s.provide),L=xc(s);const W=ln(),re=1048575&W.providerIndexes,_e=W.directiveStart,Be=W.providerIndexes>>20;if(bu(s)||!s.multi){const it=new Ye(L,g,Uh),Mt=u(M,o,g?re:re+Be,_e);-1===Mt?(wn(mn(W,C),y,M),e(y,s,o.length),o.push(M),W.directiveStart++,W.directiveEnd++,g&&(W.providerIndexes+=1048576),c.push(it),C.push(it)):(c[Mt]=it,C[Mt]=it)}else{const it=u(M,o,re+Be,_e),Mt=u(M,o,re,re+Be),_n=Mt>=0&&c[Mt];if(g&&!_n||!g&&!(it>=0&&c[it])){wn(mn(W,C),y,M);const Tn=function O(s,o,c,h,g){const y=new Ye(s,c,Uh);return y.multi=[],y.index=o,y.componentProviders=0,n(y,g,h&&!c),y}(g?_:f,c.length,g,h,L);!g&&_n&&(c[Mt].providerFactory=Tn),e(y,s,o.length,0),o.push(M),W.directiveStart++,W.directiveEnd++,g&&(W.providerIndexes+=1048576),c.push(Tn),C.push(Tn)}else e(y,s,it>-1?it:Mt,n(c[g?Mt:it],L,!g&&h));!g&&h&&_n&&c[Mt].componentProviders++}}}function e(s,o,c,h){const g=bu(o),y=function Oy(s){return!!s.useClass}(o);if(g||y){const L=(y?ke(o.useClass):o).prototype.ngOnDestroy;if(L){const W=s.destroyHooks||(s.destroyHooks=[]);if(!g&&o.multi){const re=W.indexOf(c);-1===re?W.push(c,[h,L]):W[re+1].push(h,L)}else W.push(c,L)}}}function n(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function u(s,o,c,h){for(let g=c;g<h;g++)if(o[g]===s)return g;return-1}function f(s,o,c,h){return w(this.multi,[])}function _(s,o,c,h){const g=this.multi;let y;if(this.providerFactory){const C=this.providerFactory.componentProviders,M=Ts(c,c[rn],this.providerFactory.index,h);y=M.slice(0,C),w(g,y);for(let L=C;L<M.length;L++)y.push(M[L])}else y=[],w(g,y);return y}function w(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function H(s,o=[]){return c=>{c.providersResolver=(h,g)=>function yb(s,o,c){const h=F();if(h.firstCreatePass){const g=bs(s);a(c,h.data,h.blueprint,g,!0),a(o,h.data,h.blueprint,g,!1)}}(h,g?g(s):s,o)}}class q{}class ae{}function Oe(s,o){return new Ot(s,o??null)}class Ot extends q{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qf(this);const h=ns(o);this._bootstrapComponents=Xo(h.bootstrap),this._r3Injector=ug(o,c,[{provide:q,useValue:this},{provide:Td,useValue:this.componentFactoryResolver}],Le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Gt extends ae{constructor(o){super(),this.moduleType=o}create(o){return new Ot(this.moduleType,o)}}class dn extends q{constructor(o,c,h){super(),this.componentFactoryResolver=new qf(this),this.instance=null;const g=new Qu([...o,{provide:q,useValue:this},{provide:Td,useValue:this.componentFactoryResolver}],c||wd(),h,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function An(s,o,c=null){return new dn(s,o,c).injector}let Ai=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const h=jm(0,c.type),g=h.length>0?An([h],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,g)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Tt({token:s,providedIn:"environment",factory:()=>new s(Lt(gs))}),s})();function Hs(s){s.getStandaloneInjector=o=>o.get(Ai).getOrCreateStandaloneInjector(s)}function _E(s,o,c,h){return Db(R(),_i(),s,o,c,h)}function Z_(s,o,c,h,g){return function dm(s,o,c,h,g,y,C){const M=o+c;return Gd(s,M,g,y)?Pi(s,M+2,C?h.call(C,g,y):h(g,y)):cm(s,M+2)}(R(),_i(),s,o,c,h,g)}function Eb(s,o,c,h,g,y){return function J_(s,o,c,h,g,y,C,M){const L=o+c;return function wl(s,o,c,h,g){const y=Gd(s,o,c,h);return no(s,o+2,g)||y}(s,L,g,y,C)?Pi(s,L+3,M?h.call(M,g,y,C):h(g,y,C)):cm(s,L+3)}(R(),_i(),s,o,c,h,g,y)}function cm(s,o){const c=s[o];return c===pr?void 0:c}function Db(s,o,c,h,g,y){const C=o+c;return no(s,C,g)?Pi(s,C+1,y?h.call(y,g):h(g)):cm(s,C+1)}function zv(s,o){const c=F();let h;const g=s+Ce;c.firstCreatePass?(h=function _w(s,o){if(o)for(let c=o.length-1;c>=0;c--){const h=o[c];if(s===h.name)return h}}(o,c.pipeRegistry),c.data[g]=h,h.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(g,h.onDestroy)):h=c.data[g];const y=h.factory||(h.factory=Ki(h.type)),C=kr(Uh);try{const M=ka(!1),L=y();return ka(M),function cv(s,o,c,h){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=h}(c,R(),g,L),L}finally{kr(C)}}function vE(s,o,c){const h=s+Ce,g=R(),y=Is(g,h);return function Q_(s,o){return s[rn].data[o].pure}(g,h)?Db(g,_i(),o,y.transform,c,y):y.transform(c)}function Tb(s){return o=>{setTimeout(s,void 0,o)}}const ad=class bE extends b.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,h){let g=o,y=c||(()=>null),C=h;if(o&&"object"==typeof o){const L=o;g=L.next?.bind(L),y=L.error?.bind(L),C=L.complete?.bind(L)}this.__isAsync&&(y=Tb(y),g&&(g=Tb(g)),C&&(C=Tb(C)));const M=super.subscribe({next:g,error:y,complete:C});return o instanceof Z.w0&&o.add(M),M}};function EE(){return this._results[Symbol.iterator]()}class X_{get changes(){return this._changes||(this._changes=new ad)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=X_.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=EE)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const h=this;h.dirty=!1;const g=function bi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function kl(s,o,c){if(s.length!==o.length)return!1;for(let h=0;h<s.length;h++){let g=s[h],y=o[h];if(c&&(g=c(g),y=c(y)),y!==g)return!1}return!0}(h._results,g,c))&&(h._results=g,h.length=g.length,h.last=g[this.length-1],h.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pp,s})();const Sb=xp,Kv=class extends Sb{constructor(o,c,h){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(o,c){const h=this._declarationTContainer.tView,g=Ao(this._declarationLView,h,o,16,null,h.declTNode,null,null,null,null,c||null);g[Ws]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[Fi];return null!==C&&(g[Fi]=C.createEmbeddedView(h)),xd(h,g,o),new Hc(g)}};function Pp(){return hm(ln(),R())}function hm(s,o){return 4&s.type?new Kv(o,s,Sd(s,o)):null}let ey=(()=>{class s{}return s.__NG_ELEMENT_ID__=bw,s})();function bw(){return Yv(ln(),R())}const qv=ey,Ab=class extends qv{constructor(o,c,h){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=h}get element(){return Sd(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){const o=dr(this._hostTNode,this._hostLView);if(ci(o)){const c=_l(o,this._hostLView),h=Ro(o);return new $r(c[rn].data[h+8],c)}return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=wE(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(o,c,h){let g,y;"number"==typeof h?g=h:null!=h&&(g=h.index,y=h.injector);const C=o.createEmbeddedView(c||{},y);return this.insert(C,g),C}createComponent(o,c,h,g,y){const C=o&&!function wo(s){return"function"==typeof s}(o);let M;if(C)M=c;else{const _e=c||{};M=_e.index,h=_e.injector,g=_e.projectableNodes,y=_e.environmentInjector||_e.ngModuleRef}const L=C?o:new Ld(Zn(o)),W=h||this.parentInjector;if(!y&&null==L.ngModule){const Be=(C?W:this.parentInjector).get(gs,null);Be&&(y=Be)}const re=L.create(W,g,void 0,y);return this.insert(re.hostView,M),re}insert(o,c){const h=o._lView,g=h[rn];if(function vo(s){return Rr(s[Sr])}(h)){const re=this.indexOf(o);if(-1!==re)this.detach(re);else{const _e=h[Sr],Be=new Ab(_e,_e[Mr],_e[Sr]);Be.detach(Be.indexOf(o))}}const y=this._adjustIndex(c),C=this._lContainer;!function Yu(s,o,c,h){const g=$n+h,y=c.length;h>0&&(c[g-1][pi]=o),h<y-$n?(o[pi]=c[g],Wu(c,$n+h,o)):(c.push(o),o[pi]=null),o[Sr]=c;const C=o[Ws];null!==C&&c!==C&&function wf(s,o){const c=s[Ar];o[Ni]!==o[Sr][Sr][Ni]&&(s[Jt]=!0),null===c?s[Ar]=[o]:c.push(o)}(C,o);const M=o[Fi];null!==M&&M.insertView(s),o[Gn]|=64}(g,h,C,y);const M=iu(y,C),L=h[Fn],W=Gs(L,C[yn]);return null!==W&&function wh(s,o,c,h,g,y){h[ki]=g,h[Mr]=o,zp(s,h,c,1,g,y)}(g,C[Mr],L,h,W,M),o.attachToViewContainerRef(),Wu(kp(C),y,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=wE(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),h=my(this._lContainer,c);h&&(T(kp(this._lContainer),c),Df(h[rn],h))}detach(o){const c=this._adjustIndex(o,-1),h=my(this._lContainer,c);return h&&null!=T(kp(this._lContainer),c)?new Hc(h):null}_adjustIndex(o,c=0){return o??this.length+c}};function wE(s){return s[Vn]}function kp(s){return s[Vn]||(s[Vn]=[])}function Yv(s,o){let c;const h=o[s.index];if(Rr(h))c=h;else{let g;if(8&s.type)g=Br(h);else{const y=o[Fn];g=y.createComment("");const C=li(s,o);yd(y,Gs(y,C),g,function di(s,o){return s.nextSibling(o)}(y,C),!1)}o[s.index]=c=Ig(h,o,g,s),zf(o,c)}return new Ab(c,s,o)}class Ob{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ob(this.queryList)}setDirty(){this.queryList.setDirty()}}class Nb{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const h=null!==o.contentQueries?o.contentQueries[0]:c.length,g=[];for(let y=0;y<h;y++){const C=c.getByIndex(y);g.push(this.queries[C.indexInDeclarationView].clone())}return new Nb(g)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==ry(o,c).matches&&this.queries[c].setDirty()}}class DE{constructor(o,c,h=null){this.predicate=o,this.flags=c,this.read=h}}class ty{constructor(o=[]){this.queries=o}elementStart(o,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let h=0;h<this.length;h++){const g=null!==c?c.length:0,y=this.getByIndex(h).embeddedTView(o,g);y&&(y.indexInDeclarationView=h,null!==c?c.push(y):c=[y])}return null!==c?new ty(c):null}template(o,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class fm{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new fm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=o.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let g=0;g<h.length;g++){const y=h[g];this.matchTNodeWithReadOption(o,c,IE(c,y)),this.matchTNodeWithReadOption(o,c,ga(c,o,y,!1,!1))}else h===xp?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,ga(c,o,h,!1,!1))}matchTNodeWithReadOption(o,c,h){if(null!==h){const g=this.metadata.read;if(null!==g)if(g===ec||g===ey||g===xp&&4&c.type)this.addMatch(c.index,-2);else{const y=ga(c,o,g,!1,!1);null!==y&&this.addMatch(c.index,y)}else this.addMatch(c.index,h)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function IE(s,o){const c=s.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===o)return c[h+1];return null}function ny(s,o,c,h){return-1===c?function Ew(s,o){return 11&s.type?Sd(s,o):4&s.type?hm(s,o):null}(o,s):-2===c?function ld(s,o,c){return c===ec?Sd(o,s):c===xp?hm(o,s):c===ey?Yv(o,s):void 0}(s,o,h):Ts(s,s[rn],c,o)}function pm(s,o,c,h){const g=o[Fi].queries[h];if(null===g.matches){const y=s.data,C=c.matches,M=[];for(let L=0;L<C.length;L+=2){const W=C[L];M.push(W<0?null:ny(o,y[W],C[L+1],c.metadata.read))}g.matches=M}return g.matches}function Mb(s,o,c,h){const g=s.queries.getByIndex(c),y=g.matches;if(null!==y){const C=pm(s,o,g,c);for(let M=0;M<y.length;M+=2){const L=y[M];if(L>0)h.push(C[M/2]);else{const W=y[M+1],re=o[-L];for(let _e=$n;_e<re.length;_e++){const Be=re[_e];Be[Ws]===Be[Sr]&&Mb(Be[rn],Be,W,h)}if(null!==re[Ar]){const _e=re[Ar];for(let Be=0;Be<_e.length;Be++){const it=_e[Be];Mb(it[rn],it,W,h)}}}}}return h}function Rb(s){const o=R(),c=F(),h=Ol();xa(h+1);const g=ry(c,h);if(s.dirty&&function Aa(s){return 4==(4&s[Gn])}(o)===(2==(2&g.metadata.flags))){if(null===g.matches)s.reset([]);else{const y=g.crossesNgTemplate?Mb(c,o,h,[]):pm(c,o,g,h);s.reset(y,Ry),s.notifyOnChanges()}return!0}return!1}function Zv(s,o,c){const h=F();h.firstCreatePass&&(xb(h,new DE(s,o,c),-1),2==(2&o)&&(h.staticViewQueries=!0)),du(h,R(),o)}function gm(s,o,c,h){const g=F();if(g.firstCreatePass){const y=ln();xb(g,new DE(o,c,h),y.index),function Dw(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(g,s),2==(2&c)&&(g.staticContentQueries=!0)}du(g,R(),c)}function mm(){return function ww(s,o){return s[Fi].queries[o].queryList}(R(),Ol())}function du(s,o,c){const h=new X_(4==(4&c));$h(s,o,h,h.destroy),null===o[Fi]&&(o[Fi]=new Nb),o[Fi].queries.push(new Ob(h))}function xb(s,o,c){null===s.queries&&(s.queries=new ty),s.queries.track(new fm(o,c))}function ry(s,o){return s.queries.getByIndex(o)}function Pb(s,o){return hm(s,o)}function Jv(s){return!!ns(s)}function a0(...s){}const l0=new ai("Application Initializer");let u0=(()=>{class s{constructor(c){this.appInits=c,this.resolve=a0,this.reject=a0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,g)=>{this.resolve=h,this.reject=g})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const y=this.appInits[g]();if(tf(y))c.push(y);else if(rf(y)){const C=new Promise((M,L)=>{y.subscribe({complete:M,error:L})});c.push(C)}}Promise.all(c).then(()=>{h()}).catch(g=>{this.reject(g)}),0===c.length&&h(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Lt(l0,8))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const kE=new ai("AppId",{providedIn:"root",factory:function FE(){return`${Up()}${Up()}${Up()}`}});function Up(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oy=new ai("Platform Initializer"),ay=new ai("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let UE=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ly=new ai("LocaleId",{providedIn:"root",factory:()=>Fe(ly,Pt.Optional|Pt.SkipSelf)||function BE(){return typeof $localize<"u"&&$localize.locale||jl}()}),VE=new ai("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class kw{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let Fw=(()=>{class s{compileModuleSync(c){return new Gt(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),y=Xo(ns(c).declarations).reduce((C,M)=>{const L=Zn(M);return L&&C.push(new Ld(L)),C},[]);return new kw(h,y)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Uw=(()=>Promise.resolve(0))();function qb(s){typeof Zone>"u"?Uw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Fu{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ad(!1),this.onMicrotaskEmpty=new ad(!1),this.onStable=new ad(!1),this.onError=new ad(!1),typeof Zone>"u")throw new tt(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!h&&c,g.shouldCoalesceRunChangeDetection=h,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function Bw(){let s=In.requestAnimationFrame,o=In.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const h=o[Zone.__symbol__("OriginalDelegate")];h&&(o=h)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function jw(s){const o=()=>{!function Gw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(In,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Zb(s),s.isCheckStableRunning=!0,Yb(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Zb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,g,y,C,M)=>{try{return $E(s),c.invokeTask(g,y,C,M)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||s.shouldCoalesceRunChangeDetection)&&o(),Lu(s)}},onInvoke:(c,h,g,y,C,M,L)=>{try{return $E(s),c.invoke(g,y,C,M,L)}finally{s.shouldCoalesceRunChangeDetection&&o(),Lu(s)}},onHasTask:(c,h,g,y)=>{c.hasTask(g,y),h===g&&("microTask"==y.change?(s._hasPendingMicrotasks=y.microTask,Zb(s),Yb(s)):"macroTask"==y.change&&(s.hasPendingMacrotasks=y.macroTask))},onHandleError:(c,h,g,y)=>(c.handleError(g,y),s.runOutsideAngular(()=>s.onError.emit(y)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fu.isInAngularZone())throw new tt(909,!1)}static assertNotInAngularZone(){if(Fu.isInAngularZone())throw new tt(909,!1)}run(o,c,h){return this._inner.run(o,c,h)}runTask(o,c,h,g){const y=this._inner,C=y.scheduleEventTask("NgZoneEvent: "+g,o,Vw,a0,a0);try{return y.runTask(C,c,h)}finally{y.cancelTask(C)}}runGuarded(o,c,h){return this._inner.runGuarded(o,c,h)}runOutsideAngular(o){return this._outer.run(o)}}const Vw={};function Yb(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Zb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function $E(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Lu(s){s._nesting--,Yb(s)}class Hw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ad,this.onMicrotaskEmpty=new ad,this.onStable=new ad,this.onError=new ad}run(o,c,h){return o.apply(c,h)}runGuarded(o,c,h){return o.apply(c,h)}runOutsideAngular(o){return o()}runTask(o,c,h,g){return o.apply(c,h)}}const c0=new ai(""),Jb=new ai("");let Xb,$w=(()=>{class s{constructor(c,h,g){this._ngZone=c,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xb||(function zw(s){Xb=s}(g),g.addToWindow(h)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fu.assertNotInAngularZone(),qb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qb(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,g){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==y),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:y,updateCb:g})}whenStable(c,h,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,h,g){return[]}}return s.\u0275fac=function(c){return new(c||s)(Lt(Fu),Lt(Qb),Lt(Jb))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})(),Qb=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return Xb?.findTestabilityInTree(this,c,h)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const uh=!1;let pf=null;const eE=new ai("AllowMultipleToken"),tE=new ai("PlatformDestroyListeners"),zE=new ai("appBootstrapListener");class qw{constructor(o,c){this.name=o,this.token=c}}function KE(s,o,c=[]){const h=`Platform: ${o}`,g=new ai(h);return(y=[])=>{let C=YE();if(!C||C.injector.get(eE,!1)){const M=[...c,...y,{provide:g,useValue:!0}];s?s(M):function Yw(s){if(pf&&!pf.get(eE,!1))throw new tt(400,!1);pf=s;const o=s.get(ZE);(function WE(s){const o=s.get(oy,null);o&&o.forEach(c=>c())})(s)}(function qE(s=[],o){return El.create({name:o,providers:[{provide:ng,useValue:"platform"},{provide:tE,useValue:new Set([()=>pf=null])},...s]})}(M,h))}return function Jw(s){const o=YE();if(!o)throw new tt(401,!1);return o}()}}function YE(){return pf?.get(ZE)??null}let ZE=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const g=function QE(s,o){let c;return c="noop"===s?new Hw:("zone.js"===s?void 0:s)||new Fu(o),c}(h?.ngZone,function JE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(h)),y=[{provide:Fu,useValue:g}];return g.run(()=>{const C=El.create({providers:y,parent:this.injector,name:c.moduleType.name}),M=c.create(C),L=M.injector.get(wu,null);if(!L)throw new tt(402,!1);return g.runOutsideAngular(()=>{const W=g.onError.subscribe({next:re=>{L.handleError(re)}});M.onDestroy(()=>{h0(this._modules,M),W.unsubscribe()})}),function nE(s,o,c){try{const h=c();return tf(h)?h.catch(g=>{throw o.runOutsideAngular(()=>s.handleError(g)),g}):h}catch(h){throw o.runOutsideAngular(()=>s.handleError(h)),h}}(L,g,()=>{const W=M.injector.get(u0);return W.runInitializers(),W.donePromise.then(()=>(sl(M.injector.get(ly,jl)||jl),this._moduleDoBootstrap(M),M))})})}bootstrapModule(c,h=[]){const g=XE({},h);return function ID(s,o,c){const h=new Gt(c);return Promise.resolve(h)}(0,0,c).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(c){const h=c.injector.get(d0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(g=>h.bootstrap(g));else{if(!c.instance.ngDoBootstrap)throw new tt(-403,!1);c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const c=this._injector.get(tE,null);c&&(c.forEach(h=>h()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Lt(El))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function XE(s,o){return Array.isArray(o)?o.reduce(XE,s):{...s,...o}}let d0=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,h,g){this._zone=c,this._injector=h,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new p.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),C=new p.y(M=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Fu.assertNotInAngularZone(),qb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{Fu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{L.unsubscribe(),W.unsubscribe()}});this.isStable=(0,Ie.T)(y,C.pipe((0,Pe.B)()))}bootstrap(c,h){const g=c instanceof $i;if(!this._injector.get(u0).done){!g&&Xr(c);throw new tt(405,uh)}let C;C=g?c:this._injector.get(Td).resolveComponentFactory(c),this.componentTypes.push(C.componentType);const M=function Kw(s){return s.isBoundToModule}(C)?void 0:this._injector.get(q),W=C.create(El.NULL,[],h||C.selector,M),re=W.location.nativeElement,_e=W.injector.get(c0,null);return _e?.registerApplication(re),W.onDestroy(()=>{this.detachView(W.hostView),h0(this.components,W),_e?.unregisterApplication(re)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new tt(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;h0(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const h=this._injector.get(zE,[]);h.push(...this._bootstrapListeners),h.forEach(g=>g(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>h0(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new tt(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(Lt(Fu),Lt(gs),Lt(wu))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function h0(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}function $a(){return!1}let Qw=(()=>{class s{}return s.__NG_ELEMENT_ID__=Xw,s})();function Xw(s){return function eD(s,o,c){if(qs(s)&&!c){const h=mi(s.index,o);return new Hc(h,h)}return 47&s.type?new Hc(o[Ni],o):null}(ln(),R(),16==(16&s))}class iw{constructor(){}supports(o){return Ud(o)}create(o){return new uD(o)}}const lD=(s,o)=>o;class uD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||lD}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,h=this._removalsHead,g=0,y=null;for(;c||h;){const C=!h||c&&c.currentIndex<r(h,g,y)?c:h,M=r(C,g,y),L=C.currentIndex;if(C===h)g--,h=h._nextRemoved;else if(c=c._next,null==C.previousIndex)g++;else{y||(y=[]);const W=M-g,re=L-g;if(W!=re){for(let Be=0;Be<W;Be++){const it=Be<y.length?y[Be]:y[Be]=0,Mt=it+Be;re<=Mt&&Mt<W&&(y[Be]=it+1)}y[C.previousIndex]=re-W}}M!==L&&o(C,M,L)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!Ud(o))throw new tt(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let g,y,C,c=this._itHead,h=!1;if(Array.isArray(o)){this.length=o.length;for(let M=0;M<this.length;M++)y=o[M],C=this._trackByFn(M,y),null!==c&&Object.is(c.trackById,C)?(h&&(c=this._verifyReinsertion(c,y,C,M)),Object.is(c.item,y)||this._addIdentityChange(c,y)):(c=this._mismatch(c,y,C,M),h=!0),c=c._next}else g=0,function Bd(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Symbol.iterator]();let h;for(;!(h=c.next()).done;)o(h.value)}}(o,M=>{C=this._trackByFn(g,M),null!==c&&Object.is(c.trackById,C)?(h&&(c=this._verifyReinsertion(c,M,C,g)),Object.is(c.item,M)||this._addIdentityChange(c,M)):(c=this._mismatch(c,M,C,g),h=!0),c=c._next,g++}),this.length=g;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,h,g){let y;return null===o?y=this._itTail:(y=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,y,g)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(h,g))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,y,g)):o=this._addAfter(new cD(c,h),y,g),o}_verifyReinsertion(o,c,h,g){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?o=this._reinsertAfter(y,o._prev,g):o.currentIndex!=g&&(o.currentIndex=g,this._addToMoves(o,g)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const g=o._prevRemoved,y=o._nextRemoved;return null===g?this._removalsHead=y:g._nextRemoved=y,null===y?this._removalsTail=g:y._prevRemoved=g,this._insertAfter(o,c,h),this._addToMoves(o,h),o}_moveAfter(o,c,h){return this._unlink(o),this._insertAfter(o,c,h),this._addToMoves(o,h),o}_addAfter(o,c,h){return this._insertAfter(o,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,h){const g=null===c?this._itHead:c._next;return o._next=g,o._prev=c,null===g?this._itTail=o:g._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new sw),this._linkedRecords.put(o),o.currentIndex=h,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,h=o._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class cD{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,o))return h;return null}remove(o){const c=o._prevDup,h=o._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class sw{constructor(){this.map=new Map}put(o){const c=o.trackById;let h=this.map.get(c);h||(h=new dD,this.map.set(c,h)),h.add(o)}get(o,c){const g=this.map.get(o);return g?g.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function r(s,o,c){const h=s.previousIndex;if(null===h)return h;let g=0;return c&&h<c.length&&(g=c[h]),h+o+g}class i{constructor(){}supports(o){return o instanceof Map||Vd(o)}create(){return new t}}class t{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||Vd(o)))throw new tt(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(h,g)=>{if(c&&c.key===g)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const y=this._getOrCreateRecordForKey(g,h);c=this._insertBeforeOrAppend(c,y)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const h=o._prev;return c._next=o,c._prev=h,o._prev=c,h&&(h._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const g=this._records.get(o);this._maybeAddToChanges(g,c);const y=g._prev,C=g._next;return y&&(y._next=C),C&&(C._prev=y),g._next=null,g._prev=null,g}const h=new l(o);return this._records.set(o,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(h=>c(o[h],h))}}class l{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function d(){return new m([new iw])}let m=(()=>{class s{constructor(c){this.factories=c}static create(c,h){if(null!=h){const g=h.factories.slice();c=c.concat(g)}return new s(c)}static extend(c){return{provide:s,useFactory:h=>s.create(c,h||d()),deps:[[s,new ee,new U]]}}find(c){const h=this.factories.find(g=>g.supports(c));if(null!=h)return h;throw new tt(901,!1)}}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:d}),s})();function k(){return new V([new i])}let V=(()=>{class s{constructor(c){this.factories=c}static create(c,h){if(h){const g=h.factories.slice();c=c.concat(g)}return new s(c)}static extend(c){return{provide:s,useFactory:h=>s.create(c,h||k()),deps:[[s,new ee,new U]]}}find(c){const h=this.factories.find(g=>g.supports(c));if(h)return h;throw new tt(901,!1)}}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:k}),s})();const Je=KE(null,"core",[]);let kt=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Lt(d0))},s.\u0275mod=_s({type:s}),s.\u0275inj=Un({}),s})();function Yt(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function io(s,o){const c=Zn(s),h=o.elementInjector||wd();return new Ld(c).create(h,o.projectableNodes,o.hostElement,o.environmentInjector)}},433:(sn,qe,G)=>{G.d(qe,{Fj:()=>mt,NI:()=>vs,u:()=>ol,cw:()=>st,sg:()=>na,u5:()=>Mo,Cf:()=>Se,JU:()=>_t,JJ:()=>Kr,JL:()=>In,UX:()=>Oa,kI:()=>ft,_Y:()=>Ar});var b=G(4650),Z=G(6895),p=G(8996),Ie=G(9751),Pe=G(4742),xe=G(8421),He=G(3269),Le=G(5403),Ae=G(3268),be=G(1810),ke=G(4004);let et=(()=>{class j{constructor(F,oe){this._renderer=F,this._elementRef=oe,this.onChange=ct=>{},this.onTouched=()=>{}}setProperty(F,oe){this._renderer.setProperty(this._elementRef.nativeElement,F,oe)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return j.\u0275fac=function(F){return new(F||j)(b.Y36(b.Qsj),b.Y36(b.SBq))},j.\u0275dir=b.lG2({type:j}),j})(),Ke=(()=>{class j extends et{}return j.\u0275fac=function(){let R;return function(oe){return(R||(R=b.n5z(j)))(oe||j)}}(),j.\u0275dir=b.lG2({type:j,features:[b.qOj]}),j})();const _t=new b.OlP("NgValueAccessor"),gt={provide:_t,useExisting:(0,b.Gpc)(()=>mt),multi:!0},yt=new b.OlP("CompositionEventMode");let mt=(()=>{class j extends et{constructor(F,oe,ct){super(F,oe),this._compositionMode=ct,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function we(){const j=(0,Z.q)()?(0,Z.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(F){this.setProperty("value",F??"")}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return j.\u0275fac=function(F){return new(F||j)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(yt,8))},j.\u0275dir=b.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,oe){1&F&&b.NdJ("input",function(ln){return oe._handleInput(ln.target.value)})("blur",function(){return oe.onTouched()})("compositionstart",function(){return oe._compositionStart()})("compositionend",function(ln){return oe._compositionEnd(ln.target.value)})},features:[b._Bn([gt]),b.qOj]}),j})();const ot=!1;function ze(j){return null==j||("string"==typeof j||Array.isArray(j))&&0===j.length}function Ft(j){return null!=j&&"number"==typeof j.length}const Se=new b.OlP("NgValidators"),Te=new b.OlP("NgAsyncValidators"),We=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ft{static min(R){return function wt(j){return R=>{if(ze(R.value)||ze(j))return null;const F=parseFloat(R.value);return!isNaN(F)&&F<j?{min:{min:j,actual:R.value}}:null}}(R)}static max(R){return function Qt(j){return R=>{if(ze(R.value)||ze(j))return null;const F=parseFloat(R.value);return!isNaN(F)&&F>j?{max:{max:j,actual:R.value}}:null}}(R)}static required(R){return function jt(j){return ze(j.value)?{required:!0}:null}(R)}static requiredTrue(R){return function $e(j){return!0===j.value?null:{required:!0}}(R)}static email(R){return function ut(j){return ze(j.value)||We.test(j.value)?null:{email:!0}}(R)}static minLength(R){return function Qe(j){return R=>ze(R.value)||!Ft(R.value)?null:R.value.length<j?{minlength:{requiredLength:j,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function dt(j){return R=>Ft(R.value)&&R.value.length>j?{maxlength:{requiredLength:j,actualLength:R.value.length}}:null}(R)}static pattern(R){return function vt(j){if(!j)return ht;let R,F;return"string"==typeof j?(F="","^"!==j.charAt(0)&&(F+="^"),F+=j,"$"!==j.charAt(j.length-1)&&(F+="$"),R=new RegExp(F)):(F=j.toString(),R=j),oe=>{if(ze(oe.value))return null;const ct=oe.value;return R.test(ct)?null:{pattern:{requiredPattern:F,actualValue:ct}}}}(R)}static nullValidator(R){return null}static compose(R){return Nn(R)}static composeAsync(R){return Hn(R)}}function ht(j){return null}function Bt(j){return null!=j}function At(j){const R=(0,b.QGY)(j)?(0,p.D)(j):j;if(ot&&!(0,b.CqO)(R)){let F="Expected async validator to return Promise or Observable.";throw"object"==typeof j&&(F+=" Are you using a synchronous validator where an async validator is expected?"),new b.vHH(-1101,F)}return R}function hn(j){let R={};return j.forEach(F=>{R=null!=F?{...R,...F}:R}),0===Object.keys(R).length?null:R}function Kt(j,R){return R.map(F=>F(j))}function Tt(j){return j.map(R=>function nn(j){return!j.validate}(R)?R:F=>R.validate(F))}function Nn(j){if(!j)return null;const R=j.filter(Bt);return 0==R.length?null:function(F){return hn(Kt(F,R))}}function Un(j){return null!=j?Nn(Tt(j)):null}function Hn(j){if(!j)return null;const R=j.filter(Bt);return 0==R.length?null:function(F){return function ve(...j){const R=(0,He.jO)(j),{args:F,keys:oe}=(0,Pe.D)(j),ct=new Ie.y(ln=>{const{length:jr}=F;if(!jr)return void ln.complete();const Li=new Array(jr);let Ri=jr,so=jr;for(let oo=0;oo<jr;oo++){let Vs=!1;(0,xe.Xf)(F[oo]).subscribe((0,Le.x)(ln,Na=>{Vs||(Vs=!0,so--),Li[oo]=Na},()=>Ri--,void 0,()=>{(!Ri||!Vs)&&(so||ln.next(oe?(0,be.n)(oe,Li):Li),ln.complete())}))}});return R?ct.pipe((0,Ae.Z)(R)):ct}(Kt(F,R).map(At)).pipe((0,ke.U)(hn))}}function jn(j){return null!=j?Hn(Tt(j)):null}function Lr(j,R){return null===j?[R]:Array.isArray(j)?[...j,R]:[j,R]}function zn(j){return j._rawValidators}function Bn(j){return j._rawAsyncValidators}function kn(j){return j?Array.isArray(j)?j:[j]:[]}function Yn(j,R){return Array.isArray(j)?j.includes(R):j===R}function tr(j,R){const F=kn(R);return kn(j).forEach(ct=>{Yn(F,ct)||F.push(ct)}),F}function un(j,R){return kn(R).filter(F=>!Yn(j,F))}class On{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=Un(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=jn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,F){return!!this.control&&this.control.hasError(R,F)}getError(R,F){return this.control?this.control.getError(R,F):null}}class Pt extends On{get formDirective(){return null}get path(){return null}}class vr extends On{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ti{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kr=(()=>{class j extends ti{constructor(F){super(F)}}return j.\u0275fac=function(F){return new(F||j)(b.Y36(vr,2))},j.\u0275dir=b.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,oe){2&F&&b.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)},features:[b.qOj]}),j})(),In=(()=>{class j extends ti{constructor(F){super(F)}}return j.\u0275fac=function(F){return new(F||j)(b.Y36(Pt,10))},j.\u0275dir=b.lG2({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,oe){2&F&&b.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)("ng-submitted",oe.isSubmitted)},features:[b.qOj]}),j})();function Lt(j,R){return j?`with name: '${R}'`:`at index: ${R}`}const De=!1,pt="VALID",bt="INVALID",he="PENDING",fe="DISABLED";function te(j){return(de(j)?j.validators:j)||null}function X(j,R){return(de(R)?R.asyncValidators:j)||null}function de(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}class Re{constructor(R,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(F)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===pt}get invalid(){return this.status===bt}get pending(){return this.status==he}get disabled(){return this.status===fe}get enabled(){return this.status!==fe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(tr(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(tr(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(un(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(un(R,this._rawAsyncValidators))}hasValidator(R){return Yn(this._rawValidators,R)}hasAsyncValidator(R){return Yn(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=he,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const F=this._parentMarkedDirty(R.onlySelf);this.status=fe,this.errors=null,this._forEachChild(oe=>{oe.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:F}),this._onDisabledChange.forEach(oe=>oe(!0))}enable(R={}){const F=this._parentMarkedDirty(R.onlySelf);this.status=pt,this._forEachChild(oe=>{oe.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:F}),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pt||this.status===he)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fe:pt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=he,this._hasOwnPendingAsyncValidator=!0;const F=At(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,F={}){this.errors=R,this._updateControlsErrors(!1!==F.emitEvent)}get(R){let F=R;return null==F||(Array.isArray(F)||(F=F.split(".")),0===F.length)?null:F.reduce((oe,ct)=>oe&&oe._find(ct),this)}getError(R,F){const oe=F?this.get(F):this;return oe&&oe.errors?oe.errors[R]:null}hasError(R,F){return!!this.getError(R,F)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?fe:this.errors?bt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(he)?he:this._anyControlsHaveStatus(bt)?bt:pt}_anyControlsHaveStatus(R){return this._anyControls(F=>F.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){de(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function ie(j){return Array.isArray(j)?Un(j):j||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function Ve(j){return Array.isArray(j)?jn(j):j||null}(this._rawAsyncValidators)}}class st extends Re{constructor(R,F,oe){super(te(F),X(oe,F)),this.controls=R,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,F){return this.controls[R]?this.controls[R]:(this.controls[R]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(R,F,oe={}){this.registerControl(R,F),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(R,F={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(R,F,oe={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],F&&this.registerControl(R,F),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,F={}){(function le(j,R,F){j._forEachChild((oe,ct)=>{if(void 0===F[ct])throw new b.vHH(1002,De?function me(j,R){return`Must supply a value for form control ${Lt(j,R)}`}(R,ct):"")})})(this,!0,R),Object.keys(R).forEach(oe=>{(function ge(j,R,F){const oe=j.controls;if(!(R?Object.keys(oe):oe).length)throw new b.vHH(1e3,De?function Et(j){return`\n    There are no form controls registered with this ${j?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(R):"");if(!oe[F])throw new b.vHH(1001,De?function Fe(j,R){return`Cannot find form control ${Lt(j,R)}`}(R,F):"")})(this,!0,oe),this.controls[oe].setValue(R[oe],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(R,F={}){null!=R&&(Object.keys(R).forEach(oe=>{const ct=this.controls[oe];ct&&ct.patchValue(R[oe],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(R={},F={}){this._forEachChild((oe,ct)=>{oe.reset(R[ct],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(R,F,oe)=>(R[oe]=F.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(F,oe)=>!!oe._syncPendingControls()||F);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(F=>{const oe=this.controls[F];oe&&R(oe,F)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[F,oe]of Object.entries(this.controls))if(this.contains(F)&&R(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(F,oe,ct)=>((oe.enabled||this.disabled)&&(F[ct]=oe.value),F))}_reduceChildren(R,F){let oe=R;return this._forEachChild((ct,ln)=>{oe=F(oe,ct,ln)}),oe}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}const Ci=new b.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Qr}),Qr="always";function _s(j,R,F=Qr){ts(j,R),R.valueAccessor.writeValue(j.value),(j.disabled||"always"===F)&&R.valueAccessor.setDisabledState?.(j.disabled),function Yr(j,R){R.valueAccessor.registerOnChange(F=>{j._pendingValue=F,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&Xr(j,R)})}(j,R),function ns(j,R){const F=(oe,ct)=>{R.valueAccessor.writeValue(oe),ct&&R.viewToModelUpdate(oe)};j.registerOnChange(F),R._registerOnDestroy(()=>{j._unregisterOnChange(F)})}(j,R),function ri(j,R){R.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&Xr(j,R),"submit"!==j.updateOn&&j.markAsTouched()})}(j,R),function Ps(j,R){if(R.valueAccessor.setDisabledState){const F=oe=>{R.valueAccessor.setDisabledState(oe)};j.registerOnDisabledChange(F),R._registerOnDestroy(()=>{j._unregisterOnDisabledChange(F)})}}(j,R)}function Cr(j,R,F=!0){const oe=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(oe),R.valueAccessor.registerOnTouched(oe)),Zn(j,R),j&&(R._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function Wi(j,R){j.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(R)})}function ts(j,R){const F=zn(j);null!==R.validator?j.setValidators(Lr(F,R.validator)):"function"==typeof F&&j.setValidators([F]);const oe=Bn(j);null!==R.asyncValidator?j.setAsyncValidators(Lr(oe,R.asyncValidator)):"function"==typeof oe&&j.setAsyncValidators([oe]);const ct=()=>j.updateValueAndValidity();Wi(R._rawValidators,ct),Wi(R._rawAsyncValidators,ct)}function Zn(j,R){let F=!1;if(null!==j){if(null!==R.validator){const ct=zn(j);if(Array.isArray(ct)&&ct.length>0){const ln=ct.filter(jr=>jr!==R.validator);ln.length!==ct.length&&(F=!0,j.setValidators(ln))}}if(null!==R.asyncValidator){const ct=Bn(j);if(Array.isArray(ct)&&ct.length>0){const ln=ct.filter(jr=>jr!==R.asyncValidator);ln.length!==ct.length&&(F=!0,j.setAsyncValidators(ln))}}}const oe=()=>{};return Wi(R._rawValidators,oe),Wi(R._rawAsyncValidators,oe),F}function Xr(j,R){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function ys(j,R){const F=j.indexOf(R);F>-1&&j.splice(F,1)}function zs(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const vs=class extends Re{constructor(R=null,F,oe){super(te(F),X(oe,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),de(F)&&(F.nonNullable||F.initialValueIsDefault)&&(this.defaultValue=zs(R)?R.value:R)}setValue(R,F={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(R,F={}){this.setValue(R,F)}reset(R=this.defaultValue,F={}){this._applyFormState(R),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){ys(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){ys(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){zs(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}};let Ar=(()=>{class j{}return j.\u0275fac=function(F){return new(F||j)},j.\u0275dir=b.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),j})(),Ls=(()=>{class j{}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({}),j})();const Zi=new b.OlP("NgModelWithFormControlWarning"),ta={provide:Pt,useExisting:(0,b.Gpc)(()=>na)};let na=(()=>{class j extends Pt{constructor(F,oe,ct){super(),this.callSetDisabledState=ct,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new b.vpe,this._setValidators(F),this._setAsyncValidators(oe)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const oe=this.form.get(F.path);return _s(oe,F,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),oe}getControl(F){return this.form.get(F.path)}removeControl(F){Cr(F.control||null,F,!1),function ii(j,R){const F=j.indexOf(R);F>-1&&j.splice(F,1)}(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,oe){this.form.get(F.path).setValue(oe)}onSubmit(F){return this.submitted=!0,function Mr(j,R){j._syncPendingControls(),R.forEach(F=>{const oe=F.control;"submit"===oe.updateOn&&oe._pendingChange&&(F.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),"dialog"===F?.target?.method}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const oe=F.control,ct=this.form.get(F.path);oe!==ct&&(Cr(oe||null,F),(j=>j instanceof vs)(ct)&&(_s(ct,F,this.callSetDisabledState),F.control=ct))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const oe=this.form.get(F.path);(function Tr(j,R){ts(j,R)})(oe,F),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const oe=this.form.get(F.path);oe&&function ks(j,R){return Zn(j,R)}(oe,F)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ts(this.form,this),this._oldForm&&Zn(this._oldForm,this)}_checkFormPresent(){}}return j.\u0275fac=function(F){return new(F||j)(b.Y36(Se,10),b.Y36(Te,10),b.Y36(Ci,8))},j.\u0275dir=b.lG2({type:j,selectors:[["","formGroup",""]],hostBindings:function(F,oe){1&F&&b.NdJ("submit",function(ln){return oe.onSubmit(ln)})("reset",function(){return oe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([ta]),b.qOj,b.TTD]}),j})();const Ys={provide:vr,useExisting:(0,b.Gpc)(()=>ol)};let ol=(()=>{class j extends vr{set isDisabled(F){}constructor(F,oe,ct,ln,jr){super(),this._ngModelWarningConfig=jr,this._added=!1,this.update=new b.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(oe),this._setAsyncValidators(ct),this.valueAccessor=function Zr(j,R){if(!R)return null;let F,oe,ct;return Array.isArray(R),R.forEach(ln=>{ln.constructor===mt?F=ln:function ji(j){return Object.getPrototypeOf(j.constructor)===Ke}(ln)?oe=ln:ct=ln}),ct||oe||F||null}(0,ln)}ngOnChanges(F){this._added||this._setUpControl(),function pi(j,R){if(!j.hasOwnProperty("model"))return!1;const F=j.model;return!!F.isFirstChange()||!Object.is(R,F.currentValue)}(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return function es(j,R){return[...R.path,j]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return j._ngModelWarningSentOnce=!1,j.\u0275fac=function(F){return new(F||j)(b.Y36(Pt,13),b.Y36(Se,10),b.Y36(Te,10),b.Y36(_t,10),b.Y36(Zi,8))},j.\u0275dir=b.lG2({type:j,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[b._Bn([Ys]),b.qOj,b.TTD]}),j})(),Ji=(()=>{class j{}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({imports:[Ls]}),j})(),Mo=(()=>{class j{static withConfig(F){return{ngModule:j,providers:[{provide:Ci,useValue:F.callSetDisabledState??Qr}]}}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({imports:[Ji]}),j})(),Oa=(()=>{class j{static withConfig(F){return{ngModule:j,providers:[{provide:Zi,useValue:F.warnOnNgModelWithFormControl??"always"},{provide:Ci,useValue:F.callSetDisabledState??Qr}]}}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({imports:[Ji]}),j})()},1481:(sn,qe,G)=>{G.d(qe,{Dx:()=>In,b2:()=>vr,q6:()=>tr});var b=G(6895),Z=G(4650);class p extends b.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ie extends p{static makeCurrent(){(0,b.HT)(new Ie)}onAndCancel(ge,le,Re){return ge.addEventListener(le,Re,!1),()=>{ge.removeEventListener(le,Re,!1)}}dispatchEvent(ge,le){ge.dispatchEvent(le)}remove(ge){ge.parentNode&&ge.parentNode.removeChild(ge)}createElement(ge,le){return(le=le||this.getDefaultDocument()).createElement(ge)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ge){return ge.nodeType===Node.ELEMENT_NODE}isShadowRoot(ge){return ge instanceof DocumentFragment}getGlobalEventTarget(ge,le){return"window"===le?window:"document"===le?ge:"body"===le?ge.body:null}getBaseHref(ge){const le=function xe(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==le?null:function Le(de){He=He||document.createElement("a"),He.setAttribute("href",de);const ge=He.pathname;return"/"===ge.charAt(0)?ge:`/${ge}`}(le)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ge){return(0,b.Mx)(document.cookie,ge)}}let He,Pe=null;const Ae=new Z.OlP("TRANSITION_ID"),ve=[{provide:Z.ip1,useFactory:function be(de,ge,le){return()=>{le.get(Z.CZH).donePromise.then(()=>{const Re=(0,b.q)(),st=ge.querySelectorAll(`style[ng-transition="${de}"]`);for(let Ct=0;Ct<st.length;Ct++)Re.remove(st[Ct])})}},deps:[Ae,b.K0,Z.zs3],multi:!0}];let et=(()=>{class de{build(){return new XMLHttpRequest}}return de.\u0275fac=function(le){return new(le||de)},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})();const Ke=new Z.OlP("EventManagerPlugins");let _t=(()=>{class de{constructor(le,Re){this._zone=Re,this._eventNameToPlugin=new Map,le.forEach(st=>{st.manager=this}),this._plugins=le.slice().reverse()}addEventListener(le,Re,st){return this._findPluginFor(Re).addEventListener(le,Re,st)}addGlobalEventListener(le,Re,st){return this._findPluginFor(Re).addGlobalEventListener(le,Re,st)}getZone(){return this._zone}_findPluginFor(le){const Re=this._eventNameToPlugin.get(le);if(Re)return Re;const st=this._plugins;for(let Ct=0;Ct<st.length;Ct++){const zt=st[Ct];if(zt.supports(le))return this._eventNameToPlugin.set(le,zt),zt}throw new Error(`No event manager plugin found for event ${le}`)}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(Ke),Z.LFG(Z.R0b))},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})();class xt{constructor(ge){this._doc=ge}addGlobalEventListener(ge,le,Re){const st=(0,b.q)().getGlobalEventTarget(this._doc,ge);if(!st)throw new Error(`Unsupported event target ${st} for event ${le}`);return this.addEventListener(st,le,Re)}}let tt=(()=>{class de{constructor(){this.usageCount=new Map}addStyles(le){for(const Re of le)1===this.changeUsageCount(Re,1)&&this.onStyleAdded(Re)}removeStyles(le){for(const Re of le)0===this.changeUsageCount(Re,-1)&&this.onStyleRemoved(Re)}onStyleRemoved(le){}onStyleAdded(le){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(le,Re){const st=this.usageCount;let Ct=st.get(le)??0;return Ct+=Re,Ct>0?st.set(le,Ct):st.delete(le),Ct}ngOnDestroy(){for(const le of this.getAllStyles())this.onStyleRemoved(le);this.usageCount.clear()}}return de.\u0275fac=function(le){return new(le||de)},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})(),gt=(()=>{class de extends tt{constructor(le){super(),this.doc=le,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(le){for(const Re of this.hostNodes)this.addStyleToHost(Re,le)}onStyleRemoved(le){const Re=this.styleRef;Re.get(le)?.forEach(Ct=>Ct.remove()),Re.delete(le)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(le){this.hostNodes.add(le);for(const Re of this.getAllStyles())this.addStyleToHost(le,Re)}removeHost(le){this.hostNodes.delete(le)}addStyleToHost(le,Re){const st=this.doc.createElement("style");st.textContent=Re,le.appendChild(st);const Ct=this.styleRef.get(Re);Ct?Ct.push(st):this.styleRef.set(Re,[st])}resetHostNodes(){const le=this.hostNodes;le.clear(),le.add(this.doc.head)}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(b.K0))},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})();const we={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yt=/%COMP%/g,Te=new Z.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function wt(de,ge){return ge.flat(100).map(le=>le.replace(yt,de))}function Qt(de){return ge=>{if("__ngUnwrap__"===ge)return de;!1===de(ge)&&(ge.preventDefault(),ge.returnValue=!1)}}let jt=(()=>{class de{constructor(le,Re,st,Ct){this.eventManager=le,this.sharedStylesHost=Re,this.appId=st,this.removeStylesOnCompDestory=Ct,this.rendererByCompId=new Map,this.defaultRenderer=new $e(le)}createRenderer(le,Re){if(!le||!Re)return this.defaultRenderer;const st=this.getOrCreateRenderer(le,Re);return st instanceof Bt?st.applyToHost(le):st instanceof ht&&st.applyStyles(),st}getOrCreateRenderer(le,Re){const st=this.rendererByCompId;let Ct=st.get(Re.id);if(!Ct){const zt=this.eventManager,Ht=this.sharedStylesHost,En=this.removeStylesOnCompDestory;switch(Re.encapsulation){case Z.ifc.Emulated:Ct=new Bt(zt,Ht,Re,this.appId,En);break;case Z.ifc.ShadowDom:return new vt(zt,Ht,le,Re);default:Ct=new ht(zt,Ht,Re,En)}Ct.onDestroy=()=>st.delete(Re.id),st.set(Re.id,Ct)}return Ct}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(_t),Z.LFG(gt),Z.LFG(Z.AFp),Z.LFG(Te))},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})();class $e{constructor(ge){this.eventManager=ge,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ge,le){return le?document.createElementNS(we[le]||le,ge):document.createElement(ge)}createComment(ge){return document.createComment(ge)}createText(ge){return document.createTextNode(ge)}appendChild(ge,le){(dt(ge)?ge.content:ge).appendChild(le)}insertBefore(ge,le,Re){ge&&(dt(ge)?ge.content:ge).insertBefore(le,Re)}removeChild(ge,le){ge&&ge.removeChild(le)}selectRootElement(ge,le){let Re="string"==typeof ge?document.querySelector(ge):ge;if(!Re)throw new Error(`The selector "${ge}" did not match any elements`);return le||(Re.textContent=""),Re}parentNode(ge){return ge.parentNode}nextSibling(ge){return ge.nextSibling}setAttribute(ge,le,Re,st){if(st){le=st+":"+le;const Ct=we[st];Ct?ge.setAttributeNS(Ct,le,Re):ge.setAttribute(le,Re)}else ge.setAttribute(le,Re)}removeAttribute(ge,le,Re){if(Re){const st=we[Re];st?ge.removeAttributeNS(st,le):ge.removeAttribute(`${Re}:${le}`)}else ge.removeAttribute(le)}addClass(ge,le){ge.classList.add(le)}removeClass(ge,le){ge.classList.remove(le)}setStyle(ge,le,Re,st){st&(Z.JOm.DashCase|Z.JOm.Important)?ge.style.setProperty(le,Re,st&Z.JOm.Important?"important":""):ge.style[le]=Re}removeStyle(ge,le,Re){Re&Z.JOm.DashCase?ge.style.removeProperty(le):ge.style[le]=""}setProperty(ge,le,Re){ge[le]=Re}setValue(ge,le){ge.nodeValue=le}listen(ge,le,Re){return"string"==typeof ge?this.eventManager.addGlobalEventListener(ge,le,Qt(Re)):this.eventManager.addEventListener(ge,le,Qt(Re))}}function dt(de){return"TEMPLATE"===de.tagName&&void 0!==de.content}class vt extends $e{constructor(ge,le,Re,st){super(ge),this.sharedStylesHost=le,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ct=wt(st.id,st.styles);for(const zt of Ct){const Ht=document.createElement("style");Ht.textContent=zt,this.shadowRoot.appendChild(Ht)}}nodeOrShadowRoot(ge){return ge===this.hostEl?this.shadowRoot:ge}appendChild(ge,le){return super.appendChild(this.nodeOrShadowRoot(ge),le)}insertBefore(ge,le,Re){return super.insertBefore(this.nodeOrShadowRoot(ge),le,Re)}removeChild(ge,le){return super.removeChild(this.nodeOrShadowRoot(ge),le)}parentNode(ge){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ge)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ht extends $e{constructor(ge,le,Re,st,Ct=Re.id){super(ge),this.sharedStylesHost=le,this.removeStylesOnCompDestory=st,this.rendererUsageCount=0,this.styles=wt(Ct,Re.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Bt extends ht{constructor(ge,le,Re,st,Ct){const zt=st+"-"+Re.id;super(ge,le,Re,Ct,zt),this.contentAttr=function We(de){return"_ngcontent-%COMP%".replace(yt,de)}(zt),this.hostAttr=function ft(de){return"_nghost-%COMP%".replace(yt,de)}(zt)}applyToHost(ge){this.applyStyles(),this.setAttribute(ge,this.hostAttr,"")}createElement(ge,le){const Re=super.createElement(ge,le);return super.setAttribute(Re,this.contentAttr,""),Re}}let At=(()=>{class de extends xt{constructor(le){super(le)}supports(le){return!0}addEventListener(le,Re,st){return le.addEventListener(Re,st,!1),()=>this.removeEventListener(le,Re,st)}removeEventListener(le,Re,st){return le.removeEventListener(Re,st)}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(b.K0))},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})();const hn=["alt","control","meta","shift"],Kt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nn={alt:de=>de.altKey,control:de=>de.ctrlKey,meta:de=>de.metaKey,shift:de=>de.shiftKey};let Tt=(()=>{class de extends xt{constructor(le){super(le)}supports(le){return null!=de.parseEventName(le)}addEventListener(le,Re,st){const Ct=de.parseEventName(Re),zt=de.eventCallback(Ct.fullKey,st,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,b.q)().onAndCancel(le,Ct.domEventName,zt))}static parseEventName(le){const Re=le.toLowerCase().split("."),st=Re.shift();if(0===Re.length||"keydown"!==st&&"keyup"!==st)return null;const Ct=de._normalizeKey(Re.pop());let zt="",Ht=Re.indexOf("code");if(Ht>-1&&(Re.splice(Ht,1),zt="code."),hn.forEach(Ci=>{const Qr=Re.indexOf(Ci);Qr>-1&&(Re.splice(Qr,1),zt+=Ci+".")}),zt+=Ct,0!=Re.length||0===Ct.length)return null;const En={};return En.domEventName=st,En.fullKey=zt,En}static matchEventFullKeyCode(le,Re){let st=Kt[le.key]||le.key,Ct="";return Re.indexOf("code.")>-1&&(st=le.code,Ct="code."),!(null==st||!st)&&(st=st.toLowerCase()," "===st?st="space":"."===st&&(st="dot"),hn.forEach(zt=>{zt!==st&&(0,nn[zt])(le)&&(Ct+=zt+".")}),Ct+=st,Ct===Re)}static eventCallback(le,Re,st){return Ct=>{de.matchEventFullKeyCode(Ct,le)&&st.runGuarded(()=>Re(Ct))}}static _normalizeKey(le){return"esc"===le?"escape":le}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(b.K0))},de.\u0275prov=Z.Yz7({token:de,factory:de.\u0275fac}),de})();const tr=(0,Z.eFA)(Z._c5,"browser",[{provide:Z.Lbi,useValue:b.bD},{provide:Z.g9A,useValue:function zn(){Ie.makeCurrent()},multi:!0},{provide:b.K0,useFactory:function kn(){return(0,Z.RDi)(document),document},deps:[]}]),un=new Z.OlP(""),On=[{provide:Z.rWj,useClass:class ke{addToWindow(ge){Z.dqk.getAngularTestability=(Re,st=!0)=>{const Ct=ge.findTestabilityInTree(Re,st);if(null==Ct)throw new Error("Could not find testability for element.");return Ct},Z.dqk.getAllAngularTestabilities=()=>ge.getAllTestabilities(),Z.dqk.getAllAngularRootElements=()=>ge.getAllRootElements(),Z.dqk.frameworkStabilizers||(Z.dqk.frameworkStabilizers=[]),Z.dqk.frameworkStabilizers.push(Re=>{const st=Z.dqk.getAllAngularTestabilities();let Ct=st.length,zt=!1;const Ht=function(En){zt=zt||En,Ct--,0==Ct&&Re(zt)};st.forEach(function(En){En.whenStable(Ht)})})}findTestabilityInTree(ge,le,Re){return null==le?null:ge.getTestability(le)??(Re?(0,b.q)().isShadowRoot(le)?this.findTestabilityInTree(ge,le.host,!0):this.findTestabilityInTree(ge,le.parentElement,!0):null)}},deps:[]},{provide:Z.lri,useClass:Z.dDg,deps:[Z.R0b,Z.eoX,Z.rWj]},{provide:Z.dDg,useClass:Z.dDg,deps:[Z.R0b,Z.eoX,Z.rWj]}],Pt=[{provide:Z.zSh,useValue:"root"},{provide:Z.qLn,useFactory:function Bn(){return new Z.qLn},deps:[]},{provide:Ke,useClass:At,multi:!0,deps:[b.K0,Z.R0b,Z.Lbi]},{provide:Ke,useClass:Tt,multi:!0,deps:[b.K0]},{provide:jt,useClass:jt,deps:[_t,gt,Z.AFp,Te]},{provide:Z.FYo,useExisting:jt},{provide:tt,useExisting:gt},{provide:gt,useClass:gt,deps:[b.K0]},{provide:_t,useClass:_t,deps:[Ke,Z.R0b]},{provide:b.JF,useClass:et,deps:[]},[]];let vr=(()=>{class de{constructor(le){}static withServerTransition(le){return{ngModule:de,providers:[{provide:Z.AFp,useValue:le.appId},{provide:Ae,useExisting:Z.AFp},ve]}}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(un,12))},de.\u0275mod=Z.oAB({type:de}),de.\u0275inj=Z.cJS({providers:[...Pt,...On],imports:[b.ez,Z.hGG]}),de})(),In=(()=>{class de{constructor(le){this._doc=le}getTitle(){return this._doc.title}setTitle(le){this._doc.title=le||""}}return de.\u0275fac=function(le){return new(le||de)(Z.LFG(b.K0))},de.\u0275prov=Z.Yz7({token:de,factory:function(le){let Re=null;return Re=le?new le:function Kr(){return new In((0,Z.LFG)(b.K0))}(),Re},providedIn:"root"}),de})();typeof window<"u"&&window},4629:(sn,qe,G)=>{G.d(qe,{F0:()=>dr,rH:()=>qa,Bz:()=>Pl,lC:()=>Js});var b=G(4650),Z=G(8996),p=G(9646),Ie=G(1135),Pe=G(6805),xe=G(9841),He=G(7272),Le=G(9751),Ae=G(8421);function be(T){return new Le.y(S=>{(0,Ae.Xf)(T()).subscribe(S)})}var ve=G(9635),ke=G(576);function et(T,S){const D=(0,ke.m)(T)?T:()=>T,x=$=>$.error(D());return new Le.y(S?$=>S.schedule(x,0,$):x)}var Ke=G(515),_t=G(727),xt=G(4482),tt=G(5403);function gt(){return(0,xt.e)((T,S)=>{let D=null;T._refCount++;const x=(0,tt.x)(S,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(D=null);const $=T._connection,J=D;D=null,$&&(!J||$===J)&&$.unsubscribe(),S.unsubscribe()});T.subscribe(x),x.closed||(D=T.connect())})}class we extends Le.y{constructor(S,D){super(),this.source=S,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,xt.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new _t.w0;const D=this.getSubject();S.add(this.source.subscribe((0,tt.x)(D,void 0,()=>{this._teardown(),D.complete()},x=>{this._teardown(),D.error(x)},()=>this._teardown()))),S.closed&&(this._connection=null,S=_t.w0.EMPTY)}return S}refCount(){return gt()(this)}}var yt=G(7579),mt=G(6895),ot=G(4004),ze=G(3900),Ft=G(5698),Se=G(8675),Te=G(9300),We=G(5577),ft=G(590),wt=G(4351),Qt=G(8505);function jt(T){return(0,xt.e)((S,D)=>{let J,x=null,$=!1;x=S.subscribe((0,tt.x)(D,void 0,void 0,se=>{J=(0,Ae.Xf)(T(se,jt(T)(S))),x?(x.unsubscribe(),x=null,J.subscribe(D)):$=!0})),$&&(x.unsubscribe(),x=null,J.subscribe(D))})}var $e=G(5026);function ut(T){return T<=0?()=>Ke.E:(0,xt.e)((S,D)=>{let x=[];S.subscribe((0,tt.x)(D,$=>{x.push($),T<x.length&&x.shift()},()=>{for(const $ of x)D.next($);D.complete()},void 0,()=>{x=null}))})}var Qe=G(8068),dt=G(6590),vt=G(4671);function ht(T,S){const D=arguments.length>=2;return x=>x.pipe(T?(0,Te.h)(($,J)=>T($,J,x)):vt.y,ut(1),D?(0,dt.d)(S):(0,Qe.T)(()=>new Pe.K))}var At=G(9718);function hn(T){return(0,xt.e)((S,D)=>{try{S.subscribe(D)}finally{D.add(T)}})}var Kt=G(8189),nn=G(1481);const Tt="primary",Nn=Symbol("RouteTitle");class Un{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D[0]:D}return null}getAll(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function Hn(T){return new Un(T)}function jn(T,S,D){const x=D.path.split("/");if(x.length>T.length||"full"===D.pathMatch&&(S.hasChildren()||x.length<T.length))return null;const $={};for(let J=0;J<x.length;J++){const se=x[J],Ue=T[J];if(se.startsWith(":"))$[se.substring(1)]=Ue;else if(se!==Ue.path)return null}return{consumed:T.slice(0,x.length),posParams:$}}function zn(T,S){const D=T?Object.keys(T):void 0,x=S?Object.keys(S):void 0;if(!D||!x||D.length!=x.length)return!1;let $;for(let J=0;J<D.length;J++)if($=D[J],!Bn(T[$],S[$]))return!1;return!0}function Bn(T,S){if(Array.isArray(T)&&Array.isArray(S)){if(T.length!==S.length)return!1;const D=[...T].sort(),x=[...S].sort();return D.every(($,J)=>x[J]===$)}return T===S}function kn(T){return Array.prototype.concat.apply([],T)}function Yn(T){return T.length>0?T[T.length-1]:null}function un(T,S){for(const D in T)T.hasOwnProperty(D)&&S(T[D],D)}function On(T){return(0,b.CqO)(T)?T:(0,b.QGY)(T)?(0,Z.D)(Promise.resolve(T)):(0,p.of)(T)}const Pt=!1,vr={exact:function Kr(T,S,D){if(!qr(T.segments,S.segments)||!Wn(T.segments,S.segments,D)||T.numberOfChildren!==S.numberOfChildren)return!1;for(const x in S.children)if(!T.children[x]||!Kr(T.children[x],S.children[x],D))return!1;return!0},subset:fn},ti={exact:function Wr(T,S){return zn(T,S)},subset:function In(T,S){return Object.keys(S).length<=Object.keys(T).length&&Object.keys(S).every(D=>Bn(T[D],S[D]))},ignored:()=>!0};function kr(T,S,D){return vr[D.paths](T.root,S.root,D.matrixParams)&&ti[D.queryParams](T.queryParams,S.queryParams)&&!("exact"===D.fragment&&T.fragment!==S.fragment)}function fn(T,S,D){return Zt(T,S,S.segments,D)}function Zt(T,S,D,x){if(T.segments.length>D.length){const $=T.segments.slice(0,D.length);return!(!qr($,D)||S.hasChildren()||!Wn($,D,x))}if(T.segments.length===D.length){if(!qr(T.segments,D)||!Wn(T.segments,D,x))return!1;for(const $ in S.children)if(!T.children[$]||!fn(T.children[$],S.children[$],x))return!1;return!0}{const $=D.slice(0,T.segments.length),J=D.slice(T.segments.length);return!!(qr(T.segments,$)&&Wn(T.segments,$,x)&&T.children[Tt])&&Zt(T.children[Tt],S,J,x)}}function Wn(T,S,D){return S.every((x,$)=>ti[D](T[$].parameters,x.parameters))}class nr{constructor(S=new gn([],{}),D={},x=null){this.root=S,this.queryParams=D,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return Ir.serialize(this)}}class gn{constructor(S,D){this.segments=S,this.children=D,this.parent=null,un(D,(x,$)=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return br(this)}}class rr{constructor(S,D){this.path=S,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return he(this)}}function qr(T,S){return T.length===S.length&&T.every((D,x)=>D.path===S[x].path)}let cr=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return new Sn},providedIn:"root"}),T})();class Sn{parse(S){const D=new Re(S);return new nr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(S){const D=`/${Lt(S.root,!0)}`,x=function te(T){const S=Object.keys(T).map(D=>{const x=T[D];return Array.isArray(x)?x.map($=>`${Fe(D)}=${Fe($)}`).join("&"):`${Fe(D)}=${Fe(x)}`}).filter(D=>!!D);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${D}${x}${"string"==typeof S.fragment?`#${function me(T){return encodeURI(T)}(S.fragment)}`:""}`}}const Ir=new Sn;function br(T){return T.segments.map(S=>he(S)).join("/")}function Lt(T,S){if(!T.hasChildren())return br(T);if(S){const D=T.children[Tt]?Lt(T.children[Tt],!1):"",x=[];return un(T.children,($,J)=>{J!==Tt&&x.push(`${J}:${Lt($,!1)}`)}),x.length>0?`${D}(${x.join("//")})`:D}{const D=function Cn(T,S){let D=[];return un(T.children,(x,$)=>{$===Tt&&(D=D.concat(S(x,$)))}),un(T.children,(x,$)=>{$!==Tt&&(D=D.concat(S(x,$)))}),D}(T,(x,$)=>$===Tt?[Lt(T.children[Tt],!1)]:[`${$}:${Lt(x,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Tt]?`${br(T)}/${D[0]}`:`${br(T)}/(${D.join("//")})`}}function Et(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fe(T){return Et(T).replace(/%3B/gi,";")}function De(T){return Et(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pt(T){return decodeURIComponent(T)}function bt(T){return pt(T.replace(/\+/g,"%20"))}function he(T){return`${De(T.path)}${function fe(T){return Object.keys(T).map(S=>`;${De(S)}=${De(T[S])}`).join("")}(T.parameters)}`}const ie=/^[^\/()?;=#]+/;function X(T){const S=T.match(ie);return S?S[0]:""}const Ve=/^[^=?&#]+/,ge=/^[^&#]+/;class Re{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gn([],{}):new gn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(S.length>0||Object.keys(D).length>0)&&(x[Tt]=new gn(S,D)),x}parseSegment(){const S=X(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new b.vHH(4009,Pt);return this.capture(S),new rr(pt(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const D=X(this.remaining);if(!D)return;this.capture(D);let x="";if(this.consumeOptional("=")){const $=X(this.remaining);$&&(x=$,this.capture(x))}S[pt(D)]=pt(x)}parseQueryParam(S){const D=function de(T){const S=T.match(Ve);return S?S[0]:""}(this.remaining);if(!D)return;this.capture(D);let x="";if(this.consumeOptional("=")){const se=function le(T){const S=T.match(ge);return S?S[0]:""}(this.remaining);se&&(x=se,this.capture(x))}const $=bt(D),J=bt(x);if(S.hasOwnProperty($)){let se=S[$];Array.isArray(se)||(se=[se],S[$]=se),se.push(J)}else S[$]=J}parseParens(S){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=X(this.remaining),$=this.remaining[x.length];if("/"!==$&&")"!==$&&";"!==$)throw new b.vHH(4010,Pt);let J;x.indexOf(":")>-1?(J=x.slice(0,x.indexOf(":")),this.capture(J),this.capture(":")):S&&(J=Tt);const se=this.parseChildren();D[J]=1===Object.keys(se).length?se[Tt]:new gn([],se),this.consumeOptional("//")}return D}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new b.vHH(4011,Pt)}}function st(T){return T.segments.length>0?new gn([],{[Tt]:T}):T}function Ct(T){const S={};for(const x of Object.keys(T.children)){const J=Ct(T.children[x]);(J.segments.length>0||J.hasChildren())&&(S[x]=J)}return function zt(T){if(1===T.numberOfChildren&&T.children[Tt]){const S=T.children[Tt];return new gn(T.segments.concat(S.segments),S.children)}return T}(new gn(T.segments,S))}function Ht(T){return T instanceof nr}const En=!1;function _s(T,S,D,x,$){if(0===D.length)return Ps(S.root,S.root,S.root,x,$);const J=function Yr(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Zn(!0,0,T);let S=0,D=!1;const x=T.reduce(($,J,se)=>{if("object"==typeof J&&null!=J){if(J.outlets){const Ue={};return un(J.outlets,(St,cn)=>{Ue[cn]="string"==typeof St?St.split("/"):St}),[...$,{outlets:Ue}]}if(J.segmentPath)return[...$,J.segmentPath]}return"string"!=typeof J?[...$,J]:0===se?(J.split("/").forEach((Ue,St)=>{0==St&&"."===Ue||(0==St&&""===Ue?D=!0:".."===Ue?S++:""!=Ue&&$.push(Ue))}),$):[...$,J]},[]);return new Zn(D,S,x)}(D);return J.toRoot()?Ps(S.root,S.root,new gn([],{}),x,$):function se(St){const cn=function ns(T,S,D,x){if(T.isAbsolute)return new ri(S.root,!0,0);if(-1===x)return new ri(D,D===S.root,0);return function Tr(T,S,D){let x=T,$=S,J=D;for(;J>$;){if(J-=$,x=x.parent,!x)throw new b.vHH(4005,En&&"Invalid number of '../'");$=x.segments.length}return new ri(x,!1,$-J)}(D,x+(Cr(T.commands[0])?0:1),T.numberOfDoubleDots)}(J,S,T.snapshot?._urlSegment,St),an=cn.processChildren?ki(cn.segmentGroup,cn.index,J.commands):ds(cn.segmentGroup,cn.index,J.commands);return Ps(S.root,cn.segmentGroup,an,x,$)}(T.snapshot?._lastPathIndex)}function Cr(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Wi(T){return"object"==typeof T&&null!=T&&T.outlets}function Ps(T,S,D,x,$){let se,J={};x&&un(x,(St,cn)=>{J[cn]=Array.isArray(St)?St.map(an=>`${an}`):`${St}`}),se=T===S?D:ts(T,S,D);const Ue=st(Ct(se));return new nr(Ue,J,$)}function ts(T,S,D){const x={};return un(T.children,($,J)=>{x[J]=$===S?D:ts($,S,D)}),new gn(T.segments,x)}class Zn{constructor(S,D,x){if(this.isAbsolute=S,this.numberOfDoubleDots=D,this.commands=x,S&&x.length>0&&Cr(x[0]))throw new b.vHH(4003,En&&"Root segment cannot have matrix parameters");const $=x.find(Wi);if($&&$!==Yn(x))throw new b.vHH(4004,En&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ri{constructor(S,D,x){this.segmentGroup=S,this.processChildren=D,this.index=x}}function ds(T,S,D){if(T||(T=new gn([],{})),0===T.segments.length&&T.hasChildren())return ki(T,S,D);const x=function rn(T,S,D){let x=0,$=S;const J={match:!1,pathIndex:0,commandIndex:0};for(;$<T.segments.length;){if(x>=D.length)return J;const se=T.segments[$],Ue=D[x];if(Wi(Ue))break;const St=`${Ue}`,cn=x<D.length-1?D[x+1]:null;if($>0&&void 0===St)break;if(St&&cn&&"object"==typeof cn&&void 0===cn.outlets){if(!ji(St,cn,se))return J;x+=2}else{if(!ji(St,{},se))return J;x++}$++}return{match:!0,pathIndex:$,commandIndex:x}}(T,S,D),$=D.slice(x.commandIndex);if(x.match&&x.pathIndex<T.segments.length){const J=new gn(T.segments.slice(0,x.pathIndex),{});return J.children[Tt]=new gn(T.segments.slice(x.pathIndex),T.children),ki(J,0,$)}return x.match&&0===$.length?new gn(T.segments,{}):x.match&&!T.hasChildren()?Gn(T,S,D):x.match?ki(T,0,$):Gn(T,S,D)}function ki(T,S,D){if(0===D.length)return new gn(T.segments,{});{const x=function ks(T){return Wi(T[0])?T[0].outlets:{[Tt]:T}}(D),$={};return!x[Tt]&&T.children[Tt]&&1===T.numberOfChildren&&0===T.children[Tt].segments.length?ki(T.children[Tt],S,D):(un(x,(J,se)=>{"string"==typeof J&&(J=[J]),null!==J&&($[se]=ds(T.children[se],S,J))}),un(T.children,(J,se)=>{void 0===x[se]&&($[se]=J)}),new gn(T.segments,$))}}function Gn(T,S,D){const x=T.segments.slice(0,S);let $=0;for(;$<D.length;){const J=D[$];if(Wi(J)){const St=Sr(J.outlets);return new gn(x,St)}if(0===$&&Cr(D[0])){x.push(new rr(T.segments[S].path,pi(D[0]))),$++;continue}const se=Wi(J)?J.outlets[Tt]:`${J}`,Ue=$<D.length-1?D[$+1]:null;se&&Ue&&Cr(Ue)?(x.push(new rr(se,pi(Ue))),$+=2):(x.push(new rr(se,{})),$++)}return new gn(x,{})}function Sr(T){const S={};return un(T,(D,x)=>{"string"==typeof D&&(D=[D]),null!==D&&(S[x]=Gn(new gn([],{}),0,D))}),S}function pi(T){const S={};return un(T,(D,x)=>S[x]=`${D}`),S}function ji(T,S,D){return T==D.path&&zn(S,D.parameters)}const Mr="imperative";class Zr{constructor(S,D){this.id=S,this.url=D}}class ii extends Zr{constructor(S,D,x="imperative",$=null){super(S,D),this.type=0,this.navigationTrigger=x,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gi extends Zr{constructor(S,D,x){super(S,D),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bo extends Zr{constructor(S,D,x,$){super(S,D),this.reason=x,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fn extends Zr{constructor(S,D,x,$){super(S,D),this.reason=x,this.code=$,this.type=16}}class Ti extends Zr{constructor(S,D,x,$){super(S,D),this.error=x,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ys extends Zr{constructor(S,D,x,$){super(S,D),this.urlAfterRedirects=x,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zs extends Zr{constructor(S,D,x,$){super(S,D),this.urlAfterRedirects=x,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vs extends Zr{constructor(S,D,x,$,J){super(S,D),this.urlAfterRedirects=x,this.state=$,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ni extends Zr{constructor(S,D,x,$){super(S,D),this.urlAfterRedirects=x,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ws extends Zr{constructor(S,D,x,$){super(S,D),this.urlAfterRedirects=x,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ur{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fi{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fs{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ge{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ce{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dt{constructor(S,D,x){this.routerEvent=S,this.position=D,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Vn=(()=>{class T{createUrlTree(D,x,$,J,se,Ue){return _s(D||x.root,$,J,se,Ue)}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})(),$n=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(S){return Vn.\u0275fac(S)},providedIn:"root"}),T})();class Ks{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const D=this.pathFromRoot(S);return D.length>1?D[D.length-2]:null}children(S){const D=si(S,this._root);return D?D.children.map(x=>x.value):[]}firstChild(S){const D=si(S,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(S){const D=Rr(S,this._root);return D.length<2?[]:D[D.length-2].children.map($=>$.value).filter($=>$!==S)}pathFromRoot(S){return Rr(S,this._root).map(D=>D.value)}}function si(T,S){if(T===S.value)return S;for(const D of S.children){const x=si(T,D);if(x)return x}return null}function Rr(T,S){if(T===S.value)return[S];for(const D of S.children){const x=Rr(T,D);if(x.length)return x.unshift(S),x}return[]}class Ls{constructor(S,D){this.value=S,this.children=D}toString(){return`TreeNode(${this.value})`}}function qs(T){const S={};return T&&T.children.forEach(D=>S[D.value.outlet]=D),S}class rs extends Ks{constructor(S,D){super(S),this.snapshot=D,ra(this,S)}toString(){return this.snapshot.toString()}}function bs(T,S){const D=function Vo(T,S){const se=new ta([],{},{},"",{},Tt,S,null,T.root,-1,{});return new na("",new Ls(se,[]))}(T,S),x=new Ie.X([new rr("",{})]),$=new Ie.X({}),J=new Ie.X({}),se=new Ie.X({}),Ue=new Ie.X(""),St=new Zi(x,$,se,Ue,J,Tt,S,D.root);return St.snapshot=D.root,new rs(new Ls(St,[]),D)}class Zi{constructor(S,D,x,$,J,se,Ue,St){this.url=S,this.params=D,this.queryParams=x,this.fragment=$,this.data=J,this.outlet=se,this.component=Ue,this.title=this.data?.pipe((0,ot.U)(cn=>cn[Nn]))??(0,p.of)(void 0),this._futureSnapshot=St}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(S=>Hn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(S=>Hn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Oo(T,S="emptyOnly"){const D=T.pathFromRoot;let x=0;if("always"!==S)for(x=D.length-1;x>=1;){const $=D[x],J=D[x-1];if($.routeConfig&&""===$.routeConfig.path)x--;else{if(J.component)break;x--}}return function Go(T){return T.reduce((S,D)=>({params:{...S.params,...D.params},data:{...S.data,...D.data},resolve:{...D.data,...S.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(x))}class ta{get title(){return this.data?.[Nn]}constructor(S,D,x,$,J,se,Ue,St,cn,an,sr){this.url=S,this.params=D,this.queryParams=x,this.fragment=$,this.data=J,this.outlet=se,this.component=Ue,this.routeConfig=St,this._urlSegment=cn,this._lastPathIndex=an,this._resolve=sr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class na extends Ks{constructor(S,D){super(D),this.url=S,ra(this,D)}toString(){return mo(this._root)}}function ra(T,S){S.value._routerState=T,S.children.forEach(D=>ra(T,D))}function mo(T){const S=T.children.length>0?` { ${T.children.map(mo).join(", ")} } `:"";return`${T.value}${S}`}function Es(T){if(T.snapshot){const S=T.snapshot,D=T._futureSnapshot;T.snapshot=D,zn(S.queryParams,D.queryParams)||T.queryParams.next(D.queryParams),S.fragment!==D.fragment&&T.fragment.next(D.fragment),zn(S.params,D.params)||T.params.next(D.params),function Lr(T,S){if(T.length!==S.length)return!1;for(let D=0;D<T.length;++D)if(!zn(T[D],S[D]))return!1;return!0}(S.url,D.url)||T.url.next(D.url),zn(S.data,D.data)||T.data.next(D.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function ia(T,S){const D=zn(T.params,S.params)&&function ni(T,S){return qr(T,S)&&T.every((D,x)=>zn(D.parameters,S[x].parameters))}(T.url,S.url);return D&&!(!T.parent!=!S.parent)&&(!T.parent||ia(T.parent,S.parent))}function Ys(T,S,D){if(D&&T.shouldReuseRoute(S.value,D.value.snapshot)){const x=D.value;x._futureSnapshot=S.value;const $=function ol(T,S,D){return S.children.map(x=>{for(const $ of D.children)if(T.shouldReuseRoute(x.value,$.value.snapshot))return Ys(T,x,$);return Ys(T,x)})}(T,S,D);return new Ls(x,$)}{if(T.shouldAttach(S.value)){const J=T.retrieve(S.value);if(null!==J){const se=J.route;return se.value._futureSnapshot=S.value,se.children=S.children.map(Ue=>Ys(T,Ue)),se}}const x=function Sa(T){return new Zi(new Ie.X(T.url),new Ie.X(T.params),new Ie.X(T.queryParams),new Ie.X(T.fragment),new Ie.X(T.data),T.outlet,T.component,T)}(S.value),$=S.children.map(J=>Ys(T,J));return new Ls(x,$)}}const is="ngNavigationCancelingError";function _o(T,S){const{redirectTo:D,navigationBehaviorOptions:x}=Ht(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,$=ws(!1,0,S);return $.url=D,$.navigationBehaviorOptions=x,$}function ws(T,S,D){const x=new Error("NavigationCancelingError: "+(T||""));return x[is]=!0,x.cancellationCode=S,D&&(x.url=D),x}function Zs(T){return jo(T)&&Ht(T.url)}function jo(T){return T&&T[is]}class al{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Gr,this.attachRef=null}}let Gr=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(D,x){const $=this.getOrCreateContext(D);$.outlet=x,this.contexts.set(D,$)}onChildOutletDestroyed(D){const x=this.getContext(D);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let x=this.getContext(D);return x||(x=new al,this.contexts.set(D,x)),x}getContext(D){return this.contexts.get(D)||null}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Ki=!1;let Js=(()=>{class T{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new b.vpe,this.deactivateEvents=new b.vpe,this.attachEvents=new b.vpe,this.detachEvents=new b.vpe,this.parentContexts=(0,b.f3M)(Gr),this.location=(0,b.f3M)(b.s_b),this.changeDetector=(0,b.f3M)(b.sBO),this.environmentInjector=(0,b.f3M)(b.lqb)}ngOnChanges(D){if(D.name){const{firstChange:x,previousValue:$}=D.name;if(x)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b.vHH(4012,Ki);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b.vHH(4012,Ki);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b.vHH(4012,Ki);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,x){this.activated=D,this._activatedRoute=x,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,x){if(this.isActivated)throw new b.vHH(4013,Ki);this._activatedRoute=D;const $=this.location,se=D.snapshot.component,Ue=this.parentContexts.getOrCreateContext(this.name).children,St=new Qs(D,Ue,$.injector);if(x&&function sa(T){return!!T.resolveComponentFactory}(x)){const cn=x.resolveComponentFactory(se);this.activated=$.createComponent(cn,$.length,St)}else this.activated=$.createComponent(se,{index:$.length,injector:St,environmentInjector:x??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275dir=b.lG2({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[b.TTD]}),T})();class Qs{constructor(S,D,x){this.route=S,this.childContexts=D,this.parent=x}get(S,D){return S===Zi?this.route:S===Gr?this.childContexts:this.parent.get(S,D)}}let Xs=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275cmp=b.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[b.jDz],decls:1,vars:0,template:function(D,x){1&D&&b._UZ(0,"router-outlet")},dependencies:[Js],encapsulation:2}),T})();function Us(T,S){return T.providers&&!T._injector&&(T._injector=(0,b.MMx)(T.providers,S,`Route: ${T.path}`)),T._injector??S}function Br(T){const S=T.children&&T.children.map(Br),D=S?{...T,children:S}:{...T};return!D.component&&!D.loadComponent&&(S||D.loadChildren)&&D.outlet&&D.outlet!==Tt&&(D.component=Xs),D}function Mi(T){return T.outlet||Tt}function yo(T,S){const D=T.filter(x=>Mi(x)===S);return D.push(...T.filter(x=>Mi(x)!==S)),D}function li(T){if(!T)return null;if(T.routeConfig?._injector)return T.routeConfig._injector;for(let S=T.parent;S;S=S.parent){const D=S.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class Ho{constructor(S,D,x,$){this.routeReuseStrategy=S,this.futureState=D,this.currState=x,this.forwardEvent=$}activate(S){const D=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,x,S),Es(this.futureState.root),this.activateChildRoutes(D,x,S)}deactivateChildRoutes(S,D,x){const $=qs(D);S.children.forEach(J=>{const se=J.value.outlet;this.deactivateRoutes(J,$[se],x),delete $[se]}),un($,(J,se)=>{this.deactivateRouteAndItsChildren(J,x)})}deactivateRoutes(S,D,x){const $=S.value,J=D?D.value:null;if($===J)if($.component){const se=x.getContext($.outlet);se&&this.deactivateChildRoutes(S,D,se.children)}else this.deactivateChildRoutes(S,D,x);else J&&this.deactivateRouteAndItsChildren(D,x)}deactivateRouteAndItsChildren(S,D){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,D):this.deactivateRouteAndOutlet(S,D)}detachAndStoreRouteSubtree(S,D){const x=D.getContext(S.value.outlet),$=x&&S.value.component?x.children:D,J=qs(S);for(const se of Object.keys(J))this.deactivateRouteAndItsChildren(J[se],$);if(x&&x.outlet){const se=x.outlet.detach(),Ue=x.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:se,route:S,contexts:Ue})}}deactivateRouteAndOutlet(S,D){const x=D.getContext(S.value.outlet),$=x&&S.value.component?x.children:D,J=qs(S);for(const se of Object.keys(J))this.deactivateRouteAndItsChildren(J[se],$);x&&x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated(),x.attachRef=null,x.resolver=null,x.route=null)}activateChildRoutes(S,D,x){const $=qs(D);S.children.forEach(J=>{this.activateRoutes(J,$[J.value.outlet],x),this.forwardEvent(new nt(J.value.snapshot))}),S.children.length&&this.forwardEvent(new Ge(S.value.snapshot))}activateRoutes(S,D,x){const $=S.value,J=D?D.value:null;if(Es($),$===J)if($.component){const se=x.getOrCreateContext($.outlet);this.activateChildRoutes(S,D,se.children)}else this.activateChildRoutes(S,D,x);else if($.component){const se=x.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Ue=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),se.children.onOutletReAttached(Ue.contexts),se.attachRef=Ue.componentRef,se.route=Ue.route.value,se.outlet&&se.outlet.attach(Ue.componentRef,Ue.route.value),Es(Ue.route.value),this.activateChildRoutes(S,null,se.children)}else{const Ue=li($.snapshot),St=Ue?.get(b._Vd)??null;se.attachRef=null,se.route=$,se.resolver=St,se.injector=Ue,se.outlet&&se.outlet.activateWith($,se.injector),this.activateChildRoutes(S,null,se.children)}}else this.activateChildRoutes(S,null,x)}}class Is{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class mi{constructor(S,D){this.component=S,this.route=D}}function Aa(T,S,D){const x=T._root;return Ji(x,S?S._root:null,D,[x.value])}function vo(T,S){const D=Symbol(),x=S.get(T,D);return x===D?"function"!=typeof T||(0,b.Z0I)(T)?S.get(T):T:x}function Ji(T,S,D,x,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=qs(S);return T.children.forEach(se=>{(function aa(T,S,D,x,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=T.value,se=S?S.value:null,Ue=D?D.getContext(T.value.outlet):null;if(se&&J.routeConfig===se.routeConfig){const St=function Sl(T,S,D){if("function"==typeof D)return D(T,S);switch(D){case"pathParamsChange":return!qr(T.url,S.url);case"pathParamsOrQueryParamsChange":return!qr(T.url,S.url)||!zn(T.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ia(T,S)||!zn(T.queryParams,S.queryParams);default:return!ia(T,S)}}(se,J,J.routeConfig.runGuardsAndResolvers);St?$.canActivateChecks.push(new Is(x)):(J.data=se.data,J._resolvedData=se._resolvedData),Ji(T,S,J.component?Ue?Ue.children:null:D,x,$),St&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&$.canDeactivateChecks.push(new mi(Ue.outlet.component,se))}else se&&Ln(S,Ue,$),$.canActivateChecks.push(new Is(x)),Ji(T,null,J.component?Ue?Ue.children:null:D,x,$)})(se,J[se.value.outlet],D,x.concat([se.value]),$),delete J[se.value.outlet]}),un(J,(se,Ue)=>Ln(se,D.getContext(Ue),$)),$}function Ln(T,S,D){const x=qs(T),$=T.value;un(x,(J,se)=>{Ln(J,$.component?S?S.children.getContext(se):null:S,D)}),D.canDeactivateChecks.push(new mi($.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,$))}function bo(T){return"function"==typeof T}function F(T){return T instanceof Pe.K||"EmptyError"===T?.name}const oe=Symbol("INITIAL_VALUE");function ct(){return(0,ze.w)(T=>(0,xe.a)(T.map(S=>S.pipe((0,Ft.q)(1),(0,Se.O)(oe)))).pipe((0,ot.U)(S=>{for(const D of S)if(!0!==D){if(D===oe)return oe;if(!1===D||D instanceof nr)return D}return!0}),(0,Te.h)(S=>S!==oe),(0,Ft.q)(1)))}function _i(T){return(0,ve.z)((0,Qt.b)(S=>{if(Ht(S))throw _o(0,S)}),(0,ot.U)(S=>!0===S))}const ua={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ca(T,S,D,x,$){const J=Cs(T,S,D);return J.matched?function ss(T,S,D,x){const $=S.canMatch;if(!$||0===$.length)return(0,p.of)(!0);const J=$.map(se=>{const Ue=vo(se,T);return On(function Oa(T){return T&&bo(T.canMatch)}(Ue)?Ue.canMatch(S,D):T.runInContext(()=>Ue(S,D)))});return(0,p.of)(J).pipe(ct(),_i())}(x=Us(S,x),S,D).pipe((0,ot.U)(se=>!0===se?J:{...ua})):(0,p.of)(J)}function Cs(T,S,D){if(""===S.path)return"full"===S.pathMatch&&(T.hasChildren()||D.length>0)?{...ua}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const $=(S.matcher||jn)(D,T,S);if(!$)return{...ua};const J={};un($.posParams,(Ue,St)=>{J[St]=Ue.path});const se=$.consumed.length>0?{...J,...$.consumed[$.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:$.consumed,remainingSegments:D.slice($.consumed.length),parameters:se,positionalParamSegments:$.posParams??{}}}function zo(T,S,D,x){if(D.length>0&&function Ra(T,S,D){return D.some(x=>Ka(T,S,x)&&Mi(x)!==Tt)}(T,D,x)){const J=new gn(S,function Bu(T,S,D,x){const $={};$[Tt]=x,x._sourceSegment=T,x._segmentIndexShift=S.length;for(const J of D)if(""===J.path&&Mi(J)!==Tt){const se=new gn([],{});se._sourceSegment=T,se._segmentIndexShift=S.length,$[Mi(J)]=se}return $}(T,S,x,new gn(D,T.children)));return J._sourceSegment=T,J._segmentIndexShift=S.length,{segmentGroup:J,slicedSegments:[]}}if(0===D.length&&function Wo(T,S,D){return D.some(x=>Ka(T,S,x))}(T,D,x)){const J=new gn(T.segments,function Ma(T,S,D,x,$){const J={};for(const se of x)if(Ka(T,D,se)&&!$[Mi(se)]){const Ue=new gn([],{});Ue._sourceSegment=T,Ue._segmentIndexShift=S.length,J[Mi(se)]=Ue}return{...$,...J}}(T,S,D,x,T.children));return J._sourceSegment=T,J._segmentIndexShift=S.length,{segmentGroup:J,slicedSegments:D}}const $=new gn(T.segments,T.children);return $._sourceSegment=T,$._segmentIndexShift=S.length,{segmentGroup:$,slicedSegments:D}}function Ka(T,S,D){return(!(T.hasChildren()||S.length>0)||"full"!==D.pathMatch)&&""===D.path}function Ol(T,S,D,x){return!!(Mi(T)===x||x!==Tt&&Ka(S,D,T))&&("**"===T.path||Cs(S,T,D).matched)}function xa(T,S,D){return 0===S.length&&!T.children[D]}const dl=!1;class Pa{constructor(S){this.segmentGroup=S||null}}class hl{constructor(S){this.urlTree=S}}function fl(T){return et(new Pa(T))}function fu(T){return et(new hl(T))}class pl{constructor(S,D,x,$,J){this.injector=S,this.configLoader=D,this.urlSerializer=x,this.urlTree=$,this.config=J,this.allowRedirects=!0}apply(){const S=zo(this.urlTree.root,[],[],this.config).segmentGroup,D=new gn(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,D,Tt).pipe((0,ot.U)(J=>this.createUrlTree(Ct(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe(jt(J=>{if(J instanceof hl)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof Pa?this.noMatchError(J):J}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,Tt).pipe((0,ot.U)($=>this.createUrlTree(Ct($),S.queryParams,S.fragment))).pipe(jt($=>{throw $ instanceof Pa?this.noMatchError($):$}))}noMatchError(S){return new b.vHH(4002,dl)}createUrlTree(S,D,x){const $=st(S);return new nr($,D,x)}expandSegmentGroup(S,D,x,$){return 0===x.segments.length&&x.hasChildren()?this.expandChildren(S,D,x).pipe((0,ot.U)(J=>new gn([],J))):this.expandSegment(S,x,D,x.segments,$,!0)}expandChildren(S,D,x){const $=[];for(const J of Object.keys(x.children))"primary"===J?$.unshift(J):$.push(J);return(0,Z.D)($).pipe((0,wt.b)(J=>{const se=x.children[J],Ue=yo(D,J);return this.expandSegmentGroup(S,Ue,se,J).pipe((0,ot.U)(St=>({segment:St,outlet:J})))}),(0,$e.R)((J,se)=>(J[se.outlet]=se.segment,J),{}),ht())}expandSegment(S,D,x,$,J,se){return(0,Z.D)(x).pipe((0,wt.b)(Ue=>this.expandSegmentAgainstRoute(S,D,x,Ue,$,J,se).pipe(jt(cn=>{if(cn instanceof Pa)return(0,p.of)(null);throw cn}))),(0,ft.P)(Ue=>!!Ue),jt((Ue,St)=>{if(F(Ue))return xa(D,$,J)?(0,p.of)(new gn([],{})):fl(D);throw Ue}))}expandSegmentAgainstRoute(S,D,x,$,J,se,Ue){return Ol($,D,J,se)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(S,D,$,J,se):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,D,x,$,J,se):fl(D):fl(D)}expandSegmentAgainstRouteUsingRedirect(S,D,x,$,J,se){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,x,$,se):this.expandRegularSegmentAgainstRouteUsingRedirect(S,D,x,$,J,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,D,x,$){const J=this.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?fu(J):this.lineralizeSegments(x,J).pipe((0,We.z)(se=>{const Ue=new gn(se,{});return this.expandSegment(S,Ue,D,se,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,D,x,$,J,se){const{matched:Ue,consumedSegments:St,remainingSegments:cn,positionalParamSegments:an}=Cs(D,$,J);if(!Ue)return fl(D);const sr=this.applyRedirectCommands(St,$.redirectTo,an);return $.redirectTo.startsWith("/")?fu(sr):this.lineralizeSegments($,sr).pipe((0,We.z)(Ei=>this.expandSegment(S,D,x,Ei.concat(cn),se,!1)))}matchSegmentAgainstRoute(S,D,x,$,J){return"**"===x.path?(S=Us(x,S),x.loadChildren?(x._loadedRoutes?(0,p.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):this.configLoader.loadChildren(S,x)).pipe((0,ot.U)(Ue=>(x._loadedRoutes=Ue.routes,x._loadedInjector=Ue.injector,new gn($,{})))):(0,p.of)(new gn($,{}))):ca(D,x,$,S).pipe((0,ze.w)(({matched:se,consumedSegments:Ue,remainingSegments:St})=>se?this.getChildConfig(S=x._injector??S,x,$).pipe((0,We.z)(an=>{const sr=an.injector??S,Ei=an.routes,{segmentGroup:Vi,slicedSegments:uo}=zo(D,Ue,St,Ei),co=new gn(Vi.segments,Vi.children);if(0===uo.length&&co.hasChildren())return this.expandChildren(sr,Ei,co).pipe((0,ot.U)(Do=>new gn(Ue,Do)));if(0===Ei.length&&0===uo.length)return(0,p.of)(new gn(Ue,{}));const to=Mi(x)===J;return this.expandSegment(sr,co,Ei,uo,to?Tt:J,!0).pipe((0,ot.U)(Xa=>new gn(Ue.concat(Xa.segments),Xa.children)))})):fl(D)))}getChildConfig(S,D,x){return D.children?(0,p.of)({routes:D.children,injector:S}):D.loadChildren?void 0!==D._loadedRoutes?(0,p.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function Al(T,S,D,x){const $=S.canLoad;if(void 0===$||0===$.length)return(0,p.of)(!0);const J=$.map(se=>{const Ue=vo(se,T);return On(function cl(T){return T&&bo(T.canLoad)}(Ue)?Ue.canLoad(S,D):T.runInContext(()=>Ue(S,D)))});return(0,p.of)(J).pipe(ct(),_i())}(S,D,x).pipe((0,We.z)($=>$?this.configLoader.loadChildren(S,D).pipe((0,Qt.b)(J=>{D._loadedRoutes=J.routes,D._loadedInjector=J.injector})):function bc(T){return et(ws(dl,3))}())):(0,p.of)({routes:[],injector:S})}lineralizeSegments(S,D){let x=[],$=D.root;for(;;){if(x=x.concat($.segments),0===$.numberOfChildren)return(0,p.of)(x);if($.numberOfChildren>1||!$.children[Tt])return S.redirectTo,et(new b.vHH(4e3,dl));$=$.children[Tt]}}applyRedirectCommands(S,D,x){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),S,x)}applyRedirectCreateUrlTree(S,D,x,$){const J=this.createSegmentGroup(S,D.root,x,$);return new nr(J,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(S,D){const x={};return un(S,($,J)=>{if("string"==typeof $&&$.startsWith(":")){const Ue=$.substring(1);x[J]=D[Ue]}else x[J]=$}),x}createSegmentGroup(S,D,x,$){const J=this.createSegments(S,D.segments,x,$);let se={};return un(D.children,(Ue,St)=>{se[St]=this.createSegmentGroup(S,Ue,x,$)}),new gn(J,se)}createSegments(S,D,x,$){return D.map(J=>J.path.startsWith(":")?this.findPosParam(S,J,$):this.findOrReturn(J,x))}findPosParam(S,D,x){const $=x[D.path.substring(1)];if(!$)throw new b.vHH(4001,dl);return $}findOrReturn(S,D){let x=0;for(const $ of D){if($.path===S.path)return D.splice(x),$;x++}return S}}class yi{}class Bi{constructor(S,D,x,$,J,se,Ue){this.injector=S,this.rootComponentType=D,this.config=x,this.urlTree=$,this.url=J,this.paramsInheritanceStrategy=se,this.urlSerializer=Ue}recognize(){const S=zo(this.urlTree.root,[],[],this.config.filter(D=>void 0===D.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,Tt).pipe((0,ot.U)(D=>{if(null===D)return null;const x=new ta([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new Ls(x,D),J=new na(this.url,$);return this.inheritParamsAndData(J._root),J}))}inheritParamsAndData(S){const D=S.value,x=Oo(D,this.paramsInheritanceStrategy);D.params=Object.freeze(x.params),D.data=Object.freeze(x.data),S.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(S,D,x,$){return 0===x.segments.length&&x.hasChildren()?this.processChildren(S,D,x):this.processSegment(S,D,x,x.segments,$)}processChildren(S,D,x){return(0,Z.D)(Object.keys(x.children)).pipe((0,wt.b)($=>{const J=x.children[$],se=yo(D,$);return this.processSegmentGroup(S,se,J,$)}),(0,$e.R)(($,J)=>$&&J?($.push(...J),$):null),function Bt(T,S=!1){return(0,xt.e)((D,x)=>{let $=0;D.subscribe((0,tt.x)(x,J=>{const se=T(J,$++);(se||S)&&x.next(J),!se&&x.complete()}))})}($=>null!==$),(0,dt.d)(null),ht(),(0,ot.U)($=>{if(null===$)return null;const J=Yl($);return function Gu(T){T.sort((S,D)=>S.value.outlet===Tt?-1:D.value.outlet===Tt?1:S.value.outlet.localeCompare(D.value.outlet))}(J),J}))}processSegment(S,D,x,$,J){return(0,Z.D)(D).pipe((0,wt.b)(se=>this.processSegmentAgainstRoute(se._injector??S,se,x,$,J)),(0,ft.P)(se=>!!se),jt(se=>{if(F(se))return xa(x,$,J)?(0,p.of)([]):(0,p.of)(null);throw se}))}processSegmentAgainstRoute(S,D,x,$,J){if(D.redirectTo||!Ol(D,x,$,J))return(0,p.of)(null);let se;if("**"===D.path){const Ue=$.length>0?Yn($).parameters:{},St=P(x)+$.length,cn=new ta($,Ue,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B(D),Mi(D),D.component??D._loadedComponent??null,D,ha(x),St,ne(D));se=(0,p.of)({snapshot:cn,consumedSegments:[],remainingSegments:[]})}else se=ca(x,D,$,S).pipe((0,ot.U)(({matched:Ue,consumedSegments:St,remainingSegments:cn,parameters:an})=>{if(!Ue)return null;const sr=P(x)+St.length;return{snapshot:new ta(St,an,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B(D),Mi(D),D.component??D._loadedComponent??null,D,ha(x),sr,ne(D)),consumedSegments:St,remainingSegments:cn}}));return se.pipe((0,ze.w)(Ue=>{if(null===Ue)return(0,p.of)(null);const{snapshot:St,consumedSegments:cn,remainingSegments:an}=Ue;S=D._injector??S;const sr=D._loadedInjector??S,Ei=function Ec(T){return T.children?T.children:T.loadChildren?T._loadedRoutes:[]}(D),{segmentGroup:Vi,slicedSegments:uo}=zo(x,cn,an,Ei.filter(to=>void 0===to.redirectTo));if(0===uo.length&&Vi.hasChildren())return this.processChildren(sr,Ei,Vi).pipe((0,ot.U)(to=>null===to?null:[new Ls(St,to)]));if(0===Ei.length&&0===uo.length)return(0,p.of)([new Ls(St,[])]);const co=Mi(D)===J;return this.processSegment(sr,Ei,Vi,uo,co?Tt:J).pipe((0,ot.U)(to=>null===to?null:[new Ls(St,to)]))}))}}function Nl(T){const S=T.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function Yl(T){const S=[],D=new Set;for(const x of T){if(!Nl(x)){S.push(x);continue}const $=S.find(J=>x.value.routeConfig===J.value.routeConfig);void 0!==$?($.children.push(...x.children),D.add($)):S.push(x)}for(const x of D){const $=Yl(x.children);S.push(new Ls(x.value,$))}return S.filter(x=>!D.has(x))}function ha(T){let S=T;for(;S._sourceSegment;)S=S._sourceSegment;return S}function P(T){let S=T,D=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,D+=S._segmentIndexShift??0;return D-1}function B(T){return T.data||{}}function ne(T){return T.resolve||{}}function xn(T){return"string"==typeof T.title||null===T.title}function Qn(T){return(0,ze.w)(S=>{const D=T(S);return D?(0,Z.D)(D).pipe((0,ot.U)(()=>S)):(0,p.of)(S)})}const $t=new b.OlP("ROUTES");let tn=(()=>{class T{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,b.f3M)(b.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,p.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const x=On(D.loadComponent()).pipe((0,ot.U)(qt),(0,Qt.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=J}),hn(()=>{this.componentLoaders.delete(D)})),$=new we(x,()=>new yt.x).pipe(gt());return this.componentLoaders.set(D,$),$}loadChildren(D,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,p.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const J=this.loadModuleFactoryOrRoutes(x.loadChildren).pipe((0,ot.U)(Ue=>{this.onLoadEndListener&&this.onLoadEndListener(x);let St,cn,an=!1;Array.isArray(Ue)?cn=Ue:(St=Ue.create(D).injector,cn=kn(St.get($t,[],b.XFs.Self|b.XFs.Optional)));return{routes:cn.map(Br),injector:St}}),hn(()=>{this.childrenLoaders.delete(x)})),se=new we(J,()=>new yt.x).pipe(gt());return this.childrenLoaders.set(x,se),se}loadModuleFactoryOrRoutes(D){return On(D()).pipe((0,ot.U)(qt),(0,We.z)(x=>x instanceof b.YKP||Array.isArray(x)?(0,p.of)(x):(0,Z.D)(this.compiler.compileModuleAsync(x))))}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function qt(T){return function Ko(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let Rt=(()=>{class T{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new yt.x,this.configLoader=(0,b.f3M)(tn),this.environmentInjector=(0,b.f3M)(b.lqb),this.urlSerializer=(0,b.f3M)(cr),this.rootContexts=(0,b.f3M)(Gr),this.navigationId=0,this.afterPreactivation=()=>(0,p.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new Fi($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Ur($))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:x})}setupNavigations(D){return this.transitions=new Ie.X({id:0,targetPageId:0,currentUrlTree:D.currentUrlTree,currentRawUrl:D.currentUrlTree,extractedUrl:D.urlHandlingStrategy.extract(D.currentUrlTree),urlAfterRedirects:D.urlHandlingStrategy.extract(D.currentUrlTree),rawUrl:D.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mr,restoredState:null,currentSnapshot:D.routerState.snapshot,targetSnapshot:null,currentRouterState:D.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Te.h)(x=>0!==x.id),(0,ot.U)(x=>({...x,extractedUrl:D.urlHandlingStrategy.extract(x.rawUrl)})),(0,ze.w)(x=>{let $=!1,J=!1;return(0,p.of)(x).pipe((0,Qt.b)(se=>{this.currentNavigation={id:se.id,initialUrl:se.rawUrl,extractedUrl:se.extractedUrl,trigger:se.source,extras:se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ze.w)(se=>{const Ue=D.browserUrlTree.toString(),St=!D.navigated||se.extractedUrl.toString()!==Ue||Ue!==D.currentUrlTree.toString();if(!St&&"reload"!==(se.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const an="";return this.events.next(new Fn(se.id,D.serializeUrl(x.rawUrl),an,0)),D.rawUrlTree=se.rawUrl,se.resolve(null),Ke.E}if(D.urlHandlingStrategy.shouldProcessUrl(se.rawUrl))return ci(se.source)&&(D.browserUrlTree=se.extractedUrl),(0,p.of)(se).pipe((0,ze.w)(an=>{const sr=this.transitions?.getValue();return this.events.next(new ii(an.id,this.urlSerializer.serialize(an.extractedUrl),an.source,an.restoredState)),sr!==this.transitions?.getValue()?Ke.E:Promise.resolve(an)}),function Vu(T,S,D,x){return(0,ze.w)($=>function pu(T,S,D,x,$){return new pl(T,S,D,x,$).apply()}(T,S,D,$.extractedUrl,x).pipe((0,ot.U)(J=>({...$,urlAfterRedirects:J}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,D.config),(0,Qt.b)(an=>{this.currentNavigation={...this.currentNavigation,finalUrl:an.urlAfterRedirects},x.urlAfterRedirects=an.urlAfterRedirects}),function ye(T,S,D,x,$){return(0,We.z)(J=>function ql(T,S,D,x,$,J,se="emptyOnly"){return new Bi(T,S,D,x,$,se,J).recognize().pipe((0,ze.w)(Ue=>null===Ue?function ui(T){return new Le.y(S=>S.error(T))}(new yi):(0,p.of)(Ue)))}(T,S,D,J.urlAfterRedirects,x.serialize(J.urlAfterRedirects),x,$).pipe((0,ot.U)(se=>({...J,targetSnapshot:se}))))}(this.environmentInjector,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,Qt.b)(an=>{if(x.targetSnapshot=an.targetSnapshot,"eager"===D.urlUpdateStrategy){if(!an.extras.skipLocationChange){const Ei=D.urlHandlingStrategy.merge(an.urlAfterRedirects,an.rawUrl);D.setBrowserUrl(Ei,an)}D.browserUrlTree=an.urlAfterRedirects}const sr=new ys(an.id,this.urlSerializer.serialize(an.extractedUrl),this.urlSerializer.serialize(an.urlAfterRedirects),an.targetSnapshot);this.events.next(sr)}));if(St&&D.urlHandlingStrategy.shouldProcessUrl(D.rawUrlTree)){const{id:an,extractedUrl:sr,source:Ei,restoredState:Vi,extras:uo}=se,co=new ii(an,this.urlSerializer.serialize(sr),Ei,Vi);this.events.next(co);const to=bs(sr,this.rootComponentType).snapshot;return x={...se,targetSnapshot:to,urlAfterRedirects:sr,extras:{...uo,skipLocationChange:!1,replaceUrl:!1}},(0,p.of)(x)}{const an="";return this.events.next(new Fn(se.id,D.serializeUrl(x.extractedUrl),an,1)),D.rawUrlTree=se.rawUrl,se.resolve(null),Ke.E}}),(0,Qt.b)(se=>{const Ue=new zs(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot);this.events.next(Ue)}),(0,ot.U)(se=>x={...se,guards:Aa(se.targetSnapshot,se.currentSnapshot,this.rootContexts)}),function ln(T,S){return(0,We.z)(D=>{const{targetSnapshot:x,currentSnapshot:$,guards:{canActivateChecks:J,canDeactivateChecks:se}}=D;return 0===se.length&&0===J.length?(0,p.of)({...D,guardsResult:!0}):function jr(T,S,D,x){return(0,Z.D)(T).pipe((0,We.z)($=>function Na(T,S,D,x,$){const J=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,p.of)(!0);const se=J.map(Ue=>{const St=li(S)??$,cn=vo(Ue,St);return On(function Mo(T){return T&&bo(T.canDeactivate)}(cn)?cn.canDeactivate(T,S,D,x):St.runInContext(()=>cn(T,S,D,x))).pipe((0,ft.P)())});return(0,p.of)(se).pipe(ct())}($.component,$.route,D,S,x)),(0,ft.P)($=>!0!==$,!0))}(se,x,$,T).pipe((0,We.z)(Ue=>Ue&&function $o(T){return"boolean"==typeof T}(Ue)?function Li(T,S,D,x){return(0,Z.D)(S).pipe((0,wt.b)($=>(0,He.z)(function so(T,S){return null!==T&&S&&S(new Fs(T)),(0,p.of)(!0)}($.route.parent,x),function Ri(T,S){return null!==T&&S&&S(new Ce(T)),(0,p.of)(!0)}($.route,x),function Vs(T,S,D){const x=S[S.length-1],J=S.slice(0,S.length-1).reverse().map(se=>function Wa(T){const S=T.routeConfig?T.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:T,guards:S}:null}(se)).filter(se=>null!==se).map(se=>be(()=>{const Ue=se.guards.map(St=>{const cn=li(se.node)??D,an=vo(St,cn);return On(function Kl(T){return T&&bo(T.canActivateChild)}(an)?an.canActivateChild(x,T):cn.runInContext(()=>an(x,T))).pipe((0,ft.P)())});return(0,p.of)(Ue).pipe(ct())}));return(0,p.of)(J).pipe(ct())}(T,$.path,D),function oo(T,S,D){const x=S.routeConfig?S.routeConfig.canActivate:null;if(!x||0===x.length)return(0,p.of)(!0);const $=x.map(J=>be(()=>{const se=li(S)??D,Ue=vo(J,se);return On(function la(T){return T&&bo(T.canActivate)}(Ue)?Ue.canActivate(S,T):se.runInContext(()=>Ue(S,T))).pipe((0,ft.P)())}));return(0,p.of)($).pipe(ct())}(T,$.route,D))),(0,ft.P)($=>!0!==$,!0))}(x,J,T,S):(0,p.of)(Ue)),(0,ot.U)(Ue=>({...D,guardsResult:Ue})))})}(this.environmentInjector,se=>this.events.next(se)),(0,Qt.b)(se=>{if(x.guardsResult=se.guardsResult,Ht(se.guardsResult))throw _o(0,se.guardsResult);const Ue=new vs(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot,!!se.guardsResult);this.events.next(Ue)}),(0,Te.h)(se=>!!se.guardsResult||(D.restoreHistory(se),this.cancelNavigationTransition(se,"",3),!1)),Qn(se=>{if(se.guards.canActivateChecks.length)return(0,p.of)(se).pipe((0,Qt.b)(Ue=>{const St=new Ni(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects),Ue.targetSnapshot);this.events.next(St)}),(0,ze.w)(Ue=>{let St=!1;return(0,p.of)(Ue).pipe(function Ye(T,S){return(0,We.z)(D=>{const{targetSnapshot:x,guards:{canActivateChecks:$}}=D;if(!$.length)return(0,p.of)(D);let J=0;return(0,Z.D)($).pipe((0,wt.b)(se=>function Nt(T,S,D,x){const $=T.routeConfig,J=T._resolve;return void 0!==$?.title&&!xn($)&&(J[Nn]=$.title),function vn(T,S,D,x){const $=function xr(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===$.length)return(0,p.of)({});const J={};return(0,Z.D)($).pipe((0,We.z)(se=>function It(T,S,D,x){const $=li(S)??x,J=vo(T,$);return On(J.resolve?J.resolve(S,D):$.runInContext(()=>J(S,D)))}(T[se],S,D,x).pipe((0,ft.P)(),(0,Qt.b)(Ue=>{J[se]=Ue}))),ut(1),(0,At.h)(J),jt(se=>F(se)?Ke.E:et(se)))}(J,T,S,x).pipe((0,ot.U)(se=>(T._resolvedData=se,T.data=Oo(T,D).resolve,$&&xn($)&&(T.data[Nn]=$.title),null)))}(se.route,x,T,S)),(0,Qt.b)(()=>J++),ut(1),(0,We.z)(se=>J===$.length?(0,p.of)(D):Ke.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,Qt.b)({next:()=>St=!0,complete:()=>{St||(D.restoreHistory(Ue),this.cancelNavigationTransition(Ue,"",2))}}))}),(0,Qt.b)(Ue=>{const St=new Ws(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects),Ue.targetSnapshot);this.events.next(St)}))}),Qn(se=>{const Ue=St=>{const cn=[];St.routeConfig?.loadComponent&&!St.routeConfig._loadedComponent&&cn.push(this.configLoader.loadComponent(St.routeConfig).pipe((0,Qt.b)(an=>{St.component=an}),(0,ot.U)(()=>{})));for(const an of St.children)cn.push(...Ue(an));return cn};return(0,xe.a)(Ue(se.targetSnapshot.root)).pipe((0,dt.d)(),(0,Ft.q)(1))}),Qn(()=>this.afterPreactivation()),(0,ot.U)(se=>{const Ue=function hs(T,S,D){const x=Ys(T,S._root,D?D._root:void 0);return new rs(x,S)}(D.routeReuseStrategy,se.targetSnapshot,se.currentRouterState);return x={...se,targetRouterState:Ue}}),(0,Qt.b)(se=>{D.currentUrlTree=se.urlAfterRedirects,D.rawUrlTree=D.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),D.routerState=se.targetRouterState,"deferred"===D.urlUpdateStrategy&&(se.extras.skipLocationChange||D.setBrowserUrl(D.rawUrlTree,se),D.browserUrlTree=se.urlAfterRedirects)}),((T,S,D)=>(0,ot.U)(x=>(new Ho(S,x.targetRouterState,x.currentRouterState,D).activate(T),x)))(this.rootContexts,D.routeReuseStrategy,se=>this.events.next(se)),(0,Qt.b)({next:se=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,D.navigated=!0,this.events.next(new gi(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(D.currentUrlTree))),D.titleStrategy?.updateTitle(se.targetRouterState.snapshot),se.resolve(!0)},complete:()=>{$=!0}}),hn(()=>{$||J||this.cancelNavigationTransition(x,"",1),this.currentNavigation?.id===x.id&&(this.currentNavigation=null)}),jt(se=>{if(J=!0,jo(se)){Zs(se)||(D.navigated=!0,D.restoreHistory(x,!0));const Ue=new Bo(x.id,this.urlSerializer.serialize(x.extractedUrl),se.message,se.cancellationCode);if(this.events.next(Ue),Zs(se)){const St=D.urlHandlingStrategy.merge(se.url,D.rawUrlTree),cn={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===D.urlUpdateStrategy||ci(x.source)};D.scheduleNavigation(St,Mr,null,cn,{resolve:x.resolve,reject:x.reject,promise:x.promise})}else x.resolve(!1)}else{D.restoreHistory(x,!0);const Ue=new Ti(x.id,this.urlSerializer.serialize(x.extractedUrl),se,x.targetSnapshot??void 0);this.events.next(Ue);try{x.resolve(D.errorHandler(se))}catch(St){x.reject(St)}}return Ke.E}))}))}cancelNavigationTransition(D,x,$){const J=new Bo(D.id,this.urlSerializer.serialize(D.extractedUrl),x,$);this.events.next(J),D.resolve(!1)}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ci(T){return T!==Mr}let Ro=(()=>{class T{buildTitle(D){let x,$=D.root;for(;void 0!==$;)x=this.getResolvedTitleForRoute($)??x,$=$.children.find(J=>J.outlet===Tt);return x}getResolvedTitleForRoute(D){return D.data[Nn]}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return(0,b.f3M)(ml)},providedIn:"root"}),T})(),ml=(()=>{class T extends Ro{constructor(D){super(),this.title=D}updateTitle(D){const x=this.buildTitle(D);void 0!==x&&this.title.setTitle(x)}}return T.\u0275fac=function(D){return new(D||T)(b.LFG(nn.Dx))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),_l=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return(0,b.f3M)(ka)},providedIn:"root"}),T})();class Ml{shouldDetach(S){return!1}store(S,D){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,D){return S.routeConfig===D.routeConfig}}let ka=(()=>{class T extends Ml{}return T.\u0275fac=function(){let S;return function(x){return(S||(S=b.n5z(T)))(x||T)}}(),T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Fa=new b.OlP("",{providedIn:"root",factory:()=>({})});let os=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return(0,b.f3M)(Zl)},providedIn:"root"}),T})(),Zl=(()=>{class T{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,x){return D}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function fa(T){throw T}function mn(T,S,D){return S.parse("/")}const Hr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dr=(()=>{class T{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,b.f3M)(b.c2e),this.isNgZoneEnabled=!1,this.options=(0,b.f3M)(Fa,{optional:!0})||{},this.errorHandler=this.options.errorHandler||fa,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||mn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,b.f3M)(os),this.routeReuseStrategy=(0,b.f3M)(_l),this.urlCreationStrategy=(0,b.f3M)($n),this.titleStrategy=(0,b.f3M)(Ro),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=kn((0,b.f3M)($t,{optional:!0})??[]),this.navigationTransitions=(0,b.f3M)(Rt),this.urlSerializer=(0,b.f3M)(cr),this.location=(0,b.f3M)(mt.Ye),this.isNgZoneEnabled=(0,b.f3M)(b.R0b)instanceof b.R0b&&b.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(D=>{this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mr,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const x="popstate"===D.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,x,D.state)},0)}))}navigateToSyncWithBrowser(D,x,$){const J={replaceUrl:!0},se=$?.navigationId?$:null;if($){const St={...$};delete St.navigationId,delete St.\u0275routerPageId,0!==Object.keys(St).length&&(J.state=St)}const Ue=this.parseUrl(D);this.scheduleNavigation(Ue,x,se,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(D){this.config=D.map(Br),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,x={}){const{relativeTo:$,queryParams:J,fragment:se,queryParamsHandling:Ue,preserveFragment:St}=x,cn=St?this.currentUrlTree.fragment:se;let an=null;switch(Ue){case"merge":an={...this.currentUrlTree.queryParams,...J};break;case"preserve":an=this.currentUrlTree.queryParams;break;default:an=J||null}return null!==an&&(an=this.removeEmptyProps(an)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,D,an,cn??null)}navigateByUrl(D,x={skipLocationChange:!1}){const $=Ht(D)?D:this.parseUrl(D),J=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(J,Mr,null,x)}navigate(D,x={skipLocationChange:!1}){return function wn(T){for(let S=0;S<T.length;S++){const D=T[S];if(null==D)throw new b.vHH(4008,false)}}(D),this.navigateByUrl(this.createUrlTree(D,x),x)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let x;try{x=this.urlSerializer.parse(D)}catch($){x=this.malformedUriErrorHandler($,this.urlSerializer,D)}return x}isActive(D,x){let $;if($=!0===x?{...Hr}:!1===x?{...pa}:x,Ht(D))return kr(this.currentUrlTree,D,$);const J=this.parseUrl(D);return kr(this.currentUrlTree,J,$)}removeEmptyProps(D){return Object.keys(D).reduce((x,$)=>{const J=D[$];return null!=J&&(x[$]=J),x},{})}scheduleNavigation(D,x,$,J,se){if(this.disposed)return Promise.resolve(!1);let Ue,St,cn,an;return se?(Ue=se.resolve,St=se.reject,cn=se.promise):cn=new Promise((sr,Ei)=>{Ue=sr,St=Ei}),an="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:J.replaceUrl||J.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:an,source:x,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:J,resolve:Ue,reject:St,promise:cn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),cn.catch(sr=>Promise.reject(sr))}setBrowserUrl(D,x){const $=this.urlSerializer.serialize(D),J={...x.extras.state,...this.generateNgRouterState(x.id,x.targetPageId)};this.location.isCurrentPathEqualTo($)||x.extras.replaceUrl?this.location.replaceState($,"",J):this.location.go($,"",J)}restoreHistory(D,x=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===$?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===$&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,x){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:x}:{navigationId:D}}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),qa=(()=>{class T{constructor(D,x,$,J,se,Ue){this.router=D,this.route=x,this.tabIndexAttribute=$,this.renderer=J,this.el=se,this.locationStrategy=Ue,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new yt.x;const St=se.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===St||"area"===St,this.isAnchorElement?this.subscription=D.events.subscribe(cn=>{cn instanceof gi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,b.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,b.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,b.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,x,$,J,se){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||x||$||J||se||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const D=null===this.href?null:(0,b.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(D,x){const $=this.renderer,J=this.el.nativeElement;null!==x?$.setAttribute(J,D,x):$.removeAttribute(J,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return T.\u0275fac=function(D){return new(D||T)(b.Y36(dr),b.Y36(Zi),b.$8M("tabindex"),b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(mt.S$))},T.\u0275dir=b.lG2({type:T,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,x){1&D&&b.NdJ("click",function(J){return x.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&D&&b.uIk("target",x.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[b.TTD]}),T})();class hr{}let ga=(()=>{class T{constructor(D,x,$,J,se){this.router=D,this.injector=$,this.preloadingStrategy=J,this.loader=se}setUpPreloading(){this.subscription=this.router.events.pipe((0,Te.h)(D=>D instanceof gi),(0,wt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,x){const $=[];for(const J of x){J.providers&&!J._injector&&(J._injector=(0,b.MMx)(J.providers,D,`Route: ${J.path}`));const se=J._injector??D,Ue=J._loadedInjector??se;J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent?$.push(this.preloadConfig(se,J)):(J.children||J._loadedRoutes)&&$.push(this.processRoutes(Ue,J.children??J._loadedRoutes))}return(0,Z.D)($).pipe((0,Kt.J)())}preloadConfig(D,x){return this.preloadingStrategy.preload(x,()=>{let $;$=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(D,x):(0,p.of)(null);const J=$.pipe((0,We.z)(se=>null===se?(0,p.of)(void 0):(x._loadedRoutes=se.routes,x._loadedInjector=se.injector,this.processRoutes(se.injector??D,se.routes))));if(x.loadComponent&&!x._loadedComponent){const se=this.loader.loadComponent(x);return(0,Z.D)([J,se]).pipe((0,Kt.J)())}return J})}}return T.\u0275fac=function(D){return new(D||T)(b.LFG(dr),b.LFG(b.Sil),b.LFG(b.lqb),b.LFG(hr),b.LFG(tn))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Ts=new b.OlP("");let ju=(()=>{class T{constructor(D,x,$,J,se={}){this.urlSerializer=D,this.transitions=x,this.viewportScroller=$,this.zone=J,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof ii?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof gi&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof Dt&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dt(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return T.\u0275fac=function(D){b.$Z()},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})();var oi=(()=>((oi=oi||{})[oi.COMPLETE=0]="COMPLETE",oi[oi.FAILED=1]="FAILED",oi[oi.REDIRECTING=2]="REDIRECTING",oi))();const $r=!1;function Hi(T,S){return{\u0275kind:T,\u0275providers:S}}const ma=new b.OlP("",{providedIn:"root",factory:()=>!1});function _a(){const T=(0,b.f3M)(b.zs3);return S=>{const D=T.get(b.z2F);if(S!==D.components[0])return;const x=T.get(dr),$=T.get(lt);1===T.get(Za)&&x.initialNavigation(),T.get(qo,null,b.XFs.Optional)?.setUpPreloading(),T.get(Ts,null,b.XFs.Optional)?.init(),x.resetRootComponentType(D.componentTypes[0]),$.closed||($.next(),$.unsubscribe())}}const lt=new b.OlP($r?"bootstrap done indicator":"",{factory:()=>new yt.x}),Za=new b.OlP($r?"initial navigation":"",{providedIn:"root",factory:()=>1});function Ql(){let T=[];return T=$r?[{provide:b.Xts,multi:!0,useFactory:()=>{const S=(0,b.f3M)(dr);return()=>S.events.subscribe(D=>{console.group?.(`Router Event: ${D.constructor.name}`),console.log(function Jt(T){if(!("type"in T))return`Unknown Router Event: ${T.constructor.name}`;switch(T.type){case 14:return`ActivationEnd(path: '${T.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${T.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${T.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${T.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state}, shouldActivate: ${T.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 2:return`NavigationCancel(id: ${T.id}, url: '${T.url}')`;case 16:return`NavigationSkipped(id: ${T.id}, url: '${T.url}')`;case 1:return`NavigationEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${T.id}, url: '${T.url}', error: ${T.error})`;case 0:return`NavigationStart(id: ${T.id}, url: '${T.url}')`;case 6:return`ResolveEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 5:return`ResolveStart(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 10:return`RouteConfigLoadEnd(path: ${T.route.path})`;case 9:return`RouteConfigLoadStart(path: ${T.route.path})`;case 4:return`RoutesRecognized(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 15:return`Scroll(anchor: '${T.anchor}', position: '${T.position?`${T.position[0]}, ${T.position[1]}`:null}')`}}(D)),console.log(D),console.groupEnd?.()})}}]:[],Hi(1,T)}const qo=new b.OlP($r?"router preloader":"");function ai(T){return Hi(0,[{provide:qo,useExisting:ga},{provide:hr,useExisting:T}])}const Ja=!1,ao=new b.OlP(Ja?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Xl=[mt.Ye,{provide:cr,useClass:Sn},dr,Gr,{provide:Zi,useFactory:function xl(T){return T.routerState.root},deps:[dr]},tn,Ja?{provide:ma,useValue:!0}:[]];function ya(){return new b.PXZ("Router",dr)}let Pl=(()=>{class T{constructor(D){}static forRoot(D,x){return{ngModule:T,providers:[Xl,Ja&&x?.enableTracing?Ql().\u0275providers:[],{provide:$t,multi:!0,useValue:D},{provide:ao,useFactory:wo,deps:[[dr,new b.FiY,new b.tp0]]},{provide:Fa,useValue:x||{}},x?.useHash?{provide:mt.S$,useClass:mt.Do}:{provide:mt.S$,useClass:mt.b0},{provide:Ts,useFactory:()=>{const T=(0,b.f3M)(mt.EM),S=(0,b.f3M)(b.R0b),D=(0,b.f3M)(Fa),x=(0,b.f3M)(Rt),$=(0,b.f3M)(cr);return D.scrollOffset&&T.setOffset(D.scrollOffset),new ju($,x,T,S,D)}},x?.preloadingStrategy?ai(x.preloadingStrategy).\u0275providers:[],{provide:b.PXZ,multi:!0,useFactory:ya},x?.initialNavigation?kl(x):[],[{provide:bi,useFactory:_a},{provide:b.tb,multi:!0,useExisting:bi}]]}}static forChild(D){return{ngModule:T,providers:[{provide:$t,multi:!0,useValue:D}]}}}return T.\u0275fac=function(D){return new(D||T)(b.LFG(ao,8))},T.\u0275mod=b.oAB({type:T}),T.\u0275inj=b.cJS({imports:[Xs]}),T})();function wo(T){if(Ja&&T)throw new b.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function kl(T){return["disabled"===T.initialNavigation?Hi(3,[{provide:b.ip1,multi:!0,useFactory:()=>{const S=(0,b.f3M)(dr);return()=>{S.setUpLocationChangeListener()}}},{provide:Za,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?Hi(2,[{provide:Za,useValue:0},{provide:b.ip1,multi:!0,deps:[b.zs3],useFactory:S=>{const D=S.get(mt.V_,Promise.resolve());return()=>D.then(()=>new Promise(x=>{const $=S.get(dr),J=S.get(lt);(function Ya(T,S){T.events.pipe((0,Te.h)(D=>D instanceof gi||D instanceof Bo||D instanceof Ti||D instanceof Fn),(0,ot.U)(D=>D instanceof gi||D instanceof Fn?oi.COMPLETE:D instanceof Bo&&(0===D.code||1===D.code)?oi.REDIRECTING:oi.FAILED),(0,Te.h)(D=>D!==oi.REDIRECTING),(0,Ft.q)(1)).subscribe(()=>{S()})})($,()=>{x(!0)}),S.get(Rt).afterPreactivation=()=>(x(!0),J.closed?(0,p.of)(void 0):J),$.initialNavigation()}))}}]).\u0275providers:[]]}const bi=new b.OlP(Ja?"Router Initializer":"")},3942:(sn,qe,G)=>{G.d(qe,{Z:()=>_t});var b=G(2090),Z=G(4859),p=G(9681),Ie=G(1877);class Pe{constructor(tt,gt){this._delegate=tt,this.firebase=gt,(0,p._addComponent)(tt,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,p.deleteApp)(this._delegate)))}_getService(tt,gt=p._DEFAULT_ENTRY_NAME){var we;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(tt);return!yt.isInitialized()&&"EXPLICIT"===(null===(we=yt.getComponent())||void 0===we?void 0:we.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:gt})}_removeServiceInstance(tt,gt=p._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(gt)}_addComponent(tt){(0,p._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,p._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const He=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function Ae(){const xt=function Le(xt){const tt={},gt={__esModule:!0,initializeApp:function mt(Se,Te={}){const We=p.initializeApp(Se,Te);if((0,b.r3)(tt,We.name))return tt[We.name];const ft=new xt(We,gt);return tt[We.name]=ft,ft},app:yt,registerVersion:p.registerVersion,setLogLevel:p.setLogLevel,onLog:p.onLog,apps:null,SDK_VERSION:p.SDK_VERSION,INTERNAL:{registerComponent:function ze(Se){const Te=Se.name,We=Te.replace("-compat","");if(p._registerComponent(Se)&&"PUBLIC"===Se.type){const ft=(wt=yt())=>{if("function"!=typeof wt[We])throw He.create("invalid-app-argument",{appName:Te});return wt[We]()};void 0!==Se.serviceProps&&(0,b.ZB)(ft,Se.serviceProps),gt[We]=ft,xt.prototype[We]=function(...wt){return this._getService.bind(this,Te).apply(this,Se.multipleInstances?wt:[])}}return"PUBLIC"===Se.type?gt[We]:null},removeApp:function we(Se){delete tt[Se]},useAsService:function Ft(Se,Te){return"serverAuth"===Te?null:Te},modularAPIs:p}};function yt(Se){if(!(0,b.r3)(tt,Se=Se||p._DEFAULT_ENTRY_NAME))throw He.create("no-app",{appName:Se});return tt[Se]}return gt.default=gt,Object.defineProperty(gt,"apps",{get:function ot(){return Object.keys(tt).map(Se=>tt[Se])}}),yt.App=xt,gt}(Pe);return xt.INTERNAL=Object.assign(Object.assign({},xt.INTERNAL),{createFirebaseNamespace:Ae,extendNamespace:function tt(gt){(0,b.ZB)(xt,gt)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),xt}(),ve=new Ie.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xt=self.firebase.SDK_VERSION;xt&&xt.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _t=be;!function Ke(xt){(0,p.registerVersion)("@firebase/app-compat","0.2.5",xt)}()},9681:(sn,qe,G)=>{G.r(qe),G.d(qe,{FirebaseError:()=>Ie.ZR,SDK_VERSION:()=>zn,_DEFAULT_ENTRY_NAME:()=>vt,_addComponent:()=>hn,_addOrOverwriteComponent:()=>Kt,_apps:()=>Bt,_clearComponents:()=>Un,_components:()=>At,_getProvider:()=>Tt,_registerComponent:()=>nn,_removeServiceInstance:()=>Nn,deleteApp:()=>tr,getApp:()=>kn,getApps:()=>Yn,initializeApp:()=>Bn,onLog:()=>Pt,registerVersion:()=>On,setLogLevel:()=>vr});var b=G(5861),Z=G(4859),p=G(1877),Ie=G(2090),Pe=G(8766);class xe{constructor(Et){this.container=Et}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function He(Lt){return"VERSION"===Lt.getComponent()?.type}(Fe)){const me=Fe.getImmediate();return`${me.library}/${me.version}`}return null}).filter(Fe=>Fe).join(" ")}}const Le="@firebase/app",be=new p.Yd("@firebase/app"),vt="[DEFAULT]",ht={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,At=new Map;function hn(Lt,Et){try{Lt.container.addComponent(Et)}catch(Fe){be.debug(`Component ${Et.name} failed to register with FirebaseApp ${Lt.name}`,Fe)}}function Kt(Lt,Et){Lt.container.addOrOverwriteComponent(Et)}function nn(Lt){const Et=Lt.name;if(At.has(Et))return be.debug(`There were multiple attempts to register component ${Et}.`),!1;At.set(Et,Lt);for(const Fe of Bt.values())hn(Fe,Lt);return!0}function Tt(Lt,Et){const Fe=Lt.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),Lt.container.getProvider(Et)}function Nn(Lt,Et,Fe=vt){Tt(Lt,Et).clearInstance(Fe)}function Un(){At.clear()}const jn=new Ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(Et,Fe,me){this._isDeleted=!1,this._options=Object.assign({},Et),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=me,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Et){this.checkDestroyed(),this._automaticDataCollectionEnabled=Et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Et){this._isDeleted=Et}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const zn="9.18.0";function Bn(Lt,Et={}){let Fe=Lt;"object"!=typeof Et&&(Et={name:Et});const me=Object.assign({name:vt,automaticDataCollectionEnabled:!1},Et),De=me.name;if("string"!=typeof De||!De)throw jn.create("bad-app-name",{appName:String(De)});if(Fe||(Fe=(0,Ie.aH)()),!Fe)throw jn.create("no-options");const pt=Bt.get(De);if(pt){if((0,Ie.vZ)(Fe,pt.options)&&(0,Ie.vZ)(me,pt.config))return pt;throw jn.create("duplicate-app",{appName:De})}const bt=new Z.H0(De);for(const fe of At.values())bt.addComponent(fe);const he=new Lr(Fe,me,bt);return Bt.set(De,he),he}function kn(Lt=vt){const Et=Bt.get(Lt);if(!Et&&Lt===vt)return Bn();if(!Et)throw jn.create("no-app",{appName:Lt});return Et}function Yn(){return Array.from(Bt.values())}function tr(Lt){return un.apply(this,arguments)}function un(){return(un=(0,b.Z)(function*(Lt){const Et=Lt.name;Bt.has(Et)&&(Bt.delete(Et),yield Promise.all(Lt.container.getProviders().map(Fe=>Fe.delete())),Lt.isDeleted=!0)})).apply(this,arguments)}function On(Lt,Et,Fe){var me;let De=null!==(me=ht[Lt])&&void 0!==me?me:Lt;Fe&&(De+=`-${Fe}`);const pt=De.match(/\s|\//),bt=Et.match(/\s|\//);if(pt||bt){const he=[`Unable to register library "${De}" with version "${Et}":`];return pt&&he.push(`library name "${De}" contains illegal characters (whitespace or "/")`),pt&&bt&&he.push("and"),bt&&he.push(`version name "${Et}" contains illegal characters (whitespace or "/")`),void be.warn(he.join(" "))}nn(new Z.wA(`${De}-version`,()=>({library:De,version:Et}),"VERSION"))}function Pt(Lt,Et){if(null!==Lt&&"function"!=typeof Lt)throw jn.create("invalid-log-argument");(0,p.Am)(Lt,Et)}function vr(Lt){(0,p.Ub)(Lt)}const ti="firebase-heartbeat-database",kr=1,Wr="firebase-heartbeat-store";let Kr=null;function In(){return Kr||(Kr=(0,Pe.X3)(ti,kr,{upgrade:(Lt,Et)=>{0===Et&&Lt.createObjectStore(Wr)}}).catch(Lt=>{throw jn.create("idb-open",{originalErrorMessage:Lt.message})})),Kr}function Zt(){return(Zt=(0,b.Z)(function*(Lt){try{return(yield In()).transaction(Wr).objectStore(Wr).get(gn(Lt))}catch(Et){if(Et instanceof Ie.ZR)be.warn(Et.message);else{const Fe=jn.create("idb-get",{originalErrorMessage:Et?.message});be.warn(Fe.message)}}})).apply(this,arguments)}function Wn(Lt,Et){return nr.apply(this,arguments)}function nr(){return(nr=(0,b.Z)(function*(Lt,Et){try{const me=(yield In()).transaction(Wr,"readwrite");return yield me.objectStore(Wr).put(Et,gn(Lt)),me.done}catch(Fe){if(Fe instanceof Ie.ZR)be.warn(Fe.message);else{const me=jn.create("idb-set",{originalErrorMessage:Fe?.message});be.warn(me.message)}}})).apply(this,arguments)}function gn(Lt){return`${Lt.name}!${Lt.options.appId}`}class qr{constructor(Et){this.container=Et,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new Sn(Fe),this._heartbeatsCachePromise=this._storage.read().then(me=>(this._heartbeatsCache=me,me))}triggerHeartbeat(){var Et=this;return(0,b.Z)(function*(){const me=Et.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),De=Cn();if(null===Et._heartbeatsCache&&(Et._heartbeatsCache=yield Et._heartbeatsCachePromise),Et._heartbeatsCache.lastSentHeartbeatDate!==De&&!Et._heartbeatsCache.heartbeats.some(pt=>pt.date===De))return Et._heartbeatsCache.heartbeats.push({date:De,agent:me}),Et._heartbeatsCache.heartbeats=Et._heartbeatsCache.heartbeats.filter(pt=>{const bt=new Date(pt.date).valueOf();return Date.now()-bt<=2592e6}),Et._storage.overwrite(Et._heartbeatsCache)})()}getHeartbeatsHeader(){var Et=this;return(0,b.Z)(function*(){if(null===Et._heartbeatsCache&&(yield Et._heartbeatsCachePromise),null===Et._heartbeatsCache||0===Et._heartbeatsCache.heartbeats.length)return"";const Fe=Cn(),{heartbeatsToSend:me,unsentEntries:De}=function cr(Lt,Et=1024){const Fe=[];let me=Lt.slice();for(const De of Lt){const pt=Fe.find(bt=>bt.agent===De.agent);if(pt){if(pt.dates.push(De.date),Ir(Fe)>Et){pt.dates.pop();break}}else if(Fe.push({agent:De.agent,dates:[De.date]}),Ir(Fe)>Et){Fe.pop();break}me=me.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:me}}(Et._heartbeatsCache.heartbeats),pt=(0,Ie.L)(JSON.stringify({version:2,heartbeats:me}));return Et._heartbeatsCache.lastSentHeartbeatDate=Fe,De.length>0?(Et._heartbeatsCache.heartbeats=De,yield Et._storage.overwrite(Et._heartbeatsCache)):(Et._heartbeatsCache.heartbeats=[],Et._storage.overwrite(Et._heartbeatsCache)),pt})()}}function Cn(){return(new Date).toISOString().substring(0,10)}class Sn{constructor(Et){this.app=Et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,Ie.hl)()&&(0,Ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Et=this;return(0,b.Z)(function*(){return(yield Et._canUseIndexedDBPromise)&&(yield function fn(Lt){return Zt.apply(this,arguments)}(Et.app))||{heartbeats:[]}})()}overwrite(Et){var Fe=this;return(0,b.Z)(function*(){var me;if(yield Fe._canUseIndexedDBPromise){const pt=yield Fe.read();return Wn(Fe.app,{lastSentHeartbeatDate:null!==(me=Et.lastSentHeartbeatDate)&&void 0!==me?me:pt.lastSentHeartbeatDate,heartbeats:Et.heartbeats})}})()}add(Et){var Fe=this;return(0,b.Z)(function*(){var me;if(yield Fe._canUseIndexedDBPromise){const pt=yield Fe.read();return Wn(Fe.app,{lastSentHeartbeatDate:null!==(me=Et.lastSentHeartbeatDate)&&void 0!==me?me:pt.lastSentHeartbeatDate,heartbeats:[...pt.heartbeats,...Et.heartbeats]})}})()}}function Ir(Lt){return(0,Ie.L)(JSON.stringify({version:2,heartbeats:Lt})).length}!function br(Lt){nn(new Z.wA("platform-logger",Et=>new xe(Et),"PRIVATE")),nn(new Z.wA("heartbeat",Et=>new qr(Et),"PRIVATE")),On(Le,"0.9.5",Lt),On(Le,"0.9.5","esm2017"),On("fire-js","")}("")},4859:(sn,qe,G)=>{G.d(qe,{H0:()=>Le,wA:()=>p,zt:()=>Pe});var b=G(5861),Z=G(2090);class p{constructor(be,ve,ke){this.name=be,this.instanceFactory=ve,this.type=ke,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const Ie="[DEFAULT]";class Pe{constructor(be,ve){this.name=be,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const ve=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(ve)){const ke=new Z.BH;if(this.instancesDeferred.set(ve,ke),this.isInitialized(ve)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:ve});et&&ke.resolve(et)}catch{}}return this.instancesDeferred.get(ve).promise}getImmediate(be){var ve;const ke=this.normalizeInstanceIdentifier(be?.identifier),et=null!==(ve=be?.optional)&&void 0!==ve&&ve;if(!this.isInitialized(ke)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ke})}catch(Ke){if(et)return null;throw Ke}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function He(Ae){return"EAGER"===Ae.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:Ie})}catch{}for(const[ve,ke]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(ve);try{const Ke=this.getOrInitializeService({instanceIdentifier:et});ke.resolve(Ke)}catch{}}}}clearInstance(be=Ie){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,b.Z)(function*(){const ve=Array.from(be.instances.values());yield Promise.all([...ve.filter(ke=>"INTERNAL"in ke).map(ke=>ke.INTERNAL.delete()),...ve.filter(ke=>"_delete"in ke).map(ke=>ke._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=Ie){return this.instances.has(be)}getOptions(be=Ie){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:ve={}}=be,ke=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(ke))throw Error(`${this.name}(${ke}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:ke,options:ve});for(const[Ke,_t]of this.instancesDeferred.entries())ke===this.normalizeInstanceIdentifier(Ke)&&_t.resolve(et);return et}onInit(be,ve){var ke;const et=this.normalizeInstanceIdentifier(ve),Ke=null!==(ke=this.onInitCallbacks.get(et))&&void 0!==ke?ke:new Set;Ke.add(be),this.onInitCallbacks.set(et,Ke);const _t=this.instances.get(et);return _t&&be(_t,et),()=>{Ke.delete(be)}}invokeOnInitCallbacks(be,ve){const ke=this.onInitCallbacks.get(ve);if(ke)for(const et of ke)try{et(be,ve)}catch{}}getOrInitializeService({instanceIdentifier:be,options:ve={}}){let ke=this.instances.get(be);if(!ke&&this.component&&(ke=this.component.instanceFactory(this.container,{instanceIdentifier:(Ae=be,Ae===Ie?void 0:Ae),options:ve}),this.instances.set(be,ke),this.instancesOptions.set(be,ve),this.invokeOnInitCallbacks(ke,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,ke)}catch{}var Ae;return ke||null}normalizeInstanceIdentifier(be=Ie){return this.component?this.component.multipleInstances?be:Ie:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const ve=this.getProvider(be.name);if(ve.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);ve.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const ve=new Pe(be,this);return this.providers.set(be,ve),ve}getProviders(){return Array.from(this.providers.values())}}},1877:(sn,qe,G)=>{G.d(qe,{Am:()=>Ae,Ub:()=>Le,Yd:()=>He,in:()=>Z});const b=[];var Z=(()=>{return(be=Z||(Z={}))[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",Z;var be})();const p={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Ie=Z.INFO,Pe={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},xe=(be,ve,...ke)=>{if(ve<be.logLevel)return;const et=(new Date).toISOString(),Ke=Pe[ve];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[Ke](`[${et}]  ${be.name}:`,...ke)};class He{constructor(ve){this.name=ve,this._logLevel=Ie,this._logHandler=xe,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in Z))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?p[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...ve),this._logHandler(this,Z.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...ve),this._logHandler(this,Z.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...ve),this._logHandler(this,Z.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...ve),this._logHandler(this,Z.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...ve),this._logHandler(this,Z.ERROR,...ve)}}function Le(be){b.forEach(ve=>{ve.setLogLevel(be)})}function Ae(be,ve){for(const ke of b){let et=null;ve&&ve.level&&(et=p[ve.level]),ke.userLogHandler=null===be?null:(Ke,_t,...xt)=>{const tt=xt.map(gt=>{if(null==gt)return null;if("string"==typeof gt)return gt;if("number"==typeof gt||"boolean"==typeof gt)return gt.toString();if(gt instanceof Error)return gt.message;try{return JSON.stringify(gt)}catch{return null}}).filter(gt=>gt).join(" ");_t>=(et??Ke.logLevel)&&be({level:Z[_t].toLowerCase(),message:tt,args:xt,type:Ke.name})}}}},259:(sn,qe,G)=>{G.d(qe,{C6:()=>b.getApps,Mq:()=>b.getApp});var b=G(9681);(0,b.registerVersion)("firebase","9.18.0","app")},9260:(sn,qe,G)=>{G.d(qe,{Z:()=>b.Z});var b=G(3942);b.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(sn,qe,G)=>{G.r(qe);var b=G(5861),Z=G(3942),p=G(5114),Ie=G(2090),He=(G(9681),G(1877),G(4859));function Le(){return window}const Ae=2e3;function ve(){return ve=(0,b.Z)(function*(te,ie,X){var Ve;const{BuildInfo:de}=Le();(0,p.ap)(ie.sessionId,"AuthEvent did not contain a session ID");const ge=yield function gt(te){return we.apply(this,arguments)}(ie.sessionId),le={};return(0,p.aq)()?le.ibi=de.packageName:(0,p.ar)()?le.apn=de.packageName:(0,p.as)(te,"operation-not-supported-in-this-environment"),de.displayName&&(le.appDisplayName=de.displayName),le.sessionId=ge,(0,p.at)(te,X,ie.type,void 0,null!==(Ve=ie.eventId)&&void 0!==Ve?Ve:void 0,le)}),ve.apply(this,arguments)}function et(){return(et=(0,b.Z)(function*(te){const{BuildInfo:ie}=Le(),X={};(0,p.aq)()?X.iosBundleId=ie.packageName:(0,p.ar)()?X.androidPackageName=ie.packageName:(0,p.as)(te,"operation-not-supported-in-this-environment"),yield(0,p.au)(te,X)})).apply(this,arguments)}function xt(){return(xt=(0,b.Z)(function*(te,ie,X){const{cordova:Ve}=Le();let de=()=>{};try{yield new Promise((ge,le)=>{let Re=null;function st(){var Ht;ge();const En=null===(Ht=Ve.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof En&&En(),"function"==typeof X?.close&&X.close()}function Ct(){Re||(Re=window.setTimeout(()=>{le((0,p.aw)(te,"redirect-cancelled-by-user"))},Ae))}function zt(){"visible"===document?.visibilityState&&Ct()}ie.addPassiveListener(st),document.addEventListener("resume",Ct,!1),(0,p.ar)()&&document.addEventListener("visibilitychange",zt,!1),de=()=>{ie.removePassiveListener(st),document.removeEventListener("resume",Ct,!1),document.removeEventListener("visibilitychange",zt,!1),Re&&window.clearTimeout(Re)}})}finally{de()}})).apply(this,arguments)}function we(){return(we=(0,b.Z)(function*(te){const ie=function yt(te){if((0,p.ap)(/[0-9a-zA-Z]+/.test(te),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(te);const ie=new ArrayBuffer(te.length),X=new Uint8Array(ie);for(let Ve=0;Ve<te.length;Ve++)X[Ve]=te.charCodeAt(Ve);return X}(te),X=yield crypto.subtle.digest("SHA-256",ie);return Array.from(new Uint8Array(X)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const mt=20;class ot extends p.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ie=>{this.resolveInialized=ie})}addPassiveListener(ie){this.passiveListeners.add(ie)}removePassiveListener(ie){this.passiveListeners.delete(ie)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ie){return this.resolveInialized(),this.passiveListeners.forEach(X=>X(ie)),super.onEvent(ie)}initialized(){var ie=this;return(0,b.Z)(function*(){yield ie.initPromise})()}}function Se(te){return Te.apply(this,arguments)}function Te(){return(Te=(0,b.Z)(function*(te){const ie=yield wt()._get(Qt(te));return ie&&(yield wt()._remove(Qt(te))),ie})).apply(this,arguments)}function ft(){const te=[],ie="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let X=0;X<mt;X++){const Ve=Math.floor(Math.random()*ie.length);te.push(ie.charAt(Ve))}return te.join("")}function wt(){return(0,p.az)(p.b)}function Qt(te){return(0,p.aA)("authEvent",te.config.apiKey,te.name)}function ut(te){if(!te?.includes("?"))return{};const[ie,...X]=te.split("?");return(0,Ie.zd)(X.join("?"))}const vt=class dt{constructor(){this._redirectPersistence=p.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(ie){var X=this;return(0,b.Z)(function*(){const Ve=ie._key();let de=X.eventManagers.get(Ve);return de||(de=new ot(ie),X.eventManagers.set(Ve,de),X.attachCallbackListeners(ie,de)),de})()}_openPopup(ie){(0,p.as)(ie,"operation-not-supported-in-this-environment")}_openRedirect(ie,X,Ve,de){var ge=this;return(0,b.Z)(function*(){!function tt(te){var ie,X,Ve,de,ge,le,Re,st,Ct,zt;const Ht=Le();(0,p.ax)("function"==typeof(null===(ie=Ht?.universalLinks)||void 0===ie?void 0:ie.subscribe),te,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,p.ax)(typeof(null===(X=Ht?.BuildInfo)||void 0===X?void 0:X.packageName)<"u",te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,p.ax)("function"==typeof(null===(ge=null===(de=null===(Ve=Ht?.cordova)||void 0===Ve?void 0:Ve.plugins)||void 0===de?void 0:de.browsertab)||void 0===ge?void 0:ge.openUrl),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(st=null===(Re=null===(le=Ht?.cordova)||void 0===le?void 0:le.plugins)||void 0===Re?void 0:Re.browsertab)||void 0===st?void 0:st.isAvailable),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(zt=null===(Ct=Ht?.cordova)||void 0===Ct?void 0:Ct.InAppBrowser)||void 0===zt?void 0:zt.open),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ie);const le=yield ge._initialize(ie);yield le.initialized(),le.resetRedirect(),(0,p.aD)(),yield ge._originValidation(ie);const Re=function ze(te,ie,X=null){return{type:ie,eventId:X,urlResponse:null,sessionId:ft(),postBody:null,tenantId:te.tenantId,error:(0,p.aw)(te,"no-auth-event")}}(ie,Ve,de);yield function Ft(te,ie){return wt()._set(Qt(te),ie)}(ie,Re);const st=yield function be(te,ie,X){return ve.apply(this,arguments)}(ie,Re,X),Ct=yield function Ke(te){const{cordova:ie}=Le();return new Promise(X=>{ie.plugins.browsertab.isAvailable(Ve=>{let de=null;Ve?ie.plugins.browsertab.openUrl(te):de=ie.InAppBrowser.open(te,(0,p.av)()?"_blank":"_system","location=yes"),X(de)})})}(st);return function _t(te,ie,X){return xt.apply(this,arguments)}(ie,le,Ct)})()}_isIframeWebStorageSupported(ie,X){throw new Error("Method not implemented.")}_originValidation(ie){const X=ie._key();return this.originValidationPromises[X]||(this.originValidationPromises[X]=function ke(te){return et.apply(this,arguments)}(ie)),this.originValidationPromises[X]}attachCallbackListeners(ie,X){const{universalLinks:Ve,handleOpenURL:de,BuildInfo:ge}=Le(),le=setTimeout((0,b.Z)(function*(){yield Se(ie),X.onEvent(ht())}),500),Re=function(){var zt=(0,b.Z)(function*(Ht){clearTimeout(le);const En=yield Se(ie);let Ci=null;En&&Ht?.url&&(Ci=function We(te,ie){var X,Ve;const de=function $e(te){const ie=ut(te),X=ie.link?decodeURIComponent(ie.link):void 0,Ve=ut(X).link,de=ie.deep_link_id?decodeURIComponent(ie.deep_link_id):void 0;return ut(de).link||de||Ve||X||te}(ie);if(de.includes("/__/auth/callback")){const ge=ut(de),le=ge.firebaseError?function jt(te){try{return JSON.parse(te)}catch{return null}}(decodeURIComponent(ge.firebaseError)):null,Re=null===(Ve=null===(X=le?.code)||void 0===X?void 0:X.split("auth/"))||void 0===Ve?void 0:Ve[1],st=Re?(0,p.aw)(Re):null;return st?{type:te.type,eventId:te.eventId,tenantId:te.tenantId,error:st,urlResponse:null,sessionId:null,postBody:null}:{type:te.type,eventId:te.eventId,tenantId:te.tenantId,sessionId:te.sessionId,urlResponse:de,postBody:null}}return null}(En,Ht.url)),X.onEvent(Ci||ht())});return function(En){return zt.apply(this,arguments)}}();typeof Ve<"u"&&"function"==typeof Ve.subscribe&&Ve.subscribe(null,Re);const st=de,Ct=`${ge.packageName.toLowerCase()}://`;Le().handleOpenURL=function(){var zt=(0,b.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Ct)&&Re({url:Ht}),"function"==typeof st)try{st(Ht)}catch(En){console.error(En)}});return function(Ht){return zt.apply(this,arguments)}}()}};function ht(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,p.aw)("no-auth-event")}}const Kt=1e3;function nn(){var te;return(null===(te=self?.location)||void 0===te?void 0:te.protocol)||null}function Nn(te=(0,Ie.z$)()){return!("file:"!==nn()&&"ionic:"!==nn()&&"capacitor:"!==nn()||!te.toLowerCase().match(/iphone|ipad|ipod|android/))}function zn(){try{const te=self.localStorage,ie=p.aI();if(te)return te.setItem(ie,"1"),te.removeItem(ie),!function Lr(te=(0,Ie.z$)()){return function Hn(){return(0,Ie.w1)()&&11===document?.documentMode}()||function jn(te=(0,Ie.z$)()){return/Edge\/\d+/.test(te)}(te)}()||(0,Ie.hl)()}catch{return Bn()&&(0,Ie.hl)()}return!1}function Bn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kn(){return(function Tt(){return"http:"===nn()||"https:"===nn()}()||(0,Ie.ru)()||Nn())&&!function Un(){return(0,Ie.b$)()||(0,Ie.UG)()}()&&zn()&&!Bn()}function Yn(){return Nn()&&typeof document<"u"}function un(){return(un=(0,b.Z)(function*(){return!!Yn()&&new Promise(te=>{const ie=setTimeout(()=>{te(!1)},Kt);document.addEventListener("deviceready",()=>{clearTimeout(ie),te(!0)})})})).apply(this,arguments)}const Pt={LOCAL:"local",NONE:"none",SESSION:"session"},vr=p.ax,ti="persistence";function Wr(te){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,b.Z)(function*(te){yield te._initializationPromise;const ie=fn(),X=p.aA(ti,te.config.apiKey,te.name);ie&&ie.setItem(X,te._getPersistence())})).apply(this,arguments)}function fn(){var te;try{return(null===(te=function On(){return typeof window<"u"?window:null}())||void 0===te?void 0:te.sessionStorage)||null}catch{return null}}const Zt=p.ax;class Wn{constructor(){this.browserResolver=p.az(p.k),this.cordovaResolver=p.az(vt),this.underlyingResolver=null,this._redirectPersistence=p.a,this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(ie){var X=this;return(0,b.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._initialize(ie)})()}_openPopup(ie,X,Ve,de){var ge=this;return(0,b.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openPopup(ie,X,Ve,de)})()}_openRedirect(ie,X,Ve,de){var ge=this;return(0,b.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openRedirect(ie,X,Ve,de)})()}_isIframeWebStorageSupported(ie,X){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ie,X)}_originValidation(ie){return this.assertedUnderlyingResolver._originValidation(ie)}get _shouldInitProactively(){return Yn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ie=this;return(0,b.Z)(function*(){if(ie.underlyingResolver)return;const X=yield function tr(){return un.apply(this,arguments)}();ie.underlyingResolver=X?ie.cordovaResolver:ie.browserResolver})()}}function nr(te){return te.unwrap()}function rr(te){return qr(te)}function qr(te){const{_tokenResponse:ie}=te instanceof Ie.ZR?te.customData:te;if(!ie)return null;if(!(te instanceof Ie.ZR)&&"temporaryProof"in ie&&"phoneNumber"in ie)return p.P.credentialFromResult(te);const X=ie.providerId;if(!X||X===p.o.PASSWORD)return null;let Ve;switch(X){case p.o.GOOGLE:Ve=p.Q;break;case p.o.FACEBOOK:Ve=p.N;break;case p.o.GITHUB:Ve=p.T;break;case p.o.TWITTER:Ve=p.W;break;default:const{oauthIdToken:de,oauthAccessToken:ge,oauthTokenSecret:le,pendingToken:Re,nonce:st}=ie;return ge||le||de||Re?Re?X.startsWith("saml.")?p.aL._create(X,Re):p.J._fromParams({providerId:X,signInMethod:X,pendingToken:Re,idToken:de,accessToken:ge}):new p.U(X).credential({idToken:de,accessToken:ge,rawNonce:st}):null}return te instanceof Ie.ZR?Ve.credentialFromError(te):Ve.credentialFromResult(te)}function Cn(te,ie){return ie.catch(X=>{throw X instanceof Ie.ZR&&function ni(te,ie){var X;const Ve=null===(X=ie.customData)||void 0===X?void 0:X._tokenResponse;if("auth/multi-factor-auth-required"===ie?.code)ie.resolver=new Ir(te,p.an(te,ie));else if(Ve){const de=qr(ie),ge=ie;de&&(ge.credential=de,ge.tenantId=Ve.tenantId||void 0,ge.email=Ve.email||void 0,ge.phoneNumber=Ve.phoneNumber||void 0)}}(te,X),X}).then(X=>{const de=X.user;return{operationType:X.operationType,credential:rr(X),additionalUserInfo:p.al(X),user:br.getOrCreate(de)}})}function cr(te,ie){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,b.Z)(function*(te,ie){const X=yield ie;return{verificationId:X.verificationId,confirm:Ve=>Cn(te,X.confirm(Ve))}})).apply(this,arguments)}class Ir{constructor(ie,X){this.resolver=X,this.auth=function gn(te){return te.wrapped()}(ie)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ie){return Cn(nr(this.auth),this.resolver.resolveSignIn(ie))}}class br{constructor(ie){this._delegate=ie,this.multiFactor=p.ao(ie)}static getOrCreate(ie){return br.USER_MAP.has(ie)||br.USER_MAP.set(ie,new br(ie)),br.USER_MAP.get(ie)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ie){return this._delegate.getIdTokenResult(ie)}getIdToken(ie){return this._delegate.getIdToken(ie)}linkAndRetrieveDataWithCredential(ie){return this.linkWithCredential(ie)}linkWithCredential(ie){var X=this;return(0,b.Z)(function*(){return Cn(X.auth,p.Z(X._delegate,ie))})()}linkWithPhoneNumber(ie,X){var Ve=this;return(0,b.Z)(function*(){return cr(Ve.auth,p.l(Ve._delegate,ie,X))})()}linkWithPopup(ie){var X=this;return(0,b.Z)(function*(){return Cn(X.auth,p.d(X._delegate,ie,Wn))})()}linkWithRedirect(ie){var X=this;return(0,b.Z)(function*(){return yield Wr(p.aE(X.auth)),p.g(X._delegate,ie,Wn)})()}reauthenticateAndRetrieveDataWithCredential(ie){return this.reauthenticateWithCredential(ie)}reauthenticateWithCredential(ie){var X=this;return(0,b.Z)(function*(){return Cn(X.auth,p._(X._delegate,ie))})()}reauthenticateWithPhoneNumber(ie,X){return cr(this.auth,p.r(this._delegate,ie,X))}reauthenticateWithPopup(ie){return Cn(this.auth,p.e(this._delegate,ie,Wn))}reauthenticateWithRedirect(ie){var X=this;return(0,b.Z)(function*(){return yield Wr(p.aE(X.auth)),p.h(X._delegate,ie,Wn)})()}sendEmailVerification(ie){return p.ab(this._delegate,ie)}unlink(ie){var X=this;return(0,b.Z)(function*(){return yield p.ak(X._delegate,ie),X})()}updateEmail(ie){return p.ag(this._delegate,ie)}updatePassword(ie){return p.ah(this._delegate,ie)}updatePhoneNumber(ie){return p.u(this._delegate,ie)}updateProfile(ie){return p.af(this._delegate,ie)}verifyBeforeUpdateEmail(ie,X){return p.ac(this._delegate,ie,X)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}br.USER_MAP=new WeakMap;const Lt=p.ax;let Et=(()=>{class te{constructor(X,Ve){if(this.app=X,Ve.isInitialized())return this._delegate=Ve.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=X.options;Lt(de,"invalid-api-key",{appName:X.name}),Lt(de,"invalid-api-key",{appName:X.name});const ge=typeof window<"u"?Wn:void 0;this._delegate=Ve.initialize({options:{persistence:me(de,X.name),popupRedirectResolver:ge}}),this._delegate._updateErrorMap(p.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?br.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(X){this._delegate.languageCode=X}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(X){this._delegate.tenantId=X}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(X,Ve){p.G(this._delegate,X,Ve)}applyActionCode(X){return p.a2(this._delegate,X)}checkActionCode(X){return p.a3(this._delegate,X)}confirmPasswordReset(X,Ve){return p.a1(this._delegate,X,Ve)}createUserWithEmailAndPassword(X,Ve){var de=this;return(0,b.Z)(function*(){return Cn(de._delegate,p.a5(de._delegate,X,Ve))})()}fetchProvidersForEmail(X){return this.fetchSignInMethodsForEmail(X)}fetchSignInMethodsForEmail(X){return p.aa(this._delegate,X)}isSignInWithEmailLink(X){return p.a8(this._delegate,X)}getRedirectResult(){var X=this;return(0,b.Z)(function*(){Lt(kn(),X._delegate,"operation-not-supported-in-this-environment");const Ve=yield p.j(X._delegate,Wn);return Ve?Cn(X._delegate,Promise.resolve(Ve)):{credential:null,user:null}})()}addFrameworkForLogging(X){!function Bt(te,ie){(0,p.aE)(te)._logFramework(ie)}(this._delegate,X)}onAuthStateChanged(X,Ve,de){const{next:ge,error:le,complete:Re}=Fe(X,Ve,de);return this._delegate.onAuthStateChanged(ge,le,Re)}onIdTokenChanged(X,Ve,de){const{next:ge,error:le,complete:Re}=Fe(X,Ve,de);return this._delegate.onIdTokenChanged(ge,le,Re)}sendSignInLinkToEmail(X,Ve){return p.a7(this._delegate,X,Ve)}sendPasswordResetEmail(X,Ve){return p.a0(this._delegate,X,Ve||void 0)}setPersistence(X){var Ve=this;return(0,b.Z)(function*(){let de;switch(function kr(te,ie){vr(Object.values(Pt).includes(ie),te,"invalid-persistence-type"),(0,Ie.b$)()?vr(ie!==Pt.SESSION,te,"unsupported-persistence-type"):(0,Ie.UG)()?vr(ie===Pt.NONE,te,"unsupported-persistence-type"):Bn()?vr(ie===Pt.NONE||ie===Pt.LOCAL&&(0,Ie.hl)(),te,"unsupported-persistence-type"):vr(ie===Pt.NONE||zn(),te,"unsupported-persistence-type")}(Ve._delegate,X),X){case Pt.SESSION:de=p.a;break;case Pt.LOCAL:de=(yield p.az(p.i)._isAvailable())?p.i:p.b;break;case Pt.NONE:de=p.L;break;default:return p.as("argument-error",{appName:Ve._delegate.name})}return Ve._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(X){return this.signInWithCredential(X)}signInAnonymously(){return Cn(this._delegate,p.X(this._delegate))}signInWithCredential(X){return Cn(this._delegate,p.Y(this._delegate,X))}signInWithCustomToken(X){return Cn(this._delegate,p.$(this._delegate,X))}signInWithEmailAndPassword(X,Ve){return Cn(this._delegate,p.a6(this._delegate,X,Ve))}signInWithEmailLink(X,Ve){return Cn(this._delegate,p.a9(this._delegate,X,Ve))}signInWithPhoneNumber(X,Ve){return cr(this._delegate,p.s(this._delegate,X,Ve))}signInWithPopup(X){var Ve=this;return(0,b.Z)(function*(){return Lt(kn(),Ve._delegate,"operation-not-supported-in-this-environment"),Cn(Ve._delegate,p.c(Ve._delegate,X,Wn))})()}signInWithRedirect(X){var Ve=this;return(0,b.Z)(function*(){return Lt(kn(),Ve._delegate,"operation-not-supported-in-this-environment"),yield Wr(Ve._delegate),p.f(Ve._delegate,X,Wn)})()}updateCurrentUser(X){return this._delegate.updateCurrentUser(X)}verifyPasswordResetCode(X){return p.a4(this._delegate,X)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return te.Persistence=Pt,te})();function Fe(te,ie,X){let Ve=te;"function"!=typeof te&&({next:Ve,error:ie,complete:X}=te);const de=Ve;return{next:le=>de(le&&br.getOrCreate(le)),error:ie,complete:X}}function me(te,ie){const X=function In(te,ie){const X=fn();if(!X)return[];const Ve=p.aA(ti,te,ie);switch(X.getItem(Ve)){case Pt.NONE:return[p.L];case Pt.LOCAL:return[p.i,p.a];case Pt.SESSION:return[p.a];default:return[]}}(te,ie);if(typeof self<"u"&&!X.includes(p.i)&&X.push(p.i),typeof window<"u")for(const Ve of[p.b,p.a])X.includes(Ve)||X.push(Ve);return X.includes(p.L)||X.push(p.L),X}class De{constructor(){this.providerId="phone",this._delegate=new p.P(nr(Z.Z.auth()))}static credential(ie,X){return p.P.credential(ie,X)}verifyPhoneNumber(ie,X){return this._delegate.verifyPhoneNumber(ie,X)}unwrap(){return this._delegate}}De.PHONE_SIGN_IN_METHOD=p.P.PHONE_SIGN_IN_METHOD,De.PROVIDER_ID=p.P.PROVIDER_ID;const pt=p.ax;class bt{constructor(ie,X,Ve=Z.Z.app()){var de;pt(null===(de=Ve.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:Ve.name}),this._delegate=new p.R(ie,X,Ve.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fe(te){te.INTERNAL.registerComponent(new He.wA("auth-compat",ie=>{const X=ie.getProvider("app-compat").getImmediate(),Ve=ie.getProvider("auth");return new Et(X,Ve)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:p.A.EMAIL_SIGNIN,PASSWORD_RESET:p.A.PASSWORD_RESET,RECOVER_EMAIL:p.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:p.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:p.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:p.A.VERIFY_EMAIL}},EmailAuthProvider:p.M,FacebookAuthProvider:p.N,GithubAuthProvider:p.T,GoogleAuthProvider:p.Q,OAuthProvider:p.U,SAMLAuthProvider:p.V,PhoneAuthProvider:De,PhoneMultiFactorGenerator:p.m,RecaptchaVerifier:bt,TwitterAuthProvider:p.W,Auth:Et,AuthCredential:p.H,Error:Ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),te.registerVersion("@firebase/auth-compat","0.3.5")}(Z.Z)},8766:(sn,qe,G)=>{G.d(qe,{Lj:()=>mt,X3:()=>yt});var b=G(5861);const Z=(Te,We)=>We.some(ft=>Te instanceof ft);let p,Ie;const He=new WeakMap,Le=new WeakMap,Ae=new WeakMap,be=new WeakMap,ve=new WeakMap;let Ke={get(Te,We,ft){if(Te instanceof IDBTransaction){if("done"===We)return Le.get(Te);if("objectStoreNames"===We)return Te.objectStoreNames||Ae.get(Te);if("store"===We)return ft.objectStoreNames[1]?void 0:ft.objectStore(ft.objectStoreNames[0])}return gt(Te[We])},set:(Te,We,ft)=>(Te[We]=ft,!0),has:(Te,We)=>Te instanceof IDBTransaction&&("done"===We||"store"===We)||We in Te};function tt(Te){return"function"==typeof Te?function xt(Te){return Te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Te)?function(...We){return Te.apply(we(this),We),gt(He.get(this))}:function(...We){return gt(Te.apply(we(this),We))}:function(We,...ft){const wt=Te.call(we(this),We,...ft);return Ae.set(wt,We.sort?We.sort():[We]),gt(wt)}}(Te):(Te instanceof IDBTransaction&&function et(Te){if(Le.has(Te))return;const We=new Promise((ft,wt)=>{const Qt=()=>{Te.removeEventListener("complete",jt),Te.removeEventListener("error",$e),Te.removeEventListener("abort",$e)},jt=()=>{ft(),Qt()},$e=()=>{wt(Te.error||new DOMException("AbortError","AbortError")),Qt()};Te.addEventListener("complete",jt),Te.addEventListener("error",$e),Te.addEventListener("abort",$e)});Le.set(Te,We)}(Te),Z(Te,function Pe(){return p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Te,Ke):Te)}function gt(Te){if(Te instanceof IDBRequest)return function ke(Te){const We=new Promise((ft,wt)=>{const Qt=()=>{Te.removeEventListener("success",jt),Te.removeEventListener("error",$e)},jt=()=>{ft(gt(Te.result)),Qt()},$e=()=>{wt(Te.error),Qt()};Te.addEventListener("success",jt),Te.addEventListener("error",$e)});return We.then(ft=>{ft instanceof IDBCursor&&He.set(ft,Te)}).catch(()=>{}),ve.set(We,Te),We}(Te);if(be.has(Te))return be.get(Te);const We=tt(Te);return We!==Te&&(be.set(Te,We),ve.set(We,Te)),We}const we=Te=>ve.get(Te);function yt(Te,We,{blocked:ft,upgrade:wt,blocking:Qt,terminated:jt}={}){const $e=indexedDB.open(Te,We),ut=gt($e);return wt&&$e.addEventListener("upgradeneeded",Qe=>{wt(gt($e.result),Qe.oldVersion,Qe.newVersion,gt($e.transaction))}),ft&&$e.addEventListener("blocked",()=>ft()),ut.then(Qe=>{jt&&Qe.addEventListener("close",()=>jt()),Qt&&Qe.addEventListener("versionchange",()=>Qt())}).catch(()=>{}),ut}function mt(Te,{blocked:We}={}){const ft=indexedDB.deleteDatabase(Te);return We&&ft.addEventListener("blocked",()=>We()),gt(ft).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],Ft=new Map;function Se(Te,We){if(!(Te instanceof IDBDatabase)||We in Te||"string"!=typeof We)return;if(Ft.get(We))return Ft.get(We);const ft=We.replace(/FromIndex$/,""),wt=We!==ft,Qt=ze.includes(ft);if(!(ft in(wt?IDBIndex:IDBObjectStore).prototype)||!Qt&&!ot.includes(ft))return;const jt=function(){var $e=(0,b.Z)(function*(ut,...Qe){const dt=this.transaction(ut,Qt?"readwrite":"readonly");let vt=dt.store;return wt&&(vt=vt.index(Qe.shift())),(yield Promise.all([vt[ft](...Qe),Qt&&dt.done]))[0]});return function(Qe){return $e.apply(this,arguments)}}();return Ft.set(We,jt),jt}!function _t(Te){Ke=Te(Ke)}(Te=>({...Te,get:(We,ft,wt)=>Se(We,ft)||Te.get(We,ft,wt),has:(We,ft)=>!!Se(We,ft)||Te.has(We,ft)}))},5861:(sn,qe,G)=>{function b(p,Ie,Pe,xe,He,Le,Ae){try{var be=p[Le](Ae),ve=be.value}catch(ke){return void Pe(ke)}be.done?Ie(ve):Promise.resolve(ve).then(xe,He)}function Z(p){return function(){var Ie=this,Pe=arguments;return new Promise(function(xe,He){var Le=p.apply(Ie,Pe);function Ae(ve){b(Le,xe,He,Ae,be,"next",ve)}function be(ve){b(Le,xe,He,Ae,be,"throw",ve)}Ae(void 0)})}}G.d(qe,{Z:()=>Z})}},sn=>{sn(sn.s=8410)}]);