"use strict";(self.webpackChunkrpg_psicoleigos=self.webpackChunkrpg_psicoleigos||[]).push([[179],{6217:(zt,We,j)=>{j.d(We,{nm:()=>Li});var T=j(2122);j(4650),j(259);var lt=j(5861),Qe=j(9681),Ye=j(4859),Et=j(2090),Ne=j(1877);const Ie=new Map,tt={activated:!1,tokenObservers:[]},it={initialized:!1,enabled:!1};function ft(Re){return Ie.get(Re)||Object.assign({},tt)}function Pt(){return it}const Le="https://content-firebaseappcheck.googleapis.com/v1",nt="exchangeDebugToken",yt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Mt{constructor(ye,Ve,dt,Lt,an){if(this.operation=ye,this.retryPolicy=Ve,this.getWaitDuration=dt,this.lowerBound=Lt,this.upperBound=an,this.pending=null,this.nextErrorWaitInterval=Lt,Lt>an)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ye){var Ve=this;return(0,lt.Z)(function*(){Ve.stop();try{Ve.pending=new Et.BH,yield function It(Re){return new Promise(ye=>{setTimeout(ye,Re)})}(Ve.getNextRun(ye)),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new Et.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(dt){Ve.retryPolicy(dt)?Ve.process(!1).catch(()=>{}):Ve.stop()}})()}getNextRun(ye){if(ye)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const jt=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jn(Re,ye){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,lt.Z)(function*({url:Re,body:ye},Ve){const dt={"Content-Type":"application/json"},Lt=Ve.getImmediate({optional:!0});if(Lt){const _r=yield Lt.getHeartbeatsHeader();_r&&(dt["X-Firebase-Client"]=_r)}const an={method:"POST",body:JSON.stringify(ye),headers:dt};let Rn,mr;try{Rn=yield fetch(Re,an)}catch(_r){throw jt.create("fetch-network-error",{originalErrorMessage:_r?.message})}if(200!==Rn.status)throw jt.create("fetch-status-error",{httpStatus:Rn.status});try{mr=yield Rn.json()}catch(_r){throw jt.create("fetch-parse-error",{originalErrorMessage:_r?.message})}const Ln=mr.ttl.match(/^([\d.]+)(s)$/);if(!Ln||!Ln[2]||isNaN(Number(Ln[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${mr.ttl}`});const Ds=1e3*Number(Ln[1]),Qr=Date.now();return{token:mr.token,expireTimeMillis:Qr+Ds,issuedAtTimeMillis:Qr}})).apply(this,arguments)}const Cn="firebase-app-check-database",qn=1,Kr="firebase-app-check-store";let An=null;function ri(Re,ye){return mn.apply(this,arguments)}function mn(){return(mn=(0,lt.Z)(function*(Re,ye){const dt=(yield function Gt(){return An||(An=new Promise((Re,ye)=>{try{const Ve=indexedDB.open(Cn,qn);Ve.onsuccess=dt=>{Re(dt.target.result)},Ve.onerror=dt=>{var Lt;ye(jt.create("storage-open",{originalErrorMessage:null===(Lt=dt.target.error)||void 0===Lt?void 0:Lt.message}))},Ve.onupgradeneeded=dt=>{0===dt.oldVersion&&dt.target.result.createObjectStore(Kr,{keyPath:"compositeKey"})}}catch(Ve){ye(jt.create("storage-open",{originalErrorMessage:Ve?.message}))}}),An)}()).transaction(Kr,"readwrite"),an=dt.objectStore(Kr).put({compositeKey:Re,value:ye});return new Promise((Rn,mr)=>{an.onsuccess=Ln=>{Rn()},dt.onerror=Ln=>{var Ds;mr(jt.create("storage-set",{originalErrorMessage:null===(Ds=Ln.target.error)||void 0===Ds?void 0:Ds.message}))}})})).apply(this,arguments)}const nr=new Ne.Yd("@firebase/app-check");function Ir(Re,ye){return(0,Et.hl)()?function ei(Re,ye){return ri(function pr(Re){return`${Re.options.appId}-${Re.name}`}(Re),ye)}(Re,ye).catch(Ve=>{nr.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function kn(){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,lt.Z)(function*(){const Re=Pt();if(Re.enabled&&Re.token)return Re.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Rt={error:"UNKNOWN_ERROR"};function bt(Re){return Et.US.encodeString(JSON.stringify(Re),!1)}function Ut(Re){return hn.apply(this,arguments)}function hn(){return(hn=(0,lt.Z)(function*(Re,ye=!1){const Ve=Re.app;!function gt(Re){if(!ft(Re).activated)throw jt.create("use-before-activation",{appName:Re.name})}(Ve);const dt=ft(Ve);let an,Lt=dt.token;if(Lt&&!te(Lt)&&(dt.token=void 0,Lt=void 0),!Lt){const Ln=yield dt.cachedTokenPromise;Ln&&(te(Ln)?Lt=Ln:yield Ir(Ve,void 0))}if(!ye&&Lt&&te(Lt))return{token:Lt.token};let mr,Rn=!1;if(function jr(){return Pt().enabled}()){dt.exchangeTokenPromise||(dt.exchangeTokenPromise=jn(function cr(Re,ye){const{projectId:Ve,appId:dt,apiKey:Lt}=Re.options;return{url:`${Le}/projects/${Ve}/apps/${dt}:${nt}?key=${Lt}`,body:{debug_token:ye}}}(Ve,yield kn()),Re.heartbeatServiceProvider).finally(()=>{dt.exchangeTokenPromise=void 0}),Rn=!0);const Ln=yield dt.exchangeTokenPromise;return yield Ir(Ve,Ln),dt.token=Ln,{token:Ln.token}}try{dt.exchangeTokenPromise||(dt.exchangeTokenPromise=dt.provider.getToken().finally(()=>{dt.exchangeTokenPromise=void 0}),Rn=!0),Lt=yield ft(Ve).exchangeTokenPromise}catch(Ln){"appCheck/throttled"===Ln.code?nr.warn(Ln.message):nr.error(Ln),an=Ln}return Lt?an?mr=te(Lt)?{token:Lt.token,internalError:an}:re(an):(mr={token:Lt.token},dt.token=Lt,yield Ir(Ve,Lt)):mr=re(an),Rn&&function _e(Re,ye){const Ve=ft(Re).tokenObservers;for(const dt of Ve)try{"EXTERNAL"===dt.type&&null!=ye.error?dt.error(ye.error):dt.next(ye)}catch{}}(Ve,mr),mr})).apply(this,arguments)}function En(Re,ye){const Ve=ft(Re),dt=Ve.tokenObservers.filter(Lt=>Lt.next!==ye);0===dt.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),Ve.tokenObservers=dt}function kr(Re){const{app:ye}=Re,Ve=ft(ye);let dt=Ve.tokenRefresher;dt||(dt=function be(Re){const{app:ye}=Re;return new Mt((0,lt.Z)(function*(){let dt;if(dt=ft(ye).token?yield Ut(Re,!0):yield Ut(Re),dt.error)throw dt.error;if(dt.internalError)throw dt.internalError}),()=>!0,()=>{const Ve=ft(ye);if(Ve.token){let dt=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return dt=Math.min(dt,Ve.token.expireTimeMillis-3e5),Math.max(0,dt-Date.now())}return 0},yt.RETRIAL_MIN_WAIT,yt.RETRIAL_MAX_WAIT)}(Re),Ve.tokenRefresher=dt),!dt.isRunning()&&Ve.isTokenAutoRefreshEnabled&&dt.start()}function te(Re){return Re.expireTimeMillis-Date.now()>0}function re(Re){return{token:bt(Rt),error:Re}}class Q{constructor(ye,Ve){this.app=ye,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:ye}=ft(this.app);for(const Ve of ye)En(this.app,Ve.next);return Promise.resolve()}}const Jt="app-check-internal";!function Nn(){(0,Qe._registerComponent)(new Ye.wA("app-check",Re=>function Pe(Re,ye){return new Q(Re,ye)}(Re.getProvider("app").getImmediate(),Re.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Re,ye,Ve)=>{Re.getProvider(Jt).initialize()})),(0,Qe._registerComponent)(new Ye.wA(Jt,Re=>function ae(Re){return{getToken:ye=>Ut(Re,ye),addTokenListener:ye=>function Yt(Re,ye,Ve,dt){const{app:Lt}=Re,an=ft(Lt);if(an.tokenObservers=[...an.tokenObservers,{next:Ve,error:dt,type:ye}],an.token&&te(an.token)){const mr=an.token;Promise.resolve().then(()=>{Ve({token:mr.token}),kr(Re)}).catch(()=>{})}an.cachedTokenPromise.then(()=>kr(Re))}(Re,"INTERNAL",ye),removeTokenListener:ye=>En(Re.app,ye)}}(Re.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Qe.registerVersion)("@firebase/app-check","0.6.4")}();class Li{constructor(){return(0,T.vb)("app-check")}}typeof window<"u"&&window},1205:(zt,We,j)=>{j.d(We,{zQ:()=>Le,ww:()=>rt,rT:()=>it,f7:()=>qt,L6:()=>Ie,_Q:()=>tt,lh:()=>ft,Qv:()=>Ne,nw:()=>Pt});var T=j(4650),Y=j(7579),h=j(9646),ve=j(9751),Se=j(8996),Te=j(6451),ke=j(5363),pe=j(3900),Fe=j(4004),me=j(6063);class de extends Y.x{constructor(nt=1/0,yt=1/0,st=me.l){super(),this._bufferSize=nt,this._windowTime=yt,this._timestampProvider=st,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=yt===1/0,this._bufferSize=Math.max(1,nt),this._windowTime=Math.max(1,yt)}next(nt){const{isStopped:yt,_buffer:st,_infiniteTimeWindow:Mt,_timestampProvider:It,_windowTime:tn}=this;yt||(st.push(nt),!Mt&&st.push(It.now()+tn)),this._trimBuffer(),super.next(nt)}_subscribe(nt){this._throwIfClosed(),this._trimBuffer();const yt=this._innerSubscribe(nt),{_infiniteTimeWindow:st,_buffer:Mt}=this,It=Mt.slice();for(let tn=0;tn<It.length&&!nt.closed;tn+=st?1:2)nt.next(It[tn]);return this._checkFinalizedStatuses(nt),yt}_trimBuffer(){const{_bufferSize:nt,_timestampProvider:yt,_buffer:st,_infiniteTimeWindow:Mt}=this,It=(Mt?1:2)*nt;if(nt<1/0&&It<st.length&&st.splice(0,st.length-It),!Mt){const tn=yt.now();let jt=0;for(let Wt=1;Wt<st.length&&st[Wt]<=tn;Wt+=2)jt=Wt;jt&&st.splice(0,jt+1)}}}var Ce=j(3099);function et($e,nt,yt){let st,Mt=!1;return $e&&"object"==typeof $e?({bufferSize:st=1/0,windowTime:nt=1/0,refCount:Mt=!1,scheduler:yt}=$e):st=$e??1/0,(0,Ce.B)({connector:()=>new de(st,nt,yt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Mt})}var Ke=j(590),at=j(576);function Nt($e,nt){return(0,at.m)(nt)?(0,pe.w)(()=>$e,nt):(0,pe.w)(()=>$e)}var Je=j(9468),ct=j(9300),fe=j(2122),ht=j(2011),lt=j(6895),Qe=j(6217),Ye=j(9260);const Ne=new T.OlP("angularfire2.auth.use-emulator"),Ie=new T.OlP("angularfire2.auth.settings"),tt=new T.OlP("angularfire2.auth.tenant-id"),it=new T.OlP("angularfire2.auth.langugage-code"),ft=new T.OlP("angularfire2.auth.use-device-language"),qt=new T.OlP("angularfire.auth.persistence"),Pt=($e,nt,yt,st,Mt,It,tn,jt)=>(0,ht.cc)(`${$e.name}.auth`,"AngularFireAuth",$e.name,()=>{const Wt=nt.runOutsideAngular(()=>$e.auth());if(yt&&Wt.useEmulator(...yt),st&&(Wt.tenantId=st),Wt.languageCode=Mt,It&&Wt.useDeviceLanguage(),tn)for(const[gt,yn]of Object.entries(tn))Wt.settings[gt]=yn;return jt&&Wt.setPersistence(jt),Wt},[yt,st,Mt,It,tn,jt]);let Le=(()=>{class $e{constructor(yt,st,Mt,It,tn,jt,Wt,gt,yn,xn,jn,Hn){const Dr=new Y.x,pn=(0,h.of)(void 0).pipe((0,ke.Q)(tn.outsideAngular),(0,pe.w)(()=>It.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,Fe.U)(()=>(0,ht.on)(yt,It,st)),(0,Fe.U)(cr=>Pt(cr,It,jt,gt,yn,xn,Wt,jn)),et({bufferSize:1,refCount:!1}));if((0,lt.PM)(Mt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,h.of)(null);else{pn.pipe((0,Ke.P)()).subscribe();const Cn=pn.pipe((0,pe.w)(en=>en.getRedirectResult().then(An=>An,()=>null)),fe.iC,et({bufferSize:1,refCount:!1})),qn=pn.pipe((0,pe.w)(en=>new ve.y(An=>({unsubscribe:It.runOutsideAngular(()=>en.onAuthStateChanged(Gt=>An.next(Gt),Gt=>An.error(Gt),()=>An.complete()))})))),Kr=pn.pipe((0,pe.w)(en=>new ve.y(An=>({unsubscribe:It.runOutsideAngular(()=>en.onIdTokenChanged(Gt=>An.next(Gt),Gt=>An.error(Gt),()=>An.complete()))}))));this.authState=Cn.pipe(Nt(qn),(0,Je.R)(tn.outsideAngular),(0,ke.Q)(tn.insideAngular)),this.user=Cn.pipe(Nt(Kr),(0,Je.R)(tn.outsideAngular),(0,ke.Q)(tn.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(en=>en?(0,Se.D)(en.getIdToken()):(0,h.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(en=>en?(0,Se.D)(en.getIdTokenResult()):(0,h.of)(null))),this.credential=(0,Te.T)(Cn,Dr,this.authState.pipe((0,ct.h)(en=>!en))).pipe((0,Fe.U)(en=>en?.user?en:null),(0,Je.R)(tn.outsideAngular),(0,ke.Q)(tn.insideAngular))}return(0,ht.pX)(this,pn,It,{spy:{apply:(cr,Cn,qn)=>{(cr.startsWith("signIn")||cr.startsWith("createUser"))&&qn.then(Kr=>Dr.next(Kr))}}})}}return $e.\u0275fac=function(yt){return new(yt||$e)(T.LFG(ht.Dh),T.LFG(ht.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(fe.HU),T.LFG(Ne,8),T.LFG(Ie,8),T.LFG(tt,8),T.LFG(it,8),T.LFG(ft,8),T.LFG(qt,8),T.LFG(Qe.nm,8))},$e.\u0275prov=T.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"any"}),$e})(),rt=(()=>{class $e{constructor(){Ye.Z.registerVersion("angularfire",fe.q4.full,"auth-compat")}}return $e.\u0275fac=function(yt){return new(yt||$e)},$e.\u0275mod=T.oAB({type:$e}),$e.\u0275inj=T.cJS({providers:[Le]}),$e})()},3101:(zt,We,j)=>{j.d(We,{ST:()=>hm,yb:()=>lw});var T=j(4650),Y=j(4986),h=j(9751),ve=j(8996),Se=j(9646),Te=j(2122),ke=j(8675),pe=j(4482),Fe=j(5403);function me(){return(0,pe.e)((l,e)=>{let i,u=!1;l.subscribe((0,Fe.x)(e,p=>{const _=i;i=p,u&&e.next([_,p]),u=!0}))})}var Ie,de=j(4004),Ce=j(5026),et=j(1884),Ke=j(9300),at=j(2011),Nt=j(6895),ct=(j(9568),j(3942)),fe=j(5861),ht=j(9681),lt=j(4859),Qe=j(1877),Ye=j(2090),Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne={},tt=tt||{},it=Et||self;function ft(){}function qt(l){var e=typeof l;return"array"==(e="object"!=e?e:l?Array.isArray(l)?"array":e:"null")||"object"==e&&"number"==typeof l.length}function Pt(l){var e=typeof l;return"object"==e&&null!=l||"function"==e}var rt="closure_uid_"+(1e9*Math.random()>>>0),$e=0;function nt(l,e,i){return l.call.apply(l.bind,arguments)}function yt(l,e,i){if(!l)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,u),l.apply(e,p)}}return function(){return l.apply(e,arguments)}}function st(l,e,i){return(st=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nt:yt).apply(null,arguments)}function Mt(l,e){var i=Array.prototype.slice.call(arguments,1);return function(){var u=i.slice();return u.push.apply(u,arguments),l.apply(this,u)}}function It(l,e){function i(){}i.prototype=e.prototype,l.X=e.prototype,l.prototype=new i,l.prototype.constructor=l,l.Wb=function(u,p,_){for(var w=Array(arguments.length-2),O=2;O<arguments.length;O++)w[O-2]=arguments[O];return e.prototype[p].apply(u,w)}}function tn(){this.s=this.s,this.o=this.o}tn.prototype.s=!1,tn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Le(l){Object.prototype.hasOwnProperty.call(l,rt)&&l[rt]||(l[rt]=++$e)}(this)},tn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wt=Array.prototype.indexOf?function(l,e){return Array.prototype.indexOf.call(l,e,void 0)}:function(l,e){if("string"==typeof l)return"string"!=typeof e||1!=e.length?-1:l.indexOf(e,0);for(let i=0;i<l.length;i++)if(i in l&&l[i]===e)return i;return-1};function gt(l){const e=l.length;if(0<e){const i=Array(e);for(let u=0;u<e;u++)i[u]=l[u];return i}return[]}function yn(l,e){for(let i=1;i<arguments.length;i++){const u=arguments[i];if(qt(u)){const p=l.length||0,_=u.length||0;l.length=p+_;for(let w=0;w<_;w++)l[p+w]=u[w]}else l.push(u)}}function xn(l,e){this.type=l,this.g=this.target=e,this.defaultPrevented=!1}xn.prototype.h=function(){this.defaultPrevented=!0};var jn=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var l=!1,e=Object.defineProperty({},"passive",{get:function(){l=!0}});try{it.addEventListener("test",ft,e),it.removeEventListener("test",ft,e)}catch{}return l}();function Hn(l){return/^[\s\xa0]*$/.test(l)}var Dr=String.prototype.trim?function(l){return l.trim()}:function(l){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(l)[1]};function pn(l,e){return l<e?-1:l>e?1:0}function cr(){var l=it.navigator;return l&&(l=l.userAgent)?l:""}function Cn(l){return-1!=cr().indexOf(l)}function qn(l){return qn[" "](l),l}qn[" "]=ft;var ri,l,en=Cn("Opera"),An=Cn("Trident")||Cn("MSIE"),Gt=Cn("Edge"),ai=Gt||An,ei=Cn("Gecko")&&!(-1!=cr().toLowerCase().indexOf("webkit")&&!Cn("Edge"))&&!(Cn("Trident")||Cn("MSIE"))&&!Cn("Edge"),ti=-1!=cr().toLowerCase().indexOf("webkit")&&!Cn("Edge");function ni(){var l=it.document;return l?l.documentMode:void 0}e:{var mn="",rn=(l=cr(),ei?/rv:([^\);]+)(\)|;)/.exec(l):Gt?/Edge\/([\d\.]+)/.exec(l):An?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(l):ti?/WebKit\/(\S+)/.exec(l):en?/(?:Version)[ \/]?(\S+)/.exec(l):void 0);if(rn&&(mn=rn?rn[1]:""),An){var sn=ni();if(null!=sn&&sn>parseFloat(mn)){ri=String(sn);break e}}ri=mn}var pr={};var Ir=it.document&&An&&(ni()||parseInt(ri,10))||void 0;function Jn(l,e){if(xn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var i=this.type=l.type,u=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=e,e=l.relatedTarget){if(ei){e:{try{qn(e.nodeName);var p=!0;break e}catch{}p=!1}p||(e=null)}}else"mouseover"==i?e=l.fromElement:"mouseout"==i&&(e=l.toElement);this.relatedTarget=e,u?(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:Pn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Jn.X.h.call(this)}}It(Jn,xn);var Pn={2:"touch",3:"pen",4:"mouse"};Jn.prototype.h=function(){Jn.X.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var jr="closure_listenable_"+(1e6*Math.random()|0),kn=0;function Ci(l,e,i,u,p){this.listener=l,this.proxy=null,this.src=e,this.type=i,this.capture=!!u,this.ha=p,this.key=++kn,this.ba=this.ea=!1}function Cr(l){l.ba=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Rt(l,e,i){for(const u in l)e.call(i,l[u],u,l)}function bt(l){const e={};for(const i in l)e[i]=l[i];return e}const Ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hn(l,e){let i,u;for(let p=1;p<arguments.length;p++){for(i in u=arguments[p],u)l[i]=u[i];for(let _=0;_<Ut.length;_++)i=Ut[_],Object.prototype.hasOwnProperty.call(u,i)&&(l[i]=u[i])}}function Yt(l){this.src=l,this.g={},this.h=0}function En(l,e){var i=e.type;if(i in l.g){var _,u=l.g[i],p=Wt(u,e);(_=0<=p)&&Array.prototype.splice.call(u,p,1),_&&(Cr(e),0==l.g[i].length&&(delete l.g[i],l.h--))}}function kr(l,e,i,u){for(var p=0;p<l.length;++p){var _=l[p];if(!_.ba&&_.listener==e&&_.capture==!!i&&_.ha==u)return p}return-1}Yt.prototype.add=function(l,e,i,u,p){var _=l.toString();(l=this.g[_])||(l=this.g[_]=[],this.h++);var w=kr(l,e,u,p);return-1<w?(e=l[w],i||(e.ea=!1)):((e=new Ci(e,this.src,_,!!u,p)).ea=i,l.push(e)),e};var be="closure_lm_"+(1e6*Math.random()|0),_e={};function te(l,e,i,u,p){if(u&&u.once)return Pe(l,e,i,u,p);if(Array.isArray(e)){for(var _=0;_<e.length;_++)te(l,e[_],i,u,p);return null}return i=nn(i),l&&l[jr]?l.N(e,i,Pt(u)?!!u.capture:!!u,p):re(l,e,i,!1,u,p)}function re(l,e,i,u,p,_){if(!e)throw Error("Invalid event type");var w=Pt(p)?!!p.capture:!!p,O=Xe(l);if(O||(l[be]=O=new Yt(l)),(i=O.add(e,i,u,w,_)).proxy)return i;if(u=function Q(){const e=Ae;return function l(i){return e.call(l.src,l.listener,i)}}(),i.proxy=u,u.src=l,u.listener=i,l.addEventListener)jn||(p=w),void 0===p&&(p=!1),l.addEventListener(e.toString(),u,p);else if(l.attachEvent)l.attachEvent(oe(e.toString()),u);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(u)}return i}function Pe(l,e,i,u,p){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Pe(l,e[_],i,u,p);return null}return i=nn(i),l&&l[jr]?l.O(e,i,Pt(u)?!!u.capture:!!u,p):re(l,e,i,!0,u,p)}function ae(l,e,i,u,p){if(Array.isArray(e))for(var _=0;_<e.length;_++)ae(l,e[_],i,u,p);else u=Pt(u)?!!u.capture:!!u,i=nn(i),l&&l[jr]?(l=l.i,(e=String(e).toString())in l.g&&-1<(i=kr(_=l.g[e],i,u,p))&&(Cr(_[i]),Array.prototype.splice.call(_,i,1),0==_.length&&(delete l.g[e],l.h--))):l&&(l=Xe(l))&&(e=l.g[e.toString()],l=-1,e&&(l=kr(e,i,u,p)),(i=-1<l?e[l]:null)&&he(i))}function he(l){if("number"!=typeof l&&l&&!l.ba){var e=l.src;if(e&&e[jr])En(e.i,l);else{var i=l.type,u=l.proxy;e.removeEventListener?e.removeEventListener(i,u,l.capture):e.detachEvent?e.detachEvent(oe(i),u):e.addListener&&e.removeListener&&e.removeListener(u),(i=Xe(e))?(En(i,l),0==i.h&&(i.src=null,e[be]=null)):Cr(l)}}}function oe(l){return l in _e?_e[l]:_e[l]="on"+l}function Ae(l,e){if(l.ba)l=!0;else{e=new Jn(e,this);var i=l.listener,u=l.ha||l.src;l.ea&&he(l),l=i.call(u,e)}return l}function Xe(l){return(l=l[be])instanceof Yt?l:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function nn(l){return"function"==typeof l?l:(l[mt]||(l[mt]=function(e){return l.handleEvent(e)}),l[mt])}function Bt(){tn.call(this),this.i=new Yt(this),this.P=this,this.I=null}function On(l,e){var i,u=l.I;if(u)for(i=[];u;u=u.I)i.push(u);if(l=l.P,u=e.type||e,"string"==typeof e)e=new xn(e,l);else if(e instanceof xn)e.target=e.target||l;else{var p=e;hn(e=new xn(u,l),p)}if(p=!0,i)for(var _=i.length-1;0<=_;_--){var w=e.g=i[_];p=Bs(w,u,!0,e)&&p}if(p=Bs(w=e.g=l,u,!0,e)&&p,p=Bs(w,u,!1,e)&&p,i)for(_=0;_<i.length;_++)p=Bs(w=e.g=i[_],u,!1,e)&&p}function Bs(l,e,i,u){if(!(e=l.i.g[String(e)]))return!0;e=e.concat();for(var p=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ba&&w.capture==i){var O=w.listener,B=w.ha||w.src;w.ea&&En(l.i,w),p=!1!==O.call(B,u)&&p}}return p&&!u.defaultPrevented}It(Bt,tn),Bt.prototype[jr]=!0,Bt.prototype.removeEventListener=function(l,e,i,u){ae(this,l,e,i,u)},Bt.prototype.M=function(){if(Bt.X.M.call(this),this.i){var e,l=this.i;for(e in l.g){for(var i=l.g[e],u=0;u<i.length;u++)Cr(i[u]);delete l.g[e],l.h--}}this.I=null},Bt.prototype.N=function(l,e,i,u){return this.i.add(String(l),e,!1,i,u)},Bt.prototype.O=function(l,e,i,u){return this.i.add(String(l),e,!0,i,u)};var qi=it.JSON.stringify;function Ko(){var l=ki;let e=null;return l.g&&(e=l.g,l.g=l.g.next,l.g||(l.h=null),e.next=null),e}var Yn,qr=new class{constructor(l,e){this.i=l,this.j=e,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}(()=>new bs,l=>l.reset());class bs{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function Vs(l){it.setTimeout(()=>{throw l},0)}function Co(l,e){Yn||function Fr(){var l=it.Promise.resolve(void 0);Yn=function(){l.then(zi)}}(),Yr||(Yn(),Yr=!0),ki.add(l,e)}var Yr=!1,ki=new class _a{constructor(){this.h=this.g=null}add(e,i){const u=qr.get();u.set(e,i),this.h?this.h.next=u:this.g=u,this.h=u}};function zi(){for(var l;l=Ko();){try{l.h.call(l.g)}catch(i){Vs(i)}var e=qr;e.j(l),100>e.h&&(e.h++,l.next=e.g,e.g=l)}Yr=!1}function sr(l,e){Bt.call(this),this.h=l||1,this.g=e||it,this.j=st(this.lb,this),this.l=Date.now()}function Wi(l){l.ca=!1,l.R&&(l.g.clearTimeout(l.R),l.R=null)}function as(l,e,i){if("function"==typeof l)i&&(l=st(l,i));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=st(l.handleEvent,l)}return 2147483647<Number(e)?-1:it.setTimeout(l,e||0)}function Fi(l){l.g=as(()=>{l.g=null,l.i&&(l.i=!1,Fi(l))},l.j);const e=l.h;l.h=null,l.m.apply(null,e)}It(sr,Bt),(Ie=sr.prototype).ca=!1,Ie.R=null,Ie.lb=function(){if(this.ca){var l=Date.now()-this.l;0<l&&l<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-l):(this.R&&(this.g.clearTimeout(this.R),this.R=null),On(this,"tick"),this.ca&&(Wi(this),this.start()))}},Ie.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ie.M=function(){sr.X.M.call(this),Wi(this),delete this.g};class Jt extends tn{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fi(this)}M(){super.M(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(l){tn.call(this),this.h=l,this.g={}}It(Nn,tn);var vr=[];function li(l,e,i,u){Array.isArray(i)||(i&&(vr[0]=i.toString()),i=vr);for(var p=0;p<i.length;p++){var _=te(e,i[p],u||l.handleEvent,!1,l.h||l);if(!_)break;l.g[_.key]=_}}function Li(l){Rt(l.g,function(e,i){this.g.hasOwnProperty(i)&&he(e)},l),l.g={}}function Lr(){this.g=!0}function pi(l,e,i,u){l.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fn(l,e){if(!l.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(l=0;l<i.length;l++)if(Array.isArray(i[l])){var u=i[l];if(!(2>u.length)){var p=u[1];if(Array.isArray(p)&&!(1>p.length)){var _=p[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<p.length;w++)p[w]=""}}}return qi(i)}catch{return e}}(l,i)+(u?" "+u:"")})}Nn.prototype.M=function(){Nn.X.M.call(this),Li(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lr.prototype.Aa=function(){this.g=!1},Lr.prototype.info=function(){};var ws={},To=null;function qo(){return To=To||new Bt}function So(l){xn.call(this,ws.Pa,l)}function vi(l){const e=qo();On(e,new So(e))}function Xs(l,e){xn.call(this,ws.STAT_EVENT,l),this.stat=e}function Zr(l){const e=qo();On(e,new Xs(e,l))}function bi(l,e){xn.call(this,ws.Qa,l),this.size=e}function Es(l,e){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){l()},e)}ws.Pa="serverreachability",It(So,xn),ws.STAT_EVENT="statevent",It(Xs,xn),ws.Qa="timingevent",It(bi,xn);var Re={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ye={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ve(){}function Lt(){}Ve.prototype.h=null;var Ln,an={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Rn(){xn.call(this,"d")}function mr(){xn.call(this,"c")}function Ds(){}function Qr(l,e,i,u){this.l=l,this.j=e,this.m=i,this.U=u||1,this.S=new Nn(this),this.O=Gs,this.T=new sr(l=ai?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _r}function _r(){this.i=null,this.g="",this.h=!1}It(Rn,xn),It(mr,xn),It(Ds,Ve),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},Ln=new Ds;var Gs=45e3,Is={},Cs={};function js(l,e,i){l.K=1,l.v=Ui(to(e)),l.s=i,l.P=!0,Pa(l,null)}function Pa(l,e){l.F=Date.now(),go(l),l.A=to(l.v);var i=l.A,u=l.U;Array.isArray(u)||(u=[String(u)]),Ua(i.i,"t",u),l.C=0,i=l.l.H,l.h=new _r,l.g=ql(l.l,i?e:null,!l.s),0<l.N&&(l.L=new Jt(st(l.La,l,l.g),l.N)),li(l.S,l.g,"readystatechange",l.ib),e=l.H?bt(l.H):{},l.s?(l.u||(l.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",l.g.da(l.A,l.u,l.s,e)):(l.u="GET",l.g.da(l.A,l.u,null,e)),vi(),function ii(l,e,i,u,p,_){l.info(function(){if(l.g)if(_)for(var w="",O=_.split("&"),B=0;B<O.length;B++){var z=O[B].split("=");if(1<z.length){var ne=z[0];z=z[1];var we=ne.split("_");w=2<=we.length&&"type"==we[1]?w+(ne+"=")+z+"&":w+(ne+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+u+") [attempt "+p+"]: "+e+"\n"+i+"\n"+w})}(l.j,l.u,l.A,l.m,l.U,l.s)}function Ts(l){return!!l.g&&"GET"==l.u&&2!=l.K&&l.l.Da}function Hs(l,e,i){let p,u=!0;for(;!l.I&&l.C<i.length;){if(p=Yo(l,i),p==Cs){4==e&&(l.o=4,Zr(14),u=!1),pi(l.j,l.m,null,"[Incomplete Response]");break}if(p==Is){l.o=4,Zr(15),pi(l.j,l.m,i,"[Invalid Chunk]"),u=!1;break}pi(l.j,l.m,p,null),ya(l,p)}Ts(l)&&p!=Cs&&p!=Is&&(l.h.g="",l.C=0),4!=e||0!=i.length||l.h.h||(l.o=1,Zr(16),u=!1),l.i=l.i&&u,u?0<i.length&&!l.$&&(l.$=!0,(e=l.l).g==l&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),ol(e),e.K=!0,Zr(11))):(pi(l.j,l.m,i,"[Invalid Chunked Response]"),Ss(l),Ao(l))}function Yo(l,e){var i=l.C,u=e.indexOf("\n",i);return-1==u?Cs:(i=Number(e.substring(i,u)),isNaN(i)?Is:(u+=1)+i>e.length?Cs:(e=e.substr(u,i),l.C=u+i,e))}function go(l){l.V=Date.now()+l.O,Zo(l,l.O)}function Zo(l,e){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Es(st(l.gb,l),e)}function Qo(l){l.B&&(it.clearTimeout(l.B),l.B=null)}function Ao(l){0==l.l.G||l.I||ll(l.l,l)}function Ss(l){Qo(l);var e=l.L;e&&"function"==typeof e.na&&e.na(),l.L=null,Wi(l.T),Li(l.S),l.g&&(e=l.g,l.g=null,e.abort(),e.na())}function ya(l,e){try{var i=l.l;if(0!=i.G&&(i.g==l||ui(i.h,l)))if(!l.J&&ui(i.h,l)&&3==i.G){try{var u=i.Fa.g.parse(e)}catch{u=null}if(Array.isArray(u)&&3==u.length){var p=u;if(0==p[0]){e:if(!i.u){if(i.g){if(!(i.g.F+3e3<l.F))break e;al(i),Qi(i)}oa(i),Zr(18)}}else i.Ba=p[1],0<i.Ba-i.T&&37500>p[2]&&i.L&&0==i.A&&!i.v&&(i.v=Es(st(i.cb,i),6e3));if(1>=Ns(i.h)&&i.ja){try{i.ja()}catch{}i.ja=void 0}}else ko(i,11)}else if((l.J||i.g==l)&&al(i),!Hn(e))for(p=i.Fa.g.parse(e),e=0;e<p.length;e++){let z=p[e];if(i.T=z[0],z=z[1],2==i.G)if("c"==z[0]){i.I=z[1],i.ka=z[2];const ne=z[3];null!=ne&&(i.ma=ne,i.j.info("VER="+i.ma));const we=z[4];null!=we&&(i.Ca=we,i.j.info("SVER="+i.Ca));const Be=z[5];null!=Be&&"number"==typeof Be&&0<Be&&(i.J=u=1.5*Be,i.j.info("backChannelRequestTimeoutMs_="+u)),u=i;const pt=l.g;if(pt){const Ot=pt.g?pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ot){var _=u.h;_.g||-1==Ot.indexOf("spdy")&&-1==Ot.indexOf("quic")&&-1==Ot.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(Ba(_,_.h),_.h=null))}if(u.D){const Qt=pt.g?pt.g.getResponseHeader("X-HTTP-Session-Id"):null;Qt&&(u.za=Qt,Hr(u.F,u.D,Qt))}}i.G=3,i.l&&i.l.xa(),i.$&&(i.P=Date.now()-l.F,i.j.info("Handshake RTT: "+i.P+"ms"));var w=l;if((u=i).sa=Kl(u,u.H?u.ka:null,u.V),w.J){Va(u.h,w);var O=w,B=u.J;B&&O.setTimeout(B),O.B&&(Qo(O),go(O)),u.g=w}else Tl(u);0<i.i.length&&xo(i)}else"stop"!=z[0]&&"close"!=z[0]||ko(i,7);else 3==i.G&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?ko(i,7):Po(i):"noop"!=z[0]&&i.l&&i.l.wa(z),i.A=0)}vi()}catch{}}function Zu(l,e){if(l.forEach&&"function"==typeof l.forEach)l.forEach(e,void 0);else if(qt(l)||"string"==typeof l)Array.prototype.forEach.call(l,e,void 0);else for(var i=function eo(l){if(l.oa&&"function"==typeof l.oa)return l.oa();if(!l.W||"function"!=typeof l.W){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(qt(l)||"string"==typeof l){var e=[];l=l.length;for(var i=0;i<l;i++)e.push(i);return e}e=[],i=0;for(const u in l)e[i++]=u;return e}}}(l),u=function As(l){if(l.W&&"function"==typeof l.W)return l.W();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(qt(l)){for(var e=[],i=l.length,u=0;u<i;u++)e.push(l[u]);return e}for(u in e=[],i=0,l)e[i++]=l[u];return e}(l),p=u.length,_=0;_<p;_++)e.call(void 0,u[_],i&&i[_],l)}(Ie=Qr.prototype).setTimeout=function(l){this.O=l},Ie.ib=function(l){l=l.target;const e=this.L;e&&3==_o(l)?e.l():this.La(l)},Ie.La=function(l){try{if(l==this.g)e:{const ne=_o(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ne)&&(3!=ne||ai||this.g&&(this.h.h||this.g.fa()||Ha(this.g)))){this.I||4!=ne||7==e||vi(),Qo(this);var i=this.g.aa();this.Y=i;t:if(Ts(this)){var u=Ha(this.g);l="";var p=u.length,_=4==_o(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ss(this),Ao(this);var w="";break t}this.h.i=new it.TextDecoder}for(e=0;e<p;e++)this.h.h=!0,l+=this.h.i.decode(u[e],{stream:_&&e==p-1});u.splice(0,p),this.h.g+=l,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==i,function si(l,e,i,u,p,_,w){l.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+p+"]: "+e+"\n"+i+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.U,ne,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,B=this.g;if((O=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hn(O)){var z=O;break t}}z=null}if(!(i=z)){this.i=!1,this.o=3,Zr(12),Ss(this),Ao(this);break e}pi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ya(this,i)}this.P?(Hs(this,ne,w),ai&&this.i&&3==ne&&(li(this.S,this.T,"tick",this.hb),this.T.start())):(pi(this.j,this.m,w,null),ya(this,w)),4==ne&&Ss(this),this.i&&!this.I&&(4==ne?ll(this.l,this):(this.i=!1,go(this)))}else 400==i&&0<w.indexOf("Unknown SID")?(this.o=3,Zr(12)):(this.o=0,Zr(13)),Ss(this),Ao(this)}}}catch{}},Ie.hb=function(){if(this.g){var l=_o(this.g),e=this.g.fa();this.C<e.length&&(Qo(this),Hs(this,l,e),this.i&&4!=l&&go(this))}},Ie.cancel=function(){this.I=!0,Ss(this)},Ie.gb=function(){this.B=null;const l=Date.now();0<=l-this.V?(function Ra(l,e){l.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(vi(),Zr(17)),Ss(this),this.o=2,Ao(this)):Zo(this,this.V-l)};var xa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(l,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,l instanceof mo){this.h=void 0!==e?e:l.h,Oo(this,l.j),this.s=l.s,this.g=l.g,va(this,l.m),this.l=l.l,e=l.i;var i=new us;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),wl(this,i),this.o=l.o}else l&&(i=String(l).match(xa))?(this.h=!!e,Oo(this,i[1]||"",!0),this.s=$s(i[2]||""),this.g=$s(i[3]||"",!0),va(this,i[4]),this.l=$s(i[5]||"",!0),wl(this,i[6]||"",!0),this.o=$s(i[7]||"")):(this.h=!!e,this.i=new us(null,this.h))}function to(l){return new mo(l)}function Oo(l,e,i){l.j=i?$s(e,!0):e,l.j&&(l.j=l.j.replace(/:$/,""))}function va(l,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);l.m=e}else l.m=null}function wl(l,e,i){e instanceof us?(l.i=e,function Bi(l,e){e&&!l.j&&(Os(l),l.i=null,l.g.forEach(function(i,u){var p=u.toLowerCase();u!=p&&(yr(this,u),Ua(this,p,i))},l)),l.j=e}(l.i,l.h)):(i||(e=no(e,Wl)),l.i=new us(e,l.h))}function Hr(l,e,i){l.i.set(e,i)}function Ui(l){return Hr(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $s(l,e){return l?e?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function no(l,e,i){return"string"==typeof l?(l=encodeURI(l).replace(e,ka),i&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ka(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}mo.prototype.toString=function(){var l=[],e=this.j;e&&l.push(no(e,zs,!0),":");var i=this.g;return(i||"file"==e)&&(l.push("//"),(e=this.s)&&l.push(no(e,zs,!0),"@"),l.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&l.push(":",String(i))),(i=this.l)&&(this.g&&"/"!=i.charAt(0)&&l.push("/"),l.push(no(i,"/"==i.charAt(0)?pu:Fa,!0))),(i=this.i.toString())&&l.push("?",i),(i=this.o)&&l.push("#",no(i,La)),l.join("")};var zs=/[#\/\?@]/g,Fa=/[#\?:]/g,pu=/[#\?]/g,Wl=/[#\?@]/g,La=/#/g;function us(l,e){this.h=this.g=null,this.i=l||null,this.j=!!e}function Os(l){l.g||(l.g=new Map,l.h=0,l.i&&function ls(l,e){if(l){l=l.split("&");for(var i=0;i<l.length;i++){var u=l[i].indexOf("="),p=null;if(0<=u){var _=l[i].substring(0,u);p=l[i].substring(u+1)}else _=l[i];e(_,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(l.i,function(e,i){l.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function yr(l,e){Os(l),e=Nr(l,e),l.g.has(e)&&(l.i=null,l.h-=l.g.get(e).length,l.g.delete(e))}function rl(l,e){return Os(l),e=Nr(l,e),l.g.has(e)}function Ua(l,e,i){yr(l,e),0<i.length&&(l.i=null,l.g.set(Nr(l,e),gt(i)),l.h+=i.length)}function Nr(l,e){return e=String(e),l.j&&(e=e.toLowerCase()),e}function gi(l){this.l=l||gu,l=it.PerformanceNavigationTiming?0<(l=it.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(it.g&&it.g.Ga&&it.g.Ga()&&it.g.Ga().$b),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ie=us.prototype).add=function(l,e){Os(this),this.i=null,l=Nr(this,l);var i=this.g.get(l);return i||this.g.set(l,i=[]),i.push(e),this.h+=1,this},Ie.forEach=function(l,e){Os(this),this.g.forEach(function(i,u){i.forEach(function(p){l.call(e,p,u,this)},this)},this)},Ie.oa=function(){Os(this);const l=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let u=0;u<e.length;u++){const p=l[u];for(let _=0;_<p.length;_++)i.push(e[u])}return i},Ie.W=function(l){Os(this);let e=[];if("string"==typeof l)rl(this,l)&&(e=e.concat(this.g.get(Nr(this,l))));else{l=Array.from(this.g.values());for(let i=0;i<l.length;i++)e=e.concat(l[i])}return e},Ie.set=function(l,e){return Os(this),this.i=null,rl(this,l=Nr(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[e]),this.h+=1,this},Ie.get=function(l,e){return l&&0<(l=this.W(l)).length?String(l[0]):e},Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var u=e[i];const _=encodeURIComponent(String(u)),w=this.W(u);for(u=0;u<w.length;u++){var p=_;""!==w[u]&&(p+="="+encodeURIComponent(String(w[u]))),l.push(p)}}return this.i=l.join("&")};var gu=10;function il(l){return!!l.h||!!l.g&&l.g.size>=l.j}function Ns(l){return l.h?1:l.g?l.g.size:0}function ui(l,e){return l.h?l.h==e:!!l.g&&l.g.has(e)}function Ba(l,e){l.g?l.g.add(e):l.h=e}function Va(l,e){l.h&&l.h==e?l.h=null:l.g&&l.g.has(e)&&l.g.delete(e)}function ro(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let e=l.i;for(const i of l.g.values())e=e.concat(i.D);return e}return gt(l.i)}function Yi(){}function Ga(){this.g=new Yi}function El(l,e,i){const u=i||"";try{Zu(l,function(p,_){let w=p;Pt(p)&&(w=qi(p)),e.push(u+_+"="+encodeURIComponent(w))})}catch(p){throw e.push(u+"type="+encodeURIComponent("_badmap")),p}}function No(l,e,i,u,p){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,p(u)}catch{}}function Xo(l){this.l=l.ac||null,this.j=l.jb||!1}function Dl(l,e){Bt.call(this),this.D=l,this.u=e,this.m=void 0,this.readyState=ea,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gi.prototype.cancel=function(){if(this.i=ro(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}},Yi.prototype.stringify=function(l){return it.JSON.stringify(l,void 0)},Yi.prototype.parse=function(l){return it.JSON.parse(l,void 0)},It(Xo,Ve),Xo.prototype.g=function(){return new Dl(this.l,this.j)},Xo.prototype.i=function(l){return function(){return l}}({}),It(Dl,Bt);var ea=0;function mu(l){l.j.read().then(l.Ta.bind(l)).catch(l.ga.bind(l))}function Mo(l){l.readyState=4,l.l=null,l.j=null,l.A=null,ja(l)}function ja(l){l.onreadystatechange&&l.onreadystatechange.call(l)}(Ie=Dl.prototype).open=function(l,e){if(this.readyState!=ea)throw this.abort(),Error("Error reopening a connection");this.C=l,this.B=e,this.readyState=1,ja(this)},Ie.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};l&&(e.body=l),(this.D||it).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mo(this)),this.readyState=ea},Ie.Wa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ja(this)),this.g&&(this.readyState=3,ja(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof it.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mu(this)}else l.text().then(this.Va.bind(this),this.ga.bind(this))},Ie.Ta=function(l){if(this.g){if(this.u&&l.value)this.response.push(l.value);else if(!this.u){var e=l.value?l.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!l.done}))&&(this.response=this.responseText+=e)}l.done?Mo(this):ja(this),3==this.readyState&&mu(this)}},Ie.Va=function(l){this.g&&(this.response=this.responseText=l,Mo(this))},Ie.Ua=function(l){this.g&&(this.response=l,Mo(this))},Ie.ga=function(){this.g&&Mo(this)},Ie.setRequestHeader=function(l,e){this.v.append(l,e)},Ie.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},Ie.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],e=this.h.entries();for(var i=e.next();!i.done;)l.push((i=i.value)[0]+": "+i[1]),i=e.next();return l.join("\r\n")},Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}});var wi=it.JSON.parse;function ut(l){Bt.call(this),this.headers=new Map,this.u=l||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rr,this.K=this.L=!1}It(ut,Bt);var rr="",ba=/^https?$/i,ta=["POST","PUT"];function Il(l,e){l.h=!1,l.g&&(l.l=!0,l.g.abort(),l.l=!1),l.j=e,l.m=5,Ro(l),sl(l)}function Ro(l){l.D||(l.D=!0,On(l,"complete"),On(l,"error"))}function Zi(l){if(l.h&&typeof tt<"u"&&(!l.C[1]||4!=_o(l)||2!=l.aa()))if(l.v&&4==_o(l))as(l.Ha,0,l);else if(On(l,"readystatechange"),4==_o(l)){l.h=!1;try{const O=l.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var u;if(u=0===O){var p=String(l.H).match(xa)[1]||null;if(!p&&it.self&&it.self.location){var _=it.self.location.protocol;p=_.substr(0,_.length-1)}u=!ba.test(p?p.toLowerCase():"")}i=u}if(i)On(l,"complete"),On(l,"success");else{l.m=6;try{var w=2<_o(l)?l.g.statusText:""}catch{w=""}l.j=w+" ["+l.aa()+"]",Ro(l)}}finally{sl(l)}}}function sl(l,e){if(l.g){na(l);const i=l.g,u=l.C[0]?ft:null;l.g=null,l.C=null,e||On(l,"ready");try{i.onreadystatechange=u}catch{}}}function na(l){l.g&&l.K&&(l.g.ontimeout=null),l.A&&(it.clearTimeout(l.A),l.A=null)}function _o(l){return l.g?l.g.readyState:0}function Ha(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.J){case rr:case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Cl(l){let e="";return Rt(l,function(i,u){e+=u,e+=":",e+=i,e+="\r\n"}),e}function $r(l,e,i){e:{for(u in i){var u=!1;break e}u=!0}u||(i=Cl(i),"string"==typeof l?null!=i&&encodeURIComponent(String(i)):Hr(l,e,i))}function Vi(l,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[l]||e}function ra(l){this.Ca=0,this.i=[],this.j=new Lr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Vi("failFast",!1,l),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Vi("baseRetryDelayMs",5e3,l),this.bb=Vi("retryDelaySeedMs",1e4,l),this.$a=Vi("forwardChannelMaxRetries",2,l),this.ta=Vi("forwardChannelRequestTimeoutMs",2e4,l),this.ra=l&&l.xmlHttpFactory||void 0,this.Da=l&&l.Zb||!1,this.J=void 0,this.H=l&&l.supportsCrossDomainXhr||!1,this.I="",this.h=new gi(l&&l.concurrentRequestLimit),this.Fa=new Ga,this.O=l&&l.fastHandshake||!1,this.N=l&&l.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=l&&l.Xb||!1,l&&l.Aa&&this.j.Aa(),l&&l.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&l&&l.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Po(l){if(ia(l),3==l.G){var e=l.U++,i=to(l.F);Hr(i,"SID",l.I),Hr(i,"RID",e),Hr(i,"TYPE","terminate"),yo(l,i),(e=new Qr(l,l.j,e,void 0)).K=2,e.v=Ui(to(i)),i=!1,it.navigator&&it.navigator.sendBeacon&&(i=it.navigator.sendBeacon(e.v.toString(),"")),!i&&it.Image&&((new Image).src=e.v,i=!0),i||(e.g=ql(e.l,null),e.g.da(e.v)),e.F=Date.now(),go(e)}Mc(l)}function Qi(l){l.g&&(ol(l),l.g.cancel(),l.g=null)}function ia(l){Qi(l),l.u&&(it.clearTimeout(l.u),l.u=null),al(l),l.h.cancel(),l.m&&("number"==typeof l.m&&it.clearTimeout(l.m),l.m=null)}function xo(l){il(l.h)||l.m||(l.m=!0,Co(l.Ja,l),l.C=0)}function sa(l,e){var i;i=e?e.m:l.U++;const u=to(l.F);Hr(u,"SID",l.I),Hr(u,"RID",i),Hr(u,"AID",l.T),yo(l,u),l.o&&l.s&&$r(u,l.o,l.s),i=new Qr(l,l.j,i,l.C+1),null===l.o&&(i.H=l.s),e&&(l.i=e.D.concat(l.i)),e=Ws(l,i,1e3),i.setTimeout(Math.round(.5*l.ta)+Math.round(.5*l.ta*Math.random())),Ba(l.h,i),js(i,u,e)}function yo(l,e){l.ia&&Rt(l.ia,function(i,u){Hr(e,u,i)}),l.l&&Zu({},function(i,u){Hr(e,u,i)})}function Ws(l,e,i){i=Math.min(l.i.length,i);var u=l.l?st(l.l.Ra,l.l,l):null;e:{var p=l.i;let _=-1;for(;;){const w=["count="+i];-1==_?0<i?(_=p[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let O=!0;for(let B=0;B<i;B++){let z=p[B].h;const ne=p[B].g;if(z-=_,0>z)_=Math.max(0,p[B].h-100),O=!1;else try{El(ne,w,"req"+z+"_")}catch{u&&u(ne)}}if(O){u=w.join("&");break e}}}return l=l.i.splice(0,i),e.D=l,u}function Tl(l){l.g||l.u||(l.Z=1,Co(l.Ia,l),l.A=0)}function oa(l){return!(l.g||l.u||3<=l.A||(l.Z++,l.u=Es(st(l.Ia,l),Sl(l,l.A)),l.A++,0))}function ol(l){null!=l.B&&(it.clearTimeout(l.B),l.B=null)}function aa(l){l.g=new Qr(l,l.j,"rpc",l.Z),null===l.o&&(l.g.H=l.s),l.g.N=0;var e=to(l.sa);Hr(e,"RID","rpc"),Hr(e,"SID",l.I),Hr(e,"CI",l.L?"0":"1"),Hr(e,"AID",l.T),Hr(e,"TYPE","xmlhttp"),yo(l,e),l.o&&l.s&&$r(e,l.o,l.s),l.J&&l.g.setTimeout(l.J);var i=l.g;l=l.ka,i.K=1,i.v=Ui(to(e)),i.s=null,i.P=!0,Pa(i,l)}function al(l){null!=l.v&&(it.clearTimeout(l.v),l.v=null)}function ll(l,e){var i=null;if(l.g==e){al(l),ol(l),l.g=null;var u=2}else{if(!ui(l.h,e))return;i=e.D,Va(l.h,e),u=1}if(0!=l.G)if(l.pa=e.Y,e.i)if(1==u){i=e.s?e.s.length:0,e=Date.now()-e.F;var p=l.C;On(u=qo(),new bi(u,i)),xo(l)}else Tl(l);else if(3==(p=e.o)||0==p&&0<l.pa||!(1==u&&function Qu(l,e){return!(Ns(l.h)>=l.h.j-(l.m?1:0)||(l.m?(l.i=e.D.concat(l.i),0):1==l.G||2==l.G||l.C>=(l.Za?0:l.$a)||(l.m=Es(st(l.Ja,l,e),Sl(l,l.C)),l.C++,0)))}(l,e)||2==u&&oa(l)))switch(i&&0<i.length&&(e=l.h,e.i=e.i.concat(i)),p){case 1:ko(l,5);break;case 4:ko(l,10);break;case 3:ko(l,6);break;default:ko(l,2)}}function Sl(l,e){let i=l.Xa+Math.floor(Math.random()*l.bb);return l.l||(i*=2),i*e}function ko(l,e){if(l.j.info("Error code "+e),2==e){var i=null;l.l&&(i=null);var u=st(l.kb,l);i||(i=new mo("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||Oo(i,"https"),Ui(i)),function Tn(l,e){const i=new Lr;if(it.Image){const u=new Image;u.onload=Mt(No,i,u,"TestLoadImage: loaded",!0,e),u.onerror=Mt(No,i,u,"TestLoadImage: error",!1,e),u.onabort=Mt(No,i,u,"TestLoadImage: abort",!1,e),u.ontimeout=Mt(No,i,u,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=l}else e(!1)}(i.toString(),u)}else Zr(2);l.G=0,l.l&&l.l.va(e),Mc(l),ia(l)}function Mc(l){if(l.G=0,l.la=[],l.l){const e=ro(l.h);(0!=e.length||0!=l.i.length)&&(yn(l.la,e),yn(l.la,l.i),l.h.i.length=0,gt(l.i),l.i.length=0),l.l.ua()}}function Kl(l,e,i){var u=i instanceof mo?to(i):new mo(i,void 0);if(""!=u.g)e&&(u.g=e+"."+u.g),va(u,u.m);else{var p=it.location;u=p.protocol,e=e?e+"."+p.hostname:p.hostname,p=+p.port;var _=new mo(null,void 0);u&&Oo(_,u),e&&(_.g=e),p&&va(_,p),i&&(_.l=i),u=_}return e=l.za,(i=l.D)&&e&&Hr(u,i,e),Hr(u,"VER",l.ma),yo(l,u),u}function ql(l,e,i){if(e&&!l.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ut(i&&l.Da&&!l.ra?new Xo({jb:!0}):l.ra)).Ka(l.H),e}function _u(){}function mi(){if(An&&!(10<=Number(Ir)))throw Error("Environmental error: no available transport.")}function Jr(l,e){Bt.call(this),this.g=new ra(e),this.l=l,this.h=e&&e.messageUrlParams||null,l=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.s=l,l=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(l?l["X-WebChannel-Content-Type"]=e.messageContentType:l={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(l?l["X-WebChannel-Client-Profile"]=e.ya:l={"X-WebChannel-Client-Profile":e.ya}),this.g.S=l,(l=e&&e.Yb)&&!Hn(l)&&(this.g.o=l),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hn(e)&&(this.g.D=e,null!==(l=this.h)&&e in l&&e in(l=this.h)&&delete l[e]),this.j=new Di(this)}function Xr(l){Rn.call(this);var e=l.__sm__;if(e){e:{for(const i in e){l=i;break e}l=void 0}(this.i=l)&&(l=this.i,e=null!==e&&l in e?e[l]:void 0),this.data=e}else this.data=l}function Yl(){mr.call(this),this.status=1}function Di(l){this.g=l}(Ie=ut.prototype).Ka=function(l){this.L=l},Ie.da=function(l,e,i,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+l);e=e?e.toUpperCase():"GET",this.H=l,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ln.g(),this.C=function dt(l){return l.h||(l.h=l.i())}(this.u?this.u:Ln),this.g.onreadystatechange=st(this.Ha,this);try{this.F=!0,this.g.open(e,String(l),!0),this.F=!1}catch(_){return void Il(this,_)}if(l=i||"",i=new Map(this.headers),u)if(Object.getPrototypeOf(u)===Object.prototype)for(var p in u)i.set(p,u[p]);else{if("function"!=typeof u.keys||"function"!=typeof u.get)throw Error("Unknown input type for opt_headers: "+String(u));for(const _ of u.keys())i.set(_,u.get(_))}u=Array.from(i.keys()).find(_=>"content-type"==_.toLowerCase()),p=it.FormData&&l instanceof it.FormData,!(0<=Wt(ta,e))||u||p||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of i)this.g.setRequestHeader(_,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{na(this),0<this.B&&((this.K=function Ei(l){return An&&function nr(){return function Kr(l){var e=pr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=l(9)}(function(){let l=0;const e=Dr(String(ri)).split("."),i=Dr("9").split("."),u=Math.max(e.length,i.length);for(let w=0;0==l&&w<u;w++){var p=e[w]||"",_=i[w]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==p[0].length&&0==_[0].length)break;l=pn(0==p[1].length?0:parseInt(p[1],10),0==_[1].length?0:parseInt(_[1],10))||pn(0==p[2].length,0==_[2].length)||pn(p[2],_[2]),p=p[3],_=_[3]}while(0==l)}return 0<=l})}()&&"number"==typeof l.timeout&&void 0!==l.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=st(this.qa,this)):this.A=as(this.qa,this.B,this)),this.v=!0,this.g.send(l),this.v=!1}catch(_){Il(this,_)}},Ie.qa=function(){typeof tt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,On(this,"timeout"),this.abort(8))},Ie.abort=function(l){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=l||7,On(this,"complete"),On(this,"abort"),sl(this))},Ie.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sl(this,!0)),ut.X.M.call(this)},Ie.Ha=function(){this.s||(this.F||this.v||this.l?Zi(this):this.fb())},Ie.fb=function(){Zi(this)},Ie.aa=function(){try{return 2<_o(this)?this.g.status:-1}catch{return-1}},Ie.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ie.Sa=function(l){if(this.g){var e=this.g.responseText;return l&&0==e.indexOf(l)&&(e=e.substring(l.length)),wi(e)}},Ie.Ea=function(){return this.m},Ie.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ie=ra.prototype).ma=8,Ie.G=1,Ie.Ja=function(l){if(this.m)if(this.m=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const p=new Qr(this,this.j,l,void 0);let _=this.s;if(this.S&&(_?(_=bt(_),hn(_,this.S)):_=this.S),null!==this.o||this.N||(p.H=_,_=null),this.O)e:{for(var e=0,i=0;i<this.i.length;i++){var u=this.i[i];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(e+=u)){e=i;break e}if(4096===e||i===this.i.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=Ws(this,p,e),Hr(i=to(this.F),"RID",l),Hr(i,"CVER",22),this.D&&Hr(i,"X-HTTP-Session-Id",this.D),yo(this,i),_&&(this.N?e="headers="+encodeURIComponent(String(Cl(_)))+"&"+e:this.o&&$r(i,this.o,_)),Ba(this.h,p),this.Ya&&Hr(i,"TYPE","init"),this.O?(Hr(i,"$req",e),Hr(i,"SID","null"),p.Z=!0,js(p,i,null)):js(p,i,e),this.G=2}}else 3==this.G&&(l?sa(this,l):0==this.i.length||il(this.h)||sa(this))},Ie.Ia=function(){if(this.u=null,aa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var l=2*this.P;this.j.info("BP detection timer enabled: "+l),this.B=Es(st(this.eb,this),l)}},Ie.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zr(10),Qi(this),aa(this))},Ie.cb=function(){null!=this.v&&(this.v=null,Qi(this),oa(this),Zr(19))},Ie.kb=function(l){l?(this.j.info("Successfully pinged google.com"),Zr(2)):(this.j.info("Failed to ping google.com"),Zr(1))},(Ie=_u.prototype).xa=function(){},Ie.wa=function(){},Ie.va=function(){},Ie.ua=function(){},Ie.Ra=function(){},mi.prototype.g=function(l,e){return new Jr(l,e)},It(Jr,Bt),Jr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var l=this.g,e=this.l,i=this.h||void 0;Zr(0),l.V=e,l.ia=i||{},l.L=l.Y,l.F=Kl(l,null,l.V),xo(l)},Jr.prototype.close=function(){Po(this.g)},Jr.prototype.u=function(l){var e=this.g;if("string"==typeof l){var i={};i.__data__=l,l=i}else this.v&&((i={}).__data__=qi(l),l=i);e.i.push(new class{constructor(l,e){this.h=l,this.g=e}}(e.ab++,l)),3==e.G&&xo(e)},Jr.prototype.M=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,Jr.X.M.call(this)},It(Xr,Rn),It(Yl,mr),It(Di,_u),Di.prototype.xa=function(){On(this.g,"a")},Di.prototype.wa=function(l){On(this.g,new Xr(l))},Di.prototype.va=function(l){On(this.g,new Yl)},Di.prototype.ua=function(){On(this.g,"b")},mi.prototype.createWebChannel=mi.prototype.g,Jr.prototype.send=Jr.prototype.u,Jr.prototype.open=Jr.prototype.m,Jr.prototype.close=Jr.prototype.close,Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,ye.COMPLETE="complete",Lt.EventType=an,an.OPEN="a",an.CLOSE="b",an.ERROR="c",an.MESSAGE="d",Bt.prototype.listen=Bt.prototype.N,ut.prototype.listenOnce=ut.prototype.O,ut.prototype.getLastError=ut.prototype.Oa,ut.prototype.getLastErrorCode=ut.prototype.Ea,ut.prototype.getStatus=ut.prototype.aa,ut.prototype.getResponseJson=ut.prototype.Sa,ut.prototype.getResponseText=ut.prototype.fa,ut.prototype.send=ut.prototype.da,ut.prototype.setWithCredentials=ut.prototype.Ka;var Rc=Ne.createWebChannelTransport=function(){return new mi},_d=Ne.getStatEventTarget=function(){return qo()},Zl=Ne.ErrorCode=Re,Ql=Ne.EventType=ye,Al=Ne.Event=ws,wa=Ne.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},R=Ne.FetchXmlHttpFactory=Xo,$=Ne.WebChannel=Lt,L=Ne.XhrIo=ut;const J="@firebase/firestore";class ce{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ce.UNAUTHENTICATED=new ce(null),ce.GOOGLE_CREDENTIALS=new ce("google-credentials-uid"),ce.FIRST_PARTY=new ce("first-party-uid"),ce.MOCK_USER=new ce("mock-user");let Ue="9.18.0";const wt=new Qe.Yd("@firebase/firestore");function ln(){return wt.logLevel}function ot(l,...e){if(wt.logLevel<=Qe.in.DEBUG){const i=e.map(Dn);wt.debug(`Firestore (${Ue}): ${l}`,...i)}}function vn(l,...e){if(wt.logLevel<=Qe.in.ERROR){const i=e.map(Dn);wt.error(`Firestore (${Ue}): ${l}`,...i)}}function Vn(l,...e){if(wt.logLevel<=Qe.in.WARN){const i=e.map(Dn);wt.warn(`Firestore (${Ue}): ${l}`,...i)}}function Dn(l){if("string"==typeof l)return l;try{return JSON.stringify(l)}catch{return l}}function Ct(l="Unexpected state"){const e=`FIRESTORE (${Ue}) INTERNAL ASSERTION FAILED: `+l;throw vn(e),new Error(e)}function xt(l,e){l||Ct()}function kt(l,e){return l}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends Ye.ZR{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}class vo{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $a{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(ce.UNAUTHENTICATED))}shutdown(){}}class Fo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class ul{constructor(e){this.t=e,this.currentUser=ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){var u=this;let p=this.i;const _=z=>this.i!==p?(p=this.i,i(z)):Promise.resolve();let w=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Tr,e.enqueueRetryable(()=>_(this.currentUser))};const O=()=>{const z=w;e.enqueueRetryable((0,fe.Z)(function*(){yield z.promise,yield _(u.currentUser)}))},B=z=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(z=>B(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?B(z):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Tr)}},0),O()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(u=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(xt("string"==typeof u.accessToken),new vo(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new ce(e)}}class la{constructor(e,i,u,p){this.h=e,this.l=i,this.m=u,this.g=p,this.type="FirstParty",this.user=ce.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(xt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yd{constructor(e,i,u,p){this.h=e,this.l=i,this.m=u,this.g=p}getToken(){return Promise.resolve(new la(this.h,this.l,this.m,this.g))}start(e,i){e.enqueueRetryable(()=>i(ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ua{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ju{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,i){const u=_=>{null!=_.error&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.A;return this.A=_.token,ot("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?i(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>u(_))};const p=_=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>p(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?p(_):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(xt("string"==typeof i.token),this.A=i.token,new ua(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bo(l){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(l);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let u=0;u<l;u++)i[u]=Math.floor(256*Math.random());return i}class Ol{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let u="";for(;u.length<20;){const p=bo(40);for(let _=0;_<p.length;++_)u.length<20&&p[_]<i&&(u+=e.charAt(p[_]%e.length))}return u}}function Mn(l,e){return l<e?-1:l>e?1:0}function Ea(l,e,i){return l.length===e.length&&l.every((u,p)=>i(u,e[p]))}function vu(l){return l+"\0"}class ir{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new _t(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new _t(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new _t(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _t(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),u=Math.floor(1e6*(e-1e3*i));return new ir(i,u)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mn(this.nanoseconds,e.nanoseconds):Mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new ir(0,0))}static max(){return new fn(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ai{constructor(e,i,u){void 0===i?i=0:i>e.length&&Ct(),void 0===u?u=e.length-i:u>e.length-i&&Ct(),this.segments=e,this.offset=i,this.len=u}get length(){return this.len}isEqual(e){return 0===Ai.comparator(this,e)}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(u=>{i.push(u)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,u=this.limit();i<u;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const u=Math.min(e.length,i.length);for(let p=0;p<u;p++){const _=e.get(p),w=i.get(p);if(_<w)return-1;if(_>w)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class Wn extends Ai{construct(e,i,u){return new Wn(e,i,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const u of e){if(u.indexOf("//")>=0)throw new _t(je.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);i.push(...u.split("/").filter(p=>p.length>0))}return new Wn(i)}static emptyPath(){return new Wn([])}}const io=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Ai{construct(e,i,u){return new dr(e,i,u)}static isValidIdentifier(e){return io.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const i=[];let u="",p=0;const _=()=>{if(0===u.length)throw new _t(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(u),u=""};let w=!1;for(;p<e.length;){const O=e[p];if("\\"===O){if(p+1===e.length)throw new _t(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[p+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new _t(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);u+=B,p+=2}else"`"===O?(w=!w,p++):"."!==O||w?(u+=O,p++):(_(),p++)}if(_(),w)throw new _t(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(i)}static emptyPath(){return new dr([])}}class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(Wn.fromString(e))}static fromName(e){return new Ht(Wn.fromString(e).popFirst(5))}static empty(){return new Ht(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return Wn.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new Wn(e.slice()))}}class Lo{constructor(e,i,u,p){this.indexId=e,this.collectionGroup=i,this.fields=u,this.indexState=p}}function so(l){return l.fields.find(e=>2===e.kind)}function Ti(l){return l.fields.filter(e=>2!==e.kind)}Lo.UNKNOWN_ID=-1;class Ur{constructor(e,i){this.fieldPath=e,this.kind=i}}class cs{constructor(e,i){this.sequenceNumber=e,this.offset=i}static empty(){return new cs(0,Br.min())}}function Xu(l,e){const i=l.toTimestamp().seconds,u=l.toTimestamp().nanoseconds+1,p=fn.fromTimestamp(1e9===u?new ir(i+1,0):new ir(i,u));return new Br(p,Ht.empty(),e)}function Nl(l){return new Br(l.readTime,l.key,-1)}class Br{constructor(e,i,u){this.readTime=e,this.documentKey=i,this.largestBatchId=u}static min(){return new Br(fn.min(),Ht.empty(),-1)}static max(){return new Br(fn.max(),Ht.empty(),-1)}}function Xl(l,e){let i=l.readTime.compareTo(e.readTime);return 0!==i?i:(i=Ht.comparator(l.documentKey,e.documentKey),0!==i?i:Mn(l.largestBatchId,e.largestBatchId))}const wo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class za{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function oo(l){return ca.apply(this,arguments)}function ca(){return ca=(0,fe.Z)(function*(l){if(l.code!==je.FAILED_PRECONDITION||l.message!==wo)throw l;ot("LocalStore","Unexpectedly lost primary lease")}),ca.apply(this,arguments)}class qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new qe((u,p)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(u,p)},this.catchCallback=_=>{this.wrapFailure(i,_).next(u,p)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof qe?i:qe.resolve(i)}catch(i){return qe.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):qe.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):qe.reject(i)}static resolve(e){return new qe((i,u)=>{i(e)})}static reject(e){return new qe((i,u)=>{u(e)})}static waitFor(e){return new qe((i,u)=>{let p=0,_=0,w=!1;e.forEach(O=>{++p,O.next(()=>{++_,w&&_===p&&i()},B=>u(B))}),w=!0,_===p&&i()})}static or(e){let i=qe.resolve(!1);for(const u of e)i=i.next(p=>p?qe.resolve(p):u());return i}static forEach(e,i){const u=[];return e.forEach((p,_)=>{u.push(i.call(this,p,_))}),this.waitFor(u)}static mapArray(e,i){return new qe((u,p)=>{const _=e.length,w=new Array(_);let O=0;for(let B=0;B<_;B++){const z=B;i(e[z]).next(ne=>{w[z]=ne,++O,O===_&&u(w)},ne=>p(ne))}})}static doWhile(e,i){return new qe((u,p)=>{const _=()=>{!0===e()?i().next(()=>{_()},p):u()};_()})}}class Ml{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.P=new Tr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{i.error?this.P.reject(new cl(e,i.error)):this.P.resolve()},this.transaction.onerror=u=>{const p=ec(u.target.error);this.P.reject(new cl(e,p))}}static open(e,i,u,p){try{return new Ml(i,e.transaction(p,u))}catch(_){throw new cl(i,_)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ot("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const i=this.transaction.objectStore(e);return new Vr(i)}}class ao{constructor(e,i,u){this.name=e,this.version=i,this.S=u,12.2===ao.D((0,Ye.z$)())&&vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ot("SimpleDb","Removing database:",e),dl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ye.hl)())return!1;if(ao.N())return!0;const e=(0,Ye.z$)(),i=ao.D(e),u=0<i&&i<10,p=ao.k(e),_=0<p&&p<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||u||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,i){return e.store(i)}static D(e){const i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(u)}static k(e){const i=e.match(/Android ([\d.]+)/i),u=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(u)}O(e){var i=this;return(0,fe.Z)(function*(){return i.db||(ot("SimpleDb","Opening database:",i.name),i.db=yield new Promise((u,p)=>{const _=indexedDB.open(i.name,i.version);_.onsuccess=w=>{u(w.target.result)},_.onblocked=()=>{p(new cl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const O=w.target.error;p("VersionError"===O.name?new _t(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new _t(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new cl(e,O))},_.onupgradeneeded=w=>{ot("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',w.oldVersion),i.S.F(w.target.result,_.transaction,w.oldVersion,i.version).next(()=>{ot("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.B&&(i.db.onversionchange=u=>i.B(u)),i.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,u,p){var _=this;return(0,fe.Z)(function*(){const w="readonly"===i;let O=0;for(;;){++O;try{_.db=yield _.O(e);const B=Ml.open(_.db,e,w?"readonly":"readwrite",u),z=p(B).next(ne=>(B.V(),ne)).catch(ne=>(B.abort(ne),qe.reject(ne))).toPromise();return z.catch(()=>{}),yield B.v,z}catch(B){const z=B,ne="FirebaseError"!==z.name&&O<3;if(ot("SimpleDb","Transaction failed with error:",z.message,"Retrying:",ne),_.close(),!ne)return Promise.reject(z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Wa{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return dl(this.q.delete())}}class cl extends _t{constructor(e,i){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function lo(l){return"IndexedDbTransactionError"===l.name}class Vr{constructor(e){this.store=e}put(e,i){let u;return void 0!==i?(ot("SimpleDb","PUT",this.store.name,e,i),u=this.store.put(i,e)):(ot("SimpleDb","PUT",this.store.name,"<auto-key>",e),u=this.store.put(e)),dl(u)}add(e){return ot("SimpleDb","ADD",this.store.name,e,e),dl(this.store.add(e))}get(e){return dl(this.store.get(e)).next(i=>(void 0===i&&(i=null),ot("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return ot("SimpleDb","DELETE",this.store.name,e),dl(this.store.delete(e))}count(){return ot("SimpleDb","COUNT",this.store.name),dl(this.store.count())}W(e,i){const u=this.options(e,i);if(u.index||"function"!=typeof this.store.getAll){const p=this.cursor(u),_=[];return this.H(p,(w,O)=>{_.push(O)}).next(()=>_)}{const p=this.store.getAll(u.range);return new qe((_,w)=>{p.onerror=O=>{w(O.target.error)},p.onsuccess=O=>{_(O.target.result)}})}}J(e,i){const u=this.store.getAll(e,null===i?void 0:i);return new qe((p,_)=>{u.onerror=w=>{_(w.target.error)},u.onsuccess=w=>{p(w.target.result)}})}Y(e,i){ot("SimpleDb","DELETE ALL",this.store.name);const u=this.options(e,i);u.Z=!1;const p=this.cursor(u);return this.H(p,(_,w,O)=>O.delete())}X(e,i){let u;i?u=e:(u={},i=e);const p=this.cursor(u);return this.H(p,i)}tt(e){const i=this.cursor({});return new qe((u,p)=>{i.onerror=_=>{const w=ec(_.target.error);p(w)},i.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(O=>{O?w.continue():u()}):u()}})}H(e,i){const u=[];return new qe((p,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const O=w.target.result;if(!O)return void p();const B=new Wa(O),z=i(O.primaryKey,O.value,B);if(z instanceof qe){const ne=z.catch(we=>(B.done(),qe.reject(we)));u.push(ne)}B.isDone?p():null===B.G?O.continue():O.continue(B.G)}}).next(()=>qe.waitFor(u))}options(e,i){let u;return void 0!==e&&("string"==typeof e?u=e:i=e),{index:u,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){const u=this.store.index(e.index);return e.Z?u.openKeyCursor(e.range,i):u.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}function dl(l){return new qe((e,i)=>{l.onsuccess=u=>{e(u.target.result)},l.onerror=u=>{const p=ec(u.target.error);i(p)}})}let vd=!1;function ec(l){const e=ao.D((0,Ye.z$)());if(e>=12.2&&e<13){const i="An internal error was encountered in the Indexed Database server";if(l.message.indexOf(i)>=0){const u=new _t("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vd||(vd=!0,setTimeout(()=>{throw u},0)),u}}return l}class hl{constructor(e,i){this.asyncQueue=e,this.et=i,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var i=this;ot("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){i.task=null;try{ot("IndexBackiller",`Documents written: ${yield i.et.st()}`)}catch(u){lo(u)?ot("IndexBackiller","Ignoring IndexedDB error during index backfill: ",u):yield oo(u)}yield i.nt(6e4)}))}}class Rl{constructor(e,i){this.localStore=e,this.persistence=i}st(e=50){var i=this;return(0,fe.Z)(function*(){return i.persistence.runTransaction("Backfill Indexes","readwrite-primary",u=>i.it(u,e))})()}it(e,i){const u=new Set;let p=i,_=!0;return qe.doWhile(()=>!0===_&&p>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!u.has(w))return ot("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,p).next(O=>{p-=O,u.add(w)});_=!1})).next(()=>i-p)}rt(e,i,u){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,i).next(p=>this.localStore.localDocuments.getNextDocuments(e,i,p,u).next(_=>{const w=_.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(p,_)).next(O=>(ot("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,i,O))).next(()=>w.size)}))}ot(e,i){let u=e;return i.changes.forEach((p,_)=>{const w=Nl(_);Xl(w,u)>0&&(u=w)}),new Br(u.readTime,u.documentKey,Math.max(i.batchId,e.largestBatchId))}}let Ms=(()=>{class l{constructor(i,u){this.previousValue=i,u&&(u.sequenceNumberHandler=p=>this.ut(p),this.ct=p=>u.writeSequenceNumber(p))}ut(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.ct&&this.ct(i),i}}return l.at=-1,l})();class bu{constructor(e,i,u,p,_,w,O,B){this.databaseId=e,this.appId=i,this.persistenceKey=u,this.host=p,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=O,this.useFetchStreams=B}}class zr{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new zr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}function wu(l){let e=0;for(const i in l)Object.prototype.hasOwnProperty.call(l,i)&&e++;return e}function uo(l,e){for(const i in l)Object.prototype.hasOwnProperty.call(l,i)&&e(i,l[i])}function Pl(l){for(const e in l)if(Object.prototype.hasOwnProperty.call(l,e))return!1;return!0}function Oi(l){return null==l}function co(l){return 0===l&&1/l==-1/0}function qa(l){return"number"==typeof l&&Number.isInteger(l)&&!co(l)&&l<=Number.MAX_SAFE_INTEGER&&l>=Number.MIN_SAFE_INTEGER}class C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class E{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(u){try{return atob(u)}catch(p){throw p instanceof DOMException?new C("Invalid base64 string: "+p):p}}(e);return new E(i)}static fromUint8Array(e){const i=function(u){let p="";for(let _=0;_<u.length;++_)p+=String.fromCharCode(u[_]);return p}(e);return new E(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let u=0;u<e.length;u++)i[u]=e.charCodeAt(u);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}E.EMPTY_BYTE_STRING=new E("");const P=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function V(l){if(xt(!!l),"string"==typeof l){let e=0;const i=P.exec(l);if(xt(!!i),i[1]){let p=i[1];p=(p+"000000000").substr(0,9),e=Number(p)}const u=new Date(l);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:K(l.seconds),nanos:K(l.nanos)}}function K(l){return"number"==typeof l?l:"string"==typeof l?Number(l):0}function ee(l){return"string"==typeof l?E.fromBase64String(l):E.fromUint8Array(l)}function Me(l){var e,i;return"server_timestamp"===(null===(i=((null===(e=l?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function vt(l){const e=l.mapValue.fields.__previous_value__;return Me(e)?vt(e):e}function Zt(l){const e=V(l.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}const Kt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kn={nullValue:"NULL_VALUE"};function oi(l){return"nullValue"in l?0:"booleanValue"in l?1:"integerValue"in l||"doubleValue"in l?2:"timestampValue"in l?3:"stringValue"in l?5:"bytesValue"in l?6:"referenceValue"in l?7:"geoPointValue"in l?8:"arrayValue"in l?9:"mapValue"in l?Me(l)?4:At(l)?9007199254740991:10:Ct()}function yi(l,e){if(l===e)return!0;const i=oi(l);if(i!==oi(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return l.booleanValue===e.booleanValue;case 4:return Zt(l).isEqual(Zt(e));case 3:return function(u,p){if("string"==typeof u.timestampValue&&"string"==typeof p.timestampValue&&u.timestampValue.length===p.timestampValue.length)return u.timestampValue===p.timestampValue;const _=V(u.timestampValue),w=V(p.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(l,e);case 5:return l.stringValue===e.stringValue;case 6:return p=e,ee(l.bytesValue).isEqual(ee(p.bytesValue));case 7:return l.referenceValue===e.referenceValue;case 8:return function(u,p){return K(u.geoPointValue.latitude)===K(p.geoPointValue.latitude)&&K(u.geoPointValue.longitude)===K(p.geoPointValue.longitude)}(l,e);case 2:return function(u,p){if("integerValue"in u&&"integerValue"in p)return K(u.integerValue)===K(p.integerValue);if("doubleValue"in u&&"doubleValue"in p){const _=K(u.doubleValue),w=K(p.doubleValue);return _===w?co(_)===co(w):isNaN(_)&&isNaN(w)}return!1}(l,e);case 9:return Ea(l.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:return function(u,p){const _=u.mapValue.fields||{},w=p.mapValue.fields||{};if(wu(_)!==wu(w))return!1;for(const O in _)if(_.hasOwnProperty(O)&&(void 0===w[O]||!yi(_[O],w[O])))return!1;return!0}(l,e);default:return Ct()}var p}function Ks(l,e){return void 0!==(l.values||[]).find(i=>yi(i,e))}function qs(l,e){if(l===e)return 0;const i=oi(l),u=oi(e);if(i!==u)return Mn(i,u);switch(i){case 0:case 9007199254740991:return 0;case 1:return Mn(l.booleanValue,e.booleanValue);case 2:return function(p,_){const w=K(p.integerValue||p.doubleValue),O=K(_.integerValue||_.doubleValue);return w<O?-1:w>O?1:w===O?0:isNaN(w)?isNaN(O)?0:-1:1}(l,e);case 3:return ho(l.timestampValue,e.timestampValue);case 4:return ho(Zt(l),Zt(e));case 5:return Mn(l.stringValue,e.stringValue);case 6:return function(p,_){const w=ee(p),O=ee(_);return w.compareTo(O)}(l.bytesValue,e.bytesValue);case 7:return function(p,_){const w=p.split("/"),O=_.split("/");for(let B=0;B<w.length&&B<O.length;B++){const z=Mn(w[B],O[B]);if(0!==z)return z}return Mn(w.length,O.length)}(l.referenceValue,e.referenceValue);case 8:return function(p,_){const w=Mn(K(p.latitude),K(_.latitude));return 0!==w?w:Mn(K(p.longitude),K(_.longitude))}(l.geoPointValue,e.geoPointValue);case 9:return function(p,_){const w=p.values||[],O=_.values||[];for(let B=0;B<w.length&&B<O.length;++B){const z=qs(w[B],O[B]);if(z)return z}return Mn(w.length,O.length)}(l.arrayValue,e.arrayValue);case 10:return function(p,_){if(p===Kt.mapValue&&_===Kt.mapValue)return 0;if(p===Kt.mapValue)return 1;if(_===Kt.mapValue)return-1;const w=p.fields||{},O=Object.keys(w),B=_.fields||{},z=Object.keys(B);O.sort(),z.sort();for(let ne=0;ne<O.length&&ne<z.length;++ne){const we=Mn(O[ne],z[ne]);if(0!==we)return we;const Be=qs(w[O[ne]],B[z[ne]]);if(0!==Be)return Be}return Mn(O.length,z.length)}(l.mapValue,e.mapValue);default:throw Ct()}}function ho(l,e){if("string"==typeof l&&"string"==typeof e&&l.length===e.length)return Mn(l,e);const i=V(l),u=V(e),p=Mn(i.seconds,u.seconds);return 0!==p?p:Mn(i.nanos,u.nanos)}function xl(l){return Ia(l)}function Ia(l){return"nullValue"in l?"null":"booleanValue"in l?""+l.booleanValue:"integerValue"in l?""+l.integerValue:"doubleValue"in l?""+l.doubleValue:"timestampValue"in l?function(u){const p=V(u);return`time(${p.seconds},${p.nanos})`}(l.timestampValue):"stringValue"in l?l.stringValue:"bytesValue"in l?ee(l.bytesValue).toBase64():"referenceValue"in l?Ht.fromName(l.referenceValue).toString():"geoPointValue"in l?`geo(${(e=l.geoPointValue).latitude},${e.longitude})`:"arrayValue"in l?function(u){let p="[",_=!0;for(const w of u.values||[])_?_=!1:p+=",",p+=Ia(w);return p+"]"}(l.arrayValue):"mapValue"in l?function(u){const p=Object.keys(u.fields||{}).sort();let _="{",w=!0;for(const O of p)w?w=!1:_+=",",_+=`${O}:${Ia(u.fields[O])}`;return _+"}"}(l.mapValue):Ct();var e}function Uo(l,e){return{referenceValue:`projects/${l.projectId}/databases/${l.database}/documents/${e.path.canonicalString()}`}}function F(l){return!!l&&"integerValue"in l}function G(l){return!!l&&"arrayValue"in l}function Z(l){return!!l&&"nullValue"in l}function ge(l){return!!l&&"doubleValue"in l&&isNaN(Number(l.doubleValue))}function xe(l){return!!l&&"mapValue"in l}function ze(l){if(l.geoPointValue)return{geoPointValue:Object.assign({},l.geoPointValue)};if(l.timestampValue&&"object"==typeof l.timestampValue)return{timestampValue:Object.assign({},l.timestampValue)};if(l.mapValue){const e={mapValue:{fields:{}}};return uo(l.mapValue.fields,(i,u)=>e.mapValue.fields[i]=ze(u)),e}if(l.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(l.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=ze(l.arrayValue.values[i]);return e}return Object.assign({},l)}function At(l){return"__max__"===(((l.mapValue||{}).fields||{}).__type__||{}).stringValue}function dn(l){return"nullValue"in l?Kn:"booleanValue"in l?{booleanValue:!1}:"integerValue"in l||"doubleValue"in l?{doubleValue:NaN}:"timestampValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in l?{stringValue:""}:"bytesValue"in l?{bytesValue:""}:"referenceValue"in l?Uo(zr.empty(),Ht.empty()):"geoPointValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in l?{arrayValue:{}}:"mapValue"in l?{mapValue:{}}:Ct()}function bn(l){return"nullValue"in l?{booleanValue:!1}:"booleanValue"in l?{doubleValue:NaN}:"integerValue"in l||"doubleValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in l?{stringValue:""}:"stringValue"in l?{bytesValue:""}:"bytesValue"in l?Uo(zr.empty(),Ht.empty()):"referenceValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in l?{arrayValue:{}}:"arrayValue"in l?{mapValue:{}}:"mapValue"in l?Kt:Ct()}function Sn(l,e){const i=qs(l.value,e.value);return 0!==i?i:l.inclusive&&!e.inclusive?-1:!l.inclusive&&e.inclusive?1:0}function Zn(l,e){const i=qs(l.value,e.value);return 0!==i?i:l.inclusive&&!e.inclusive?1:!l.inclusive&&e.inclusive?-1:0}class wn{constructor(e,i){this.position=e,this.inclusive=i}}function Bo(l,e,i){let u=0;for(let p=0;p<l.position.length;p++){const _=e[p],w=l.position[p];if(u=_.field.isKeyField()?Ht.comparator(Ht.fromName(w.referenceValue),i.key):qs(w,i.data.field(_.field)),"desc"===_.dir&&(u*=-1),0!==u)break}return u}function ds(l,e){if(null===l)return null===e;if(null===e||l.inclusive!==e.inclusive||l.position.length!==e.position.length)return!1;for(let i=0;i<l.position.length;i++)if(!yi(l.position[i],e.position[i]))return!1;return!0}class Eu{}class ar extends Eu{constructor(e,i,u){super(),this.field=e,this.op=i,this.value=u}static create(e,i,u){return e.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(e,i,u):new If(e,i,u):"array-contains"===i?new Cf(e,u):"in"===i?new xm(e,u):"not-in"===i?new iv(e,u):"array-contains-any"===i?new Tf(e,u):new ar(e,i,u)}static createKeyFieldInFilter(e,i,u){return"in"===i?new rv(e,u):new vh(e,u)}matches(e){const i=e.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(qs(i,this.value)):null!==i&&oi(this.value)===oi(i)&&this.matchesComparison(qs(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Mr extends Eu{constructor(e,i){super(),this.filters=e,this.op=i,this.ft=null}static create(e,i){return new Mr(e,i)}matches(e){return Rs(this)?void 0===this.filters.find(i=>!i.matches(e)):void 0!==this.filters.find(i=>i.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(i=>i.isInequality());return null!==e?e.field:null}dt(e){for(const i of this.getFlattenedFilters())if(e(i))return i;return null}}function Rs(l){return"and"===l.op}function da(l){return"or"===l.op}function xc(l){return bd(l)&&Rs(l)}function bd(l){for(const e of l.filters)if(e instanceof Mr)return!1;return!0}function _h(l){if(l instanceof ar)return l.field.canonicalString()+l.op.toString()+xl(l.value);if(xc(l))return l.filters.map(e=>_h(e)).join(",");{const e=l.filters.map(i=>_h(i)).join(",");return`${l.op}(${e})`}}function yh(l,e){return l instanceof ar?(i=l,(u=e)instanceof ar&&i.op===u.op&&i.field.isEqual(u.field)&&yi(i.value,u.value)):l instanceof Mr?function(i,u){return u instanceof Mr&&i.op===u.op&&i.filters.length===u.filters.length&&i.filters.reduce((p,_,w)=>p&&yh(_,u.filters[w]),!0)}(l,e):void Ct();var i,u}function Df(l,e){const i=l.filters.concat(e);return Mr.create(i,l.op)}function Pm(l){return l instanceof ar?`${(e=l).field.canonicalString()} ${e.op} ${xl(e.value)}`:l instanceof Mr?function(e){return e.op.toString()+" {"+e.getFilters().map(Pm).join(" ,")+"}"}(l):"Filter";var e}class If extends ar{constructor(e,i,u){super(e,i,u),this.key=Ht.fromName(u.referenceValue)}matches(e){const i=Ht.comparator(e.key,this.key);return this.matchesComparison(i)}}class rv extends ar{constructor(e,i){super(e,"in",i),this.keys=wd(0,i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class vh extends ar{constructor(e,i){super(e,"not-in",i),this.keys=wd(0,i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function wd(l,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(u=>Ht.fromName(u.referenceValue))}class Cf extends ar{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return G(i)&&Ks(i.arrayValue,this.value)}}class xm extends ar{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return null!==i&&Ks(this.value.arrayValue,i)}}class iv extends ar{constructor(e,i){super(e,"not-in",i)}matches(e){if(Ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return null!==i&&!Ks(this.value.arrayValue,i)}}class Tf extends ar{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!G(i)||!i.arrayValue.values)&&i.arrayValue.values.some(u=>Ks(this.value.arrayValue,u))}}class Ed{constructor(e,i="asc"){this.field=e,this.dir=i}}function sv(l,e){return l.dir===e.dir&&l.field.isEqual(e.field)}class Ji{constructor(e,i){this.comparator=e,this.root=i||Eo.EMPTY}insert(e,i){return new Ji(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Eo.BLACK,null,null))}remove(e){return new Ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Eo.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const u=this.comparator(e,i.key);if(0===u)return i.value;u<0?i=i.left:u>0&&(i=i.right)}return null}indexOf(e){let i=0,u=this.root;for(;!u.isEmpty();){const p=this.comparator(e,u.key);if(0===p)return i+u.left.size;p<0?u=u.left:(i+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,u)=>(e(i,u),!1))}toString(){const e=[];return this.inorderTraversal((i,u)=>(e.push(`${i}:${u}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,i,u,p){this.isReverse=p,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=i?u(e.key,i):1,i&&p&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Eo{constructor(e,i,u,p,_){this.key=e,this.value=i,this.color=u??Eo.RED,this.left=p??Eo.EMPTY,this.right=_??Eo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,u,p,_){return new Eo(e??this.key,i??this.value,u??this.color,p??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,u){let p=this;const _=u(e,p.key);return p=_<0?p.copy(null,null,null,p.left.insert(e,i,u),null):0===_?p.copy(null,i,null,null,null):p.copy(null,null,null,null,p.right.insert(e,i,u)),p.fixUp()}removeMin(){if(this.left.isEmpty())return Eo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let u,p=this;if(i(e,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(e,i),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===i(e,p.key)){if(p.right.isEmpty())return Eo.EMPTY;u=p.right.min(),p=p.copy(u.key,u.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(e,i))}return p.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Eo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Eo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}Eo.EMPTY=null,Eo.RED=!0,Eo.BLACK=!1,Eo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(l,e,i,u,p){return this}insert(l,e,i){return new Eo(l,e)}remove(l,e){return this}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ci{constructor(e){this.comparator=e,this.data=new Ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,u)=>(e(i),!1))}forEachInRange(e,i){const u=this.data.getIteratorFrom(e[0]);for(;u.hasNext();){const p=u.getNext();if(this.comparator(p.key,e[1])>=0)return;i(p.key)}}forEachWhile(e,i){let u;for(u=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Sf(this.data.getIterator())}getIteratorFrom(e){return new Sf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(u=>{i=i.add(u)}),i}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const i=this.data.getIterator(),u=e.data.getIterator();for(;i.hasNext();){const p=i.getNext().key,_=u.getNext().key;if(0!==this.comparator(p,_))return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new ci(this.comparator);return i.data=e,i}}class Sf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Du(l){return l.hasNext()?l.getNext():void 0}class Vo{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new Vo([])}unionWith(e){let i=new ci(dr.comparator);for(const u of this.fields)i=i.add(u);for(const u of e)i=i.add(u);return new Vo(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(i,u)=>i.isEqual(u))}}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let u=0;u<e.length-1;++u)if(i=(i.mapValue.fields||{})[e.get(u)],!xe(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=ze(i)}setAll(e){let i=dr.emptyPath(),u={},p=[];e.forEach((w,O)=>{if(!i.isImmediateParentOf(O)){const B=this.getFieldsMap(i);this.applyChanges(B,u,p),u={},p=[],i=O.popLast()}w?u[O.lastSegment()]=ze(w):p.push(O.lastSegment())});const _=this.getFieldsMap(i);this.applyChanges(_,u,p)}delete(e){const i=this.field(e.popLast());xe(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let u=0;u<e.length;++u){let p=i.mapValue.fields[e.get(u)];xe(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},i.mapValue.fields[e.get(u)]=p),i=p}return i.mapValue.fields}applyChanges(e,i,u){uo(i,(p,_)=>e[p]=_);for(const p of u)delete e[p]}clone(){return new hs(ze(this.value))}}function Af(l){const e=[];return uo(l.fields,(i,u)=>{const p=new dr([i]);if(xe(u)){const _=Af(u.mapValue).fields;if(0===_.length)e.push(p);else for(const w of _)e.push(p.child(w))}else e.push(p)}),new Vo(e)}class Rr{constructor(e,i,u,p,_,w,O){this.key=e,this.documentType=i,this.version=u,this.readTime=p,this.createTime=_,this.data=w,this.documentState=O}static newInvalidDocument(e){return new Rr(e,0,fn.min(),fn.min(),fn.min(),hs.empty(),0)}static newFoundDocument(e,i,u,p){return new Rr(e,1,i,fn.min(),u,p,0)}static newNoDocument(e,i){return new Rr(e,2,i,fn.min(),fn.min(),hs.empty(),0)}static newUnknownDocument(e,i){return new Rr(e,3,i,fn.min(),fn.min(),hs.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class km{constructor(e,i=null,u=[],p=[],_=null,w=null,O=null){this.path=e,this.collectionGroup=i,this.orderBy=u,this.filters=p,this.limit=_,this.startAt=w,this.endAt=O,this._t=null}}function Of(l,e=null,i=[],u=[],p=null,_=null,w=null){return new km(l,e,i,u,p,_,w)}function eu(l){const e=kt(l);if(null===e._t){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(u=>_h(u)).join(","),i+="|ob:",i+=e.orderBy.map(u=>{return(p=u).field.canonicalString()+p.dir;var p}).join(","),Oi(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(u=>xl(u)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(u=>xl(u)).join(",")),e._t=i}return e._t}function kc(l,e){if(l.limit!==e.limit||l.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<l.orderBy.length;i++)if(!sv(l.orderBy[i],e.orderBy[i]))return!1;if(l.filters.length!==e.filters.length)return!1;for(let i=0;i<l.filters.length;i++)if(!yh(l.filters[i],e.filters[i]))return!1;return l.collectionGroup===e.collectionGroup&&!!l.path.isEqual(e.path)&&!!ds(l.startAt,e.startAt)&&ds(l.endAt,e.endAt)}function Iu(l){return Ht.isDocumentKey(l.path)&&null===l.collectionGroup&&0===l.filters.length}function bh(l,e){return l.filters.filter(i=>i instanceof ar&&i.field.isEqual(e))}function Nf(l,e,i){let u=Kn,p=!0;for(const _ of bh(l,e)){let w=Kn,O=!0;switch(_.op){case"<":case"<=":w=dn(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,O=!1;break;case"!=":case"not-in":w=Kn}Sn({value:u,inclusive:p},{value:w,inclusive:O})<0&&(u=w,p=O)}if(null!==i)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=i.position[_];Sn({value:u,inclusive:p},{value:w,inclusive:i.inclusive})<0&&(u=w,p=i.inclusive);break}return{value:u,inclusive:p}}function xp(l,e,i){let u=Kt,p=!0;for(const _ of bh(l,e)){let w=Kt,O=!0;switch(_.op){case">=":case">":w=bn(_.value),O=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,O=!1;break;case"!=":case"not-in":w=Kt}Zn({value:u,inclusive:p},{value:w,inclusive:O})>0&&(u=w,p=O)}if(null!==i)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=i.position[_];Zn({value:u,inclusive:p},{value:w,inclusive:i.inclusive})>0&&(u=w,p=i.inclusive);break}return{value:u,inclusive:p}}class Ya{constructor(e,i=null,u=[],p=[],_=null,w="F",O=null,B=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=u,this.filters=p,this.limit=_,this.limitType=w,this.startAt=O,this.endAt=B,this.wt=null,this.gt=null}}function kp(l,e,i,u,p,_,w,O){return new Ya(l,e,i,u,p,_,w,O)}function tc(l){return new Ya(l)}function Do(l){return 0===l.filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())}function Id(l){return l.explicitOrderBy.length>0?l.explicitOrderBy[0].field:null}function Cd(l){for(const e of l.filters){const i=e.getFirstInequalityField();if(null!==i)return i}return null}function Td(l){return null!==l.collectionGroup}function Ki(l){const e=kt(l);if(null===e.wt){e.wt=[];const i=Cd(e),u=Id(e);if(null!==i&&null===u)i.isKeyField()||e.wt.push(new Ed(i)),e.wt.push(new Ed(dr.keyField(),"asc"));else{let p=!1;for(const _ of e.explicitOrderBy)e.wt.push(_),_.field.isKeyField()&&(p=!0);if(!p){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ed(dr.keyField(),_))}}}return e.wt}function Ps(l){const e=kt(l);if(!e.gt)if("F"===e.limitType)e.gt=Of(e.path,e.collectionGroup,Ki(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const _ of Ki(e))i.push(new Ed(_.field,"desc"===_.dir?"asc":"desc"));const u=e.endAt?new wn(e.endAt.position,e.endAt.inclusive):null,p=e.startAt?new wn(e.startAt.position,e.startAt.inclusive):null;e.gt=Of(e.path,e.collectionGroup,i,e.filters,e.limit,u,p)}return e.gt}function Sd(l,e){e.getFirstInequalityField(),Cd(l);const i=l.filters.concat([e]);return new Ya(l.path,l.collectionGroup,l.explicitOrderBy.slice(),i,l.limit,l.limitType,l.startAt,l.endAt)}function Ad(l,e,i){return new Ya(l.path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),e,i,l.startAt,l.endAt)}function wh(l,e){return kc(Ps(l),Ps(e))&&l.limitType===e.limitType}function A(l){return`${eu(Ps(l))}|lt:${l.limitType}`}function v(l){return`Query(target=${function(e){let i=e.path.canonicalString();return null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(u=>Pm(u)).join(", ")}]`),Oi(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(u=>{return`${(p=u).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(u=>xl(u)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(u=>xl(u)).join(",")),`Target(${i})`}(Ps(l))}; limitType=${l.limitType})`}function b(l,e){return e.isFoundDocument()&&function(i,u){const p=u.key.path;return null!==i.collectionGroup?u.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(p):Ht.isDocumentKey(i.path)?i.path.isEqual(p):i.path.isImmediateParentOf(p)}(l,e)&&function(i,u){for(const p of Ki(i))if(!p.field.isKeyField()&&null===u.data.field(p.field))return!1;return!0}(l,e)&&function(i,u){for(const p of i.filters)if(!p.matches(u))return!1;return!0}(l,e)&&(u=e,!((i=l).startAt&&!function(p,_,w){const O=Bo(p,_,w);return p.inclusive?O<=0:O<0}(i.startAt,Ki(i),u)||i.endAt&&!function(p,_,w){const O=Bo(p,_,w);return p.inclusive?O>=0:O>0}(i.endAt,Ki(i),u)));var i,u}function M(l){return l.collectionGroup||(l.path.length%2==1?l.path.lastSegment():l.path.get(l.path.length-2))}function q(l){return(e,i)=>{let u=!1;for(const p of Ki(l)){const _=se(p,e,i);if(0!==_)return _;u=u||p.field.isKeyField()}return 0}}function se(l,e,i){const u=l.field.isKeyField()?Ht.comparator(e.key,i.key):function(p,_,w){const O=_.data.field(p),B=w.data.field(p);return null!==O&&null!==B?qs(O,B):Ct()}(l.field,e,i);switch(l.dir){case"asc":return u;case"desc":return-1*u;default:return Ct()}}function He(l,e){if(l.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:co(e)?"-0":e}}function St(l){return{integerValue:""+l}}function un(l,e){return qa(e)?St(e):He(l,e)}class In{constructor(){this._=void 0}}function Xn(l,e,i){return l instanceof Go?function(u,p){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return p&&(_.fields.__previous_value__=p),{mapValue:_}}(i,e):l instanceof Za?Eh(l,e):l instanceof ha?Od(l,e):function(u,p){const _=pl(u,p),w=Fc(_)+Fc(u.It);return F(_)&&F(u.It)?St(w):He(u.Tt,w)}(l,e)}function Ni(l,e,i){return l instanceof Za?Eh(l,e):l instanceof ha?Od(l,e):i}function pl(l,e){return l instanceof Cu?F(i=e)||(u=i)&&"doubleValue"in u?e:{integerValue:0}:null;var u,i}class Go extends In{}class Za extends In{constructor(e){super(),this.elements=e}}function Eh(l,e){const i=Nd(e);for(const u of l.elements)i.some(p=>yi(p,u))||i.push(u);return{arrayValue:{values:i}}}class ha extends In{constructor(e){super(),this.elements=e}}function Od(l,e){let i=Nd(e);for(const u of l.elements)i=i.filter(p=>!yi(p,u));return{arrayValue:{values:i}}}class Cu extends In{constructor(e,i){super(),this.Tt=e,this.It=i}}function Fc(l){return K(l.integerValue||l.doubleValue)}function Nd(l){return G(l)&&l.arrayValue.values?l.arrayValue.values.slice():[]}class Lc{constructor(e,i){this.field=e,this.transform=i}}class Fp{constructor(e,i){this.version=e,this.transformResults=i}}class Mi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(l,e){return void 0!==l.updateTime?e.isFoundDocument()&&e.version.isEqual(l.updateTime):void 0===l.exists||l.exists===e.isFoundDocument()}class Dh{}function Fm(l,e){if(!l.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return l.isNoDocument()?new Md(l.key,Mi.none()):new Rf(l.key,l.data,Mi.none());{const i=l.data,u=hs.empty();let p=new ci(dr.comparator);for(let _ of e.fields)if(!p.has(_)){let w=i.field(_);null===w&&_.length>1&&(_=_.popLast(),w=i.field(_)),null===w?u.delete(_):u.set(_,w),p=p.add(_)}return new Tu(l.key,u,new Vo(p.toArray()),Mi.none())}}function Lm(l,e,i){l instanceof Rf?function(u,p,_){const w=u.value.clone(),O=Bc(u.fieldTransforms,p,_.transformResults);w.setAll(O),p.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(l,e,i):l instanceof Tu?function(u,p,_){if(!Uc(u.precondition,p))return void p.convertToUnknownDocument(_.version);const w=Bc(u.fieldTransforms,p,_.transformResults),O=p.data;O.setAll(Bm(u)),O.setAll(w),p.convertToFoundDocument(_.version,O).setHasCommittedMutations()}(l,e,i):e.convertToNoDocument(i.version).setHasCommittedMutations()}function Ih(l,e,i,u){return l instanceof Rf?function(p,_,w,O){if(!Uc(p.precondition,_))return w;const B=p.value.clone(),z=Vm(p.fieldTransforms,O,_);return B.setAll(z),_.convertToFoundDocument(_.version,B).setHasLocalMutations(),null}(l,e,i,u):l instanceof Tu?function(p,_,w,O){if(!Uc(p.precondition,_))return w;const B=Vm(p.fieldTransforms,O,_),z=_.data;return z.setAll(Bm(p)),z.setAll(B),_.convertToFoundDocument(_.version,z).setHasLocalMutations(),null===w?null:w.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(ne=>ne.field))}(l,e,i,u):(w=i,Uc(l.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):w);var _,w}function Um(l,e){let i=null;for(const u of l.fieldTransforms){const p=e.data.field(u.field),_=pl(u.transform,p||null);null!=_&&(null===i&&(i=hs.empty()),i.set(u.field,_))}return i||null}function ov(l,e){return l.type===e.type&&!!l.key.isEqual(e.key)&&!!l.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(i=l.fieldTransforms)&&void 0===u||i&&u&&Ea(i,u,(p,_)=>function Mf(l,e){return l.field.isEqual(e.field)&&(u=e.transform,(i=l.transform)instanceof Za&&u instanceof Za||i instanceof ha&&u instanceof ha?Ea(i.elements,u.elements,yi):i instanceof Cu&&u instanceof Cu?yi(i.It,u.It):i instanceof Go&&u instanceof Go);var i,u}(p,_))))&&(0===l.type?l.value.isEqual(e.value):1!==l.type||l.data.isEqual(e.data)&&l.fieldMask.isEqual(e.fieldMask));var i,u}class Rf extends Dh{constructor(e,i,u,p=[]){super(),this.key=e,this.value=i,this.precondition=u,this.fieldTransforms=p,this.type=0}getFieldMask(){return null}}class Tu extends Dh{constructor(e,i,u,p,_=[]){super(),this.key=e,this.data=i,this.fieldMask=u,this.precondition=p,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function Bm(l){const e=new Map;return l.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const u=l.data.field(i);e.set(i,u)}}),e}function Bc(l,e,i){const u=new Map;xt(l.length===i.length);for(let p=0;p<i.length;p++){const _=l[p],w=_.transform,O=e.data.field(_.field);u.set(_.field,Ni(w,O,i[p]))}return u}function Vm(l,e,i){const u=new Map;for(const p of l){const _=p.transform,w=i.data.field(p.field);u.set(p.field,Xn(_,w,e))}return u}class Md extends Dh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gm extends Dh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oE{constructor(e){this.count=e}}var Xi,Wr;function jm(l){switch(l){default:return Ct();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function Hm(l){if(void 0===l)return vn("GRPC error has no .code"),je.UNKNOWN;switch(l){case Xi.OK:return je.OK;case Xi.CANCELLED:return je.CANCELLED;case Xi.UNKNOWN:return je.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return je.INTERNAL;case Xi.UNAVAILABLE:return je.UNAVAILABLE;case Xi.UNAUTHENTICATED:return je.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case Xi.NOT_FOUND:return je.NOT_FOUND;case Xi.ALREADY_EXISTS:return je.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return je.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case Xi.ABORTED:return je.ABORTED;case Xi.OUT_OF_RANGE:return je.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return je.UNIMPLEMENTED;case Xi.DATA_LOSS:return je.DATA_LOSS;default:return Ct()}}(Wr=Xi||(Xi={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";class nc{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),u=this.inner[i];if(void 0!==u)for(const[p,_]of u)if(this.equalsFn(p,e))return _}has(e){return void 0!==this.get(e)}set(e,i){const u=this.mapKeyFn(e),p=this.inner[u];if(void 0===p)return this.inner[u]=[[e,i]],void this.innerSize++;for(let _=0;_<p.length;_++)if(this.equalsFn(p[_][0],e))return void(p[_]=[e,i]);p.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),u=this.inner[i];if(void 0===u)return!1;for(let p=0;p<u.length;p++)if(this.equalsFn(u[p][0],e))return 1===u.length?delete this.inner[i]:u.splice(p,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(i,u)=>{for(const[p,_]of u)e(p,_)})}isEmpty(){return Pl(this.inner)}size(){return this.innerSize}}const $m=new Ji(Ht.comparator);function Ca(){return $m}const Pf=new Ji(Ht.comparator);function Vc(...l){let e=Pf;for(const i of l)e=e.insert(i.key,i);return e}function zm(l){let e=Pf;return l.forEach((i,u)=>e=e.insert(i,u.overlayedDocument)),e}function kl(){return Rd()}function Lp(){return Rd()}function Rd(){return new nc(l=>l.toString(),(l,e)=>l.isEqual(e))}const xf=new Ji(Ht.comparator),cb=new ci(Ht.comparator);function hr(...l){let e=cb;for(const i of l)e=e.add(i);return e}const db=new ci(Mn);function Up(){return db}class Bp{constructor(e,i,u,p,_){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=u,this.documentUpdates=p,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,i,u){const p=new Map;return p.set(e,fs.createSynthesizedTargetChangeForCurrentChange(e,i,u)),new Bp(fn.min(),p,Up(),Ca(),hr())}}class fs{constructor(e,i,u,p,_){this.resumeToken=e,this.current=i,this.addedDocuments=u,this.modifiedDocuments=p,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,i,u){return new fs(u,i,hr(),hr(),hr())}}class Ch{constructor(e,i,u,p){this.Et=e,this.removedTargetIds=i,this.key=u,this.At=p}}class Gc{constructor(e,i){this.targetId=e,this.Rt=i}}class jc{constructor(e,i,u=E.EMPTY_BYTE_STRING,p=null){this.state=e,this.targetIds=i,this.resumeToken=u,this.cause=p}}class Ii{constructor(){this.Pt=0,this.vt=av(),this.bt=E.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=hr(),i=hr(),u=hr();return this.vt.forEach((p,_)=>{switch(_){case 0:e=e.add(p);break;case 2:i=i.add(p);break;case 1:u=u.add(p);break;default:Ct()}}),new fs(this.bt,this.Vt,e,i,u)}kt(){this.St=!1,this.vt=av()}$t(e,i){this.St=!0,this.vt=this.vt.insert(e,i)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class es{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Ca(),this.Kt=Hc(),this.Gt=new ci(Mn)}Qt(e){for(const i of e.Et)e.At&&e.At.isFoundDocument()?this.jt(i,e.At):this.zt(i,e.key,e.At);for(const i of e.removedTargetIds)this.zt(i,e.key,e.At)}Wt(e){this.forEachTarget(e,i=>{const u=this.Ht(i);switch(e.state){case 0:this.Jt(i)&&u.xt(e.resumeToken);break;case 1:u.Ft(),u.Dt||u.kt(),u.xt(e.resumeToken);break;case 2:u.Ft(),u.Dt||this.removeTarget(i);break;case 3:this.Jt(i)&&(u.Bt(),u.xt(e.resumeToken));break;case 4:this.Jt(i)&&(this.Yt(i),u.xt(e.resumeToken));break;default:Ct()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.qt.forEach((u,p)=>{this.Jt(p)&&i(p)})}Zt(e){const i=e.targetId,u=e.Rt.count,p=this.Xt(i);if(p){const _=p.target;if(Iu(_))if(0===u){const w=new Ht(_.path);this.zt(i,w,Rr.newNoDocument(w,fn.min()))}else xt(1===u);else this.te(i)!==u&&(this.Yt(i),this.Gt=this.Gt.add(i))}}ee(e){const i=new Map;this.qt.forEach((_,w)=>{const O=this.Xt(w);if(O){if(_.current&&Iu(O.target)){const B=new Ht(O.target.path);null!==this.Ut.get(B)||this.ne(w,B)||this.zt(w,B,Rr.newNoDocument(B,e))}_.Ct&&(i.set(w,_.Nt()),_.kt())}});let u=hr();this.Kt.forEach((_,w)=>{let O=!0;w.forEachWhile(B=>{const z=this.Xt(B);return!z||2===z.purpose||(O=!1,!1)}),O&&(u=u.add(_))}),this.Ut.forEach((_,w)=>w.setReadTime(e));const p=new Bp(e,i,this.Gt,this.Ut,u);return this.Ut=Ca(),this.Kt=Hc(),this.Gt=new ci(Mn),p}jt(e,i){if(!this.Jt(e))return;const u=this.ne(e,i.key)?2:0;this.Ht(e).$t(i.key,u),this.Ut=this.Ut.insert(i.key,i),this.Kt=this.Kt.insert(i.key,this.se(i.key).add(e))}zt(e,i,u){if(!this.Jt(e))return;const p=this.Ht(e);this.ne(e,i)?p.$t(i,1):p.Mt(i),this.Kt=this.Kt.insert(i,this.se(i).delete(e)),u&&(this.Ut=this.Ut.insert(i,u))}removeTarget(e){this.qt.delete(e)}te(e){const i=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let i=this.qt.get(e);return i||(i=new Ii,this.qt.set(e,i)),i}se(e){let i=this.Kt.get(e);return i||(i=new ci(Mn),this.Kt=this.Kt.insert(e,i)),i}Jt(e){const i=null!==this.Xt(e);return i||ot("WatchChangeAggregator","Detected inactive target",e),i}Xt(e){const i=this.qt.get(e);return i&&i.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Ii),this.Lt.getRemoteKeysForTarget(e).forEach(i=>{this.zt(e,i,null)})}ne(e,i){return this.Lt.getRemoteKeysForTarget(e).has(i)}}function Hc(){return new Ji(Ht.comparator)}function av(){return new Ji(Ht.comparator)}const Th={asc:"ASCENDING",desc:"DESCENDING"},Wm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lv={and:"AND",or:"OR"};class uv{constructor(e,i){this.databaseId=e,this.yt=i}}function Qa(l,e){return l.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vp(l,e){return l.yt?e.toBase64():e.toUint8Array()}function Km(l,e){return Qa(l,e.toTimestamp())}function ps(l){return xt(!!l),fn.fromTimestamp(function(e){const i=V(e);return new ir(i.seconds,i.nanos)}(l))}function kf(l,e){return(i=l,new Wn(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function qm(l){const e=Wn.fromString(l);return xt(zp(e)),e}function Ff(l,e){return kf(l.databaseId,e.path)}function Ja(l,e){const i=qm(e);if(i.get(1)!==l.databaseId.projectId)throw new _t(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+l.databaseId.projectId);if(i.get(3)!==l.databaseId.database)throw new _t(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+l.databaseId.database);return new Ht(Su(i))}function Ys(l,e){return kf(l.databaseId,e)}function cv(l){const e=qm(l);return 4===e.length?Wn.emptyPath():Su(e)}function Lf(l){return new Wn(["projects",l.databaseId.projectId,"databases",l.databaseId.database]).canonicalString()}function Su(l){return xt(l.length>4&&"documents"===l.get(4)),l.popFirst(5)}function tu(l,e,i){return{name:Ff(l,e),fields:i.value.mapValue.fields}}function dv(l,e,i){const u=Ja(l,e.name),p=ps(e.updateTime),_=e.createTime?ps(e.createTime):fn.min(),w=new hs({mapValue:{fields:e.fields}}),O=Rr.newFoundDocument(u,p,_,w);return i&&O.setHasCommittedMutations(),i?O.setHasCommittedMutations():O}function Uf(l,e){let i;if(e instanceof Rf)i={update:tu(l,e.key,e.value)};else if(e instanceof Md)i={delete:Ff(l,e.key)};else if(e instanceof Tu)i={update:tu(l,e.key,e.data),updateMask:$p(e.fieldMask)};else{if(!(e instanceof Gm))return Ct();i={verify:Ff(l,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(u=>function(p,_){const w=_.transform;if(w instanceof Go)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Za)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof ha)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Cu)return{fieldPath:_.field.canonicalString(),increment:w.It};throw Ct()}(0,u))),e.precondition.isNone||(i.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:Km(l,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Ct()),i;var p}function Ym(l,e){const i=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?Mi.updateTime(ps(p.updateTime)):void 0!==p.exists?Mi.exists(p.exists):Mi.none():Mi.none(),u=e.updateTransforms?e.updateTransforms.map(p=>function(_,w){let O=null;"setToServerValue"in w?(xt("REQUEST_TIME"===w.setToServerValue),O=new Go):"appendMissingElements"in w?O=new Za(w.appendMissingElements.values||[]):"removeAllFromArray"in w?O=new ha(w.removeAllFromArray.values||[]):"increment"in w?O=new Cu(_,w.increment):Ct();const B=dr.fromServerFormat(w.fieldPath);return new Lc(B,O)}(l,p)):[];var p;if(e.update){const p=Ja(l,e.update.name),_=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Vo((e.updateMask.fieldPaths||[]).map(z=>dr.fromServerFormat(z)));return new Tu(p,_,w,i,u)}return new Rf(p,_,i,u)}if(e.delete){const p=Ja(l,e.delete);return new Md(p,i)}if(e.verify){const p=Ja(l,e.verify);return new Gm(p,i)}return Ct()}function Zm(l,e){return{documents:[Ys(l,e.path)]}}function Gp(l,e){const i={structuredQuery:{}},u=e.path;null!==e.collectionGroup?(i.parent=Ys(l,u),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=Ys(l,u.popLast()),i.structuredQuery.from=[{collectionId:u.lastSegment()}]);const p=function(B){if(0!==B.length)return Hp(Mr.create(B,"and"))}(e.filters);p&&(i.structuredQuery.where=p);const _=function(B){if(0!==B.length)return B.map(z=>{return{field:Au((ne=z).field),direction:Jm(ne.dir)};var ne})}(e.orderBy);_&&(i.structuredQuery.orderBy=_);const w=(z=e.limit,l.yt||Oi(z)?z:{value:z});var z,O,B;return null!==w&&(i.structuredQuery.limit=w),e.startAt&&(i.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(i.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),i}function jp(l){let e=cv(l.parent);const i=l.structuredQuery,u=i.from?i.from.length:0;let p=null;if(u>0){xt(1===u);const ne=i.from[0];ne.allDescendants?p=ne.collectionId:e=e.child(ne.collectionId)}let _=[];i.where&&(_=function(ne){const we=Qm(ne);return we instanceof Mr&&xc(we)?we.getFilters():[we]}(i.where));let w=[];i.orderBy&&(w=i.orderBy.map(ne=>{return new Ed(Xa((we=ne).field),function(Be){switch(Be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(we.direction));var we}));let O=null;i.limit&&(O=function(ne){let we;return we="object"==typeof ne?ne.value:ne,Oi(we)?null:we}(i.limit));let B=null;var ne;i.startAt&&(B=new wn((ne=i.startAt).values||[],!!ne.before));let z=null;return i.endAt&&(z=function(ne){return new wn(ne.values||[],!ne.before)}(i.endAt)),kp(e,p,w,_,O,"F",B,z)}function Qm(l){return void 0!==l.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Xa(e.unaryFilter.field);return ar.create(i,"==",{doubleValue:NaN});case"IS_NULL":const u=Xa(e.unaryFilter.field);return ar.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=Xa(e.unaryFilter.field);return ar.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=Xa(e.unaryFilter.field);return ar.create(_,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(l):void 0!==l.fieldFilter?ar.create(Xa((e=l).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==l.compositeFilter?function(e){return Mr.create(e.compositeFilter.filters.map(i=>Qm(i)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ct()}}(e.compositeFilter.op))}(l):Ct();var e}function Jm(l){return Th[l]}function rc(l){return Wm[l]}function Bf(l){return lv[l]}function Au(l){return{fieldPath:l.canonicalString()}}function Xa(l){return dr.fromServerFormat(l.fieldPath)}function Hp(l){return l instanceof ar?function(e){if("=="===e.op){if(ge(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NAN"}};if(Z(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ge(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NOT_NAN"}};if(Z(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(e.field),op:rc(e.op),value:e.value}}}(l):l instanceof Mr?function(e){const i=e.getFilters().map(u=>Hp(u));return 1===i.length?i[0]:{compositeFilter:{op:Bf(e.op),filters:i}}}(l):Ct()}function $p(l){const e=[];return l.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function zp(l){return l.length>=4&&"projects"===l.get(0)&&"databases"===l.get(2)}function el(l){let e="";for(let i=0;i<l.length;i++)e.length>0&&(e=Wp(e)),e=Xm(l.get(i),e);return Wp(e)}function Xm(l,e){let i=e;const u=l.length;for(let p=0;p<u;p++){const _=l.charAt(p);switch(_){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=_}}return i}function Wp(l){return l+"\x01\x01"}function ic(l){const e=l.length;if(xt(e>=2),2===e)return xt("\x01"===l.charAt(0)&&"\x01"===l.charAt(1)),Wn.emptyPath();const i=e-2,u=[];let p="";for(let _=0;_<e;){const w=l.indexOf("\x01",_);switch((w<0||w>i)&&Ct(),l.charAt(w+1)){case"\x01":const O=l.substring(_,w);let B;0===p.length?B=O:(p+=O,B=p,p=""),u.push(B);break;case"\x10":p+=l.substring(_,w),p+="\0";break;case"\x11":p+=l.substring(_,w+1);break;default:Ct()}_=w+2}return new Wn(u)}const hb=["userId","batchId"];function Vf(l,e){return[l,el(e)]}function $c(l,e,i){return[l,el(e),i]}const pv={},uE=["prefixPath","collectionGroup","readTime","documentId"],cE=["prefixPath","collectionGroup","documentId"],e_=["collectionGroup","readTime","prefixPath","documentId"],gs=["canonicalId","targetId"],Sh=["targetId","path"],Kp=["path","targetId"],fb=["collectionId","parent"],Zs=["indexId","uid"],qp=["uid","sequenceNumber"],t_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n_=["indexId","uid","orderedDocumentKey"],gv=["userId","collectionPath","documentId"],pb=["userId","collectionPath","largestBatchId"],gb=["userId","collectionGroup","largestBatchId"],mv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mb=[...mv,"documentOverlays"],r_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_v=r_,i_=[..._v,"indexConfiguration","indexState","indexEntries"];class Pd extends za{constructor(e,i){super(),this.re=e,this.currentSequenceNumber=i}}function ts(l,e){const i=kt(l);return ao.M(i.re,e)}class Yp{constructor(e,i,u,p){this.batchId=e,this.localWriteTime=i,this.baseMutations=u,this.mutations=p}applyToRemoteDocument(e,i){const u=i.mutationResults;for(let p=0;p<this.mutations.length;p++){const _=this.mutations[p];_.key.isEqual(e.key)&&Lm(_,e,u[p])}}applyToLocalView(e,i){for(const u of this.baseMutations)u.key.isEqual(e.key)&&(i=Ih(u,e,i,this.localWriteTime));for(const u of this.mutations)u.key.isEqual(e.key)&&(i=Ih(u,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const u=Lp();return this.mutations.forEach(p=>{const _=e.get(p.key),w=_.overlayedDocument;let O=this.applyToLocalView(w,_.mutatedFields);O=i.has(p.key)?null:O;const B=Fm(w,O);null!==B&&u.set(p.key,B),w.isValidDocument()||w.convertToNoDocument(fn.min())}),u}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),hr())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(i,u)=>ov(i,u))&&Ea(this.baseMutations,e.baseMutations,(i,u)=>ov(i,u))}}class Zp{constructor(e,i,u,p){this.batch=e,this.commitVersion=i,this.mutationResults=u,this.docVersions=p}static from(e,i,u){xt(e.mutations.length===u.length);let p=xf;const _=e.mutations;for(let w=0;w<_.length;w++)p=p.insert(_[w].key,u[w].version);return new Zp(e,i,u,p)}}class Ou{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xd{constructor(e,i,u,p,_=fn.min(),w=fn.min(),O=E.EMPTY_BYTE_STRING){this.target=e,this.targetId=i,this.purpose=u,this.sequenceNumber=p,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=O}withSequenceNumber(e){return new xd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,i){return new xd(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Qp{constructor(e){this.oe=e}}function s_(l,e){const i=e.key,u={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Ah(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())u.document={name:Ff(p=l.oe,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:Qa(p,_.version.toTimestamp()),createTime:Qa(p,_.createTime.toTimestamp())};else if(e.isNoDocument())u.noDocument={path:i.path.toArray(),readTime:Oh(e.version)};else{if(!e.isUnknownDocument())return Ct();u.unknownDocument={path:i.path.toArray(),version:Oh(e.version)}}var p,_;return u}function Ah(l){const e=l.toTimestamp();return[e.seconds,e.nanoseconds]}function Oh(l){const e=l.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lr(l){const e=new ir(l.seconds,l.nanoseconds);return fn.fromTimestamp(e)}function Fd(l,e){const i=(e.baseMutations||[]).map(_=>Ym(l.oe,_));for(let _=0;_<e.mutations.length-1;++_)_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(e.mutations[_].updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_);const u=e.mutations.map(_=>Ym(l.oe,_)),p=ir.fromMillis(e.localWriteTimeMs);return new Yp(e.batchId,p,i,u)}function sc(l){const e=lr(l.readTime),i=void 0!==l.lastLimboFreeSnapshotVersion?lr(l.lastLimboFreeSnapshotVersion):fn.min();let u;var p;return void 0!==l.query.documents?(xt(1===(p=l.query).documents.length),u=Ps(tc(cv(p.documents[0])))):u=Ps(jp(l.query)),new xd(u,l.targetId,0,l.lastListenSequenceNumber,e,i,E.fromBase64String(l.resumeToken))}function o_(l,e){const i=Oh(e.snapshotVersion),u=Oh(e.lastLimboFreeSnapshotVersion);let p;p=Iu(e.target)?Zm(l.oe,e.target):Gp(l.oe,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eu(e.target),readTime:i,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:u,query:p}}function Nh(l){const e=jp({parent:l.parent,structuredQuery:l.structuredQuery});return"LAST"===l.limitType?Ad(e,e.limit,"L"):e}function oc(l,e){return new Ou(e.largestBatchId,Ym(l.oe,e.overlayMutation))}function a_(l,e){const i=e.path.lastSegment();return[l,el(e.path.popLast()),i]}function Mh(l,e,i,u){return{indexId:l,uid:e.uid||"",sequenceNumber:i,readTime:Oh(u.readTime),documentKey:el(u.documentKey.path),largestBatchId:u.largestBatchId}}class Ld{getBundleMetadata(e,i){return Gf(e).get(i).next(u=>{if(u)return{id:(p=u).bundleId,createTime:lr(p.createTime),version:p.version};var p})}saveBundleMetadata(e,i){return Gf(e).put({bundleId:(u=i).id,createTime:Oh(ps(u.createTime)),version:u.version});var u}getNamedQuery(e,i){return jf(e).get(i).next(u=>{if(u)return{name:(p=u).name,query:Nh(p.bundledQuery),readTime:lr(p.readTime)};var p})}saveNamedQuery(e,i){return jf(e).put({name:(u=i).name,readTime:Oh(ps(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Gf(l){return ts(l,"bundles")}function jf(l){return ts(l,"namedQueries")}class Ud{constructor(e,i){this.Tt=e,this.userId=i}static ue(e,i){return new Ud(e,i.uid||"")}getOverlay(e,i){return nu(e).get(a_(this.userId,i)).next(u=>u?oc(this.Tt,u):null)}getOverlays(e,i){const u=kl();return qe.forEach(i,p=>this.getOverlay(e,p).next(_=>{null!==_&&u.set(p,_)})).next(()=>u)}saveOverlays(e,i,u){const p=[];return u.forEach((_,w)=>{const O=new Ou(i,w);p.push(this.ce(e,O))}),qe.waitFor(p)}removeOverlaysForBatchId(e,i,u){const p=new Set;i.forEach(w=>p.add(el(w.getCollectionPath())));const _=[];return p.forEach(w=>{const O=IDBKeyRange.bound([this.userId,w,u],[this.userId,w,u+1],!1,!0);_.push(nu(e).Y("collectionPathOverlayIndex",O))}),qe.waitFor(_)}getOverlaysForCollection(e,i,u){const p=kl(),_=el(i),w=IDBKeyRange.bound([this.userId,_,u],[this.userId,_,Number.POSITIVE_INFINITY],!0);return nu(e).W("collectionPathOverlayIndex",w).next(O=>{for(const B of O){const z=oc(this.Tt,B);p.set(z.getKey(),z)}return p})}getOverlaysForCollectionGroup(e,i,u,p){const _=kl();let w;const O=IDBKeyRange.bound([this.userId,i,u],[this.userId,i,Number.POSITIVE_INFINITY],!0);return nu(e).X({index:"collectionGroupOverlayIndex",range:O},(B,z,ne)=>{const we=oc(this.Tt,z);_.size()<p||we.largestBatchId===w?(_.set(we.getKey(),we),w=we.largestBatchId):ne.done()}).next(()=>_)}ce(e,i){return nu(e).put(function(u,p,_){const[w,O,B]=a_(p,_.mutation.key);return{userId:p,collectionPath:O,documentId:B,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Uf(u.oe,_.mutation)}}(this.Tt,this.userId,i))}}function nu(l){return ts(l,"documentOverlays")}class ac{constructor(){}ae(e,i){this.he(e,i),i.le()}he(e,i){if("nullValue"in e)this.fe(i,5);else if("booleanValue"in e)this.fe(i,10),i.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(i,15),i.de(K(e.integerValue));else if("doubleValue"in e){const u=K(e.doubleValue);isNaN(u)?this.fe(i,13):(this.fe(i,15),co(u)?i.de(0):i.de(u))}else if("timestampValue"in e){const u=e.timestampValue;this.fe(i,20),"string"==typeof u?i._e(u):(i._e(`${u.seconds||""}`),i.de(u.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,i),this.me(i);else if("bytesValue"in e)this.fe(i,30),i.ge(ee(e.bytesValue)),this.me(i);else if("referenceValue"in e)this.ye(e.referenceValue,i);else if("geoPointValue"in e){const u=e.geoPointValue;this.fe(i,45),i.de(u.latitude||0),i.de(u.longitude||0)}else"mapValue"in e?At(e)?this.fe(i,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,i),this.me(i)):"arrayValue"in e?(this.Ie(e.arrayValue,i),this.me(i)):Ct()}we(e,i){this.fe(i,25),this.Te(e,i)}Te(e,i){i._e(e)}pe(e,i){const u=e.fields||{};this.fe(i,55);for(const p of Object.keys(u))this.we(p,i),this.he(u[p],i)}Ie(e,i){const u=e.values||[];this.fe(i,50);for(const p of u)this.he(p,i)}ye(e,i){this.fe(i,37),Ht.fromName(e).path.forEach(u=>{this.fe(i,60),this.Te(u,i)})}fe(e,i){e.de(i)}me(e){e.de(2)}}function Jp(l){if(0===l)return 8;let e=0;return!(l>>4)&&(e+=4,l<<=4),!(l>>6)&&(e+=2,l<<=2),!(l>>7)&&(e+=1),e}function l_(l){const e=64-function(i){let u=0;for(let p=0;p<8;++p){const _=Jp(255&i[p]);if(u+=_,8!==_)break}return u}(l);return Math.ceil(e/8)}ac.Ee=new ac;class yv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const i=e[Symbol.iterator]();let u=i.next();for(;!u.done;)this.Re(u.value),u=i.next();this.Pe()}ve(e){const i=e[Symbol.iterator]();let u=i.next();for(;!u.done;)this.be(u.value),u=i.next();this.Ve()}Se(e){for(const i of e){const u=i.charCodeAt(0);if(u<128)this.Re(u);else if(u<2048)this.Re(960|u>>>6),this.Re(128|63&u);else if(i<"\ud800"||"\udbff"<i)this.Re(480|u>>>12),this.Re(128|63&u>>>6),this.Re(128|63&u);else{const p=i.codePointAt(0);this.Re(240|p>>>18),this.Re(128|63&p>>>12),this.Re(128|63&p>>>6),this.Re(128|63&p)}}this.Pe()}De(e){for(const i of e){const u=i.charCodeAt(0);if(u<128)this.be(u);else if(u<2048)this.be(960|u>>>6),this.be(128|63&u);else if(i<"\ud800"||"\udbff"<i)this.be(480|u>>>12),this.be(128|63&u>>>6),this.be(128|63&u);else{const p=i.codePointAt(0);this.be(240|p>>>18),this.be(128|63&p>>>12),this.be(128|63&p>>>6),this.be(128|63&p)}}this.Ve()}Ce(e){const i=this.xe(e),u=l_(i);this.Ne(1+u),this.buffer[this.position++]=255&u;for(let p=i.length-u;p<i.length;++p)this.buffer[this.position++]=255&i[p]}ke(e){const i=this.xe(e),u=l_(i);this.Ne(1+u),this.buffer[this.position++]=~(255&u);for(let p=i.length-u;p<i.length;++p)this.buffer[this.position++]=~(255&i[p])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const i=function(p){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,p,!1),new Uint8Array(_.buffer)}(e),u=0!=(128&i[0]);i[0]^=u?255:128;for(let p=1;p<i.length;++p)i[p]^=u?255:0;return i}Re(e){const i=255&e;0===i?(this.Me(0),this.Me(255)):255===i?(this.Me(255),this.Me(0)):this.Me(i)}be(e){const i=255&e;0===i?(this.Fe(0),this.Fe(255)):255===i?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const i=e+this.position;if(i<=this.buffer.length)return;let u=2*this.buffer.length;u<i&&(u=i);const p=new Uint8Array(u);p.set(this.buffer),this.buffer=p}}class vv{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class Rh{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Hf{constructor(){this.Le=new yv,this.qe=new vv(this.Le),this.Ue=new Rh(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Bd{constructor(e,i,u,p){this.indexId=e,this.documentKey=i,this.arrayValue=u,this.directionalValue=p}Ge(){const e=this.directionalValue.length,i=0===e||255===this.directionalValue[e-1]?e+1:e,u=new Uint8Array(i);return u.set(this.directionalValue,0),i!==e?u.set([0],this.directionalValue.length):++u[u.length-1],new Bd(this.indexId,this.documentKey,this.arrayValue,u)}}function zc(l,e){let i=l.indexId-e.indexId;return 0!==i?i:(i=Xp(l.arrayValue,e.arrayValue),0!==i?i:(i=Xp(l.directionalValue,e.directionalValue),0!==i?i:Ht.comparator(l.documentKey,e.documentKey)))}function Xp(l,e){for(let i=0;i<l.length&&i<e.length;++i){const u=l[i]-e[i];if(0!==u)return u}return l.length-e.length}class _b{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const i of e.filters){const u=i;u.isInequality()?this.ze=u:this.je.push(u)}}We(e){xt(e.collectionGroup===this.collectionId);const i=so(e);if(void 0!==i&&!this.He(i))return!1;const u=Ti(e);let p=0,_=0;for(;p<u.length&&this.He(u[p]);++p);if(p===u.length)return!0;if(void 0!==this.ze){const w=u[p];if(!this.Je(this.ze,w)||!this.Ye(this.Qe[_++],w))return!1;++p}for(;p<u.length;++p)if(_>=this.Qe.length||!this.Ye(this.Qe[_++],u[p]))return!1;return!0}He(e){for(const i of this.je)if(this.Je(i,e))return!0;return!1}Je(e,i){return!(void 0===e||!e.field.isEqual(i.fieldPath))&&2===i.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,i){return!!e.field.isEqual(i.fieldPath)&&(0===i.kind&&"asc"===e.dir||1===i.kind&&"desc"===e.dir)}}function u_(l){var e,i;if(xt(l instanceof ar||l instanceof Mr),l instanceof ar){if(l instanceof xm){const p=(null===(i=null===(e=l.value.arrayValue)||void 0===e?void 0:e.values)||void 0===i?void 0:i.map(_=>ar.create(l.field,"==",_)))||[];return Mr.create(p,"or")}return l}const u=l.filters.map(p=>u_(p));return Mr.create(u,l.op)}function yb(l){if(0===l.getFilters().length)return[];const e=Wc(u_(l));return xt(d_(e)),eg(e)||c_(e)?[e]:e.getFilters()}function eg(l){return l instanceof ar}function c_(l){return l instanceof Mr&&xc(l)}function d_(l){return eg(l)||c_(l)||function(e){if(e instanceof Mr&&da(e)){for(const i of e.getFilters())if(!eg(i)&&!c_(i))return!1;return!0}return!1}(l)}function Wc(l){if(xt(l instanceof ar||l instanceof Mr),l instanceof ar)return l;if(1===l.filters.length)return Wc(l.filters[0]);const e=l.filters.map(u=>Wc(u));let i=Mr.create(e,l.op);return i=qc(i),d_(i)?i:(xt(i instanceof Mr),xt(Rs(i)),xt(i.filters.length>1),i.filters.reduce((u,p)=>tg(u,p)))}function tg(l,e){let i;return xt(l instanceof ar||l instanceof Mr),xt(e instanceof ar||e instanceof Mr),i=l instanceof ar?e instanceof ar?Mr.create([l,e],"and"):Kc(l,e):e instanceof ar?Kc(e,l):function(u,p){if(xt(u.filters.length>0&&p.filters.length>0),Rs(u)&&Rs(p))return Df(u,p.getFilters());const _=da(u)?u:p,w=da(u)?p:u,O=_.filters.map(B=>tg(B,w));return Mr.create(O,"or")}(l,e),qc(i)}function Kc(l,e){if(Rs(e))return Df(e,l.getFilters());{const i=e.filters.map(u=>tg(l,u));return Mr.create(i,"or")}}function qc(l){if(xt(l instanceof ar||l instanceof Mr),l instanceof ar)return l;const e=l.getFilters();if(1===e.length)return qc(e[0]);if(bd(l))return l;const i=e.map(p=>qc(p)),u=[];return i.forEach(p=>{p instanceof ar?u.push(p):p instanceof Mr&&(p.op===l.op?u.push(...p.filters):u.push(p))}),1===u.length?u[0]:Mr.create(u,l.op)}class bv{constructor(){this.Ze=new ng}addToCollectionParentIndex(e,i){return this.Ze.add(i),qe.resolve()}getCollectionParents(e,i){return qe.resolve(this.Ze.getEntries(i))}addFieldIndex(e,i){return qe.resolve()}deleteFieldIndex(e,i){return qe.resolve()}getDocumentsMatchingTarget(e,i){return qe.resolve(null)}getIndexType(e,i){return qe.resolve(0)}getFieldIndexes(e,i){return qe.resolve([])}getNextCollectionGroupToUpdate(e){return qe.resolve(null)}getMinOffset(e,i){return qe.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,i){return qe.resolve(Br.min())}updateCollectionGroup(e,i,u){return qe.resolve()}updateIndexEntries(e,i){return qe.resolve()}}class ng{constructor(){this.index={}}add(e){const i=e.lastSegment(),u=e.popLast(),p=this.index[i]||new ci(Wn.comparator),_=!p.has(u);return this.index[i]=p.add(u),_}has(e){const i=e.lastSegment(),u=e.popLast(),p=this.index[i];return p&&p.has(u)}getEntries(e){return(this.index[e]||new ci(Wn.comparator)).toArray()}}const rg=new Uint8Array(0);class dE{constructor(e,i){this.user=e,this.databaseId=i,this.Xe=new ng,this.tn=new nc(u=>eu(u),(u,p)=>kc(u,p)),this.uid=e.uid||""}addToCollectionParentIndex(e,i){if(!this.Xe.has(i)){const u=i.lastSegment(),p=i.popLast();e.addOnCommittedListener(()=>{this.Xe.add(i)});const _={collectionId:u,parent:el(p)};return vb(e).put(_)}return qe.resolve()}getCollectionParents(e,i){const u=[],p=IDBKeyRange.bound([i,""],[vu(i),""],!1,!0);return vb(e).W(p).next(_=>{for(const w of _){if(w.collectionId!==i)break;u.push(ic(w.parent))}return u})}addFieldIndex(e,i){const u=ig(e),p={indexId:(w=i).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var w;delete p.indexId;const _=u.add(p);if(i.indexState){const w=Ph(e);return _.next(O=>{w.put(Mh(O,this.user,i.indexState.sequenceNumber,i.indexState.offset))})}return _.next()}deleteFieldIndex(e,i){const u=ig(e),p=Ph(e),_=$f(e);return u.delete(i.indexId).next(()=>p.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,i){const u=$f(e);let p=!0;const _=new Map;return qe.forEach(this.en(i),w=>this.nn(e,w).next(O=>{p&&(p=!!O),_.set(w,O)})).next(()=>{if(p){let w=hr();const O=[];return qe.forEach(_,(B,z)=>{var ne;ot("IndexedDbIndexManager",`Using index ${ne=B,`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map(fr=>`${fr.fieldPath}:${fr.kind}`).join(",")}`} to execute ${eu(i)}`);const we=function(fr,os){const wr=so(os);if(void 0===wr)return null;for(const Gr of bh(fr,wr.fieldPath))switch(Gr.op){case"array-contains-any":return Gr.value.arrayValue.values||[];case"array-contains":return[Gr.value]}return null}(z,B),Be=function(fr,os){const wr=new Map;for(const Gr of Ti(os))for(const Js of bh(fr,Gr.fieldPath))switch(Js.op){case"==":case"in":wr.set(Gr.fieldPath.canonicalString(),Js.value);break;case"not-in":case"!=":return wr.set(Gr.fieldPath.canonicalString(),Js.value),Array.from(wr.values())}return null}(z,B),pt=function(fr,os){const wr=[];let Gr=!0;for(const Js of Ti(os)){const Sr=0===Js.kind?Nf(fr,Js.fieldPath,fr.startAt):xp(fr,Js.fieldPath,fr.startAt);wr.push(Sr.value),Gr&&(Gr=Sr.inclusive)}return new wn(wr,Gr)}(z,B),Ot=function(fr,os){const wr=[];let Gr=!0;for(const Js of Ti(os)){const Sr=0===Js.kind?xp(fr,Js.fieldPath,fr.endAt):Nf(fr,Js.fieldPath,fr.endAt);wr.push(Sr.value),Gr&&(Gr=Sr.inclusive)}return new wn(wr,Gr)}(z,B),Qt=this.sn(B,z,pt),gn=this.sn(B,z,Ot),di=this.rn(B,z,Be),ss=this.on(B.indexId,we,Qt,pt.inclusive,gn,Ot.inclusive,di);return qe.forEach(ss,fr=>u.J(fr,i.limit).next(os=>{os.forEach(wr=>{const Gr=Ht.fromSegments(wr.documentKey);w.has(Gr)||(w=w.add(Gr),O.push(Gr))})}))}).next(()=>O)}return qe.resolve(null)})}en(e){let i=this.tn.get(e);return i||(i=0===e.filters.length?[e]:yb(Mr.create(e.filters,"and")).map(u=>Of(e.path,e.collectionGroup,e.orderBy,u.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,i),i)}on(e,i,u,p,_,w,O){const B=(null!=i?i.length:1)*Math.max(u.length,_.length),z=B/(null!=i?i.length:1),ne=[];for(let we=0;we<B;++we){const Be=i?this.un(i[we/z]):rg,pt=this.cn(e,Be,u[we%z],p),Ot=this.an(e,Be,_[we%z],w),Qt=O.map(gn=>this.cn(e,Be,gn,!0));ne.push(...this.createRange(pt,Ot,Qt))}return ne}cn(e,i,u,p){const _=new Bd(e,Ht.empty(),i,u);return p?_:_.Ge()}an(e,i,u,p){const _=new Bd(e,Ht.empty(),i,u);return p?_.Ge():_}nn(e,i){const u=new _b(i),p=null!=i.collectionGroup?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(e,p).next(_=>{let w=null;for(const O of _)u.We(O)&&(!w||O.fields.length>w.fields.length)&&(w=O);return w})}getIndexType(e,i){let u=2;const p=this.en(i);return qe.forEach(p,_=>this.nn(e,_).next(w=>{w?0!==u&&w.fields.length<function(O){let B=new ci(dr.comparator),z=!1;for(const ne of O.filters)for(const we of ne.getFlattenedFilters())we.field.isKeyField()||("array-contains"===we.op||"array-contains-any"===we.op?z=!0:B=B.add(we.field));for(const ne of O.orderBy)ne.field.isKeyField()||(B=B.add(ne.field));return B.size+(z?1:0)}(_)&&(u=1):u=0})).next(()=>null!==i.limit&&p.length>1&&2===u?1:u)}hn(e,i){const u=new Hf;for(const p of Ti(e)){const _=i.data.field(p.fieldPath);if(null==_)return null;const w=u.Ke(p.kind);ac.Ee.ae(_,w)}return u.Be()}un(e){const i=new Hf;return ac.Ee.ae(e,i.Ke(0)),i.Be()}ln(e,i){const u=new Hf;return ac.Ee.ae(Uo(this.databaseId,i),u.Ke(function(p){const _=Ti(p);return 0===_.length?0:_[_.length-1].kind}(e))),u.Be()}rn(e,i,u){if(null===u)return[];let p=[];p.push(new Hf);let _=0;for(const w of Ti(e)){const O=u[_++];for(const B of p)if(this.fn(i,w.fieldPath)&&G(O))p=this.dn(p,w,O);else{const z=B.Ke(w.kind);ac.Ee.ae(O,z)}}return this._n(p)}sn(e,i,u){return this.rn(e,i,u.position)}_n(e){const i=[];for(let u=0;u<e.length;++u)i[u]=e[u].Be();return i}dn(e,i,u){const p=[...e],_=[];for(const w of u.arrayValue.values||[])for(const O of p){const B=new Hf;B.seed(O.Be()),ac.Ee.ae(w,B.Ke(i.kind)),_.push(B)}return _}fn(e,i){return!!e.filters.find(u=>u instanceof ar&&u.field.isEqual(i)&&("in"===u.op||"not-in"===u.op))}getFieldIndexes(e,i){const u=ig(e),p=Ph(e);return(i?u.W("collectionGroupIndex",IDBKeyRange.bound(i,i)):u.W()).next(_=>{const w=[];return qe.forEach(_,O=>p.get([O.indexId,this.uid]).next(B=>{w.push(function(z,ne){const we=ne?new cs(ne.sequenceNumber,new Br(lr(ne.readTime),new Ht(ic(ne.documentKey)),ne.largestBatchId)):cs.empty(),Be=z.fields.map(([pt,Ot])=>new Ur(dr.fromServerFormat(pt),Ot));return new Lo(z.indexId,z.collectionGroup,Be,we)}(O,B))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(i=>0===i.length?null:(i.sort((u,p)=>{const _=u.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==_?_:Mn(u.collectionGroup,p.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(e,i,u){const p=ig(e),_=Ph(e);return this.wn(e).next(w=>p.W("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(O=>qe.forEach(O,B=>_.put(Mh(B.indexId,this.user,w,u)))))}updateIndexEntries(e,i){const u=new Map;return qe.forEach(i,(p,_)=>{const w=u.get(p.collectionGroup);return(w?qe.resolve(w):this.getFieldIndexes(e,p.collectionGroup)).next(O=>(u.set(p.collectionGroup,O),qe.forEach(O,B=>this.mn(e,p,B).next(z=>{const ne=this.gn(_,B);return z.isEqual(ne)?qe.resolve():this.yn(e,_,B,z,ne)}))))})}pn(e,i,u,p){return $f(e).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.ln(u,i.key),documentKey:i.key.path.toArray()})}In(e,i,u,p){return $f(e).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.ln(u,i.key),i.key.path.toArray()])}mn(e,i,u){const p=$f(e);let _=new ci(zc);return p.X({index:"documentKeyIndex",range:IDBKeyRange.only([u.indexId,this.uid,this.ln(u,i)])},(w,O)=>{_=_.add(new Bd(u.indexId,i,O.arrayValue,O.directionalValue))}).next(()=>_)}gn(e,i){let u=new ci(zc);const p=this.hn(i,e);if(null==p)return u;const _=so(i);if(null!=_){const w=e.data.field(_.fieldPath);if(G(w))for(const O of w.arrayValue.values||[])u=u.add(new Bd(i.indexId,e.key,this.un(O),p))}else u=u.add(new Bd(i.indexId,e.key,rg,p));return u}yn(e,i,u,p,_){ot("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);const w=[];return function(O,B,z,ne,we){const Be=O.getIterator(),pt=B.getIterator();let Ot=Du(Be),Qt=Du(pt);for(;Ot||Qt;){let gn=!1,di=!1;if(Ot&&Qt){const ss=z(Ot,Qt);ss<0?di=!0:ss>0&&(gn=!0)}else null!=Ot?di=!0:gn=!0;gn?(ne(Qt),Qt=Du(pt)):di?(we(Ot),Ot=Du(Be)):(Ot=Du(Be),Qt=Du(pt))}}(p,_,zc,O=>{w.push(this.pn(e,i,u,O))},O=>{w.push(this.In(e,i,u,O))}),qe.waitFor(w)}wn(e){let i=1;return Ph(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(u,p,_)=>{_.done(),i=p.sequenceNumber+1}).next(()=>i)}createRange(e,i,u){u=u.sort((w,O)=>zc(w,O)).filter((w,O,B)=>!O||0!==zc(w,B[O-1]));const p=[];p.push(e);for(const w of u){const O=zc(w,e),B=zc(w,i);if(0===O)p[0]=e.Ge();else if(O>0&&B<0)p.push(w),p.push(w.Ge());else if(B>0)break}p.push(i);const _=[];for(let w=0;w<p.length;w+=2){if(this.Tn(p[w],p[w+1]))return[];_.push(IDBKeyRange.bound([p[w].indexId,this.uid,p[w].arrayValue,p[w].directionalValue,rg,[]],[p[w+1].indexId,this.uid,p[w+1].arrayValue,p[w+1].directionalValue,rg,[]]))}return _}Tn(e,i){return zc(e,i)>0}getMinOffsetFromCollectionGroup(e,i){return this.getFieldIndexes(e,i).next(h_)}getMinOffset(e,i){return qe.mapArray(this.en(i),u=>this.nn(e,u).next(p=>p||Ct())).next(h_)}}function vb(l){return ts(l,"collectionParents")}function $f(l){return ts(l,"indexEntries")}function ig(l){return ts(l,"indexConfiguration")}function Ph(l){return ts(l,"indexState")}function h_(l){xt(0!==l.length);let e=l[0].indexState.offset,i=e.largestBatchId;for(let u=1;u<l.length;u++){const p=l[u].indexState.offset;Xl(p,e)<0&&(e=p),i<p.largestBatchId&&(i=p.largestBatchId)}return new Br(e.readTime,e.documentKey,i)}const bb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ta{constructor(e,i,u){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=u}static withCacheSize(e){return new Ta(e,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zf(l,e,i){const u=l.store("mutations"),p=l.store("documentMutations"),_=[],w=IDBKeyRange.only(i.batchId);let O=0;const B=u.X({range:w},(ne,we,Be)=>(O++,Be.delete()));_.push(B.next(()=>{xt(1===O)}));const z=[];for(const ne of i.mutations){const we=$c(e,ne.key.path,i.batchId);_.push(p.delete(we)),z.push(ne.key)}return qe.waitFor(_).next(()=>z)}function f_(l){if(!l)return 0;let e;if(l.document)e=l.document;else if(l.unknownDocument)e=l.unknownDocument;else{if(!l.noDocument)throw Ct();e=l.noDocument}return JSON.stringify(e).length}Ta.DEFAULT_COLLECTION_PERCENTILE=10,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ta.DEFAULT=new Ta(41943040,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ta.DISABLED=new Ta(-1,0,0);class p_{constructor(e,i,u,p){this.userId=e,this.Tt=i,this.indexManager=u,this.referenceDelegate=p,this.En={}}static ue(e,i,u,p){xt(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new p_(_,i,u,p)}checkEmpty(e){let i=!0;const u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vd(e).X({index:"userMutationsIndex",range:u},(p,_,w)=>{i=!1,w.done()}).next(()=>i)}addMutationBatch(e,i,u,p){const _=xh(e),w=Vd(e);return w.add({}).next(O=>{xt("number"==typeof O);const B=new Yp(O,i,u,p),z=function(Be,pt,Ot){const Qt=Ot.baseMutations.map(di=>Uf(Be.oe,di)),gn=Ot.mutations.map(di=>Uf(Be.oe,di));return{userId:pt,batchId:Ot.batchId,localWriteTimeMs:Ot.localWriteTime.toMillis(),baseMutations:Qt,mutations:gn}}(this.Tt,this.userId,B),ne=[];let we=new ci((Be,pt)=>Mn(Be.canonicalString(),pt.canonicalString()));for(const Be of p){const pt=$c(this.userId,Be.key.path,O);we=we.add(Be.key.path.popLast()),ne.push(w.put(z)),ne.push(_.put(pt,pv))}return we.forEach(Be=>{ne.push(this.indexManager.addToCollectionParentIndex(e,Be))}),e.addOnCommittedListener(()=>{this.En[O]=B.keys()}),qe.waitFor(ne).next(()=>B)})}lookupMutationBatch(e,i){return Vd(e).get(i).next(u=>u?(xt(u.userId===this.userId),Fd(this.Tt,u)):null)}An(e,i){return this.En[i]?qe.resolve(this.En[i]):this.lookupMutationBatch(e,i).next(u=>{if(u){const p=u.keys();return this.En[i]=p,p}return null})}getNextMutationBatchAfterBatchId(e,i){const u=i+1,p=IDBKeyRange.lowerBound([this.userId,u]);let _=null;return Vd(e).X({index:"userMutationsIndex",range:p},(w,O,B)=>{O.userId===this.userId&&(xt(O.batchId>=u),_=Fd(this.Tt,O)),B.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let u=-1;return Vd(e).X({index:"userMutationsIndex",range:i,reverse:!0},(p,_,w)=>{u=_.batchId,w.done()}).next(()=>u)}getAllMutationBatches(e){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vd(e).W("userMutationsIndex",i).next(u=>u.map(p=>Fd(this.Tt,p)))}getAllMutationBatchesAffectingDocumentKey(e,i){const u=Vf(this.userId,i.path),p=IDBKeyRange.lowerBound(u),_=[];return xh(e).X({range:p},(w,O,B)=>{const[z,ne,we]=w,Be=ic(ne);if(z===this.userId&&i.path.isEqual(Be))return Vd(e).get(we).next(pt=>{if(!pt)throw Ct();xt(pt.userId===this.userId),_.push(Fd(this.Tt,pt))});B.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,i){let u=new ci(Mn);const p=[];return i.forEach(_=>{const w=Vf(this.userId,_.path),O=IDBKeyRange.lowerBound(w),B=xh(e).X({range:O},(z,ne,we)=>{const[Be,pt,Ot]=z,Qt=ic(pt);Be===this.userId&&_.path.isEqual(Qt)?u=u.add(Ot):we.done()});p.push(B)}),qe.waitFor(p).next(()=>this.Rn(e,u))}getAllMutationBatchesAffectingQuery(e,i){const u=i.path,p=u.length+1,_=Vf(this.userId,u),w=IDBKeyRange.lowerBound(_);let O=new ci(Mn);return xh(e).X({range:w},(B,z,ne)=>{const[we,Be,pt]=B,Ot=ic(Be);we===this.userId&&u.isPrefixOf(Ot)?Ot.length===p&&(O=O.add(pt)):ne.done()}).next(()=>this.Rn(e,O))}Rn(e,i){const u=[],p=[];return i.forEach(_=>{p.push(Vd(e).get(_).next(w=>{if(null===w)throw Ct();xt(w.userId===this.userId),u.push(Fd(this.Tt,w))}))}),qe.waitFor(p).next(()=>u)}removeMutationBatch(e,i){return zf(e.re,this.userId,i).next(u=>(e.addOnCommittedListener(()=>{this.Pn(i.batchId)}),qe.forEach(u,p=>this.referenceDelegate.markPotentiallyOrphaned(e,p))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return qe.resolve();const u=IDBKeyRange.lowerBound([this.userId]),p=[];return xh(e).X({range:u},(_,w,O)=>{if(_[0]===this.userId){const B=ic(_[1]);p.push(B)}else O.done()}).next(()=>{xt(0===p.length)})})}containsKey(e,i){return wb(e,this.userId,i)}vn(e){return Eb(e).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wb(l,e,i){const u=Vf(e,i.path),p=u[1],_=IDBKeyRange.lowerBound(u);let w=!1;return xh(l).X({range:_,Z:!0},(O,B,z)=>{const[ne,we,Be]=O;ne===e&&we===p&&(w=!0),z.done()}).next(()=>w)}function Vd(l){return ts(l,"mutations")}function xh(l){return ts(l,"documentMutations")}function Eb(l){return ts(l,"mutationQueues")}class kh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new kh(0)}static Sn(){return new kh(-1)}}class Wf{constructor(e,i){this.referenceDelegate=e,this.Tt=i}allocateTargetId(e){return this.Dn(e).next(i=>{const u=new kh(i.highestTargetId);return i.highestTargetId=u.next(),this.Cn(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(i=>fn.fromTimestamp(new ir(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,u){return this.Dn(e).next(p=>(p.highestListenSequenceNumber=i,u&&(p.lastRemoteSnapshotVersion=u.toTimestamp()),i>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=i),this.Cn(e,p)))}addTargetData(e,i){return this.xn(e,i).next(()=>this.Dn(e).next(u=>(u.targetCount+=1,this.Nn(i,u),this.Cn(e,u))))}updateTargetData(e,i){return this.xn(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>gl(e).delete(i.targetId)).next(()=>this.Dn(e)).next(u=>(xt(u.targetCount>0),u.targetCount-=1,this.Cn(e,u)))}removeTargets(e,i,u){let p=0;const _=[];return gl(e).X((w,O)=>{const B=sc(O);B.sequenceNumber<=i&&null===u.get(B.targetId)&&(p++,_.push(this.removeTargetData(e,B)))}).next(()=>qe.waitFor(_)).next(()=>p)}forEachTarget(e,i){return gl(e).X((u,p)=>{const _=sc(p);i(_)})}Dn(e){return Db(e).get("targetGlobalKey").next(i=>(xt(null!==i),i))}Cn(e,i){return Db(e).put("targetGlobalKey",i)}xn(e,i){return gl(e).put(o_(this.Tt,i))}Nn(e,i){let u=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,u=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,u=!0),u}getTargetCount(e){return this.Dn(e).next(i=>i.targetCount)}getTargetData(e,i){const u=eu(i),p=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]);let _=null;return gl(e).X({range:p,index:"queryTargetsIndex"},(w,O,B)=>{const z=sc(O);kc(i,z.target)&&(_=z,B.done())}).next(()=>_)}addMatchingKeys(e,i,u){const p=[],_=Gd(e);return i.forEach(w=>{const O=el(w.path);p.push(_.put({targetId:u,path:O})),p.push(this.referenceDelegate.addReference(e,u,w))}),qe.waitFor(p)}removeMatchingKeys(e,i,u){const p=Gd(e);return qe.forEach(i,_=>{const w=el(_.path);return qe.waitFor([p.delete([u,w]),this.referenceDelegate.removeReference(e,u,_)])})}removeMatchingKeysForTargetId(e,i){const u=Gd(e),p=IDBKeyRange.bound([i],[i+1],!1,!0);return u.delete(p)}getMatchingKeysForTargetId(e,i){const u=IDBKeyRange.bound([i],[i+1],!1,!0),p=Gd(e);let _=hr();return p.X({range:u,Z:!0},(w,O,B)=>{const z=ic(w[1]),ne=new Ht(z);_=_.add(ne)}).next(()=>_)}containsKey(e,i){const u=el(i.path),p=IDBKeyRange.bound([u],[vu(u)],!1,!0);let _=0;return Gd(e).X({index:"documentTargetsIndex",Z:!0,range:p},([w,O],B,z)=>{0!==w&&(_++,z.done())}).next(()=>_>0)}ie(e,i){return gl(e).get(i).next(u=>u?sc(u):null)}}function gl(l){return ts(l,"targets")}function Db(l){return ts(l,"targetGlobal")}function Gd(l){return ts(l,"targetDocuments")}function wv([l,e],[i,u]){const p=Mn(l,i);return 0===p?Mn(e,u):p}class UD{constructor(e){this.kn=e,this.buffer=new ci(wv),this.$n=0}Mn(){return++this.$n}On(e){const i=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(i);else{const u=this.buffer.last();wv(i,u)<0&&(this.buffer=this.buffer.delete(u).add(i))}}get maxValue(){return this.buffer.last()[0]}}class Fl{constructor(e,i,u){this.garbageCollector=e,this.asyncQueue=i,this.localStore=u,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var i=this;ot("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){i.Fn=null;try{yield i.localStore.collectGarbage(i.garbageCollector)}catch(u){lo(u)?ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield oo(u)}yield i.Bn(3e5)}))}}class ns{constructor(e,i){this.Ln=e,this.params=i}calculateTargetCount(e,i){return this.Ln.qn(e).next(u=>Math.floor(i/100*u))}nthSequenceNumber(e,i){if(0===i)return qe.resolve(Ms.at);const u=new UD(i);return this.Ln.forEachTarget(e,p=>u.On(p.sequenceNumber)).next(()=>this.Ln.Un(e,p=>u.On(p))).next(()=>u.maxValue)}removeTargets(e,i,u){return this.Ln.removeTargets(e,i,u)}removeOrphanedDocuments(e,i){return this.Ln.removeOrphanedDocuments(e,i)}collect(e,i){return-1===this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(bb)):this.getCacheSize(e).next(u=>u<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bb):this.Kn(e,i))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,i){let u,p,_,w,O,B,z;const ne=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(we=>(we>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${we}`),p=this.params.maximumSequenceNumbersToCollect):p=we,w=Date.now(),this.nthSequenceNumber(e,p))).next(we=>(u=we,O=Date.now(),this.removeTargets(e,u,i))).next(we=>(_=we,B=Date.now(),this.removeOrphanedDocuments(e,u))).next(we=>(z=Date.now(),ln()<=Qe.in.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ne}ms\n\tDetermined least recently used ${p} in `+(O-w)+`ms\n\tRemoved ${_} targets in `+(B-O)+`ms\n\tRemoved ${we} documents in `+(z-B)+`ms\nTotal Duration: ${z-ne}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:_,documentsRemoved:we})))}}class sg{constructor(e,i){this.db=e,this.garbageCollector=new ns(this,i)}qn(e){const i=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(u=>i.next(p=>u+p))}Gn(e){let i=0;return this.Un(e,u=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}Un(e,i){return this.Qn(e,(u,p)=>i(p))}addReference(e,i,u){return Fh(e,u)}removeReference(e,i,u){return Fh(e,u)}removeTargets(e,i,u){return this.db.getTargetCache().removeTargets(e,i,u)}markPotentiallyOrphaned(e,i){return Fh(e,i)}jn(e,i){return function(u,p){let _=!1;return Eb(u).tt(w=>wb(u,w,p).next(O=>(O&&(_=!0),qe.resolve(!O)))).next(()=>_)}(e,i)}removeOrphanedDocuments(e,i){const u=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let _=0;return this.Qn(e,(w,O)=>{if(O<=i){const B=this.jn(e,w).next(z=>{if(!z)return _++,u.getEntry(e,w).next(()=>(u.removeEntry(w,fn.min()),Gd(e).delete([0,el(w.path)])))});p.push(B)}}).next(()=>qe.waitFor(p)).next(()=>u.apply(e)).next(()=>_)}removeTarget(e,i){const u=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,u)}updateLimboDocument(e,i){return Fh(e,i)}Qn(e,i){const u=Gd(e);let p,_=Ms.at;return u.X({index:"documentTargetsIndex"},([w,O],{path:B,sequenceNumber:z})=>{0===w?(_!==Ms.at&&i(new Ht(ic(p)),_),_=z,p=B):_=Ms.at}).next(()=>{_!==Ms.at&&i(new Ht(ic(p)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fh(l,e){return Gd(l).put((u=l.currentSequenceNumber,{targetId:0,path:el(e.path),sequenceNumber:u}));var u}class og{constructor(){this.changes=new nc(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const u=this.changes.get(i);return void 0!==u?qe.resolve(u):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ev{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,i,u){return iu(e).put(u)}removeEntry(e,i,u){return iu(e).delete(function(p,_){const w=p.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Ah(_),w[w.length-1]]}(i,u))}updateMetadata(e,i){return this.getMetadata(e).next(u=>(u.byteSize+=i,this.zn(e,u)))}getEntry(e,i){let u=Rr.newInvalidDocument(i);return iu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lc(i))},(p,_)=>{u=this.Wn(i,_)}).next(()=>u)}Hn(e,i){let u={size:0,document:Rr.newInvalidDocument(i)};return iu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lc(i))},(p,_)=>{u={document:this.Wn(i,_),size:f_(_)}}).next(()=>u)}getEntries(e,i){let u=Ca();return this.Jn(e,i,(p,_)=>{const w=this.Wn(p,_);u=u.insert(p,w)}).next(()=>u)}Yn(e,i){let u=Ca(),p=new Ji(Ht.comparator);return this.Jn(e,i,(_,w)=>{const O=this.Wn(_,w);u=u.insert(_,O),p=p.insert(_,f_(w))}).next(()=>({documents:u,Zn:p}))}Jn(e,i,u){if(i.isEmpty())return qe.resolve();let p=new ci(Iv);i.forEach(B=>p=p.add(B));const _=IDBKeyRange.bound(lc(p.first()),lc(p.last())),w=p.getIterator();let O=w.getNext();return iu(e).X({index:"documentKeyIndex",range:_},(B,z,ne)=>{const we=Ht.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;O&&Iv(O,we)<0;)u(O,null),O=w.getNext();O&&O.isEqual(we)&&(u(O,z),O=w.hasNext()?w.getNext():null),O?ne.j(lc(O)):ne.done()}).next(()=>{for(;O;)u(O,null),O=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,i,u,p){const _=i.path,w=[_.popLast().toArray(),_.lastSegment(),Ah(u.readTime),u.documentKey.path.isEmpty()?"":u.documentKey.path.lastSegment()],O=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return iu(e).W(IDBKeyRange.bound(w,O,!0)).next(B=>{let z=Ca();for(const ne of B){const we=this.Wn(Ht.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);we.isFoundDocument()&&(b(i,we)||p.has(we.key))&&(z=z.insert(we.key,we))}return z})}getAllFromCollectionGroup(e,i,u,p){let _=Ca();const w=m_(i,u),O=m_(i,Br.max());return iu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,O,!0)},(B,z,ne)=>{const we=this.Wn(Ht.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);_=_.insert(we.key,we),_.size===p&&ne.done()}).next(()=>_)}newChangeBuffer(e){return new g_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return ru(e).get("remoteDocumentGlobalKey").next(i=>(xt(!!i),i))}zn(e,i){return ru(e).put("remoteDocumentGlobalKey",i)}Wn(e,i){if(i){const u=function kd(l,e){let i;if(e.document)i=dv(l.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const u=Ht.fromSegments(e.noDocument.path),p=lr(e.noDocument.readTime);i=Rr.newNoDocument(u,p),e.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ct();{const u=Ht.fromSegments(e.unknownDocument.path),p=lr(e.unknownDocument.version);i=Rr.newUnknownDocument(u,p)}}return e.readTime&&i.setReadTime(function(u){const p=new ir(u[0],u[1]);return fn.fromTimestamp(p)}(e.readTime)),i}(this.Tt,i);if(!u.isNoDocument()||!u.version.isEqual(fn.min()))return u}return Rr.newInvalidDocument(e)}}function Dv(l){return new Ev(l)}class g_ extends og{constructor(e,i){super(),this.Xn=e,this.trackRemovals=i,this.ts=new nc(u=>u.toString(),(u,p)=>u.isEqual(p))}applyChanges(e){const i=[];let u=0,p=new ci((_,w)=>Mn(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const O=this.ts.get(_);if(i.push(this.Xn.removeEntry(e,_,O.readTime)),w.isValidDocument()){const B=s_(this.Xn.Tt,w);p=p.add(_.path.popLast());const z=f_(B);u+=z-O.size,i.push(this.Xn.addEntry(e,_,B))}else if(u-=O.size,this.trackRemovals){const B=s_(this.Xn.Tt,w.convertToNoDocument(fn.min()));i.push(this.Xn.addEntry(e,_,B))}}),p.forEach(_=>{i.push(this.Xn.indexManager.addToCollectionParentIndex(e,_))}),i.push(this.Xn.updateMetadata(e,u)),qe.waitFor(i)}getFromCache(e,i){return this.Xn.Hn(e,i).next(u=>(this.ts.set(i,{size:u.size,readTime:u.document.readTime}),u.document))}getAllFromCache(e,i){return this.Xn.Yn(e,i).next(({documents:u,Zn:p})=>(p.forEach((_,w)=>{this.ts.set(_,{size:w,readTime:u.get(_).readTime})}),u))}}function ru(l){return ts(l,"remoteDocumentGlobal")}function iu(l){return ts(l,"remoteDocumentsV14")}function lc(l){const e=l.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function m_(l,e){const i=e.documentKey.path.toArray();return[l,Ah(e.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function Iv(l,e){const i=l.path.toArray(),u=e.path.toArray();let p=0;for(let _=0;_<i.length-2&&_<u.length-2;++_)if(p=Mn(i[_],u[_]),p)return p;return p=Mn(i.length,u.length),p||(p=Mn(i[i.length-2],u[u.length-2]),p||Mn(i[i.length-1],u[u.length-1]))}class Ib{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class Cv{constructor(e,i,u,p){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=u,this.indexManager=p}getDocument(e,i){let u=null;return this.documentOverlayCache.getOverlay(e,i).next(p=>(u=p,this.remoteDocumentCache.getEntry(e,i))).next(p=>(null!==u&&Ih(u.mutation,p,Vo.empty(),ir.now()),p))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(u=>this.getLocalViewOfDocuments(e,u,hr()).next(()=>u))}getLocalViewOfDocuments(e,i,u=hr()){const p=kl();return this.populateOverlays(e,p,i).next(()=>this.computeViews(e,i,p,u).next(_=>{let w=Vc();return _.forEach((O,B)=>{w=w.insert(O,B.overlayedDocument)}),w}))}getOverlayedDocuments(e,i){const u=kl();return this.populateOverlays(e,u,i).next(()=>this.computeViews(e,i,u,hr()))}populateOverlays(e,i,u){const p=[];return u.forEach(_=>{i.has(_)||p.push(_)}),this.documentOverlayCache.getOverlays(e,p).next(_=>{_.forEach((w,O)=>{i.set(w,O)})})}computeViews(e,i,u,p){let _=Ca();const w=Rd(),O=Rd();return i.forEach((B,z)=>{const ne=u.get(z.key);p.has(z.key)&&(void 0===ne||ne.mutation instanceof Tu)?_=_.insert(z.key,z):void 0!==ne?(w.set(z.key,ne.mutation.getFieldMask()),Ih(ne.mutation,z,ne.mutation.getFieldMask(),ir.now())):w.set(z.key,Vo.empty())}),this.recalculateAndSaveOverlays(e,_).next(B=>(B.forEach((z,ne)=>w.set(z,ne)),i.forEach((z,ne)=>{var we;return O.set(z,new Ib(ne,null!==(we=w.get(z))&&void 0!==we?we:null))}),O))}recalculateAndSaveOverlays(e,i){const u=Rd();let p=new Ji((w,O)=>w-O),_=hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(w=>{for(const O of w)O.keys().forEach(B=>{const z=i.get(B);if(null===z)return;let ne=u.get(B)||Vo.empty();ne=O.applyToLocalView(z,ne),u.set(B,ne);const we=(p.get(O.batchId)||hr()).add(B);p=p.insert(O.batchId,we)})}).next(()=>{const w=[],O=p.getReverseIterator();for(;O.hasNext();){const B=O.getNext(),z=B.key,ne=B.value,we=Lp();ne.forEach(Be=>{if(!_.has(Be)){const pt=Fm(i.get(Be),u.get(Be));null!==pt&&we.set(Be,pt),_=_.add(Be)}}),w.push(this.documentOverlayCache.saveOverlays(e,z,we))}return qe.waitFor(w)}).next(()=>u)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(u=>this.recalculateAndSaveOverlays(e,u))}getDocumentsMatchingQuery(e,i,u){return Ht.isDocumentKey((p=i).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,i.path):Td(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,u):this.getDocumentsMatchingCollectionQuery(e,i,u);var p}getNextDocuments(e,i,u,p){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,u,p).next(_=>{const w=p-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,u.largestBatchId,p-_.size):qe.resolve(kl());let O=-1,B=_;return w.next(z=>qe.forEach(z,(ne,we)=>(O<we.largestBatchId&&(O=we.largestBatchId),_.get(ne)?qe.resolve():this.remoteDocumentCache.getEntry(e,ne).next(Be=>{B=B.insert(ne,Be)}))).next(()=>this.populateOverlays(e,z,_)).next(()=>this.computeViews(e,B,z,hr())).next(ne=>({batchId:O,changes:zm(ne)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Ht(i)).next(u=>{let p=Vc();return u.isFoundDocument()&&(p=p.insert(u.key,u)),p})}getDocumentsMatchingCollectionGroupQuery(e,i,u){const p=i.collectionGroup;let _=Vc();return this.indexManager.getCollectionParents(e,p).next(w=>qe.forEach(w,O=>{const B=(z=i,ne=O.child(p),new Ya(ne,null,z.explicitOrderBy.slice(),z.filters.slice(),z.limit,z.limitType,z.startAt,z.endAt));var z,ne;return this.getDocumentsMatchingCollectionQuery(e,B,u).next(z=>{z.forEach((ne,we)=>{_=_.insert(ne,we)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,i,u){let p;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,u.largestBatchId).next(_=>(p=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,u,p))).next(_=>{p.forEach((O,B)=>{const z=B.getKey();null===_.get(z)&&(_=_.insert(z,Rr.newInvalidDocument(z)))});let w=Vc();return _.forEach((O,B)=>{const z=p.get(O);void 0!==z&&Ih(z.mutation,B,Vo.empty(),ir.now()),b(i,B)&&(w=w.insert(O,B))}),w})}}class Tv{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,i){return qe.resolve(this.es.get(i))}saveBundleMetadata(e,i){var u;return this.es.set(i.id,{id:(u=i).id,version:u.version,createTime:ps(u.createTime)}),qe.resolve()}getNamedQuery(e,i){return qe.resolve(this.ns.get(i))}saveNamedQuery(e,i){return this.ns.set(i.name,{name:(u=i).name,query:Nh(u.bundledQuery),readTime:ps(u.readTime)}),qe.resolve();var u}}class Lh{constructor(){this.overlays=new Ji(Ht.comparator),this.ss=new Map}getOverlay(e,i){return qe.resolve(this.overlays.get(i))}getOverlays(e,i){const u=kl();return qe.forEach(i,p=>this.getOverlay(e,p).next(_=>{null!==_&&u.set(p,_)})).next(()=>u)}saveOverlays(e,i,u){return u.forEach((p,_)=>{this.ce(e,i,_)}),qe.resolve()}removeOverlaysForBatchId(e,i,u){const p=this.ss.get(u);return void 0!==p&&(p.forEach(_=>this.overlays=this.overlays.remove(_)),this.ss.delete(u)),qe.resolve()}getOverlaysForCollection(e,i,u){const p=kl(),_=i.length+1,w=new Ht(i.child("")),O=this.overlays.getIteratorFrom(w);for(;O.hasNext();){const B=O.getNext().value,z=B.getKey();if(!i.isPrefixOf(z.path))break;z.path.length===_&&B.largestBatchId>u&&p.set(B.getKey(),B)}return qe.resolve(p)}getOverlaysForCollectionGroup(e,i,u,p){let _=new Ji((z,ne)=>z-ne);const w=this.overlays.getIterator();for(;w.hasNext();){const z=w.getNext().value;if(z.getKey().getCollectionGroup()===i&&z.largestBatchId>u){let ne=_.get(z.largestBatchId);null===ne&&(ne=kl(),_=_.insert(z.largestBatchId,ne)),ne.set(z.getKey(),z)}}const O=kl(),B=_.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((z,ne)=>O.set(z,ne)),!(O.size()>=p)););return qe.resolve(O)}ce(e,i,u){const p=this.overlays.get(u.key);if(null!==p){const w=this.ss.get(p.largestBatchId).delete(u.key);this.ss.set(p.largestBatchId,w)}this.overlays=this.overlays.insert(u.key,new Ou(i,u));let _=this.ss.get(i);void 0===_&&(_=hr(),this.ss.set(i,_)),this.ss.set(i,_.add(u.key))}}class uc{constructor(){this.rs=new ci(ms.os),this.us=new ci(ms.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,i){const u=new ms(e,i);this.rs=this.rs.add(u),this.us=this.us.add(u)}hs(e,i){e.forEach(u=>this.addReference(u,i))}removeReference(e,i){this.ls(new ms(e,i))}fs(e,i){e.forEach(u=>this.removeReference(u,i))}ds(e){const i=new Ht(new Wn([])),u=new ms(i,e),p=new ms(i,e+1),_=[];return this.us.forEachInRange([u,p],w=>{this.ls(w),_.push(w.key)}),_}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const i=new Ht(new Wn([])),u=new ms(i,e),p=new ms(i,e+1);let _=hr();return this.us.forEachInRange([u,p],w=>{_=_.add(w.key)}),_}containsKey(e){const i=new ms(e,0),u=this.rs.firstAfterOrEqual(i);return null!==u&&e.isEqual(u.key)}}class ms{constructor(e,i){this.key=e,this.gs=i}static os(e,i){return Ht.comparator(e.key,i.key)||Mn(e.gs,i.gs)}static cs(e,i){return Mn(e.gs,i.gs)||Ht.comparator(e.key,i.key)}}class Qn{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.ys=1,this.ps=new ci(ms.os)}checkEmpty(e){return qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,i,u,p){const _=this.ys;this.ys++;const w=new Yp(_,i,u,p);this.mutationQueue.push(w);for(const O of p)this.ps=this.ps.add(new ms(O.key,_)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return qe.resolve(w)}lookupMutationBatch(e,i){return qe.resolve(this.Is(i))}getNextMutationBatchAfterBatchId(e,i){const p=this.Ts(i+1),_=p<0?0:p;return qe.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const u=new ms(i,0),p=new ms(i,Number.POSITIVE_INFINITY),_=[];return this.ps.forEachInRange([u,p],w=>{const O=this.Is(w.gs);_.push(O)}),qe.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,i){let u=new ci(Mn);return i.forEach(p=>{const _=new ms(p,0),w=new ms(p,Number.POSITIVE_INFINITY);this.ps.forEachInRange([_,w],O=>{u=u.add(O.gs)})}),qe.resolve(this.Es(u))}getAllMutationBatchesAffectingQuery(e,i){const u=i.path,p=u.length+1;let _=u;Ht.isDocumentKey(_)||(_=_.child(""));const w=new ms(new Ht(_),0);let O=new ci(Mn);return this.ps.forEachWhile(B=>{const z=B.key.path;return!!u.isPrefixOf(z)&&(z.length===p&&(O=O.add(B.gs)),!0)},w),qe.resolve(this.Es(O))}Es(e){const i=[];return e.forEach(u=>{const p=this.Is(u);null!==p&&i.push(p)}),i}removeMutationBatch(e,i){xt(0===this.As(i.batchId,"removed")),this.mutationQueue.shift();let u=this.ps;return qe.forEach(i.mutations,p=>{const _=new ms(p.key,i.batchId);return u=u.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,p.key)}).next(()=>{this.ps=u})}Pn(e){}containsKey(e,i){const u=new ms(i,0),p=this.ps.firstAfterOrEqual(u);return qe.resolve(i.isEqual(p&&p.key))}performConsistencyCheck(e){return qe.resolve()}As(e,i){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const i=this.Ts(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class __{constructor(e){this.Rs=e,this.docs=new Ji(Ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const u=i.key,p=this.docs.get(u),_=p?p.size:0,w=this.Rs(i);return this.docs=this.docs.insert(u,{document:i.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const u=this.docs.get(i);return qe.resolve(u?u.document.mutableCopy():Rr.newInvalidDocument(i))}getEntries(e,i){let u=Ca();return i.forEach(p=>{const _=this.docs.get(p);u=u.insert(p,_?_.document.mutableCopy():Rr.newInvalidDocument(p))}),qe.resolve(u)}getDocumentsMatchingQuery(e,i,u,p){let _=Ca();const w=i.path,O=new Ht(w.child("")),B=this.docs.getIteratorFrom(O);for(;B.hasNext();){const{key:z,value:{document:ne}}=B.getNext();if(!w.isPrefixOf(z.path))break;z.path.length>w.length+1||Xl(Nl(ne),u)<=0||(p.has(ne.key)||b(i,ne))&&(_=_.insert(ne.key,ne.mutableCopy()))}return qe.resolve(_)}getAllFromCollectionGroup(e,i,u,p){Ct()}Ps(e,i){return qe.forEach(this.docs,u=>i(u))}newChangeBuffer(e){return new Kf(this)}getSize(e){return qe.resolve(this.size)}}class Kf extends og{constructor(e){super(),this.Xn=e}applyChanges(e){const i=[];return this.changes.forEach((u,p)=>{p.isValidDocument()?i.push(this.Xn.addEntry(e,p)):this.Xn.removeEntry(u)}),qe.waitFor(i)}getFromCache(e,i){return this.Xn.getEntry(e,i)}getAllFromCache(e,i){return this.Xn.getEntries(e,i)}}class Yc{constructor(e){this.persistence=e,this.vs=new nc(i=>eu(i),kc),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.bs=0,this.Vs=new uc,this.targetCount=0,this.Ss=kh.Vn()}forEachTarget(e,i){return this.vs.forEach((u,p)=>i(p)),qe.resolve()}getLastRemoteSnapshotVersion(e){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(e,i,u){return u&&(this.lastRemoteSnapshotVersion=u),i>this.bs&&(this.bs=i),qe.resolve()}xn(e){this.vs.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Ss=new kh(i),this.highestTargetId=i),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,i){return this.xn(i),this.targetCount+=1,qe.resolve()}updateTargetData(e,i){return this.xn(i),qe.resolve()}removeTargetData(e,i){return this.vs.delete(i.target),this.Vs.ds(i.targetId),this.targetCount-=1,qe.resolve()}removeTargets(e,i,u){let p=0;const _=[];return this.vs.forEach((w,O)=>{O.sequenceNumber<=i&&null===u.get(O.targetId)&&(this.vs.delete(w),_.push(this.removeMatchingKeysForTargetId(e,O.targetId)),p++)}),qe.waitFor(_).next(()=>p)}getTargetCount(e){return qe.resolve(this.targetCount)}getTargetData(e,i){const u=this.vs.get(i)||null;return qe.resolve(u)}addMatchingKeys(e,i,u){return this.Vs.hs(i,u),qe.resolve()}removeMatchingKeys(e,i,u){this.Vs.fs(i,u);const p=this.persistence.referenceDelegate,_=[];return p&&i.forEach(w=>{_.push(p.markPotentiallyOrphaned(e,w))}),qe.waitFor(_)}removeMatchingKeysForTargetId(e,i){return this.Vs.ds(i),qe.resolve()}getMatchingKeysForTargetId(e,i){const u=this.Vs.ws(i);return qe.resolve(u)}containsKey(e,i){return qe.resolve(this.Vs.containsKey(i))}}class y_{constructor(e,i){this.Ds={},this.overlays={},this.Cs=new Ms(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Yc(this),this.indexManager=new bv,this.remoteDocumentCache=new __(u=>this.referenceDelegate.ks(u)),this.Tt=new Qp(i),this.$s=new Tv(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new Lh,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let u=this.Ds[e.toKey()];return u||(u=new Qn(i,this.referenceDelegate),this.Ds[e.toKey()]=u),u}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,i,u){ot("MemoryPersistence","Starting transaction:",e);const p=new hE(this.Cs.next());return this.referenceDelegate.Ms(),u(p).next(_=>this.referenceDelegate.Os(p).next(()=>_)).toPromise().then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e,i){return qe.or(Object.values(this.Ds).map(u=>()=>u.containsKey(e,i)))}}class hE extends za{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Bs=new uc,this.Ls=null}static qs(e){return new ag(e)}get Us(){if(this.Ls)return this.Ls;throw Ct()}addReference(e,i,u){return this.Bs.addReference(u,i),this.Us.delete(u.toString()),qe.resolve()}removeReference(e,i,u){return this.Bs.removeReference(u,i),this.Us.add(u.toString()),qe.resolve()}markPotentiallyOrphaned(e,i){return this.Us.add(i.toString()),qe.resolve()}removeTarget(e,i){this.Bs.ds(i.targetId).forEach(p=>this.Us.add(p.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,i.targetId).next(p=>{p.forEach(_=>this.Us.add(_.toString()))}).next(()=>u.removeTargetData(e,i))}Ms(){this.Ls=new Set}Os(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.Us,u=>{const p=Ht.fromPath(u);return this.Ks(e,p).next(_=>{_||i.removeEntry(p,fn.min())})}).next(()=>(this.Ls=null,i.apply(e)))}updateLimboDocument(e,i){return this.Ks(e,i).next(u=>{u?this.Us.delete(i.toString()):this.Us.add(i.toString())})}ks(e){return 0}Ks(e,i){return qe.or([()=>qe.resolve(this.Bs.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Fs(e,i)])}}class fE{constructor(e){this.Tt=e}F(e,i,u,p){const _=new Ml("createOrUpgrade",i);var O;u<1&&p>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hb,{unique:!0}),O.createObjectStore("documentMutations"),Sv(e),function(O){O.createObjectStore("remoteDocuments")}(e));let w=qe.resolve();return u<3&&p>=3&&(0!==u&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),Sv(e)),w=w.next(()=>function(O){const B=O.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",z)}(_))),u<4&&p>=4&&(0!==u&&(w=w.next(()=>function(O,B){return B.store("mutations").W().next(z=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hb,{unique:!0});const ne=B.store("mutations"),we=z.map(Be=>ne.put(Be));return qe.waitFor(we)})}(e,_))),w=w.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),u<5&&p>=5&&(w=w.next(()=>this.Gs(_))),u<6&&p>=6&&(w=w.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(_)))),u<7&&p>=7&&(w=w.next(()=>this.js(_))),u<8&&p>=8&&(w=w.next(()=>this.zs(e,_))),u<9&&p>=9&&(w=w.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),u<10&&p>=10&&(w=w.next(()=>this.Ws(_))),u<11&&p>=11&&(w=w.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),u<12&&p>=12&&(w=w.next(()=>{!function(O){const B=O.createObjectStore("documentOverlays",{keyPath:gv});B.createIndex("collectionPathOverlayIndex",pb,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",gb,{unique:!1})}(e)})),u<13&&p>=13&&(w=w.next(()=>function(O){const B=O.createObjectStore("remoteDocumentsV14",{keyPath:uE});B.createIndex("documentKeyIndex",cE),B.createIndex("collectionGroupIndex",e_)}(e)).next(()=>this.Hs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),u<14&&p>=14&&(w=w.next(()=>this.Js(e,_))),u<15&&p>=15&&(w=w.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:Zs}).createIndex("sequenceNumberIndex",qp,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:t_}).createIndex("documentKeyIndex",n_,{unique:!1})}(e))),w}Qs(e){let i=0;return e.store("remoteDocuments").X((u,p)=>{i+=f_(p)}).next(()=>{const u={byteSize:i};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",u)})}Gs(e){const i=e.store("mutationQueues"),u=e.store("mutations");return i.W().next(p=>qe.forEach(p,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return u.W("userMutationsIndex",w).next(O=>qe.forEach(O,B=>{xt(B.userId===_.userId);const z=Fd(this.Tt,B);return zf(e,_.userId,z).next(()=>{})}))}))}js(e){const i=e.store("targetDocuments"),u=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(p=>{const _=[];return u.X((w,O)=>{const B=new Wn(w),z=[0,el(B)];_.push(i.get(z).next(ne=>ne?qe.resolve():i.put({targetId:0,path:el(B),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>qe.waitFor(_))})}zs(e,i){e.createObjectStore("collectionParents",{keyPath:fb});const u=i.store("collectionParents"),p=new ng,_=w=>{if(p.add(w)){const O=w.lastSegment(),B=w.popLast();return u.put({collectionId:O,parent:el(B)})}};return i.store("remoteDocuments").X({Z:!0},(w,O)=>{const B=new Wn(w);return _(B.popLast())}).next(()=>i.store("documentMutations").X({Z:!0},([w,O,B],z)=>{const ne=ic(O);return _(ne.popLast())}))}Ws(e){const i=e.store("targets");return i.X((u,p)=>{const _=sc(p),w=o_(this.Tt,_);return i.put(w)})}Hs(e,i){const u=i.store("remoteDocuments"),p=[];return u.X((_,w)=>{const O=i.store("remoteDocumentsV14"),B=(z=w,z.document?new Ht(Wn.fromString(z.document.name).popFirst(5)):z.noDocument?Ht.fromSegments(z.noDocument.path):z.unknownDocument?Ht.fromSegments(z.unknownDocument.path):Ct()).path.toArray();var z;const ne={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};p.push(O.put(ne))}).next(()=>qe.waitFor(p))}Js(e,i){const u=i.store("mutations"),p=Dv(this.Tt),_=new y_(ag.qs,this.Tt.oe);return u.W().next(w=>{const O=new Map;return w.forEach(B=>{var z;let ne=null!==(z=O.get(B.userId))&&void 0!==z?z:hr();Fd(this.Tt,B).keys().forEach(we=>ne=ne.add(we)),O.set(B.userId,ne)}),qe.forEach(O,(B,z)=>{const ne=new ce(z),we=Ud.ue(this.Tt,ne),Be=_.getIndexManager(ne),pt=p_.ue(ne,this.Tt,Be,_.referenceDelegate);return new Cv(p,pt,we,Be).recalculateAndSaveOverlaysForDocumentKeys(new Pd(i,Ms.at),B).next()})})}}function Sv(l){l.createObjectStore("targetDocuments",{keyPath:Sh}).createIndex("documentTargetsIndex",Kp,{unique:!0}),l.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gs,{unique:!0}),l.createObjectStore("targetGlobal")}const Av="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ov{constructor(e,i,u,p,_,w,O,B,z,ne,we=15){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=u,this.Ys=_,this.window=w,this.document=O,this.Zs=z,this.Xs=ne,this.ti=we,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=Be=>Promise.resolve(),!Ov.C())throw new _t(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sg(this,p),this.oi=i+"main",this.Tt=new Qp(B),this.ui=new ao(this.oi,this.ti,new fE(this.Tt)),this.Ns=new Wf(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Dv(this.Tt),this.$s=new Ld,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ne&&vn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _t(je.FAILED_PRECONDITION,Av);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Ms(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var i=this;return this.ri=function(){var u=(0,fe.Z)(function*(p){if(i.started)return e(p)});return function(p){return u.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var i=(0,fe.Z)(function*(u){null===u.newVersion&&(yield e())});return function(u){return i.apply(this,arguments)}}())}setNetworkEnabled(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,fe.Z)(function*(){i.started&&(yield i.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(i=>{i||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(i=>this.isPrimary&&!i?this.mi(e).next(()=>!1):!!i&&this.gi(e).next(()=>!0))).catch(e=>{if(lo(e))return ot("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return v_(e).get("owner").next(i=>qe.resolve(this.yi(i)))}pi(e){return lg(e).delete(this.clientId)}Ii(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const i=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",u=>{const p=ts(u,"clientMetadata");return p.W().next(_=>{const w=e.Ei(_,18e5),O=_.filter(B=>-1===w.indexOf(B));return qe.forEach(O,B=>p.delete(B.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ci)for(const u of i)e.ci.removeItem(e.Ai(u.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?qe.resolve(!0):v_(e).get("owner").next(i=>{if(null!==i&&this.Ti(i.leaseTimestampMs,5e3)&&!this.Ri(i.ownerId)){if(this.yi(i)&&this.networkEnabled)return!0;if(!this.yi(i)){if(!i.allowTabSynchronization)throw new _t(je.FAILED_PRECONDITION,Av);return!1}}return!(!this.networkEnabled||!this.inForeground)||lg(e).W().next(u=>void 0===this.Ei(u,5e3).find(p=>!(this.clientId===p.clientId||!(!this.networkEnabled&&p.networkEnabled||!this.inForeground&&p.inForeground&&this.networkEnabled===p.networkEnabled))))}).next(i=>(this.isPrimary!==i&&ot("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],i=>{const u=new Pd(i,Ms.at);return e.mi(u).next(()=>e.pi(u))}),e.ui.close(),e.Vi()})()}Ei(e,i){return e.filter(u=>this.Ti(u.updateTimeMs,i)&&!this.Ri(u.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>lg(e).W().next(i=>this.Ei(i,18e5).map(u=>u.clientId)))}get started(){return this.xs}getMutationQueue(e,i){return p_.ue(e,this.Tt,i,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dE(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Ud.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,i,u){ot("IndexedDbPersistence","Starting transaction:",e);const p="readonly"===i?"readonly":"readwrite",_=15===(w=this.ti)?i_:14===w?_v:13===w?r_:12===w?mb:11===w?mv:void Ct();var w;let O;return this.ui.runTransaction(e,p,_,B=>(O=new Pd(B,this.Cs?this.Cs.next():Ms.at),"readwrite-primary"===i?this._i(O).next(z=>!!z||this.wi(O)).next(z=>{if(!z)throw vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new _t(je.FAILED_PRECONDITION,wo);return u(O)}).next(z=>this.gi(O).next(()=>z)):this.Di(O).next(()=>u(O)))).then(B=>(O.raiseOnCommittedEvent(),B))}Di(e){return v_(e).get("owner").next(i=>{if(null!==i&&this.Ti(i.leaseTimestampMs,5e3)&&!this.Ri(i.ownerId)&&!this.yi(i)&&!(this.Xs||this.allowTabSynchronization&&i.allowTabSynchronization))throw new _t(je.FAILED_PRECONDITION,Av)})}gi(e){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return v_(e).put("owner",i)}static C(){return ao.C()}mi(e){const i=v_(e);return i.get("owner").next(u=>this.yi(u)?(ot("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):qe.resolve())}Ti(e,i){const u=Date.now();return!(e<u-i||e>u&&(vn(`Detected an update time that is in the future: ${e} > ${u}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const i=/(?:Version|Mobile)\/1[456]/;(0,Ye.G6)()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var i;try{const u=null!==(null===(i=this.ci)||void 0===i?void 0:i.getItem(this.Ai(e)));return ot("IndexedDbPersistence",`Client '${e}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return vn("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){vn("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function v_(l){return ts(l,"owner")}function lg(l){return ts(l,"clientMetadata")}function b_(l,e){let i=l.projectId;return l.isDefaultDatabase||(i+="."+l.database),"firestore/"+e+"/"+i+"/"}class Zc{constructor(e,i,u,p){this.targetId=e,this.fromCache=i,this.Ci=u,this.xi=p}static Ni(e,i){let u=hr(),p=hr();for(const _ of i.docChanges)switch(_.type){case 0:u=u.add(_.doc.key);break;case 1:p=p.add(_.doc.key)}return new Zc(e,i.fromCache,u,p)}}class Cb{constructor(){this.ki=!1}initialize(e,i){this.$i=e,this.indexManager=i,this.ki=!0}getDocumentsMatchingQuery(e,i,u,p){return this.Mi(e,i).next(_=>_||this.Oi(e,i,p,u)).next(_=>_||this.Fi(e,i))}Mi(e,i){if(Do(i))return qe.resolve(null);let u=Ps(i);return this.indexManager.getIndexType(e,u).next(p=>0===p?null:(null!==i.limit&&1===p&&(i=Ad(i,null,"F"),u=Ps(i)),this.indexManager.getDocumentsMatchingTarget(e,u).next(_=>{const w=hr(..._);return this.$i.getDocuments(e,w).next(O=>this.indexManager.getMinOffset(e,u).next(B=>{const z=this.Bi(i,O);return this.Li(i,z,w,B.readTime)?this.Mi(e,Ad(i,null,"F")):this.qi(e,z,i,B)}))})))}Oi(e,i,u,p){return Do(i)||p.isEqual(fn.min())?this.Fi(e,i):this.$i.getDocuments(e,u).next(_=>{const w=this.Bi(i,_);return this.Li(i,w,u,p)?this.Fi(e,i):(ln()<=Qe.in.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),v(i)),this.qi(e,w,i,Xu(p,-1)))})}Bi(e,i){let u=new ci(q(e));return i.forEach((p,_)=>{b(e,_)&&(u=u.add(_))}),u}Li(e,i,u,p){if(null===e.limit)return!1;if(u.size!==i.size)return!0;const _="F"===e.limitType?i.last():i.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(p)>0)}Fi(e,i){return ln()<=Qe.in.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",v(i)),this.$i.getDocumentsMatchingQuery(e,i,Br.min())}qi(e,i,u,p){return this.$i.getDocumentsMatchingQuery(e,u,p).next(_=>(i.forEach(w=>{_=_.insert(w.key,w)}),_))}}class Nv{constructor(e,i,u,p){this.persistence=e,this.Ui=i,this.Tt=p,this.Ki=new Ji(Mn),this.Gi=new nc(_=>eu(_),kc),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(u)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cv(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Ki))}}function w_(l,e,i,u){return new Nv(l,e,i,u)}function Tb(l,e){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,fe.Z)(function*(l,e){const i=kt(l);return yield i.persistence.runTransaction("Handle user change","readonly",u=>{let p;return i.mutationQueue.getAllMutationBatches(u).next(_=>(p=_,i.zi(e),i.mutationQueue.getAllMutationBatches(u))).next(_=>{const w=[],O=[];let B=hr();for(const z of p){w.push(z.batchId);for(const ne of z.mutations)B=B.add(ne.key)}for(const z of _){O.push(z.batchId);for(const ne of z.mutations)B=B.add(ne.key)}return i.localDocuments.getDocuments(u,B).next(z=>({Wi:z,removedBatchIds:w,addedBatchIds:O}))})})}),Sb.apply(this,arguments)}function Mv(l){const e=kt(l);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Ns.getLastRemoteSnapshotVersion(i))}function ug(l,e,i){let u=hr(),p=hr();return i.forEach(_=>u=u.add(_)),e.getEntries(l,u).next(_=>{let w=Ca();return i.forEach((O,B)=>{const z=_.get(O);B.isFoundDocument()!==z.isFoundDocument()&&(p=p.add(O)),B.isNoDocument()&&B.version.isEqual(fn.min())?(e.removeEntry(O,B.readTime),w=w.insert(O,B)):!z.isValidDocument()||B.version.compareTo(z.version)>0||0===B.version.compareTo(z.version)&&z.hasPendingWrites?(e.addEntry(B),w=w.insert(O,B)):ot("LocalStore","Ignoring outdated watch update for ",O,". Current version:",z.version," Watch version:",B.version)}),{Hi:w,Ji:p}})}function Ob(l,e){const i=kt(l);return i.persistence.runTransaction("Get next mutation batch","readonly",u=>(void 0===e&&(e=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(u,e)))}function jd(l,e){const i=kt(l);return i.persistence.runTransaction("Allocate target","readwrite",u=>{let p;return i.Ns.getTargetData(u,e).next(_=>_?(p=_,qe.resolve(p)):i.Ns.allocateTargetId(u).next(w=>(p=new xd(e,w,0,u.currentSequenceNumber),i.Ns.addTargetData(u,p).next(()=>p))))}).then(u=>{const p=i.Ki.get(u.targetId);return(null===p||u.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(i.Ki=i.Ki.insert(u.targetId,u),i.Gi.set(e,u.targetId)),u})}function tl(l,e,i){return E_.apply(this,arguments)}function E_(){return E_=(0,fe.Z)(function*(l,e,i){const u=kt(l),p=u.Ki.get(e),_=i?"readwrite":"readwrite-primary";try{i||(yield u.persistence.runTransaction("Release target",_,w=>u.persistence.referenceDelegate.removeTarget(w,p)))}catch(w){if(!lo(w))throw w;ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}u.Ki=u.Ki.remove(e),u.Gi.delete(p.target)}),E_.apply(this,arguments)}function Qc(l,e,i){const u=kt(l);let p=fn.min(),_=hr();return u.persistence.runTransaction("Execute query","readonly",w=>function(O,B,z){const ne=kt(O),we=ne.Gi.get(z);return void 0!==we?qe.resolve(ne.Ki.get(we)):ne.Ns.getTargetData(B,z)}(u,w,Ps(e)).next(O=>{if(O)return p=O.lastLimboFreeSnapshotVersion,u.Ns.getMatchingKeysForTargetId(w,O.targetId).next(B=>{_=B})}).next(()=>u.Ui.getDocumentsMatchingQuery(w,e,i?p:fn.min(),i?_:hr())).next(O=>(cc(u,M(e),O),{documents:O,Yi:_})))}function cg(l,e){const i=kt(l),u=kt(i.Ns),p=i.Ki.get(e);return p?Promise.resolve(p.target):i.persistence.runTransaction("Get target data","readonly",_=>u.ie(_,e).next(w=>w?w.target:null))}function D_(l,e){const i=kt(l),u=i.Qi.get(e)||fn.min();return i.persistence.runTransaction("Get new document changes","readonly",p=>i.ji.getAllFromCollectionGroup(p,e,Xu(u,-1),Number.MAX_SAFE_INTEGER)).then(p=>(cc(i,e,p),p))}function cc(l,e,i){let u=l.Qi.get(e)||fn.min();i.forEach((p,_)=>{_.readTime.compareTo(u)>0&&(u=_.readTime)}),l.Qi.set(e,u)}function I_(){return I_=(0,fe.Z)(function*(l,e,i,u){const p=kt(l);let _=hr(),w=Ca();for(const z of i){const ne=e.Zi(z.metadata.name);z.document&&(_=_.add(ne));const we=e.Xi(z);we.setReadTime(e.tr(z.metadata.readTime)),w=w.insert(ne,we)}const O=p.ji.newChangeBuffer({trackRemovals:!0}),B=yield jd(p,(z=u,Ps(tc(Wn.fromString(`__bundle__/docs/${z}`)))));var z;return p.persistence.runTransaction("Apply bundle documents","readwrite",z=>ug(z,O,w).next(ne=>(O.apply(z),ne)).next(ne=>p.Ns.removeMatchingKeysForTargetId(z,B.targetId).next(()=>p.Ns.addMatchingKeys(z,_,B.targetId)).next(()=>p.localDocuments.getLocalViewOfDocuments(z,ne.Hi,ne.Ji)).next(()=>ne.Hi)))}),I_.apply(this,arguments)}function Rv(l,e){return C_.apply(this,arguments)}function C_(){return C_=(0,fe.Z)(function*(l,e,i=hr()){const u=yield jd(l,Ps(Nh(e.bundledQuery))),p=kt(l);return p.persistence.runTransaction("Save named query","readwrite",_=>{const w=ps(e.readTime);if(u.snapshotVersion.compareTo(w)>=0)return p.$s.saveNamedQuery(_,e);const O=u.withResumeToken(E.EMPTY_BYTE_STRING,w);return p.Ki=p.Ki.insert(O.targetId,O),p.Ns.updateTargetData(_,O).next(()=>p.Ns.removeMatchingKeysForTargetId(_,u.targetId)).next(()=>p.Ns.addMatchingKeys(_,i,u.targetId)).next(()=>p.$s.saveNamedQuery(_,e))})}),C_.apply(this,arguments)}function Uh(l,e){return`firestore_clients_${l}_${e}`}function T_(l,e,i){let u=`firestore_mutations_${l}_${i}`;return e.isAuthenticated()&&(u+=`_${e.uid}`),u}function S_(l,e){return`firestore_targets_${l}_${e}`}class qf{constructor(e,i,u,p){this.user=e,this.batchId=i,this.state=u,this.error=p}static er(e,i,u){const p=JSON.parse(u);let _,w="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return w&&p.error&&(w="string"==typeof p.error.message&&"string"==typeof p.error.code,w&&(_=new _t(p.error.code,p.error.message))),w?new qf(e,i,p.state,_):(vn("SharedClientState",`Failed to parse mutation state for ID '${i}': ${u}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bh{constructor(e,i,u){this.targetId=e,this.state=i,this.error=u}static er(e,i){const u=JSON.parse(i);let p,_="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return _&&u.error&&(_="string"==typeof u.error.message&&"string"==typeof u.error.code,_&&(p=new _t(u.error.code,u.error.message))),_?new Bh(e,u.state,p):(vn("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static er(e,i){const u=JSON.parse(i);let p="object"==typeof u&&u.activeTargetIds instanceof Array,_=Up();for(let w=0;p&&w<u.activeTargetIds.length;++w)p=qa(u.activeTargetIds[w]),_=_.add(u.activeTargetIds[w]);return p?new Vh(e,_):(vn("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}}class A_{constructor(e,i){this.clientId=e,this.onlineState=i}static er(e){const i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new A_(i.clientId,i.onlineState):(vn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yf{constructor(){this.activeTargetIds=Up()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dg{constructor(e,i,u,p,_){this.window=e,this.Ys=i,this.persistenceKey=u,this.rr=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ji(Mn),this.started=!1,this.hr=[];const w=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.lr=Uh(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Yf),this._r=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const i=yield e.syncEngine.Si();for(const p of i){if(p===e.rr)continue;const _=e.getItem(Uh(e.persistenceKey,p));if(_){const w=Vh.er(p,_);w&&(e.ar=e.ar.insert(w.clientId,w))}}e.pr();const u=e.storage.getItem(e.gr);if(u){const p=e.Ir(u);p&&e.Tr(p)}for(const p of e.hr)e.cr(p);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let i=!1;return this.ar.forEach((u,p)=>{p.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,i,u){this.Ar(e,i,u),this.Rr(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(S_(this.persistenceKey,e));if(u){const p=Bh.er(e,u);p&&(i=p.state)}}return this.Pr.sr(e),this.pr(),i}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(S_(this.persistenceKey,e))}updateQueryState(e,i,u){this.vr(e,i,u)}handleUserChange(e,i,u){i.forEach(p=>{this.Rr(p)}),this.currentUser=e,u.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const i=this.storage.getItem(e);return ot("SharedClientState","READ",e,i),i}setItem(e,i){ot("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){ot("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var i=this;const u=e;if(u.storageArea===this.storage){if(ot("SharedClientState","EVENT",u.key,u.newValue),u.key===this.lr)return void vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,fe.Z)(function*(){if(i.started){if(null!==u.key)if(i._r.test(u.key)){if(null==u.newValue){const p=i.Sr(u.key);return i.Dr(p,null)}{const p=i.Cr(u.key,u.newValue);if(p)return i.Dr(p.clientId,p)}}else if(i.wr.test(u.key)){if(null!==u.newValue){const p=i.Nr(u.key,u.newValue);if(p)return i.kr(p)}}else if(i.mr.test(u.key)){if(null!==u.newValue){const p=i.$r(u.key,u.newValue);if(p)return i.Mr(p)}}else if(u.key===i.gr){if(null!==u.newValue){const p=i.Ir(u.newValue);if(p)return i.Tr(p)}}else if(u.key===i.dr){const p=function(_){let w=Ms.at;if(null!=_)try{const O=JSON.parse(_);xt("number"==typeof O),w=O}catch(O){vn("SharedClientState","Failed to read sequence number from WebStorage",O)}return w}(u.newValue);p!==Ms.at&&i.sequenceNumberHandler(p)}else if(u.key===i.yr){const p=i.Or(u.newValue);yield Promise.all(p.map(_=>i.syncEngine.Fr(_)))}}else i.hr.push(u)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,i,u){const p=new qf(this.currentUser,e,i,u),_=T_(this.persistenceKey,this.currentUser,e);this.setItem(_,p.nr())}Rr(e){const i=T_(this.persistenceKey,this.currentUser,e);this.removeItem(i)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,i,u){const p=S_(this.persistenceKey,e),_=new Bh(e,i,u);this.setItem(p,_.nr())}Vr(e){const i=JSON.stringify(Array.from(e));this.setItem(this.yr,i)}Sr(e){const i=this._r.exec(e);return i?i[1]:null}Cr(e,i){const u=this.Sr(e);return Vh.er(u,i)}Nr(e,i){const u=this.wr.exec(e),p=Number(u[1]);return qf.er(new ce(void 0!==u[2]?u[2]:null),p,i)}$r(e,i){const u=this.mr.exec(e),p=Number(u[1]);return Bh.er(p,i)}Ir(e){return A_.er(e)}Or(e){return JSON.parse(e)}kr(e){var i=this;return(0,fe.Z)(function*(){if(e.user.uid===i.currentUser.uid)return i.syncEngine.Br(e.batchId,e.state,e.error);ot("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,i){const u=i?this.ar.insert(e,i):this.ar.remove(e),p=this.Er(this.ar),_=this.Er(u),w=[],O=[];return _.forEach(B=>{p.has(B)||w.push(B)}),p.forEach(B=>{_.has(B)||O.push(B)}),this.syncEngine.qr(w,O).then(()=>{this.ar=u})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let i=Up();return e.forEach((u,p)=>{i=i.unionWith(p.activeTargetIds)}),i}}class Nb{constructor(){this.Ur=new Yf,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,u){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,i,u){this.Kr[e]=i}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Yf,Promise.resolve()}handleUserChange(e,i,u){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hd{Gr(e){}shutdown(){}}class Zf{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gh=null;function Qf(){return null===Gh?Gh=268435456+Math.round(2147483648*Math.random()):Gh++,"0x"+Gh.toString(16)}const Mb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rb{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const xs="WebChannelConnection";class $d extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,i,u,p,_){const w=Qf(),O=this.fo(e,i);ot("RestConnection",`Sending RPC '${e}' ${w}:`,O,u);const B={};return this._o(B,p,_),this.wo(e,O,B,u).then(z=>(ot("RestConnection",`Received RPC '${e}' ${w}: `,z),z),z=>{throw Vn("RestConnection",`RPC '${e}' ${w} failed with error: `,z,"url: ",O,"request:",u),z})}mo(e,i,u,p,_,w){return this.lo(e,i,u,p,_)}_o(e,i,u){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ue,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((p,_)=>e[_]=p),u&&u.headers.forEach((p,_)=>e[_]=p)}fo(e,i){return`${this.co}/v1/${i}:${Mb[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,i,u,p){const _=Qf();return new Promise((w,O)=>{const B=new L;B.setWithCredentials(!0),B.listenOnce(Ql.COMPLETE,()=>{try{switch(B.getLastErrorCode()){case Zl.NO_ERROR:const ne=B.getResponseJson();ot(xs,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(ne)),w(ne);break;case Zl.TIMEOUT:ot(xs,`RPC '${e}' ${_} timed out`),O(new _t(je.DEADLINE_EXCEEDED,"Request time out"));break;case Zl.HTTP_ERROR:const we=B.getStatus();if(ot(xs,`RPC '${e}' ${_} failed with status:`,we,"response text:",B.getResponseText()),we>0){let Be=B.getResponseJson();Array.isArray(Be)&&(Be=Be[0]);const pt=Be?.error;if(pt&&pt.status&&pt.message){const Ot=function(Qt){const gn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(gn)>=0?gn:je.UNKNOWN}(pt.status);O(new _t(Ot,pt.message))}else O(new _t(je.UNKNOWN,"Server responded with status "+B.getStatus()))}else O(new _t(je.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{ot(xs,`RPC '${e}' ${_} completed.`)}});const z=JSON.stringify(p);ot(xs,`RPC '${e}' ${_} sending request:`,p),B.send(i,"POST",z,u,15)})}yo(e,i,u){const p=Qf(),_=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=Rc(),O=_d(),B={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(B.xmlHttpFactory=new R({})),this._o(B.initMessageHeaders,i,u),B.encodeInitMessageHeaders=!0;const z=_.join("");ot(xs,`Creating RPC '${e}' stream ${p}: ${z}`,B);const ne=w.createWebChannel(z,B);let we=!1,Be=!1;const pt=new Rb({Yr:Qt=>{Be?ot(xs,`Not sending because RPC '${e}' stream ${p} is closed:`,Qt):(we||(ot(xs,`Opening RPC '${e}' stream ${p} transport.`),ne.open(),we=!0),ot(xs,`RPC '${e}' stream ${p} sending:`,Qt),ne.send(Qt))},Zr:()=>ne.close()}),Ot=(Qt,gn,di)=>{Qt.listen(gn,ss=>{try{di(ss)}catch(fr){setTimeout(()=>{throw fr},0)}})};return Ot(ne,$.EventType.OPEN,()=>{Be||ot(xs,`RPC '${e}' stream ${p} transport opened.`)}),Ot(ne,$.EventType.CLOSE,()=>{Be||(Be=!0,ot(xs,`RPC '${e}' stream ${p} transport closed`),pt.oo())}),Ot(ne,$.EventType.ERROR,Qt=>{Be||(Be=!0,Vn(xs,`RPC '${e}' stream ${p} transport errored:`,Qt),pt.oo(new _t(je.UNAVAILABLE,"The operation could not be completed")))}),Ot(ne,$.EventType.MESSAGE,Qt=>{var gn;if(!Be){const di=Qt.data[0];xt(!!di);const fr=di.error||(null===(gn=di[0])||void 0===gn?void 0:gn.error);if(fr){ot(xs,`RPC '${e}' stream ${p} received error:`,fr);const os=fr.status;let wr=function(Js){const Sr=Xi[Js];if(void 0!==Sr)return Hm(Sr)}(os),Gr=fr.message;void 0===wr&&(wr=je.INTERNAL,Gr="Unknown error status: "+os+" with message "+fr.message),Be=!0,pt.oo(new _t(wr,Gr)),ne.close()}else ot(xs,`RPC '${e}' stream ${p} received:`,di),pt.uo(di)}}),Ot(O,Al.STAT_EVENT,Qt=>{Qt.stat===wa.PROXY?ot(xs,`RPC '${e}' stream ${p} detected buffering proxy`):Qt.stat===wa.NOPROXY&&ot(xs,`RPC '${e}' stream ${p} detected no buffering proxy`)}),setTimeout(()=>{pt.ro()},0),pt}}function O_(){return typeof window<"u"?window:null}function dc(){return typeof document<"u"?document:null}function zd(l){return new uv(l,!0)}class Wd{constructor(e,i,u=1e3,p=1.5,_=6e4){this.Ys=e,this.timerId=i,this.po=u,this.Io=p,this.To=_,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const i=Math.floor(this.Eo+this.bo()),u=Math.max(0,Date.now()-this.Ro),p=Math.max(0,i-u);p>0&&ot("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Eo} ms, delay with jitter: ${i} ms, last attempt: ${u} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,p,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class hg{constructor(e,i,u,p,_,w,O,B){this.Ys=e,this.So=u,this.Do=p,this.connection=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=O,this.listener=B,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Wd(e,i)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,fe.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,fe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,i){var u=this;return(0,fe.Z)(function*(){u.Uo(),u.Ko(),u.ko.cancel(),u.Co++,4!==e?u.ko.reset():i&&i.code===je.RESOURCE_EXHAUSTED?(vn(i.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),u.ko.Po()):i&&i.code===je.UNAUTHENTICATED&&3!==u.state&&(u.authCredentialsProvider.invalidateToken(),u.appCheckCredentialsProvider.invalidateToken()),null!==u.stream&&(u.Go(),u.stream.close(),u.stream=null),u.state=e,yield u.listener.no(i)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),i=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([u,p])=>{this.Co===i&&this.jo(u,p)},u=>{e(()=>{const p=new _t(je.UNKNOWN,"Fetching auth token failed: "+u.message);return this.zo(p)})})}jo(e,i){const u=this.Qo(this.Co);this.stream=this.Wo(e,i),this.stream.Xr(()=>{u(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(p=>{u(()=>this.zo(p))}),this.stream.onMessage(p=>{u(()=>this.onMessage(p))})}Oo(){var e=this;this.state=5,this.ko.vo((0,fe.Z)(function*(){e.state=0,e.start()}))}zo(e){return ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return i=>{this.Ys.enqueueAndForget(()=>this.Co===e?i():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fg extends hg{constructor(e,i,u,p,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,u,p,w),this.Tt=_}Wo(e,i){return this.connection.yo("Listen",e,i)}onMessage(e){this.ko.reset();const i=function hv(l,e){let i;if("targetChange"in e){const u="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:Ct(),p=e.targetChange.targetIds||[],_=function(B,z){return B.yt?(xt(void 0===z||"string"==typeof z),E.fromBase64String(z||"")):(xt(void 0===z||z instanceof Uint8Array),E.fromUint8Array(z||new Uint8Array))}(l,e.targetChange.resumeToken),w=e.targetChange.cause,O=w&&function(B){const z=void 0===B.code?je.UNKNOWN:Hm(B.code);return new _t(z,B.message||"")}(w);i=new jc(u,p,_,O||null)}else if("documentChange"in e){const u=e.documentChange,p=Ja(l,u.document.name),_=ps(u.document.updateTime),w=u.document.createTime?ps(u.document.createTime):fn.min(),O=new hs({mapValue:{fields:u.document.fields}}),B=Rr.newFoundDocument(p,_,w,O);i=new Ch(u.targetIds||[],u.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const u=e.documentDelete,p=Ja(l,u.document),_=u.readTime?ps(u.readTime):fn.min(),w=Rr.newNoDocument(p,_);i=new Ch([],u.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const u=e.documentRemove,p=Ja(l,u.document);i=new Ch([],u.removedTargetIds||[],p,null)}else{if(!("filter"in e))return Ct();{const u=e.filter,_=new oE(u.count||0);i=new Gc(u.targetId,_)}}var B;return i}(this.Tt,e),u=function(p){if(!("targetChange"in p))return fn.min();const _=p.targetChange;return _.targetIds&&_.targetIds.length?fn.min():_.readTime?ps(_.readTime):fn.min()}(e);return this.listener.Ho(i,u)}Jo(e){const i={};i.database=Lf(this.Tt),i.addTarget=function(p,_){let w;const O=_.target;return w=Iu(O)?{documents:Zm(p,O)}:{query:Gp(p,O)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=Vp(p,_.resumeToken):_.snapshotVersion.compareTo(fn.min())>0&&(w.readTime=Qa(p,_.snapshotVersion.toTimestamp())),w}(this.Tt,e);const u=function lE(l,e){const i=function(u,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ct()}}(0,e.purpose);return null==i?null:{"goog-listen-tags":i}}(0,e);u&&(i.labels=u),this.qo(i)}Yo(e){const i={};i.database=Lf(this.Tt),i.removeTarget=e,this.qo(i)}}class pg extends hg{constructor(e,i,u,p,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,u,p,w),this.Tt=_,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,i){return this.connection.yo("Write",e,i)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const i=function fv(l,e){return l&&l.length>0?(xt(void 0!==e),l.map(i=>function(u,p){let _=ps(u.updateTime?u.updateTime:p);return _.isEqual(fn.min())&&(_=ps(p)),new Fp(_,u.transformResults||[])}(i,e))):[]}(e.writeResults,e.commitTime),u=ps(e.commitTime);return this.listener.eu(u,i)}return xt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Lf(this.Tt),this.qo(e)}tu(e){const i={streamToken:this.lastStreamToken,writes:e.map(u=>Uf(this.Tt,u))};this.qo(i)}}class gg extends class{}{constructor(e,i,u,p){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=u,this.Tt=p,this.iu=!1}ru(){if(this.iu)throw new _t(je.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,i,u){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.connection.lo(e,i,u,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new _t(je.UNKNOWN,p.toString())})}mo(e,i,u,p){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,w])=>this.connection.mo(e,i,u,_,w,p)).catch(_=>{throw"FirebaseError"===_.name?(_.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new _t(je.UNKNOWN,_.toString())})}terminate(){this.iu=!0}}class Pv{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const i=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(vn(i),this.cu=!1):ot("OnlineStateTracker",i)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class gE{constructor(e,i,u,p,_){var w=this;this.localStore=e,this.datastore=i,this.asyncQueue=u,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=_,this.yu.Gr(O=>{u.enqueueAndForget((0,fe.Z)(function*(){var B;Nu(w)&&(ot("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,fe.Z)(function*(z){const ne=kt(z);ne.mu.add(4),yield qd(ne),ne.pu.set("Unknown"),ne.mu.delete(4),yield Kd(ne)}),function(z){return B.apply(this,arguments)})(w))}))}),this.pu=new Pv(u,p)}}function Kd(l){return M_.apply(this,arguments)}function M_(){return M_=(0,fe.Z)(function*(l){if(Nu(l))for(const e of l.gu)yield e(!0)}),M_.apply(this,arguments)}function qd(l){return mg.apply(this,arguments)}function mg(){return mg=(0,fe.Z)(function*(l){for(const e of l.gu)yield e(!1)}),mg.apply(this,arguments)}function _g(l,e){const i=kt(l);i.wu.has(e.targetId)||(i.wu.set(e.targetId,e),Pb(i)?kv(i):Zd(i).Mo()&&Sa(i,e))}function Hh(l,e){const i=kt(l),u=Zd(i);i.wu.delete(e),u.Mo()&&xv(i,e),0===i.wu.size&&(u.Mo()?u.Bo():Nu(i)&&i.pu.set("Unknown"))}function Sa(l,e){l.Iu.Ot(e.targetId),Zd(l).Jo(e)}function xv(l,e){l.Iu.Ot(e),Zd(l).Yo(e)}function kv(l){l.Iu=new es({getRemoteKeysForTarget:e=>l.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>l.wu.get(e)||null}),Zd(l).start(),l.pu.au()}function Pb(l){return Nu(l)&&!Zd(l).$o()&&l.wu.size>0}function Nu(l){return 0===kt(l).mu.size}function Fv(l){l.Iu=void 0}function Lv(l){return R_.apply(this,arguments)}function R_(){return R_=(0,fe.Z)(function*(l){l.wu.forEach((e,i)=>{Sa(l,e)})}),R_.apply(this,arguments)}function xb(l,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,fe.Z)(function*(l,e){Fv(l),Pb(l)?(l.pu.fu(e),kv(l)):l.pu.set("Unknown")}),Jf.apply(this,arguments)}function kb(l,e,i){return P_.apply(this,arguments)}function P_(){return P_=(0,fe.Z)(function*(l,e,i){if(l.pu.set("Online"),e instanceof jc&&2===e.state&&e.cause)try{yield(u=(0,fe.Z)(function*(p,_){const w=_.cause;for(const O of _.targetIds)p.wu.has(O)&&(yield p.remoteSyncer.rejectListen(O,w),p.wu.delete(O),p.Iu.removeTarget(O))}),function(p,_){return u.apply(this,arguments)})(l,e)}catch(u){ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),u),yield Yd(l,u)}else if(e instanceof Ch?l.Iu.Qt(e):e instanceof Gc?l.Iu.Zt(e):l.Iu.Wt(e),!i.isEqual(fn.min()))try{const u=yield Mv(l.localStore);i.compareTo(u)>=0&&(yield function(p,_){const w=p.Iu.ee(_);return w.targetChanges.forEach((O,B)=>{if(O.resumeToken.approximateByteSize()>0){const z=p.wu.get(B);z&&p.wu.set(B,z.withResumeToken(O.resumeToken,_))}}),w.targetMismatches.forEach(O=>{const B=p.wu.get(O);if(!B)return;p.wu.set(O,B.withResumeToken(E.EMPTY_BYTE_STRING,B.snapshotVersion)),xv(p,O);const z=new xd(B.target,O,1,B.sequenceNumber);Sa(p,z)}),p.remoteSyncer.applyRemoteEvent(w)}(l,i))}catch(u){ot("RemoteStore","Failed to raise snapshot:",u),yield Yd(l,u)}var u}),P_.apply(this,arguments)}function Yd(l,e,i){return yg.apply(this,arguments)}function yg(){return yg=(0,fe.Z)(function*(l,e,i){if(!lo(e))throw e;l.mu.add(1),yield qd(l),l.pu.set("Offline"),i||(i=()=>Mv(l.localStore)),l.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){ot("RemoteStore","Retrying IndexedDB access"),yield i(),l.mu.delete(1),yield Kd(l)}))}),yg.apply(this,arguments)}function Uv(l,e){return e().catch(i=>Yd(l,i,e))}function $h(l){return vg.apply(this,arguments)}function vg(){return vg=(0,fe.Z)(function*(l){const e=kt(l),i=Jc(e);let u=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Fb(e);)try{const p=yield Ob(e.localStore,u);if(null===p){0===e._u.length&&i.Bo();break}u=p.batchId,Mu(e,p)}catch(p){yield Yd(e,p)}Xf(e)&&Bv(e)}),vg.apply(this,arguments)}function Fb(l){return Nu(l)&&l._u.length<10}function Mu(l,e){l._u.push(e);const i=Jc(l);i.Mo()&&i.Xo&&i.tu(e.mutations)}function Xf(l){return Nu(l)&&!Jc(l).$o()&&l._u.length>0}function Bv(l){Jc(l).start()}function Lb(l){return bg.apply(this,arguments)}function bg(){return bg=(0,fe.Z)(function*(l){Jc(l).su()}),bg.apply(this,arguments)}function Vv(l){return x_.apply(this,arguments)}function x_(){return x_=(0,fe.Z)(function*(l){const e=Jc(l);for(const i of l._u)e.tu(i.mutations)}),x_.apply(this,arguments)}function Ub(l,e,i){return ep.apply(this,arguments)}function ep(){return ep=(0,fe.Z)(function*(l,e,i){const u=l._u.shift(),p=Zp.from(u,e,i);yield Uv(l,()=>l.remoteSyncer.applySuccessfulWrite(p)),yield $h(l)}),ep.apply(this,arguments)}function Bb(l,e){return k_.apply(this,arguments)}function k_(){return k_=(0,fe.Z)(function*(l,e){var i;e&&Jc(l).Xo&&(yield(i=(0,fe.Z)(function*(u,p){if(jm(_=p.code)&&_!==je.ABORTED){const w=u._u.shift();Jc(u).Fo(),yield Uv(u,()=>u.remoteSyncer.rejectFailedWrite(w.batchId,p)),yield $h(u)}var _}),function(u,p){return i.apply(this,arguments)})(l,e)),Xf(l)&&Bv(l)}),k_.apply(this,arguments)}function zh(l,e){return wg.apply(this,arguments)}function wg(){return wg=(0,fe.Z)(function*(l,e){const i=kt(l);i.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const u=Nu(i);i.mu.add(3),yield qd(i),u&&i.pu.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(e),i.mu.delete(3),yield Kd(i)}),wg.apply(this,arguments)}function tp(l,e){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,fe.Z)(function*(l,e){const i=kt(l);e?(i.mu.delete(2),yield Kd(i)):e||(i.mu.add(2),yield qd(i),i.pu.set("Unknown"))}),Vb.apply(this,arguments)}function Zd(l){return l.Tu||(l.Tu=function(e,i,u){const p=kt(e);return p.ru(),new fg(i,p.connection,p.authCredentials,p.appCheckCredentials,p.Tt,u)}(l.datastore,l.asyncQueue,{Xr:Lv.bind(null,l),no:xb.bind(null,l),Ho:kb.bind(null,l)}),l.gu.push(function(){var e=(0,fe.Z)(function*(i){i?(l.Tu.Fo(),Pb(l)?kv(l):l.pu.set("Unknown")):(yield l.Tu.stop(),Fv(l))});return function(i){return e.apply(this,arguments)}}())),l.Tu}function Jc(l){return l.Eu||(l.Eu=function(e,i,u){const p=kt(e);return p.ru(),new pg(i,p.connection,p.authCredentials,p.appCheckCredentials,p.Tt,u)}(l.datastore,l.asyncQueue,{Xr:Lb.bind(null,l),no:Bb.bind(null,l),nu:Vv.bind(null,l),eu:Ub.bind(null,l)}),l.gu.push(function(){var e=(0,fe.Z)(function*(i){i?(l.Eu.Fo(),yield $h(l)):(yield l.Eu.stop(),l._u.length>0&&(ot("RemoteStore",`Stopping write stream with ${l._u.length} pending writes`),l._u=[]))});return function(i){return e.apply(this,arguments)}}())),l.Eu}class Eg{constructor(e,i,u,p,_){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=u,this.op=p,this.removalCallback=_,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,i,u,p,_){const w=Date.now()+u,O=new Eg(e,i,w,p,_);return O.start(u),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _t(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wh(l,e){if(vn("AsyncQueue",`${e}: ${l}`),lo(l))return new _t(je.UNAVAILABLE,`${e}: ${l}`);throw l}class Kh{constructor(e){this.comparator=e?(i,u)=>e(i,u)||Ht.comparator(i.key,u.key):(i,u)=>Ht.comparator(i.key,u.key),this.keyedMap=Vc(),this.sortedSet=new Ji(this.comparator)}static emptySet(e){return new Kh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,u)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Kh)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),u=e.sortedSet.getIterator();for(;i.hasNext();){const p=i.getNext().key,_=u.getNext().key;if(!p.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){const u=new Kh;return u.comparator=this.comparator,u.keyedMap=e,u.sortedSet=i,u}}class Gv{constructor(){this.Au=new Ji(Ht.comparator)}track(e){const i=e.doc.key,u=this.Au.get(i);u?0!==e.type&&3===u.type?this.Au=this.Au.insert(i,e):3===e.type&&1!==u.type?this.Au=this.Au.insert(i,{type:u.type,doc:e.doc}):2===e.type&&2===u.type?this.Au=this.Au.insert(i,{type:2,doc:e.doc}):2===e.type&&0===u.type?this.Au=this.Au.insert(i,{type:0,doc:e.doc}):1===e.type&&0===u.type?this.Au=this.Au.remove(i):1===e.type&&2===u.type?this.Au=this.Au.insert(i,{type:1,doc:u.doc}):0===e.type&&1===u.type?this.Au=this.Au.insert(i,{type:2,doc:e.doc}):Ct():this.Au=this.Au.insert(i,e)}Ru(){const e=[];return this.Au.inorderTraversal((i,u)=>{e.push(u)}),e}}class Xc{constructor(e,i,u,p,_,w,O,B,z){this.query=e,this.docs=i,this.oldDocs=u,this.docChanges=p,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=O,this.excludesMetadataChanges=B,this.hasCachedResults=z}static fromInitialDocuments(e,i,u,p,_){const w=[];return i.forEach(O=>{w.push({type:0,doc:O})}),new Xc(e,i,Kh.emptySet(i),w,u,p,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,u=e.docChanges;if(i.length!==u.length)return!1;for(let p=0;p<i.length;p++)if(i[p].type!==u[p].type||!i[p].doc.isEqual(u[p].doc))return!1;return!0}}class ed{constructor(){this.Pu=void 0,this.listeners=[]}}class F_{constructor(){this.queries=new nc(e=>A(e),wh),this.onlineState="Unknown",this.vu=new Set}}function np(l,e){return qh.apply(this,arguments)}function qh(){return qh=(0,fe.Z)(function*(l,e){const i=kt(l),u=e.query;let p=!1,_=i.queries.get(u);if(_||(p=!0,_=new ed),p)try{_.Pu=yield i.onListen(u)}catch(w){const O=Wh(w,`Initialization of query '${v(e.query)}' failed`);return void e.onError(O)}i.queries.set(u,_),_.listeners.push(e),e.bu(i.onlineState),_.Pu&&e.Vu(_.Pu)&&jv(i)}),qh.apply(this,arguments)}function Dg(l,e){return L_.apply(this,arguments)}function L_(){return L_=(0,fe.Z)(function*(l,e){const i=kt(l),u=e.query;let p=!1;const _=i.queries.get(u);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),p=0===_.listeners.length)}if(p)return i.queries.delete(u),i.onUnlisten(u)}),L_.apply(this,arguments)}function Gb(l,e){const i=kt(l);let u=!1;for(const p of e){const w=i.queries.get(p.query);if(w){for(const O of w.listeners)O.Vu(p)&&(u=!0);w.Pu=p}}u&&jv(i)}function mE(l,e,i){const u=kt(l),p=u.queries.get(e);if(p)for(const _ of p.listeners)_.onError(i);u.queries.delete(e)}function jv(l){l.vu.forEach(e=>{e.next()})}class Yh{constructor(e,i,u){this.query=e,this.Su=i,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=u||{}}Vu(e){if(!this.options.includeMetadataChanges){const u=[];for(const p of e.docChanges)3!==p.type&&u.push(p);e=new Xc(e.query,e.docs,e.oldDocs,u,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Du?this.xu(e)&&(this.Su.next(e),i=!0):this.Nu(e,this.onlineState)&&(this.ku(e),i=!0),this.Cu=e,i}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let i=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),i=!0),i}Nu(e,i){return!e.fromCache||(!this.options.$u||!("Offline"!==i))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===i)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class _E{constructor(e,i){this.Mu=e,this.byteLength=i}Ou(){return"metadata"in this.Mu}}class yE{constructor(e){this.Tt=e}Zi(e){return Ja(this.Tt,e)}Xi(e){return e.metadata.exists?dv(this.Tt,e.document,!1):Rr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return ps(e)}}class vE{constructor(e,i,u){this.Fu=e,this.localStore=i,this.Tt=u,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=U_(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++i;const u=Wn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(u.get(u.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}Lu(e){const i=new Map,u=new yE(this.Tt);for(const p of e)if(p.metadata.queries){const _=u.Zi(p.metadata.name);for(const w of p.metadata.queries){const O=(i.get(w)||hr()).add(_);i.set(w,O)}}return i}complete(){var e=this;return(0,fe.Z)(function*(){const i=yield function pE(l,e,i,u){return I_.apply(this,arguments)}(e.localStore,new yE(e.Tt),e.documents,e.Fu.id),u=e.Lu(e.documents);for(const p of e.queries)yield Rv(e.localStore,p,u.get(p.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:i}})()}}function U_(l){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes}}class Hv{constructor(e){this.key=e}}class $v{constructor(e){this.key=e}}class Ru{constructor(e,i){this.query=e,this.Ku=i,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=hr(),this.mutatedKeys=hr(),this.ju=q(e),this.zu=new Kh(this.ju)}get Wu(){return this.Ku}Hu(e,i){const u=i?i.Ju:new Gv,p=i?i.zu:this.zu;let _=i?i.mutatedKeys:this.mutatedKeys,w=p,O=!1;const B="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,z="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(e.inorderTraversal((ne,we)=>{const Be=p.get(ne),pt=b(this.query,we)?we:null,Ot=!!Be&&this.mutatedKeys.has(Be.key),Qt=!!pt&&(pt.hasLocalMutations||this.mutatedKeys.has(pt.key)&&pt.hasCommittedMutations);let gn=!1;Be&&pt?Be.data.isEqual(pt.data)?Ot!==Qt&&(u.track({type:3,doc:pt}),gn=!0):this.Yu(Be,pt)||(u.track({type:2,doc:pt}),gn=!0,(B&&this.ju(pt,B)>0||z&&this.ju(pt,z)<0)&&(O=!0)):!Be&&pt?(u.track({type:0,doc:pt}),gn=!0):Be&&!pt&&(u.track({type:1,doc:Be}),gn=!0,(B||z)&&(O=!0)),gn&&(pt?(w=w.add(pt),_=Qt?_.add(ne):_.delete(ne)):(w=w.delete(ne),_=_.delete(ne)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ne="F"===this.query.limitType?w.last():w.first();w=w.delete(ne.key),_=_.delete(ne.key),u.track({type:1,doc:ne})}return{zu:w,Ju:u,Li:O,mutatedKeys:_}}Yu(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,u){const p=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const _=e.Ju.Ru();_.sort((z,ne)=>function(we,Be){const pt=Ot=>{switch(Ot){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return pt(we)-pt(Be)}(z.type,ne.type)||this.ju(z.doc,ne.doc)),this.Zu(u);const w=i?this.Xu():[],O=0===this.Qu.size&&this.current?1:0,B=O!==this.Gu;return this.Gu=O,0!==_.length||B?{snapshot:new Xc(this.query,e.zu,p,_,e.mutatedKeys,0===O,B,!1,!!u&&u.resumeToken.approximateByteSize()>0),tc:w}:{tc:w}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Gv,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(i=>this.Ku=this.Ku.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Ku=this.Ku.delete(i)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=hr(),this.zu.forEach(u=>{this.ec(u.key)&&(this.Qu=this.Qu.add(u.key))});const i=[];return e.forEach(u=>{this.Qu.has(u)||i.push(new $v(u))}),this.Qu.forEach(u=>{e.has(u)||i.push(new Hv(u))}),i}nc(e){this.Ku=e.Yi,this.Qu=hr();const i=this.Hu(e.documents);return this.applyChanges(i,!0)}sc(){return Xc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class hc{constructor(e,i,u){this.query=e,this.targetId=i,this.view=u}}class jb{constructor(e){this.key=e,this.ic=!1}}class Aa{constructor(e,i,u,p,_,w){this.localStore=e,this.remoteStore=i,this.eventManager=u,this.sharedClientState=p,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.rc={},this.oc=new nc(O=>A(O),wh),this.uc=new Map,this.cc=new Set,this.ac=new Ji(Ht.comparator),this.hc=new Map,this.lc=new uc,this.fc={},this.dc=new Map,this._c=kh.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Ig(l,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,fe.Z)(function*(l,e){const i=Rg(l);let u,p;const _=i.oc.get(e);if(_)u=_.targetId,i.sharedClientState.addLocalQueryTarget(u),p=_.view.sc();else{const w=yield jd(i.localStore,Ps(e));i.isPrimaryClient&&_g(i.remoteStore,w);const O=i.sharedClientState.addLocalQueryTarget(w.targetId);u=w.targetId,p=yield Ll(i,e,u,"current"===O,w.resumeToken)}return p}),Qd.apply(this,arguments)}function Ll(l,e,i,u,p){return le.apply(this,arguments)}function le(){return le=(0,fe.Z)(function*(l,e,i,u,p){l.mc=(we,Be,pt)=>{return(Ot=(0,fe.Z)(function*(Qt,gn,di,ss){let fr=gn.view.Hu(di);fr.Li&&(fr=yield Qc(Qt.localStore,gn.query,!1).then(({documents:Gr})=>gn.view.Hu(Gr,fr)));const os=ss&&ss.targetChanges.get(gn.targetId),wr=gn.view.applyChanges(fr,Qt.isPrimaryClient,os);return Io(Qt,gn.targetId,wr.tc),wr.snapshot}),function(Qt,gn,di,ss){return Ot.apply(this,arguments)})(l,we,Be,pt);var Ot};const _=yield Qc(l.localStore,e,!0),w=new Ru(e,_.Yi),O=w.Hu(_.documents),B=fs.createSynthesizedTargetChangeForCurrentChange(i,u&&"Offline"!==l.onlineState,p),z=w.applyChanges(O,l.isPrimaryClient,B);Io(l,i,z.tc);const ne=new hc(e,i,w);return l.oc.set(e,ne),l.uc.has(i)?l.uc.get(i).push(e):l.uc.set(i,[e]),z.snapshot}),le.apply(this,arguments)}function Jd(l,e){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,fe.Z)(function*(l,e){const i=kt(l),u=i.oc.get(e),p=i.uc.get(u.targetId);if(p.length>1)return i.uc.set(u.targetId,p.filter(_=>!wh(_,e))),void i.oc.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(u.targetId),i.sharedClientState.isActiveQueryTarget(u.targetId)||(yield tl(i.localStore,u.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(u.targetId),Hh(i.remoteStore,u.targetId),Oa(i,u.targetId)}).catch(oo))):(Oa(i,u.targetId),yield tl(i.localStore,u.targetId,!0))}),Cg.apply(this,arguments)}function B_(){return B_=(0,fe.Z)(function*(l,e,i){const u=Pg(l);try{const p=yield function(_,w){const O=kt(_),B=ir.now(),z=w.reduce((Be,pt)=>Be.add(pt.key),hr());let ne,we;return O.persistence.runTransaction("Locally write mutations","readwrite",Be=>{let pt=Ca(),Ot=hr();return O.ji.getEntries(Be,z).next(Qt=>{pt=Qt,pt.forEach((gn,di)=>{di.isValidDocument()||(Ot=Ot.add(gn))})}).next(()=>O.localDocuments.getOverlayedDocuments(Be,pt)).next(Qt=>{ne=Qt;const gn=[];for(const di of w){const ss=Um(di,ne.get(di.key).overlayedDocument);null!=ss&&gn.push(new Tu(di.key,ss,Af(ss.value.mapValue),Mi.exists(!0)))}return O.mutationQueue.addMutationBatch(Be,B,gn,w)}).next(Qt=>{we=Qt;const gn=Qt.applyToLocalDocumentSet(ne,Ot);return O.documentOverlayCache.saveOverlays(Be,Qt.batchId,gn)})}).then(()=>({batchId:we.batchId,changes:zm(ne)}))}(u.localStore,e);u.sharedClientState.addPendingMutation(p.batchId),function(_,w,O){let B=_.fc[_.currentUser.toKey()];B||(B=new Ji(Mn)),B=B.insert(w,O),_.fc[_.currentUser.toKey()]=B}(u,p.batchId,i),yield Qs(u,p.changes),yield $h(u.remoteStore)}catch(p){const _=Wh(p,"Failed to persist write");i.reject(_)}}),B_.apply(this,arguments)}function Wv(l,e){return V_.apply(this,arguments)}function V_(){return V_=(0,fe.Z)(function*(l,e){const i=kt(l);try{const u=yield function Ab(l,e){const i=kt(l),u=e.snapshotVersion;let p=i.Ki;return i.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=i.ji.newChangeBuffer({trackRemovals:!0});p=i.Ki;const O=[];e.targetChanges.forEach((ne,we)=>{const Be=p.get(we);if(!Be)return;O.push(i.Ns.removeMatchingKeys(_,ne.removedDocuments,we).next(()=>i.Ns.addMatchingKeys(_,ne.addedDocuments,we)));let pt=Be.withSequenceNumber(_.currentSequenceNumber);var Ot,Qt,gn;e.targetMismatches.has(we)?pt=pt.withResumeToken(E.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):ne.resumeToken.approximateByteSize()>0&&(pt=pt.withResumeToken(ne.resumeToken,u)),p=p.insert(we,pt),Qt=pt,gn=ne,(0===(Ot=Be).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-Ot.snapshotVersion.toMicroseconds()>=3e8||gn.addedDocuments.size+gn.modifiedDocuments.size+gn.removedDocuments.size>0)&&O.push(i.Ns.updateTargetData(_,pt))});let B=Ca(),z=hr();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&O.push(i.persistence.referenceDelegate.updateLimboDocument(_,ne))}),O.push(ug(_,w,e.documentUpdates).next(ne=>{B=ne.Hi,z=ne.Ji})),!u.isEqual(fn.min())){const ne=i.Ns.getLastRemoteSnapshotVersion(_).next(we=>i.Ns.setTargetsMetadata(_,_.currentSequenceNumber,u));O.push(ne)}return qe.waitFor(O).next(()=>w.apply(_)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,B,z)).next(()=>B)}).then(_=>(i.Ki=p,_))}(i.localStore,e);e.targetChanges.forEach((p,_)=>{const w=i.hc.get(_);w&&(xt(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?w.ic=!0:p.modifiedDocuments.size>0?xt(w.ic):p.removedDocuments.size>0&&(xt(w.ic),w.ic=!1))}),yield Qs(i,u,e)}catch(u){yield oo(u)}}),V_.apply(this,arguments)}function Gi(l,e,i){const u=kt(l);if(u.isPrimaryClient&&0===i||!u.isPrimaryClient&&1===i){const p=[];u.oc.forEach((_,w)=>{const O=w.view.bu(e);O.snapshot&&p.push(O.snapshot)}),function(_,w){const O=kt(_);O.onlineState=w;let B=!1;O.queries.forEach((z,ne)=>{for(const we of ne.listeners)we.bu(w)&&(B=!0)}),B&&jv(O)}(u.eventManager,e),p.length&&u.rc.Ho(p),u.onlineState=e,u.isPrimaryClient&&u.sharedClientState.setOnlineState(e)}}function Si(l,e,i){return rp.apply(this,arguments)}function rp(){return rp=(0,fe.Z)(function*(l,e,i){const u=kt(l);u.sharedClientState.updateQueryState(e,"rejected",i);const p=u.hc.get(e),_=p&&p.key;if(_){let w=new Ji(Ht.comparator);w=w.insert(_,Rr.newNoDocument(_,fn.min()));const O=hr().add(_),B=new Bp(fn.min(),new Map,new ci(Mn),w,O);yield Wv(u,B),u.ac=u.ac.remove(_),u.hc.delete(e),Xh(u)}else yield tl(u.localStore,e,!1).then(()=>Oa(u,e,i)).catch(oo)}),rp.apply(this,arguments)}function Kv(l,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,fe.Z)(function*(l,e){const i=kt(l),u=e.batch.batchId;try{const p=yield function BD(l,e){const i=kt(l);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const p=e.batch.keys(),_=i.ji.newChangeBuffer({trackRemovals:!0});return function(w,O,B,z){const ne=B.batch,we=ne.keys();let Be=qe.resolve();return we.forEach(pt=>{Be=Be.next(()=>z.getEntry(O,pt)).next(Ot=>{const Qt=B.docVersions.get(pt);xt(null!==Qt),Ot.version.compareTo(Qt)<0&&(ne.applyToRemoteDocument(Ot,B),Ot.isValidDocument()&&(Ot.setReadTime(B.commitVersion),z.addEntry(Ot)))})}),Be.next(()=>w.mutationQueue.removeMutationBatch(O,ne))}(i,u,e,_).next(()=>_.apply(u)).next(()=>i.mutationQueue.performConsistencyCheck(u)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(u,p,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,function(w){let O=hr();for(let B=0;B<w.mutationResults.length;++B)w.mutationResults[B].transformResults.length>0&&(O=O.add(w.batch.mutations[B].key));return O}(e))).next(()=>i.localDocuments.getDocuments(u,p))})}(i.localStore,e);Sg(i,u,null),Qh(i,u),i.sharedClientState.updateMutationState(u,"acknowledged"),yield Qs(i,p)}catch(p){yield oo(p)}}),Tg.apply(this,arguments)}function bE(l,e,i){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,fe.Z)(function*(l,e,i){const u=kt(l);try{const p=yield function(_,w){const O=kt(_);return O.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let z;return O.mutationQueue.lookupMutationBatch(B,w).next(ne=>(xt(null!==ne),z=ne.keys(),O.mutationQueue.removeMutationBatch(B,ne))).next(()=>O.mutationQueue.performConsistencyCheck(B)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(B,z,w)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,z)).next(()=>O.localDocuments.getDocuments(B,z))})}(u.localStore,e);Sg(u,e,i),Qh(u,e),u.sharedClientState.updateMutationState(e,"rejected",i),yield Qs(u,p)}catch(p){yield oo(p)}}),Zh.apply(this,arguments)}function G_(){return G_=(0,fe.Z)(function*(l,e){const i=kt(l);Nu(i.remoteStore)||ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const u=yield function(_){const w=kt(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>w.mutationQueue.getHighestUnacknowledgedBatchId(O))}(i.localStore);if(-1===u)return void e.resolve();const p=i.dc.get(u)||[];p.push(e),i.dc.set(u,p)}catch(u){const p=Wh(u,"Initialization of waitForPendingWrites() operation failed");e.reject(p)}}),G_.apply(this,arguments)}function Qh(l,e){(l.dc.get(e)||[]).forEach(i=>{i.resolve()}),l.dc.delete(e)}function Sg(l,e,i){const u=kt(l);let p=u.fc[u.currentUser.toKey()];if(p){const _=p.get(e);_&&(i?_.reject(i):_.resolve(),p=p.remove(e)),u.fc[u.currentUser.toKey()]=p}}function Oa(l,e,i=null){l.sharedClientState.removeLocalQueryTarget(e);for(const u of l.uc.get(e))l.oc.delete(u),i&&l.rc.gc(u,i);l.uc.delete(e),l.isPrimaryClient&&l.lc.ds(e).forEach(u=>{l.lc.containsKey(u)||Jh(l,u)})}function Jh(l,e){l.cc.delete(e.path.canonicalString());const i=l.ac.get(e);null!==i&&(Hh(l.remoteStore,i),l.ac=l.ac.remove(e),l.hc.delete(i),Xh(l))}function Io(l,e,i){for(const u of i)u instanceof Hv?(l.lc.addReference(u.key,e),td(l,u)):u instanceof $v?(ot("SyncEngine","Document no longer in limbo: "+u.key),l.lc.removeReference(u.key,e),l.lc.containsKey(u.key)||Jh(l,u.key)):Ct()}function td(l,e){const i=e.key,u=i.path.canonicalString();l.ac.get(i)||l.cc.has(u)||(ot("SyncEngine","New document in limbo: "+i),l.cc.add(u),Xh(l))}function Xh(l){for(;l.cc.size>0&&l.ac.size<l.maxConcurrentLimboResolutions;){const e=l.cc.values().next().value;l.cc.delete(e);const i=new Ht(Wn.fromString(e)),u=l._c.next();l.hc.set(u,new jb(i)),l.ac=l.ac.insert(i,u),_g(l.remoteStore,new xd(Ps(tc(i.path)),u,2,Ms.at))}}function Qs(l,e,i){return ip.apply(this,arguments)}function ip(){return ip=(0,fe.Z)(function*(l,e,i){const u=kt(l),p=[],_=[],w=[];var O;u.oc.isEmpty()||(u.oc.forEach((O,B)=>{w.push(u.mc(B,e,i).then(z=>{if((z||i)&&u.isPrimaryClient&&u.sharedClientState.updateQueryState(B.targetId,z?.fromCache?"not-current":"current"),z){p.push(z);const ne=Zc.Ni(B.targetId,z);_.push(ne)}}))}),yield Promise.all(w),u.rc.Ho(p),yield(O=(0,fe.Z)(function*(B,z){const ne=kt(B);try{yield ne.persistence.runTransaction("notifyLocalViewChanges","readwrite",we=>qe.forEach(z,Be=>qe.forEach(Be.Ci,pt=>ne.persistence.referenceDelegate.addReference(we,Be.targetId,pt)).next(()=>qe.forEach(Be.xi,pt=>ne.persistence.referenceDelegate.removeReference(we,Be.targetId,pt)))))}catch(we){if(!lo(we))throw we;ot("LocalStore","Failed to update sequence numbers: "+we)}for(const we of z){const Be=we.targetId;if(!we.fromCache){const pt=ne.Ki.get(Be),Qt=pt.withLastLimboFreeSnapshotVersion(pt.snapshotVersion);ne.Ki=ne.Ki.insert(Be,Qt)}}}),function(B,z){return O.apply(this,arguments)})(u.localStore,_))}),ip.apply(this,arguments)}function su(l,e){return fc.apply(this,arguments)}function fc(){return fc=(0,fe.Z)(function*(l,e){const i=kt(l);if(!i.currentUser.isEqual(e)){ot("SyncEngine","User change. New user:",e.toKey());const u=yield Tb(i.localStore,e);i.currentUser=e,(p=i).dc.forEach(w=>{w.forEach(O=>{O.reject(new _t(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.dc.clear(),i.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),yield Qs(i,u.Wi)}var p}),fc.apply(this,arguments)}function Xd(l,e){const i=kt(l),u=i.hc.get(e);if(u&&u.ic)return hr().add(u.key);{let p=hr();const _=i.uc.get(e);if(!_)return p;for(const w of _){const O=i.oc.get(w);p=p.unionWith(O.view.Wu)}return p}}function Pu(l,e){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,fe.Z)(function*(l,e){const i=kt(l),u=yield Qc(i.localStore,e.query,!0),p=e.view.nc(u);return i.isPrimaryClient&&Io(i,e.targetId,p.tc),p}),Ul.apply(this,arguments)}function ks(l,e){return nd.apply(this,arguments)}function nd(){return nd=(0,fe.Z)(function*(l,e){const i=kt(l);return D_(i.localStore,e).then(u=>Qs(i,u))}),nd.apply(this,arguments)}function ef(l,e,i,u){return rd.apply(this,arguments)}function rd(){return rd=(0,fe.Z)(function*(l,e,i,u){const p=kt(l),_=yield function(w,O){const B=kt(w),z=kt(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ne=>z.An(ne,O).next(we=>we?B.localDocuments.getDocuments(ne,we):qe.resolve(null)))}(p.localStore,e);var O;null!==_?("pending"===i?yield $h(p.remoteStore):"acknowledged"===i||"rejected"===i?(Sg(p,e,u||null),Qh(p,e),O=e,kt(kt(p.localStore).mutationQueue).Pn(O)):Ct(),yield Qs(p,_)):ot("SyncEngine","Cannot apply mutation batch with id: "+e)}),rd.apply(this,arguments)}function Ag(){return Ag=(0,fe.Z)(function*(l,e){const i=kt(l);if(Rg(i),Pg(i),!0===e&&!0!==i.wc){const u=i.sharedClientState.getAllActiveQueryTargets(),p=yield j_(i,u.toArray());i.wc=!0,yield tp(i.remoteStore,!0);for(const _ of p)_g(i.remoteStore,_)}else if(!1===e&&!1!==i.wc){const u=[];let p=Promise.resolve();i.uc.forEach((_,w)=>{i.sharedClientState.isLocalQueryTarget(w)?u.push(w):p=p.then(()=>(Oa(i,w),tl(i.localStore,w,!0))),Hh(i.remoteStore,w)}),yield p,yield j_(i,u),function(_){const w=kt(_);w.hc.forEach((O,B)=>{Hh(w.remoteStore,B)}),w.lc._s(),w.hc=new Map,w.ac=new Ji(Ht.comparator)}(i),i.wc=!1,yield tp(i.remoteStore,!1)}}),Ag.apply(this,arguments)}function j_(l,e,i){return eh.apply(this,arguments)}function eh(){return eh=(0,fe.Z)(function*(l,e,i){const u=kt(l),p=[],_=[];for(const w of e){let O;const B=u.uc.get(w);if(B&&0!==B.length){O=yield jd(u.localStore,Ps(B[0]));for(const z of B){const ne=u.oc.get(z),we=yield Pu(u,ne);we.snapshot&&_.push(we.snapshot)}}else{const z=yield cg(u.localStore,w);O=yield jd(u.localStore,z),yield Ll(u,Og(z),w,!1,O.resumeToken)}p.push(O)}return u.rc.Ho(_),p}),eh.apply(this,arguments)}function Og(l){return kp(l.path,l.collectionGroup,l.orderBy,l.filters,l.limit,"F",l.startAt,l.endAt)}function Ng(l){const e=kt(l);return kt(kt(e.localStore).persistence).Si()}function Mg(l,e,i,u){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,fe.Z)(function*(l,e,i,u){const p=kt(l);if(p.wc)return void ot("SyncEngine","Ignoring unexpected query state notification.");const _=p.uc.get(e);if(_&&_.length>0)switch(i){case"current":case"not-current":{const w=yield D_(p.localStore,M(_[0])),O=Bp.createSynthesizedRemoteEventForCurrentChange(e,"current"===i,E.EMPTY_BYTE_STRING);yield Qs(p,w,O);break}case"rejected":yield tl(p.localStore,e,!0),Oa(p,e,u);break;default:Ct()}}),Bl.apply(this,arguments)}function H_(l,e,i){return xu.apply(this,arguments)}function xu(){return xu=(0,fe.Z)(function*(l,e,i){const u=Rg(l);if(u.wc){for(const p of e){if(u.uc.has(p)){ot("SyncEngine","Adding an already active target "+p);continue}const _=yield cg(u.localStore,p),w=yield jd(u.localStore,_);yield Ll(u,Og(_),w.targetId,!1,w.resumeToken),_g(u.remoteStore,w)}for(const p of i)u.uc.has(p)&&(yield tl(u.localStore,p,!1).then(()=>{Hh(u.remoteStore,p),Oa(u,p)}).catch(oo))}}),xu.apply(this,arguments)}function Rg(l){const e=kt(l);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Si.bind(null,e),e.rc.Ho=Gb.bind(null,e.eventManager),e.rc.gc=mE.bind(null,e.eventManager),e}function Pg(l){const e=kt(l);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bE.bind(null,e),e}class $_{constructor(){this.synchronizeTabs=!1}initialize(e){var i=this;return(0,fe.Z)(function*(){i.Tt=zd(e.databaseInfo.databaseId),i.sharedClientState=i.Ic(e),i.persistence=i.Tc(e),yield i.persistence.start(),i.localStore=i.Ec(e),i.gcScheduler=i.Ac(e,i.localStore),i.indexBackfillerScheduler=i.Rc(e,i.localStore)})()}Ac(e,i){return null}Rc(e,i){return null}Ec(e){return w_(this.persistence,new Cb,e.initialUser,this.Tt)}Tc(e){return new y_(ag.qs,this.Tt)}Ic(e){return new Nb}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kg extends $_{constructor(e,i,u){super(),this.Pc=e,this.cacheSizeBytes=i,this.forceOwnership=u,this.synchronizeTabs=!1}initialize(e){var i=()=>super.initialize,u=this;return(0,fe.Z)(function*(){yield i().call(u,e),yield u.Pc.initialize(u,e),yield Pg(u.Pc.syncEngine),yield $h(u.Pc.remoteStore),yield u.persistence.di(()=>(u.gcScheduler&&!u.gcScheduler.started&&u.gcScheduler.start(),u.indexBackfillerScheduler&&!u.indexBackfillerScheduler.started&&u.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return w_(this.persistence,new Cb,e.initialUser,this.Tt)}Ac(e,i){return new Fl(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,i)}Rc(e,i){const u=new Rl(i,this.persistence);return new hl(e.asyncQueue,u)}Tc(e){const i=b_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Ta.withCacheSize(this.cacheSizeBytes):Ta.DEFAULT;return new Ov(this.synchronizeTabs,i,e.clientId,u,e.asyncQueue,O_(),dc(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Nb}}class z_ extends kg{constructor(e,i){super(e,i,!1),this.Pc=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){var i=()=>super.initialize,u=this;return(0,fe.Z)(function*(){yield i().call(u,e);const p=u.Pc.syncEngine;u.sharedClientState instanceof dg&&(u.sharedClientState.syncEngine={Br:ef.bind(null,p),Lr:Mg.bind(null,p),qr:H_.bind(null,p),Si:Ng.bind(null,p),Fr:ks.bind(null,p)},yield u.sharedClientState.start()),yield u.persistence.di(function(){var _=(0,fe.Z)(function*(w){yield function qv(l,e){return Ag.apply(this,arguments)}(u.Pc.syncEngine,w),u.gcScheduler&&(w&&!u.gcScheduler.started?u.gcScheduler.start():w||u.gcScheduler.stop()),u.indexBackfillerScheduler&&(w&&!u.indexBackfillerScheduler.started?u.indexBackfillerScheduler.start():w||u.indexBackfillerScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}Ic(e){const i=O_();if(!dg.C(i))throw new _t(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const u=b_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dg(i,e.asyncQueue,u,e.clientId,e.initialUser)}}class W_{initialize(e,i){var u=this;return(0,fe.Z)(function*(){u.localStore||(u.localStore=e.localStore,u.sharedClientState=e.sharedClientState,u.datastore=u.createDatastore(i),u.remoteStore=u.createRemoteStore(i),u.eventManager=u.createEventManager(i),u.syncEngine=u.createSyncEngine(i,!e.synchronizeTabs),u.sharedClientState.onlineStateHandler=p=>Gi(u.syncEngine,p,1),u.remoteStore.remoteSyncer.handleCredentialChange=su.bind(null,u.syncEngine),yield tp(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(e){return new F_}createDatastore(e){const i=zd(e.databaseInfo.databaseId),u=new $d(e.databaseInfo);return new gg(e.authCredentials,e.appCheckCredentials,u,i)}createRemoteStore(e){return i=this.localStore,u=this.datastore,p=e.asyncQueue,_=O=>Gi(this.syncEngine,O,0),w=Zf.C()?new Zf:new Hd,new gE(i,u,p,_,w);var i,u,p,_,w}createSyncEngine(e,i){return function(u,p,_,w,O,B,z){const ne=new Aa(u,p,_,w,O,B);return z&&(ne.wc=!0),ne}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return(e=(0,fe.Z)(function*(i){const u=kt(i);ot("RemoteStore","RemoteStore shutting down."),u.mu.add(5),yield qd(u),u.yu.shutdown(),u.pu.set("Unknown")}),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function sp(l,e=10240){let i=0;return{read:()=>(0,fe.Z)(function*(){if(i<l.byteLength){const u={value:l.slice(i,i+e),done:!1};return i+=e,u}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class th{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}class K_{constructor(e,i){this.Vc=e,this.Tt=i,this.metadata=new Tr,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(u=>{u&&u.Ou()?this.metadata.resolve(u.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(u?.Mu)}`))},u=>this.metadata.reject(u))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,fe.Z)(function*(){const i=yield e.Cc();if(null===i)return null;const u=e.Sc.decode(i),p=Number(u);isNaN(p)&&e.xc(`length string (${u}) is not valid number`);const _=yield e.Nc(p);return new _E(JSON.parse(_),i.length+p)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,fe.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const i=e.kc();i<0&&e.xc("Reached the end of bundle when a length string is expected.");const u=e.buffer.slice(0,i);return e.buffer=e.buffer.slice(i),u})()}Nc(e){var i=this;return(0,fe.Z)(function*(){for(;i.buffer.length<e;)(yield i.$c())&&i.xc("Reached the end of bundle when more is expected.");const u=i.Sc.decode(i.buffer.slice(0,e));return i.buffer=i.buffer.slice(e),u})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,fe.Z)(function*(){const i=yield e.Vc.read();if(!i.done){const u=new Uint8Array(e.buffer.length+i.value.length);u.set(e.buffer),u.set(i.value,e.buffer.length),e.buffer=u}return i.done})()}}class $b{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var i=this;return(0,fe.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new _t(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield(p=(0,fe.Z)(function*(_,w){const O=kt(_),B=Lf(O.Tt)+"/documents",z={documents:w.map(pt=>Ff(O.Tt,pt))},ne=yield O.mo("BatchGetDocuments",B,z,w.length),we=new Map;ne.forEach(pt=>{const Ot=function aE(l,e){return"found"in e?function(i,u){xt(!!u.found);const p=Ja(i,u.found.name),_=ps(u.found.updateTime),w=u.found.createTime?ps(u.found.createTime):fn.min(),O=new hs({mapValue:{fields:u.found.fields}});return Rr.newFoundDocument(p,_,w,O)}(l,e):"missing"in e?function(i,u){xt(!!u.missing),xt(!!u.readTime);const p=Ja(i,u.missing),_=ps(u.readTime);return Rr.newNoDocument(p,_)}(l,e):Ct()}(O.Tt,pt);we.set(Ot.key.toString(),Ot)});const Be=[];return w.forEach(pt=>{const Ot=we.get(pt.toString());xt(!!Ot),Be.push(Ot)}),Be}),function(_,w){return p.apply(this,arguments)})(i.datastore,e);var p;return u.forEach(p=>i.recordVersion(p)),u})()}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(e.toString())}delete(e){this.write(new Md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;var u;e.mutations.forEach(u=>{i.delete(u.key.toString())}),i.forEach((u,p)=>{const _=Ht.fromPath(p);e.mutations.push(new Gm(_,e.precondition(_)))}),yield(u=(0,fe.Z)(function*(p,_){const w=kt(p),O=Lf(w.Tt)+"/documents",B={writes:_.map(z=>Uf(w.Tt,z))};yield w.lo("Commit",O,B)}),function(p,_){return u.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw Ct();i=fn.min()}const u=this.readVersions.get(e.key.toString());if(u){if(!i.isEqual(u))throw new _t(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){const i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?i.isEqual(fn.min())?Mi.exists(!1):Mi.updateTime(i):Mi.none()}preconditionForUpdate(e){const i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(fn.min()))throw new _t(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mi.updateTime(i)}return Mi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Fg{constructor(e,i,u,p,_){this.asyncQueue=e,this.datastore=i,this.options=u,this.updateFunction=p,this.deferred=_,this.Mc=u.maxAttempts,this.ko=new Wd(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,fe.Z)(function*(){const i=new $b(e.datastore),u=e.Fc(i);u&&u.then(p=>{e.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{e.deferred.resolve(p)}).catch(_=>{e.Bc(_)}))}).catch(p=>{e.Bc(p)})}))}Fc(e){try{const i=this.updateFunction(e);return!Oi(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const i=e.code;return"aborted"===i||"failed-precondition"===i||"already-exists"===i||!jm(i)}return!1}}class fa{constructor(e,i,u,p){var _=this;this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=u,this.databaseInfo=p,this.user=ce.UNAUTHENTICATED,this.clientId=Ol.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(u,function(){var w=(0,fe.Z)(function*(O){ot("FirestoreClient","Received user=",O.uid),yield _.authCredentialListener(O),_.user=O});return function(O){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(u,w=>(ot("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const i=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),i.resolve()}catch(u){const p=Wh(u,"Failed to shutdown persistence");i.reject(p)}})),i.promise}}function op(l,e){return tf.apply(this,arguments)}function tf(){return tf=(0,fe.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const i=yield l.getConfiguration();yield e.initialize(i);let u=i.initialUser;l.setCredentialChangeListener(function(){var p=(0,fe.Z)(function*(_){u.isEqual(_)||(yield Tb(e.localStore,_),u=_)});return function(_){return p.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>l.terminate()),l.offlineComponents=e}),tf.apply(this,arguments)}function ap(l,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,fe.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress();const i=yield lp(l);ot("FirestoreClient","Initializing OnlineComponentProvider");const u=yield l.getConfiguration();yield e.initialize(i,u),l.setCredentialChangeListener(p=>zh(e.remoteStore,p)),l.setAppCheckTokenChangeListener((p,_)=>zh(e.remoteStore,_)),l.onlineComponents=e}),Lg.apply(this,arguments)}function lp(l){return nf.apply(this,arguments)}function nf(){return nf=(0,fe.Z)(function*(l){return l.offlineComponents||(ot("FirestoreClient","Using default OfflineComponentProvider"),yield op(l,new $_)),l.offlineComponents}),nf.apply(this,arguments)}function up(l){return q_.apply(this,arguments)}function q_(){return q_=(0,fe.Z)(function*(l){return l.onlineComponents||(ot("FirestoreClient","Using default OnlineComponentProvider"),yield ap(l,new W_)),l.onlineComponents}),q_.apply(this,arguments)}function Y_(l){return lp(l).then(e=>e.persistence)}function nl(l){return lp(l).then(e=>e.localStore)}function rf(l){return up(l).then(e=>e.remoteStore)}function Ug(l){return up(l).then(e=>e.syncEngine)}function id(l){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,fe.Z)(function*(l){const e=yield up(l),i=e.eventManager;return i.onListen=Ig.bind(null,e.syncEngine),i.onUnlisten=Jd.bind(null,e.syncEngine),i}),Bg.apply(this,arguments)}function rh(l,e,i={}){const u=new Tr;return l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(p,_,w,O,B){const z=new th({next:we=>{_.enqueueAndForget(()=>Dg(p,ne));const Be=we.docs.has(w);!Be&&we.fromCache?B.reject(new _t(je.UNAVAILABLE,"Failed to get document because the client is offline.")):Be&&we.fromCache&&O&&"server"===O.source?B.reject(new _t(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(we)},error:we=>B.reject(we)}),ne=new Yh(tc(w.path),z,{includeMetadataChanges:!0,$u:!0});return np(p,ne)}(yield id(l),l.asyncQueue,e,i,u)})),u.promise}function Z_(l,e,i={}){const u=new Tr;return l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(p,_,w,O,B){const z=new th({next:we=>{_.enqueueAndForget(()=>Dg(p,ne)),we.fromCache&&"server"===O.source?B.reject(new _t(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(we)},error:we=>B.reject(we)}),ne=new Yh(w,z,{includeMetadataChanges:!0,$u:!0});return np(p,ne)}(yield id(l),l.asyncQueue,e,i,u)})),u.promise}const Gg=new Map;function ih(l,e,i){if(!i)throw new _t(je.INVALID_ARGUMENT,`Function ${l}() cannot be called with an empty ${e}.`)}function pc(l,e,i,u){if(!0===e&&!0===u)throw new _t(je.INVALID_ARGUMENT,`${l} and ${i} cannot be used together.`)}function Xv(l){if(!Ht.isDocumentKey(l))throw new _t(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${l} has ${l.length}.`)}function ou(l){if(Ht.isDocumentKey(l))throw new _t(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${l} has ${l.length}.`)}function Na(l){if(void 0===l)return"undefined";if(null===l)return"null";if("string"==typeof l)return l.length>20&&(l=`${l.substring(0,20)}...`),JSON.stringify(l);if("number"==typeof l||"boolean"==typeof l)return""+l;if("object"==typeof l){if(l instanceof Array)return"an array";{const e=(i=l).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof l?"a function":Ct()}function er(l,e){if("_delegate"in l&&(l=l._delegate),!(l instanceof e)){if(e.name===l.constructor.name)throw new _t(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Na(l);throw new _t(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return l}function jg(l,e){if(e<=0)throw new _t(je.INVALID_ARGUMENT,`Function ${l}() requires a positive number, but it was: ${e}.`)}class e0{constructor(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new _t(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _t(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vl{constructor(e,i,u,p){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=u,this._app=p,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _t(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e0(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new $a;switch(i.type){case"gapi":return new yd(i.client,i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _t(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Gg.get(e);i&&(ot("ComponentProvider","Removing Datastore"),Gg.delete(e),i.terminate())}(this),Promise.resolve()}}class ji{constructor(e,i,u){this.converter=i,this._key=u,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ji(this.firestore,e,this._key)}}class Ho{constructor(e,i,u){this.converter=i,this._query=u,this.type="query",this.firestore=e}withConverter(e){return new Ho(this.firestore,e,this._query)}}class au extends Ho{constructor(e,i,u){super(e,i,tc(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ji(this.firestore,null,new Ht(e))}withConverter(e){return new au(this.firestore,e,this._path)}}function J_(l,e,...i){if(l=(0,Ye.m9)(l),ih("collection","path",e),l instanceof Vl){const u=Wn.fromString(e,...i);return ou(u),new au(l,null,u)}{if(!(l instanceof ji||l instanceof au))throw new _t(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=l._path.child(Wn.fromString(e,...i));return ou(u),new au(l.firestore,null,u)}}function _s(l,e,...i){if(l=(0,Ye.m9)(l),1===arguments.length&&(e=Ol.R()),ih("doc","path",e),l instanceof Vl){const u=Wn.fromString(e,...i);return Xv(u),new ji(l,null,new Ht(u))}{if(!(l instanceof ji||l instanceof au))throw new _t(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=l._path.child(Wn.fromString(e,...i));return Xv(u),new ji(l.firestore,l instanceof au?l.converter:null,new Ht(u))}}function X_(l,e){return l=(0,Ye.m9)(l),e=(0,Ye.m9)(e),(l instanceof ji||l instanceof au)&&(e instanceof ji||e instanceof au)&&l.firestore===e.firestore&&l.path===e.path&&l.converter===e.converter}function Hg(l,e){return l=(0,Ye.m9)(l),e=(0,Ye.m9)(e),l instanceof Ho&&e instanceof Ho&&l.firestore===e.firestore&&wh(l._query,e._query)&&l.converter===e.converter}class t0{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Wd(this,"async_queue_retry"),this.Hc=()=>{const i=dc();i&&ot("AsyncQueue","Visibility state changed to "+i.visibilityState),this.ko.Vo()};const e=dc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const i=dc();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const i=new Tr;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(i){if(!lo(i))throw i;ot("AsyncQueue","Operation failed with retryable error: "+i)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const i=this.qc.then(()=>(this.jc=!0,e().catch(u=>{throw this.Qc=u,this.jc=!1,vn("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(u)),u}).then(u=>(this.jc=!1,u))));return this.qc=i,i}enqueueAfterDelay(e,i,u){this.Jc(),this.Wc.indexOf(e)>-1&&(i=0);const p=Eg.createAndSchedule(this,e,i,u,_=>this.Xc(_));return this.Gc.push(p),p}Jc(){this.Qc&&Ct()}verifyOperationInProgress(){}ta(){var e=this;return(0,fe.Z)(function*(){let i;do{i=e.qc,yield i}while(i!==e.qc)})()}ea(e){for(const i of this.Gc)if(i.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((i,u)=>i.targetTimeMs-u.targetTimeMs);for(const i of this.Gc)if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const i=this.Gc.indexOf(e);this.Gc.splice(i,1)}}function sh(l){return function(e,i){if("object"!=typeof e||null===e)return!1;const u=e;for(const p of["next","error","complete"])if(p in u&&"function"==typeof u[p])return!0;return!1}(l)}class ey{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,u){this._progressObserver={next:e,error:i,complete:u}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ri extends Vl{constructor(e,i,u,p){super(e,i,u,p),this.type="firestore",this._queue=new t0,this._persistenceKey=p?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$o(this),this._firestoreClient.terminate()}}function Fs(l){return l._firestoreClient||$o(l),l._firestoreClient.verifyNotTerminated(),l._firestoreClient}function $o(l){var e;const i=l._freezeSettings(),u=(_=(null===(e=l._app)||void 0===e?void 0:e.options.appId)||"",new bu(l._databaseId,_,l._persistenceKey,(O=i).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var _,O;l._firestoreClient=new fa(l._authCredentials,l._appCheckCredentials,l._queue,u)}function af(l,e,i){const u=new Tr;return l.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield op(l,i),yield ap(l,e),u.resolve()}catch(p){const _=p;if(!("FirebaseError"===(w=_).name?w.code===je.FAILED_PRECONDITION||w.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw _;Vn("Error enabling offline persistence. Falling back to persistence disabled: "+_),u.reject(_)}var w})).then(()=>u.promise)}function Gl(l){if(l._initialized||l._terminated)throw new _t(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(E.fromBase64String(e))}catch(i){throw new _t(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Lu(E.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gc{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new _t(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ah{constructor(e){this._methodName=e}}class lf{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new _t(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new _t(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mn(this._lat,e._lat)||Mn(this._long,e._long)}}const dp=/^__.*__$/;class s0{constructor(e,i,u){this.data=e,this.fieldMask=i,this.fieldTransforms=u}toMutation(e,i){return null!==this.fieldMask?new Tu(e,this.data,this.fieldMask,i,this.fieldTransforms):new Rf(e,this.data,i,this.fieldTransforms)}}class hp{constructor(e,i,u){this.data=e,this.fieldMask=i,this.fieldTransforms=u}toMutation(e,i){return new Tu(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function ry(l){switch(l){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class fp{constructor(e,i,u,p,_,w){this.settings=e,this.databaseId=i,this.Tt=u,this.ignoreUndefinedProperties=p,void 0===_&&this.ia(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var i;const u=null===(i=this.path)||void 0===i?void 0:i.child(e),p=this.oa({path:u,ca:!1});return p.aa(e),p}ha(e){var i;const u=null===(i=this.path)||void 0===i?void 0:i.child(e),p=this.oa({path:u,ca:!1});return p.ia(),p}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Zg(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(ry(this.ra)&&dp.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class o0{constructor(e,i,u){this.databaseId=e,this.ignoreUndefinedProperties=i,this.Tt=u||zd(e)}wa(e,i,u,p=!1){return new fp({ra:e,methodName:i,_a:u,path:dr.emptyPath(),ca:!1,da:p},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Uu(l){const e=l._freezeSettings(),i=zd(l._databaseId);return new o0(l._databaseId,!!e.ignoreUndefinedProperties,i)}function zg(l,e,i,u,p,_={}){const w=l.wa(_.merge||_.mergeFields?2:0,e,i,p);u0("Data must be an object, but it was:",w,u);const O=qg(u,w);let B,z;if(_.merge)B=new Vo(w.fieldMask),z=w.fieldTransforms;else if(_.mergeFields){const ne=[];for(const we of _.mergeFields){const Be=mp(e,we,i);if(!w.contains(Be))throw new _t(je.INVALID_ARGUMENT,`Field '${Be}' is specified in your field mask but missing from your input data.`);c0(ne,Be)||ne.push(Be)}B=new Vo(ne),z=w.fieldTransforms.filter(we=>B.covers(we.field))}else B=null,z=w.fieldTransforms;return new s0(new hs(O),B,z)}class lh extends ah{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lh}}function iy(l,e,i){return new fp({ra:3,_a:e.settings._a,methodName:l._methodName,ca:i},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class pp extends ah{_toFieldTransform(e){return new Lc(e.path,new Go)}isEqual(e){return e instanceof pp}}class gp extends ah{constructor(e,i){super(e),this.ma=i}_toFieldTransform(e){const i=iy(this,e,!0),u=this.ma.map(_=>mc(_,i)),p=new Za(u);return new Lc(e.path,p)}isEqual(e){return this===e}}class a0 extends ah{constructor(e,i){super(e),this.ma=i}_toFieldTransform(e){const i=iy(this,e,!0),u=this.ma.map(_=>mc(_,i)),p=new ha(u);return new Lc(e.path,p)}isEqual(e){return this===e}}class sy extends ah{constructor(e,i){super(e),this.ga=i}_toFieldTransform(e){const i=new Cu(e.Tt,un(e.Tt,this.ga));return new Lc(e.path,i)}isEqual(e){return this===e}}function Wg(l,e,i,u){const p=l.wa(1,e,i);u0("Data must be an object, but it was:",p,u);const _=[],w=hs.empty();uo(u,(B,z)=>{const ne=Yg(e,B,i);z=(0,Ye.m9)(z);const we=p.ha(ne);if(z instanceof lh)_.push(ne);else{const Be=mc(z,we);null!=Be&&(_.push(ne),w.set(ne,Be))}});const O=new Vo(_);return new hp(w,O,p.fieldTransforms)}function uf(l,e,i,u,p,_){const w=l.wa(1,e,i),O=[mp(e,u,i)],B=[p];if(_.length%2!=0)throw new _t(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Be=0;Be<_.length;Be+=2)O.push(mp(e,_[Be])),B.push(_[Be+1]);const z=[],ne=hs.empty();for(let Be=O.length-1;Be>=0;--Be)if(!c0(z,O[Be])){const pt=O[Be];let Ot=B[Be];Ot=(0,Ye.m9)(Ot);const Qt=w.ha(pt);if(Ot instanceof lh)z.push(pt);else{const gn=mc(Ot,Qt);null!=gn&&(z.push(pt),ne.set(pt,gn))}}const we=new Vo(z);return new hp(ne,we,w.fieldTransforms)}function Kg(l,e,i,u=!1){return mc(i,l.wa(u?4:3,e))}function mc(l,e){if(l0(l=(0,Ye.m9)(l)))return u0("Unsupported field value:",e,l),qg(l,e);if(l instanceof ah)return function(i,u){if(!ry(u.ra))throw u.fa(`${i._methodName}() can only be used with update() and set()`);if(!u.path)throw u.fa(`${i._methodName}() is not currently supported inside arrays`);const p=i._toFieldTransform(u);p&&u.fieldTransforms.push(p)}(l,e),null;if(void 0===l&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),l instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(i,u){const p=[];let _=0;for(const w of i){let O=mc(w,u.la(_));null==O&&(O={nullValue:"NULL_VALUE"}),p.push(O),_++}return{arrayValue:{values:p}}}(l,e)}return function(i,u){if(null===(i=(0,Ye.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return un(u.Tt,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const p=ir.fromDate(i);return{timestampValue:Qa(u.Tt,p)}}if(i instanceof ir){const p=new ir(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qa(u.Tt,p)}}if(i instanceof lf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lu)return{bytesValue:Vp(u.Tt,i._byteString)};if(i instanceof ji){const p=u.databaseId,_=i.firestore._databaseId;if(!_.isEqual(p))throw u.fa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:kf(i.firestore._databaseId||u.databaseId,i._key.path)}}throw u.fa(`Unsupported field value: ${Na(i)}`)}(l,e)}function qg(l,e){const i={};return Pl(l)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(l,(u,p)=>{const _=mc(p,e.ua(u));null!=_&&(i[u]=_)}),{mapValue:{fields:i}}}function l0(l){return!("object"!=typeof l||null===l||l instanceof Array||l instanceof Date||l instanceof ir||l instanceof lf||l instanceof Lu||l instanceof ji||l instanceof ah)}function u0(l,e,i){if(!l0(i)||"object"!=typeof(u=i)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const u=Na(i);throw e.fa("an object"===u?l+" a custom object":l+" "+u)}var u}function mp(l,e,i){if((e=(0,Ye.m9)(e))instanceof gc)return e._internalPath;if("string"==typeof e)return Yg(l,e);throw Zg("Field path arguments must be of type string or ",l,!1,void 0,i)}const qb=new RegExp("[~\\*/\\[\\]]");function Yg(l,e,i){if(e.search(qb)>=0)throw Zg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,l,!1,void 0,i);try{return new gc(...e.split("."))._internalPath}catch{throw Zg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,l,!1,void 0,i)}}function Zg(l,e,i,u,p){const _=u&&!u.isEmpty(),w=void 0!==p;let O=`Function ${e}() called with invalid data`;i&&(O+=" (via `toFirestore()`)"),O+=". ";let B="";return(_||w)&&(B+=" (found",_&&(B+=` in field ${u}`),w&&(B+=` in document ${p}`),B+=")"),new _t(je.INVALID_ARGUMENT,O+l+B)}function c0(l,e){return l.some(i=>i.isEqual(e))}class _p{constructor(e,i,u,p,_){this._firestore=e,this._userDataWriter=i,this._key=u,this._document=p,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new ji(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Qg("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class Yb extends _p{data(){return super.data()}}function Qg(l,e){return"string"==typeof e?Yg(l,e):e instanceof gc?e._internalPath:e._delegate._internalPath}function oy(l){if("L"===l.limitType&&0===l.explicitOrderBy.length)throw new _t(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ay{}class Jg extends ay{}function _c(l,e,...i){let u=[];e instanceof ay&&u.push(e),u=u.concat(i),function(p){const _=p.filter(O=>O instanceof cf).length,w=p.filter(O=>O instanceof Xg).length;if(_>1||_>0&&w>0)throw new _t(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(u);for(const p of u)l=p._apply(l);return l}class Xg extends Jg{constructor(e,i,u){super(),this._field=e,this._op=i,this._value=u,this.type="where"}static _create(e,i,u){return new Xg(e,i,u)}_apply(e){const i=this._parse(e);return Bu(e._query,i),new Ho(e.firestore,e.converter,Sd(e._query,i))}_parse(e){const i=Uu(e.firestore);return function(p,_,w,O,B,z,ne){let we;if(B.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new _t(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){py(ne,z);const Be=[];for(const pt of ne)Be.push(f0(O,p,pt));we={arrayValue:{values:Be}}}else we=f0(O,p,ne)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||py(ne,z),we=Kg(w,"where",ne,"in"===z||"not-in"===z);return ar.create(B,z,we)}(e._query,0,i,e.firestore._databaseId,this._field,this._op,this._value)}}class cf extends ay{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new cf(e,i)}_parse(e){const i=this._queryConstraints.map(u=>u._parse(e)).filter(u=>u.getFilters().length>0);return 1===i.length?i[0]:Mr.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return 0===i.getFilters().length?e:(function(u,p){let _=u;const w=p.getFlattenedFilters();for(const O of w)Bu(_,O),_=Sd(_,O)}(e._query,i),new Ho(e.firestore,e.converter,Sd(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yp extends Jg{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new yp(e,i)}_apply(e){const i=function(u,p,_){if(null!==u.startAt)throw new _t(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new _t(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new Ed(p,_);return function(O,B){if(null===Id(O)){const z=Cd(O);null!==z&&Zb(0,z,B.field)}}(u,w),w}(e._query,this._field,this._direction);return new Ho(e.firestore,e.converter,function(u,p){const _=u.explicitOrderBy.concat([p]);return new Ya(u.path,u.collectionGroup,_,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,i))}}class ml extends Jg{constructor(e,i,u){super(),this.type=e,this._limit=i,this._limitType=u}static _create(e,i,u){return new ml(e,i,u)}_apply(e){return new Ho(e.firestore,e.converter,Ad(e._query,this._limit,this._limitType))}}class vp extends Jg{constructor(e,i,u){super(),this.type=e,this._docOrFields=i,this._inclusive=u}static _create(e,i,u){return new vp(e,i,u)}_apply(e){const i=yc(e,this.type,this._docOrFields,this._inclusive);return new Ho(e.firestore,e.converter,(p=i,new Ya((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,p,u.endAt)));var u,p}}class bp extends Jg{constructor(e,i,u){super(),this.type=e,this._docOrFields=i,this._inclusive=u}static _create(e,i,u){return new bp(e,i,u)}_apply(e){const i=yc(e,this.type,this._docOrFields,this._inclusive);return new Ho(e.firestore,e.converter,(p=i,new Ya((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,p)));var u,p}}function yc(l,e,i,u){if(i[0]=(0,Ye.m9)(i[0]),i[0]instanceof _p)return function(p,_,w,O,B){if(!O)throw new _t(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const z=[];for(const ne of Ki(p))if(ne.field.isKeyField())z.push(Uo(_,O.key));else{const we=O.data.field(ne.field);if(Me(we))throw new _t(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ne.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){const Be=ne.field.canonicalString();throw new _t(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Be}' (used as the orderBy) does not exist.`)}z.push(we)}return new wn(z,B)}(l._query,l.firestore._databaseId,e,i[0]._document,u);{const p=Uu(l.firestore);return function(_,w,O,B,z,ne){const we=_.explicitOrderBy;if(z.length>we.length)throw new _t(je.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Be=[];for(let pt=0;pt<z.length;pt++){const Ot=z[pt];if(we[pt].field.isKeyField()){if("string"!=typeof Ot)throw new _t(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof Ot}`);if(!Td(_)&&-1!==Ot.indexOf("/"))throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${Ot}' contains a slash.`);const Qt=_.path.child(Wn.fromString(Ot));if(!Ht.isDocumentKey(Qt))throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const gn=new Ht(Qt);Be.push(Uo(w,gn))}else{const Qt=Kg(O,B,Ot);Be.push(Qt)}}return new wn(Be,ne)}(l._query,l.firestore._databaseId,p,e,i,u)}}function f0(l,e,i){if("string"==typeof(i=(0,Ye.m9)(i))){if(""===i)throw new _t(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Td(e)&&-1!==i.indexOf("/"))throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const u=e.path.child(Wn.fromString(i));if(!Ht.isDocumentKey(u))throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return Uo(l,new Ht(u))}if(i instanceof ji)return Uo(l,i._key);throw new _t(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Na(i)}.`)}function py(l,e){if(!Array.isArray(l)||0===l.length)throw new _t(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bu(l,e){if(e.isInequality()){const u=Cd(l),p=e.field;if(null!==u&&!u.isEqual(p))throw new _t(je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${u.toString()}' and '${p.toString()}'`);const _=Id(l);null!==_&&Zb(0,p,_)}const i=function(u,p){for(const _ of u)for(const w of _.getFlattenedFilters())if(p.indexOf(w.op)>=0)return w.op;return null}(l.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new _t(je.INVALID_ARGUMENT,i===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}function Zb(l,e,i){if(!i.isEqual(e))throw new _t(je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class p0{convertValue(e,i="none"){switch(oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return K(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ee(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw Ct()}}convertObject(e,i){const u={};return uo(e.fields,(p,_)=>{u[p]=this.convertValue(_,i)}),u}convertGeoPoint(e){return new lf(K(e.latitude),K(e.longitude))}convertArray(e,i){return(e.values||[]).map(u=>this.convertValue(u,i))}convertServerTimestamp(e,i){switch(i){case"previous":const u=vt(e);return null==u?null:this.convertValue(u,i);case"estimate":return this.convertTimestamp(Zt(e));default:return null}}convertTimestamp(e){const i=V(e);return new ir(i.seconds,i.nanos)}convertDocumentKey(e,i){const u=Wn.fromString(e);xt(zp(u));const p=new zr(u.get(1),u.get(3)),_=new Ht(u.popFirst(5));return p.isEqual(i)||vn(`Document ${_} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),_}}function wp(l,e,i){let u;return u=l?i&&(i.merge||i.mergeFields)?l.toFirestore(e,i):l.toFirestore(e):e,u}class g0 extends p0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,i)}}class _l{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends _p{constructor(e,i,u,p,_,w){super(e,i,u,p,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const u=this._document.data.field(Qg("DocumentSnapshot.get",e));if(null!==u)return this._userDataWriter.convertValue(u,i.serverTimestamps)}}}class uh extends vc{data(e={}){return super.data(e)}}class yl{constructor(e,i,u,p){this._firestore=e,this._userDataWriter=i,this._snapshot=p,this.metadata=new _l(p.hasPendingWrites,p.fromCache),this.query=u}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(u=>{e.call(i,new uh(this._firestore,this._userDataWriter,u.key,u,new _l(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new _t(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(u,p){if(u._snapshot.oldDocs.isEmpty()){let _=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new uh(u._firestore,u._userDataWriter,w.doc.key,w.doc,new _l(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:_++}))}{let _=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>p||3!==w.type).map(w=>{const O=new uh(u._firestore,u._userDataWriter,w.doc.key,w.doc,new _l(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let B=-1,z=-1;return 0!==w.type&&(B=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),z=_.indexOf(w.doc.key)),{type:rs(w.type),doc:O,oldIndex:B,newIndex:z}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function rs(l){switch(l){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}function m0(l,e){return l instanceof vc&&e instanceof vc?l._firestore===e._firestore&&l._key.isEqual(e._key)&&(null===l._document?null===e._document:l._document.isEqual(e._document))&&l._converter===e._converter:l instanceof yl&&e instanceof yl&&l._firestore===e._firestore&&Hg(l.query,e.query)&&l.metadata.isEqual(e.metadata)&&l._snapshot.isEqual(e._snapshot)}class Vu extends p0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new ji(this.firestore,null,i)}}function ch(l,e,i){l=er(l,ji);const u=er(l.firestore,Ri),p=wp(l.converter,e,i);return dh(u,[zg(Uu(u),"setDoc",l._key,p,null!==l.converter,i).toMutation(l._key,Mi.none())])}function my(l,e,i,...u){l=er(l,ji);const p=er(l.firestore,Ri),_=Uu(p);let w;return w="string"==typeof(e=(0,Ye.m9)(e))||e instanceof gc?uf(_,"updateDoc",l._key,e,i,u):Wg(_,"updateDoc",l._key,e),dh(p,[w.toMutation(l._key,Mi.exists(!0))])}function ad(l,...e){var i,u,p;l=(0,Ye.m9)(l);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||sh(e[w])||(_=e[w],w++);const O={includeMetadataChanges:_.includeMetadataChanges};if(sh(e[w])){const we=e[w];e[w]=null===(i=we.next)||void 0===i?void 0:i.bind(we),e[w+1]=null===(u=we.error)||void 0===u?void 0:u.bind(we),e[w+2]=null===(p=we.complete)||void 0===p?void 0:p.bind(we)}let B,z,ne;if(l instanceof ji)z=er(l.firestore,Ri),ne=tc(l._key.path),B={next:we=>{e[w]&&e[w](is(z,l,we))},error:e[w+1],complete:e[w+2]};else{const we=er(l,Ho);z=er(we.firestore,Ri),ne=we._query;const Be=new Vu(z);B={next:pt=>{e[w]&&e[w](new yl(z,Be,we,pt))},error:e[w+1],complete:e[w+2]},oy(l._query)}return function(we,Be,pt,Ot){const Qt=new th(Ot),gn=new Yh(Be,Qt,pt);return we.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return np(yield id(we),gn)})),()=>{Qt.bc(),we.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Dg(yield id(we),gn)}))}}(Fs(z),ne,O,B)}function dh(l,e){return function(i,u){const p=new Tr;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function zv(l,e,i){return B_.apply(this,arguments)}(yield Ug(i),u,p)})),p.promise}(Fs(l),e)}function is(l,e,i){const u=i.docs.get(e._key),p=new Vu(l);return new vc(l,p,e._key,u,new _l(i.hasPendingWrites,i.fromCache),e.converter)}const cu={maxAttempts:5};class zo{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Uu(e)}set(e,i,u){this._verifyNotCommitted();const p=jl(e,this._firestore),_=wp(p.converter,i,u),w=zg(this._dataReader,"WriteBatch.set",p._key,_,null!==p.converter,u);return this._mutations.push(w.toMutation(p._key,Mi.none())),this}update(e,i,u,...p){this._verifyNotCommitted();const _=jl(e,this._firestore);let w;return w="string"==typeof(i=(0,Ye.m9)(i))||i instanceof gc?uf(this._dataReader,"WriteBatch.update",_._key,i,u,p):Wg(this._dataReader,"WriteBatch.update",_._key,i),this._mutations.push(w.toMutation(_._key,Mi.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=jl(e,this._firestore);return this._mutations=this._mutations.concat(new Md(i._key,Mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jl(l,e){if((l=(0,Ye.m9)(l)).firestore!==e)throw new _t(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return l}class ld extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=Uu(e)}get(e){const i=jl(e,this._firestore),u=new g0(this._firestore);return this._transaction.lookup([i._key]).then(p=>{if(!p||1!==p.length)return Ct();const _=p[0];if(_.isFoundDocument())return new _p(this._firestore,u,_.key,_,i.converter);if(_.isNoDocument())return new _p(this._firestore,u,i._key,null,i.converter);throw Ct()})}set(e,i,u){const p=jl(e,this._firestore),_=wp(p.converter,i,u),w=zg(this._dataReader,"Transaction.set",p._key,_,null!==p.converter,u);return this._transaction.set(p._key,w),this}update(e,i,u,...p){const _=jl(e,this._firestore);let w;return w="string"==typeof(i=(0,Ye.m9)(i))||i instanceof gc?uf(this._dataReader,"Transaction.update",_._key,i,u,p):Wg(this._dataReader,"Transaction.update",_._key,i),this._transaction.update(_._key,w),this}delete(e){const i=jl(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){const i=jl(e,this._firestore),u=new Vu(this._firestore);return super.get(e).then(p=>new vc(this._firestore,u,i._key,p._document,new _l(!1,!1),i.converter))}}!function(l,e=!0){Ue=ht.SDK_VERSION,(0,ht._registerComponent)(new lt.wA("firestore",(i,{instanceIdentifier:u,options:p})=>{const _=i.getProvider("app").getImmediate(),w=new Ri(new ul(i.getProvider("auth-internal")),new Ju(i.getProvider("app-check-internal")),function(O,B){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new _t(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(O.options.projectId,B)}(_,u),_);return p=Object.assign({useFetchStreams:e},p),w._setSettings(p),w},"PUBLIC").setMultipleInstances(!0)),(0,ht.registerVersion)(J,"3.9.0",l),(0,ht.registerVersion)(J,"3.9.0","esm2017")}();function I0(l,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _t("invalid-argument",`Invalid options passed to function ${l}(): You cannot specify both "merge" and "mergeFields".`);return e}function ew(){if(typeof Uint8Array>"u")throw new _t("unimplemented","Uint8Arrays are not available in this environment.")}function tw(){if(!function S(){return typeof atob<"u"}())throw new _t("unimplemented","Blobs are unavailable in Firestore in this environment.")}class hf{constructor(e){this._delegate=e}static fromBase64String(e){return tw(),new hf(Lu.fromBase64String(e))}static fromUint8Array(e){return ew(),new hf(Lu.fromUint8Array(e))}toBase64(){return tw(),this._delegate.toBase64()}toUint8Array(){return ew(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ff(l){return function C0(l,e){if("object"!=typeof l||null===l)return!1;const i=l;for(const u of e)if(u in i&&"function"==typeof i[u])return!0;return!1}(l,["next","error","complete"])}class pf{enableIndexedDbPersistence(e,i){return function ty(l,e){Gl(l=er(l,Ri));const i=Fs(l),u=l._freezeSettings(),p=new W_;return af(i,p,new kg(p,u.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return function r0(l){Gl(l=er(l,Ri));const e=Fs(l),i=l._freezeSettings(),u=new W_;return af(e,u,new z_(u,i.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $g(l){if(l._initialized&&!l._terminated)throw new _t(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return l._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(i=(0,fe.Z)(function*(u){if(!ao.C())return Promise.resolve();const p=u+"main";yield ao.delete(p)}),function(u){return i.apply(this,arguments)})(b_(l._databaseId,l._persistenceKey)),e.resolve()}catch(i){e.reject(i)}var i})),e.promise}(e._delegate)}}class _y{constructor(e,i,u){this._delegate=i,this._persistenceProvider=u,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&Vn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}useEmulator(e,i,u={}){!function cp(l,e,i,u={}){var p;const _=(l=er(l,Vl))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&Vn("Host has been set in both settings() and useEmulator(), emulator host will be used"),l._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${i}`,ssl:!1})),u.mockUserToken){let w,O;if("string"==typeof u.mockUserToken)w=u.mockUserToken,O=ce.MOCK_USER;else{w=(0,Ye.Sg)(u.mockUserToken,null===(p=l._app)||void 0===p?void 0:p.options.projectId);const B=u.mockUserToken.sub||u.mockUserToken.user_id;if(!B)throw new _t(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new ce(B)}l._authCredentials=new Fo(new vo(w,O))}}(this._delegate,e,i,u)}enableNetwork(){return function ku(l){return function jo(l){return l.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield Y_(l),i=yield rf(l);return e.setNetworkEnabled(!0),function(u){const p=kt(u);return p.mu.delete(0),Kd(p)}(i)}))}(Fs(l=er(l,Ri)))}(this._delegate)}disableNetwork(){return function lu(l){return function nh(l){return l.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield Y_(l),i=yield rf(l);return e.setNetworkEnabled(!1),(u=(0,fe.Z)(function*(p){const _=kt(p);_.mu.add(0),yield qd(_),_.pu.set("Offline")}),function(p){return u.apply(this,arguments)})(i);var u}))}(Fs(l=er(l,Ri)))}(this._delegate)}enablePersistence(e){let i=!1,u=!1;return e&&(i=!!e.synchronizeTabs,u=!!e.experimentalForceOwningTab,pc("synchronizeTabs",i,"experimentalForceOwningTab",u)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,u)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ny(l){return function(e){const i=new Tr;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function Hb(l,e){return G_.apply(this,arguments)}(yield Ug(e),i)})),i.promise}(Fs(l=er(l,Ri)))}(this._delegate)}onSnapshotsInSync(e){return function v0(l,e){return function Q_(l,e){const i=new th(e);return l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return u=yield id(l),p=i,kt(u).vu.add(p),void p.next();var u,p})),()=>{i.bc(),l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return u=yield id(l),p=i,void kt(u).vu.delete(p);var u,p}))}}(Fs(l=er(l,Ri)),sh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _t("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dd(this,J_(this._delegate,e))}catch(i){throw pa(i,"collection()","Firestore.collection()")}}doc(e){try{return new $l(this,_s(this._delegate,e))}catch(i){throw pa(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ga(this,function zb(l,e){if(l=er(l,Vl),ih("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _t(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ho(l,null,(i=e,new Ya(Wn.emptyPath(),i)));var i}(this._delegate,e))}catch(i){throw pa(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Xb(l,e,i){l=er(l,Ri);const u=Object.assign(Object.assign({},cu),i);return function(p){if(p.maxAttempts<1)throw new _t(je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(u),function(p,_,w){const O=new Tr;return p.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const B=yield function Yv(l){return up(l).then(e=>e.datastore)}(p);new Fg(p.asyncQueue,B,w,_,O).run()})),O.promise}(Fs(l),p=>e(new ld(l,p)),u)}(this._delegate,i=>e(new T0(this,i)))}batch(){return Fs(this._delegate),new gf(new zo(this._delegate,e=>dh(this._delegate,e)))}loadBundle(e){return function Fu(l,e){const i=Fs(l=er(l,Ri)),u=new ey;return function Jv(l,e,i,u){const p=function(_,w){let O;return O="string"==typeof _?(new TextEncoder).encode(_):_,B=function(B,z){if(B instanceof Uint8Array)return sp(B,z);if(B instanceof ArrayBuffer)return sp(new Uint8Array(B),z);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new K_(B,w);var B}(i,zd(e));l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function xg(l,e,i){const u=kt(l);var p;(p=(0,fe.Z)(function*(_,w,O){try{const B=yield w.getMetadata();if(yield function(Be,pt){const Ot=kt(Be),Qt=ps(pt.createTime);return Ot.persistence.runTransaction("hasNewerBundle","readonly",gn=>Ot.$s.getBundleMetadata(gn,pt.id)).then(gn=>!!gn&&gn.createTime.compareTo(Qt)>=0)}(_.localStore,B))return yield w.close(),O._completeWith({taskState:"Success",documentsLoaded:(Be=B).totalDocuments,bytesLoaded:Be.totalBytes,totalDocuments:Be.totalDocuments,totalBytes:Be.totalBytes}),Promise.resolve(new Set);O._updateProgress(U_(B));const z=new vE(B,_.localStore,w.Tt);let ne=yield w.yc();for(;ne;){const Be=yield z.Bu(ne);Be&&O._updateProgress(Be),ne=yield w.yc()}const we=yield z.complete();return yield Qs(_,we.Uu,void 0),yield function(Be,pt){const Ot=kt(Be);return Ot.persistence.runTransaction("Save bundle","readwrite",Qt=>Ot.$s.saveBundleMetadata(Qt,pt))}(_.localStore,B),O._completeWith(we.progress),Promise.resolve(we.qu)}catch(B){return Vn("SyncEngine",`Loading bundle failed with ${B}`),O._failWith(B),Promise.resolve(new Set)}var Be}),function(_,w,O){return p.apply(this,arguments)})(u,e,i).then(p=>{u.sharedClientState.notifyBundleLoaded(p)})}(yield Ug(l),p,u)}))}(i,l._databaseId,e,u),u}(this._delegate,e)}namedQuery(e){return function uu(l,e){return function Vg(l,e){return l.asyncQueue.enqueue((0,fe.Z)(function*(){return function(i,u){const p=kt(i);return p.persistence.runTransaction("Get named query","readonly",_=>p.$s.getNamedQuery(_,u))}(yield nl(l),e)}))}(Fs(l=er(l,Ri)),e).then(i=>i?new Ho(l,null,i.query):null)}(this._delegate,e).then(i=>i?new ga(this,i):null)}}class Hl extends p0{constructor(e){super(),this.firestore=e}convertBytes(e){return new hf(new Lu(e))}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return $l.forKey(i,this.firestore,null)}}class T0{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new Hl(e)}get(e){const i=Ec(e);return this._delegate.get(i).then(u=>new mf(this._firestore,new vc(this._firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,i.converter)))}set(e,i,u){const p=Ec(e);return u?(I0("Transaction.set",u),this._delegate.set(p,i,u)):this._delegate.set(p,i),this}update(e,i,u,...p){const _=Ec(e);return 2===arguments.length?this._delegate.update(_,i):this._delegate.update(_,i,u,...p),this}delete(e){const i=Ec(e);return this._delegate.delete(i),this}}class gf{constructor(e){this._delegate=e}set(e,i,u){const p=Ec(e);return u?(I0("WriteBatch.set",u),this._delegate.set(p,i,u)):this._delegate.set(p,i),this}update(e,i,u,...p){const _=Ec(e);return 2===arguments.length?this._delegate.update(_,i):this._delegate.update(_,i,u,...p),this}delete(e){const i=Ec(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class Gu{constructor(e,i,u){this._firestore=e,this._userDataWriter=i,this._delegate=u}fromFirestore(e,i){const u=new uh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ju(this._firestore,u),i??{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){const u=Gu.INSTANCES;let p=u.get(e);p||(p=new WeakMap,u.set(e,p));let _=p.get(i);return _||(_=new Gu(e,new Hl(e),i),p.set(i,_)),_}}Gu.INSTANCES=new WeakMap;class $l{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Hl(e)}static forPath(e,i,u){if(e.length%2!=0)throw new _t("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $l(i,new ji(i._delegate,u,new Ht(e)))}static forKey(e,i,u){return new $l(i,new ji(i._delegate,u,e))}get id(){return this._delegate.id}get parent(){return new dd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dd(this.firestore,J_(this._delegate,e))}catch(i){throw pa(i,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ye.m9)(e))instanceof ji&&X_(this._delegate,e)}set(e,i){i=I0("DocumentReference.set",i);try{return i?ch(this._delegate,e,i):ch(this._delegate,e)}catch(u){throw pa(u,"setDoc()","DocumentReference.set()")}}update(e,i,...u){try{return 1===arguments.length?my(this._delegate,e):my(this._delegate,e,i,...u)}catch(p){throw pa(p,"updateDoc()","DocumentReference.update()")}}delete(){return function y0(l){return dh(er(l.firestore,Ri),[new Md(l._key,Mi.none())])}(this._delegate)}onSnapshot(...e){const i=im(e),u=yy(e,p=>new mf(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return ad(this._delegate,i,u)}get(e){let i;return i="cache"===e?.source?function Jb(l){l=er(l,ji);const e=er(l.firestore,Ri),i=Fs(e),u=new Vu(e);return function Zv(l,e){const i=new Tr;return l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(u=(0,fe.Z)(function*(p,_,w){try{const O=yield function(B,z){const ne=kt(B);return ne.persistence.runTransaction("read document","readonly",we=>ne.localDocuments.getDocument(we,z))}(p,_);O.isFoundDocument()?w.resolve(O):O.isNoDocument()?w.resolve(null):w.reject(new _t(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const B=Wh(O,`Failed to get document '${_} from cache`);w.reject(B)}}),function(p,_,w){return u.apply(this,arguments)})(yield nl(l),e,i);var u})),i.promise}(i,l._key).then(p=>new vc(e,u,l._key,p,new _l(null!==p&&p.hasLocalMutations,!0),l.converter))}(this._delegate):"server"===e?.source?function _0(l){l=er(l,ji);const e=er(l.firestore,Ri);return rh(Fs(e),l._key,{source:"server"}).then(i=>is(e,l,i))}(this._delegate):function tm(l){l=er(l,ji);const e=er(l.firestore,Ri);return rh(Fs(e),l._key).then(i=>is(e,l,i))}(this._delegate),i.then(u=>new mf(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)))}withConverter(e){return new $l(this.firestore,this._delegate.withConverter(e?Gu.getInstance(this.firestore,e):null))}}function pa(l,e,i){return l.message=l.message.replace(e,i),l}function im(l){for(const e of l)if("object"==typeof e&&!ff(e))return e;return{}}function yy(l,e){var i,u;let p;return p=ff(l[0])?l[0]:ff(l[1])?l[1]:"function"==typeof l[0]?{next:l[0],error:l[1],complete:l[2]}:{next:l[1],error:l[2],complete:l[3]},{next:_=>{p.next&&p.next(e(_))},error:null===(i=p.error)||void 0===i?void 0:i.bind(p),complete:null===(u=p.complete)||void 0===u?void 0:u.bind(p)}}class mf{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new $l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return m0(this._delegate,e._delegate)}}class ju extends mf{data(e){const i=this._delegate.data(e);return function _i(l,e){l||Ct()}(void 0!==i),i}}class ga{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Hl(e)}where(e,i,u){try{return new ga(this.firestore,_c(this._delegate,function EE(l,e,i){const u=e,p=Qg("where",l);return Xg._create(p,u,i)}(e,i,u)))}catch(p){throw pa(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new ga(this.firestore,_c(this._delegate,function uy(l,e="asc"){const i=e,u=Qg("orderBy",l);return yp._create(u,i)}(e,i)))}catch(u){throw pa(u,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ga(this.firestore,_c(this._delegate,function cy(l){return jg("limit",l),ml._create("limit",l,"F")}(e)))}catch(i){throw pa(i,"limit()","Query.limit()")}}limitToLast(e){try{return new ga(this.firestore,_c(this._delegate,function dy(l){return jg("limitToLast",l),ml._create("limitToLast",l,"L")}(e)))}catch(i){throw pa(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ga(this.firestore,_c(this._delegate,function d0(...l){return vp._create("startAt",l,!0)}(...e)))}catch(i){throw pa(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ga(this.firestore,_c(this._delegate,function h0(...l){return vp._create("startAfter",l,!1)}(...e)))}catch(i){throw pa(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ga(this.firestore,_c(this._delegate,function hy(...l){return bp._create("endBefore",l,!1)}(...e)))}catch(i){throw pa(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ga(this.firestore,_c(this._delegate,function fy(...l){return bp._create("endAt",l,!0)}(...e)))}catch(i){throw pa(i,"endAt()","Query.endAt()")}}isEqual(e){return Hg(this._delegate,e._delegate)}get(e){let i;return i="cache"===e?.source?function od(l){l=er(l,Ho);const e=er(l.firestore,Ri),i=Fs(e),u=new Vu(e);return function Qv(l,e){const i=new Tr;return l.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(u=(0,fe.Z)(function*(p,_,w){try{const O=yield Qc(p,_,!0),B=new Ru(_,O.Yi),z=B.Hu(O.documents),ne=B.applyChanges(z,!1);w.resolve(ne.snapshot)}catch(O){const B=Wh(O,`Failed to execute query '${_} against cache`);w.reject(B)}}),function(p,_,w){return u.apply(this,arguments)})(yield nl(l),e,i);var u})),i.promise}(i,l._query).then(p=>new yl(e,u,l,p))}(this._delegate):"server"===e?.source?function nm(l){l=er(l,Ho);const e=er(l.firestore,Ri),i=Fs(e),u=new Vu(e);return Z_(i,l._query,{source:"server"}).then(p=>new yl(e,u,l,p))}(this._delegate):function gy(l){l=er(l,Ho);const e=er(l.firestore,Ri),i=Fs(e),u=new Vu(e);return oy(l._query),Z_(i,l._query).then(p=>new yl(e,u,l,p))}(this._delegate),i.then(u=>new om(this.firestore,new yl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)))}onSnapshot(...e){const i=im(e),u=yy(e,p=>new om(this.firestore,new yl(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return ad(this._delegate,i,u)}withConverter(e){return new ga(this.firestore,this._delegate.withConverter(e?Gu.getInstance(this.firestore,e):null))}}class sm{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new ju(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class om{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new ga(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ju(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new sm(this._firestore,i))}forEach(e,i){this._delegate.forEach(u=>{e.call(i,new ju(this._firestore,u))})}isEqual(e){return m0(this._delegate,e._delegate)}}class dd extends ga{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $l(this.firestore,e):null}doc(e){try{return new $l(this.firestore,void 0===e?_s(this._delegate):_s(this._delegate,e))}catch(i){throw pa(i,"doc()","CollectionReference.doc()")}}add(e){return function bc(l,e){const i=er(l.firestore,Ri),u=_s(l),p=wp(l.converter,e);return dh(i,[zg(Uu(l.firestore),"addDoc",u._key,p,null!==l.converter,{}).toMutation(u._key,Mi.exists(!1))]).then(()=>u)}(this._delegate,e).then(i=>new $l(this.firestore,i))}isEqual(e){return X_(this._delegate,e._delegate)}withConverter(e){return new dd(this.firestore,this._delegate.withConverter(e?Gu.getInstance(this.firestore,e):null))}}function Ec(l){return er(l,ji)}class am{constructor(...e){this._delegate=new gc(...e)}static documentId(){return new am(dr.keyField().canonicalString())}isEqual(e){return(e=(0,Ye.m9)(e))instanceof gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class hd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wc(){return new pp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hd(e)}static delete(){const e=function ud(){return new lh("deleteField")}();return e._methodName="FieldValue.delete",new hd(e)}static arrayUnion(...e){const i=function cd(...l){return new gp("arrayUnion",l)}(...e);return i._methodName="FieldValue.arrayUnion",new hd(i)}static arrayRemove(...e){const i=function b0(...l){return new a0("arrayRemove",l)}(...e);return i._methodName="FieldValue.arrayRemove",new hd(i)}static increment(e){const i=function df(l){return new sy("increment",l)}(e);return i._methodName="FieldValue.increment",new hd(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vy={Firestore:_y,GeoPoint:lf,Timestamp:ir,Blob:hf,Transaction:T0,WriteBatch:gf,DocumentReference:$l,DocumentSnapshot:mf,Query:ga,QueryDocumentSnapshot:ju,QuerySnapshot:om,CollectionReference:dd,FieldPath:am,FieldValue:hd,setLogLevel:function nw(l){!function or(l){wt.setLogLevel(l)}(l)},CACHE_SIZE_UNLIMITED:-1};!function lm(l){(function by(l,e){l.INTERNAL.registerComponent(new lt.wA("firestore-compat",i=>{const u=i.getProvider("app-compat").getImmediate(),p=i.getProvider("firestore").getImmediate();return e(u,p)},"PUBLIC").setServiceProps(Object.assign({},vy)))})(l,(e,i)=>new _y(e,i,new pf)),l.registerVersion("@firebase/firestore-compat","0.3.5")}(ct.Z);var du=j(1205),rw=j(6217),iw=j(9260);function um(l,e){return function S0(l,e=Y.z){return new h.y(i=>{let u;return null!=e?e.schedule(()=>{u=l.onSnapshot({includeMetadataChanges:!0},i)}):u=l.onSnapshot({includeMetadataChanges:!0},i),()=>{u?.()}})}(l,e)}function cm(l,e){return um(l,e).pipe((0,de.U)(i=>({payload:i,type:"query"})))}function Dp(l,e){return cm(l,e).pipe((0,ke.O)(void 0),me(),(0,de.U)(([i,u])=>{const p=u.payload.docChanges(),_=p.map(w=>({type:w.type,payload:w}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,O)=>{const B=p.find(ne=>ne.doc.ref.isEqual(w.ref)),z=i?.payload.docs.find(ne=>ne.ref.isEqual(w.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(w.metadata)||!B&&z&&JSON.stringify(z.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:w}})}),_}))}function wy(l,e,i){return Dp(l,i).pipe((0,Ce.R)((u,p)=>function A0(l,e,i){return e.forEach(u=>{i.indexOf(u.type)>-1&&(l=function ow(l,e){switch(e.type){case"added":if(!l[e.newIndex]||!l[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ey(l,e.newIndex,0,e);break;case"modified":if(null==l[e.oldIndex]||l[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=l.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return Ey(l,e.newIndex,1,e)}break;case"removed":if(l[e.oldIndex]&&l[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ey(l,e.oldIndex,1)}return l}(l,u))}),l}(u,p.map(_=>_.payload),e),[]),(0,et.x)(),(0,de.U)(u=>u.map(p=>({type:p.type,payload:p}))))}function Ey(l,e,i,...u){const p=l.slice();return p.splice(e,i,...u),p}function O0(l){return(!l||0===l.length)&&(l=["added","removed","modified"]),l}class N0{constructor(e,i,u){this.ref=e,this.query=i,this.afs=u}stateChanges(e){let i=Dp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,de.U)(u=>u.filter(p=>e.indexOf(p.type)>-1)))),i.pipe((0,ke.O)(void 0),me(),(0,Ke.h)(([u,p])=>p.length>0||!u),(0,de.U)(([u,p])=>p),Te.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((i,u)=>[...i,...u],[]))}snapshotChanges(e){const i=O0(e);return wy(this.query,i,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(e={}){return cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(i=>i.payload.docs.map(u=>e.idField?Object.assign(Object.assign({},u.data()),{[e.idField]:u.id}):u.data())),Te.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(Te.iC)}add(e){return this.ref.add(e)}doc(e){return new M0(this.ref.doc(e),this.afs)}}class M0{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const u=this.ref.collection(e),{ref:p,query:_}=Hu(u,i);return new N0(p,_,this.afs)}snapshotChanges(){return function sw(l,e){return um(l,e).pipe((0,ke.O)(void 0),me(),(0,de.U)(([i,u])=>u.exists?i?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,de.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,ve.D)(this.ref.get(e)).pipe(Te.iC)}}class Dy{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?Dp(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(i=>i.filter(u=>e.indexOf(u.type)>-1)),(0,Ke.h)(i=>i.length>0),Te.iC):Dp(this.query,this.afs.schedulers.outsideAngular).pipe(Te.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((i,u)=>[...i,...u],[]))}snapshotChanges(e){const i=O0(e);return wy(this.query,i,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(e={}){return cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(u=>u.payload.docs.map(p=>e.idField?Object.assign({[e.idField]:p.id},p.data()):p.data())),Te.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(Te.iC)}}const dm=new T.OlP("angularfire2.enableFirestorePersistence"),Iy=new T.OlP("angularfire2.firestore.persistenceSettings"),aw=new T.OlP("angularfire2.firestore.settings"),Cy=new T.OlP("angularfire2.firestore.use-emulator");function Hu(l,e=(i=>i)){return{query:e(l),ref:l}}let hm=(()=>{class l{constructor(i,u,p,_,w,O,B,z,ne,we,Be,pt,Ot,Qt,gn,di,ss){this.schedulers=B;const fr=(0,at.on)(i,O,u),os=ne;we&&(0,du.nw)(fr,O,Be,Ot,Qt,gn,pt,di),[this.firestore,this.persistenceEnabled$]=(0,at.cc)(`${fr.name}.firestore`,"AngularFirestore",fr.name,()=>{const wr=O.runOutsideAngular(()=>fr.firestore());if(_&&wr.settings(_),os&&wr.useEmulator(...os),p&&!(0,Nt.PM)(w)){const Gr=()=>{try{return(0,ve.D)(wr.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(Js){return typeof console<"u"&&console.warn(Js),(0,Se.of)(!1)}};return[wr,O.runOutsideAngular(Gr)]}return[wr,(0,Se.of)(!1)]},[_,os,p])}collection(i,u){let p;p="string"==typeof i?this.firestore.collection(i):i;const{ref:_,query:w}=Hu(p,u),O=this.schedulers.ngZone.run(()=>_);return new N0(O,w,this)}collectionGroup(i,u){const p=u||(w=>w),_=this.firestore.collectionGroup(i);return new Dy(p(_),this)}doc(i){let u;u="string"==typeof i?this.firestore.doc(i):i;const p=this.schedulers.ngZone.run(()=>u);return new M0(p,this)}createId(){return this.firestore.collection("_").doc().id}}return l.\u0275fac=function(i){return new(i||l)(T.LFG(at.Dh),T.LFG(at.xv,8),T.LFG(dm,8),T.LFG(aw,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Te.HU),T.LFG(Iy,8),T.LFG(Cy,8),T.LFG(du.zQ,8),T.LFG(du.Qv,8),T.LFG(du.L6,8),T.LFG(du._Q,8),T.LFG(du.rT,8),T.LFG(du.lh,8),T.LFG(du.f7,8),T.LFG(rw.nm,8))},l.\u0275prov=T.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),lw=(()=>{class l{constructor(){iw.Z.registerVersion("angularfire",Te.q4.full,"fst-compat")}static enablePersistence(i){return{ngModule:l,providers:[{provide:dm,useValue:!0},{provide:Iy,useValue:i}]}}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({providers:[hm]}),l})()},2011:(zt,We,j)=>{j.d(We,{Dh:()=>pe,GT:()=>Te,cc:()=>Ke,hO:()=>et,on:()=>me,pX:()=>Se,xv:()=>Fe});var T=j(4650),Y=j(9260),h=j(2122);zt=j.hmd(zt);const ve=["ngOnDestroy"],Se=(ct,fe,ht,lt={})=>new Proxy(ct,{get:(Qe,Ye)=>ht.runOutsideAngular(()=>{var Et;if(ct[Ye])return!(null===(Et=lt?.spy)||void 0===Et)&&Et.get&&lt.spy.get(Ye,ct[Ye]),ct[Ye];if(ve.indexOf(Ye)>-1)return()=>{};const Ne=fe.toPromise().then(Ie=>{const tt=Ie&&Ie[Ye];return"function"==typeof tt?tt.bind(Ie):tt&&tt.then?tt.then(it=>ht.run(()=>it)):ht.run(()=>tt)});return new Proxy(()=>{},{get:(Ie,tt)=>Ne[tt],apply:(Ie,tt,it)=>Ne.then(ft=>{var qt;const Pt=ft&&ft(...it);return!(null===(qt=lt?.spy)||void 0===qt)&&qt.apply&&lt.spy.apply(Ye,it,Pt),Pt})})})}),Te=(ct,fe)=>{fe.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(lt=>{Object.defineProperty(ct.prototype,lt,Object.getOwnPropertyDescriptor(ht.prototype||ht,lt))})})};class ke{constructor(fe){return fe}}const pe=new T.OlP("angularfire2.app.options"),Fe=new T.OlP("angularfire2.app.name");function me(ct,fe,ht){const Qe="object"==typeof ht&&ht||{};Qe.name=Qe.name||"string"==typeof ht&&ht||"[DEFAULT]";const Et=Y.Z.apps.filter(Ne=>Ne&&Ne.name===Qe.name)[0]||fe.runOutsideAngular(()=>Y.Z.initializeApp(ct,Qe));try{JSON.stringify(ct)!==JSON.stringify(Et.options)&&de("error",`${Et.name} Firebase App already initialized with different options${zt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ke(Et)}const de=(ct,...fe)=>{(0,T.X6Q)()&&typeof console<"u"&&console[ct](...fe)},Ce={provide:ke,useFactory:me,deps:[pe,T.R0b,[new T.FiY,Fe]]};let et=(()=>{class ct{constructor(ht){Y.Z.registerVersion("angularfire",h.q4.full,"core"),Y.Z.registerVersion("angularfire",h.q4.full,"app-compat"),Y.Z.registerVersion("angular",T.q4F.full,ht.toString())}static initializeApp(ht,lt){return{ngModule:ct,providers:[{provide:pe,useValue:ht},{provide:Fe,useValue:lt}]}}}return ct.\u0275fac=function(ht){return new(ht||ct)(T.LFG(T.Lbi))},ct.\u0275mod=T.oAB({type:ct}),ct.\u0275inj=T.cJS({providers:[Ce]}),ct})();function Ke(ct,fe,ht,lt,Qe){const[,Ye,Et]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===ct)||[];if(Ye)return function at(ct,fe){try{return ct.toString()===fe.toString()}catch{return ct===fe}}(Qe,Et)||(Je("error",`${fe} was already initialized on the ${ht} Firebase App with different settings.${Nt?" You may need to reload as Firebase is not HMR aware.":""}`),Je("warn",{is:Qe,was:Et})),Ye;{const Ne=lt();return globalThis.\u0275AngularfireInstanceCache.push([ct,Ne,Qe]),Ne}}const Nt=!!zt.hot,Je=(ct,...fe)=>{(0,T.X6Q)()&&typeof console<"u"&&console[ct](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(zt,We,j)=>{j.d(We,{q4:()=>wu,iC:()=>ho,fc:()=>Ks,HU:()=>Kt,vb:()=>ee,JM:()=>K});var T=j(4650),Y=j(259),h=j(5861),ve=j(9681),Se=j(2090),Te=j(4859),ke=j(1877),pe=j(8766);const Fe="@firebase/installations",me="0.6.4",de=1e4,Ce=`w:${me}`,et="FIS_v2",Ke="https://firebaseinstallations.googleapis.com/v1",at=36e5,fe=new Se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(F){return F instanceof Se.ZR&&F.code.includes("request-failed")}function lt({projectId:F}){return`${Ke}/projects/${F}/installations`}function Qe(F){return{token:F.token,requestStatus:2,expiresIn:ft(F.expiresIn),creationTime:Date.now()}}function Ye(F,G){return Et.apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(F,G){const ge=(yield G.json()).error;return fe.create("request-failed",{requestName:F,serverCode:ge.code,serverMessage:ge.message,serverStatus:ge.status})})).apply(this,arguments)}function Ne({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function tt(F){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(F){const G=yield F();return G.status>=500&&G.status<600?F():G})).apply(this,arguments)}function ft(F){return Number(F.replace("s","000"))}function Le(){return(Le=(0,h.Z)(function*({appConfig:F,heartbeatServiceProvider:G},{fid:Z}){const ge=lt(F),xe=Ne(F),ze=G.getImmediate({optional:!0});if(ze){const Sn=yield ze.getHeartbeatsHeader();Sn&&xe.append("x-firebase-client",Sn)}const dn={method:"POST",headers:xe,body:JSON.stringify({fid:Z,authVersion:et,appId:F.appId,sdkVersion:Ce})},bn=yield tt(()=>fetch(ge,dn));if(bn.ok){const Sn=yield bn.json();return{fid:Sn.fid||Z,registrationStatus:2,refreshToken:Sn.refreshToken,authToken:Qe(Sn.authToken)}}throw yield Ye("Create Installation",bn)})).apply(this,arguments)}function rt(F){return new Promise(G=>{setTimeout(G,F)})}const nt=/^[cdef][\w-]{21}$/,yt="";function st(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const Z=function Mt(F){return function $e(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return nt.test(Z)?Z:yt}catch{return yt}}function It(F){return`${F.appName}!${F.appId}`}const tn=new Map;function jt(F,G){const Z=It(F);yn(Z,G),function xn(F,G){const Z=function Hn(){return!jn&&"BroadcastChannel"in self&&(jn=new BroadcastChannel("[Firebase] FID Change"),jn.onmessage=F=>{yn(F.data.key,F.data.fid)}),jn}();Z&&Z.postMessage({key:F,fid:G}),function Dr(){0===tn.size&&jn&&(jn.close(),jn=null)}()}(Z,G)}function yn(F,G){const Z=tn.get(F);if(Z)for(const ge of Z)ge(G)}let jn=null;const pn="firebase-installations-database",cr=1,Cn="firebase-installations-store";let qn=null;function Kr(){return qn||(qn=(0,pe.X3)(pn,cr,{upgrade:(F,G)=>{0===G&&F.createObjectStore(Cn)}})),qn}function en(F,G){return An.apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(F,G){const Z=It(F),xe=(yield Kr()).transaction(Cn,"readwrite"),ze=xe.objectStore(Cn),At=yield ze.get(Z);return yield ze.put(G,Z),yield xe.done,(!At||At.fid!==G.fid)&&jt(F,G.fid),G})).apply(this,arguments)}function Gt(F){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(F){const G=It(F),ge=(yield Kr()).transaction(Cn,"readwrite");yield ge.objectStore(Cn).delete(G),yield ge.done})).apply(this,arguments)}function ei(F,G){return ti.apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(F,G){const Z=It(F),xe=(yield Kr()).transaction(Cn,"readwrite"),ze=xe.objectStore(Cn),At=yield ze.get(Z),dn=G(At);return void 0===dn?yield ze.delete(Z):yield ze.put(dn,Z),yield xe.done,dn&&(!At||At.fid!==dn.fid)&&jt(F,dn.fid),dn})).apply(this,arguments)}function ni(F){return ri.apply(this,arguments)}function ri(){return ri=(0,h.Z)(function*(F){let G;const Z=yield ei(F.appConfig,ge=>{const xe=function mn(F){return Ir(F||{fid:st(),registrationStatus:0})}(ge),ze=function rn(F,G){if(0===G.registrationStatus){if(!navigator.onLine)return{installationEntry:G,registrationPromise:Promise.reject(fe.create("app-offline"))};const Z={fid:G.fid,registrationStatus:1,registrationTime:Date.now()},ge=function sn(F,G){return pr.apply(this,arguments)}(F,Z);return{installationEntry:Z,registrationPromise:ge}}return 1===G.registrationStatus?{installationEntry:G,registrationPromise:nr(F)}:{installationEntry:G}}(F,xe);return G=ze.registrationPromise,ze.installationEntry});return Z.fid===yt?{installationEntry:yield G}:{installationEntry:Z,registrationPromise:G}}),ri.apply(this,arguments)}function pr(){return pr=(0,h.Z)(function*(F,G){try{const Z=yield function Pt(F,G){return Le.apply(this,arguments)}(F,G);return en(F.appConfig,Z)}catch(Z){throw ht(Z)&&409===Z.customData.serverCode?yield Gt(F.appConfig):yield en(F.appConfig,{fid:G.fid,registrationStatus:0}),Z}}),pr.apply(this,arguments)}function nr(F){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(F){let G=yield br(F.appConfig);for(;1===G.registrationStatus;)yield rt(100),G=yield br(F.appConfig);if(0===G.registrationStatus){const{installationEntry:Z,registrationPromise:ge}=yield ni(F);return ge||Z}return G})).apply(this,arguments)}function br(F){return ei(F,G=>{if(!G)throw fe.create("installation-not-found");return Ir(G)})}function Ir(F){return function Jn(F){return 1===F.registrationStatus&&F.registrationTime+de<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function jr(){return(jr=(0,h.Z)(function*({appConfig:F,heartbeatServiceProvider:G},Z){const ge=function kn(F,{fid:G}){return`${lt(F)}/${G}/authTokens:generate`}(F,Z),xe=function Ie(F,{refreshToken:G}){const Z=Ne(F);return Z.append("Authorization",function qt(F){return`${et} ${F}`}(G)),Z}(F,Z),ze=G.getImmediate({optional:!0});if(ze){const Sn=yield ze.getHeartbeatsHeader();Sn&&xe.append("x-firebase-client",Sn)}const dn={method:"POST",headers:xe,body:JSON.stringify({installation:{sdkVersion:Ce,appId:F.appId}})},bn=yield tt(()=>fetch(ge,dn));if(bn.ok)return Qe(yield bn.json());throw yield Ye("Generate Auth Token",bn)})).apply(this,arguments)}function Ci(F){return Cr.apply(this,arguments)}function Cr(){return Cr=(0,h.Z)(function*(F,G=!1){let Z;const ge=yield ei(F.appConfig,ze=>{if(!En(ze))throw fe.create("not-registered");const At=ze.authToken;if(!G&&function kr(F){return 2===F.requestStatus&&!function be(F){const G=Date.now();return G<F.creationTime||F.creationTime+F.expiresIn<G+at}(F)}(At))return ze;if(1===At.requestStatus)return Z=function Rt(F,G){return bt.apply(this,arguments)}(F,G),ze;{if(!navigator.onLine)throw fe.create("app-offline");const dn=function _e(F){const G={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:G})}(ze);return Z=function hn(F,G){return Yt.apply(this,arguments)}(F,dn),dn}});return Z?yield Z:ge.authToken}),Cr.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(F,G){let Z=yield Ut(F.appConfig);for(;1===Z.authToken.requestStatus;)yield rt(100),Z=yield Ut(F.appConfig);const ge=Z.authToken;return 0===ge.requestStatus?Ci(F,G):ge})).apply(this,arguments)}function Ut(F){return ei(F,G=>{if(!En(G))throw fe.create("not-registered");return function te(F){return 1===F.requestStatus&&F.requestTime+de<Date.now()}(G.authToken)?Object.assign(Object.assign({},G),{authToken:{requestStatus:0}}):G})}function Yt(){return Yt=(0,h.Z)(function*(F,G){try{const Z=yield function Pn(F,G){return jr.apply(this,arguments)}(F,G),ge=Object.assign(Object.assign({},G),{authToken:Z});return yield en(F.appConfig,ge),Z}catch(Z){if(!ht(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const ge=Object.assign(Object.assign({},G),{authToken:{requestStatus:0}});yield en(F.appConfig,ge)}else yield Gt(F.appConfig);throw Z}}),Yt.apply(this,arguments)}function En(F){return void 0!==F&&2===F.registrationStatus}function Q(){return(Q=(0,h.Z)(function*(F){const G=F,{installationEntry:Z,registrationPromise:ge}=yield ni(G);return ge?ge.catch(console.error):Ci(G).catch(console.error),Z.fid})).apply(this,arguments)}function ae(){return ae=(0,h.Z)(function*(F,G=!1){const Z=F;return yield function he(F){return oe.apply(this,arguments)}(Z),(yield Ci(Z,G)).token}),ae.apply(this,arguments)}function oe(){return(oe=(0,h.Z)(function*(F){const{registrationPromise:G}=yield ni(F);G&&(yield G)})).apply(this,arguments)}function Ko(F){return fe.create("missing-app-config-values",{valueName:F})}const _a="installations",bs=F=>{const G=F.getProvider("app").getImmediate(),Z=function qi(F){if(!F||!F.options)throw Ko("App Configuration");if(!F.name)throw Ko("App Name");const G=["projectId","apiKey","appId"];for(const Z of G)if(!F.options[Z])throw Ko(Z);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(G);return{app:G,appConfig:Z,heartbeatServiceProvider:(0,ve._getProvider)(G,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=F=>{const G=F.getProvider("app").getImmediate(),Z=(0,ve._getProvider)(G,_a).getImmediate();return{getId:()=>function re(F){return Q.apply(this,arguments)}(Z),getToken:xe=>function Pe(F){return ae.apply(this,arguments)}(Z,xe)}};(function Co(){(0,ve._registerComponent)(new Te.wA(_a,bs,"PUBLIC")),(0,ve._registerComponent)(new Te.wA("installations-internal",Vs,"PRIVATE"))})(),(0,ve.registerVersion)(Fe,me),(0,ve.registerVersion)(Fe,me,"esm2017");const Yn="@firebase/remote-config",sr=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xs{constructor(G,Z,ge,xe){this.client=G,this.storage=Z,this.storageCache=ge,this.logger=xe}isCachedDataFresh(G,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-Z,xe=ge<=G;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${G}. Is cache hit: ${xe}.`),xe}fetch(G){var Z=this;return(0,h.Z)(function*(){const[ge,xe]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(xe&&Z.isCachedDataFresh(G.cacheMaxAgeMillis,ge))return xe;G.eTag=xe&&xe.eTag;const ze=yield Z.client.fetch(G),At=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ze.status&&At.push(Z.storage.setLastSuccessfulFetchResponse(ze)),yield Promise.all(At),ze})()}}function Zr(F=navigator){return F.languages&&F.languages[0]||F.language}class bi{constructor(G,Z,ge,xe,ze,At){this.firebaseInstallations=G,this.sdkVersion=Z,this.namespace=ge,this.projectId=xe,this.apiKey=ze,this.appId=At}fetch(G){var Z=this;return(0,h.Z)(function*(){const[ge,xe]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,dn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":G.eTag||"*"},bn={sdk_version:Z.sdkVersion,app_instance_id:ge,app_instance_id_token:xe,app_id:Z.appId,language_code:Zr()},Sn={method:"POST",headers:dn,body:JSON.stringify(bn)},Zn=fetch(At,Sn),wn=new Promise((Rs,da)=>{G.signal.addEventListener(()=>{const xc=new Error("The operation was aborted.");xc.name="AbortError",da(xc)})});let Bo;try{yield Promise.race([Zn,wn]),Bo=yield Zn}catch(Rs){let da="fetch-client-network";throw"AbortError"===Rs?.name&&(da="fetch-timeout"),sr.create(da,{originalErrorMessage:Rs?.message})}let ds=Bo.status;const Eu=Bo.headers.get("ETag")||void 0;let ar,Mr;if(200===Bo.status){let Rs;try{Rs=yield Bo.json()}catch(da){throw sr.create("fetch-client-parse",{originalErrorMessage:da?.message})}ar=Rs.entries,Mr=Rs.state}if("INSTANCE_STATE_UNSPECIFIED"===Mr?ds=500:"NO_CHANGE"===Mr?ds=304:("NO_TEMPLATE"===Mr||"EMPTY_CONFIG"===Mr)&&(ar={}),304!==ds&&200!==ds)throw sr.create("fetch-status",{httpStatus:ds});return{status:ds,eTag:Eu,config:ar}})()}}class ye{constructor(G,Z){this.client=G,this.storage=Z}fetch(G){var Z=this;return(0,h.Z)(function*(){const ge=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(G,ge)})()}attemptFetch(G,{throttleEndTimeMillis:Z,backoffCount:ge}){var xe=this;return(0,h.Z)(function*(){yield function Es(F,G){return new Promise((Z,ge)=>{const xe=Math.max(G-Date.now(),0),ze=setTimeout(Z,xe);F.addEventListener(()=>{clearTimeout(ze),ge(sr.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(G.signal,Z);try{const ze=yield xe.client.fetch(G);return yield xe.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function Re(F){if(!(F instanceof Se.ZR&&F.customData))return!1;const G=Number(F.customData.httpStatus);return 429===G||500===G||503===G||504===G}(ze))throw ze;const At={throttleEndTimeMillis:Date.now()+(0,Se.$s)(ge),backoffCount:ge+1};return yield xe.storage.setThrottleMetadata(At),xe.attemptFetch(G,At)}})()}}class Lt{constructor(G,Z,ge,xe,ze){this.app=G,this._client=Z,this._storageCache=ge,this._storage=xe,this._logger=ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function an(F,G){const Z=F.target.error||void 0;return sr.create(G,{originalErrorMessage:Z&&Z?.message})}const Rn="app_namespace_store";class Qr{constructor(G,Z,ge,xe=function Ds(){return new Promise((F,G)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=ge=>{G(an(ge,"storage-open"))},Z.onsuccess=ge=>{F(ge.target.result)},Z.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(Rn,{keyPath:"compositeKey"})}}catch(Z){G(sr.create("storage-open",{originalErrorMessage:Z?.message}))}})}()){this.appId=G,this.appName=Z,this.namespace=ge,this.openDbPromise=xe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(G){return this.set("last_fetch_status",G)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(G){return this.set("last_successful_fetch_timestamp_millis",G)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(G){return this.set("last_successful_fetch_response",G)}getActiveConfig(){return this.get("active_config")}setActiveConfig(G){return this.set("active_config",G)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(G){return this.set("active_config_etag",G)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(G){return this.set("throttle_metadata",G)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(G){var Z=this;return(0,h.Z)(function*(){const ge=yield Z.openDbPromise;return new Promise((xe,ze)=>{const dn=ge.transaction([Rn],"readonly").objectStore(Rn),bn=Z.createCompositeKey(G);try{const Sn=dn.get(bn);Sn.onerror=Zn=>{ze(an(Zn,"storage-get"))},Sn.onsuccess=Zn=>{const wn=Zn.target.result;xe(wn?wn.value:void 0)}}catch(Sn){ze(sr.create("storage-get",{originalErrorMessage:Sn?.message}))}})})()}set(G,Z){var ge=this;return(0,h.Z)(function*(){const xe=yield ge.openDbPromise;return new Promise((ze,At)=>{const bn=xe.transaction([Rn],"readwrite").objectStore(Rn),Sn=ge.createCompositeKey(G);try{const Zn=bn.put({compositeKey:Sn,value:Z});Zn.onerror=wn=>{At(an(wn,"storage-set"))},Zn.onsuccess=()=>{ze()}}catch(Zn){At(sr.create("storage-set",{originalErrorMessage:Zn?.message}))}})})()}delete(G){var Z=this;return(0,h.Z)(function*(){const ge=yield Z.openDbPromise;return new Promise((xe,ze)=>{const dn=ge.transaction([Rn],"readwrite").objectStore(Rn),bn=Z.createCompositeKey(G);try{const Sn=dn.delete(bn);Sn.onerror=Zn=>{ze(an(Zn,"storage-delete"))},Sn.onsuccess=()=>{xe()}}catch(Sn){ze(sr.create("storage-delete",{originalErrorMessage:Sn?.message}))}})})()}createCompositeKey(G){return[this.appId,this.appName,this.namespace,G].join()}}class _r{constructor(G){this.storage=G}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var G=this;return(0,h.Z)(function*(){const Z=G.storage.getLastFetchStatus(),ge=G.storage.getLastSuccessfulFetchTimestampMillis(),xe=G.storage.getActiveConfig(),ze=yield Z;ze&&(G.lastFetchStatus=ze);const At=yield ge;At&&(G.lastSuccessfulFetchTimestampMillis=At);const dn=yield xe;dn&&(G.activeConfig=dn)})()}setLastFetchStatus(G){return this.lastFetchStatus=G,this.storage.setLastFetchStatus(G)}setLastSuccessfulFetchTimestampMillis(G){return this.lastSuccessfulFetchTimestampMillis=G,this.storage.setLastSuccessfulFetchTimestampMillis(G)}setActiveConfig(G){return this.activeConfig=G,this.storage.setActiveConfig(G)}}function js(){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}!function Gs(){(0,ve._registerComponent)(new Te.wA("remote-config",function F(G,{instanceIdentifier:Z}){const ge=G.getProvider("app").getImmediate(),xe=G.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw sr.create("registration-window");if(!(0,Se.hl)())throw sr.create("indexed-db-unavailable");const{projectId:ze,apiKey:At,appId:dn}=ge.options;if(!ze)throw sr.create("registration-project-id");if(!At)throw sr.create("registration-api-key");if(!dn)throw sr.create("registration-app-id");const bn=new Qr(dn,ge.name,Z=Z||"firebase"),Sn=new _r(bn),Zn=new ke.Yd(Yn);Zn.logLevel=ke.in.ERROR;const wn=new bi(xe,ve.SDK_VERSION,Z,ze,At,dn),Bo=new ye(wn,bn),ds=new Xs(Bo,bn,Sn,Zn),Eu=new Lt(ge,ds,Sn,bn,Zn);return function ii(F){const G=(0,Se.m9)(F);G._initializePromise||(G._initializePromise=G._storageCache.loadFromStorage().then(()=>{G._isInitializationComplete=!0}))}(Eu),Eu},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(Yn,"0.4.4"),(0,ve.registerVersion)(Yn,"0.4.4","esm2017")}();const Ts="/firebase-messaging-sw.js",Hs="/firebase-cloud-messaging-push-scope",Yo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",go="https://fcmregistrations.googleapis.com/v1",Zo="google.c.a.c_id",Qo="google.c.a.c_l",Ao="google.c.a.ts",Ss="google.c.a.e";var As=(()=>{return(F=As||(As={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",As;var F})();function eo(F){const G=new Uint8Array(F);return btoa(String.fromCharCode(...G)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zu(F){const Z=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ge=atob(Z),xe=new Uint8Array(ge.length);for(let ze=0;ze<ge.length;++ze)xe[ze]=ge.charCodeAt(ze);return xe}const xa="fcm_token_details_db",ls=5,mo="fcm_token_object_Store";function Oo(){return Oo=(0,h.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ze=>ze.name).includes(xa))return null;let G=null;return(yield(0,pe.X3)(xa,ls,{upgrade:(ge=(0,h.Z)(function*(xe,ze,At,dn){var bn;if(ze<2||!xe.objectStoreNames.contains(mo))return;const Sn=dn.objectStore(mo),Zn=yield Sn.index("fcmSenderId").get(F);if(yield Sn.clear(),Zn)if(2===ze){const wn=Zn;if(!wn.auth||!wn.p256dh||!wn.endpoint)return;G={token:wn.fcmToken,createTime:null!==(bn=wn.createTime)&&void 0!==bn?bn:Date.now(),subscriptionOptions:{auth:wn.auth,p256dh:wn.p256dh,endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:"string"==typeof wn.vapidKey?wn.vapidKey:eo(wn.vapidKey)}}}else if(3===ze){const wn=Zn;G={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:eo(wn.auth),p256dh:eo(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:eo(wn.vapidKey)}}}else if(4===ze){const wn=Zn;G={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:eo(wn.auth),p256dh:eo(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:eo(wn.vapidKey)}}}}),function(ze,At,dn,bn){return ge.apply(this,arguments)})})).close(),yield(0,pe.Lj)(xa),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),function va(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:G}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof G.auth&&G.auth.length>0&&"string"==typeof G.p256dh&&G.p256dh.length>0&&"string"==typeof G.endpoint&&G.endpoint.length>0&&"string"==typeof G.swScope&&G.swScope.length>0&&"string"==typeof G.vapidKey&&G.vapidKey.length>0}(G)?G:null;var ge}),Oo.apply(this,arguments)}const wl="firebase-messaging-database",Hr=1,Ui="firebase-messaging-store";let $s=null;function no(){return $s||($s=(0,pe.X3)(wl,Hr,{upgrade:(F,G)=>{0===G&&F.createObjectStore(Ui)}})),$s}function ka(F){return zs.apply(this,arguments)}function zs(){return zs=(0,h.Z)(function*(F){const G=us(F),ge=yield(yield no()).transaction(Ui).objectStore(Ui).get(G);if(ge)return ge;{const xe=yield function to(F){return Oo.apply(this,arguments)}(F.appConfig.senderId);if(xe)return yield Fa(F,xe),xe}}),zs.apply(this,arguments)}function Fa(F,G){return pu.apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(F,G){const Z=us(F),xe=(yield no()).transaction(Ui,"readwrite");return yield xe.objectStore(Ui).put(G,Z),yield xe.done,G})).apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(F){const G=us(F),ge=(yield no()).transaction(Ui,"readwrite");yield ge.objectStore(Ui).delete(G),yield ge.done})).apply(this,arguments)}function us({appConfig:F}){return F.appId}const yr=new Se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rl(F,G){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,h.Z)(function*(F,G){const Z=yield il(F),ge=ui(G),xe={method:"POST",headers:Z,body:JSON.stringify(ge)};let ze;try{ze=yield(yield fetch(gu(F.appConfig),xe)).json()}catch(At){throw yr.create("token-subscribe-failed",{errorInfo:At?.toString()})}if(ze.error)throw yr.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw yr.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function Bi(){return(Bi=(0,h.Z)(function*(F,G){const Z=yield il(F),ge=ui(G.subscriptionOptions),xe={method:"PATCH",headers:Z,body:JSON.stringify(ge)};let ze;try{ze=yield(yield fetch(`${gu(F.appConfig)}/${G.token}`,xe)).json()}catch(At){throw yr.create("token-update-failed",{errorInfo:At?.toString()})}if(ze.error)throw yr.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw yr.create("token-update-no-token");return ze.token})).apply(this,arguments)}function Jo(F,G){return gi.apply(this,arguments)}function gi(){return(gi=(0,h.Z)(function*(F,G){const ge={method:"DELETE",headers:yield il(F)};try{const ze=yield(yield fetch(`${gu(F.appConfig)}/${G}`,ge)).json();if(ze.error)throw yr.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(xe){throw yr.create("token-unsubscribe-failed",{errorInfo:xe?.toString()})}})).apply(this,arguments)}function gu({projectId:F}){return`${go}/projects/${F}/registrations`}function il(F){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,h.Z)(function*({appConfig:F,installations:G}){const Z=yield G.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function ui({p256dh:F,auth:G,endpoint:Z,vapidKey:ge}){const xe={web:{endpoint:Z,auth:G,p256dh:F}};return ge!==Yo&&(xe.web.applicationPubKey=ge),xe}const Ba=6048e5;function ro(){return ro=(0,h.Z)(function*(F){const G=yield function Dl(F,G){return ea.apply(this,arguments)}(F.swRegistration,F.vapidKey),Z={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:G.endpoint,auth:eo(G.getKey("auth")),p256dh:eo(G.getKey("p256dh"))},ge=yield ka(F.firebaseDependencies);if(ge){if(function mu(F,G){return G.vapidKey===F.vapidKey&&G.endpoint===F.endpoint&&G.auth===F.auth&&G.p256dh===F.p256dh}(ge.subscriptionOptions,Z))return Date.now()>=ge.createTime+Ba?function El(F,G){return Tn.apply(this,arguments)}(F,{token:ge.token,createTime:Date.now(),subscriptionOptions:Z}):ge.token;try{yield Jo(F.firebaseDependencies,ge.token)}catch(xe){console.warn(xe)}return No(F.firebaseDependencies,Z)}return No(F.firebaseDependencies,Z)}),ro.apply(this,arguments)}function Ga(){return Ga=(0,h.Z)(function*(F){const G=yield ka(F.firebaseDependencies);G&&(yield Jo(F.firebaseDependencies,G.token),yield function Wl(F){return La.apply(this,arguments)}(F.firebaseDependencies));const Z=yield F.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()}),Ga.apply(this,arguments)}function Tn(){return Tn=(0,h.Z)(function*(F,G){try{const Z=yield function Nr(F,G){return Bi.apply(this,arguments)}(F.firebaseDependencies,G),ge=Object.assign(Object.assign({},G),{token:Z,createTime:Date.now()});return yield Fa(F.firebaseDependencies,ge),Z}catch(Z){throw yield function Yi(F){return Ga.apply(this,arguments)}(F),Z}}),Tn.apply(this,arguments)}function No(F,G){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(F,G){const ge={token:yield rl(F,G),createTime:Date.now(),subscriptionOptions:G};return yield Fa(F,ge),ge.token})).apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(F,G){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zu(G)})})).apply(this,arguments)}function Mo(F){const G={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function ja(F,G){if(!G.notification)return;F.notification={};const Z=G.notification.title;Z&&(F.notification.title=Z);const ge=G.notification.body;ge&&(F.notification.body=ge);const xe=G.notification.image;xe&&(F.notification.image=xe);const ze=G.notification.icon;ze&&(F.notification.icon=ze)}(G,F),function wi(F,G){G.data&&(F.data=G.data)}(G,F),function ut(F,G){var Z,ge,xe,ze,At;if(!(G.fcmOptions||null!==(Z=G.notification)&&void 0!==Z&&Z.click_action))return;F.fcmOptions={};const dn=null!==(xe=null===(ge=G.fcmOptions)||void 0===ge?void 0:ge.link)&&void 0!==xe?xe:null===(ze=G.notification)||void 0===ze?void 0:ze.click_action;dn&&(F.fcmOptions.link=dn);const bn=null===(At=G.fcmOptions)||void 0===At?void 0:At.analytics_label;bn&&(F.fcmOptions.analyticsLabel=bn)}(G,F),G}function ba(F,G){const Z=[];for(let ge=0;ge<F.length;ge++)Z.push(F.charAt(ge)),ge<G.length&&Z.push(G.charAt(ge));return Z.join("")}function Ei(F){return yr.create("missing-app-config-values",{valueName:F})}ba("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ba("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Il{constructor(G,Z,ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const xe=function ta(F){if(!F||!F.options)throw Ei("App Configuration Object");if(!F.name)throw Ei("App Name");const G=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=F;for(const ge of G)if(!Z[ge])throw Ei(ge);return{appName:F.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(G);this.firebaseDependencies={app:G,appConfig:xe,installations:Z,analyticsProvider:ge}}_delete(){return Promise.resolve()}}function Ro(F){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(Ts,{scope:Hs}),F.swRegistration.update().catch(()=>{})}catch(G){throw yr.create("failed-service-worker-registration",{browserErrorMessage:G?.message})}})).apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(F,G){if(!G&&!F.swRegistration&&(yield Ro(F)),G||!F.swRegistration){if(!(G instanceof ServiceWorkerRegistration))throw yr.create("invalid-sw-registration");F.swRegistration=G}})).apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(F,G){G?F.vapidKey=G:F.vapidKey||(F.vapidKey=Yo)})).apply(this,arguments)}function $r(){return $r=(0,h.Z)(function*(F,G){if(!navigator)throw yr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yr.create("permission-blocked");return yield function _o(F,G){return Ha.apply(this,arguments)}(F,G?.vapidKey),yield function sl(F,G){return na.apply(this,arguments)}(F,G?.serviceWorkerRegistration),function Va(F){return ro.apply(this,arguments)}(F)}),$r.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(F,G,Z){const ge=function Po(F){switch(F){case As.NOTIFICATION_CLICKED:return"notification_open";case As.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(G);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(ge,{message_id:Z[Zo],message_name:Z[Qo],message_time:Z[Ao],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ia(){return ia=(0,h.Z)(function*(F,G){const Z=G.data;if(!Z.isFirebaseMessaging)return;F.onMessageHandler&&Z.messageType===As.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(Mo(Z)):F.onMessageHandler.next(Mo(Z)));const ge=Z.data;(function rr(F){return"object"==typeof F&&!!F&&Zo in F})(ge)&&"1"===ge[Ss]&&(yield function Vi(F,G,Z){return ra.apply(this,arguments)}(F,Z.messageType,ge))}),ia.apply(this,arguments)}const xo="@firebase/messaging",sa=F=>{const G=new Il(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function Qi(F,G){return ia.apply(this,arguments)}(G,Z)),G},yo=F=>{const G=F.getProvider("messaging").getImmediate();return{getToken:ge=>function Cl(F,G){return $r.apply(this,arguments)}(G,ge)}};function Tl(){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(){try{yield(0,Se.eu)()}catch{return!1}return typeof window<"u"&&(0,Se.hl)()&&(0,Se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ws(){(0,ve._registerComponent)(new Te.wA("messaging",sa,"PUBLIC")),(0,ve._registerComponent)(new Te.wA("messaging-internal",yo,"PRIVATE")),(0,ve.registerVersion)(xo,"0.12.4"),(0,ve.registerVersion)(xo,"0.12.4","esm2017")}();const ql="analytics",_u="firebase_id",mi="origin",Jr=6e4,Xr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yl="https://www.googletagmanager.com/gtag/js",Di=new ke.Yd("@firebase/analytics");function Rc(F){return Promise.all(F.map(G=>G.catch(Z=>Z)))}function Al(){return(Al=(0,h.Z)(function*(F,G,Z,ge,xe,ze){const At=ge[xe];try{if(At)yield G[At];else{const bn=(yield Rc(Z)).find(Sn=>Sn.measurementId===xe);bn&&(yield G[bn.appId])}}catch(dn){Di.error(dn)}F("config",xe,ze)})).apply(this,arguments)}function R(){return(R=(0,h.Z)(function*(F,G,Z,ge,xe){try{let ze=[];if(xe&&xe.send_to){let At=xe.send_to;Array.isArray(At)||(At=[At]);const dn=yield Rc(Z);for(const bn of At){const Sn=dn.find(wn=>wn.measurementId===bn),Zn=Sn&&G[Sn.appId];if(!Zn){ze=[];break}ze.push(Zn)}}0===ze.length&&(ze=Object.values(G)),yield Promise.all(ze),F("event",ge,xe||{})}catch(ze){Di.error(ze)}})).apply(this,arguments)}const Ue=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wt=30,ot=new class or{constructor(G={},Z=1e3){this.throttleMetadata=G,this.intervalMillis=Z}getThrottleMetadata(G){return this.throttleMetadata[G]}setThrottleMetadata(G,Z){this.throttleMetadata[G]=Z}deleteThrottleMetadata(G){delete this.throttleMetadata[G]}};function vn(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function Dn(){return(Dn=(0,h.Z)(function*(F){var G;const{appId:Z,apiKey:ge}=F,xe={method:"GET",headers:vn(ge)},ze=Xr.replace("{app-id}",Z),At=yield fetch(ze,xe);if(200!==At.status&&304!==At.status){let dn="";try{const bn=yield At.json();null!==(G=bn.error)&&void 0!==G&&G.message&&(dn=bn.error.message)}catch{}throw Ue.create("config-fetch-failed",{httpStatus:At.status,responseMessage:dn})}return At.json()})).apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(F,G=ot,Z){const{appId:ge,apiKey:xe,measurementId:ze}=F.options;if(!ge)throw Ue.create("no-app-id");if(!xe){if(ze)return{measurementId:ze,appId:ge};throw Ue.create("no-api-key")}const At=G.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},dn=new Tr;return setTimeout((0,h.Z)(function*(){dn.abort()}),void 0!==Z?Z:Jr),_i({appId:ge,apiKey:xe,measurementId:ze},At,dn,G)})).apply(this,arguments)}function _i(F,G,Z){return kt.apply(this,arguments)}function kt(){return kt=(0,h.Z)(function*(F,{throttleEndTimeMillis:G,backoffCount:Z},ge,xe=ot){var ze;const{appId:At,measurementId:dn}=F;try{yield function je(F,G){return new Promise((Z,ge)=>{const xe=Math.max(G-Date.now(),0),ze=setTimeout(Z,xe);F.addEventListener(()=>{clearTimeout(ze),ge(Ue.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(ge,G)}catch(bn){if(dn)return Di.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dn} provided in the "measurementId" field in the local Firebase config. [${bn?.message}]`),{appId:At,measurementId:dn};throw bn}try{const bn=yield function Vn(F){return Dn.apply(this,arguments)}(F);return xe.deleteThrottleMetadata(At),bn}catch(bn){const Sn=bn;if(!function _t(F){if(!(F instanceof Se.ZR&&F.customData))return!1;const G=Number(F.customData.httpStatus);return 429===G||500===G||503===G||504===G}(Sn)){if(xe.deleteThrottleMetadata(At),dn)return Di.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dn} provided in the "measurementId" field in the local Firebase config. [${Sn?.message}]`),{appId:At,measurementId:dn};throw bn}const Zn=503===Number(null===(ze=Sn?.customData)||void 0===ze?void 0:ze.httpStatus)?(0,Se.$s)(Z,xe.intervalMillis,wt):(0,Se.$s)(Z,xe.intervalMillis),wn={throttleEndTimeMillis:Date.now()+Zn,backoffCount:Z+1};return xe.setThrottleMetadata(At,wn),Di.debug(`Calling attemptFetch again in ${Zn} millis`),_i(F,wn,ge,xe)}}),kt.apply(this,arguments)}class Tr{constructor(){this.listeners=[]}addEventListener(G){this.listeners.push(G)}abort(){this.listeners.forEach(G=>G())}}let vo,Mn;function Fo(){return(Fo=(0,h.Z)(function*(F,G,Z,ge,xe){if(xe&&xe.global)F("event",Z,ge);else{const ze=yield G;F("event",Z,Object.assign(Object.assign({},ge),{send_to:ze}))}})).apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(){if(!(0,Se.hl)())return Di.warn(Ue.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch(F){return Di.warn(Ue.create("indexeddb-unavailable",{errorInfo:F?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wn(){return Wn=(0,h.Z)(function*(F,G,Z,ge,xe,ze,At){var dn;const bn=function Ct(F){return xt.apply(this,arguments)}(F);bn.then(ds=>{Z[ds.measurementId]=ds.appId,F.options.measurementId&&ds.measurementId!==F.options.measurementId&&Di.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${ds.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ds=>Di.error(ds)),G.push(bn);const Sn=function ir(){return fn.apply(this,arguments)}().then(ds=>{if(ds)return ge.getId()}),[Zn,wn]=yield Promise.all([bn,Sn]);(function J(F){const G=window.document.getElementsByTagName("script");for(const Z of Object.values(G))if(Z.src&&Z.src.includes(Yl)&&Z.src.includes(F))return Z;return null})(ze)||function _d(F,G){const Z=document.createElement("script");Z.src=`${Yl}?l=${F}&id=${G}`,Z.async=!0,document.head.appendChild(Z)}(ze,Zn.measurementId),Mn&&(xe("consent","default",Mn),function Ea(F){Mn=F}(void 0)),xe("js",new Date);const Bo=null!==(dn=At?.config)&&void 0!==dn?dn:{};return Bo[mi]="firebase",Bo.update=!0,null!=wn&&(Bo[_u]=wn),xe("config",Zn.measurementId,Bo),vo&&(xe("set",vo),function vu(F){vo=F}(void 0)),Zn.measurementId}),Wn.apply(this,arguments)}class io{constructor(G){this.app=G}_delete(){return delete dr[this.app.options.appId],Promise.resolve()}}let dr={},Ht=[];const Lo={};let Jl,Ur,so="dataLayer",Ti="gtag",Da=!1;function Nl(F,G,Z){!function Xu(){const F=[];if((0,Se.ru)()&&F.push("This is a browser extension environment."),(0,Se.zI)()||F.push("Cookies are not available."),F.length>0){const G=F.map((ge,xe)=>`(${xe+1}) ${ge}`).join(" "),Z=Ue.create("invalid-analytics-context",{errorInfo:G});Di.warn(Z.message)}}();const ge=F.options.appId;if(!ge)throw Ue.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw Ue.create("no-api-key");Di.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=dr[ge])throw Ue.create("already-exists",{id:ge});if(!Da){!function Zl(F){let G=[];Array.isArray(window[F])?G=window[F]:window[F]=G}(so);const{wrappedGtag:ze,gtagCore:At}=function L(F,G,Z,ge,xe){let ze=function(...At){window[ge].push(arguments)};return window[xe]&&"function"==typeof window[xe]&&(ze=window[xe]),window[xe]=function $(F,G,Z,ge){function ze(){return ze=(0,h.Z)(function*(At,dn,bn){try{"event"===At?yield function wa(F,G,Z,ge,xe){return R.apply(this,arguments)}(F,G,Z,dn,bn):"config"===At?yield function Ql(F,G,Z,ge,xe,ze){return Al.apply(this,arguments)}(F,G,Z,ge,dn,bn):"consent"===At?F("consent","update",bn):F("set",dn)}catch(Sn){Di.error(Sn)}}),ze.apply(this,arguments)}return function xe(At,dn,bn){return ze.apply(this,arguments)}}(ze,F,G,Z),{gtagCore:ze,wrappedGtag:window[xe]}}(dr,Ht,Lo,so,Ti);Ur=ze,Jl=At,Da=!0}return dr[ge]=function Ai(F,G,Z,ge,xe,ze,At){return Wn.apply(this,arguments)}(F,Ht,Lo,G,Jl,so,Z),new io(F)}function wo(){return za.apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}const lo="@firebase/analytics";!function dl(){(0,ve._registerComponent)(new Te.wA(ql,(G,{options:Z})=>Nl(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,ve._registerComponent)(new Te.wA("analytics-internal",function F(G){try{const Z=G.getProvider(ql).getImmediate();return{logEvent:(ge,xe,ze)=>function Wa(F,G,Z,ge){F=(0,Se.m9)(F),function $a(F,G,Z,ge,xe){return Fo.apply(this,arguments)}(Ur,dr[F.app.options.appId],G,Z,ge).catch(xe=>Di.error(xe))}(Z,ge,xe,ze)}}catch(Z){throw Ue.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,ve.registerVersion)(lo,"0.9.4"),(0,ve.registerVersion)(lo,"0.9.4","esm2017")}();var vd=j(4408),hl=j(7565);const Ms=new class Rl extends hl.v{}(class ec extends vd.o{constructor(G,Z){super(G,Z),this.scheduler=G,this.work=Z}schedule(G,Z=0){return Z>0?super.schedule(G,Z):(this.delay=Z,this.state=G,this.scheduler.flush(this),this)}execute(G,Z){return Z>0||this.closed?super.execute(G,Z):this._execute(G,Z)}requestAsyncId(G,Z,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(G,Z,ge):(G.flush(this),0)}});var Ka=j(4986),fl=j(8505),bu=j(5363),zr=j(9468);const wu=new T.GfV("7.5.0"),uo="__angularfire_symbol__analyticsIsSupportedValue",Pl="__angularfire_symbol__analyticsIsSupported",Oi="__angularfire_symbol__remoteConfigIsSupportedValue",co="__angularfire_symbol__remoteConfigIsSupported",qa="__angularfire_symbol__messagingIsSupportedValue",C="__angularfire_symbol__messagingIsSupported";function K(F,G,Z){if(G){if(1===G.length)return G[0];const ze=G.filter(At=>At.app===Z);if(1===ze.length)return ze[0]}return Z.container.getProvider(F).getImmediate({optional:!0})}globalThis[Pl]||(globalThis[Pl]=wo().then(F=>globalThis[uo]=F).catch(()=>globalThis[uo]=!1)),globalThis[C]||(globalThis[C]=Tl().then(F=>globalThis[qa]=F).catch(()=>globalThis[qa]=!1)),globalThis[co]||(globalThis[co]=js().then(F=>globalThis[Oi]=F).catch(()=>globalThis[Oi]=!1));const ee=(F,G)=>{const Z=G?[G]:(0,Y.C6)(),ge=[];return Z.forEach(xe=>{xe.container.getProvider(F).instances.forEach(At=>{ge.includes(At)||ge.push(At)})}),ge};function Me(){}class vt{constructor(G,Z=Ms){this.zone=G,this.delegate=Z}now(){return this.delegate.now()}schedule(G,Z,ge){const xe=this.zone;return this.delegate.schedule(function(At){xe.runGuarded(()=>{G.apply(this,[At])})},Z,ge)}}class Zt{constructor(G){this.zone=G,this.task=null}call(G,Z){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Me,{},Me,Me)),Z.pipe((0,fl.b)({next:ge,complete:ge,error:ge})).subscribe(G).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Kt=(()=>{class F{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new vt(Zone.current)),this.insideAngular=Z.run(()=>new vt(Zone.current,Ka.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(Z){return new(Z||F)(T.LFG(T.R0b))},F.\u0275prov=T.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function Kn(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function Ks(F){return F.pipe((0,bu.Q)(Kn().outsideAngular))}function ho(F){return Kn(),function xl(F){return function(Z){return(Z=Z.lift(new Zt(F.ngZone))).pipe((0,zr.R)(F.outsideAngular),(0,bu.Q)(F.insideAngular))}}(Kn())(F)}},5114:(zt,We,j)=>{j.d(We,{$:()=>gu,A:()=>de,B:()=>Ke,G:()=>Vs,H:()=>ki,J:()=>ye,L:()=>kr,M:()=>Pa,N:()=>go,P:()=>Ka,Q:()=>Zo,R:()=>Ml,T:()=>Qo,U:()=>Yo,V:()=>As,W:()=>eo,X:()=>to,Y:()=>Os,Z:()=>rl,_:()=>Nr,a:()=>ln,a0:()=>Va,a1:()=>Yi,a2:()=>El,a3:()=>No,a4:()=>Dl,a5:()=>mu,a6:()=>ja,a7:()=>wi,a8:()=>rr,a9:()=>ba,aA:()=>be,aB:()=>bn,aC:()=>Ks,aD:()=>yi,aE:()=>qr,aI:()=>vn,aL:()=>Ss,aa:()=>Ro,ab:()=>sl,ac:()=>_o,af:()=>Vi,ag:()=>Po,ah:()=>Qi,ak:()=>Ui,al:()=>aa,an:()=>Yl,ao:()=>Al,ap:()=>tt,aq:()=>Xe,ar:()=>he,as:()=>ht,at:()=>eu,au:()=>Rs,av:()=>mt,aw:()=>lt,ax:()=>Ne,ay:()=>ds,az:()=>ft,b:()=>Ue,c:()=>qa,d:()=>P,e:()=>S,f:()=>xl,g:()=>ge,h:()=>F,i:()=>fn,j:()=>At,k:()=>Nf,l:()=>Vr,m:()=>kp,o:()=>pe,r:()=>vd,s:()=>cl,u:()=>Ms});var T=j(5861),Y=j(2090),h=j(9681),ve=j(1877),Se=j(655),Te=j(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ke=function Ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Nt=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new ve.Yd("@firebase/auth");function fe(A,...v){ct.logLevel<=ve.in.ERROR&&ct.error(`Auth (${h.SDK_VERSION}): ${A}`,...v)}function ht(A,...v){throw Et(A,...v)}function lt(A,...v){return Et(A,...v)}function Qe(A,v,b){const M=Object.assign(Object.assign({},at()),{[v]:b});return new Y.LL("auth","Firebase",M).create(v,{appName:A.name})}function Ye(A,v,b){if(!(v instanceof b))throw b.name!==v.constructor.name&&ht(A,"argument-error"),Qe(A,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Et(A,...v){if("string"!=typeof A){const b=v[0],M=[...v.slice(1)];return M[0]&&(M[0].appName=A.name),A._errorFactory.create(b,...M)}return Nt.create(A,...v)}function Ne(A,v,...b){if(!A)throw Et(v,...b)}function Ie(A){const v="INTERNAL ASSERTION FAILED: "+A;throw fe(v),new Error(v)}function tt(A,v){A||Ie(v)}const it=new Map;function ft(A){tt(A instanceof Function,"Expected a class definition");let v=it.get(A);return v?(tt(v instanceof A,"Instance stored in cache mismatched with class"),v):(v=new A,it.set(A,v),v)}function Le(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function rt(){return"http:"===$e()||"https:"===$e()}function $e(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class st{constructor(v,b){this.shortDelay=v,this.longDelay=b,tt(b>v,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function nt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mt(A,v){tt(A.emulator,"Emulator should always be set here");const{url:b}=A.emulator;return v?`${b}${v.startsWith("/")?v.slice(1):v}`:b}class It{static initialize(v,b,M){this.fetchImpl=v,b&&(this.headersImpl=b),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},jt=new st(3e4,6e4);function Wt(A,v){return A.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:A.tenantId}):v}function gt(A,v,b,M){return yn.apply(this,arguments)}function yn(){return(yn=(0,T.Z)(function*(A,v,b,M,q={}){return xn(A,q,(0,T.Z)(function*(){let se={},He={};M&&("GET"===v?He=M:se={body:JSON.stringify(M)});const St=(0,Y.xO)(Object.assign({key:A.config.apiKey},He)).slice(1),un=yield A._getAdditionalHeaders();return un["Content-Type"]="application/json",A.languageCode&&(un["X-Firebase-Locale"]=A.languageCode),It.fetch()(pn(A,A.config.apiHost,b,St),Object.assign({method:v,headers:un,referrerPolicy:"no-referrer"},se))}))})).apply(this,arguments)}function xn(A,v,b){return jn.apply(this,arguments)}function jn(){return(jn=(0,T.Z)(function*(A,v,b){A._canInitEmulator=!1;const M=Object.assign(Object.assign({},tn),v);try{const q=new cr(A),se=yield Promise.race([b(),q.promise]);q.clearNetworkTimeout();const He=yield se.json();if("needConfirmation"in He)throw Cn(A,"account-exists-with-different-credential",He);if(se.ok&&!("errorMessage"in He))return He;{const St=se.ok?He.errorMessage:He.error.message,[un,In]=St.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===un)throw Cn(A,"credential-already-in-use",He);if("EMAIL_EXISTS"===un)throw Cn(A,"email-already-in-use",He);if("USER_DISABLED"===un)throw Cn(A,"user-disabled",He);const Xn=M[un]||un.toLowerCase().replace(/[_\s]+/g,"-");if(In)throw Qe(A,Xn,In);ht(A,Xn)}}catch(q){if(q instanceof Y.ZR)throw q;ht(A,"internal-error",{message:String(q)})}})).apply(this,arguments)}function Hn(A,v,b,M){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,T.Z)(function*(A,v,b,M,q={}){const se=yield gt(A,v,b,M,q);return"mfaPendingCredential"in se&&ht(A,"multi-factor-auth-required",{_serverResponse:se}),se})).apply(this,arguments)}function pn(A,v,b,M){const q=`${v}${b}?${M}`;return A.config.emulator?Mt(A.config,q):`${A.config.apiScheme}://${q}`}class cr{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((b,M)=>{this.timer=setTimeout(()=>M(lt(this.auth,"network-request-failed")),jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cn(A,v,b){const M={appName:A.name};b.email&&(M.email=b.email),b.phoneNumber&&(M.phoneNumber=b.phoneNumber);const q=lt(A,v,M);return q.customData._tokenResponse=b,q}function Kr(){return(Kr=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function An(){return(An=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function ai(){return(ai=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function ei(A){if(A)try{const v=new Date(Number(A));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function ri(){return(ri=(0,T.Z)(function*(A,v=!1){const b=(0,Y.m9)(A),M=yield b.getIdToken(v),q=rn(M);Ne(q&&q.exp&&q.auth_time&&q.iat,b.auth,"internal-error");const se="object"==typeof q.firebase?q.firebase:void 0,He=se?.sign_in_provider;return{claims:q,token:M,authTime:ei(mn(q.auth_time)),issuedAtTime:ei(mn(q.iat)),expirationTime:ei(mn(q.exp)),signInProvider:He||null,signInSecondFactor:se?.sign_in_second_factor||null}})).apply(this,arguments)}function mn(A){return 1e3*Number(A)}function rn(A){const[v,b,M]=A.split(".");if(void 0===v||void 0===b||void 0===M)return fe("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,Y.tV)(b);return q?JSON.parse(q):(fe("Failed to decode base64 JWT payload"),null)}catch(q){return fe("Caught error parsing JWT payload as JSON",q?.toString()),null}}function pr(A,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,T.Z)(function*(A,v,b=!1){if(b)return v;try{return yield v}catch(M){throw M instanceof Y.ZR&&function cn({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(M)&&A.auth.currentUser===A&&(yield A.auth.signOut()),M}})).apply(this,arguments)}class br{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var b;if(v){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const q=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(v=!1){var b=this;if(!this.isRunning)return;const M=this.getInterval(v);this.timerId=setTimeout((0,T.Z)(function*(){yield b.iteration()}),M)}iteration(){var v=this;return(0,T.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b?.code&&v.schedule(!0))}v.schedule()})()}}class Ir{constructor(v,b){this.createdAt=v,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(A){return Pn.apply(this,arguments)}function Pn(){return Pn=(0,T.Z)(function*(A){var v;const b=A.auth,M=yield A.getIdToken(),q=yield pr(A,function Gt(A,v){return ai.apply(this,arguments)}(b,{idToken:M}));Ne(q?.users.length,b,"internal-error");const se=q.users[0];A._notifyReloadListener(se);const He=null!==(v=se.providerUserInfo)&&void 0!==v&&v.length?function Cr(A){return A.map(v=>{var{providerId:b}=v,M=(0,Se._T)(v,["providerId"]);return{providerId:b,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(se.providerUserInfo):[],St=function Ci(A,v){return[...A.filter(M=>!v.some(q=>q.providerId===M.providerId)),...v]}(A.providerData,He),Xn=!!A.isAnonymous&&!(A.email&&se.passwordHash||St?.length),Ni={uid:se.localId,displayName:se.displayName||null,photoURL:se.photoUrl||null,email:se.email||null,emailVerified:se.emailVerified||!1,phoneNumber:se.phoneNumber||null,tenantId:se.tenantId||null,providerData:St,metadata:new Ir(se.createdAt,se.lastLoginAt),isAnonymous:Xn};Object.assign(A,Ni)}),Pn.apply(this,arguments)}function kn(){return(kn=(0,T.Z)(function*(A){const v=(0,Y.m9)(A);yield Jn(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function bt(){return(bt=(0,T.Z)(function*(A,v){const b=yield xn(A,{},(0,T.Z)(function*(){const M=(0,Y.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:q,apiKey:se}=A.config,He=pn(A,q,"/v1/token",`key=${se}`),St=yield A._getAdditionalHeaders();return St["Content-Type"]="application/x-www-form-urlencoded",It.fetch()(He,{method:"POST",headers:St,body:M})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Ne(v.idToken,"internal-error"),Ne(typeof v.idToken<"u","internal-error"),Ne(typeof v.refreshToken<"u","internal-error");const b="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function sn(A){const v=rn(A);return Ne(v,"internal-error"),Ne(typeof v.exp<"u","internal-error"),Ne(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,b)}getToken(v,b=!1){var M=this;return(0,T.Z)(function*(){return Ne(!M.accessToken||M.refreshToken,v,"user-token-expired"),b||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(v,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,b){var M=this;return(0,T.Z)(function*(){const{accessToken:q,refreshToken:se,expiresIn:He}=yield function Rt(A,v){return bt.apply(this,arguments)}(v,b);M.updateTokensAndExpiration(q,se,Number(He))})()}updateTokensAndExpiration(v,b,M){this.refreshToken=b||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(v,b){const{refreshToken:M,accessToken:q,expirationTime:se}=b,He=new Ut;return M&&(Ne("string"==typeof M,"internal-error",{appName:v}),He.refreshToken=M),q&&(Ne("string"==typeof q,"internal-error",{appName:v}),He.accessToken=q),se&&(Ne("number"==typeof se,"internal-error",{appName:v}),He.expirationTime=se),He}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function hn(A,v){Ne("string"==typeof A||typeof A>"u","internal-error",{appName:v})}class Yt{constructor(v){var{uid:b,auth:M,stsTokenManager:q}=v,se=(0,Se._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=M,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=se.displayName||null,this.email=se.email||null,this.emailVerified=se.emailVerified||!1,this.phoneNumber=se.phoneNumber||null,this.photoURL=se.photoURL||null,this.isAnonymous=se.isAnonymous||!1,this.tenantId=se.tenantId||null,this.providerData=se.providerData?[...se.providerData]:[],this.metadata=new Ir(se.createdAt||void 0,se.lastLoginAt||void 0)}getIdToken(v){var b=this;return(0,T.Z)(function*(){const M=yield pr(b,b.stsTokenManager.getToken(b.auth,v));return Ne(M,b.auth,"internal-error"),b.accessToken!==M&&(b.accessToken=M,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),M})()}getIdTokenResult(v){return function ni(A){return ri.apply(this,arguments)}(this,v)}reload(){return function jr(A){return kn.apply(this,arguments)}(this)}_assign(v){this!==v&&(Ne(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(b=>Object.assign({},b)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const b=new Yt(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(v){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,b=!1){var M=this;return(0,T.Z)(function*(){let q=!1;v.idToken&&v.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(v),q=!0),b&&(yield Jn(M)),yield M.auth._persistUserIfCurrent(M),q&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var v=this;return(0,T.Z)(function*(){const b=yield v.getIdToken();return yield pr(v,function qn(A,v){return Kr.apply(this,arguments)}(v.auth,{idToken:b})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,b){var M,q,se,He,St,un,In,Xn;const Ni=null!==(M=b.displayName)&&void 0!==M?M:void 0,pl=null!==(q=b.email)&&void 0!==q?q:void 0,Go=null!==(se=b.phoneNumber)&&void 0!==se?se:void 0,Za=null!==(He=b.photoURL)&&void 0!==He?He:void 0,Eh=null!==(St=b.tenantId)&&void 0!==St?St:void 0,ha=null!==(un=b._redirectEventId)&&void 0!==un?un:void 0,Od=null!==(In=b.createdAt)&&void 0!==In?In:void 0,Cu=null!==(Xn=b.lastLoginAt)&&void 0!==Xn?Xn:void 0,{uid:Fc,emailVerified:Nd,isAnonymous:Lc,providerData:Mf,stsTokenManager:Fp}=b;Ne(Fc&&Fp,v,"internal-error");const Mi=Ut.fromJSON(this.name,Fp);Ne("string"==typeof Fc,v,"internal-error"),hn(Ni,v.name),hn(pl,v.name),Ne("boolean"==typeof Nd,v,"internal-error"),Ne("boolean"==typeof Lc,v,"internal-error"),hn(Go,v.name),hn(Za,v.name),hn(Eh,v.name),hn(ha,v.name),hn(Od,v.name),hn(Cu,v.name);const Uc=new Yt({uid:Fc,auth:v,email:pl,emailVerified:Nd,displayName:Ni,isAnonymous:Lc,photoURL:Za,phoneNumber:Go,tenantId:Eh,stsTokenManager:Mi,createdAt:Od,lastLoginAt:Cu});return Mf&&Array.isArray(Mf)&&(Uc.providerData=Mf.map(Dh=>Object.assign({},Dh))),ha&&(Uc._redirectEventId=ha),Uc}static _fromIdTokenResponse(v,b,M=!1){return(0,T.Z)(function*(){const q=new Ut;q.updateFromServerResponse(b);const se=new Yt({uid:b.localId,auth:v,stsTokenManager:q,isAnonymous:M});return yield Jn(se),se})()}}const kr=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(b,M){var q=this;return(0,T.Z)(function*(){q.storage[b]=M})()}_get(b){var M=this;return(0,T.Z)(function*(){const q=M.storage[b];return void 0===q?null:q})()}_remove(b){var M=this;return(0,T.Z)(function*(){delete M.storage[b]})()}_addListener(b,M){}_removeListener(b,M){}}return A.type="NONE",A})();function be(A,v,b){return`firebase:${A}:${v}:${b}`}class _e{constructor(v,b,M){this.persistence=v,this.auth=b,this.userKey=M;const{config:q,name:se}=this.auth;this.fullUserKey=be(this.userKey,q.apiKey,se),this.fullPersistenceKey=be("persistence",q.apiKey,se),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,T.Z)(function*(){const b=yield v.persistence._get(v.fullUserKey);return b?Yt._fromJSON(v.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var b=this;return(0,T.Z)(function*(){if(b.persistence===v)return;const M=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=v,M?b.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,b,M="authUser"){return(0,T.Z)(function*(){if(!b.length)return new _e(ft(kr),v,M);const q=(yield Promise.all(b.map(function(){var In=(0,T.Z)(function*(Xn){if(yield Xn._isAvailable())return Xn});return function(Xn){return In.apply(this,arguments)}}()))).filter(In=>In);let se=q[0]||ft(kr);const He=be(M,v.config.apiKey,v.name);let St=null;for(const In of b)try{const Xn=yield In._get(He);if(Xn){const Ni=Yt._fromJSON(v,Xn);In!==se&&(St=Ni),se=In;break}}catch{}const un=q.filter(In=>In._shouldAllowMigration);return se._shouldAllowMigration&&un.length?(se=un[0],St&&(yield se._set(He,St.toJSON())),yield Promise.all(b.map(function(){var In=(0,T.Z)(function*(Xn){if(Xn!==se)try{yield Xn._remove(He)}catch{}});return function(Xn){return In.apply(this,arguments)}}())),new _e(se,v,M)):new _e(se,v,M)})()}}function te(A){const v=A.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(ae(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(re(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(oe(v))return"Blackberry";if(Ae(v))return"Webos";if(Q(v))return"Safari";if((v.includes("chrome/")||Pe(v))&&!v.includes("edge/"))return"Chrome";if(he(v))return"Android";{const M=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function re(A=(0,Y.z$)()){return/firefox\//i.test(A)}function Q(A=(0,Y.z$)()){const v=A.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Pe(A=(0,Y.z$)()){return/crios\//i.test(A)}function ae(A=(0,Y.z$)()){return/iemobile/i.test(A)}function he(A=(0,Y.z$)()){return/android/i.test(A)}function oe(A=(0,Y.z$)()){return/blackberry/i.test(A)}function Ae(A=(0,Y.z$)()){return/webos/i.test(A)}function Xe(A=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function mt(A=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function On(A=(0,Y.z$)()){return Xe(A)||he(A)||Ae(A)||oe(A)||/windows phone/i.test(A)||ae(A)}function qi(A,v=[]){let b;switch(A){case"Browser":b=te((0,Y.z$)());break;case"Worker":b=`${te((0,Y.z$)())}-${A}`;break;default:b=A}const M=v.length?v.join(","):"FirebaseCore-web";return`${b}/JsCore/${h.SDK_VERSION}/${M}`}class Ko{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,b){const M=se=>new Promise((He,St)=>{try{He(v(se))}catch(un){St(un)}});M.onAbort=b,this.queue.push(M);const q=this.queue.length-1;return()=>{this.queue[q]=()=>Promise.resolve()}}runMiddleware(v){var b=this;return(0,T.Z)(function*(){if(b.auth.currentUser===v)return;const M=[];try{for(const q of b.queue)yield q(v),q.onAbort&&M.push(q.onAbort)}catch(q){M.reverse();for(const se of M)try{se()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:q?.message})}})()}}class _a{constructor(v,b,M){this.app=v,this.heartbeatServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bs(this),this.idTokenSubscription=new bs(this),this.beforeStateQueue=new Ko(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(v,b){var M=this;return b&&(this._popupRedirectResolver=ft(b)),this._initializationPromise=this.queue((0,T.Z)(function*(){var q,se;if(!M._deleted&&(M.persistenceManager=yield _e.create(M,v),!M._deleted)){if(null!==(q=M._popupRedirectResolver)&&void 0!==q&&q._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(b),M.lastNotifiedUid=(null===(se=M.currentUser)||void 0===se?void 0:se.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,T.Z)(function*(){if(v._deleted)return;const b=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||b){if(v.currentUser&&b&&v.currentUser.uid===b.uid)return v._currentUser._assign(b),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(b,!0)}})()}initializeCurrentUser(v){var b=this;return(0,T.Z)(function*(){var M;const q=yield b.assertedPersistence.getCurrentUser();let se=q,He=!1;if(v&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const St=null===(M=b.redirectUser)||void 0===M?void 0:M._redirectEventId,un=se?._redirectEventId,In=yield b.tryRedirectSignIn(v);(!St||St===un)&&In?.user&&(se=In.user,He=!0)}if(!se)return b.directlySetCurrentUser(null);if(!se._redirectEventId){if(He)try{yield b.beforeStateQueue.runMiddleware(se)}catch(St){se=q,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(St))}return se?b.reloadAndSetCurrentUserOrClear(se):b.directlySetCurrentUser(null)}return Ne(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===se._redirectEventId?b.directlySetCurrentUser(se):b.reloadAndSetCurrentUserOrClear(se)})()}tryRedirectSignIn(v){var b=this;return(0,T.Z)(function*(){let M=null;try{M=yield b._popupRedirectResolver._completeRedirectFn(b,v,!0)}catch{yield b._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(v){var b=this;return(0,T.Z)(function*(){try{yield Jn(v)}catch(M){if("auth/network-request-failed"!==M?.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function yt(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var v=this;return(0,T.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var b=this;return(0,T.Z)(function*(){const M=v?(0,Y.m9)(v):null;return M&&Ne(M.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(M&&M._clone(b))})()}_updateCurrentUser(v,b=!1){var M=this;return(0,T.Z)(function*(){if(!M._deleted)return v&&Ne(M.tenantId===v.tenantId,M,"tenant-id-mismatch"),b||(yield M.beforeStateQueue.runMiddleware(v)),M.queue((0,T.Z)(function*(){yield M.directlySetCurrentUser(v),M.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,T.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var b=this;return this.queue((0,T.Z)(function*(){yield b.assertedPersistence.setPersistence(ft(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new Y.LL("auth","Firebase",v())}onAuthStateChanged(v,b,M){return this.registerStateListener(this.authStateSubscription,v,b,M)}beforeAuthStateChanged(v,b){return this.beforeStateQueue.pushCallback(v,b)}onIdTokenChanged(v,b,M){return this.registerStateListener(this.idTokenSubscription,v,b,M)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,b){var M=this;return(0,T.Z)(function*(){const q=yield M.getOrInitRedirectPersistenceManager(b);return null===v?q.removeCurrentUser():q.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var b=this;return(0,T.Z)(function*(){if(!b.redirectPersistenceManager){const M=v&&ft(v)||b._popupRedirectResolver;Ne(M,b,"argument-error"),b.redirectPersistenceManager=yield _e.create(b,[ft(M._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(v){var b=this;return(0,T.Z)(function*(){var M,q;return b._isInitialized&&(yield b.queue((0,T.Z)(function*(){}))),(null===(M=b._currentUser)||void 0===M?void 0:M._redirectEventId)===v?b._currentUser:(null===(q=b.redirectUser)||void 0===q?void 0:q._redirectEventId)===v?b.redirectUser:null})()}_persistUserIfCurrent(v){var b=this;return(0,T.Z)(function*(){if(v===b.currentUser)return b.queue((0,T.Z)(function*(){return b.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(b=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,b,M,q){if(this._deleted)return()=>{};const se="function"==typeof b?b:b.next.bind(b),He=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(He,this,"internal-error"),He.then(()=>se(this.currentUser)),"function"==typeof b?v.addObserver(b,M,q):v.addObserver(b)}directlySetCurrentUser(v){var b=this;return(0,T.Z)(function*(){b.currentUser&&b.currentUser!==v&&b._currentUser._stopProactiveRefresh(),v&&b.isProactiveRefreshEnabled&&v._startProactiveRefresh(),b.currentUser=v,v?yield b.assertedPersistence.setCurrentUser(v):yield b.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=qi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,T.Z)(function*(){var b;const M={"X-Client-Version":v.clientVersion};v.app.options.appId&&(M["X-Firebase-gmpid"]=v.app.options.appId);const q=yield null===(b=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return q&&(M["X-Firebase-Client"]=q),M})()}}function qr(A){return(0,Y.m9)(A)}class bs{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,Y.ne)(b=>this.observer=b)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vs(A,v,b){const M=qr(A);Ne(M._canInitEmulator,M,"emulator-config-failed"),Ne(/^https?:\/\//.test(v),M,"invalid-emulator-scheme");const q=!!b?.disableWarnings,se=Co(v),{host:He,port:St}=function Yn(A){const v=Co(A),b=/(\/\/)?([^?#/]+)/.exec(A.substr(v.length));if(!b)return{host:"",port:null};const M=b[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(M);if(q){const se=q[1];return{host:se,port:Fr(M.substr(se.length+1))}}{const[se,He]=M.split(":");return{host:se,port:Fr(He)}}}(v);M.config.emulator={url:`${se}//${He}${null===St?"":`:${St}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:He,port:St,protocol:se.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function Yr(){function A(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function Co(A){const v=A.indexOf(":");return v<0?"":A.substr(0,v+1)}function Fr(A){if(!A)return null;const v=Number(A);return isNaN(v)?null:v}class ki{constructor(v,b){this.providerId=v,this.signInMethod=b}toJSON(){return Ie("not implemented")}_getIdTokenResponse(v){return Ie("not implemented")}_linkToIdToken(v,b){return Ie("not implemented")}_getReauthenticationResolver(v){return Ie("not implemented")}}function zi(A,v){return sr.apply(this,arguments)}function sr(){return(sr=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:resetPassword",Wt(A,v))})).apply(this,arguments)}function Wi(A,v){return as.apply(this,arguments)}function as(){return(as=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Jt(){return(Jt=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:update",Wt(A,v))})).apply(this,arguments)}function vr(){return(vr=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithPassword",Wt(A,v))})).apply(this,arguments)}function li(A,v){return Li.apply(this,arguments)}function Li(){return(Li=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:sendOobCode",Wt(A,v))})).apply(this,arguments)}function ii(){return(ii=(0,T.Z)(function*(A,v){return li(A,v)})).apply(this,arguments)}function pi(){return(pi=(0,T.Z)(function*(A,v){return li(A,v)})).apply(this,arguments)}function Fn(){return(Fn=(0,T.Z)(function*(A,v){return li(A,v)})).apply(this,arguments)}function To(){return(To=(0,T.Z)(function*(A,v){return li(A,v)})).apply(this,arguments)}function So(){return(So=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithEmailLink",Wt(A,v))})).apply(this,arguments)}function Xs(){return(Xs=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithEmailLink",Wt(A,v))})).apply(this,arguments)}class Zr extends ki{constructor(v,b,M,q=null){super("password",M),this._email=v,this._password=b,this._tenantId=q}static _fromEmailAndPassword(v,b){return new Zr(v,b,"password")}static _fromEmailAndCode(v,b,M=null){return new Zr(v,b,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(v){var b=this;return(0,T.Z)(function*(){switch(b.signInMethod){case"password":return function Nn(A,v){return vr.apply(this,arguments)}(v,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function qo(A,v){return So.apply(this,arguments)}(v,{email:b._email,oobCode:b._password});default:ht(v,"internal-error")}})()}_linkToIdToken(v,b){var M=this;return(0,T.Z)(function*(){switch(M.signInMethod){case"password":return Wi(v,{idToken:b,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function vi(A,v){return Xs.apply(this,arguments)}(v,{idToken:b,email:M._email,oobCode:M._password});default:ht(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function bi(A,v){return Es.apply(this,arguments)}function Es(){return(Es=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithIdp",Wt(A,v))})).apply(this,arguments)}class ye extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const b=new ye(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(b.idToken=v.idToken),v.accessToken&&(b.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(b.nonce=v.nonce),v.pendingToken&&(b.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(b.accessToken=v.oauthToken,b.secret=v.oauthTokenSecret):ht("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:q}=b,se=(0,Se._T)(b,["providerId","signInMethod"]);if(!M||!q)return null;const He=new ye(M,q);return He.idToken=se.idToken||void 0,He.accessToken=se.accessToken||void 0,He.secret=se.secret,He.nonce=se.nonce,He.pendingToken=se.pendingToken||null,He}_getIdTokenResponse(v){return bi(v,this.buildRequest())}_linkToIdToken(v,b){const M=this.buildRequest();return M.idToken=b,bi(v,M)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,bi(v,b)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),v.postBody=(0,Y.xO)(b)}return v}}function dt(){return(dt=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:sendVerificationCode",Wt(A,v))})).apply(this,arguments)}function an(){return(an=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithPhoneNumber",Wt(A,v))})).apply(this,arguments)}function mr(){return(mr=(0,T.Z)(function*(A,v){const b=yield Hn(A,"POST","/v1/accounts:signInWithPhoneNumber",Wt(A,v));if(b.temporaryProof)throw Cn(A,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const Ln={USER_NOT_FOUND:"user-not-found"};function Qr(){return(Qr=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithPhoneNumber",Wt(A,Object.assign(Object.assign({},v),{operation:"REAUTH"})),Ln)})).apply(this,arguments)}class _r extends ki{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,b){return new _r({verificationId:v,verificationCode:b})}static _fromTokenResponse(v,b){return new _r({phoneNumber:v,temporaryProof:b})}_getIdTokenResponse(v){return function Lt(A,v){return an.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,b){return function Rn(A,v){return mr.apply(this,arguments)}(v,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Ds(A,v){return Qr.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:b,verificationId:M,verificationCode:q}=this.params;return v&&b?{temporaryProof:v,phoneNumber:b}:{sessionInfo:M,code:q}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:b,verificationCode:M,phoneNumber:q,temporaryProof:se}=v;return M||b||q||se?new _r({verificationId:b,verificationCode:M,phoneNumber:q,temporaryProof:se}):null}}class Cs{constructor(v){var b,M,q,se,He,St;const un=(0,Y.zd)((0,Y.pd)(v)),In=null!==(b=un.apiKey)&&void 0!==b?b:null,Xn=null!==(M=un.oobCode)&&void 0!==M?M:null,Ni=function Gs(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=un.mode)&&void 0!==q?q:null);Ne(In&&Xn&&Ni,"argument-error"),this.apiKey=In,this.operation=Ni,this.code=Xn,this.continueUrl=null!==(se=un.continueUrl)&&void 0!==se?se:null,this.languageCode=null!==(He=un.languageCode)&&void 0!==He?He:null,this.tenantId=null!==(St=un.tenantId)&&void 0!==St?St:null}static parseLink(v){const b=function Is(A){const v=(0,Y.zd)((0,Y.pd)(A)).link,b=v?(0,Y.zd)((0,Y.pd)(v)).deep_link_id:null,M=(0,Y.zd)((0,Y.pd)(A)).deep_link_id;return(M?(0,Y.zd)((0,Y.pd)(M)).link:null)||M||b||v||A}(v);try{return new Cs(b)}catch{return null}}}let Pa=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(b,M){return Zr._fromEmailAndPassword(b,M)}static credentialWithLink(b,M){const q=Cs.parseLink(M);return Ne(q,"argument-error"),Zr._fromEmailAndCode(b,q.code,q.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class Ts{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Hs extends Ts{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class Yo extends Hs{static credentialFromJSON(v){const b="string"==typeof v?JSON.parse(v):v;return Ne("providerId"in b&&"signInMethod"in b,"argument-error"),ye._fromParams(b)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Ne(v.idToken||v.accessToken,"argument-error"),ye._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return Yo.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return Yo.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:b,oauthAccessToken:M,oauthTokenSecret:q,pendingToken:se,nonce:He,providerId:St}=v;if(!M&&!q&&!b&&!se||!St)return null;try{return new Yo(St)._credential({idToken:b,accessToken:M,nonce:He,pendingToken:se})}catch{return null}}}let go=(()=>{class A extends Hs{constructor(){super("facebook.com")}static credential(b){return ye._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return A.credential(b.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),Zo=(()=>{class A extends Hs{constructor(){super("google.com"),this.addScope("profile")}static credential(b,M){return ye._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:M})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:M,oauthAccessToken:q}=b;if(!M&&!q)return null;try{return A.credential(M,q)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),Qo=(()=>{class A extends Hs{constructor(){super("github.com")}static credential(b){return ye._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return A.credential(b.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Ss extends ki{constructor(v,b){super(v,v),this.pendingToken=b}_getIdTokenResponse(v){return bi(v,this.buildRequest())}_linkToIdToken(v,b){const M=this.buildRequest();return M.idToken=b,bi(v,M)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,bi(v,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:q,pendingToken:se}=b;return M&&q&&se&&M===q?new Ss(M,se):null}static _create(v,b){return new Ss(v,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class As extends Ts{constructor(v){Ne(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return As.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return As.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const b=Ss.fromJSON(v);return Ne(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:b,providerId:M}=v;if(!b||!M)return null;try{return Ss._create(M,b)}catch{return null}}}let eo=(()=>{class A extends Hs{constructor(){super("twitter.com")}static credential(b,M){return ye._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:M})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:M,oauthTokenSecret:q}=b;if(!M||!q)return null;try{return A.credential(M,q)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Zu(A,v){return xa.apply(this,arguments)}function xa(){return(xa=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signUp",Wt(A,v))})).apply(this,arguments)}class ls{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,b,M,q=!1){return(0,T.Z)(function*(){const se=yield Yt._fromIdTokenResponse(v,M,q),He=mo(M);return new ls({user:se,providerId:He,_tokenResponse:M,operationType:b})})()}static _forOperation(v,b,M){return(0,T.Z)(function*(){yield v._updateTokensIfNecessary(M,!0);const q=mo(M);return new ls({user:v,providerId:q,_tokenResponse:M,operationType:b})})()}}function mo(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function to(A){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,T.Z)(function*(A){var v;const b=qr(A);if(yield b._initializationPromise,null!==(v=b.currentUser)&&void 0!==v&&v.isAnonymous)return new ls({user:b.currentUser,providerId:null,operationType:"signIn"});const M=yield Zu(b,{returnSecureToken:!0}),q=yield ls._fromIdTokenResponse(b,"signIn",M,!0);return yield b._updateCurrentUser(q.user),q})).apply(this,arguments)}class va extends Y.ZR{constructor(v,b,M,q){var se;super(b.code,b.message),this.operationType=M,this.user=q,Object.setPrototypeOf(this,va.prototype),this.customData={appName:v.name,tenantId:null!==(se=v.tenantId)&&void 0!==se?se:void 0,_serverResponse:b.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(v,b,M,q){return new va(v,b,M,q)}}function wl(A,v,b,M){return("reauthenticate"===v?b._getReauthenticationResolver(A):b._getIdTokenResponse(A)).catch(se=>{throw"auth/multi-factor-auth-required"===se.code?va._fromErrorAndOperation(A,se,v,M):se})}function Hr(A){return new Set(A.map(({providerId:v})=>v).filter(v=>!!v))}function Ui(A,v){return $s.apply(this,arguments)}function $s(){return $s=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A);yield zs(!0,b,v);const{providerUserInfo:M}=yield function en(A,v){return An.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[v]}),q=Hr(M||[]);return b.providerData=b.providerData.filter(se=>q.has(se.providerId)),q.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),$s.apply(this,arguments)}function no(A,v){return ka.apply(this,arguments)}function ka(){return(ka=(0,T.Z)(function*(A,v,b=!1){const M=yield pr(A,v._linkToIdToken(A.auth,yield A.getIdToken()),b);return ls._forOperation(A,"link",M)})).apply(this,arguments)}function zs(A,v,b){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,T.Z)(function*(A,v,b){yield Jn(v);const q=!1===A?"provider-already-linked":"no-such-provider";Ne(Hr(v.providerData).has(b)===A,v.auth,q)})).apply(this,arguments)}function pu(A,v){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,T.Z)(function*(A,v,b=!1){const{auth:M}=A,q="reauthenticate";try{const se=yield pr(A,wl(M,q,v,A),b);Ne(se.idToken,M,"internal-error");const He=rn(se.idToken);Ne(He,M,"internal-error");const{sub:St}=He;return Ne(A.uid===St,M,"user-mismatch"),ls._forOperation(A,q,se)}catch(se){throw"auth/user-not-found"===se?.code&&ht(M,"user-mismatch"),se}})).apply(this,arguments)}function La(A,v){return us.apply(this,arguments)}function us(){return(us=(0,T.Z)(function*(A,v,b=!1){const M="signIn",q=yield wl(A,M,v),se=yield ls._fromIdTokenResponse(A,M,q);return b||(yield A._updateCurrentUser(se.user)),se})).apply(this,arguments)}function Os(A,v){return yr.apply(this,arguments)}function yr(){return(yr=(0,T.Z)(function*(A,v){return La(qr(A),v)})).apply(this,arguments)}function rl(A,v){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A);return yield zs(!1,b,v.providerId),no(b,v)})).apply(this,arguments)}function Nr(A,v){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,T.Z)(function*(A,v){return pu((0,Y.m9)(A),v)})).apply(this,arguments)}function gi(){return(gi=(0,T.Z)(function*(A,v){return Hn(A,"POST","/v1/accounts:signInWithCustomToken",Wt(A,v))})).apply(this,arguments)}function gu(A,v){return il.apply(this,arguments)}function il(){return il=(0,T.Z)(function*(A,v){const b=qr(A),M=yield function Jo(A,v){return gi.apply(this,arguments)}(b,{token:v,returnSecureToken:!0}),q=yield ls._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(q.user),q}),il.apply(this,arguments)}class Ns{constructor(v,b){this.factorId=v,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(v,b){return"phoneInfo"in b?ui._fromServerResponse(v,b):ht(v,"internal-error")}}class ui extends Ns{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,b){return new ui(b)}}function Ba(A,v,b){var M;Ne((null===(M=b.url)||void 0===M?void 0:M.length)>0,A,"invalid-continue-uri"),Ne(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),v.continueUrl=b.url,v.dynamicLinkDomain=b.dynamicLinkDomain,v.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(Ne(b.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),v.iOSBundleId=b.iOS.bundleId),b.android&&(Ne(b.android.packageName.length>0,A,"missing-android-pkg-name"),v.androidInstallApp=b.android.installApp,v.androidMinimumVersionCode=b.android.minimumVersion,v.androidPackageName=b.android.packageName)}function Va(A,v,b){return ro.apply(this,arguments)}function ro(){return ro=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q={requestType:"PASSWORD_RESET",email:v};b&&Ba(M,q,b),yield function si(A,v){return pi.apply(this,arguments)}(M,q)}),ro.apply(this,arguments)}function Yi(A,v,b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,T.Z)(function*(A,v,b){yield zi((0,Y.m9)(A),{oobCode:v,newPassword:b})})).apply(this,arguments)}function El(A,v){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,T.Z)(function*(A,v){yield function Fi(A,v){return Jt.apply(this,arguments)}((0,Y.m9)(A),{oobCode:v})}),Tn.apply(this,arguments)}function No(A,v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A),M=yield zi(b,{oobCode:v}),q=M.requestType;switch(Ne(q,b,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(M.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(M.mfaInfo,b,"internal-error");default:Ne(M.email,b,"internal-error")}let se=null;return M.mfaInfo&&(se=Ns._fromServerResponse(qr(b),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:se},operation:q}})).apply(this,arguments)}function Dl(A,v){return ea.apply(this,arguments)}function ea(){return(ea=(0,T.Z)(function*(A,v){const{data:b}=yield No((0,Y.m9)(A),v);return b.email})).apply(this,arguments)}function mu(A,v,b){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,T.Z)(function*(A,v,b){const M=qr(A),q=yield Zu(M,{returnSecureToken:!0,email:v,password:b}),se=yield ls._fromIdTokenResponse(M,"signIn",q);return yield M._updateCurrentUser(se.user),se})).apply(this,arguments)}function ja(A,v,b){return Os((0,Y.m9)(A),Pa.credential(v,b))}function wi(A,v,b){return ut.apply(this,arguments)}function ut(){return ut=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q={requestType:"EMAIL_SIGNIN",email:v};Ne(b.handleCodeInApp,M,"argument-error"),b&&Ba(M,q,b),yield function Ra(A,v){return Fn.apply(this,arguments)}(M,q)}),ut.apply(this,arguments)}function rr(A,v){return"EMAIL_SIGNIN"===Cs.parseLink(v)?.operation}function ba(A,v,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q=Pa.credentialWithLink(v,b||Le());return Ne(q._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Os(M,q)})).apply(this,arguments)}function Il(){return(Il=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:createAuthUri",Wt(A,v))})).apply(this,arguments)}function Ro(A,v){return Zi.apply(this,arguments)}function Zi(){return Zi=(0,T.Z)(function*(A,v){const M={identifier:v,continueUri:rt()?Le():"http://localhost"},{signinMethods:q}=yield function Ei(A,v){return Il.apply(this,arguments)}((0,Y.m9)(A),M);return q||[]}),Zi.apply(this,arguments)}function sl(A,v){return na.apply(this,arguments)}function na(){return na=(0,T.Z)(function*(A,v){const b=(0,Y.m9)(A),q={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};v&&Ba(b.auth,q,v);const{email:se}=yield function Lr(A,v){return ii.apply(this,arguments)}(b.auth,q);se!==A.email&&(yield A.reload())}),na.apply(this,arguments)}function _o(A,v,b){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:v};b&&Ba(M.auth,se,b);const{email:He}=yield function ws(A,v){return To.apply(this,arguments)}(M.auth,se);He!==A.email&&(yield A.reload())}),Ha.apply(this,arguments)}function $r(){return($r=(0,T.Z)(function*(A,v){return gt(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Vi(A,v){return ra.apply(this,arguments)}function ra(){return ra=(0,T.Z)(function*(A,{displayName:v,photoURL:b}){if(void 0===v&&void 0===b)return;const M=(0,Y.m9)(A),se={idToken:yield M.getIdToken(),displayName:v,photoUrl:b,returnSecureToken:!0},He=yield pr(M,function Cl(A,v){return $r.apply(this,arguments)}(M.auth,se));M.displayName=He.displayName||null,M.photoURL=He.photoUrl||null;const St=M.providerData.find(({providerId:un})=>"password"===un);St&&(St.displayName=M.displayName,St.photoURL=M.photoURL),yield M._updateTokensIfNecessary(He)}),ra.apply(this,arguments)}function Po(A,v){return ia((0,Y.m9)(A),v,null)}function Qi(A,v){return ia((0,Y.m9)(A),null,v)}function ia(A,v,b){return xo.apply(this,arguments)}function xo(){return(xo=(0,T.Z)(function*(A,v,b){const{auth:M}=A,se={idToken:yield A.getIdToken(),returnSecureToken:!0};v&&(se.email=v),b&&(se.password=b);const He=yield pr(A,Wi(M,se));yield A._updateTokensIfNecessary(He,!0)})).apply(this,arguments)}class sa{constructor(v,b,M={}){this.isNewUser=v,this.providerId=b,this.profile=M}}class yo extends sa{constructor(v,b,M,q){super(v,b,M),this.username=q}}class Ws extends sa{constructor(v,b){super(v,"facebook.com",b)}}class Tl extends yo{constructor(v,b){super(v,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class oa extends sa{constructor(v,b){super(v,"google.com",b)}}class ol extends yo{constructor(v,b,M){super(v,"twitter.com",b,M)}}function aa(A){const{user:v,_tokenResponse:b}=A;return v.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Qu(A){var v,b;if(!A)return null;const{providerId:M}=A,q=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},se=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!M&&A?.idToken){const He=null===(b=null===(v=rn(A.idToken))||void 0===v?void 0:v.firebase)||void 0===b?void 0:b.sign_in_provider;if(He)return new sa(se,"anonymous"!==He&&"custom"!==He?He:null)}if(!M)return null;switch(M){case"facebook.com":return new Ws(se,q);case"github.com":return new Tl(se,q);case"google.com":return new oa(se,q);case"twitter.com":return new ol(se,q,A.screenName||null);case"custom":case"anonymous":return new sa(se,null);default:return new sa(se,M,q)}}(b)}class Jr{constructor(v,b,M){this.type=v,this.credential=b,this.auth=M}static _fromIdtoken(v,b){return new Jr("enroll",v,b)}static _fromMfaPendingCredential(v){return new Jr("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var b,M;if(v?.multiFactorSession){if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.pendingCredential)return Jr._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(M=v.multiFactorSession)&&void 0!==M&&M.idToken)return Jr._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Xr{constructor(v,b,M){this.session=v,this.hints=b,this.signInResolver=M}static _fromError(v,b){const M=qr(v),q=b.customData._serverResponse,se=(q.mfaInfo||[]).map(St=>Ns._fromServerResponse(M,St));Ne(q.mfaPendingCredential,M,"internal-error");const He=Jr._fromMfaPendingCredential(q.mfaPendingCredential);return new Xr(He,se,function(){var St=(0,T.Z)(function*(un){const In=yield un._process(M,He);delete q.mfaInfo,delete q.mfaPendingCredential;const Xn=Object.assign(Object.assign({},q),{idToken:In.idToken,refreshToken:In.refreshToken});switch(b.operationType){case"signIn":const Ni=yield ls._fromIdTokenResponse(M,b.operationType,Xn);return yield M._updateCurrentUser(Ni.user),Ni;case"reauthenticate":return Ne(b.user,M,"internal-error"),ls._forOperation(b.user,b.operationType,Xn);default:ht(M,"internal-error")}});return function(un){return St.apply(this,arguments)}}())}resolveSignIn(v){var b=this;return(0,T.Z)(function*(){return b.signInResolver(v)})()}}function Yl(A,v){var b;const M=(0,Y.m9)(A),q=v;return Ne(v.customData.operationType,M,"argument-error"),Ne(null===(b=q.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,M,"argument-error"),Xr._fromError(M,q)}class Zl{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(M=>Ns._fromServerResponse(v.auth,M)))})}static _fromUser(v){return new Zl(v)}getSession(){var v=this;return(0,T.Z)(function*(){return Jr._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,b){var M=this;return(0,T.Z)(function*(){const q=v,se=yield M.getSession(),He=yield pr(M.user,q._process(M.user.auth,se,b));return yield M.user._updateTokensIfNecessary(He),M.user.reload()})()}unenroll(v){var b=this;return(0,T.Z)(function*(){const M="string"==typeof v?v:v.uid,q=yield b.user.getIdToken();try{const se=yield pr(b.user,function _d(A,v){return gt(A,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(A,v))}(b.user.auth,{idToken:q,mfaEnrollmentId:M}));b.enrolledFactors=b.enrolledFactors.filter(({uid:He})=>He!==M),yield b.user._updateTokensIfNecessary(se),yield b.user.reload()}catch(se){throw se}})()}}const Ql=new WeakMap;function Al(A){const v=(0,Y.m9)(A);return Ql.has(v)||Ql.set(v,Zl._fromUser(v)),Ql.get(v)}const wa="__sak";class R{constructor(v,b){this.storageRetriever=v,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(wa,"1"),this.storage.removeItem(wa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,b){return this.storage.setItem(v,JSON.stringify(b)),Promise.resolve()}_get(v){const b=this.storage.getItem(v);return Promise.resolve(b?JSON.parse(b):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ue=(()=>{class A extends R{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,M)=>this.onStorageEvent(b,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $(){const A=(0,Y.z$)();return Q(A)||Xe(A)}()&&function Bs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=On(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const M of Object.keys(this.listeners)){const q=this.storage.getItem(M),se=this.localCache[M];q!==se&&b(M,se,q)}}onStorageEvent(b,M=!1){if(!b.key)return void this.forAllChangedKeys((St,un,In)=>{this.notifyListeners(St,In)});const q=b.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const St=this.storage.getItem(q);if(b.newValue!==St)null!==b.newValue?this.storage.setItem(q,b.newValue):this.storage.removeItem(q);else if(this.localCache[q]===b.newValue&&!M)return}const se=()=>{const St=this.storage.getItem(q);!M&&this.localCache[q]===St||this.notifyListeners(q,St)},He=this.storage.getItem(q);!function Bt(){return(0,Y.w1)()&&10===document.documentMode}()||He===b.newValue||b.newValue===b.oldValue?se():setTimeout(se,10)}notifyListeners(b,M){this.localCache[b]=M;const q=this.listeners[b];if(q)for(const se of Array.from(q))se(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,M,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:M,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,M){var q=()=>super._set,se=this;return(0,T.Z)(function*(){yield q().call(se,b,M),se.localCache[b]=JSON.stringify(M)})()}_get(b){var M=()=>super._get,q=this;return(0,T.Z)(function*(){const se=yield M().call(q,b);return q.localCache[b]=JSON.stringify(se),se})()}_remove(b){var M=()=>super._remove,q=this;return(0,T.Z)(function*(){yield M().call(q,b),delete q.localCache[b]})()}}return A.type="LOCAL",A})(),ln=(()=>{class A extends R{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,M){}_removeListener(b,M){}}return A.type="SESSION",A})();let ot=(()=>{class A{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const M=this.receivers.find(se=>se.isListeningto(b));if(M)return M;const q=new A(b);return this.receivers.push(q),q}isListeningto(b){return this.eventTarget===b}handleEvent(b){var M=this;return(0,T.Z)(function*(){const q=b,{eventId:se,eventType:He,data:St}=q.data,un=M.handlersMap[He];if(!un?.size)return;q.ports[0].postMessage({status:"ack",eventId:se,eventType:He});const In=Array.from(un).map(function(){var Ni=(0,T.Z)(function*(pl){return pl(q.origin,St)});return function(pl){return Ni.apply(this,arguments)}}()),Xn=yield function or(A){return Promise.all(A.map(function(){var v=(0,T.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(M){return{fulfilled:!1,reason:M}}});return function(b){return v.apply(this,arguments)}}()))}(In);q.ports[0].postMessage({status:"done",eventId:se,eventType:He,response:Xn})})()}_subscribe(b,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(M)}_unsubscribe(b,M){this.handlersMap[b]&&M&&this.handlersMap[b].delete(M),(!M||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function vn(A="",v=10){let b="";for(let M=0;M<v;M++)b+=Math.floor(10*Math.random());return A+b}class Vn{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,b,M=50){var q=this;return(0,T.Z)(function*(){const se=typeof MessageChannel<"u"?new MessageChannel:null;if(!se)throw new Error("connection_unavailable");let He,St;return new Promise((un,In)=>{const Xn=vn("",20);se.port1.start();const Ni=setTimeout(()=>{In(new Error("unsupported_event"))},M);St={messageChannel:se,onMessage(pl){const Go=pl;if(Go.data.eventId===Xn)switch(Go.data.status){case"ack":clearTimeout(Ni),He=setTimeout(()=>{In(new Error("timeout"))},3e3);break;case"done":clearTimeout(He),un(Go.data.response);break;default:clearTimeout(Ni),clearTimeout(He),In(new Error("invalid_response"))}}},q.handlers.add(St),se.port1.addEventListener("message",St.onMessage),q.target.postMessage({eventType:v,eventId:Xn,data:b},[se.port2])}).finally(()=>{St&&q.removeMessageHandler(St)})})()}}function Dn(){return window}function xt(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function kt(){return(kt=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tr="firebaseLocalStorageDb",vo=1,$a="firebaseLocalStorage",Fo="fbase_key";class ul{constructor(v){this.request=v}toPromise(){return new Promise((v,b)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function la(A,v){return A.transaction([$a],v?"readwrite":"readonly").objectStore($a)}function ua(){const A=indexedDB.open(Tr,vo);return new Promise((v,b)=>{A.addEventListener("error",()=>{b(A.error)}),A.addEventListener("upgradeneeded",()=>{const M=A.result;try{M.createObjectStore($a,{keyPath:Fo})}catch(q){b(q)}}),A.addEventListener("success",(0,T.Z)(function*(){const M=A.result;M.objectStoreNames.contains($a)?v(M):(M.close(),yield function yd(){const A=indexedDB.deleteDatabase(Tr);return new ul(A).toPromise()}(),v(yield ua()))}))})}function Ju(A,v,b){return yu.apply(this,arguments)}function yu(){return(yu=(0,T.Z)(function*(A,v,b){const M=la(A,!0).put({[Fo]:v,value:b});return new ul(M).toPromise()})).apply(this,arguments)}function Ol(){return(Ol=(0,T.Z)(function*(A,v){const b=la(A,!1).get(v),M=yield new ul(b).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Mn(A,v){const b=la(A,!0).delete(v);return new ul(b).toPromise()}const fn=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,T.Z)(function*(){return b.db||(b.db=yield ua()),b.db})()}_withRetries(b){var M=this;return(0,T.Z)(function*(){let q=0;for(;;)try{const se=yield M._openDb();return yield b(se)}catch(se){if(q++>3)throw se;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,T.Z)(function*(){return xt()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,T.Z)(function*(){b.receiver=ot._getInstance(function _t(){return xt()?self:null}()),b.receiver._subscribe("keyChanged",function(){var M=(0,T.Z)(function*(q,se){return{keyProcessed:(yield b._poll()).includes(se.key)}});return function(q,se){return M.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var M=(0,T.Z)(function*(q,se){return["keyChanged"]});return function(q,se){return M.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,T.Z)(function*(){var M,q;if(b.activeServiceWorker=yield function _i(){return kt.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new Vn(b.activeServiceWorker);const se=yield b.sender._send("ping",{},800);se&&null!==(M=se[0])&&void 0!==M&&M.fulfilled&&null!==(q=se[0])&&void 0!==q&&q.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var M=this;return(0,T.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function je(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:b},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const b=yield ua();return yield Ju(b,wa,"1"),yield Mn(b,wa),!0}catch{}return!1})()}_withPendingWrite(b){var M=this;return(0,T.Z)(function*(){M.pendingWrites++;try{yield b()}finally{M.pendingWrites--}})()}_set(b,M){var q=this;return(0,T.Z)(function*(){return q._withPendingWrite((0,T.Z)(function*(){return yield q._withRetries(se=>Ju(se,b,M)),q.localCache[b]=M,q.notifyServiceWorker(b)}))})()}_get(b){var M=this;return(0,T.Z)(function*(){const q=yield M._withRetries(se=>function bo(A,v){return Ol.apply(this,arguments)}(se,b));return M.localCache[b]=q,q})()}_remove(b){var M=this;return(0,T.Z)(function*(){return M._withPendingWrite((0,T.Z)(function*(){return yield M._withRetries(q=>Mn(q,b)),delete M.localCache[b],M.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,T.Z)(function*(){const M=yield b._withRetries(He=>{const St=la(He,!1).getAll();return new ul(St).toPromise()});if(!M)return[];if(0!==b.pendingWrites)return[];const q=[],se=new Set;for(const{fbase_key:He,value:St}of M)se.add(He),JSON.stringify(b.localCache[He])!==JSON.stringify(St)&&(b.notifyListeners(He,St),q.push(He));for(const He of Object.keys(b.localCache))b.localCache[He]&&!se.has(He)&&(b.notifyListeners(He,null),q.push(He));return q})()}notifyListeners(b,M){this.localCache[b]=M;const q=this.listeners[b];if(q)for(const se of Array.from(q))se(M)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(M)}_removeListener(b,M){this.listeners[b]&&(this.listeners[b].delete(M),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function dr(){return(dr=(0,T.Z)(function*(A){return(yield gt(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lo(A){return new Promise((v,b)=>{const M=document.createElement("script");M.setAttribute("src",A),M.onload=v,M.onerror=q=>{const se=lt("internal-error");se.customData=q,b(se)},M.type="text/javascript",M.charset="UTF-8",function Ht(){var A,v;return null!==(v=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==v?v:document}().appendChild(M)})}function so(A){return`__${A}${Math.floor(1e6*Math.random())}`}const Ur=1e12;class Da{constructor(v){this.auth=v,this.counter=Ur,this._widgets=new Map}render(v,b){const M=this.counter;return this._widgets.set(M,new cs(v,this.auth.name,b||{})),this.counter++,M}reset(v){var b;const M=v||Ur;null===(b=this._widgets.get(M))||void 0===b||b.delete(),this._widgets.delete(M)}getResponse(v){var b;return(null===(b=this._widgets.get(v||Ur))||void 0===b?void 0:b.getResponse())||""}execute(v){var b=this;return(0,T.Z)(function*(){var M;return null===(M=b._widgets.get(v||Ur))||void 0===M||M.execute(),""})()}}class cs{constructor(v,b,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof v?document.getElementById(v):v;Ne(q,"argument-error",{appName:b}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xu(A){const v=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<A;M++)v.push(b.charAt(Math.floor(Math.random()*b.length)));return v.join("")}(50);const{callback:v,"expired-callback":b}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nl=so("rcb"),Br=new st(3e4,6e4);class wo{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=Dn().grecaptcha)||void 0===v||!v.render)}load(v,b=""){return Ne(function za(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(b),v,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(Dn().grecaptcha):new Promise((M,q)=>{const se=Dn().setTimeout(()=>{q(lt(v,"network-request-failed"))},Br.get());Dn()[Nl]=()=>{Dn().clearTimeout(se),delete Dn()[Nl];const St=Dn().grecaptcha;if(!St)return void q(lt(v,"internal-error"));const un=St.render;St.render=(In,Xn)=>{const Ni=un(In,Xn);return this.counter++,Ni},this.hostLanguage=b,M(St)},Lo(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Nl,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(se),q(lt(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var b;return!(null===(b=Dn().grecaptcha)||void 0===b||!b.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oo{load(v){return(0,T.Z)(function*(){return new Da(v)})()}clearedOneInstance(){}}const ca="recaptcha",qe={theme:"light",type:"image"};class Ml{constructor(v,b=Object.assign({},qe),M){this.parameters=b,this.type=ca,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qr(M),this.isInvisible="invisible"===this.parameters.size,Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof v?document.getElementById(v):v;Ne(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oo:new wo,this.validateStartingState()}verify(){var v=this;return(0,T.Z)(function*(){v.assertNotDestroyed();const b=yield v.render(),M=v.getAssertedRecaptcha();return M.getResponse(b)||new Promise(se=>{const He=St=>{St&&(v.tokenChangeListeners.delete(He),se(St))};v.tokenChangeListeners.add(He),v.isInvisible&&M.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return b=>{if(this.tokenChangeListeners.forEach(M=>M(b)),"function"==typeof v)v(b);else if("string"==typeof v){const M=Dn()[v];"function"==typeof M&&M(b)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,T.Z)(function*(){if(yield v.init(),!v.widgetId){let b=v.container;if(!v.isInvisible){const M=document.createElement("div");b.appendChild(M),b=M}v.widgetId=v.getAssertedRecaptcha().render(b,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,T.Z)(function*(){Ne(rt()&&!xt(),v.auth,"internal-error"),yield function ao(){let A=null;return new Promise(v=>{"complete"!==document.readyState?(A=()=>v(),window.addEventListener("load",A)):v()}).catch(v=>{throw A&&window.removeEventListener("load",A),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const b=yield function io(A){return dr.apply(this,arguments)}(v.auth);Ne(b,v.auth,"internal-error"),v.parameters.sitekey=b})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wa{constructor(v,b){this.verificationId=v,this.onConfirmation=b}confirm(v){const b=_r._fromVerification(this.verificationId,v);return this.onConfirmation(b)}}function cl(A,v,b){return lo.apply(this,arguments)}function lo(){return(lo=(0,T.Z)(function*(A,v,b){const M=qr(A),q=yield hl(M,v,(0,Y.m9)(b));return new Wa(q,se=>Os(M,se))})).apply(this,arguments)}function Vr(A,v,b){return dl.apply(this,arguments)}function dl(){return(dl=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);yield zs(!1,M,"phone");const q=yield hl(M.auth,v,(0,Y.m9)(b));return new Wa(q,se=>rl(M,se))})).apply(this,arguments)}function vd(A,v,b){return ec.apply(this,arguments)}function ec(){return(ec=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A),q=yield hl(M.auth,v,(0,Y.m9)(b));return new Wa(q,se=>Nr(M,se))})).apply(this,arguments)}function hl(A,v,b){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,T.Z)(function*(A,v,b){var M;const q=yield b.verify();try{let se;if(Ne("string"==typeof q,A,"argument-error"),Ne(b.type===ca,A,"argument-error"),se="string"==typeof v?{phoneNumber:v}:v,"session"in se){const He=se.session;if("phoneNumber"in se)return Ne("enroll"===He.type,A,"internal-error"),(yield function Di(A,v){return gt(A,"POST","/v2/accounts/mfaEnrollment:start",Wt(A,v))}(A,{idToken:He.credential,phoneEnrollmentInfo:{phoneNumber:se.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{Ne("signin"===He.type,A,"internal-error");const St=(null===(M=se.multiFactorHint)||void 0===M?void 0:M.uid)||se.multiFactorUid;return Ne(St,A,"missing-multi-factor-info"),(yield function Ai(A,v){return gt(A,"POST","/v2/accounts/mfaSignIn:start",Wt(A,v))}(A,{mfaPendingCredential:He.credential,mfaEnrollmentId:St,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:He}=yield function Ve(A,v){return dt.apply(this,arguments)}(A,{phoneNumber:se.phoneNumber,recaptchaToken:q});return He}}finally{b._reset()}}),Rl.apply(this,arguments)}function Ms(A,v){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,T.Z)(function*(A,v){yield no((0,Y.m9)(A),v)})).apply(this,arguments)}let Ka=(()=>{class A{constructor(b){this.providerId=A.PROVIDER_ID,this.auth=qr(b)}verifyPhoneNumber(b,M){return hl(this.auth,b,(0,Y.m9)(M))}static credential(b,M){return _r._fromVerification(b,M)}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:M,temporaryProof:q}=b;return M&&q?_r._fromTokenResponse(M,q):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function fl(A,v){return v?ft(v):(Ne(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class bu extends ki{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return bi(v,this._buildIdpRequest())}_linkToIdToken(v,b){return bi(v,this._buildIdpRequest(b))}_getReauthenticationResolver(v){return bi(v,this._buildIdpRequest())}_buildIdpRequest(v){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(b.idToken=v),b}}function zr(A){return La(A.auth,new bu(A),A.bypassAuthState)}function wu(A){const{auth:v,user:b}=A;return Ne(b,v,"internal-error"),pu(b,new bu(A),A.bypassAuthState)}function uo(A){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,T.Z)(function*(A){const{auth:v,user:b}=A;return Ne(b,v,"internal-error"),no(b,new bu(A),A.bypassAuthState)})).apply(this,arguments)}class Oi{constructor(v,b,M,q,se=!1){this.auth=v,this.resolver=M,this.user=q,this.bypassAuthState=se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var v=this;return new Promise(function(){var b=(0,T.Z)(function*(M,q){v.pendingPromise={resolve:M,reject:q};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(se){v.reject(se)}});return function(M,q){return b.apply(this,arguments)}}())}onAuthEvent(v){var b=this;return(0,T.Z)(function*(){const{urlResponse:M,sessionId:q,postBody:se,tenantId:He,error:St,type:un}=v;if(St)return void b.reject(St);const In={auth:b.auth,requestUri:M,sessionId:q,tenantId:He||void 0,postBody:se||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(un)(In))}catch(Xn){b.reject(Xn)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return zr;case"linkViaPopup":case"linkViaRedirect":return uo;case"reauthViaPopup":case"reauthViaRedirect":return wu;default:ht(this.auth,"internal-error")}}resolve(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const co=new st(2e3,1e4);function qa(A,v,b){return C.apply(this,arguments)}function C(){return(C=(0,T.Z)(function*(A,v,b){const M=qr(A);Ye(A,v,Ts);const q=fl(M,b);return new K(M,"signInViaPopup",v,q).executeNotNull()})).apply(this,arguments)}function S(A,v,b){return E.apply(this,arguments)}function E(){return(E=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);Ye(M.auth,v,Ts);const q=fl(M.auth,b);return new K(M.auth,"reauthViaPopup",v,q,M).executeNotNull()})).apply(this,arguments)}function P(A,v,b){return V.apply(this,arguments)}function V(){return(V=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);Ye(M.auth,v,Ts);const q=fl(M.auth,b);return new K(M.auth,"linkViaPopup",v,q,M).executeNotNull()})).apply(this,arguments)}let K=(()=>{class A extends Oi{constructor(b,M,q,se,He){super(b,M,se,He),this.provider=q,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var b=this;return(0,T.Z)(function*(){const M=yield b.execute();return Ne(M,b.auth,"internal-error"),M})()}onExecution(){var b=this;return(0,T.Z)(function*(){tt(1===b.filter.length,"Popup operations only handle one event");const M=vn();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],M),b.authWindow.associatedEvent=M,b.resolver._originValidation(b.auth).catch(q=>{b.reject(q)}),b.resolver._isIframeWebStorageSupported(b.auth,q=>{q||b.reject(lt(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const b=()=>{var M,q;this.pollId=null!==(q=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==q&&q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(lt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,co.get())};b()}}return A.currentPopupAction=null,A})();const ee="pendingRedirect",Me=new Map;class vt extends Oi{constructor(v,b,M=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,M),this.eventId=null}execute(){var v=()=>super.execute,b=this;return(0,T.Z)(function*(){let M=Me.get(b.auth._key());if(!M){try{const se=(yield function Zt(A,v){return Kt.apply(this,arguments)}(b.resolver,b.auth))?yield v().call(b):null;M=()=>Promise.resolve(se)}catch(q){M=()=>Promise.reject(q)}Me.set(b.auth._key(),M)}return b.bypassAuthState||Me.set(b.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(v){var b=()=>super.onAuthEvent,M=this;return(0,T.Z)(function*(){if("signInViaRedirect"===v.type)return b().call(M,v);if("unknown"!==v.type){if(v.eventId){const q=yield M.auth._redirectUserForId(v.eventId);if(q)return M.user=q,b().call(M,v);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function Kt(){return(Kt=(0,T.Z)(function*(A,v){const b=ho(v),M=qs(A);if(!(yield M._isAvailable()))return!1;const q="true"===(yield M._get(b));return yield M._remove(b),q})).apply(this,arguments)}function Kn(A,v){return oi.apply(this,arguments)}function oi(){return(oi=(0,T.Z)(function*(A,v){return qs(A)._set(ho(v),"true")})).apply(this,arguments)}function yi(){Me.clear()}function Ks(A,v){Me.set(A._key(),v)}function qs(A){return ft(A._redirectPersistence)}function ho(A){return be(ee,A.config.apiKey,A.name)}function xl(A,v,b){return function Ia(A,v,b){return Uo.apply(this,arguments)}(A,v,b)}function Uo(){return(Uo=(0,T.Z)(function*(A,v,b){const M=qr(A);Ye(A,v,Ts),yield M._initializationPromise;const q=fl(M,b);return yield Kn(q,M),q._openRedirect(M,v,"signInViaRedirect")})).apply(this,arguments)}function F(A,v,b){return function G(A,v,b){return Z.apply(this,arguments)}(A,v,b)}function Z(){return(Z=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);Ye(M.auth,v,Ts),yield M.auth._initializationPromise;const q=fl(M.auth,b);yield Kn(q,M.auth);const se=yield Zn(M);return q._openRedirect(M.auth,v,"reauthViaRedirect",se)})).apply(this,arguments)}function ge(A,v,b){return function xe(A,v,b){return ze.apply(this,arguments)}(A,v,b)}function ze(){return(ze=(0,T.Z)(function*(A,v,b){const M=(0,Y.m9)(A);Ye(M.auth,v,Ts),yield M.auth._initializationPromise;const q=fl(M.auth,b);yield zs(!1,M,v.providerId),yield Kn(q,M.auth);const se=yield Zn(M);return q._openRedirect(M.auth,v,"linkViaRedirect",se)})).apply(this,arguments)}function At(A,v){return dn.apply(this,arguments)}function dn(){return(dn=(0,T.Z)(function*(A,v){return yield qr(A)._initializationPromise,bn(A,v,!1)})).apply(this,arguments)}function bn(A,v){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,T.Z)(function*(A,v,b=!1){const M=qr(A),q=fl(M,v),He=yield new vt(M,q,b).execute();return He&&!b&&(delete He.user._redirectEventId,yield M._persistUserIfCurrent(He.user),yield M._setRedirectUser(null,v)),He})).apply(this,arguments)}function Zn(A){return wn.apply(this,arguments)}function wn(){return(wn=(0,T.Z)(function*(A){const v=vn(`${A.uid}:::`);return A._redirectEventId=v,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),v})).apply(this,arguments)}class ds{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let b=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(v,M)&&(b=!0,this.sendToConsumer(v,M),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Mr(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ar(A);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=v,b=!0)),b}sendToConsumer(v,b){var M;if(v.error&&!ar(v)){const q=(null===(M=v.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";b.onError(lt(this.auth,q))}else b.onAuthEvent(v)}isEventForConsumer(v,b){const M=null===b.eventId||!!v.eventId&&v.eventId===b.eventId;return b.filter.includes(v.type)&&M}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eu(v))}saveEventToCache(v){this.cachedEventUids.add(Eu(v)),this.lastProcessedEventTime=Date.now()}}function Eu(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(v=>v).join("-")}function ar({type:A,error:v}){return"unknown"===A&&"auth/no-auth-event"===v?.code}function Rs(A){return da.apply(this,arguments)}function da(){return(da=(0,T.Z)(function*(A,v={}){return gt(A,"GET","/v1/projects",v)})).apply(this,arguments)}const xc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bd=/^https?/;function yh(){return(yh=(0,T.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:v}=yield Rs(A);for(const b of v)try{if(Df(b))return}catch{}ht(A,"unauthorized-domain")})).apply(this,arguments)}function Df(A){const v=Le(),{protocol:b,hostname:M}=new URL(v);if(A.startsWith("chrome-extension://")){const He=new URL(A);return""===He.hostname&&""===M?"chrome-extension:"===b&&A.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===b&&He.hostname===M}if(!bd.test(b))return!1;if(xc.test(A))return M===A;const q=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(M)}const Pm=new st(3e4,6e4);function If(){const A=Dn().___jsl;if(A?.H)for(const v of Object.keys(A.H))if(A.H[v].r=A.H[v].r||[],A.H[v].L=A.H[v].L||[],A.H[v].r=[...A.H[v].L],A.CP)for(let b=0;b<A.CP.length;b++)A.CP[b]=null}let vh=null;const Cf=new st(5e3,15e3),xm="__/auth/iframe",iv="emulator/auth/iframe",Tf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ed=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sv(A){const v=A.config;Ne(v.authDomain,A,"auth-domain-config-required");const b=v.emulator?Mt(v,iv):`https://${A.config.authDomain}/${xm}`,M={apiKey:v.apiKey,appName:A.name,v:h.SDK_VERSION},q=Ed.get(A.config.apiHost);q&&(M.eid=q);const se=A._getFrameworks();return se.length&&(M.fw=se.join(",")),`${b}?${(0,Y.xO)(M).slice(1)}`}function Dd(){return Dd=(0,T.Z)(function*(A){const v=yield function wd(A){return vh=vh||function rv(A){return new Promise((v,b)=>{var M,q,se;function He(){If(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{If(),b(lt(A,"network-request-failed"))},timeout:Pm.get()})}if(null!==(q=null===(M=Dn().gapi)||void 0===M?void 0:M.iframes)&&void 0!==q&&q.Iframe)v(gapi.iframes.getContext());else{if(null===(se=Dn().gapi)||void 0===se||!se.load){const St=so("iframefcb");return Dn()[St]=()=>{gapi.load?He():b(lt(A,"network-request-failed"))},Lo(`https://apis.google.com/js/api.js?onload=${St}`).catch(un=>b(un))}He()}}).catch(v=>{throw vh=null,v})}(A),vh}(A),b=Dn().gapi;return Ne(b,A,"internal-error"),v.open({where:document.body,url:sv(A),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tf,dontclear:!0},M=>new Promise(function(){var q=(0,T.Z)(function*(se,He){yield M.restyle({setHideOnLeave:!1});const St=lt(A,"network-request-failed"),un=Dn().setTimeout(()=>{He(St)},Cf.get());function In(){Dn().clearTimeout(un),se(M)}M.ping(In).then(In,()=>{He(St)})});return function(se,He){return q.apply(this,arguments)}}()))}),Dd.apply(this,arguments)}const Eo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ci=500,Sf=600,Du="_blank",Vo="http://localhost";class hs{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const km="__/auth/handler",Of="emulator/auth/handler";function eu(A,v,b,M,q,se){Ne(A.config.authDomain,A,"auth-domain-config-required"),Ne(A.config.apiKey,A,"invalid-api-key");const He={apiKey:A.config.apiKey,appName:A.name,authType:b,redirectUrl:M,v:h.SDK_VERSION,eventId:q};if(v instanceof Ts){v.setDefaultLanguage(A.languageCode),He.providerId=v.providerId||"",(0,Y.xb)(v.getCustomParameters())||(He.customParameters=JSON.stringify(v.getCustomParameters()));for(const[un,In]of Object.entries(se||{}))He[un]=In}if(v instanceof Hs){const un=v.getScopes().filter(In=>""!==In);un.length>0&&(He.scopes=un.join(","))}A.tenantId&&(He.tid=A.tenantId);const St=He;for(const un of Object.keys(St))void 0===St[un]&&delete St[un];return`${function kc({config:A}){return A.emulator?Mt(A,Of):`https://${A.authDomain}/${km}`}(A)}?${(0,Y.xO)(St).slice(1)}`}const Iu="webStorageSupport",Nf=class bh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ln,this._completeRedirectFn=bn,this._overrideRedirectResult=Ks}_openPopup(v,b,M,q){var se=this;return(0,T.Z)(function*(){var He;tt(null===(He=se.eventManagers[v._key()])||void 0===He?void 0:He.manager,"_initialize() not called before _openPopup()");const St=eu(v,b,M,Le(),q);return function Af(A,v,b,M=ci,q=Sf){const se=Math.max((window.screen.availHeight-q)/2,0).toString(),He=Math.max((window.screen.availWidth-M)/2,0).toString();let St="";const un=Object.assign(Object.assign({},Eo),{width:M.toString(),height:q.toString(),top:se,left:He}),In=(0,Y.z$)().toLowerCase();b&&(St=Pe(In)?Du:b),re(In)&&(v=v||Vo,un.scrollbars="yes");const Xn=Object.entries(un).reduce((pl,[Go,Za])=>`${pl}${Go}=${Za},`,"");if(function nn(A=(0,Y.z$)()){var v;return Xe(A)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(In)&&"_self"!==St)return function Rr(A,v){const b=document.createElement("a");b.href=A,b.target=v;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(M)}(v||"",St),new hs(null);const Ni=window.open(v||"",St,Xn);Ne(Ni,A,"popup-blocked");try{Ni.focus()}catch{}return new hs(Ni)}(v,St,vn())})()}_openRedirect(v,b,M,q){var se=this;return(0,T.Z)(function*(){return yield se._originValidation(v),function Ct(A){Dn().location.href=A}(eu(v,b,M,Le(),q)),new Promise(()=>{})})()}_initialize(v){const b=v._key();if(this.eventManagers[b]){const{manager:q,promise:se}=this.eventManagers[b];return q?Promise.resolve(q):(tt(se,"If manager is not set, promise should be"),se)}const M=this.initAndGetManager(v);return this.eventManagers[b]={promise:M},M.catch(()=>{delete this.eventManagers[b]}),M}initAndGetManager(v){var b=this;return(0,T.Z)(function*(){const M=yield function Ji(A){return Dd.apply(this,arguments)}(v),q=new ds(v);return M.register("authEvent",se=>(Ne(se?.authEvent,v,"invalid-auth-event"),{status:q.onEvent(se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[v._key()]={manager:q},b.iframes[v._key()]=M,q})()}_isIframeWebStorageSupported(v,b){this.iframes[v._key()].send(Iu,{type:Iu},q=>{var se;const He=null===(se=q?.[0])||void 0===se?void 0:se[Iu];void 0!==He&&b(!!He),ht(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function _h(A){return yh.apply(this,arguments)}(v)),this.originValidationPromises[b]}get _shouldInitProactively(){return On()||Q()||Xe()}};class xp{constructor(v){this.factorId=v}_process(v,b,M){switch(b.type){case"enroll":return this._finalizeEnroll(v,b.credential,M);case"signin":return this._finalizeSignIn(v,b.credential);default:return Ie("unexpected MultiFactorSessionType")}}}class Ya extends xp{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Ya(v)}_finalizeEnroll(v,b,M){return function Rc(A,v){return gt(A,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(A,v))}(v,{idToken:b,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,b){return function Wn(A,v){return gt(A,"POST","/v2/accounts/mfaSignIn:finalize",Wt(A,v))}(v,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kp=(()=>{class A{constructor(){}static assertion(b){return Ya._fromCredential(b)}}return A.FACTOR_ID="phone",A})();var tc="@firebase/auth";class Id{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var b=this;return(0,T.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const b=this.auth.onIdTokenChanged(M=>{v(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,b),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const b=this.internalListeners.get(v);b&&(this.internalListeners.delete(v),b(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,Y.Pz)("authIdTokenMaxAge"),function Td(A){(0,h._registerComponent)(new Te.wA("auth",(v,{options:b})=>{const M=v.getProvider("app").getImmediate(),q=v.getProvider("heartbeat"),{apiKey:se,authDomain:He}=M.options;return((St,un)=>{Ne(se&&!se.includes(":"),"invalid-api-key",{appName:St.name}),Ne(!He?.includes(":"),"argument-error",{appName:St.name});const In={apiKey:se,authDomain:He,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qi(A)},Xn=new _a(St,un,In);return function Pt(A,v){const b=v?.persistence||[],M=(Array.isArray(b)?b:[b]).map(ft);v?.errorMap&&A._updateErrorMap(v.errorMap),A._initializeWithPersistence(M,v?.popupRedirectResolver)}(Xn,b),Xn})(M,q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,b,M)=>{v.getProvider("auth-internal").initialize()})),(0,h._registerComponent)(new Te.wA("auth-internal",v=>{const b=qr(v.getProvider("auth").getImmediate());return new Id(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,h.registerVersion)(tc,"0.21.5",function Cd(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,h.registerVersion)(tc,"0.21.5","esm2017")}("Browser")},2090:(zt,We,j)=>{j.d(We,{$s:()=>hn,BH:()=>Ye,DV:()=>qn,Dv:()=>cn,G6:()=>nt,GJ:()=>cr,L:()=>Fe,LL:()=>jt,Pz:()=>Qe,Sg:()=>Et,UG:()=>tt,UI:()=>en,US:()=>Te,Wj:()=>Jn,Wl:()=>xn,Yr:()=>$e,ZB:()=>Ce,ZR:()=>tn,aH:()=>lt,b$:()=>qt,cI:()=>yn,dS:()=>jr,eu:()=>st,g5:()=>h,gK:()=>br,gQ:()=>ri,h$:()=>pe,hl:()=>yt,hu:()=>Y,jU:()=>it,lb:()=>Pn,m9:()=>kr,ne:()=>mn,p$:()=>de,pd:()=>ni,r3:()=>Cn,ru:()=>ft,tV:()=>me,uI:()=>Ie,ug:()=>kn,vZ:()=>An,w1:()=>Le,w9:()=>pn,xO:()=>ei,xb:()=>Kr,z$:()=>Ne,zI:()=>Mt,zd:()=>ti});const T={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Y=function(be,_e){if(!be)throw h(_e)},h=function(be){return new Error("Firebase Database ("+T.SDK_VERSION+") INTERNAL ASSERT FAILED: "+be)},ve=function(be){const _e=[];let te=0;for(let re=0;re<be.length;re++){let Q=be.charCodeAt(re);Q<128?_e[te++]=Q:Q<2048?(_e[te++]=Q>>6|192,_e[te++]=63&Q|128):55296==(64512&Q)&&re+1<be.length&&56320==(64512&be.charCodeAt(re+1))?(Q=65536+((1023&Q)<<10)+(1023&be.charCodeAt(++re)),_e[te++]=Q>>18|240,_e[te++]=Q>>12&63|128,_e[te++]=Q>>6&63|128,_e[te++]=63&Q|128):(_e[te++]=Q>>12|224,_e[te++]=Q>>6&63|128,_e[te++]=63&Q|128)}return _e},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(be,_e){if(!Array.isArray(be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let Q=0;Q<be.length;Q+=3){const Pe=be[Q],ae=Q+1<be.length,he=ae?be[Q+1]:0,oe=Q+2<be.length,Ae=oe?be[Q+2]:0;let nn=(15&he)<<2|Ae>>6,Bt=63&Ae;oe||(Bt=64,ae||(nn=64)),re.push(te[Pe>>2],te[(3&Pe)<<4|he>>4],te[nn],te[Bt])}return re.join("")},encodeString(be,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(be):this.encodeByteArray(ve(be),_e)},decodeString(be,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(be):function(be){const _e=[];let te=0,re=0;for(;te<be.length;){const Q=be[te++];if(Q<128)_e[re++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Pe=be[te++];_e[re++]=String.fromCharCode((31&Q)<<6|63&Pe)}else if(Q>239&&Q<365){const oe=((7&Q)<<18|(63&be[te++])<<12|(63&be[te++])<<6|63&be[te++])-65536;_e[re++]=String.fromCharCode(55296+(oe>>10)),_e[re++]=String.fromCharCode(56320+(1023&oe))}else{const Pe=be[te++],ae=be[te++];_e[re++]=String.fromCharCode((15&Q)<<12|(63&Pe)<<6|63&ae)}}return _e.join("")}(this.decodeStringToByteArray(be,_e))},decodeStringToByteArray(be,_e){this.init_();const te=_e?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let Q=0;Q<be.length;){const Pe=te[be.charAt(Q++)],he=Q<be.length?te[be.charAt(Q)]:0;++Q;const Ae=Q<be.length?te[be.charAt(Q)]:64;++Q;const mt=Q<be.length?te[be.charAt(Q)]:64;if(++Q,null==Pe||null==he||null==Ae||null==mt)throw new ke;re.push(Pe<<2|he>>4),64!==Ae&&(re.push(he<<4&240|Ae>>2),64!==mt&&re.push(Ae<<6&192|mt))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let be=0;be<this.ENCODED_VALS.length;be++)this.byteToCharMap_[be]=this.ENCODED_VALS.charAt(be),this.charToByteMap_[this.byteToCharMap_[be]]=be,this.byteToCharMapWebSafe_[be]=this.ENCODED_VALS_WEBSAFE.charAt(be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[be]]=be,be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(be)]=be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(be)]=be)}}};class ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(be){const _e=ve(be);return Te.encodeByteArray(_e,!0)},Fe=function(be){return pe(be).replace(/\./g,"")},me=function(be){try{return Te.decodeString(be,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};function de(be){return Ce(void 0,be)}function Ce(be,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:return new Date(_e.getTime());case Object:void 0===be&&(be={});break;case Array:be=[];break;default:return _e}for(const te in _e)!_e.hasOwnProperty(te)||!et(te)||(be[te]=Ce(be[te],_e[te]));return be}function et(be){return"__proto__"!==be}const ct=()=>{try{return function Ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const be=process.env.__FIREBASE_DEFAULTS__;return be?JSON.parse(be):void 0})()||(()=>{if(typeof document>"u")return;let be;try{be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=be&&me(be[1]);return _e&&JSON.parse(_e)})()}catch(be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${be}`)}},lt=()=>{var be;return null===(be=ct())||void 0===be?void 0:be.config},Qe=be=>{var _e;return null===(_e=ct())||void 0===_e?void 0:_e[`_${be}`]};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,te)=>{this.resolve=_e,this.reject=te})}wrapCallback(_e){return(te,re)=>{te?this.reject(te):this.resolve(re),"function"==typeof _e&&(this.promise.catch(()=>{}),1===_e.length?_e(te):_e(te,re))}}}function Et(be,_e){if(be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=_e||"demo-project",Q=be.iat||0,Pe=be.sub||be.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ae=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:Q,exp:Q+3600,auth_time:Q,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},be);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(ae)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function tt(){var be;const _e=null===(be=ct())||void 0===be?void 0:be.forceEnvironment;if("node"===_e)return!0;if("browser"===_e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function ft(){const be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof be&&void 0!==be.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){const be=Ne();return be.indexOf("MSIE ")>=0||be.indexOf("Trident/")>=0}function $e(){return!0===T.NODE_CLIENT||!0===T.NODE_ADMIN}function nt(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yt(){try{return"object"==typeof indexedDB}catch{return!1}}function st(){return new Promise((be,_e)=>{try{let te=!0;const re="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(re);Q.onsuccess=()=>{Q.result.close(),te||self.indexedDB.deleteDatabase(re),be(!0)},Q.onupgradeneeded=()=>{te=!1},Q.onerror=()=>{var Pe;_e((null===(Pe=Q.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(te){_e(te)}})}function Mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class tn extends Error{constructor(_e,te,re){super(te),this.code=_e,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(_e,te,re){this.service=_e,this.serviceName=te,this.errors=re}create(_e,...te){const re=te[0]||{},Q=`${this.service}/${_e}`,Pe=this.errors[_e],ae=Pe?function Wt(be,_e){return be.replace(gt,(te,re)=>{const Q=_e[re];return null!=Q?String(Q):`<${re}?>`})}(Pe,re):"Error";return new tn(Q,`${this.serviceName}: ${ae} (${Q}).`,re)}}const gt=/\{\$([^}]+)}/g;function yn(be){return JSON.parse(be)}function xn(be){return JSON.stringify(be)}const jn=function(be){let _e={},te={},re={},Q="";try{const Pe=be.split(".");_e=yn(me(Pe[0])||""),te=yn(me(Pe[1])||""),Q=Pe[2],re=te.d||{},delete te.d}catch{}return{header:_e,claims:te,data:re,signature:Q}},pn=function(be){const te=jn(be).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},cr=function(be){const _e=jn(be).claims;return"object"==typeof _e&&!0===_e.admin};function Cn(be,_e){return Object.prototype.hasOwnProperty.call(be,_e)}function qn(be,_e){if(Object.prototype.hasOwnProperty.call(be,_e))return be[_e]}function Kr(be){for(const _e in be)if(Object.prototype.hasOwnProperty.call(be,_e))return!1;return!0}function en(be,_e,te){const re={};for(const Q in be)Object.prototype.hasOwnProperty.call(be,Q)&&(re[Q]=_e.call(te,be[Q],Q,be));return re}function An(be,_e){if(be===_e)return!0;const te=Object.keys(be),re=Object.keys(_e);for(const Q of te){if(!re.includes(Q))return!1;const Pe=be[Q],ae=_e[Q];if(Gt(Pe)&&Gt(ae)){if(!An(Pe,ae))return!1}else if(Pe!==ae)return!1}for(const Q of re)if(!te.includes(Q))return!1;return!0}function Gt(be){return null!==be&&"object"==typeof be}function ei(be){const _e=[];for(const[te,re]of Object.entries(be))Array.isArray(re)?re.forEach(Q=>{_e.push(encodeURIComponent(te)+"="+encodeURIComponent(Q))}):_e.push(encodeURIComponent(te)+"="+encodeURIComponent(re));return _e.length?"&"+_e.join("&"):""}function ti(be){const _e={};return be.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[Q,Pe]=re.split("=");_e[decodeURIComponent(Q)]=decodeURIComponent(Pe)}}),_e}function ni(be){const _e=be.indexOf("?");if(!_e)return"";const te=be.indexOf("#",_e);return be.substring(_e,te>0?te:void 0)}class ri{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let _e=1;_e<this.blockSize;++_e)this.pad_[_e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(_e,te){te||(te=0);const re=this.W_;if("string"==typeof _e)for(let mt=0;mt<16;mt++)re[mt]=_e.charCodeAt(te)<<24|_e.charCodeAt(te+1)<<16|_e.charCodeAt(te+2)<<8|_e.charCodeAt(te+3),te+=4;else for(let mt=0;mt<16;mt++)re[mt]=_e[te]<<24|_e[te+1]<<16|_e[te+2]<<8|_e[te+3],te+=4;for(let mt=16;mt<80;mt++){const nn=re[mt-3]^re[mt-8]^re[mt-14]^re[mt-16];re[mt]=4294967295&(nn<<1|nn>>>31)}let Ae,Xe,Q=this.chain_[0],Pe=this.chain_[1],ae=this.chain_[2],he=this.chain_[3],oe=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?(Ae=he^Pe&(ae^he),Xe=1518500249):(Ae=Pe^ae^he,Xe=1859775393):mt<60?(Ae=Pe&ae|he&(Pe|ae),Xe=2400959708):(Ae=Pe^ae^he,Xe=3395469782);const nn=(Q<<5|Q>>>27)+Ae+oe+Xe+re[mt]&4294967295;oe=he,he=ae,ae=4294967295&(Pe<<30|Pe>>>2),Pe=Q,Q=nn}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+ae&4294967295,this.chain_[3]=this.chain_[3]+he&4294967295,this.chain_[4]=this.chain_[4]+oe&4294967295}update(_e,te){if(null==_e)return;void 0===te&&(te=_e.length);const re=te-this.blockSize;let Q=0;const Pe=this.buf_;let ae=this.inbuf_;for(;Q<te;){if(0===ae)for(;Q<=re;)this.compress_(_e,Q),Q+=this.blockSize;if("string"==typeof _e){for(;Q<te;)if(Pe[ae]=_e.charCodeAt(Q),++ae,++Q,ae===this.blockSize){this.compress_(Pe),ae=0;break}}else for(;Q<te;)if(Pe[ae]=_e[Q],++ae,++Q,ae===this.blockSize){this.compress_(Pe),ae=0;break}}this.inbuf_=ae,this.total_+=te}digest(){const _e=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&te,te/=256;this.compress_(this.buf_);let re=0;for(let Q=0;Q<5;Q++)for(let Pe=24;Pe>=0;Pe-=8)_e[re]=this.chain_[Q]>>Pe&255,++re;return _e}}function mn(be,_e){const te=new rn(be,_e);return te.subscribe.bind(te)}class rn{constructor(_e,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{_e(this)}).catch(re=>{this.error(re)})}next(_e){this.forEachObserver(te=>{te.next(_e)})}error(_e){this.forEachObserver(te=>{te.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,te,re){let Q;if(void 0===_e&&void 0===te&&void 0===re)throw new Error("Missing Observer.");Q=function pr(be,_e){if("object"!=typeof be||null===be)return!1;for(const te of _e)if(te in be&&"function"==typeof be[te])return!0;return!1}(_e,["next","error","complete"])?_e:{next:_e,error:te,complete:re},void 0===Q.next&&(Q.next=nr),void 0===Q.error&&(Q.error=nr),void 0===Q.complete&&(Q.complete=nr);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Pe}unsubscribeOne(_e){void 0===this.observers||void 0===this.observers[_e]||(delete this.observers[_e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,_e)}sendOne(_e,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_e])try{te(this.observers[_e])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(_e){this.finalized||(this.finalized=!0,void 0!==_e&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}const cn=function(be,_e,te,re){let Q;if(re<_e?Q="at least "+_e:re>te&&(Q=0===te?"none":"no more than "+te),Q)throw new Error(be+" failed: Was called with "+re+(1===re?" argument.":" arguments.")+" Expects "+Q+".")};function br(be,_e){return`${be} failed: ${_e} argument `}function Jn(be,_e,te,re){if((!re||te)&&"function"!=typeof te)throw new Error(br(be,_e)+"must be a valid function.")}function Pn(be,_e,te,re){if((!re||te)&&("object"!=typeof te||null===te))throw new Error(br(be,_e)+"must be a valid context object.")}const jr=function(be){const _e=[];let te=0;for(let re=0;re<be.length;re++){let Q=be.charCodeAt(re);if(Q>=55296&&Q<=56319){const Pe=Q-55296;re++,Y(re<be.length,"Surrogate pair missing trail surrogate."),Q=65536+(Pe<<10)+(be.charCodeAt(re)-56320)}Q<128?_e[te++]=Q:Q<2048?(_e[te++]=Q>>6|192,_e[te++]=63&Q|128):Q<65536?(_e[te++]=Q>>12|224,_e[te++]=Q>>6&63|128,_e[te++]=63&Q|128):(_e[te++]=Q>>18|240,_e[te++]=Q>>12&63|128,_e[te++]=Q>>6&63|128,_e[te++]=63&Q|128)}return _e},kn=function(be){let _e=0;for(let te=0;te<be.length;te++){const re=be.charCodeAt(te);re<128?_e++:re<2048?_e+=2:re>=55296&&re<=56319?(_e+=4,te++):_e+=3}return _e},Cr=1e3,Rt=2,bt=144e5,Ut=.5;function hn(be,_e=Cr,te=Rt){const re=_e*Math.pow(te,be),Q=Math.round(Ut*re*(Math.random()-.5)*2);return Math.min(bt,re+Q)}function kr(be){return be&&be._delegate?be._delegate:be}},3651:(zt,We,j)=>{j.d(We,{e:()=>me});var T=j(5114),Te=(j(2090),j(9681),j(1877),j(4859),j(4650)),ke=j(3101),pe=j(1205),Fe=j(9062);let me=(()=>{class de{constructor(et,Ke,at,Nt){this.afs=et,this.afAuth=Ke,this.router=at,this.ngZone=Nt,this.afAuth.authState.subscribe(Je=>{Je?(this.userData=Je,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(et,Ke){return this.afAuth.signInWithEmailAndPassword(et,Ke).then(at=>{this.SetUserData(at.user),this.afAuth.authState.subscribe(Nt=>{Nt&&this.router.navigate(["dashboard"])})}).catch(at=>{window.alert(at.message)})}SignUp(et,Ke){return this.afAuth.createUserWithEmailAndPassword(et,Ke).then(at=>{this.SendVerificationMail(),this.SetUserData(at.user)}).catch(at=>{window.alert(at.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(et=>et.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(et){return this.afAuth.sendPasswordResetEmail(et).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Ke=>{window.alert(Ke)})}get isLoggedIn(){const et=JSON.parse(localStorage.getItem("user"));return null!==et&&!1!==et.emailVerified}GoogleAuth(){return this.AuthLogin(new T.Q).then(et=>{this.router.navigate(["dashboard"])})}AuthLogin(et){return this.afAuth.signInWithPopup(et).then(Ke=>{this.router.navigate(["dashboard"]),this.SetUserData(Ke.user)}).catch(Ke=>{window.alert(Ke)})}SetUserData(et){return this.afs.doc(`users/${et.uid}`).set({uid:et.uid,email:et.email,displayName:et.displayName,photoURL:et.photoURL,emailVerified:et.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return de.\u0275fac=function(et){return new(et||de)(Te.LFG(ke.ST),Te.LFG(pe.zQ),Te.LFG(Fe.F0),Te.LFG(Te.R0b))},de.\u0275prov=Te.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})()},8896:(zt,We,j)=>{var T=j(1481),Y=j(9062),h=j(4650),ve=j(3651);const Te=[{path:"landing-page",loadChildren:()=>Promise.all([j.e(592),j.e(865)]).then(j.bind(j,1865)).then(n=>n.LandingPageModule)},{path:"rpd",loadChildren:()=>j.e(912).then(j.bind(j,8912)).then(n=>n.RpdModule),canActivate:[(()=>{class n{constructor(t,o){this.authService=t,this.router=o}canActivate(t,o){return!0!==this.authService.isLoggedIn&&this.router.navigate(["landing-page"]),!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ve.e),h.LFG(Y.F0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"sign-in",loadChildren:()=>j.e(592).then(j.bind(j,8471)).then(n=>n.SignInModule)},{path:"forgot-password",loadChildren:()=>j.e(163).then(j.bind(j,7163)).then(n=>n.ForgotPasswordModule)},{path:"sign-up",loadChildren:()=>j.e(148).then(j.bind(j,3148)).then(n=>n.SignUpModule)},{path:"verify-email",loadChildren:()=>j.e(454).then(j.bind(j,3454)).then(n=>n.VerifyEmailModule)},{path:"",loadChildren:()=>Promise.all([j.e(592),j.e(865)]).then(j.bind(j,1865)).then(n=>n.LandingPageModule)}];let ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Y.Bz.forRoot(Te,{useHash:!0}),Y.Bz]}),n})();var pe=j(6895);function Fe(n,r){1&n&&(h.TgZ(0,"div",2)(1,"div",3),h._UZ(2,"div",4),h.qZA()())}function me(n,r){1&n&&h._UZ(0,"router-outlet")}let de=(()=>{class n{constructor(){this.title="rpg-psicoleigos",this.loaded=!0}ngOnInit(){setTimeout(()=>{this.loaded=!1},1e3)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[["class","spinner",4,"ngIf","ngIfElse"],["routerOutlet",""],[1,"spinner"],[1,"cell"],[1,"pl","pl-puzzle"]],template:function(t,o){if(1&t&&(h.YNc(0,Fe,3,0,"div",0),h.YNc(1,me,1,0,"ng-template",null,1,h.W1O)),2&t){const d=h.MAs(2);h.Q6J("ngIf",o.loaded)("ngIfElse",d)}},dependencies:[pe.O5,Y.lC],styles:['.spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.spinner[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#98e3f4}.pl[_ngcontent-%COMP%], .pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}.pl[_ngcontent-%COMP%]{margin:0 auto 1.5em;position:relative;width:3em;height:3em}.pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{background:currentColor;content:"";display:block;position:absolute;top:0;left:0;width:100%;height:50%;transform-origin:50% 100%;clip-path:polygon(0 0,100% 0,50% 100%);-webkit-clip-path:polygon(0 0,100% 0,50% 100%)}.pl-name[_ngcontent-%COMP%]{text-align:center}.pl-puzzle[_ngcontent-%COMP%]:before, .pl-puzzle[_ngcontent-%COMP%]:after{transform-origin:50% 50%;color:#98e3f4}.pl-puzzle[_ngcontent-%COMP%]:before{animation-name:_ngcontent-%COMP%_puzzleA}.pl-puzzle[_ngcontent-%COMP%]:after{animation-name:_ngcontent-%COMP%_puzzleB;background:#f5b0cb}@keyframes _ngcontent-%COMP%_puzzleA{0%{transform:translate(0) scale(1) rotate(0);z-index:1}12.5%{transform:translateY(50%) scale(1.5) rotate(-90deg);z-index:1}25%,50.1%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:1}25.1%,50%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:0}62.5%{transform:translateY(50%) scale(1.5) rotate(-270deg);z-index:1}75%{transform:translate(0) scale(1) rotate(-360deg);z-index:1}to{transform:translate(0) scale(1) rotate(-360deg);z-index:0}}@keyframes _ngcontent-%COMP%_puzzleB{0%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25.1%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:1}37.5%{transform:translateY(50%) scale(1.5) rotate(0);z-index:1}50%,75.1%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:1}50.1%,75%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:0}87.5%{transform:translateY(50%) scale(1.5) rotate(-180deg);z-index:1}to{transform:translate(25%,50%) scale(1) rotate(-270deg);z-index:1}}']}),n})();var Ce=j(9751),et=j(515),Ke=j(9646),at=j(7579),Nt=j(8421),Je=j(5577),ct=j(1144),fe=j(576),ht=j(3268);const lt=["addListener","removeListener"],Qe=["addEventListener","removeEventListener"],Ye=["on","off"];function Et(n,r,t,o){if((0,fe.m)(t)&&(o=t,t=void 0),o)return Et(n,r,t).pipe((0,ht.Z)(o));const[d,m]=function it(n){return(0,fe.m)(n.addEventListener)&&(0,fe.m)(n.removeEventListener)}(n)?Qe.map(D=>x=>n[D](r,x,t)):function Ie(n){return(0,fe.m)(n.addListener)&&(0,fe.m)(n.removeListener)}(n)?lt.map(Ne(n,r)):function tt(n){return(0,fe.m)(n.on)&&(0,fe.m)(n.off)}(n)?Ye.map(Ne(n,r)):[];if(!d&&(0,ct.z)(n))return(0,Je.z)(D=>Et(D,r,t))((0,Nt.Xf)(n));if(!d)throw new TypeError("Invalid event target");return new Ce.y(D=>{const x=(...U)=>D.next(1<U.length?U:U[0]);return d(x),()=>m(x)})}function Ne(n,r){return t=>o=>n[t](r,o)}var ft=j(4986),qt=j(3532);function Le(n=0,r,t=ft.P){let o=-1;return null!=r&&((0,qt.K)(r)?t=r:o=r),new Ce.y(d=>{let m=function Pt(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;m<0&&(m=0);let D=0;return t.schedule(function(){d.closed||(d.next(D++),0<=o?this.schedule(void 0,o):d.complete())},m)})}const{isArray:rt}=Array;function $e(n){return 1===n.length&&rt(n[0])?n[0]:n}var nt=j(5403);var Mt=j(1135),It=j(9841),tn=j(5032);const jt=new Ce.y(tn.Z);var gt=j(3269);function yn(...n){const r=(0,gt.jO)(n),t=$e(n);return t.length?new Ce.y(o=>{let d=t.map(()=>[]),m=t.map(()=>!1);o.add(()=>{d=m=null});for(let D=0;!o.closed&&D<t.length;D++)(0,Nt.Xf)(t[D]).subscribe((0,nt.x)(o,x=>{if(d[D].push(x),d.every(U=>U.length)){const U=d.map(W=>W.shift());o.next(r?r(...U):U),d.some((W,ie)=>!W.length&&m[ie])&&o.complete()}},()=>{m[D]=!0,!d[D].length&&o.complete()}));return()=>{d=m=null}}):et.E}var xn=j(6451),jn=j(7272),Dr=j(4482);function pn(n){return(0,Dr.e)((r,t)=>{(0,Nt.Xf)(n).subscribe((0,nt.x)(t,()=>t.complete(),tn.Z)),!t.closed&&r.subscribe(t)})}var cr=j(9300),Cn=j(5698),qn=j(4004),Kr=j(8675),en=j(1884),An=j(3900),Gt=j(8505),ai=j(4671);function ei(...n){const r=(0,gt.jO)(n);return(0,Dr.e)((t,o)=>{const d=n.length,m=new Array(d);let D=n.map(()=>!1),x=!1;for(let U=0;U<d;U++)(0,Nt.Xf)(n[U]).subscribe((0,nt.x)(o,W=>{m[U]=W,!x&&!D[U]&&(D[U]=!0,(x=D.every(ai.y))&&(D=null))},tn.Z));t.subscribe((0,nt.x)(o,U=>{if(x){const W=[U,...m];o.next(r?r(...W):W)}}))})}j(9718);var sn=j(8996);j(4742),j(1810);const Jn=new h.OlP("NgValueAccessor");function bd(n,r){}function _h(n,r){if(1&n&&(h.TgZ(0,"button",3),h._uU(1),h.YNc(2,bd,0,0,"ng-template",4),h.qZA()),2&n){const t=r.$implicit;h.Q6J("ngbPanelToggle",t),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function yh(n,r){}function Df(n,r){}function Pm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",8),h.NdJ("ngbRef",function(d){h.CHM(t);const m=h.oxw().$implicit;return h.KtG(m.panelDiv=d)}),h.TgZ(1,"div",9),h.YNc(2,Df,0,0,"ng-template",4),h.qZA()()}if(2&n){const t=h.oxw().$implicit;h.s9C("id",t.id),h.uIk("aria-labelledby",t.id+"-header"),h.xp6(2),h.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const If=function(n,r){return{$implicit:n,opened:r}};function rv(n,r){if(1&n&&(h.TgZ(0,"div")(1,"div",5),h.YNc(2,yh,0,0,"ng-template",6),h.qZA(),h.YNc(3,Pm,3,3,"div",7),h.qZA()),2&n){const t=r.$implicit,o=h.oxw(),d=h.MAs(1);h.Tol("accordion-item "+(t.cardClass||"")),h.xp6(1),h.Tol("accordion-header "+(t.type?"bg-"+t.type:o.type?"bg-"+o.type:"")),h.MGl("id","",t.id,"-header"),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||d)("ngTemplateOutletContext",h.WLB(8,If,t,t.isOpen)),h.xp6(1),h.Q6J("ngIf",!o.destroyOnHide||t.isOpen||t.transitionRunning)}}function vh(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",1),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.close())}),h.qZA()}}const wd=["*"];function Cf(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",6),h.NdJ("click",function(){const m=h.CHM(t).$implicit,D=h.oxw();return D.focus(),h.KtG(D.select(m.id,D.NgbSlideEventSource.INDICATOR))}),h.qZA()}if(2&n){const t=r.$implicit,o=h.oxw();h.ekj("active",t.id===o.activeId),h.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===o.activeId)}}function xm(n,r){}function iv(n,r){if(1&n&&(h.TgZ(0,"div",7)(1,"span",8),h.SDv(2,9),h.qZA(),h.YNc(3,xm,0,0,"ng-template",10),h.qZA()),2&n){const t=r.$implicit,o=r.index,d=r.count;h.Q6J("id","slide-"+t.id),h.xp6(2),h.pQV(o+1)(d),h.QtT(2),h.xp6(1),h.Q6J("ngTemplateOutlet",t.tplRef)}}function Tf(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.arrowLeft())}),h._UZ(1,"span",12),h.TgZ(2,"span",8),h.SDv(3,13),h.qZA()()}}function Ed(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",14),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.arrowRight())}),h._UZ(1,"span",15),h.TgZ(2,"span",8),h.SDv(3,16),h.qZA()()}}const sv=["ngbDatepickerDayView",""],Ji=["month"],Dd=["year"];function Eo(n,r){if(1&n&&(h.TgZ(0,"option",5),h._uU(1),h.qZA()),2&n){const t=r.$implicit,o=h.oxw();h.Q6J("value",t),h.uIk("aria-label",o.i18n.getMonthFullName(t,o.date.year)),h.xp6(1),h.Oqu(o.i18n.getMonthShortName(t,o.date.year))}}function ci(n,r){if(1&n&&(h.TgZ(0,"option",5),h._uU(1),h.qZA()),2&n){const t=r.$implicit,o=h.oxw();h.Q6J("value",t),h.xp6(1),h.Oqu(o.i18n.getYearNumerals(t))}}function Sf(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"ngb-datepicker-navigation-select",7),h.NdJ("select",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.select.emit(d))}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function Du(n,r){1&n&&h._UZ(0,"div",0)}function Vo(n,r){1&n&&h._UZ(0,"div",0)}function hs(n,r){if(1&n&&(h.YNc(0,Du,1,0,"div",9),h.TgZ(1,"div",10),h._uU(2),h.qZA(),h.YNc(3,Vo,1,0,"div",9)),2&n){const t=r.$implicit,o=r.index,d=h.oxw(2);h.Q6J("ngIf",o>0),h.xp6(2),h.hij(" ",d.i18n.getMonthLabel(t.firstDate)," "),h.xp6(1),h.Q6J("ngIf",o!==d.months.length-1)}}function Af(n,r){if(1&n&&h.YNc(0,hs,4,3,"ng-template",8),2&n){const t=h.oxw();h.Q6J("ngForOf",t.months)}}function Rr(n,r){if(1&n&&(h.TgZ(0,"div",5),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Oqu(t.i18n.getWeekLabel())}}function km(n,r){if(1&n&&(h.TgZ(0,"div",6),h._uU(1),h.qZA()),2&n){const t=r.$implicit;h.xp6(1),h.Oqu(t)}}function Of(n,r){if(1&n&&(h.TgZ(0,"div",2),h.YNc(1,Rr,2,1,"div",3),h.YNc(2,km,2,1,"div",4),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.datepicker.showWeekNumbers),h.xp6(1),h.Q6J("ngForOf",t.viewModel.weekdays)}}function eu(n,r){if(1&n&&(h.TgZ(0,"div",11),h._uU(1),h.qZA()),2&n){const t=h.oxw(2).$implicit,o=h.oxw();h.xp6(1),h.Oqu(o.i18n.getWeekNumerals(t.number))}}function kc(n,r){}function Iu(n,r){if(1&n&&h.YNc(0,kc,0,0,"ng-template",14),2&n){const t=h.oxw().$implicit,o=h.oxw(3);h.Q6J("ngTemplateOutlet",o.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function bh(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",12),h.NdJ("click",function(d){const D=h.CHM(t).$implicit;return h.oxw(3).doSelect(D),h.KtG(d.preventDefault())}),h.YNc(1,Iu,1,2,"ng-template",13),h.qZA()}if(2&n){const t=r.$implicit;h.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),h.Q6J("tabindex",t.tabindex),h.uIk("aria-label",t.ariaLabel),h.xp6(1),h.Q6J("ngIf",!t.hidden)}}function Nf(n,r){if(1&n&&(h.TgZ(0,"div",8),h.YNc(1,eu,2,1,"div",9),h.YNc(2,bh,2,9,"div",10),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.datepicker.showWeekNumbers),h.xp6(1),h.Q6J("ngForOf",t.days)}}function xp(n,r){1&n&&h.YNc(0,Nf,3,2,"div",7),2&n&&h.Q6J("ngIf",!r.$implicit.collapsed)}const Ya=["defaultDayTemplate"],kp=["content"];function tc(n,r){if(1&n&&h._UZ(0,"div",7),2&n){const o=r.currentMonth,d=r.selected,m=r.disabled,D=r.focused;h.Q6J("date",r.date)("currentMonth",o)("selected",d)("disabled",m)("focused",D)}}function Do(n,r){if(1&n&&(h.TgZ(0,"div",12),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw(2);h.xp6(1),h.hij(" ",o.i18n.getMonthLabel(t.firstDate)," ")}}function Id(n,r){if(1&n&&(h.TgZ(0,"div",9),h.YNc(1,Do,2,1,"div",10),h._UZ(2,"ngb-datepicker-month",11),h.qZA()),2&n){const t=r.$implicit,o=h.oxw(2);h.xp6(1),h.Q6J("ngIf","none"===o.navigation||o.displayMonths>1&&"select"===o.navigation),h.xp6(1),h.Q6J("month",t.firstDate)}}function Cd(n,r){if(1&n&&h.YNc(0,Id,3,2,"div",8),2&n){const t=h.oxw();h.Q6J("ngForOf",t.model.months)}}function Td(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"ngb-datepicker-navigation",13),h.NdJ("navigate",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.onNavigateEvent(d))})("select",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.onNavigateDateSelect(d))}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function Ki(n,r){}function Ps(n,r){}const Sd=["dialog"],Ad=["ngbNavOutlet",""];function wh(n,r){}const A=function(n){return{$implicit:n}};function v(n,r){if(1&n&&(h.TgZ(0,"div",2),h.YNc(1,wh,0,0,"ng-template",3),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw();h.Q6J("item",t)("nav",o.nav)("role",o.paneRole),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",h.VKq(5,A,t.active||o.isPanelTransitioning(t)))}}function b(n,r){if(1&n&&h.YNc(0,v,2,7,"div",1),2&n){const t=r.$implicit,o=h.oxw();h.Q6J("ngIf",t.isPanelInDom()||o.isPanelTransitioning(t))}}function M(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,10),h.qZA())}function q(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,11),h.qZA())}function se(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,12),h.qZA())}function He(n,r){1&n&&(h.TgZ(0,"span",9),h.SDv(1,13),h.qZA())}function St(n,r){1&n&&h._uU(0,"...")}function un(n,r){1&n&&(h.TgZ(0,"span",15),h._uU(1,"(current)"),h.qZA())}function In(n,r){if(1&n&&(h._uU(0),h.YNc(1,un,2,0,"span",14)),2&n){const t=r.$implicit,o=r.currentPage;h.hij(" ",t," "),h.xp6(1),h.Q6J("ngIf",t===o)}}function Xn(n,r){}const Ni=function(n){return{disabled:!0,currentPage:n}};function pl(n,r){if(1&n&&(h.TgZ(0,"a",20),h.YNc(1,Xn,0,0,"ng-template",8),h.qZA()),2&n){const t=h.oxw(2).$implicit,o=h.oxw(),d=h.MAs(9);h.xp6(1),h.Q6J("ngTemplateOutlet",(null==o.tplEllipsis?null:o.tplEllipsis.templateRef)||d)("ngTemplateOutletContext",h.VKq(2,Ni,t))}}function Go(n,r){}const Za=function(n,r,t){return{disabled:n,$implicit:r,currentPage:t}};function Eh(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"a",21),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw().$implicit;return h.oxw(2).selectPage(m),h.KtG(d.preventDefault())}),h.YNc(1,Go,0,0,"ng-template",8),h.qZA()}if(2&n){const t=h.oxw().$implicit,o=h.oxw(),d=o.disabled,m=o.$implicit,D=h.oxw(),x=h.MAs(11);h.uIk("tabindex",d?"-1":null)("aria-disabled",d?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==D.tplNumber?null:D.tplNumber.templateRef)||x)("ngTemplateOutletContext",h.kEZ(4,Za,d,t,m))}}function ha(n,r){if(1&n&&(h.TgZ(0,"li",17),h.YNc(1,pl,2,4,"a",18),h.YNc(2,Eh,2,8,"a",19),h.qZA()),2&n){const t=r.$implicit,o=h.oxw(),d=o.$implicit,m=o.disabled,D=h.oxw();h.ekj("active",t===d)("disabled",D.isEllipsis(t)||m),h.uIk("aria-current",t===d?"page":null),h.xp6(1),h.Q6J("ngIf",D.isEllipsis(t)),h.xp6(1),h.Q6J("ngIf",!D.isEllipsis(t))}}function Od(n,r){1&n&&h.YNc(0,ha,3,7,"li",16),2&n&&h.Q6J("ngForOf",r.pages)}function Cu(n,r){}const Fc=function(n,r){return{disabled:n,currentPage:r}};function Nd(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",22),h.NdJ("click",function(d){return h.CHM(t),h.oxw().selectPage(1),h.KtG(d.preventDefault())}),h.YNc(2,Cu,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(1);h.ekj("disabled",t.previousDisabled()),h.xp6(1),h.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||o)("ngTemplateOutletContext",h.WLB(6,Fc,t.previousDisabled(),t.page))}}function Lc(n,r){}const Mf=function(n){return{disabled:n}};function Fp(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",23),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw();return m.selectPage(m.page-1),h.KtG(d.preventDefault())}),h.YNc(2,Lc,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(3);h.ekj("disabled",t.previousDisabled()),h.xp6(1),h.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||o)("ngTemplateOutletContext",h.VKq(6,Mf,t.previousDisabled()))}}function Mi(n,r){}function Uc(n,r){}function Dh(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",24),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw();return m.selectPage(m.page+1),h.KtG(d.preventDefault())}),h.YNc(2,Uc,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(5);h.ekj("disabled",t.nextDisabled()),h.xp6(1),h.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||o)("ngTemplateOutletContext",h.WLB(6,Fc,t.nextDisabled(),t.page))}}function Fm(n,r){}function Lm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"li",17)(1,"a",25),h.NdJ("click",function(d){h.CHM(t);const m=h.oxw();return m.selectPage(m.pageCount),h.KtG(d.preventDefault())}),h.YNc(2,Fm,0,0,"ng-template",8),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(7);h.ekj("disabled",t.nextDisabled()),h.xp6(1),h.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||o)("ngTemplateOutletContext",h.WLB(6,Fc,t.nextDisabled(),t.page))}}const Ih=function(n,r,t){return{$implicit:n,pages:r,disabled:t}};function Tu(n,r){if(1&n&&(h.TgZ(0,"span"),h.SDv(1,1),h.ALo(2,"percent"),h.qZA()),2&n){const t=h.oxw();h.xp6(2),h.pQV(h.lcZ(2,1,t.getValue()/t.max)),h.QtT(1)}}function Bm(n,r){1&n&&h._uU(0),2&n&&h.Oqu(100===r.fill?"\u2605":"\u2606")}function Bc(n,r){}function Vm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"span",2),h._uU(1),h.qZA(),h.TgZ(2,"span",3),h.NdJ("mouseenter",function(){const m=h.CHM(t).index,D=h.oxw();return h.KtG(D.enter(m+1))})("click",function(){const m=h.CHM(t).index,D=h.oxw();return h.KtG(D.handleClick(m+1))}),h.YNc(3,Bc,0,0,"ng-template",4),h.qZA()}if(2&n){const t=r.index,o=h.oxw(),d=h.MAs(1);h.xp6(1),h.hij("(",t<o.nextRate?"*":" ",")"),h.xp6(1),h.Udp("cursor",o.isInteractive()?"pointer":"default"),h.xp6(1),h.Q6J("ngTemplateOutlet",o.starTemplate||o.starTemplateFromContent||d)("ngTemplateOutletContext",o.contexts[t])}}function Md(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeHour(d.hourStep))}),h._UZ(1,"span",12),h.TgZ(2,"span",13),h.SDv(3,14),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function Gm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeHour(-d.hourStep))}),h._UZ(1,"span",15),h.TgZ(2,"span",13),h.SDv(3,16),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function oE(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeMinute(d.minuteStep))}),h._UZ(1,"span",12),h.TgZ(2,"span",13),h.SDv(3,17),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function Xi(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.changeMinute(-d.minuteStep))}),h._UZ(1,"span",15),h.TgZ(2,"span",13),h.SDv(3,18),h.qZA()()}if(2&n){const t=h.oxw();h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function Wr(n,r){1&n&&(h.TgZ(0,"div",5),h._uU(1,":"),h.qZA())}function jm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw(2);return h.KtG(d.changeSecond(d.secondStep))}),h._UZ(1,"span",12),h.TgZ(2,"span",13),h.SDv(3,21),h.qZA()()}if(2&n){const t=h.oxw(2);h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function Hm(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const d=h.oxw(2);return h.KtG(d.changeSecond(-d.secondStep))}),h._UZ(1,"span",15),h.TgZ(2,"span",13),h.SDv(3,22),h.qZA()()}if(2&n){const t=h.oxw(2);h.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),h.Q6J("disabled",t.disabled)}}function nc(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",19),h.YNc(1,jm,4,7,"button",3),h.TgZ(2,"input",20),h.NdJ("change",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.updateSecond(d.target.value))})("blur",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.handleBlur())})("input",function(d){h.CHM(t);const m=h.oxw();return h.KtG(m.formatInput(d.target))})("keydown.ArrowUp",function(d){h.CHM(t);const m=h.oxw();return m.changeSecond(m.secondStep),h.KtG(d.preventDefault())})("keydown.ArrowDown",function(d){h.CHM(t);const m=h.oxw();return m.changeSecond(-m.secondStep),h.KtG(d.preventDefault())}),h.qZA(),h.YNc(3,Hm,4,7,"button",3),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.spinners),h.xp6(1),h.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),h.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),h.xp6(1),h.Q6J("ngIf",t.spinners)}}function $m(n,r){1&n&&h._UZ(0,"div",5)}function Ca(n,r){if(1&n&&(h.ynx(0),h.SDv(1,27),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.pQV(t.i18n.getAfternoonPeriod()),h.QtT(1)}}function Pf(n,r){if(1&n&&h.SDv(0,28),2&n){const t=h.oxw(2);h.pQV(t.i18n.getMorningPeriod()),h.QtT(0)}}function Vc(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",23)(1,"button",24),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.toggleMeridian())}),h.YNc(2,Ca,2,1,"ng-container",25),h.YNc(3,Pf,1,1,"ng-template",null,26,h.W1O),h.qZA()()}if(2&n){const t=h.MAs(4),o=h.oxw();h.xp6(1),h.ekj("btn-sm",o.isSmallSize)("btn-lg",o.isLargeSize)("disabled",o.disabled),h.Q6J("disabled",o.disabled),h.xp6(1),h.Q6J("ngIf",o.model&&o.model.hour>=12)("ngIfElse",t)}}function zm(n,r){if(1&n&&(h.TgZ(0,"strong",3),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.header)}}function kl(n,r){}function Lp(n,r){if(1&n){const t=h.EpF();h.TgZ(0,"div",4),h.YNc(1,kl,0,0,"ng-template",5),h.TgZ(2,"button",6),h.NdJ("click",function(){h.CHM(t);const d=h.oxw();return h.KtG(d.hide())}),h.qZA()()}if(2&n){const t=h.oxw(),o=h.MAs(1);h.xp6(1),h.Q6J("ngTemplateOutlet",t.contentHeaderTpl||o)}}function Rd(n,r){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit,o=h.oxw();h.Tol(o.highlightClass),h.xp6(1),h.Oqu(t)}}function xf(n,r){if(1&n&&h._uU(0),2&n){const t=h.oxw().$implicit;h.Oqu(t)}}function cb(n,r){if(1&n&&(h.YNc(0,Rd,2,3,"span",1),h.YNc(1,xf,1,1,"ng-template",null,2,h.W1O)),2&n){const t=r.odd,o=h.MAs(2);h.Q6J("ngIf",t)("ngIfElse",o)}}function fs(n){return parseInt(`${n}`,10)}function Ch(n){return null!=n?`${n}`:""}function Gc(n,r,t=0){return Math.max(Math.min(n,r),t)}function jc(n){return"string"==typeof n}function Ii(n){return!isNaN(fs(n))}function es(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function Hc(n){return null!=n}function Th(n){return Ii(n)?`0${n}`.slice(-2):""}function lv(n,r){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(r)>=0}function Qa(n){return(n||document.body).getBoundingClientRect()}function Km(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const kf={animation:!0,transitionTimerDelayMs:5},qm=()=>{},{transitionTimerDelayMs:Ff}=kf,Ja=new Map,Ys=(n,r,t,o)=>{let d=o.context||{};const m=Ja.get(r);if(m)switch(o.runningTransition){case"continue":return et.E;case"stop":n.run(()=>m.transition$.complete()),d=Object.assign(m.context,d),Ja.delete(r)}const D=t(r,o.animation,d)||qm;if(!o.animation||"none"===window.getComputedStyle(r).transitionProperty)return n.run(()=>D()),(0,Ke.of)(void 0).pipe(function Vp(n){return r=>new Ce.y(t=>r.subscribe({next:D=>n.run(()=>t.next(D)),error:D=>n.run(()=>t.error(D)),complete:()=>n.run(()=>t.complete())}))}(n));const x=new at.x,U=new at.x,W=x.pipe(function Hn(...n){return r=>(0,jn.z)(r,(0,Ke.of)(...n))}(!0));Ja.set(r,{transition$:x,complete:()=>{U.next(),U.complete()},context:d});const ie=function ps(n){const{transitionDelay:r,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(r)+parseFloat(t))}(r);return n.runOutsideAngular(()=>{const Ee=Et(r,"transitionend").pipe(pn(W),(0,cr.h)(({target:Ge})=>Ge===r));(function yt(...n){return 1===(n=$e(n)).length?(0,Nt.Xf)(n[0]):new Ce.y(function st(n){return r=>{let t=[];for(let o=0;t&&!r.closed&&o<n.length;o++)t.push((0,Nt.Xf)(n[o]).subscribe((0,nt.x)(r,d=>{if(t){for(let m=0;m<t.length;m++)m!==o&&t[m].unsubscribe();t=null}r.next(d)})))}}(n))})(Le(ie+Ff).pipe(pn(W)),Ee,U).pipe(pn(W)).subscribe(()=>{Ja.delete(r),n.run(()=>{D(),x.next(),x.complete()})})}),x.asObservable()},Su=(n,r,t)=>{let{direction:o,maxSize:d,dimension:m}=t;const{classList:D}=n;function x(){D.add("collapse"),"show"===o?D.add("show"):D.remove("show")}if(r)return d||(d=function Lf(n,r){if(typeof navigator>"u")return"0px";const{classList:t}=n,o=t.contains("show");o||t.add("show"),n.style[r]="";const d=n.getBoundingClientRect()[r]+"px";return o||t.remove("show"),d}(n,m),t.maxSize=d,n.style[m]="show"!==o?d:"0px",D.remove("collapse"),D.remove("collapsing"),D.remove("show"),Qa(n),D.add("collapsing")),n.style[m]="show"===o?d:"0px",()=>{x(),D.remove("collapsing"),n.style[m]=""};x()};let tu=(()=>{class n{constructor(){this.animation=kf.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dv=(()=>{class n{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aE=0,hv=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),Uf=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),Ym=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),fv=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+aE++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new h.vpe,this.hidden=new h.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["ngb-panel"]],contentQueries:function(t,o,d){if(1&t&&(h.Suo(d,Uf,4),h.Suo(d,hv,4),h.Suo(d,Ym,4)),2&t){let m;h.iGM(m=h.CRH())&&(o.titleTpls=m),h.iGM(m=h.CRH())&&(o.headerTpls=m),h.iGM(m=h.CRH())&&(o.contentTpls=m)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),Zm=(()=>{class n{constructor(t){this._El=t,this.ngbRef=new h.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),Gp=(()=>{class n{constructor(t,o){this.accordion=t,this.panel=o}set ngbPanelToggle(t){t&&(this.panel=t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36((0,h.Gpc)(()=>jp)),h.Y36(fv,9))},n.\u0275dir=h.lG2({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,o){1&t&&h.NdJ("click",function(){return o.accordion.toggle(o.panel.id)}),2&t&&(h.Ikx("disabled",o.panel.disabled),h.uIk("aria-expanded",o.panel.isOpen)("aria-controls",o.panel.id),h.ekj("collapsed",!o.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),jp=(()=>{class n{constructor(t,o,d){this._ngZone=o,this._changeDetector=d,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new h.vpe,this.shown=new h.vpe,this.hidden=new h.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const o=this._findPanelById(t);o&&this._changeOpenState(o,!o.isOpen)}ngAfterContentChecked(){jc(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Cn.q)(1)).subscribe(()=>{this.panels.forEach(t=>{const o=t.panelDiv;o?t.initClassDone||(t.initClassDone=!0,Ys(this._ngZone,o,Su,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,o){if(null!=t&&!t.disabled&&t.isOpen!==o){let d=!1;this.panelChange.emit({panelId:t.id,nextState:o,preventDefault:()=>{d=!0}}),d||(t.isOpen=o,t.transitionRunning=!0,o&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,o=!0){this.panels.forEach(d=>{d.id!==t&&d.isOpen&&(d.isOpen=!1,d.transitionRunning=o)})}_findPanelById(t){return this.panels.find(o=>o.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(o=>{o.transitionRunning&&Ys(this._ngZone,o.panelDiv,Su,{animation:t,runningTransition:"stop",context:{direction:o.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{o.transitionRunning=!1;const{id:m}=o;o.isOpen?(o.shown.emit(),this.shown.emit(m)):(o.hidden.emit(),this.hidden.emit(m))})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dv),h.Y36(h.R0b),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-accordion"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,fv,4),2&t){let m;h.iGM(m=h.CRH())&&(o.panels=m)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,o){2&t&&h.uIk("aria-multiselectable",!o.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[h.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,o){1&t&&(h.YNc(0,_h,3,3,"ng-template",0,1,h.W1O),h.YNc(2,rv,4,11,"ng-template",2)),2&t&&(h.xp6(2),h.Q6J("ngForOf",o.panels))},dependencies:[pe.ax,pe.tP,Gp,Zm,hv,pe.O5],encapsulation:2}),n})(),Qm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[jp]}),n})();const Jm=({classList:n})=>{n.remove("show")};let rc=(()=>{class n{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bf=(()=>{class n{constructor(t,o,d,m){this._renderer=o,this._element=d,this._zone=m,this.closed=new h.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=Ys(this._zone,this._element.nativeElement,Jm,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const o=t.type;o&&!o.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${o.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${o.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(rc),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,o){2&t&&h.ekj("fade",o.animation)("alert-dismissible",o.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[h.TTD,h.jDz],ngContentSelectors:wd,decls:2,vars:1,consts:function(){let r;return r=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",r,3,"click",4,"ngIf"],["type","button","aria-label",r,1,"btn-close",3,"click"]]},template:function(t,o){1&t&&(h.F$t(),h.Hsn(0),h.YNc(1,vh,1,0,"button",0)),2&t&&(h.xp6(1),h.Q6J("ngIf",o.dismissible))},dependencies:[pe.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),Au=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Bf]}),n})();var Xa=(()=>{return(n=Xa||(Xa={})).START="start",n.END="end",Xa;var n})();const Hp=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),$p=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},zp=n=>{$p(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},el=(n,r,{direction:t})=>{const{classList:o}=n;return r?(Hp(n)?$p(o):(o.add("carousel-item-"+(t===Xa.START?"next":"prev")),Qa(n),o.add("carousel-item-"+t)),()=>{zp(o),o.add("active")}):($p(o),zp(o),void o.add("active"))},Xm=(n,r,{direction:t})=>{const{classList:o}=n;return r?(Hp(n)?$p(o):o.add("carousel-item-"+t),()=>{zp(o),o.remove("active")}):($p(o),zp(o),void o.remove("active"))};let Wp=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ic=0,hb=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+ic++,this.slid=new h.vpe}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),Vf=(()=>{class n{constructor(t,o,d,m,D){this._platformId=o,this._ngZone=d,this._cd=m,this._container=D,this.NgbSlideEventSource=$c,this._destroy$=new at.x,this._interval$=new Mt.X(0),this._mouseHover$=new Mt.X(!1),this._focused$=new Mt.X(!1),this._pauseOnHover$=new Mt.X(!1),this._pauseOnFocus$=new Mt.X(!1),this._pause$=new Mt.X(!1),this._wrap$=new Mt.X(!1),this.slide=new h.vpe,this.slid=new h.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev($c.ARROW_LEFT)}arrowRight(){this.focus(),this.next($c.ARROW_RIGHT)}ngAfterContentInit(){(0,pe.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=(0,It.a)([this.slide.pipe((0,qn.U)(o=>o.current),(0,Kr.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,Kr.O)(null))]).pipe((0,qn.U)(([o,d])=>{const m=this.slides.toArray(),D=this._getSlideIdxById(o);return d?m.length>1:D<m.length-1}),(0,en.x)());(0,It.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,qn.U)(([o,d,m,D,x,U,W])=>o||d&&m||D&&x||!W?0:U),(0,en.x)(),(0,An.w)(o=>o>0?Le(o,o):jt),pn(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next($c.TIMER)))}),this.slides.changes.pipe(pn(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(n=>{Ja.get(n)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Cn.q)(1)).subscribe(()=>{for(const{id:t}of this.slides){const o=this._getSlideElement(t);t===this.activeId?o.classList.add("active"):o.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,o){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),o)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),Xa.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),Xa.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,o,d){const m=this._transitionIds;if(m&&(m[0]!==t||m[1]!==this.activeId))return;let D=this._getSlideById(t);if(D&&D.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:D.id,direction:o,paused:this._pause$.value,source:d});const x={animation:this.animation,runningTransition:"stop",context:{direction:o}},U=[],W=this._getSlideById(this.activeId);if(W){const Ge=Ys(this._ngZone,this._getSlideElement(W.id),Xm,x);Ge.subscribe(()=>{W.slid.emit({isShown:!1,direction:o,source:d})}),U.push(Ge)}const ie=this.activeId;this.activeId=D.id;const Ee=this._getSlideById(this.activeId),De=Ys(this._ngZone,this._getSlideElement(D.id),el,x);De.subscribe(()=>{Ee?.slid.emit({isShown:!0,direction:o,source:d})}),U.push(De),yn(...U).pipe((0,Cn.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:ie,current:D.id,direction:o,paused:this._pause$.value,source:d})})}this._cd.markForCheck()}_getSlideEventDirection(t,o){return this._getSlideIdxById(t)>this._getSlideIdxById(o)?Xa.END:Xa.START}_getSlideById(t){return this.slides.find(o=>o.id===t)||null}_getSlideIdxById(t){const o=this._getSlideById(t);return null!=o?this.slides.toArray().indexOf(o):-1}_getNextSlide(t){const o=this.slides.toArray(),d=this._getSlideIdxById(t);return d===o.length-1?this.wrap?o[0].id:o[o.length-1].id:o[d+1].id}_getPrevSlide(t){const o=this.slides.toArray(),d=this._getSlideIdxById(t);return 0===d?this.wrap?o[o.length-1].id:o[0].id:o[d-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Wp),h.Y36(h.Lbi),h.Y36(h.R0b),h.Y36(h.sBO),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,hb,4),2&t){let m;h.iGM(m=h.CRH())&&(o.slides=m)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,o){1&t&&h.NdJ("keydown.arrowLeft",function(){return o.keyboard&&o.arrowLeft()})("keydown.arrowRight",function(){return o.keyboard&&o.arrowRight()})("mouseenter",function(){return o.mouseHover=!0})("mouseleave",function(){return o.mouseHover=!1})("focusin",function(){return o.focused=!0})("focusout",function(){return o.focused=!1}),2&t&&(h.uIk("aria-activedescendant","slide-"+o.activeId),h.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[h.jDz],decls:6,vars:6,consts:function(){let r,t,o;return r=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,o=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],r,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],o]},template:function(t,o){1&t&&(h.TgZ(0,"div",0),h.YNc(1,Cf,1,5,"button",1),h.qZA(),h.TgZ(2,"div",2),h.YNc(3,iv,4,4,"div",3),h.qZA(),h.YNc(4,Tf,4,0,"button",4),h.YNc(5,Ed,4,0,"button",5)),2&t&&(h.ekj("visually-hidden",!o.showNavigationIndicators),h.xp6(1),h.Q6J("ngForOf",o.slides),h.xp6(2),h.Q6J("ngForOf",o.slides),h.xp6(1),h.Q6J("ngIf",o.showNavigationArrows),h.xp6(1),h.Q6J("ngIf",o.showNavigationArrows))},dependencies:[pe.ax,pe.tP,pe.O5],encapsulation:2,changeDetection:0}),n})();var $c=(()=>{return(n=$c||($c={})).TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator",$c;var n})();let pv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Vf]}),n})(),e_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class gs{constructor(r,t,o){this.year=es(r)?r:null,this.month=es(t)?t:null,this.day=es(o)?o:null}static from(r){return r instanceof gs?r:r?new gs(r.year,r.month,r.day):null}equals(r){return null!=r&&this.year===r.year&&this.month===r.month&&this.day===r.day}before(r){return!!r&&(this.year===r.year?this.month===r.month?this.day!==r.day&&this.day<r.day:this.month<r.month:this.year<r.year)}after(r){return!!r&&(this.year===r.year?this.month===r.month?this.day!==r.day&&this.day>r.day:this.month>r.month:this.year>r.year)}}function Sh(n,r){return!function fb(n,r){return!n&&!r||!!n&&!!r&&n.equals(r)}(n,r)}function Kp(n,r){return!(!n&&!r||n&&r&&n.year===r.year&&n.month===r.month)}function qp(n,r,t){return n&&r&&n.before(r)?r:n&&t&&n.after(t)?t:n||null}function t_(n,r){const{minDate:t,maxDate:o,disabled:d,markDisabled:m}=r;return!(null==n||d||m&&m(n,{year:n.year,month:n.month})||t&&n.before(t)||o&&n.after(o))}function _v(n){return new gs(n.getFullYear(),n.getMonth()+1,n.getDate())}function i_(n){const r=new Date(n.year,n.month-1,n.day,12);return isNaN(r.getTime())||r.setFullYear(n.year),r}let ts=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Pd(){return new Yp}()},providedIn:"root"}),n})(),Yp=(()=>{class n extends ts{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,o="d",d=1){let m=i_(t),D=!0,x=m.getMonth();switch(o){case"y":m.setFullYear(m.getFullYear()+d);break;case"m":x+=d,m.setMonth(x),x%=12,x<0&&(x+=12);break;case"d":m.setDate(m.getDate()+d),D=!1;break;default:return t}return D&&m.getMonth()!==x&&m.setDate(0),_v(m)}getPrev(t,o="d",d=1){return this.getNext(t,o,-d)}getWeekday(t){let d=i_(t).getDay();return 0===d?7:d}getWeekNumber(t,o){7===o&&(o=0);const D=i_(t[(11-o)%7]);D.setDate(D.getDate()+4-(D.getDay()||7));const x=D.getTime();return D.setMonth(0),D.setDate(1),Math.floor(Math.round((x-D.getTime())/864e5)/7)+1}getToday(){return _v(new Date)}isValid(t){if(!(t&&es(t.year)&&es(t.month)&&es(t.day)&&0!==t.year))return!1;const o=i_(t);return!isNaN(o.getTime())&&o.getFullYear()===t.year&&o.getMonth()+1===t.month&&o.getDate()===t.day}}return n.\u0275fac=function(){let r;return function(o){return(r||(r=h.n5z(n)))(o||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ou=(()=>{class n{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let o=null;return o=t?new t:function Zp(n){return new xd(n)}(h.LFG(h.soG)),o},providedIn:"root"}),n})(),xd=(()=>{class n extends Ou{constructor(t){super(),this._locale=t,this._monthsShort=(0,pe.UT)(t,pe.x.Standalone,pe.Tn.Abbreviated),this._monthsFull=(0,pe.UT)(t,pe.x.Standalone,pe.Tn.Wide)}getWeekdayLabel(t,o){const d=(0,pe.Mn)(this._locale,pe.x.Standalone,void 0===o?pe.Tn.Short:o);return d.map((D,x)=>d[(x+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){const o=new Date(t.year,t.month-1,t.day);return(0,pe.p6)(o,"fullDate",this._locale)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Qp=(()=>{class n{constructor(t,o){this._calendar=t,this._i18n=o,this._VALIDATORS={dayTemplateData:d=>{if(this._state.dayTemplateData!==d)return{dayTemplateData:d}},displayMonths:d=>{if(es(d=fs(d))&&d>0&&this._state.displayMonths!==d)return{displayMonths:d}},disabled:d=>{if(this._state.disabled!==d)return{disabled:d}},firstDayOfWeek:d=>{if(es(d=fs(d))&&d>=0&&this._state.firstDayOfWeek!==d)return{firstDayOfWeek:d}},focusVisible:d=>{if(this._state.focusVisible!==d&&!this._state.disabled)return{focusVisible:d}},markDisabled:d=>{if(this._state.markDisabled!==d)return{markDisabled:d}},maxDate:d=>{const m=this.toValidDate(d,null);if(Sh(this._state.maxDate,m))return{maxDate:m}},minDate:d=>{const m=this.toValidDate(d,null);if(Sh(this._state.minDate,m))return{minDate:m}},navigation:d=>{if(this._state.navigation!==d)return{navigation:d}},outsideDays:d=>{if(this._state.outsideDays!==d)return{outsideDays:d}},weekdays:d=>{const m=!0===d||!1===d?pe.Tn.Short:d,D=!0!==d&&!1!==d||d;if(this._state.weekdayWidth!==m||this._state.weekdaysVisible!==D)return{weekdayWidth:m,weekdaysVisible:D}}},this._model$=new at.x,this._dateSelect$=new at.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:pe.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,cr.h)(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,cr.h)(t=>null!==t))}set(t){let o=Object.keys(t).map(d=>this._VALIDATORS[d](t[d])).reduce((d,m)=>({...d,...m}),{});Object.keys(o).length>0&&this._nextState(o)}focus(t){const o=this.toValidDate(t,null);null!=o&&!this._state.disabled&&Sh(this._state.focusDate,o)&&this._nextState({focusDate:t})}focusSelect(){t_(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const o=this.toValidDate(t,this._calendar.getToday());null!=o&&!this._state.disabled&&(!this._state.firstDate||Kp(this._state.firstDate,o))&&this._nextState({firstDate:o})}select(t,o={}){const d=this.toValidDate(t,null);null!=d&&!this._state.disabled&&(Sh(this._state.selectedDate,d)&&this._nextState({selectedDate:d}),o.emitEvent&&t_(d,this._state)&&this._dateSelect$.next(d))}toValidDate(t,o){const d=gs.from(t);return void 0===o&&(o=this._calendar.getToday()),this._calendar.isValid(d)?d:o}getMonth(t){for(let o of this._state.months)if(t.month===o.number&&t.year===o.year)return o;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const o=this._updateState(t);this._patchContexts(o),this._state=o,this._model$.next(this._state)}_patchContexts(t){const{months:o,displayMonths:d,selectedDate:m,focusDate:D,focusVisible:x,disabled:U,outsideDays:W}=t;t.months.forEach(ie=>{ie.weeks.forEach(Ee=>{Ee.days.forEach(De=>{D&&(De.context.focused=D.equals(De.date)&&x),De.tabindex=!U&&D&&De.date.equals(D)&&D.month===ie.number?0:-1,!0===U&&(De.context.disabled=!0),void 0!==m&&(De.context.selected=null!==m&&m.equals(De.date)),ie.number!==De.date.month&&(De.hidden="hidden"===W||"collapsed"===W||d>1&&De.date.after(o[0].firstDate)&&De.date.before(o[d-1].lastDate))})})})}_updateState(t){const o=Object.assign({},this._state,t);let d=o.firstDate;if(("minDate"in t||"maxDate"in t)&&(function Zs(n,r){if(r&&n&&r.before(n))throw new Error(`'maxDate' ${r} should be greater than 'minDate' ${n}`)}(o.minDate,o.maxDate),o.focusDate=qp(o.focusDate,o.minDate,o.maxDate),o.firstDate=qp(o.firstDate,o.minDate,o.maxDate),d=o.focusDate),"disabled"in t&&(o.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(d=o.selectedDate),"focusVisible"in t||"focusDate"in t&&(o.focusDate=qp(o.focusDate,o.minDate,o.maxDate),d=o.focusDate,0!==o.months.length&&o.focusDate&&!o.focusDate.before(o.firstDate)&&!o.focusDate.after(o.lastDate)))return o;if("firstDate"in t&&(o.firstDate=qp(o.firstDate,o.minDate,o.maxDate),d=o.firstDate),d){const D=function mv(n,r,t,o,d){const{displayMonths:m,months:D}=t,x=D.splice(0,D.length);return Array.from({length:m},(W,ie)=>{const Ee=Object.assign(n.getNext(r,"m",ie),{day:1});if(D[ie]=null,!d){const De=x.findIndex(Ge=>Ge.firstDate.equals(Ee));-1!==De&&(D[ie]=x.splice(De,1)[0])}return Ee}).forEach((W,ie)=>{null===D[ie]&&(D[ie]=function mb(n,r,t,o,d={}){const{dayTemplateData:m,minDate:D,maxDate:x,firstDayOfWeek:U,markDisabled:W,outsideDays:ie,weekdayWidth:Ee,weekdaysVisible:De}=t,Ge=n.getToday();d.firstDate=null,d.lastDate=null,d.number=r.month,d.year=r.year,d.weeks=d.weeks||[],d.weekdays=d.weekdays||[],r=function r_(n,r,t){const o=n.getDaysPerWeek(),d=new gs(r.year,r.month,1),m=n.getWeekday(d)%o;return n.getPrev(d,"d",(o+m-t)%o)}(n,r,U),De||(d.weekdays.length=0);for(let Tt=0;Tt<n.getWeeksPerMonth();Tt++){let Vt=d.weeks[Tt];Vt||(Vt=d.weeks[Tt]={number:0,days:[],collapsed:!0});const Xt=Vt.days;for(let Un=0;Un<n.getDaysPerWeek();Un++){0===Tt&&De&&(d.weekdays[Un]=o.getWeekdayLabel(n.getWeekday(r),Ee));const Bn=new gs(r.year,r.month,r.day),tr=n.getNext(Bn),zn=o.getDayAriaLabel(Bn);let Er=!!(D&&Bn.before(D)||x&&Bn.after(x));!Er&&W&&(Er=W(Bn,{month:d.number,year:d.year}));let xr=Bn.equals(Ge),xi=m?m(Bn,{month:d.number,year:d.year}):void 0;null===d.firstDate&&Bn.month===d.number&&(d.firstDate=Bn),Bn.month===d.number&&tr.month!==d.number&&(d.lastDate=Bn);let fi=Xt[Un];fi||(fi=Xt[Un]={}),fi.date=Bn,fi.context=Object.assign(fi.context||{},{$implicit:Bn,date:Bn,data:xi,currentMonth:d.number,currentYear:d.year,disabled:Er,focused:!1,selected:!1,today:xr}),fi.tabindex=-1,fi.ariaLabel=zn,fi.hidden=!1,r=tr}Vt.number=n.getWeekNumber(Xt.map(Un=>Un.date),U),Vt.collapsed="collapsed"===ie&&Xt[0].date.month!==d.number&&Xt[Xt.length-1].date.month!==d.number}return d}(n,W,t,o,x.shift()||{}))}),D}(this._calendar,d,o,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);o.months=D,o.firstDate=D[0].firstDate,o.lastDate=D[D.length-1].lastDate,"selectedDate"in t&&!t_(o.selectedDate,o)&&(o.selectedDate=null),"firstDate"in t&&(!o.focusDate||o.focusDate.before(o.firstDate)||o.focusDate.after(o.lastDate))&&(o.focusDate=d);const x=!this._state.firstDate||this._state.firstDate.year!==o.firstDate.year,U=!this._state.firstDate||this._state.firstDate.month!==o.firstDate.month;"select"===o.navigation?(("minDate"in t||"maxDate"in t||0===o.selectBoxes.years.length||x)&&(o.selectBoxes.years=function gv(n,r,t){if(!n)return[];const o=r?Math.max(r.year,n.year-500):n.year-10,m=(t?Math.min(t.year,n.year+500):n.year+10)-o+1,D=Array(m);for(let x=0;x<m;x++)D[x]=o+x;return D}(o.firstDate,o.minDate,o.maxDate)),("minDate"in t||"maxDate"in t||0===o.selectBoxes.months.length||x)&&(o.selectBoxes.months=function n_(n,r,t,o){if(!r)return[];let d=n.getMonths(r.year);if(t&&r.year===t.year){const m=d.findIndex(D=>D===t.month);d=d.slice(m)}if(o&&r.year===o.year){const m=d.findIndex(D=>D===o.month);d=d.slice(0,m+1)}return d}(this._calendar,o.firstDate,o.minDate,o.maxDate))):o.selectBoxes={years:[],months:[]},("arrows"===o.navigation||"select"===o.navigation)&&(U||x||"minDate"in t||"maxDate"in t||"disabled"in t)&&(o.prevDisabled=o.disabled||function gb(n,r,t){const o=Object.assign(n.getPrev(r,"m"),{day:1});return null!=t&&(o.year===t.year&&o.month<t.month||o.year<t.year&&1===t.month)}(this._calendar,o.firstDate,o.minDate),o.nextDisabled=o.disabled||function pb(n,r,t){const o=Object.assign(n.getNext(r,"m"),{day:1});return null!=t&&o.after(t)}(this._calendar,o.lastDate,o.maxDate))}return o}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ts),h.LFG(Ou))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var kd=(()=>{return(n=kd||(kd={}))[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT",kd;var n})();let s_=(()=>{class n{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ou))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,o){2&t&&h.ekj("bg-primary",o.selected)("text-white",o.selected)("text-muted",o.isMuted())("outside",o.isMuted())("active",o.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[h.jDz],attrs:sv,decls:1,vars:1,template:function(t,o){1&t&&h._uU(0),2&t&&h.Oqu(o.i18n.getDayNumerals(o.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),Ah=(()=>{class n{constructor(t,o){this.i18n=t,this._renderer=o,this.select=new h.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new gs(this.date.year,fs(t),1))}changeYear(t){this.select.emit(new gs(fs(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ou),h.Y36(h.Qsj))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,o){if(1&t&&(h.Gf(Ji,7,h.SBq),h.Gf(Dd,7,h.SBq)),2&t){let d;h.iGM(d=h.CRH())&&(o.monthSelect=d.first),h.iGM(d=h.CRH())&&(o.yearSelect=d.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[h.jDz],decls:6,vars:4,consts:function(){let r,t,o,d;return r=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,o=$localize`:@@ngb.datepicker.select-year:Select year`,d=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",r,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",o,"title",d,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,o){1&t&&(h.TgZ(0,"select",0,1),h.NdJ("change",function(m){return o.changeMonth(m.target.value)}),h.YNc(2,Eo,2,3,"option",2),h.qZA(),h.TgZ(3,"select",3,4),h.NdJ("change",function(m){return o.changeYear(m.target.value)}),h.YNc(5,ci,2,2,"option",2),h.qZA()),2&t&&(h.Q6J("disabled",o.disabled),h.xp6(2),h.Q6J("ngForOf",o.months),h.xp6(1),h.Q6J("disabled",o.disabled),h.xp6(2),h.Q6J("ngForOf",o.years))},dependencies:[pe.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),Oh=(()=>{class n{constructor(t){this.i18n=t,this.navigation=kd,this.months=[],this.navigate=new h.vpe,this.select=new h.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ou))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[h.jDz],decls:8,vars:4,consts:function(){let r,t,o,d;return r=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,o=$localize`:@@ngb.datepicker.next-month:Next month`,d=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",r,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",o,"title",d,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,o){1&t&&(h.TgZ(0,"div",0)(1,"button",1),h.NdJ("click",function(m){return o.onClickPrev(m)}),h._UZ(2,"span",2),h.qZA()(),h.YNc(3,Sf,1,4,"ngb-datepicker-navigation-select",3),h.YNc(4,Af,1,1,null,4),h.TgZ(5,"div",5)(6,"button",6),h.NdJ("click",function(m){return o.onClickNext(m)}),h._UZ(7,"span",2),h.qZA()()),2&t&&(h.xp6(1),h.Q6J("disabled",o.prevDisabled),h.xp6(2),h.Q6J("ngIf",o.showSelect),h.xp6(1),h.Q6J("ngIf",!o.showSelect),h.xp6(2),h.Q6J("disabled",o.nextDisabled))},dependencies:[pe.O5,pe.ax,Ah],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var lr=(()=>{return(n=lr||(lr={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",lr;var n})();let Fd=(()=>{class n{processKey(t,o){const{state:d,calendar:m}=o;switch(t.which){case lr.PageUp:o.focusDate(m.getPrev(d.focusedDate,t.shiftKey?"y":"m",1));break;case lr.PageDown:o.focusDate(m.getNext(d.focusedDate,t.shiftKey?"y":"m",1));break;case lr.End:o.focusDate(t.shiftKey?d.maxDate:d.lastDate);break;case lr.Home:o.focusDate(t.shiftKey?d.minDate:d.firstDate);break;case lr.ArrowLeft:o.focusDate(m.getPrev(d.focusedDate,"d",1));break;case lr.ArrowUp:o.focusDate(m.getPrev(d.focusedDate,"d",m.getDaysPerWeek()));break;case lr.ArrowRight:o.focusDate(m.getNext(d.focusedDate,"d",1));break;case lr.ArrowDown:o.focusDate(m.getNext(d.focusedDate,"d",m.getDaysPerWeek()));break;case lr.Enter:case lr.Space:o.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sc=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=pe.Tn.Short}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function o_(){return new oc}()},providedIn:"root"}),n})(),oc=(()=>{class n extends Nh{fromModel(t){return t&&es(t.year)&&es(t.month)&&es(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&es(t.year)&&es(t.month)&&es(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return n.\u0275fac=function(){let r;return function(o){return(r||(r=h.n5z(n)))(o||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),a_=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),Mh=(()=>{class n{constructor(t,o,d,m){this.i18n=t,this.datepicker=o,this._keyboardService=d,this._service=m}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ou),h.Y36((0,h.Gpc)(()=>Ld)),h.Y36(Fd),h.Y36(Qp))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,o){1&t&&h.NdJ("keydown",function(m){return o.onKeyDown(m)})},inputs:{month:"month"},standalone:!0,features:[h.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,o){1&t&&(h.YNc(0,Of,3,2,"div",0),h.YNc(1,xp,1,1,"ng-template",1)),2&t&&(h.Q6J("ngIf",o.viewModel.weekdays.length>0),h.xp6(1),h.Q6J("ngForOf",o.viewModel.weeks))},dependencies:[pe.O5,pe.ax,pe.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),Ld=(()=>{class n{constructor(t,o,d,m,D,x,U,W){this._service=t,this._calendar=o,this.i18n=d,this._elementRef=x,this._ngbDateAdapter=U,this._ngZone=W,this._controlValue=null,this._destroyed$=new at.x,this._publicState={},this.navigate=new h.vpe,this.dateSelect=new h.vpe,this.onChange=ie=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(ie=>this[ie]=m[ie]),t.dateSelect$.pipe(pn(this._destroyed$)).subscribe(ie=>{this.dateSelect.emit(ie)}),t.model$.pipe(pn(this._destroyed$)).subscribe(ie=>{const Ee=ie.firstDate,De=this.model?this.model.firstDate:null;this._publicState={maxDate:ie.maxDate,minDate:ie.minDate,firstDate:ie.firstDate,lastDate:ie.lastDate,focusedDate:ie.focusDate,months:ie.months.map(Un=>Un.firstDate)};let Ge=!1;if(!Ee.equals(De)&&(this.navigate.emit({current:De?{year:De.year,month:De.month}:null,next:{year:Ee.year,month:Ee.month},preventDefault:()=>Ge=!0}),Ge&&null!==De))return void this._service.open(De);const Tt=ie.selectedDate,Vt=ie.focusDate,Xt=this.model?this.model.focusDate:null;this.model=ie,Sh(Tt,this._controlValue)&&(this._controlValue=Tt,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(Tt))),Sh(Vt,Xt)&&Xt&&ie.focusVisible&&this.focus(),D.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(gs.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Cn.q)(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(gs.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=Et(this._contentEl.nativeElement,"focusin"),o=Et(this._contentEl.nativeElement,"focusout"),{nativeElement:d}=this._elementRef;(0,xn.T)(t,o).pipe((0,cr.h)(({target:m,relatedTarget:D})=>!(lv(m,"ngb-dp-day")&&lv(D,"ngb-dp-day")&&d.contains(m)&&d.contains(D))),pn(this._destroyed$)).subscribe(({type:m})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===m})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(o=>t[o]=this[o]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const o={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(d=>d in t).forEach(d=>o[d]=this[d]),this._service.set(o),"startDate"in t){const{currentValue:d,previousValue:m}=t.startDate;Kp(m,d)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case kd.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case kd.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=gs.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qp),h.Y36(ts),h.Y36(Ou),h.Y36(sc),h.Y36(h.sBO),h.Y36(h.SBq),h.Y36(Nh),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,a_,7),2&t){let m;h.iGM(m=h.CRH())&&(o.contentTemplate=m.first)}},viewQuery:function(t,o){if(1&t&&(h.Gf(Ya,7),h.Gf(kp,7)),2&t){let d;h.iGM(d=h.CRH())&&(o._defaultDayTemplate=d.first),h.iGM(d=h.CRH())&&(o._contentEl=d.first)}},hostVars:2,hostBindings:function(t,o){2&t&&h.ekj("disabled",o.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[h._Bn([{provide:Jn,useExisting:(0,h.Gpc)(()=>n),multi:!0},Qp]),h.TTD,h.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,o){if(1&t&&(h.YNc(0,tc,1,5,"ng-template",null,0,h.W1O),h.YNc(2,Cd,1,1,"ng-template",null,1,h.W1O),h.TgZ(4,"div",2),h.YNc(5,Td,1,7,"ngb-datepicker-navigation",3),h.qZA(),h.TgZ(6,"div",4,5),h.YNc(8,Ki,0,0,"ng-template",6),h.qZA(),h.YNc(9,Ps,0,0,"ng-template",6)),2&t){const d=h.MAs(3);h.xp6(5),h.Q6J("ngIf","none"!==o.navigation),h.xp6(1),h.ekj("ngb-dp-months",!o.contentTemplate),h.xp6(2),h.Q6J("ngTemplateOutlet",(null==o.contentTemplate?null:o.contentTemplate.templateRef)||d),h.xp6(1),h.Q6J("ngTemplateOutlet",o.footerTemplate)}},dependencies:[pe.O5,pe.ax,pe.tP,s_,Mh,Oh],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Jp=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function l_(n){const r=Array.from(n.querySelectorAll(Jp)).filter(t=>-1!==t.tabIndex);return[r[0],r[r.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Mv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ld,Mh]}),n})(),D_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class cc{constructor(r,t,o){this.nodes=r,this.viewRef=t,this.componentRef=o}}let I_=(()=>{class n{constructor(t,o){this._el=t,this._zone=o}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Cn.q)(1)).subscribe(()=>{Ys(this._zone,this._el.nativeElement,(t,o)=>{o&&Qa(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ys(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,o){2&t&&(h.Tol("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),h.ekj("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[h.jDz],decls:0,vars:0,template:function(t,o){},encapsulation:2}),n})();class Rv{close(r){}dismiss(r){}}class C_{constructor(r,t,o,d){this._windowCmptRef=r,this._contentRef=t,this._backdropCmptRef=o,this._beforeDismiss=d,this._closed=new at.x,this._dismissed=new at.x,this._hidden=new at.x,r.instance.dismissEvent.subscribe(m=>{this.dismiss(m)}),this.result=new Promise((m,D)=>{this._resolve=m,this._reject=D}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(pn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(pn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(r){this._windowCmptRef&&(this._closed.next(r),this._resolve(r),this._removeModalElements())}_dismiss(r){this._dismissed.next(r),this._reject(r),this._removeModalElements()}dismiss(r){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function av(n){return n&&n.then}(t)?!1!==t&&this._dismiss(r):t.then(o=>{!1!==o&&this._dismiss(r)},()=>{})}else this._dismiss(r)}_removeModalElements(){const r=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ke.of)(void 0);r.subscribe(()=>{const{nativeElement:o}=this._windowCmptRef.location;o.parentNode.removeChild(o),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:o}=this._backdropCmptRef.location;o.parentNode.removeChild(o),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),yn(r,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Uh=(()=>{return(n=Uh||(Uh={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",Uh;var n})();let T_=(()=>{class n{constructor(t,o,d){this._document=t,this._elRef=o,this._zone=d,this._closed$=new at.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new at.x,this.hidden=new at.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":jc(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Cn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,o={animation:this.animation,runningTransition:"stop"},D=yn(Ys(this._zone,t,()=>t.classList.remove("show"),o),Ys(this._zone,this._dialogEl.nativeElement,()=>{},o));return D.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),D}_show(){const t={animation:this.animation,runningTransition:"continue"};yn(Ys(this._zone,this._elRef.nativeElement,(m,D)=>{D&&Qa(m),m.classList.add("show")},t),Ys(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Et(t,"keydown").pipe(pn(this._closed$),(0,cr.h)(d=>d.which===lr.Escape)).subscribe(d=>{this.keyboard?requestAnimationFrame(()=>{d.defaultPrevented||this._zone.run(()=>this.dismiss(Uh.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let o=!1;Et(this._dialogEl.nativeElement,"mousedown").pipe(pn(this._closed$),(0,Gt.b)(()=>o=!1),(0,An.w)(()=>Et(t,"mouseup").pipe(pn(this._closed$),(0,Cn.q)(1))),(0,cr.h)(({target:d})=>t===d)).subscribe(()=>{o=!0}),Et(t,"click").pipe(pn(this._closed$)).subscribe(({target:d})=>{t===d&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!o&&this._zone.run(()=>this.dismiss(Uh.BACKDROP_CLICK))),o=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const o=t.querySelector("[ngbAutofocus]"),d=l_(t)[0];(o||d||t).focus()}}_restoreFocus(){const t=this._document.body,o=this._elWithFocus;let d;d=o&&o.focus&&t.contains(o)?o:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>d.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ys(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pe.K0),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,o){if(1&t&&h.Gf(Sd,7),2&t){let d;h.iGM(d=h.CRH())&&(o._dialogEl=d.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,o){2&t&&(h.uIk("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),h.Tol("modal d-block"+(o.windowClass?" "+o.windowClass:"")),h.ekj("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[h.jDz],ngContentSelectors:wd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,o){1&t&&(h.F$t(),h.TgZ(0,"div",0,1)(2,"div",2),h.Hsn(3),h.qZA()()),2&t&&h.Tol("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),S_=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),o=this._document.body,d=o.style,{overflow:m,paddingRight:D}=d;if(t>0){const x=parseFloat(window.getComputedStyle(o).paddingRight);d.paddingRight=`${x+t}px`}return d.overflow="hidden",()=>{t>0&&(d.paddingRight=D),d.overflow=m}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pe.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qf=(()=>{class n{constructor(t,o,d,m,D,x,U){this._applicationRef=t,this._injector=o,this._environmentInjector=d,this._document=m,this._scrollBar=D,this._rendererFactory=x,this._ngZone=U,this._activeWindowCmptHasChanged=new at.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const W=this._windowCmpts[this._windowCmpts.length-1];((n,r,t,o=!1)=>{n.runOutsideAngular(()=>{const d=Et(r,"focusin").pipe(pn(t),(0,qn.U)(m=>m.target));Et(r,"keydown").pipe(pn(t),(0,cr.h)(m=>m.which===lr.Tab),ei(d)).subscribe(([m,D])=>{const[x,U]=l_(r);(D===x||D===r)&&m.shiftKey&&(U.focus(),m.preventDefault()),D===U&&!m.shiftKey&&(x.focus(),m.preventDefault())}),o&&Et(r,"click").pipe(pn(t),ei(d),(0,qn.U)(m=>m[1])).subscribe(m=>m.focus())})})(this._ngZone,W.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(W.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,o,d){const m=d.container instanceof HTMLElement?d.container:Hc(d.container)?this._document.querySelector(d.container):this._document.body,D=this._rendererFactory.createRenderer(null,null);if(!m)throw new Error(`The specified modal container "${d.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const x=new Rv,U=(t=d.injector||t).get(h.lqb,null)||this._environmentInjector,W=this._getContentRef(t,U,o,x,d);let ie=!1!==d.backdrop?this._attachBackdrop(m):void 0,Ee=this._attachWindowComponent(m,W.nodes),De=new C_(Ee,W,ie,d.beforeDismiss);return this._registerModalRef(De),this._registerWindowCmpt(Ee),De.hidden.pipe((0,Cn.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(D.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),x.close=Ge=>{De.close(Ge)},x.dismiss=Ge=>{De.dismiss(Ge)},this._applyWindowOptions(Ee.instance,d),1===this._modalRefs.length&&D.addClass(this._document.body,"modal-open"),ie&&ie.instance&&(this._applyBackdropOptions(ie.instance,d),ie.changeDetectorRef.detectChanges()),Ee.changeDetectorRef.detectChanges(),De}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(o=>o.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let o=(0,h.LMc)(I_,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(o.hostView),t.appendChild(o.location.nativeElement),o}_attachWindowComponent(t,o){let d=(0,h.LMc)(T_,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:o});return this._applicationRef.attachView(d.hostView),t.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,o){this._windowAttributes.forEach(d=>{Hc(o[d])&&(t[d]=o[d])})}_applyBackdropOptions(t,o){this._backdropAttributes.forEach(d=>{Hc(o[d])&&(t[d]=o[d])})}_getContentRef(t,o,d,m,D){return d?d instanceof h.Rgc?this._createFromTemplateRef(d,m):jc(d)?this._createFromString(d):this._createFromComponent(t,o,d,m,D):new cc([])}_createFromTemplateRef(t,o){const m=t.createEmbeddedView({$implicit:o,close(D){o.close(D)},dismiss(D){o.dismiss(D)}});return this._applicationRef.attachView(m),new cc([m.rootNodes],m)}_createFromString(t){const o=this._document.createTextNode(`${t}`);return new cc([[o]])}_createFromComponent(t,o,d,m,D){const x=h.zs3.create({providers:[{provide:Rv,useValue:m}],parent:t}),U=(0,h.LMc)(d,{environmentInjector:o,elementInjector:x}),W=U.location.nativeElement;return D.scrollable&&W.classList.add("component-host-scrollable"),this._applicationRef.attachView(U.hostView),new cc([[W]],U.hostView,U)}_setAriaHidden(t){const o=t.parentElement;o&&t!==this._document.body&&(Array.from(o.children).forEach(d=>{d!==t&&"SCRIPT"!==d.nodeName&&(this._ariaHiddenValues.set(d,d.getAttribute("aria-hidden")),d.setAttribute("aria-hidden","true"))}),this._setAriaHidden(o))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,o)=>{t?o.setAttribute("aria-hidden",t):o.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const o=()=>{const d=this._modalRefs.indexOf(t);d>-1&&(this._modalRefs.splice(d,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(o,o)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const o=this._windowCmpts.indexOf(t);o>-1&&(this._windowCmpts.splice(o,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(h.lqb),h.LFG(pe.K0),h.LFG(S_),h.LFG(h.FYo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bh=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vh=(()=>{class n{constructor(t,o,d){this._injector=t,this._modalStack=o,this._config=d}open(t,o={}){const d={...this._config,animation:this._config.animation,...o};return this._modalStack.open(this._injector,t,d)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(qf),h.LFG(Bh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Vh]}),n})();const Mb=({classList:n})=>(n.remove("show"),()=>n.remove("active")),Rb=(n,r)=>{r&&Qa(n),n.classList.add("show")};let xs=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,o){2&t&&(h.Ikx("id",o.item.panelDomId),h.uIk("role",o.role?o.role:o.nav.roles?"tabpanel":void 0)("aria-labelledby",o.item.domId),h.ekj("fade",o.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),$d=(()=>{class n{constructor(t,o){this._cd=t,this._ngZone=o,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(pn(this.nav.destroy$),(0,Kr.O)(this._activePane?.item||null),(0,en.x)(),function rn(n){return(0,cr.h)((r,t)=>n<=t)}(1)).subscribe(t=>{const o={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Ys(this._ngZone,this._activePane.elRef.nativeElement,Mb,o).subscribe(()=>{const d=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Ys(this._ngZone,this._activePane.elRef.nativeElement,Rb,o).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),d&&(d.hidden.emit(),this.nav.hidden.emit(d.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(o=>o.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,o){if(1&t&&h.Gf(xs,5),2&t){let d;h.iGM(d=h.CRH())&&(o._panes=d)}},hostVars:2,hostBindings:function(t,o){2&t&&h.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[h.jDz],attrs:Ad,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,o){1&t&&h.YNc(0,b,1,1,"ng-template",0),2&t&&h.Q6J("ngForOf",o.nav.items)},dependencies:[xs,pe.ax,pe.O5,pe.tP],encapsulation:2,changeDetection:0}),n})(),dc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[$d]}),n})(),zd=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wd=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),hg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),fg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),pg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),gg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),N_=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),jh=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),Pv=(()=>{class n{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new h.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,o){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),o<this.pageCount&&(o<this.pageCount-2?this.pages.push(-1):o===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,o=this.pageCount,d=Math.floor(this.maxSize/2);return this.page<=d?o=this.maxSize:this.pageCount-this.page<d?t=this.pageCount-this.maxSize:(t=this.page-d-1,o=this.page+(this.maxSize%2==0?d-1:d)),[t,o]}_applyPagination(){let o=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[o,o+this.maxSize]}_setPageInRange(t){const o=this.page;this.page=Gc(t,this.pageCount,1),this.page!==o&&Ii(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Ii(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let o=1;o<=this.pageCount;o++)this.pages.push(o);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let o=0,d=this.pageCount;[o,d]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(o,d),this._applyEllipses(o,d)}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zd))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-pagination"]],contentQueries:function(t,o,d){if(1&t&&(h.Suo(d,Wd,5),h.Suo(d,hg,5),h.Suo(d,fg,5),h.Suo(d,pg,5),h.Suo(d,gg,5),h.Suo(d,N_,5),h.Suo(d,jh,5)),2&t){let m;h.iGM(m=h.CRH())&&(o.tplEllipsis=m.first),h.iGM(m=h.CRH())&&(o.tplFirst=m.first),h.iGM(m=h.CRH())&&(o.tplLast=m.first),h.iGM(m=h.CRH())&&(o.tplNext=m.first),h.iGM(m=h.CRH())&&(o.tplNumber=m.first),h.iGM(m=h.CRH())&&(o.tplPrevious=m.first),h.iGM(m=h.CRH())&&(o.tplPages=m.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[h.TTD,h.jDz],decls:20,vars:12,consts:function(){let r,t,o,d,m,D,x,U;return r=$localize`:@@ngb.pagination.first:««`,t=$localize`:@@ngb.pagination.previous:«`,o=$localize`:@@ngb.pagination.next:»`,d=$localize`:@@ngb.pagination.last:»»`,m=$localize`:@@ngb.pagination.first-aria:First`,D=$localize`:@@ngb.pagination.previous-aria:Previous`,x=$localize`:@@ngb.pagination.next-aria:Next`,U=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],r,t,o,d,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",m,"href","",1,"page-link",3,"click"],["aria-label",D,"href","",1,"page-link",3,"click"],["aria-label",x,"href","",1,"page-link",3,"click"],["aria-label",U,"href","",1,"page-link",3,"click"]]},template:function(t,o){if(1&t&&(h.YNc(0,M,2,0,"ng-template",null,0,h.W1O),h.YNc(2,q,2,0,"ng-template",null,1,h.W1O),h.YNc(4,se,2,0,"ng-template",null,2,h.W1O),h.YNc(6,He,2,0,"ng-template",null,3,h.W1O),h.YNc(8,St,1,0,"ng-template",null,4,h.W1O),h.YNc(10,In,2,2,"ng-template",null,5,h.W1O),h.YNc(12,Od,1,1,"ng-template",null,6,h.W1O),h.TgZ(14,"ul"),h.YNc(15,Nd,3,9,"li",7),h.YNc(16,Fp,3,8,"li",7),h.YNc(17,Mi,0,0,"ng-template",8),h.YNc(18,Dh,3,9,"li",7),h.YNc(19,Lm,3,9,"li",7),h.qZA()),2&t){const d=h.MAs(13);h.xp6(14),h.Tol("pagination"+(o.size?" pagination-"+o.size:"")),h.xp6(1),h.Q6J("ngIf",o.boundaryLinks),h.xp6(1),h.Q6J("ngIf",o.directionLinks),h.xp6(1),h.Q6J("ngTemplateOutlet",(null==o.tplPages?null:o.tplPages.templateRef)||d)("ngTemplateOutletContext",h.kEZ(8,Ih,o.page,o.pages,o.disabled)),h.xp6(1),h.Q6J("ngIf",o.directionLinks),h.xp6(1),h.Q6J("ngIf",o.boundaryLinks)}},dependencies:[pe.O5,pe.ax,pe.tP],encapsulation:2,changeDetection:0}),n})(),Kd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Pv]}),n})(),Lv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),R_=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xb=(()=>{class n{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!Ii(t)||t<=0?100:t}get max(){return this._max}getValue(){return Gc(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(R_))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,o){2&t&&(h.uIk("aria-valuenow",o.getValue())("aria-valuemax",o.max)("aria-label",o.ariaLabel),h.Udp("height",o.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[h.jDz],ngContentSelectors:wd,decls:3,vars:11,consts:function(){let r;return r=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],r]},template:function(t,o){1&t&&(h.F$t(),h.TgZ(0,"div"),h.YNc(1,Tu,3,3,"span",0),h.Hsn(2),h.qZA()),2&t&&(h.MT6("progress-bar",o.type?o.textType?" bg-"+o.type:" text-bg-"+o.type:"","",o.textType?" text-"+o.textType:"",""),h.Udp("width",o.getPercentValue(),"%"),h.ekj("progress-bar-animated",o.animated)("progress-bar-striped",o.striped),h.xp6(1),h.Q6J("ngIf",o.showValue))},dependencies:[pe.O5,pe.Zx],encapsulation:2,changeDetection:0}),n})(),Jf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[xb]}),n})(),kb=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P_=(()=>{class n{constructor(t,o){this._changeDetectorRef=o,this.contexts=[],this.disabled=!1,this.hover=new h.vpe,this.leave=new h.vpe,this.rateChange=new h.vpe(!0),this.onChange=d=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case lr.ArrowDown:case lr.ArrowLeft:this.update(this.rate-1);break;case lr.ArrowUp:case lr.ArrowRight:this.update(this.rate+1);break;case lr.Home:this.update(0);break;case lr.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,o=!0){const d=Gc(t,this.max,0);this.isInteractive()&&this.rate!==d&&(this.rate=d,this.rateChange.emit(this.rate)),o&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((o,d)=>o.fill=Math.round(100*Gc(t-d,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,o)=>({fill:0,index:o}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(kb),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,h.Rgc,5),2&t){let m;h.iGM(m=h.CRH())&&(o.starTemplateFromContent=m.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,o){1&t&&h.NdJ("blur",function(){return o.handleBlur()})("keydown",function(m){return o.handleKeyDown(m)})("mouseleave",function(){return o.reset()}),2&t&&(h.Ikx("tabindex",o.disabled?-1:o.tabindex),h.uIk("aria-valuemax",o.max)("aria-valuenow",o.nextRate)("aria-valuetext",o.ariaValueText())("aria-disabled",!!o.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[h._Bn([{provide:Jn,useExisting:(0,h.Gpc)(()=>n),multi:!0}]),h.TTD,h.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,o){1&t&&(h.YNc(0,Bm,1,1,"ng-template",null,0,h.W1O),h.YNc(2,Vm,4,5,"ng-template",1)),2&t&&(h.xp6(2),h.Q6J("ngForOf",o.contexts))},dependencies:[pe.ax,pe.tP],encapsulation:2,changeDetection:0}),n})(),Yd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[P_]}),n})();class yg{constructor(r,t,o){this.hour=fs(r),this.minute=fs(t),this.second=fs(o)}changeHour(r=1){this.updateHour((isNaN(this.hour)?0:this.hour)+r)}updateHour(r){this.hour=Ii(r)?(r<0?24+r:r)%24:NaN}changeMinute(r=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+r)}updateMinute(r){Ii(r)?(this.minute=r%60<0?60+r%60:r%60,this.changeHour(Math.floor(r/60))):this.minute=NaN}changeSecond(r=1){this.updateSecond((isNaN(this.second)?0:this.second)+r)}updateSecond(r){Ii(r)?(this.second=r<0?60+r%60:r%60,this.changeMinute(Math.floor(r/60))):this.second=NaN}isValid(r=!0){return Ii(this.hour)&&Ii(this.minute)&&(!r||Ii(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Uv=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function $h(){return new Fb}()},providedIn:"root"}),n})(),Fb=(()=>{class n extends vg{fromModel(t){return t&&es(t.hour)&&es(t.minute)?{hour:t.hour,minute:t.minute,second:es(t.second)?t.second:null}:null}toModel(t){return t&&es(t.hour)&&es(t.minute)?{hour:t.hour,minute:t.minute,second:es(t.second)?t.second:null}:null}}return n.\u0275fac=function(){let r;return function(o){return(r||(r=h.n5z(n)))(o||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Xf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let o=null;return o=t?new t:function Mu(n){return new Bv(n)}(h.LFG(h.soG)),o},providedIn:"root"}),n})(),Bv=(()=>{class n extends Xf{constructor(t){super(),this._periods=(0,pe.ol)(t,pe.x.Standalone,pe.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Lb=/[^0-9]/g;let bg=(()=>{class n{constructor(t,o,d,m){this._config=t,this._ngbTimeAdapter=o,this._cd=d,this.i18n=m,this.onChange=D=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=es(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=es(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=es(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const o=this._ngbTimeAdapter.fromModel(t);this.model=o?new yg(o.hour,o.minute,o.second):new yg,!this.seconds&&(!o||!Ii(o.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const o=!!this.model&&this.model.hour>=12,d=fs(t);this.model?.updateHour(this.meridian&&(o&&d<12||!o&&12===d)?d+12:d),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(fs(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(fs(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(Lb,"")}formatHour(t){return Ii(t)?Th(this.meridian?t%12==0?12:t%12:t%24):Th(NaN)}formatMinSec(t){return Th(Ii(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!Ii(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Uv),h.Y36(vg),h.Y36(h.sBO),h.Y36(Xf))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[h._Bn([{provide:Jn,useExisting:(0,h.Gpc)(()=>n),multi:!0}]),h.TTD,h.jDz],decls:16,vars:25,consts:function(){let r,t,o,d,m,D,x,U,W,ie,Ee,De,Ge,Tt;return r=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,o=$localize`:@@ngb.timepicker.MM:MM`,d=$localize`:@@ngb.timepicker.minutes:Minutes`,m=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,D=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,x=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,U=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,W=$localize`:@@ngb.timepicker.SS:SS`,ie=$localize`:@@ngb.timepicker.seconds:Seconds`,Ee=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,De=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,Ge=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,Tt=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",r,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",o,"aria-label",d,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],m,[1,"chevron","ngb-tp-chevron","bottom"],D,x,U,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",W,"aria-label",ie,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],Ee,De,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],Ge,Tt]},template:function(t,o){1&t&&(h.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),h.YNc(3,Md,4,7,"button",3),h.TgZ(4,"input",4),h.NdJ("change",function(m){return o.updateHour(m.target.value)})("blur",function(){return o.handleBlur()})("input",function(m){return o.formatInput(m.target)})("keydown.ArrowUp",function(m){return o.changeHour(o.hourStep),m.preventDefault()})("keydown.ArrowDown",function(m){return o.changeHour(-o.hourStep),m.preventDefault()}),h.qZA(),h.YNc(5,Gm,4,7,"button",3),h.qZA(),h.TgZ(6,"div",5),h._uU(7,":"),h.qZA(),h.TgZ(8,"div",6),h.YNc(9,oE,4,7,"button",3),h.TgZ(10,"input",7),h.NdJ("change",function(m){return o.updateMinute(m.target.value)})("blur",function(){return o.handleBlur()})("input",function(m){return o.formatInput(m.target)})("keydown.ArrowUp",function(m){return o.changeMinute(o.minuteStep),m.preventDefault()})("keydown.ArrowDown",function(m){return o.changeMinute(-o.minuteStep),m.preventDefault()}),h.qZA(),h.YNc(11,Xi,4,7,"button",3),h.qZA(),h.YNc(12,Wr,2,0,"div",8),h.YNc(13,nc,4,9,"div",9),h.YNc(14,$m,1,0,"div",8),h.YNc(15,Vc,5,9,"div",10),h.qZA()()),2&t&&(h.ekj("disabled",o.disabled),h.Q6J("disabled",o.disabled),h.xp6(3),h.Q6J("ngIf",o.spinners),h.xp6(1),h.ekj("form-control-sm",o.isSmallSize)("form-control-lg",o.isLargeSize),h.Q6J("value",o.formatHour(null==o.model?null:o.model.hour))("readOnly",o.readonlyInputs)("disabled",o.disabled),h.xp6(1),h.Q6J("ngIf",o.spinners),h.xp6(4),h.Q6J("ngIf",o.spinners),h.xp6(1),h.ekj("form-control-sm",o.isSmallSize)("form-control-lg",o.isLargeSize),h.Q6J("value",o.formatMinSec(null==o.model?null:o.model.minute))("readOnly",o.readonlyInputs)("disabled",o.disabled),h.xp6(1),h.Q6J("ngIf",o.spinners),h.xp6(1),h.Q6J("ngIf",o.seconds),h.xp6(1),h.Q6J("ngIf",o.seconds),h.xp6(1),h.Q6J("ngIf",o.meridian),h.xp6(1),h.Q6J("ngIf",o.meridian))},dependencies:[pe.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),Vv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[bg]}),n})();const x_=(n,r)=>{const{classList:t}=n;if(r)return t.add("fade"),Qa(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},Ub=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let ep=(()=>{class n{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(tu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),k_=(()=>{class n{constructor(t,o,d,m){this.ariaLive=t,this._zone=d,this._element=m,this.contentHeaderTpl=null,this.shown=new h.vpe,this.hidden=new h.vpe,null==this.ariaLive&&(this.ariaLive=o.ariaLive),this.delay=o.delay,this.autohide=o.autohide,this.animation=o.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Cn.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=Ys(this._zone,this._element.nativeElement,Ub,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=Ys(this._zone,this._element.nativeElement,x_,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(t){return new(t||n)(h.$8M("aria-live"),h.Y36(ep),h.Y36(h.R0b),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-toast"]],contentQueries:function(t,o,d){if(1&t&&h.Suo(d,Bb,7,h.Rgc),2&t){let m;h.iGM(m=h.CRH())&&(o.contentHeaderTpl=m.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,o){2&t&&(h.uIk("aria-live",o.ariaLive),h.ekj("fade",o.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[h.TTD,h.jDz],ngContentSelectors:wd,decls:5,vars:1,consts:function(){let r;return r=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",r,1,"btn-close",3,"click"]]},template:function(t,o){1&t&&(h.F$t(),h.YNc(0,zm,2,1,"ng-template",null,0,h.W1O),h.YNc(2,Lp,3,1,"ng-template",1),h.TgZ(3,"div",2),h.Hsn(4),h.qZA()),2&t&&(h.xp6(2),h.Q6J("ngIf",o.contentHeaderTpl||o.header))},dependencies:[pe.O5,pe.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[k_]}),n})(),Jc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Eg=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const o=Ch(this.result),d=Array.isArray(this.term)?this.term:[this.term],m=W=>this.accentSensitive?W:Km(W),D=d.map(W=>function Wm(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(m(Ch(W)))).filter(W=>W),x=this.accentSensitive?o:Km(o),U=D.length?x.split(new RegExp(`(${D.join("|")})`,"gmi")):[o];if(this.accentSensitive)this.parts=U;else{let W=0;this.parts=U.map(ie=>o.substring(W,W+=ie.length))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[h.TTD,h.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,o){1&t&&h.YNc(0,cb,3,2,"ng-template",0),2&t&&h.Q6J("ngForOf",o.parts)},dependencies:[pe.O5,pe.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new h.OlP("live announcer delay",{providedIn:"root",factory:function Xc(){return 100}});let Dg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Eg]}),n})(),U_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Hv=[Qm,Au,pv,e_,Mv,D_,A_,dc,U_,Kd,Lv,Jf,Yd,Vv,zh,Jc,Dg];let $v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Hv,Qm,Au,pv,e_,Mv,D_,A_,dc,U_,Kd,Lv,Jf,Yd,Vv,zh,Jc,Dg]}),n})();var Ru=j(2011),hc=j(1205),Aa=j(2122),Ig=j(3942),Qd=j(5861),Ll=j(9681),le=j(2090),Jd=j(4859);const Cg="firebasestorage.googleapis.com",zv="storageBucket";class Gi extends le.ZR{constructor(r,t,o=0){super(rp(r),`Firebase Storage: ${t} (${rp(r)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gi.prototype)}get status(){return this.status_}set status(r){this.status_=r}_codeEquals(r){return rp(r)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(r){this.customData.serverResponse=r,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Si=(()=>{return(n=Si||(Si={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Si;var n})();function rp(n){return"storage/"+n}function Kv(){return new Gi(Si.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Qh(){return new Gi(Si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sg(){return new Gi(Si.CANCELED,"User canceled the upload/download.")}function td(){return new Gi(Si.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function su(n){return new Gi(Si.INVALID_ARGUMENT,n)}function fc(){return new Gi(Si.APP_DELETED,"The Firebase app was deleted.")}function Xd(n){return new Gi(Si.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pu(n,r){return new Gi(Si.INVALID_FORMAT,"String does not match format '"+n+"': "+r)}function Ul(n){throw new Gi(Si.INTERNAL_ERROR,"Internal error: "+n)}class ks{constructor(r,t){this.bucket=r,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const r=encodeURIComponent;return"/b/"+r(this.bucket)+"/o/"+r(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(r,t){let o;try{o=ks.makeFromUrl(r,t)}catch{return new ks(r,"")}if(""===o.path)return o;throw function Jh(n){return new Gi(Si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(r)}static makeFromUrl(r,t){let o=null;const d="([A-Za-z0-9.\\-_]+)",x=new RegExp("^gs://"+d+"(/(.*))?$","i");function W(zn){zn.path_=decodeURIComponent(zn.path)}const Ee=t.replace(/[.]/g,"\\."),tr=[{regex:x,indices:{bucket:1,path:3},postModify:function m(zn){"/"===zn.path.charAt(zn.path.length-1)&&(zn.path_=zn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ee}/v[A-Za-z0-9_]+/b/${d}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:W},{regex:new RegExp(`^https?://${t===Cg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${d}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:W}];for(let zn=0;zn<tr.length;zn++){const Er=tr[zn],xr=Er.regex.exec(r);if(xr){let fi=xr[Er.indices.path];fi||(fi=""),o=new ks(xr[Er.indices.bucket],fi),Er.postModify(o);break}}if(null==o)throw function Oa(n){return new Gi(Si.INVALID_URL,"Invalid URL '"+n+"'.")}(r);return o}}class nd{constructor(r){this.promise_=Promise.reject(r)}getPromise(){return this.promise_}cancel(r=!1){}}function eh(n){return"string"==typeof n||n instanceof String}function Og(n){return Ng()&&n instanceof Blob}function Ng(){return typeof Blob<"u"&&!(0,le.UG)()}function Mg(n,r,t,o){if(o<r)throw su(`Invalid value for '${n}'. Expected ${r} or greater.`);if(o>t)throw su(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bl(n,r,t){let o=r;return null==t&&(o=`https://${r}`),`${t}://${o}/v0${n}`}function H_(n){const r=encodeURIComponent;let t="?";for(const o in n)n.hasOwnProperty(o)&&(t=t+(r(o)+"=")+r(n[o])+"&");return t=t.slice(0,-1),t}var xu=(()=>{return(n=xu||(xu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",xu;var n})();function Rg(n,r){const t=n>=500&&n<600,d=-1!==[408,429].indexOf(n),m=-1!==r.indexOf(n);return t||d||m}class Pg{constructor(r,t,o,d,m,D,x,U,W,ie,Ee,De=!0){this.url_=r,this.method_=t,this.headers_=o,this.body_=d,this.successCodes_=m,this.additionalRetryCodes_=D,this.callback_=x,this.errorCallback_=U,this.timeout_=W,this.progressCallback_=ie,this.connectionFactory_=Ee,this.retry=De,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ge,Tt)=>{this.resolve_=Ge,this.reject_=Tt,this.start_()})}start_(){const t=(o,d)=>{const m=this.resolve_,D=this.reject_,x=d.connection;if(d.wasSuccessCode)try{const U=this.callback_(x,x.getResponse());!function qv(n){return void 0!==n}(U)?m():m(U)}catch(U){D(U)}else if(null!==x){const U=Kv();U.serverResponse=x.getErrorText(),D(this.errorCallback_?this.errorCallback_(x,U):U)}else D(d.canceled?this.appDelete_?fc():Sg():Qh())};this.canceled_?t(0,new xg(!1,null,!0)):this.backoffId_=function ef(n,r,t){let o=1,d=null,m=null,D=!1,x=0;function U(){return 2===x}let W=!1;function ie(...Xt){W||(W=!0,r.apply(null,Xt))}function Ee(Xt){d=setTimeout(()=>{d=null,n(Ge,U())},Xt)}function De(){m&&clearTimeout(m)}function Ge(Xt,...Un){if(W)return void De();if(Xt)return De(),void ie.call(null,Xt,...Un);if(U()||D)return De(),void ie.call(null,Xt,...Un);let tr;o<64&&(o*=2),1===x?(x=2,tr=0):tr=1e3*(o+Math.random()),Ee(tr)}let Tt=!1;function Vt(Xt){Tt||(Tt=!0,De(),!W&&(null!==d?(Xt||(x=2),clearTimeout(d),Ee(0)):Xt||(x=1)))}return Ee(0),m=setTimeout(()=>{D=!0,Vt(!0)},t),Vt}((o,d)=>{if(d)return void o(!1,new xg(!1,null,!0));const m=this.connectionFactory_();this.pendingConnection_=m;const D=x=>{null!==this.progressCallback_&&this.progressCallback_(x.loaded,x.lengthComputable?x.total:-1)};null!==this.progressCallback_&&m.addUploadProgressListener(D),m.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&m.removeUploadProgressListener(D),this.pendingConnection_=null;const x=m.getErrorCode()===xu.NO_ERROR,U=m.getStatus();if(!x||Rg(U,this.additionalRetryCodes_)&&this.retry){const ie=m.getErrorCode()===xu.ABORT;return void o(!1,new xg(!1,null,ie))}const W=-1!==this.successCodes_.indexOf(U);o(!0,new xg(W,m))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(r){this.canceled_=!0,this.appDelete_=r||!1,null!==this.backoffId_&&function rd(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xg{constructor(r,t,o){this.wasSuccessCode=r,this.connection=t,this.canceled=!!o}}function K_(...n){const r=function th(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==r){const t=new r;for(let o=0;o<n.length;o++)t.append(n[o]);return t.getBlob()}if(Ng())return new Blob(n);throw new Gi(Si.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const fa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class op{constructor(r,t){this.data=r,this.contentType=t||null}}function tf(n,r){switch(n){case fa.RAW:return new op(ap(r));case fa.BASE64:case fa.BASE64URL:return new op(lp(n,r));case fa.DATA_URL:return new op(function up(n){const r=new nf(n);return r.base64?lp(fa.BASE64,r.rest):function Lg(n){let r;try{r=decodeURIComponent(n)}catch{throw Pu(fa.DATA_URL,"Malformed data URL.")}return ap(r)}(r.rest)}(r),function q_(n){return new nf(n).contentType}(r))}throw Kv()}function ap(n){const r=[];for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);o<=127?r.push(o):o<=2047?r.push(192|o>>6,128|63&o):55296==(64512&o)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(o=65536|(1023&o)<<10|1023&n.charCodeAt(++t),r.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):r.push(239,191,189):56320==(64512&o)?r.push(239,191,189):r.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(r)}function lp(n,r){switch(n){case fa.BASE64:{const d=-1!==r.indexOf("-"),m=-1!==r.indexOf("_");if(d||m)throw Pu(n,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case fa.BASE64URL:{const d=-1!==r.indexOf("+"),m=-1!==r.indexOf("/");if(d||m)throw Pu(n,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");r=r.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Fg(n){if(typeof atob>"u")throw function ip(n){return new Gi(Si.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(r)}catch(d){throw d.message.includes("polyfill")?d:Pu(n,"Invalid character found")}const o=new Uint8Array(t.length);for(let d=0;d<t.length;d++)o[d]=t.charCodeAt(d);return o}class nf{constructor(r){this.base64=!1,this.contentType=null;const t=r.match(/^data:([^,]+)?,/);if(null===t)throw Pu(fa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;null!=o&&(this.base64=function Y_(n,r){return n.length>=r.length&&n.substring(n.length-r.length)===r}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=r.substring(r.indexOf(",")+1)}}class nl{constructor(r,t){let o=0,d="";Og(r)?(this.data_=r,o=r.size,d=r.type):r instanceof ArrayBuffer?(t?this.data_=new Uint8Array(r):(this.data_=new Uint8Array(r.byteLength),this.data_.set(new Uint8Array(r))),o=this.data_.length):r instanceof Uint8Array&&(t?this.data_=r:(this.data_=new Uint8Array(r.length),this.data_.set(r)),o=r.length),this.size_=o,this.type_=d}size(){return this.size_}type(){return this.type_}slice(r,t){if(Og(this.data_)){const d=function $b(n,r,t){return n.webkitSlice?n.webkitSlice(r,t):n.mozSlice?n.mozSlice(r,t):n.slice?n.slice(r,t):null}(this.data_,r,t);return null===d?null:new nl(d)}{const o=new Uint8Array(this.data_.buffer,r,t-r);return new nl(o,!0)}}static getBlob(...r){if(Ng()){const t=r.map(o=>o instanceof nl?o.data_:o);return new nl(K_.apply(null,t))}{const t=r.map(D=>eh(D)?tf(fa.RAW,D).data:D.data_);let o=0;t.forEach(D=>{o+=D.byteLength});const d=new Uint8Array(o);let m=0;return t.forEach(D=>{for(let x=0;x<D.length;x++)d[m++]=D[x]}),new nl(d,!0)}}uploadData(){return this.data_}}function rf(n){let r;try{r=JSON.parse(n)}catch{return null}return function j_(n){return"object"==typeof n&&!Array.isArray(n)}(r)?r:null}function id(n){const r=n.lastIndexOf("/",n.length-2);return-1===r?n:n.slice(r+1)}function Bg(n,r){return r}class jo{constructor(r,t,o,d){this.server=r,this.local=t||r,this.writable=!!o,this.xform=d||Bg}}let nh=null;function rh(){if(nh)return nh;const n=[];n.push(new jo("bucket")),n.push(new jo("generation")),n.push(new jo("metageneration")),n.push(new jo("name","fullPath",!0));const t=new jo("name");t.xform=function r(m,D){return function Zv(n){return!eh(n)||n.length<2?n:id(n)}(D)},n.push(t);const d=new jo("size");return d.xform=function o(m,D){return void 0!==D?Number(D):D},n.push(d),n.push(new jo("timeCreated")),n.push(new jo("updated")),n.push(new jo("md5Hash",null,!0)),n.push(new jo("cacheControl",null,!0)),n.push(new jo("contentDisposition",null,!0)),n.push(new jo("contentEncoding",null,!0)),n.push(new jo("contentLanguage",null,!0)),n.push(new jo("contentType",null,!0)),n.push(new jo("metadata","customMetadata",!0)),nh=n,nh}function Q_(n,r,t){const o=rf(r);return null===o?null:function Z_(n,r,t){const o={type:"file"},d=t.length;for(let m=0;m<d;m++){const D=t[m];o[D.local]=D.xform(o,r[D.server])}return function Qv(n,r){Object.defineProperty(n,"ref",{get:function t(){const m=new ks(n.bucket,n.fullPath);return r._makeStorageReference(m)}})}(o,n),o}(n,o,t)}function Vg(n,r){const t={},o=r.length;for(let d=0;d<o;d++){const m=r[d];m.writable&&(t[m.server]=n[m.local])}return JSON.stringify(t)}const Gg="prefixes",ih="items";class ou{constructor(r,t,o,d){this.url=r,this.method=t,this.handler=o,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Na(n){if(!n)throw Kv()}function er(n,r){return function t(o,d){const m=Q_(n,d,r);return Na(null!==m),m}}function Vl(n){return function r(t,o){let d;return d=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Hb(){return new Gi(Si.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Zh(){return new Gi(Si.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function bE(n){return new Gi(Si.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function G_(n){return new Gi(Si.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):o,d.status=t.getStatus(),d.serverResponse=o.serverResponse,d}}function cp(n){const r=Vl(n);return function t(o,d){let m=r(o,d);return 404===o.getStatus()&&(m=function Tg(n){return new Gi(Si.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),m.serverResponse=d.serverResponse,m}}function ji(n,r,t){const d=Bl(r.fullServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,x=new ou(d,"GET",er(n,t),D);return x.errorHandler=cp(r),x}function Ho(n,r,t,o,d){const m={};m.prefix=r.isRoot?"":r.path+"/",t&&t.length>0&&(m.delimiter=t),o&&(m.pageToken=o),d&&(m.maxResults=d);const x=Bl(r.bucketOnlyServerUrl(),n.host,n._protocol),W=n.maxOperationRetryTime,ie=new ou(x,"GET",function jg(n,r){return function t(o,d){const m=function Xv(n,r,t){const o=rf(t);return null===o?null:function pc(n,r,t){const o={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Gg])for(const d of t[Gg]){const m=d.replace(/\/$/,""),D=n._makeStorageReference(new ks(r,m));o.prefixes.push(D)}if(t[ih])for(const d of t[ih]){const m=n._makeStorageReference(new ks(r,d.name));o.items.push(m)}return o}(n,r,o)}(n,r,d);return Na(null!==m),m}}(n,r.bucket),W);return ie.urlParams=m,ie.errorHandler=Vl(r),ie}function Hg(n,r,t){const o=Object.assign({},t);return o.fullPath=n.path,o.size=r.size(),o.contentType||(o.contentType=function X_(n,r){return n&&n.contentType||r&&r.type()||"application/octet-stream"}(null,r)),o}class sh{constructor(r,t,o,d){this.current=r,this.total=t,this.finalized=!!o,this.metadata=d||null}}function ey(n,r){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Na(!1)}return Na(!!t&&-1!==(r||["active"]).indexOf(t)),t}const Fs={STATE_CHANGED:"state_changed"},$o={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ty(n){switch(n){case"running":case"pausing":case"canceling":return $o.RUNNING;case"paused":return $o.PAUSED;case"success":return $o.SUCCESS;case"canceled":return $o.CANCELED;default:return $o.ERROR}}class r0{constructor(r,t,o){if(function Ag(n){return"function"==typeof n}(r)||null!=t||null!=o)this.next=r,this.error=t??void 0,this.complete=o??void 0;else{const m=r;this.next=m.next,this.error=m.error,this.complete=m.complete}}}function af(n){return(...r)=>{Promise.resolve().then(()=>n(...r))}}let $g=null;class ny{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xu.NO_ERROR,this.sendPromise_=new Promise(r=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xu.ABORT,r()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xu.NETWORK_ERROR,r()}),this.xhr_.addEventListener("load",()=>{r()})})}send(r,t,o,d){if(this.sent_)throw Ul("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,r,!0),void 0!==d)for(const m in d)d.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,d[m].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ul("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ul("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ul("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ul("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(r){return this.xhr_.getResponseHeader(r)}addUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",r)}removeUploadProgressListener(r){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",r)}}class ku extends ny{initXhr(){this.xhr_.responseType="text"}}function lu(){return $g?$g():new ku}class oh{constructor(r,t,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=r,this._blob=t,this._metadata=o,this._mappings=rh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=d=>{if(this._request=void 0,this._chunkMultiplier=1,d._codeEquals(Si.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const m=this.isExponentialBackoffExpired();if(Rg(d.status,[])){if(!m)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();d=Qh()}this._error=d,this._transition("error")}},this._metadataErrorHandler=d=>{this._request=void 0,d._codeEquals(Si.CANCELED)?this.completeTransitions_():(this._error=d,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((d,m)=>{this._resolve=d,this._reject=m,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const r=this._transferred;return t=>this._updateProgress(r+t)}_shouldDoResumable(r){return r.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(r){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,o])=>{switch(this._state){case"running":r(t,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((r,t)=>{const o=function n0(n,r,t,o,d){const m=r.bucketOnlyServerUrl(),D=Hg(r,o,d),x={name:D.fullPath},U=Bl(m,n.host,n._protocol),ie={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":D.contentType,"Content-Type":"application/json; charset=utf-8"},Ee=Vg(D,t),Tt=new ou(U,"POST",function Ge(Vt){let Xt;ey(Vt);try{Xt=Vt.getResponseHeader("X-Goog-Upload-URL")}catch{Na(!1)}return Na(eh(Xt)),Xt},n.maxUploadRetryTime);return Tt.urlParams=x,Tt.headers=ie,Tt.body=Ee,Tt.errorHandler=Vl(r),Tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),d=this._ref.storage._makeRequest(o,lu,r,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._uploadUrl=m,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const r=this._uploadUrl;this._resolveToken((t,o)=>{const d=function Ri(n,r,t,o){const U=new ou(t,"POST",function m(W){const ie=ey(W,["active","final"]);let Ee=null;try{Ee=W.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Na(!1)}Ee||Na(!1);const De=Number(Ee);return Na(!isNaN(De)),new sh(De,o.size(),"final"===ie)},n.maxUploadRetryTime);return U.headers={"X-Goog-Upload-Command":"query"},U.errorHandler=Vl(r),U}(this._ref.storage,this._ref._location,r,this._blob),m=this._ref.storage._makeRequest(d,lu,t,o);this._request=m,m.getPromise().then(D=>{this._request=void 0,this._updateProgress(D.current),this._needToFetchStatus=!1,D.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const r=262144*this._chunkMultiplier,t=new sh(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((d,m)=>{let D;try{D=function wE(n,r,t,o,d,m,D,x){const U=new sh(0,0);if(D?(U.current=D.current,U.total=D.total):(U.current=0,U.total=o.size()),o.size()!==U.total)throw function Xh(){return new Gi(Si.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const W=U.total-U.current;let ie=W;d>0&&(ie=Math.min(ie,d));const Ee=U.current;let Ge="";Ge=0===ie?"finalize":W===ie?"upload, finalize":"upload";const Tt={"X-Goog-Upload-Command":Ge,"X-Goog-Upload-Offset":`${U.current}`},Vt=o.slice(Ee,Ee+ie);if(null===Vt)throw td();const tr=new ou(t,"POST",function Xt(zn,Er){const xr=ey(zn,["active","final"]),xi=U.current+ie,fi=o.size();let po;return po="final"===xr?er(r,m)(zn,Er):null,new sh(xi,fi,"final"===xr,po)},r.maxUploadRetryTime);return tr.headers=Tt,tr.body=Vt.uploadData(),tr.progressCallback=x||null,tr.errorHandler=Vl(n),tr}(this._ref._location,this._ref.storage,o,this._blob,r,this._mappings,t,this._makeProgressCallback())}catch(U){return this._error=U,void this._transition("error")}const x=this._ref.storage._makeRequest(D,lu,d,m,!1);this._request=x,x.getPromise().then(U=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(U.current),U.finalized?(this._metadata=U.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((r,t)=>{const o=ji(this._ref.storage,this._ref._location,this._mappings),d=this._ref.storage._makeRequest(o,lu,r,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((r,t)=>{const o=function t0(n,r,t,o,d){const m=r.bucketOnlyServerUrl(),D={"X-Goog-Upload-Protocol":"multipart"},U=function x(){let tr="";for(let zn=0;zn<2;zn++)tr+=Math.random().toString().slice(2);return tr}();D["Content-Type"]="multipart/related; boundary="+U;const W=Hg(r,o,d),ie=Vg(W,t),Ge=nl.getBlob("--"+U+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ie+"\r\n--"+U+"\r\nContent-Type: "+W.contentType+"\r\n\r\n",o,"\r\n--"+U+"--");if(null===Ge)throw td();const Tt={name:W.fullPath},Vt=Bl(m,n.host,n._protocol),Un=n.maxUploadRetryTime,Bn=new ou(Vt,"POST",er(n,t),Un);return Bn.urlParams=Tt,Bn.headers=D,Bn.body=Ge.uploadData(),Bn.errorHandler=Vl(r),Bn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),d=this._ref.storage._makeRequest(o,lu,r,t);this._request=d,d.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(r){const t=this._transferred;this._transferred=r,this._transferred!==t&&this._notifyObservers()}_transition(r){if(this._state!==r)switch(r){case"canceling":case"pausing":this._state=r,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=r,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=r,this._notifyObservers();break;case"canceled":this._error=Sg(),this._state=r,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const r=ty(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:r,metadata:this._metadata,task:this,ref:this._ref}}on(r,t,o,d){const m=new r0(t||void 0,o||void 0,d||void 0);return this._addObserver(m),()=>{this._removeObserver(m)}}then(r,t){return this._promise.then(r,t)}catch(r){return this.then(null,r)}_addObserver(r){this._observers.push(r),this._notifyObserver(r)}_removeObserver(r){const t=this._observers.indexOf(r);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let r=!0;switch(ty(this._state)){case $o.SUCCESS:af(this._resolve.bind(null,this.snapshot))();break;case $o.CANCELED:case $o.ERROR:af(this._reject.bind(null,this._error))();break;default:r=!1}r&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(r){switch(ty(this._state)){case $o.RUNNING:case $o.PAUSED:r.next&&af(r.next.bind(r,this.snapshot))();break;case $o.SUCCESS:r.complete&&af(r.complete.bind(r))();break;default:r.error&&af(r.error.bind(r,this._error))()}}resume(){const r="paused"===this._state||"pausing"===this._state;return r&&this._transition("running"),r}pause(){const r="running"===this._state;return r&&this._transition("pausing"),r}cancel(){const r="running"===this._state||"pausing"===this._state;return r&&this._transition("canceling"),r}}class sd{constructor(r,t){this._service=r,this._location=t instanceof ks?t:ks.makeFromUrl(t,r.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(r,t){return new sd(r,t)}get root(){const r=new ks(this._location.bucket,"");return this._newRef(this._service,r)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return id(this._location.path)}get storage(){return this._service}get parent(){const r=function Ug(n){if(0===n.length)return null;const r=n.lastIndexOf("/");return-1===r?"":n.slice(0,r)}(this._location.path);if(null===r)return null;const t=new ks(this._location.bucket,r);return new sd(this._service,t)}_throwIfRoot(r){if(""===this._location.path)throw Xd(r)}}function s0(n,r,t){return hp.apply(this,arguments)}function hp(){return(hp=(0,Qd.Z)(function*(n,r,t){const d=yield ry(n,{pageToken:t});r.prefixes.push(...d.prefixes),r.items.push(...d.items),null!=d.nextPageToken&&(yield s0(n,r,d.nextPageToken))})).apply(this,arguments)}function ry(n,r){null!=r&&"number"==typeof r.maxResults&&Mg("options.maxResults",1,1e3,r.maxResults);const t=r||{},o=Ho(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(o,lu)}function Uu(n){n._throwIfRoot("getDownloadURL");const r=function J_(n,r,t){const d=Bl(r.fullServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,x=new ou(d,"GET",function e0(n,r){return function t(o,d){const m=Q_(n,d,r);return Na(null!==m),function Jv(n,r,t,o){const d=rf(r);if(null===d||!eh(d.downloadTokens))return null;const m=d.downloadTokens;if(0===m.length)return null;const D=encodeURIComponent;return m.split(",").map(W=>{const Ee=n.fullPath;return Bl("/b/"+D(n.bucket)+"/o/"+D(Ee),t,o)+H_({alt:"media",token:W})})[0]}(m,d,n.host,n._protocol)}}(n,t),D);return x.errorHandler=cp(r),x}(n.storage,n._location,rh());return n.storage.makeRequestWithTokens(r,lu).then(t=>{if(null===t)throw function Qs(){return new Gi(Si.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function lh(n,r){const t=function Yv(n,r){const t=r.split("/").filter(o=>o.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,r),o=new ks(n._location.bucket,t);return new sd(n.storage,o)}function gp(n,r){if(n instanceof uf){const t=n;if(null==t._bucket)throw function Io(){return new Gi(Si.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zv+"' property when initializing the app?")}();const o=new sd(t,t._bucket);return null!=r?gp(o,r):o}return void 0!==r?lh(n,r):n}function a0(n,r){if(r&&function iy(n){return/^[A-Za-z]+:\/\//.test(n)}(r)){if(n instanceof uf)return function pp(n,r){return new sd(n,r)}(n,r);throw su("To use ref(service, url), the first argument must be a Storage instance.")}return gp(n,r)}function sy(n,r){const t=r?.[zv];return null==t?null:ks.makeFromBucketSpec(t,n)}class uf{constructor(r,t,o,d,m){this.app=r,this._authProvider=t,this._appCheckProvider=o,this._url=d,this._firebaseVersion=m,this._bucket=null,this._host=Cg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=d?ks.makeFromBucketSpec(d,this._host):sy(this._host,this.app.options)}get host(){return this._host}set host(r){this._host=r,this._bucket=null!=this._url?ks.makeFromBucketSpec(this._url,r):sy(r,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(r){Mg("time",0,Number.POSITIVE_INFINITY,r),this._maxUploadRetryTime=r}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(r){Mg("time",0,Number.POSITIVE_INFINITY,r),this._maxOperationRetryTime=r}_getAuthToken(){var r=this;return(0,Qd.Z)(function*(){if(r._overrideAuthToken)return r._overrideAuthToken;const t=r._authProvider.getImmediate({optional:!0});if(t){const o=yield t.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var r=this;return(0,Qd.Z)(function*(){const t=r._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(r=>r.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(r){return new sd(this,r)}_makeRequest(r,t,o,d,m=!0){if(this._deleted)return new nd(fc());{const D=function sp(n,r,t,o,d,m,D=!0){const x=H_(n.urlParams),U=n.url+x,W=Object.assign({},n.headers);return function z_(n,r){r&&(n["X-Firebase-GMPID"]=r)}(W,r),function $_(n,r){null!==r&&r.length>0&&(n.Authorization="Firebase "+r)}(W,t),function kg(n,r){n["X-Firebase-Storage-Version"]="webjs/"+(r??"AppManager")}(W,m),function W_(n,r){null!==r&&(n["X-Firebase-AppCheck"]=r)}(W,o),new Pg(U,n.method,W,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,d,D)}(r,this._appId,o,d,t,this._firebaseVersion,m);return this._requests.add(D),D.getPromise().then(()=>this._requests.delete(D),()=>this._requests.delete(D)),D}}makeRequestWithTokens(r,t){var o=this;return(0,Qd.Z)(function*(){const[d,m]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(r,t,d,m).getPromise()})()}}const Kg="@firebase/storage";function oy(n,r){return a0(n=(0,le.m9)(n),r)}function cf(n,{instanceIdentifier:r}){const t=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),d=n.getProvider("app-check-internal");return new uf(t,o,d,r,Ll.SDK_VERSION)}!function DE(){(0,Ll._registerComponent)(new Jd.wA("storage",cf,"PUBLIC").setMultipleInstances(!0)),(0,Ll.registerVersion)(Kg,"0.11.2",""),(0,Ll.registerVersion)(Kg,"0.11.2","esm2017")}();class ly{constructor(r,t,o){this._delegate=r,this.task=t,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class yp{constructor(r,t){this._delegate=r,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ly(this._delegate.snapshot,this,this._ref)}then(r,t){return this._delegate.then(o=>{if(r)return r(new ly(o,this,this._ref))},t)}on(r,t,o,d){let m;return t&&(m="function"==typeof t?D=>t(new ly(D,this,this._ref)):{next:t.next?D=>t.next(new ly(D,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(r,m,o||void 0,d||void 0)}}class uy{constructor(r,t){this._delegate=r,this._service=t}get prefixes(){return this._delegate.prefixes.map(r=>new ml(r,this._service))}get items(){return this._delegate.items.map(r=>new ml(r,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ml{constructor(r,t){this._delegate=r,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(r){const t=function ay(n,r){return lh(n,r)}(this._delegate,r);return new ml(t,this.storage)}get root(){return new ml(this._delegate.root,this.storage)}get parent(){const r=this._delegate.parent;return null==r?null:new ml(r,this.storage)}put(r,t){return this._throwIfRoot("put"),new yp(function qb(n,r,t){return function ah(n,r,t){return n._throwIfRoot("uploadBytesResumable"),new oh(n,new nl(r),t)}(n=(0,le.m9)(n),r,t)}(this._delegate,r,t),this)}putString(r,t=fa.RAW,o){this._throwIfRoot("putString");const d=tf(t,r),m=Object.assign({},o);return null==m.contentType&&null!=d.contentType&&(m.contentType=d.contentType),new yp(new oh(this._delegate,new nl(d.data,!0),m),this)}listAll(){return function _p(n){return function dp(n){const r={prefixes:[],items:[]};return s0(n,r).then(()=>r)}(n=(0,le.m9)(n))}(this._delegate).then(r=>new uy(r,this.storage))}list(r){return function c0(n,r){return ry(n=(0,le.m9)(n),r)}(this._delegate,r||void 0).then(t=>new uy(t,this.storage))}getMetadata(){return function Yg(n){return function fp(n){n._throwIfRoot("getMetadata");const r=ji(n.storage,n._location,rh());return n.storage.makeRequestWithTokens(r,lu)}(n=(0,le.m9)(n))}(this._delegate)}updateMetadata(r){return function Zg(n,r){return function o0(n,r){n._throwIfRoot("updateMetadata");const t=function zb(n,r,t,o){const m=Bl(r.fullServerUrl(),n.host,n._protocol),x=Vg(t,o),W=n.maxOperationRetryTime,ie=new ou(m,"PATCH",er(n,o),W);return ie.headers={"Content-Type":"application/json; charset=utf-8"},ie.body=x,ie.errorHandler=cp(r),ie}(n.storage,n._location,r,rh());return n.storage.makeRequestWithTokens(t,lu)}(n=(0,le.m9)(n),r)}(this._delegate,r)}getDownloadURL(){return function Yb(n){return Uu(n=(0,le.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Qg(n){return function zg(n){n._throwIfRoot("deleteObject");const r=function _s(n,r){const o=Bl(r.fullServerUrl(),n.host,n._protocol),x=new ou(o,"DELETE",function D(U,W){},n.maxOperationRetryTime);return x.successCodes=[200,204],x.errorHandler=cp(r),x}(n.storage,n._location);return n.storage.makeRequestWithTokens(r,lu)}(n=(0,le.m9)(n))}(this._delegate)}_throwIfRoot(r){if(""===this._delegate._location.path)throw Xd(r)}}class cy{constructor(r,t){this.app=r,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(r){if(dy(r))throw su("ref() expected a child path but got a URL, use refFromURL instead.");return new ml(oy(this._delegate,r),this)}refFromURL(r){if(!dy(r))throw su("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ks.makeFromUrl(r,this._delegate.host)}catch{throw su("refFromUrl() expected a valid full URL but got an invalid one.")}return new ml(oy(this._delegate,r),this)}setMaxUploadRetryTime(r){this._delegate.maxUploadRetryTime=r}setMaxOperationRetryTime(r){this._delegate.maxOperationRetryTime=r}useEmulator(r,t,o={}){!function _c(n,r,t,o={}){!function Wg(n,r,t,o={}){n.host=`${r}:${t}`,n._protocol="http";const{mockUserToken:d}=o;d&&(n._overrideAuthToken="string"==typeof d?d:(0,le.Sg)(d,n.app.options.projectId))}(n,r,t,o)}(this._delegate,r,t,o)}}function dy(n){return/^[A-Za-z]+:\/\//.test(n)}function bp(n,{instanceIdentifier:r}){const t=n.getProvider("app-compat").getImmediate(),o=n.getProvider("storage").getImmediate({identifier:r});return new cy(t,o)}!function hy(n){const r={TaskState:$o,TaskEvent:Fs,StringFormat:fa,Storage:cy,Reference:ml};n.INTERNAL.registerComponent(new Jd.wA("storage-compat",bp,"PUBLIC").setServiceProps(r).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Ig.Z);var fy=j(6217),yc=j(9260);function py(n){const r=function f0(n){return new Ce.y(r=>{const t=D=>r.next(D);t(n.snapshot);const m=n.on("state_changed",t);return n.then(D=>{t(D),r.complete()},D=>{t(n.snapshot),(D=>{r.error(D)})(D)}),function(){m()}}).pipe(function jb(n,r=ft.z){return(0,Dr.e)((t,o)=>{let d=null,m=null,D=null;const x=()=>{if(d){d.unsubscribe(),d=null;const W=m;m=null,o.next(W)}};function U(){const W=D+n,ie=r.now();if(ie<W)return d=this.schedule(void 0,W-ie),void o.add(d);x()}t.subscribe((0,nt.x)(o,W=>{m=W,D=r.now(),d||(d=r.schedule(U,n),o.add(d))},()=>{x(),o.complete()},void 0,()=>{m=d=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>r,percentageChanges:()=>r.pipe((0,qn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Bu(n){return{getDownloadURL:()=>(0,Ke.of)(void 0).pipe(Aa.fc,(0,An.w)(()=>n.getDownloadURL()),Aa.iC),getMetadata:()=>(0,Ke.of)(void 0).pipe(Aa.fc,(0,An.w)(()=>n.getMetadata()),Aa.iC),delete:()=>(0,sn.D)(n.delete()),child:r=>Bu(n.child(r)),updateMetadata:r=>(0,sn.D)(n.updateMetadata(r)),put:(r,t)=>py(n.put(r,t)),putString:(r,t,o)=>py(n.putString(r,t,o)),list:r=>(0,sn.D)(n.list(r)),listAll:()=>(0,sn.D)(n.listAll())}}const Zb=new h.OlP("angularfire2.storageBucket"),em=new h.OlP("angularfire2.storage.maxUploadRetryTime"),p0=new h.OlP("angularfire2.storage.maxOperationRetryTime"),wp=new h.OlP("angularfire2.storage.use-emulator");let g0=(()=>{class n{constructor(t,o,d,m,D,x,U,W,ie,Ee){const De=(0,Ru.on)(t,D,o);this.storage=(0,Ru.cc)(`${De.name}.storage.${d}`,"AngularFireStorage",De.name,()=>{const Ge=D.runOutsideAngular(()=>De.storage(d||void 0)),Tt=ie;return Tt&&Ge.useEmulator(...Tt),U&&Ge.setMaxUploadRetryTime(U),W&&Ge.setMaxOperationRetryTime(W),Ge},[U,W])}ref(t){return Bu(this.storage.ref(t))}refFromURL(t){return Bu(this.storage.refFromURL(t))}upload(t,o,d){return Bu(this.storage.ref(t)).put(o,d)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ru.Dh),h.LFG(Ru.xv,8),h.LFG(Zb,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Aa.HU),h.LFG(em,8),h.LFG(p0,8),h.LFG(wp,8),h.LFG(fy.nm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Gn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Qb=(()=>{class n{constructor(){yc.Z.registerVersion("angularfire",Aa.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[g0],imports:[Gn]}),n})();var IE=j(3101),CE=j(3099),_l=j(5026);j(9568);var yl=j(1877);const rs="@firebase/database";let tm="";function Vu(n){tm=n}class Jb{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,t){null==t?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,le.Wl)(t))}get(r){const t=this.domStorage_.getItem(this.prefixedName_(r));return null==t?null:(0,le.cI)(t)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class _0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,t){null==t?delete this.cache_[r]:this.cache_[r]=t}get(r){return(0,le.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const gy=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const r=window[n];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new Jb(r)}}catch{}return new _0},od=gy("localStorage"),nm=gy("sessionStorage"),ch=new yl.Yd("@firebase/database"),my=function(){let n=1;return function(){return n++}}(),y0=function(n){const r=(0,le.dS)(n),t=new le.gQ;t.update(r);const o=t.digest();return le.US.encodeByteArray(o)},bc=function(...n){let r="";for(let t=0;t<n.length;t++){const o=n[t];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=bc.apply(null,o):r+="object"==typeof o?(0,le.Wl)(o):o,r+=" "}return r};let ad=null,v0=!0;const dh=function(n,r){(0,le.hu)(!r||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ch.logLevel=yl.in.VERBOSE,ad=ch.log.bind(ch),r&&nm.set("logging_enabled",!0)):"function"==typeof n?ad=n:(ad=null,nm.remove("logging_enabled"))},is=function(...n){if(!0===v0&&(v0=!1,null===ad&&!0===nm.get("logging_enabled")&&dh(!0)),ad){const r=bc.apply(null,n);ad(r)}},Ep=function(n){return function(...r){is(n,...r)}},rm=function(...n){const r="FIREBASE INTERNAL ERROR: "+bc(...n);ch.error(r)},cu=function(...n){const r=`FIREBASE FATAL ERROR: ${bc(...n)}`;throw ch.error(r),new Error(r)},zo=function(...n){const r="FIREBASE WARNING: "+bc(...n);ch.warn(r)},ld=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ud="[MIN_NAME]",wc="[MAX_NAME]",cd=function(n,r){if(n===r)return 0;if(n===ud||r===wc)return-1;if(r===ud||n===wc)return 1;{const t=C0(n),o=C0(r);return null!==t?null!==o?t-o==0?n.length-r.length:t-o:-1:null!==o?1:n<r?-1:1}},b0=function(n,r){return n===r?0:n<r?-1:1},df=function(n,r){if(r&&n in r)return r[n];throw new Error("Missing required key ("+n+") in object: "+(0,le.Wl)(r))},w0=function(n){if("object"!=typeof n||null===n)return(0,le.Wl)(n);const r=[];for(const o in n)r.push(o);r.sort();let t="{";for(let o=0;o<r.length;o++)0!==o&&(t+=","),t+=(0,le.Wl)(r[o]),t+=":",t+=w0(n[r[o]]);return t+="}",t},E0=function(n,r){const t=n.length;if(t<=r)return[n];const o=[];for(let d=0;d<t;d+=r)o.push(n.substring(d,d+r>t?t:d+r));return o};function fo(n,r){for(const t in n)n.hasOwnProperty(t)&&r(t,n[t])}const D0=function(n){(0,le.hu)(!ld(n),"Invalid JSON number");const o=1023;let d,m,D,x,U;0===n?(m=0,D=0,d=1/n==-1/0?1:0):(d=n<0,(n=Math.abs(n))>=Math.pow(2,1-o)?(x=Math.min(Math.floor(Math.log(n)/Math.LN2),o),m=x+o,D=Math.round(n*Math.pow(2,52-x)-Math.pow(2,52))):(m=0,D=Math.round(n/Math.pow(2,-1074))));const W=[];for(U=52;U;U-=1)W.push(D%2?1:0),D=Math.floor(D/2);for(U=11;U;U-=1)W.push(m%2?1:0),m=Math.floor(m/2);W.push(d?1:0),W.reverse();const ie=W.join("");let Ee="";for(U=0;U<64;U+=8){let De=parseInt(ie.substr(U,8),2).toString(16);1===De.length&&(De="0"+De),Ee+=De}return Ee.toLowerCase()},tw=new RegExp("^-?(0*)\\d{1,10}$"),C0=function(n){if(tw.test(n)){const r=Number(n);if(r>=-2147483648&&r<=2147483647)return r}return null},pf=function(n){try{n()}catch(r){setTimeout(()=>{throw zo("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},_y=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hl=function(n,r){const t=setTimeout(n,r);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class nw{constructor(r,t){this.appName_=r,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(o=>this.appCheck=o)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((t,o)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(t,o):t(null)},0)})}addTokenChangeListener(r){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(o=>o.addTokenListener(r))}notifyForInvalidToken(){zo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class T0{constructor(r,t,o){this.appName_=r,this.firebaseOptions_=t,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(d=>this.auth_=d)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(t=>t&&"auth/token-not-initialized"===t.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,o)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(t,o):t(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(t=>t.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(t=>t.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zo(r)}}let gf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,om="websocket",dd="long_polling";class Ec{constructor(r,t,o,d,m=!1,D="",x=!1,U=!1){this.secure=t,this.namespace=o,this.webSocketOnly=d,this.nodeAdmin=m,this.persistenceKey=D,this.includeNamespaceInQueryParams=x,this.isUsingEmulator=U,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=od.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&od.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function hd(n,r,t){let o;if((0,le.hu)("string"==typeof r,"typeof type must == string"),(0,le.hu)("object"==typeof t,"typeof params must == object"),r===om)o=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(r!==dd)throw new Error("Unknown connection type: "+r);o=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function am(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const d=[];return fo(t,(m,D)=>{d.push(m+"="+D)}),o+d.join("&")}class vy{constructor(){this.counters_={}}incrementCounter(r,t=1){(0,le.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=t}get(){return(0,le.p$)(this.counters_)}}const by={},lm={};function du(n){const r=n.toString();return by[r]||(by[r]=new vy),by[r]}class iw{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,t){this.closeAfterResponse=r,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,t){for(this.pendingResponses[r]=t;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let d=0;d<o.length;++d)o[d]&&pf(()=>{this.onMessage_(o[d])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hu{constructor(r,t,o,d,m,D,x){this.connId=r,this.repoInfo=t,this.applicationId=o,this.appCheckToken=d,this.authToken=m,this.transportSessionId=D,this.lastSessionId=x,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ep(r),this.stats_=du(t),this.urlFn=U=>(this.appCheckToken&&(U.ac=this.appCheckToken),hd(t,dd,U))}open(r,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new iw(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,le.Yr)()||"complete"===document.readyState)n();else{let r=!1;const t=function(){document.body?r||(r=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hm((...m)=>{const[D,x,U,W,ie]=m;if(this.incrementIncomingBytes_(m),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===D)this.id=x,this.password=U;else{if("close"!==D)throw new Error("Unrecognized command received: "+D);x?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(x,()=>{this.onClosed_()})):this.onClosed_()}},(...m)=>{const[D,x]=m;this.incrementIncomingBytes_(m),this.myPacketOrderer.handleResponse(D,x)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&mf.test(location.hostname)&&(o.r="f");const d=this.urlFn(o);this.log_("Connecting via long-poll to "+d),this.scriptTagHolder.addTag(d,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hu.forceAllow_=!0}static forceDisallow(){Hu.forceDisallow_=!0}static isAvailable(){return!((0,le.Yr)()||!Hu.forceAllow_&&(Hu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const t=(0,le.Wl)(r);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const o=(0,le.h$)(t),d=E0(o,1840);for(let m=0;m<d.length;m++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,d.length,d[m]),this.curSegmentNum++}addDisconnectPingFrame(r,t){if((0,le.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=r,o.pw=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const t=(0,le.Wl)(r).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hm{constructor(r,t,o,d){if(this.onDisconnect=o,this.urlFn=d,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,le.Yr)())this.commandCB=r,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=my(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hm.createIFrame_();let m="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(m='<script>document.domain="'+document.domain+'";<\/script>');const D="<html><body>"+m+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(D),this.myIFrame.doc.close()}catch(x){is("frame writing exception"),x.stack&&is(x.stack),is(x)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||is("No IE domain setting required")}catch{const o=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,t){for(this.myID=r,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let t=this.urlFn(r),o="",d=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const D=this.pendingSegs.shift();o=o+"&seg"+d+"="+D.seg+"&ts"+d+"="+D.ts+"&d"+d+"="+D.d,d++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(r,t,o){this.pendingSegs.push({seg:r,ts:t,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(r,t){this.outstandingRequests.add(t);const o=()=>{this.outstandingRequests.delete(t),this.newRequest_()},d=setTimeout(o,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(d),o()})}addTag(r,t){(0,le.Yr)()?this.doNodeLongPoll(r,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=r,o.onload=o.onreadystatechange=function(){const d=o.readyState;(!d||"loaded"===d||"complete"===d)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),t())},o.onerror=()=>{is("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}let e=null;typeof MozWebSocket<"u"?e=MozWebSocket:typeof WebSocket<"u"&&(e=WebSocket);let i=(()=>{class n{constructor(t,o,d,m,D,x,U){this.connId=t,this.applicationId=d,this.appCheckToken=m,this.authToken=D,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ep(this.connId),this.stats_=du(o),this.connURL=n.connectionURL_(o,x,U,m,d),this.nodeAdmin=o.nodeAdmin}static connectionURL_(t,o,d,m,D){const x={v:"5"};return!(0,le.Yr)()&&typeof location<"u"&&location.hostname&&mf.test(location.hostname)&&(x.r="f"),o&&(x.s=o),d&&(x.ls=d),m&&(x.ac=m),D&&(x.p=D),hd(t,om,x)}open(t,o){this.onDisconnect=o,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,od.set("previous_websocket_failure",!0);try{let d;if((0,le.Yr)()){d={headers:{"User-Agent":`Firebase/5/${tm}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const D=process.env,x=0===this.connURL.indexOf("wss://")?D.HTTPS_PROXY||D.https_proxy:D.HTTP_PROXY||D.http_proxy;x&&(d.proxy={origin:x})}this.mySock=new e(this.connURL,[],d)}catch(d){this.log_("Error instantiating WebSocket.");const m=d.message||d.data;return m&&this.log_(m),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=d=>{this.handleIncomingFrame(d)},this.mySock.onerror=d=>{this.log_("WebSocket error.  Closing connection.");const m=d.message||d.data;m&&this.log_(m),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const d=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);d&&d.length>1&&parseFloat(d[1])<4.4&&(t=!0)}return!t&&null!==e&&!n.forceDisallow_}static previouslyFailed(){return od.isInMemoryStorage||!0===od.get("previous_websocket_failure")}markConnectionHealthy(){od.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const d=(0,le.cI)(o);this.onMessage(d)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,le.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const o=Number(t);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const o=t.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const d=this.extractFrameCount_(o);null!==d&&this.appendFrame_(d)}}send(t){this.resetKeepAlive();const o=(0,le.Wl)(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const d=E0(o,16384);d.length>1&&this.sendString_(String(d.length));for(let m=0;m<d.length;m++)this.sendString_(d[m])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),u=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Hu,i]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const o=i&&i.isAvailable();let d=o&&!i.previouslyFailed();if(t.webSocketOnly&&(o||zo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0),d)this.transports_=[i];else{const m=this.transports_=[];for(const D of n.ALL_TRANSPORTS)D&&D.isAvailable()&&m.push(D);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ss{constructor(r,t,o,d,m,D,x,U,W,ie){this.id=r,this.repoInfo_=t,this.applicationId_=o,this.appCheckToken_=d,this.authToken_=m,this.onMessage_=D,this.onReady_=x,this.onDisconnect_=U,this.onKill_=W,this.lastSessionId=ie,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ep("c:"+this.id+":"),this.transportManager_=new u(t),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,o)},Math.floor(0));const d=r.healthyTimeout||0;d>0&&(this.healthyTimeout_=Hl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(d)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return t=>{r===this.conn_?this.onConnectionLost_(t):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return t=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(t):r===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const t=r.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const t=df("t",r),o=df("d",r);if("c"===t)this.onSecondaryControl_(o);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const t=df("t",r),o=df("d",r);"c"===t?this.onControl_(o):"d"===t&&this.onDataMessage_(o)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const t=df("t",r);if("d"in r){const o=r.d;if("h"===t){const d=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(d.h=this.repoInfo_.host),this.onHandshake_(d)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let d=0;d<this.pendingDataMessages.length;++d)this.onDataMessage_(this.pendingDataMessages[d]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(o):"r"===t?this.onReset_(o):"e"===t?rm("Server Error: "+o):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rm("Unknown control packet command: "+t)}}onHandshake_(r){const t=r.ts,o=r.v,d=r.h;this.sessionId=r.s,this.repoInfo_.host=d,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==o&&zo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,o),Hl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,t){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(od.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fr{put(r,t,o,d){}merge(r,t,o,d){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,t,o){}onDisconnectMerge(r,t,o){}onDisconnectCancel(r,t){}reportStats(r){}}class os{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,le.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...t){if(Array.isArray(this.listeners_[r])){const o=[...this.listeners_[r]];for(let d=0;d<o.length;d++)o[d].callback.apply(o[d].context,t)}}on(r,t,o){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:t,context:o});const d=this.getInitialEvent(r);d&&t.apply(o,d)}off(r,t,o){this.validateEventType_(r);const d=this.listeners_[r]||[];for(let m=0;m<d.length;m++)if(d[m].callback===t&&(!o||o===d[m].context))return void d.splice(m,1)}validateEventType_(r){(0,le.hu)(this.allowedEvents_.find(t=>t===r),"Unknown event: "+r)}}class wr extends os{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,le.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wr}getInitialEvent(r){return(0,le.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}const Gr=32,Js=768;class Sr{constructor(r,t){if(void 0===t){this.pieces_=r.split("/");let o=0;for(let d=0;d<this.pieces_.length;d++)this.pieces_[d].length>0&&(this.pieces_[o]=this.pieces_[d],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=t}toString(){let r="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(r+="/"+this.pieces_[t]);return r||"/"}}function hi(){return new Sr("")}function Ar(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _f(n){return n.pieces_.length-n.pieceNum_}function Pi(n){let r=n.pieceNum_;return r<n.pieces_.length&&r++,new Sr(n.pieces_,r)}function SE(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ty(n,r=0){return n.pieces_.slice(n.pieceNum_+r)}function OE(n){if(n.pieceNum_>=n.pieces_.length)return null;const r=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)r.push(n.pieces_[t]);return new Sr(r,0)}function Ls(n,r){const t=[];for(let o=n.pieceNum_;o<n.pieces_.length;o++)t.push(n.pieces_[o]);if(r instanceof Sr)for(let o=r.pieceNum_;o<r.pieces_.length;o++)t.push(r.pieces_[o]);else{const o=r.split("/");for(let d=0;d<o.length;d++)o[d].length>0&&t.push(o[d])}return new Sr(t,0)}function Or(n){return n.pieceNum_>=n.pieces_.length}function vl(n,r){const t=Ar(n),o=Ar(r);if(null===t)return r;if(t===o)return vl(Pi(n),Pi(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+n+")")}function VD(n,r){const t=Ty(n,0),o=Ty(r,0);for(let d=0;d<t.length&&d<o.length;d++){const m=cd(t[d],o[d]);if(0!==m)return m}return t.length===o.length?0:t.length<o.length?-1:1}function R0(n,r){if(_f(n)!==_f(r))return!1;for(let t=n.pieceNum_,o=r.pieceNum_;t<=n.pieces_.length;t++,o++)if(n.pieces_[t]!==r.pieces_[o])return!1;return!0}function hu(n,r){let t=n.pieceNum_,o=r.pieceNum_;if(_f(n)>_f(r))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==r.pieces_[o])return!1;++t,++o}return!0}class NE{constructor(r,t){this.errorPrefix_=t,this.parts_=Ty(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,le.ug)(this.parts_[o]);ME(this)}}function ME(n){if(n.byteLength_>Js)throw new Error(n.errorPrefix_+"has a key path longer than "+Js+" bytes ("+n.byteLength_+").");if(n.parts_.length>Gr)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Gr+") or object contains a cycle "+Ip(n))}function Ip(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class uw extends os{constructor(){let r,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const o=!document[r];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new uw}getInitialEvent(r){return(0,le.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const Sy=1e3;let Oy,yf=(()=>{class n extends fr{constructor(t,o,d,m,D,x,U,W){if(super(),this.repoInfo_=t,this.applicationId_=o,this.onDataUpdate_=d,this.onConnectStatus_=m,this.onServerInfoUpdate_=D,this.authTokenProvider_=x,this.appCheckTokenProvider_=U,this.authOverride_=W,this.id=n.nextPersistentConnectionId_++,this.log_=Ep("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,W&&!(0,le.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uw.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&wr.getInstance().on("online",this.onOnline_,this)}sendRequest(t,o,d){const m=++this.requestNumber_,D={r:m,a:t,b:o};this.log_((0,le.Wl)(D)),(0,le.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(D),d&&(this.requestCBHash_[m]=d)}get(t){this.initConnection_();const o=new le.BH,m={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:x=>{const U=x.d;"ok"===x.s?o.resolve(U):o.reject(U)}};return this.outstandingGets_.push(m),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(t,o,d,m){this.initConnection_();const D=t._queryIdentifier,x=t._path.toString();this.log_("Listen called for "+x+" "+D),this.listens.has(x)||this.listens.set(x,new Map),(0,le.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,le.hu)(!this.listens.get(x).has(D),"listen() called twice for same path/queryId.");const U={onComplete:m,hashFn:o,query:t,tag:d};this.listens.get(x).set(D,U),this.connected_&&this.sendListen_(U)}sendGet_(t){const o=this.outstandingGets_[t];this.sendRequest("g",o.request,d=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(d)})}sendListen_(t){const o=t.query,d=o._path.toString(),m=o._queryIdentifier;this.log_("Listen on "+d+" for "+m);const D={p:d};t.tag&&(D.q=o._queryObject,D.t=t.tag),D.h=t.hashFn(),this.sendRequest("q",D,U=>{const W=U.d,ie=U.s;n.warnOnListenWarnings_(W,o),(this.listens.get(d)&&this.listens.get(d).get(m))===t&&(this.log_("listen response",U),"ok"!==ie&&this.removeListen_(d,m),t.onComplete&&t.onComplete(ie,W))})}static warnOnListenWarnings_(t,o){if(t&&"object"==typeof t&&(0,le.r3)(t,"w")){const d=(0,le.DV)(t,"w");if(Array.isArray(d)&&~d.indexOf("no_index")){const m='".indexOn": "'+o._queryParams.getIndex().toString()+'"',D=o._path.toString();zo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${m} at ${D} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,le.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,o=(0,le.w9)(t)?"auth":"gauth",d={cred:t};null===this.authOverride_?d.noauth=!0:"object"==typeof this.authOverride_&&(d.authvar=this.authOverride_),this.sendRequest(o,d,m=>{const D=m.s,x=m.d||"error";this.authToken_===t&&("ok"===D?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(D,x))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const o=t.s,d=t.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,d)})}unlisten(t,o){const d=t._path.toString(),m=t._queryIdentifier;this.log_("Unlisten called for "+d+" "+m),(0,le.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(d,m)&&this.connected_&&this.sendUnlisten_(d,m,t._queryObject,o)}sendUnlisten_(t,o,d,m){this.log_("Unlisten on "+t+" for "+o);const D={p:t};m&&(D.q=d,D.t=m),this.sendRequest("n",D)}onDisconnectPut(t,o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,o,d):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:o,onComplete:d})}onDisconnectMerge(t,o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,o,d):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:o,onComplete:d})}onDisconnectCancel(t,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(t,o,d,m){const D={p:o,d};this.log_("onDisconnect "+t,D),this.sendRequest(t,D,x=>{m&&setTimeout(()=>{m(x.s,x.d)},Math.floor(0))})}put(t,o,d,m){this.putInternal("p",t,o,d,m)}merge(t,o,d,m){this.putInternal("m",t,o,d,m)}putInternal(t,o,d,m,D){this.initConnection_();const x={p:o,d};void 0!==D&&(x.h=D),this.outstandingPuts_.push({action:t,request:x,onComplete:m}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(t){const o=this.outstandingPuts_[t].action,d=this.outstandingPuts_[t].request,m=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(o,d,D=>{this.log_(o+" response",D),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),m&&m(D.s,D.d)})}reportStats(t){if(this.connected_){const o={c:t};this.log_("reportStats",o),this.sendRequest("s",o,d=>{"ok"!==d.s&&this.log_("reportStats","Error sending stats: "+d.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,le.Wl)(t));const o=t.r,d=this.requestCBHash_[o];d&&(delete this.requestCBHash_[o],d(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,o){this.log_("handleServerMessage",t,o),"d"===t?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===t?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===t?this.onListenRevoked_(o.p,o.q):"ac"===t?this.onAuthRevoked_(o.s,o.d):"apc"===t?this.onAppCheckRevoked_(o.s,o.d):"sd"===t?this.onSecurityDebugPacket_(o):rm("Unrecognized action received from server: "+(0,le.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,le.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sy,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Sy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Sy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-t);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Qd.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const o=t.onDataMessage_.bind(t),d=t.onReady_.bind(t),m=t.onRealtimeDisconnect_.bind(t),D=t.id+":"+n.nextConnectionId_++,x=t.lastSessionId;let U=!1,W=null;const ie=function(){W?W.close():(U=!0,m())};t.realtime_={close:ie,sendRequest:function(Ge){(0,le.hu)(W,"sendRequest call when we're not connected not allowed."),W.sendRequest(Ge)}};const De=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Ge,Tt]=yield Promise.all([t.authTokenProvider_.getToken(De),t.appCheckTokenProvider_.getToken(De)]);U?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),t.authToken_=Ge&&Ge.accessToken,t.appCheckToken_=Tt&&Tt.token,W=new ss(D,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,o,d,m,Vt=>{zo(Vt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},x))}catch(Ge){t.log_("Failed to get token: "+Ge),U||(t.repoInfo_.nodeAdmin&&zo(Ge),ie())}}})()}interrupt(t){is("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){is("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,le.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Sy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const o=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const o=this.outstandingPuts_[t];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,o){let d;d=o?o.map(D=>w0(D)).join("$"):"default";const m=this.removeListen_(t,d);m&&m.onComplete&&m.onComplete("permission_denied")}removeListen_(t,o){const d=new Sr(t).toString();let m;if(this.listens.has(d)){const D=this.listens.get(d);m=D.get(o),D.delete(o),0===D.size&&this.listens.delete(d)}else m=void 0;return m}onAuthRevoked_(t,o){is("Auth token revoked: "+t+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,o){is("App check token revoked: "+t+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const o of t.values())this.sendListen_(o);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let o="js";(0,le.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+o+"."+tm.replace(/\./g,"-")]=1,(0,le.uI)()?t["framework.cordova"]=1:(0,le.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=wr.getInstance().currentlyOnline();return(0,le.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Pr{constructor(r,t){this.name=r,this.node=t}static Wrap(r,t){return new Pr(r,t)}}class hw{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,t){const o=new Pr(ud,r),d=new Pr(ud,t);return 0!==this.compare(o,d)}minPost(){return Pr.MIN}}class kE extends hw{static get __EMPTY_NODE(){return Oy}static set __EMPTY_NODE(r){Oy=r}compare(r,t){return cd(r.name,t.name)}isDefinedOn(r){throw(0,le.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,t){return!1}minPost(){return Pr.MIN}maxPost(){return new Pr(wc,Oy)}makePost(r,t){return(0,le.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new Pr(r,Oy)}toString(){return".key"}}const fd=new kE;class P0{constructor(r,t,o,d,m=null){this.isReverse_=d,this.resultGenerator_=m,this.nodeStack_=[];let D=1;for(;!r.isEmpty();)if(D=t?o(r.key,t):1,d&&(D*=-1),D<0)r=this.isReverse_?r.left:r.right;else{if(0===D){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,r=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let pw,Dc=(()=>{class n{constructor(t,o,d,m,D){this.key=t,this.value=o,this.color=d??n.RED,this.left=m??zl.EMPTY_NODE,this.right=D??zl.EMPTY_NODE}copy(t,o,d,m,D){return new n(t??this.key,o??this.value,d??this.color,m??this.left,D??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,o,d){let m=this;const D=d(t,m.key);return m=D<0?m.copy(null,null,null,m.left.insert(t,o,d),null):0===D?m.copy(null,o,null,null,null):m.copy(null,null,null,null,m.right.insert(t,o,d)),m.fixUp_()}removeMin_(){if(this.left.isEmpty())return zl.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,o){let d,m;if(d=this,o(t,d.key)<0)!d.left.isEmpty()&&!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.remove(t,o),null);else{if(d.left.isRed_()&&(d=d.rotateRight_()),!d.right.isEmpty()&&!d.right.isRed_()&&!d.right.left.isRed_()&&(d=d.moveRedRight_()),0===o(t,d.key)){if(d.right.isEmpty())return zl.EMPTY_NODE;m=d.right.min_(),d=d.copy(m.key,m.value,null,null,d.right.removeMin_())}d=d.copy(null,null,null,null,d.right.remove(t,o))}return d.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,o)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class zl{constructor(r,t=zl.EMPTY_NODE){this.comparator_=r,this.root_=t}insert(r,t){return new zl(this.comparator_,this.root_.insert(r,t,this.comparator_).copy(null,null,Dc.BLACK,null,null))}remove(r){return new zl(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,Dc.BLACK,null,null))}get(r){let t,o=this.root_;for(;!o.isEmpty();){if(t=this.comparator_(r,o.key),0===t)return o.value;t<0?o=o.left:t>0&&(o=o.right)}return null}getPredecessorKey(r){let t,o=this.root_,d=null;for(;!o.isEmpty();){if(t=this.comparator_(r,o.key),0===t){if(o.left.isEmpty())return d?d.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}t<0?o=o.left:t>0&&(d=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new P0(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,t){return new P0(this.root_,r,this.comparator_,!1,t)}getReverseIteratorFrom(r,t){return new P0(this.root_,r,this.comparator_,!0,t)}getReverseIterator(r){return new P0(this.root_,null,this.comparator_,!0,r)}}function fw(n,r){return cd(n.name,r.name)}function $u(n,r){return cd(n,r)}zl.EMPTY_NODE=new class Ny{copy(r,t,o,d,m){return this}insert(r,t,o){return new Dc(r,t,null)}remove(r,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fm=function(n){return"number"==typeof n?"number:"+D0(n):"string:"+n},FE=function(n){if(n.isLeafNode()){const r=n.val();(0,le.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,le.r3)(r,".sv"),"Priority must be a string or number.")}else(0,le.hu)(n===pw||n.isEmpty(),"priority of unexpected type.");(0,le.hu)(n===pw||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let LE,My,Ry,pm=(()=>{class n{constructor(t,o=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=o,this.lazyHash_=null,(0,le.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),FE(this.priorityNode_)}static set __childrenNodeConstructor(t){LE=t}static get __childrenNodeConstructor(){return LE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Or(t)?this:".priority"===Ar(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,o){return null}updateImmediateChild(t,o){return".priority"===t?this.updatePriority(o):o.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,o).updatePriority(this.priorityNode_)}updateChild(t,o){const d=Ar(t);return null===d?o:o.isEmpty()&&".priority"!==d?this:((0,le.hu)(".priority"!==d||1===_f(t),".priority must be the last token in a path"),this.updateImmediateChild(d,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pi(t),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,o){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fm(this.priorityNode_.val())+":");const o=typeof this.value_;t+=o+":",t+="number"===o?D0(this.value_):this.value_,this.lazyHash_=y0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,le.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const o=typeof t.value_,d=typeof this.value_,m=n.VALUE_TYPE_ORDER.indexOf(o),D=n.VALUE_TYPE_ORDER.indexOf(d);return(0,le.hu)(m>=0,"Unknown leaf type: "+o),(0,le.hu)(D>=0,"Unknown leaf type: "+d),m===D?"object"===d?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:D-m}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Hi=new class UE extends hw{compare(r,t){const o=r.node.getPriority(),d=t.node.getPriority(),m=o.compareTo(d);return 0===m?cd(r.name,t.name):m}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,t){return!r.getPriority().equals(t.getPriority())}minPost(){return Pr.MIN}maxPost(){return new Pr(wc,new pm("[PRIORITY-POST]",Ry))}makePost(r,t){const o=My(r);return new Pr(t,new pm("[PRIORITY-POST]",o))}toString(){return".priority"}},mw=Math.log(2);class BE{constructor(r){this.count=parseInt(Math.log(r+1)/mw,10),this.current_=this.count-1;const d=(m=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&d}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const gm=function(n,r,t,o){n.sort(r);const d=function(U,W){const ie=W-U;let Ee,De;if(0===ie)return null;if(1===ie)return Ee=n[U],De=t?t(Ee):Ee,new Dc(De,Ee.node,Dc.BLACK,null,null);{const Ge=parseInt(ie/2,10)+U,Tt=d(U,Ge),Vt=d(Ge+1,W);return Ee=n[Ge],De=t?t(Ee):Ee,new Dc(De,Ee.node,Dc.BLACK,Tt,Vt)}},x=function(U){let W=null,ie=null,Ee=n.length;const De=function(Tt,Vt){const Xt=Ee-Tt,Un=Ee;Ee-=Tt;const Bn=d(Xt+1,Un),tr=n[Xt],zn=t?t(tr):tr;Ge(new Dc(zn,tr.node,Vt,null,Bn))},Ge=function(Tt){W?(W.left=Tt,W=Tt):(ie=Tt,W=Tt)};for(let Tt=0;Tt<U.count;++Tt){const Vt=U.nextBitIsOne(),Xt=Math.pow(2,U.count-(Tt+1));Vt?De(Xt,Dc.BLACK):(De(Xt,Dc.BLACK),De(Xt,Dc.RED))}return ie}(new BE(n.length));return new zl(o||r,x)};let Py;const Cp={};class Ic{constructor(r,t){this.indexes_=r,this.indexSet_=t}static get Default(){return(0,le.hu)(Cp&&Hi,"ChildrenNode.ts has not been loaded"),Py=Py||new Ic({".priority":Cp},{".priority":Hi}),Py}get(r){const t=(0,le.DV)(this.indexes_,r);if(!t)throw new Error("No index defined for "+r);return t instanceof zl?t:null}hasIndex(r){return(0,le.r3)(this.indexSet_,r.toString())}addIndex(r,t){(0,le.hu)(r!==fd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let d=!1;const m=t.getIterator(Pr.Wrap);let x,D=m.getNext();for(;D;)d=d||r.isDefinedOn(D.node),o.push(D),D=m.getNext();x=d?gm(o,r.getCompare()):Cp;const U=r.toString(),W=Object.assign({},this.indexSet_);W[U]=r;const ie=Object.assign({},this.indexes_);return ie[U]=x,new Ic(ie,W)}addToIndexes(r,t){const o=(0,le.UI)(this.indexes_,(d,m)=>{const D=(0,le.DV)(this.indexSet_,m);if((0,le.hu)(D,"Missing index implementation for "+m),d===Cp){if(D.isDefinedOn(r.node)){const x=[],U=t.getIterator(Pr.Wrap);let W=U.getNext();for(;W;)W.name!==r.name&&x.push(W),W=U.getNext();return x.push(r),gm(x,D.getCompare())}return Cp}{const x=t.get(r.name);let U=d;return x&&(U=U.remove(new Pr(r.name,x))),U.insert(r,r.node)}});return new Ic(o,this.indexSet_)}removeFromIndexes(r,t){const o=(0,le.UI)(this.indexes_,d=>{if(d===Cp)return d;{const m=t.get(r.name);return m?d.remove(new Pr(r.name,m)):d}});return new Ic(o,this.indexSet_)}}let Tp,gr=(()=>{class n{constructor(t,o,d){this.children_=t,this.priorityNode_=o,this.indexMap_=d,this.lazyHash_=null,this.priorityNode_&&FE(this.priorityNode_),this.children_.isEmpty()&&(0,le.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Tp||(Tp=new n(new zl($u),null,Ic.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Tp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const o=this.children_.get(t);return null===o?Tp:o}}getChild(t){const o=Ar(t);return null===o?this:this.getImmediateChild(o).getChild(Pi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,o){if((0,le.hu)(o,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(o);{const d=new Pr(t,o);let m,D;o.isEmpty()?(m=this.children_.remove(t),D=this.indexMap_.removeFromIndexes(d,this.children_)):(m=this.children_.insert(t,o),D=this.indexMap_.addToIndexes(d,this.children_));const x=m.isEmpty()?Tp:this.priorityNode_;return new n(m,x,D)}}updateChild(t,o){const d=Ar(t);if(null===d)return o;{(0,le.hu)(".priority"!==Ar(t)||1===_f(t),".priority must be the last token in a path");const m=this.getImmediateChild(d).updateChild(Pi(t),o);return this.updateImmediateChild(d,m)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const o={};let d=0,m=0,D=!0;if(this.forEachChild(Hi,(x,U)=>{o[x]=U.val(t),d++,D&&n.INTEGER_REGEXP_.test(x)?m=Math.max(m,Number(x)):D=!1}),!t&&D&&m<2*d){const x=[];for(const U in o)x[U]=o[U];return x}return t&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+fm(this.getPriority().val())+":"),this.forEachChild(Hi,(o,d)=>{const m=d.hash();""!==m&&(t+=":"+o+":"+m)}),this.lazyHash_=""===t?"":y0(t)}return this.lazyHash_}getPredecessorChildName(t,o,d){const m=this.resolveIndex_(d);if(m){const D=m.getPredecessorKey(new Pr(t,o));return D?D.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const o=this.resolveIndex_(t);if(o){const d=o.minKey();return d&&d.name}return this.children_.minKey()}getFirstChild(t){const o=this.getFirstChildName(t);return o?new Pr(o,this.children_.get(o)):null}getLastChildName(t){const o=this.resolveIndex_(t);if(o){const d=o.maxKey();return d&&d.name}return this.children_.maxKey()}getLastChild(t){const o=this.getLastChildName(t);return o?new Pr(o,this.children_.get(o)):null}forEachChild(t,o){const d=this.resolveIndex_(t);return d?d.inorderTraversal(m=>o(m.name,m.node)):this.children_.inorderTraversal(o)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,o){const d=this.resolveIndex_(o);if(d)return d.getIteratorFrom(t,m=>m);{const m=this.children_.getIteratorFrom(t.name,Pr.Wrap);let D=m.peek();for(;null!=D&&o.compare(D,t)<0;)m.getNext(),D=m.peek();return m}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,o){const d=this.resolveIndex_(o);if(d)return d.getReverseIteratorFrom(t,m=>m);{const m=this.children_.getReverseIteratorFrom(t.name,Pr.Wrap);let D=m.peek();for(;null!=D&&o.compare(D,t)>0;)m.getNext(),D=m.peek();return m}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===xy?-1:0}withIndex(t){if(t===fd||this.indexMap_.hasIndex(t))return this;{const o=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,o)}}isIndexed(t){return t===fd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const o=t;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const d=this.getIterator(Hi),m=o.getIterator(Hi);let D=d.getNext(),x=m.getNext();for(;D&&x;){if(D.name!==x.name||!D.node.equals(x.node))return!1;D=d.getNext(),x=m.getNext()}return null===D&&null===x}return!1}return!1}}resolveIndex_(t){return t===fd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const xy=new class zD extends gr{constructor(){super(new zl($u),gr.EMPTY_NODE,Ic.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return gr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Pr,{MIN:{value:new Pr(ud,gr.EMPTY_NODE)},MAX:{value:new Pr(wc,xy)}}),kE.__EMPTY_NODE=gr.EMPTY_NODE,pm.__childrenNodeConstructor=gr,function gw(n){pw=n}(xy),function $D(n){Ry=n}(xy);const WD=!0;function ys(n,r=null){if(null===n)return gr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(r=n[".priority"]),(0,le.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new pm(n,ys(r));if(n instanceof Array||!WD){let t=gr.EMPTY_NODE;return fo(n,(o,d)=>{if((0,le.r3)(n,o)&&"."!==o.substring(0,1)){const m=ys(d);(m.isLeafNode()||!m.isEmpty())&&(t=t.updateImmediateChild(o,m))}}),t.updatePriority(ys(r))}{const t=[];let o=!1;if(fo(n,(D,x)=>{if("."!==D.substring(0,1)){const U=ys(x);U.isEmpty()||(o=o||!U.getPriority().isEmpty(),t.push(new Pr(D,U)))}}),0===t.length)return gr.EMPTY_NODE;const m=gm(t,fw,D=>D.name,$u);if(o){const D=gm(t,Hi.getCompare());return new gr(m,ys(r),new Ic({".priority":D},{".priority":Hi}))}return new gr(m,ys(r),Ic.Default)}}!function HD(n){My=n}(ys);class ky extends hw{constructor(r){super(),this.indexPath_=r,(0,le.hu)(!Or(r)&&".priority"!==Ar(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,t){const o=this.extractChild(r.node),d=this.extractChild(t.node),m=o.compareTo(d);return 0===m?cd(r.name,t.name):m}makePost(r,t){const o=ys(r),d=gr.EMPTY_NODE.updateChild(this.indexPath_,o);return new Pr(t,d)}maxPost(){const r=gr.EMPTY_NODE.updateChild(this.indexPath_,xy);return new Pr(wc,r)}toString(){return Ty(this.indexPath_,0).join("/")}}const x0=new class VE extends hw{compare(r,t){const o=r.node.compareTo(t.node);return 0===o?cd(r.name,t.name):o}isDefinedOn(r){return!0}indexedValueChanged(r,t){return!r.equals(t)}minPost(){return Pr.MIN}maxPost(){return Pr.MAX}makePost(r,t){const o=ys(r);return new Pr(t,o)}toString(){return".value"}};function _w(n){return{type:"value",snapshotNode:n}}function Sp(n,r){return{type:"child_added",snapshotNode:r,childName:n}}function Fy(n,r){return{type:"child_removed",snapshotNode:r,childName:n}}function mm(n,r,t){return{type:"child_changed",snapshotNode:r,childName:n,oldSnap:t}}class yw{constructor(r){this.index_=r}updateChild(r,t,o,d,m,D){(0,le.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const x=r.getImmediateChild(t);return x.getChild(d).equals(o.getChild(d))&&x.isEmpty()===o.isEmpty()||(null!=D&&(o.isEmpty()?r.hasChild(t)?D.trackChildChange(Fy(t,x)):(0,le.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):x.isEmpty()?D.trackChildChange(Sp(t,o)):D.trackChildChange(mm(t,o,x))),r.isLeafNode()&&o.isEmpty())?r:r.updateImmediateChild(t,o).withIndex(this.index_)}updateFullNode(r,t,o){return null!=o&&(r.isLeafNode()||r.forEachChild(Hi,(d,m)=>{t.hasChild(d)||o.trackChildChange(Fy(d,m))}),t.isLeafNode()||t.forEachChild(Hi,(d,m)=>{if(r.hasChild(d)){const D=r.getImmediateChild(d);D.equals(m)||o.trackChildChange(mm(d,m,D))}else o.trackChildChange(Sp(d,m))})),t.withIndex(this.index_)}updatePriority(r,t){return r.isEmpty()?gr.EMPTY_NODE:r.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _m{constructor(r){this.indexedFilter_=new yw(r.getIndex()),this.index_=r.getIndex(),this.startPost_=_m.getStartPost_(r),this.endPost_=_m.getEndPost_(r),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),r)<=0:this.index_.compare(this.getStartPost(),r)<0,o=this.endIsInclusive_?this.index_.compare(r,this.getEndPost())<=0:this.index_.compare(r,this.getEndPost())<0;return t&&o}updateChild(r,t,o,d,m,D){return this.matches(new Pr(t,o))||(o=gr.EMPTY_NODE),this.indexedFilter_.updateChild(r,t,o,d,m,D)}updateFullNode(r,t,o){t.isLeafNode()&&(t=gr.EMPTY_NODE);let d=t.withIndex(this.index_);d=d.updatePriority(gr.EMPTY_NODE);const m=this;return t.forEachChild(Hi,(D,x)=>{m.matches(new Pr(D,x))||(d=d.updateImmediateChild(D,gr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,d,o)}updatePriority(r,t){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const t=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),t)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const t=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),t)}return r.getIndex().maxPost()}}class jE{constructor(r){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=t=>{const o=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new _m(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft(),this.startIsInclusive_=!r.startAfterSet_,this.endIsInclusive_=!r.endBeforeSet_}updateChild(r,t,o,d,m,D){return this.rangedFilter_.matches(new Pr(t,o))||(o=gr.EMPTY_NODE),r.getImmediateChild(t).equals(o)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,t,o,d,m,D):this.fullLimitUpdateChild_(r,t,o,m,D)}updateFullNode(r,t,o){let d;if(t.isLeafNode()||t.isEmpty())d=gr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let m;d=gr.EMPTY_NODE.withIndex(this.index_),m=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let D=0;for(;m.hasNext()&&D<this.limit_;){const x=m.getNext();if(this.withinDirectionalStart(x)){if(!this.withinDirectionalEnd(x))break;d=d.updateImmediateChild(x.name,x.node),D++}}}else{let m;d=t.withIndex(this.index_),d=d.updatePriority(gr.EMPTY_NODE),m=this.reverse_?d.getReverseIterator(this.index_):d.getIterator(this.index_);let D=0;for(;m.hasNext();){const x=m.getNext();D<this.limit_&&this.withinDirectionalStart(x)&&this.withinDirectionalEnd(x)?D++:d=d.updateImmediateChild(x.name,gr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,d,o)}updatePriority(r,t){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,t,o,d,m){let D;if(this.reverse_){const Ee=this.index_.getCompare();D=(De,Ge)=>Ee(Ge,De)}else D=this.index_.getCompare();const x=r;(0,le.hu)(x.numChildren()===this.limit_,"");const U=new Pr(t,o),W=this.reverse_?x.getFirstChild(this.index_):x.getLastChild(this.index_),ie=this.rangedFilter_.matches(U);if(x.hasChild(t)){const Ee=x.getImmediateChild(t);let De=d.getChildAfterChild(this.index_,W,this.reverse_);for(;null!=De&&(De.name===t||x.hasChild(De.name));)De=d.getChildAfterChild(this.index_,De,this.reverse_);const Ge=null==De?1:D(De,U);if(ie&&!o.isEmpty()&&Ge>=0)return m?.trackChildChange(mm(t,o,Ee)),x.updateImmediateChild(t,o);{m?.trackChildChange(Fy(t,Ee));const Vt=x.updateImmediateChild(t,gr.EMPTY_NODE);return null!=De&&this.rangedFilter_.matches(De)?(m?.trackChildChange(Sp(De.name,De.node)),Vt.updateImmediateChild(De.name,De.node)):Vt}}return o.isEmpty()?r:ie&&D(W,U)>=0?(null!=m&&(m.trackChildChange(Fy(W.name,W.node)),m.trackChildChange(Sp(t,o))),x.updateImmediateChild(t,o).updateImmediateChild(W.name,gr.EMPTY_NODE)):r}}class ma{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,le.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,le.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ud}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,le.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,le.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,le.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hi}copy(){const r=new ma;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.startAfterSet_=this.startAfterSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.endBeforeSet_=this.endBeforeSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function HE(n,r,t){const o=n.copy();return o.startSet_=!0,void 0===r&&(r=null),o.indexStartValue_=r,null!=t?(o.startNameSet_=!0,o.indexStartName_=t):(o.startNameSet_=!1,o.indexStartName_=""),o}function k0(n,r,t){const o=n.copy();return o.endSet_=!0,void 0===r&&(r=null),o.indexEndValue_=r,void 0!==t?(o.endNameSet_=!0,o.indexEndName_=t):(o.endNameSet_=!1,o.indexEndName_=""),o}function vf(n,r){const t=n.copy();return t.index_=r,t}function $E(n){const r={};if(n.isDefault())return r;let t;if(n.index_===Hi?t="$priority":n.index_===x0?t="$value":n.index_===fd?t="$key":((0,le.hu)(n.index_ instanceof ky,"Unrecognized index type!"),t=n.index_.toString()),r.orderBy=(0,le.Wl)(t),n.startSet_){const o=n.startAfterSet_?"startAfter":"startAt";r[o]=(0,le.Wl)(n.indexStartValue_),n.startNameSet_&&(r[o]+=","+(0,le.Wl)(n.indexStartName_))}if(n.endSet_){const o=n.endBeforeSet_?"endBefore":"endAt";r[o]=(0,le.Wl)(n.indexEndValue_),n.endNameSet_&&(r[o]+=","+(0,le.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?r.limitToFirst=n.limit_:r.limitToLast=n.limit_),r}function F0(n){const r={};if(n.startSet_&&(r.sp=n.indexStartValue_,n.startNameSet_&&(r.sn=n.indexStartName_),r.sin=!n.startAfterSet_),n.endSet_&&(r.ep=n.indexEndValue_,n.endNameSet_&&(r.en=n.indexEndName_),r.ein=!n.endBeforeSet_),n.limitSet_){r.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),r.vf=t}return n.index_!==Hi&&(r.i=n.index_.toString()),r}class L0 extends fr{constructor(r,t,o,d){super(),this.repoInfo_=r,this.onDataUpdate_=t,this.authTokenProvider_=o,this.appCheckTokenProvider_=d,this.log_=Ep("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,t){return void 0!==t?"tag$"+t:((0,le.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,t,o,d){const m=r._path.toString();this.log_("Listen called for "+m+" "+r._queryIdentifier);const D=L0.getListenId_(r,o),x={};this.listens_[D]=x;const U=$E(r._queryParams);this.restRequest_(m+".json",U,(W,ie)=>{let Ee=ie;if(404===W&&(Ee=null,W=null),null===W&&this.onDataUpdate_(m,Ee,!1,o),(0,le.DV)(this.listens_,D)===x){let De;De=W?401===W?"permission_denied":"rest_error:"+W:"ok",d(De,null)}})}unlisten(r,t){const o=L0.getListenId_(r,t);delete this.listens_[o]}get(r){const t=$E(r._queryParams),o=r._path.toString(),d=new le.BH;return this.restRequest_(o+".json",t,(m,D)=>{let x=D;404===m&&(x=null,m=null),null===m?(this.onDataUpdate_(o,x,!1,null),d.resolve(x)):d.reject(new Error(x))}),d.promise}refreshAuthToken(r){}restRequest_(r,t={},o){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([d,m])=>{d&&d.accessToken&&(t.auth=d.accessToken),m&&m.token&&(t.ac=m.token);const D=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,le.xO)(t);this.log_("Sending REST request for "+D);const x=new XMLHttpRequest;x.onreadystatechange=()=>{if(o&&4===x.readyState){this.log_("REST Response for "+D+" received. status:",x.status,"response:",x.responseText);let U=null;if(x.status>=200&&x.status<300){try{U=(0,le.cI)(x.responseText)}catch{zo("Failed to parse JSON response for "+D+": "+x.responseText)}o(null,U)}else 401!==x.status&&404!==x.status&&zo("Got unsuccessful REST response for "+D+" Status: "+x.status),o(x.status);o=null}},x.open("GET",D,!0),x.send()})}}class zE{constructor(){this.rootNode_=gr.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,t){this.rootNode_=this.rootNode_.updateChild(r,t)}}function U0(){return{value:null,children:new Map}}function vm(n,r,t){if(Or(r))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(r,t);else{const o=Ar(r);n.children.has(o)||n.children.set(o,U0()),vm(n.children.get(o),r=Pi(r),t)}}function bw(n,r){if(Or(r))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Hi,(o,d)=>{vm(n,new Sr(o),d)}),bw(n,r)}}if(n.children.size>0){const t=Ar(r);return r=Pi(r),n.children.has(t)&&bw(n.children.get(t),r)&&n.children.delete(t),0===n.children.size}return!0}function Ly(n,r,t){null!==n.value?t(r,n.value):function WE(n,r){n.children.forEach((t,o)=>{r(o,t)})}(n,(o,d)=>{Ly(d,new Sr(r.toString()+"/"+o),t)})}class KE{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),t=Object.assign({},r);return this.last_&&fo(this.last_,(o,d)=>{t[o]=t[o]-d}),this.last_=r,t}}class qE{constructor(r,t){this.server_=t,this.statsToReport_={},this.statsListener_=new KE(r);const o=1e4+2e4*Math.random();Hl(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const r=this.statsListener_.get(),t={};let o=!1;fo(r,(d,m)=>{m>0&&(0,le.r3)(this.statsToReport_,d)&&(t[d]=m,o=!0)}),o&&this.server_.reportStats(t),Hl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zu=(()=>{return(n=zu||(zu={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",zu;var n})();function Ew(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class By{constructor(r,t,o){this.path=r,this.affectedTree=t,this.revert=o,this.type=zu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(Or(this.path)){if(null!=this.affectedTree.value)return(0,le.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Sr(r));return new By(hi(),t,this.revert)}}return(0,le.hu)(Ar(this.path)===r,"operationForChild called for unrelated child."),new By(Pi(this.path),this.affectedTree,this.revert)}}class Ap{constructor(r,t){this.source=r,this.path=t,this.type=zu.LISTEN_COMPLETE}operationForChild(r){return Or(this.path)?new Ap(this.source,hi()):new Ap(this.source,Pi(this.path))}}class bm{constructor(r,t,o){this.source=r,this.path=t,this.snap=o,this.type=zu.OVERWRITE}operationForChild(r){return Or(this.path)?new bm(this.source,hi(),this.snap.getImmediateChild(r)):new bm(this.source,Pi(this.path),this.snap)}}class wm{constructor(r,t,o){this.source=r,this.path=t,this.children=o,this.type=zu.MERGE}operationForChild(r){if(Or(this.path)){const t=this.children.subtree(new Sr(r));return t.isEmpty()?null:t.value?new bm(this.source,hi(),t.value):new wm(this.source,hi(),t)}return(0,le.hu)(Ar(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new wm(this.source,Pi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Op{constructor(r,t,o){this.node_=r,this.fullyInitialized_=t,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(Or(r))return this.isFullyInitialized()&&!this.filtered_;const t=Ar(r);return this.isCompleteForChild(t)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class YD{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function Vy(n,r,t,o,d,m){const D=o.filter(x=>x.type===t);D.sort((x,U)=>function ZE(n,r,t){if(null==r.childName||null==t.childName)throw(0,le.g5)("Should only compare child_ events.");const o=new Pr(r.childName,r.snapshotNode),d=new Pr(t.childName,t.snapshotNode);return n.index_.compare(o,d)}(n,x,U)),D.forEach(x=>{const U=function YE(n,r,t){return"value"===r.type||"child_removed"===r.type||(r.prevName=t.getPredecessorChildName(r.childName,r.snapshotNode,n.index_)),r}(n,x,m);d.forEach(W=>{W.respondsTo(x.type)&&r.push(W.createEvent(U,n.query_))})})}function V0(n,r){return{eventCache:n,serverCache:r}}function Em(n,r,t,o){return V0(new Op(r,t,o),n.serverCache)}function Dw(n,r,t,o){return V0(n.eventCache,new Op(r,t,o))}function G0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Np(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let j0;class $i{constructor(r,t=(()=>(j0||(j0=new zl(b0)),j0))()){this.value=r,this.children=t}static fromObject(r){let t=new $i(null);return fo(r,(o,d)=>{t=t.set(new Sr(o),d)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,t){if(null!=this.value&&t(this.value))return{path:hi(),value:this.value};if(Or(r))return null;{const o=Ar(r),d=this.children.get(o);if(null!==d){const m=d.findRootMostMatchingPathAndValue(Pi(r),t);return null!=m?{path:Ls(new Sr(o),m.path),value:m.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(Or(r))return this;{const t=Ar(r),o=this.children.get(t);return null!==o?o.subtree(Pi(r)):new $i(null)}}set(r,t){if(Or(r))return new $i(t,this.children);{const o=Ar(r),m=(this.children.get(o)||new $i(null)).set(Pi(r),t),D=this.children.insert(o,m);return new $i(this.value,D)}}remove(r){if(Or(r))return this.children.isEmpty()?new $i(null):new $i(null,this.children);{const t=Ar(r),o=this.children.get(t);if(o){const d=o.remove(Pi(r));let m;return m=d.isEmpty()?this.children.remove(t):this.children.insert(t,d),null===this.value&&m.isEmpty()?new $i(null):new $i(this.value,m)}return this}}get(r){if(Or(r))return this.value;{const t=Ar(r),o=this.children.get(t);return o?o.get(Pi(r)):null}}setTree(r,t){if(Or(r))return t;{const o=Ar(r),m=(this.children.get(o)||new $i(null)).setTree(Pi(r),t);let D;return D=m.isEmpty()?this.children.remove(o):this.children.insert(o,m),new $i(this.value,D)}}fold(r){return this.fold_(hi(),r)}fold_(r,t){const o={};return this.children.inorderTraversal((d,m)=>{o[d]=m.fold_(Ls(r,d),t)}),t(r,this.value,o)}findOnPath(r,t){return this.findOnPath_(r,hi(),t)}findOnPath_(r,t,o){const d=!!this.value&&o(t,this.value);if(d)return d;if(Or(r))return null;{const m=Ar(r),D=this.children.get(m);return D?D.findOnPath_(Pi(r),Ls(t,m),o):null}}foreachOnPath(r,t){return this.foreachOnPath_(r,hi(),t)}foreachOnPath_(r,t,o){if(Or(r))return this;{this.value&&o(t,this.value);const d=Ar(r),m=this.children.get(d);return m?m.foreachOnPath_(Pi(r),Ls(t,d),o):new $i(null)}}foreach(r){this.foreach_(hi(),r)}foreach_(r,t){this.children.inorderTraversal((o,d)=>{d.foreach_(Ls(r,o),t)}),this.value&&t(r,this.value)}foreachChild(r){this.children.inorderTraversal((t,o)=>{o.value&&r(t,o.value)})}}class Wu{constructor(r){this.writeTree_=r}static empty(){return new Wu(new $i(null))}}function Dm(n,r,t){if(Or(r))return new Wu(new $i(t));{const o=n.writeTree_.findRootMostValueAndPath(r);if(null!=o){const d=o.path;let m=o.value;const D=vl(d,r);return m=m.updateChild(D,t),new Wu(n.writeTree_.set(d,m))}{const d=new $i(t),m=n.writeTree_.setTree(r,d);return new Wu(m)}}}function H0(n,r,t){let o=n;return fo(t,(d,m)=>{o=Dm(o,Ls(r,d),m)}),o}function QE(n,r){if(Or(r))return Wu.empty();{const t=n.writeTree_.setTree(r,new $i(null));return new Wu(t)}}function Iw(n,r){return null!=Im(n,r)}function Im(n,r){const t=n.writeTree_.findRootMostValueAndPath(r);return null!=t?n.writeTree_.get(t.path).getChild(vl(t.path,r)):null}function Cw(n){const r=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Hi,(o,d)=>{r.push(new Pr(o,d))}):n.writeTree_.children.inorderTraversal((o,d)=>{null!=d.value&&r.push(new Pr(o,d.value))}),r}function Mp(n,r){if(Or(r))return n;{const t=Im(n,r);return new Wu(null!=t?new $i(t):n.writeTree_.subtree(r))}}function JE(n){return n.writeTree_.isEmpty()}function Gy(n,r){return JD(hi(),n.writeTree_,r)}function JD(n,r,t){if(null!=r.value)return t.updateChild(n,r.value);{let o=null;return r.children.inorderTraversal((d,m)=>{".priority"===d?((0,le.hu)(null!==m.value,"Priority writes must always be leaf nodes"),o=m.value):t=JD(Ls(n,d),m,t)}),!t.getChild(n).isEmpty()&&null!==o&&(t=t.updateChild(Ls(n,".priority"),o)),t}}function Tw(n,r){return nD(r,n)}function WI(n,r){if(n.snap)return hu(n.path,r);for(const t in n.children)if(n.children.hasOwnProperty(t)&&hu(Ls(n.path,t),r))return!0;return!1}function z0(n){return n.visible}function Sw(n,r,t){let o=Wu.empty();for(let d=0;d<n.length;++d){const m=n[d];if(r(m)){const D=m.path;let x;if(m.snap)hu(t,D)?(x=vl(t,D),o=Dm(o,x,m.snap)):hu(D,t)&&(x=vl(D,t),o=Dm(o,hi(),m.snap.getChild(x)));else{if(!m.children)throw(0,le.g5)("WriteRecord should have .snap or .children");if(hu(t,D))x=vl(t,D),o=H0(o,x,m.children);else if(hu(D,t))if(x=vl(D,t),Or(x))o=H0(o,hi(),m.children);else{const U=(0,le.DV)(m.children,Ar(x));if(U){const W=U.getChild(Pi(x));o=Dm(o,hi(),W)}}}}}return o}function Aw(n,r,t,o,d){if(o||d){const m=Mp(n.visibleWrites,r);return!d&&JE(m)?t:d||null!=t||Iw(m,hi())?Gy(Sw(n.allWrites,function(W){return(W.visible||d)&&(!o||!~o.indexOf(W.writeId))&&(hu(W.path,r)||hu(r,W.path))},r),t||gr.EMPTY_NODE):null}{const m=Im(n.visibleWrites,r);if(null!=m)return m;{const D=Mp(n.visibleWrites,r);return JE(D)?t:null!=t||Iw(D,hi())?Gy(D,t||gr.EMPTY_NODE):null}}}function W0(n,r,t,o){return Aw(n.writeTree,n.treePath,r,t,o)}function Nw(n,r){return function KI(n,r,t){let o=gr.EMPTY_NODE;const d=Im(n.visibleWrites,r);if(d)return d.isLeafNode()||d.forEachChild(Hi,(m,D)=>{o=o.updateImmediateChild(m,D)}),o;if(t){const m=Mp(n.visibleWrites,r);return t.forEachChild(Hi,(D,x)=>{const U=Gy(Mp(m,new Sr(D)),x);o=o.updateImmediateChild(D,U)}),Cw(m).forEach(D=>{o=o.updateImmediateChild(D.name,D.node)}),o}return Cw(Mp(n.visibleWrites,r)).forEach(D=>{o=o.updateImmediateChild(D.name,D.node)}),o}(n.writeTree,n.treePath,r)}function jy(n,r,t,o){return function Ow(n,r,t,o,d){(0,le.hu)(o||d,"Either existingEventSnap or existingServerSnap must exist");const m=Ls(r,t);if(Iw(n.visibleWrites,m))return null;{const D=Mp(n.visibleWrites,m);return JE(D)?d.getChild(t):Gy(D,d.getChild(t))}}(n.writeTree,n.treePath,r,t,o)}function K0(n,r){return function XD(n,r){return Im(n.visibleWrites,r)}(n.writeTree,Ls(n.treePath,r))}function tD(n,r,t){return function eD(n,r,t,o){const d=Ls(r,t),m=Im(n.visibleWrites,d);return null!=m?m:o.isCompleteForChild(t)?Gy(Mp(n.visibleWrites,d),o.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,r,t)}function eI(n,r){return nD(Ls(n.treePath,r),n.writeTree)}function nD(n,r){return{treePath:n,writeTree:r}}class tI{constructor(){this.changeMap=new Map}trackChildChange(r){const t=r.type,o=r.childName;(0,le.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,le.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const d=this.changeMap.get(o);if(d){const m=d.type;if("child_added"===t&&"child_removed"===m)this.changeMap.set(o,mm(o,r.snapshotNode,d.snapshotNode));else if("child_removed"===t&&"child_added"===m)this.changeMap.delete(o);else if("child_removed"===t&&"child_changed"===m)this.changeMap.set(o,Fy(o,d.oldSnap));else if("child_changed"===t&&"child_added"===m)this.changeMap.set(o,Sp(o,r.snapshotNode));else{if("child_changed"!==t||"child_changed"!==m)throw(0,le.g5)("Illegal combination of changes: "+r+" occurred after "+d);this.changeMap.set(o,mm(o,r.snapshotNode,d.oldSnap))}}else this.changeMap.set(o,r)}getChanges(){return Array.from(this.changeMap.values())}}const rI=new class nI{getCompleteChild(r){return null}getChildAfterChild(r,t,o){return null}};class Mw{constructor(r,t,o=null){this.writes_=r,this.viewCache_=t,this.optCompleteServerCache_=o}getCompleteChild(r){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(r))return t.getNode().getImmediateChild(r);{const o=null!=this.optCompleteServerCache_?new Op(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tD(this.writes_,r,o)}}getChildAfterChild(r,t,o){const d=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Np(this.viewCache_),m=function ZI(n,r,t,o,d,m){return function qI(n,r,t,o,d,m,D){let x;const U=Mp(n.visibleWrites,r),W=Im(U,hi());if(null!=W)x=W;else{if(null==t)return[];x=Gy(U,t)}if(x=x.withIndex(D),x.isEmpty()||x.isLeafNode())return[];{const ie=[],Ee=D.getCompare(),De=m?x.getReverseIteratorFrom(o,D):x.getIteratorFrom(o,D);let Ge=De.getNext();for(;Ge&&ie.length<d;)0!==Ee(Ge,o)&&ie.push(Ge),Ge=De.getNext();return ie}}(n.writeTree,n.treePath,r,t,o,d,m)}(this.writes_,d,t,1,o,r);return 0===m.length?null:m[0]}}function sD(n,r,t,o,d,m){const D=r.eventCache;if(null!=K0(o,t))return r;{let x,U;if(Or(t))if((0,le.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const W=Np(r),Ee=Nw(o,W instanceof gr?W:gr.EMPTY_NODE);x=n.filter.updateFullNode(r.eventCache.getNode(),Ee,m)}else{const W=W0(o,Np(r));x=n.filter.updateFullNode(r.eventCache.getNode(),W,m)}else{const W=Ar(t);if(".priority"===W){(0,le.hu)(1===_f(t),"Can't have a priority with additional path components");const ie=D.getNode();U=r.serverCache.getNode();const Ee=jy(o,t,ie,U);x=null!=Ee?n.filter.updatePriority(ie,Ee):D.getNode()}else{const ie=Pi(t);let Ee;if(D.isCompleteForChild(W)){U=r.serverCache.getNode();const De=jy(o,t,D.getNode(),U);Ee=null!=De?D.getNode().getImmediateChild(W).updateChild(ie,De):D.getNode().getImmediateChild(W)}else Ee=tD(o,W,r.serverCache);x=null!=Ee?n.filter.updateChild(D.getNode(),W,Ee,ie,d,m):D.getNode()}}return Em(r,x,D.isFullyInitialized()||Or(t),n.filter.filtersNodes())}}function Cm(n,r,t,o,d,m,D,x){const U=r.serverCache;let W;const ie=D?n.filter:n.filter.getIndexedFilter();if(Or(t))W=ie.updateFullNode(U.getNode(),o,null);else if(ie.filtersNodes()&&!U.isFiltered()){const Ge=U.getNode().updateChild(t,o);W=ie.updateFullNode(U.getNode(),Ge,null)}else{const Ge=Ar(t);if(!U.isCompleteForPath(t)&&_f(t)>1)return r;const Tt=Pi(t),Xt=U.getNode().getImmediateChild(Ge).updateChild(Tt,o);W=".priority"===Ge?ie.updatePriority(U.getNode(),Xt):ie.updateChild(U.getNode(),Ge,Xt,Tt,rI,null)}const Ee=Dw(r,W,U.isFullyInitialized()||Or(t),ie.filtersNodes());return sD(n,Ee,t,d,new Mw(d,Ee,m),x)}function Rw(n,r,t,o,d,m,D){const x=r.eventCache;let U,W;const ie=new Mw(d,r,m);if(Or(t))W=n.filter.updateFullNode(r.eventCache.getNode(),o,D),U=Em(r,W,!0,n.filter.filtersNodes());else{const Ee=Ar(t);if(".priority"===Ee)W=n.filter.updatePriority(r.eventCache.getNode(),o),U=Em(r,W,x.isFullyInitialized(),x.isFiltered());else{const De=Pi(t),Ge=x.getNode().getImmediateChild(Ee);let Tt;if(Or(De))Tt=o;else{const Vt=ie.getCompleteChild(Ee);Tt=null!=Vt?".priority"===SE(De)&&Vt.getChild(OE(De)).isEmpty()?Vt:Vt.updateChild(De,o):gr.EMPTY_NODE}U=Ge.equals(Tt)?r:Em(r,n.filter.updateChild(x.getNode(),Ee,Tt,De,ie,D),x.isFullyInitialized(),n.filter.filtersNodes())}}return U}function iI(n,r){return n.eventCache.isCompleteForChild(r)}function oD(n,r,t){return t.foreach((o,d)=>{r=r.updateChild(o,d)}),r}function Hy(n,r,t,o,d,m,D,x){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let W,U=r;W=Or(t)?o:new $i(null).setTree(t,o);const ie=r.serverCache.getNode();return W.children.inorderTraversal((Ee,De)=>{if(ie.hasChild(Ee)){const Tt=oD(0,r.serverCache.getNode().getImmediateChild(Ee),De);U=Cm(n,U,new Sr(Ee),Tt,d,m,D,x)}}),W.children.inorderTraversal((Ee,De)=>{const Ge=!r.serverCache.isCompleteForChild(Ee)&&null===De.value;if(!ie.hasChild(Ee)&&!Ge){const Vt=oD(0,r.serverCache.getNode().getImmediateChild(Ee),De);U=Cm(n,U,new Sr(Ee),Vt,d,m,D,x)}}),U}class aD{constructor(r,t){this.query_=r,this.eventRegistrations_=[];const o=this.query_._queryParams,d=new yw(o.getIndex()),m=function ym(n){return n.loadsAllData()?new yw(n.getIndex()):n.hasLimit()?new jE(n):new _m(n)}(o);this.processor_=function rD(n){return{filter:n}}(m);const D=t.serverCache,x=t.eventCache,U=d.updateFullNode(gr.EMPTY_NODE,D.getNode(),null),W=m.updateFullNode(gr.EMPTY_NODE,x.getNode(),null),ie=new Op(U,D.isFullyInitialized(),d.filtersNodes()),Ee=new Op(W,x.isFullyInitialized(),m.filtersNodes());this.viewCache_=V0(Ee,ie),this.eventGenerator_=new YD(this.query_)}get query(){return this.query_}}function uD(n,r){const t=Np(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Or(r)&&!t.getImmediateChild(Ar(r)).isEmpty())?t.getChild(r):null}function xw(n){return 0===n.eventRegistrations_.length}function kw(n,r,t){const o=[];if(t){(0,le.hu)(null==r,"A cancel should cancel all event registrations.");const d=n.query._path;n.eventRegistrations_.forEach(m=>{const D=m.createCancelEvent(t,d);D&&o.push(D)})}if(r){let d=[];for(let m=0;m<n.eventRegistrations_.length;++m){const D=n.eventRegistrations_[m];if(D.matches(r)){if(r.hasAnyCallback()){d=d.concat(n.eventRegistrations_.slice(m+1));break}}else d.push(D)}n.eventRegistrations_=d}else n.eventRegistrations_=[];return o}function cD(n,r,t,o){r.type===zu.MERGE&&null!==r.source.queryId&&((0,le.hu)(Np(n.viewCache_),"We should always have a full cache before handling merges"),(0,le.hu)(G0(n.viewCache_),"Missing event cache, even though we have a server cache"));const d=n.viewCache_,m=function QI(n,r,t,o,d){const m=new tI;let D,x;if(t.type===zu.OVERWRITE){const W=t;W.source.fromUser?D=Rw(n,r,W.path,W.snap,o,d,m):((0,le.hu)(W.source.fromServer,"Unknown source."),x=W.source.tagged||r.serverCache.isFiltered()&&!Or(W.path),D=Cm(n,r,W.path,W.snap,o,d,x,m))}else if(t.type===zu.MERGE){const W=t;W.source.fromUser?D=function Ku(n,r,t,o,d,m,D){let x=r;return o.foreach((U,W)=>{const ie=Ls(t,U);iI(r,Ar(ie))&&(x=Rw(n,x,ie,W,d,m,D))}),o.foreach((U,W)=>{const ie=Ls(t,U);iI(r,Ar(ie))||(x=Rw(n,x,ie,W,d,m,D))}),x}(n,r,W.path,W.children,o,d,m):((0,le.hu)(W.source.fromServer,"Unknown source."),x=W.source.tagged||r.serverCache.isFiltered(),D=Hy(n,r,W.path,W.children,o,d,x,m))}else if(t.type===zu.ACK_USER_WRITE){const W=t;D=W.revert?function Pw(n,r,t,o,d,m){let D;if(null!=K0(o,t))return r;{const x=new Mw(o,r,d),U=r.eventCache.getNode();let W;if(Or(t)||".priority"===Ar(t)){let ie;if(r.serverCache.isFullyInitialized())ie=W0(o,Np(r));else{const Ee=r.serverCache.getNode();(0,le.hu)(Ee instanceof gr,"serverChildren would be complete if leaf node"),ie=Nw(o,Ee)}W=n.filter.updateFullNode(U,ie,m)}else{const ie=Ar(t);let Ee=tD(o,ie,r.serverCache);null==Ee&&r.serverCache.isCompleteForChild(ie)&&(Ee=U.getImmediateChild(ie)),W=null!=Ee?n.filter.updateChild(U,ie,Ee,Pi(t),x,m):r.eventCache.getNode().hasChild(ie)?n.filter.updateChild(U,ie,gr.EMPTY_NODE,Pi(t),x,m):U,W.isEmpty()&&r.serverCache.isFullyInitialized()&&(D=W0(o,Np(r)),D.isLeafNode()&&(W=n.filter.updateFullNode(W,D,m)))}return D=r.serverCache.isFullyInitialized()||null!=K0(o,hi()),Em(r,W,D,n.filter.filtersNodes())}}(n,r,W.path,o,d,m):function sI(n,r,t,o,d,m,D){if(null!=K0(d,t))return r;const x=r.serverCache.isFiltered(),U=r.serverCache;if(null!=o.value){if(Or(t)&&U.isFullyInitialized()||U.isCompleteForPath(t))return Cm(n,r,t,U.getNode().getChild(t),d,m,x,D);if(Or(t)){let W=new $i(null);return U.getNode().forEachChild(fd,(ie,Ee)=>{W=W.set(new Sr(ie),Ee)}),Hy(n,r,t,W,d,m,x,D)}return r}{let W=new $i(null);return o.foreach((ie,Ee)=>{const De=Ls(t,ie);U.isCompleteForPath(De)&&(W=W.set(ie,U.getNode().getChild(De)))}),Hy(n,r,t,W,d,m,x,D)}}(n,r,W.path,W.affectedTree,o,d,m)}else{if(t.type!==zu.LISTEN_COMPLETE)throw(0,le.g5)("Unknown operation type: "+t.type);D=function oI(n,r,t,o,d){const m=r.serverCache;return sD(n,Dw(r,m.getNode(),m.isFullyInitialized()||Or(t),m.isFiltered()),t,o,rI,d)}(n,r,t.path,o,m)}const U=m.getChanges();return function Cc(n,r,t){const o=r.eventCache;if(o.isFullyInitialized()){const d=o.getNode().isLeafNode()||o.getNode().isEmpty(),m=G0(n);(t.length>0||!n.eventCache.isFullyInitialized()||d&&!o.getNode().equals(m)||!o.getNode().getPriority().equals(m.getPriority()))&&t.push(_w(G0(r)))}}(r,D,U),{viewCache:D,changes:U}}(n.processor_,d,r,t,o);return function iD(n,r){(0,le.hu)(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,le.hu)(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,m.viewCache),(0,le.hu)(m.viewCache.serverCache.isFullyInitialized()||!d.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=m.viewCache,pd(n,m.changes,m.viewCache.eventCache.getNode(),null)}function pd(n,r,t,o){return function ZD(n,r,t,o){const d=[],m=[];return r.forEach(D=>{"child_changed"===D.type&&n.index_.indexedValueChanged(D.oldSnap,D.snapshotNode)&&m.push(function GE(n,r){return{type:"child_moved",snapshotNode:r,childName:n}}(D.childName,D.snapshotNode))}),Vy(n,d,"child_removed",r,o,t),Vy(n,d,"child_added",r,o,t),Vy(n,d,"child_moved",m,o,t),Vy(n,d,"child_changed",r,o,t),Vy(n,d,"value",r,o,t),d}(n.eventGenerator_,r,t,o?[o]:n.eventRegistrations_)}let Tc,Vw;class Lw{constructor(){this.views=new Map}}function hD(n,r,t,o){const d=r.source.queryId;if(null!==d){const m=n.views.get(d);return(0,le.hu)(null!=m,"SyncTree gave us an op for an invalid query."),cD(m,r,t,o)}{let m=[];for(const D of n.views.values())m=m.concat(cD(D,r,t,o));return m}}function fD(n,r,t,o,d){const D=n.views.get(r._queryIdentifier);if(!D){let x=W0(t,d?o:null),U=!1;x?U=!0:o instanceof gr?(x=Nw(t,o),U=!1):(x=gr.EMPTY_NODE,U=!1);const W=V0(new Op(x,U,!1),new Op(o,d,!1));return new aD(r,W)}return D}function pD(n){const r=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||r.push(t);return r}function hh(n,r){let t=null;for(const o of n.views.values())t=t||uD(o,r);return t}function hI(n,r){return r._queryParams.loadsAllData()?$y(n):n.views.get(r._queryIdentifier)}function Bw(n,r){return null!=hI(n,r)}function wf(n){return null!=$y(n)}function $y(n){for(const r of n.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let mD=1;class jw{constructor(r){this.listenProvider_=r,this.syncPointTree_=new $i(null),this.pendingWriteTree_=function YI(){return{visibleWrites:Wu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function q0(n,r,t,o,d){return function HI(n,r,t,o,d){(0,le.hu)(o>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===d&&(d=!0),n.allWrites.push({path:r,snap:t,writeId:o,visible:d}),d&&(n.visibleWrites=Dm(n.visibleWrites,r,t)),n.lastWriteId=o}(n.pendingWriteTree_,r,t,o,d),d?Tm(n,new bm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,t)):[]}function Sc(n,r,t=!1){const o=function zI(n,r){for(let t=0;t<n.allWrites.length;t++){const o=n.allWrites[t];if(o.writeId===r)return o}return null}(n.pendingWriteTree_,r);if(function $0(n,r){const t=n.allWrites.findIndex(x=>x.writeId===r);(0,le.hu)(t>=0,"removeWrite called with nonexistent writeId.");const o=n.allWrites[t];n.allWrites.splice(t,1);let d=o.visible,m=!1,D=n.allWrites.length-1;for(;d&&D>=0;){const x=n.allWrites[D];x.visible&&(D>=t&&WI(x,o.path)?d=!1:hu(o.path,x.path)&&(m=!0)),D--}return!!d&&(m?(function XE(n){n.visibleWrites=Sw(n.allWrites,z0,hi()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(o.snap?n.visibleWrites=QE(n.visibleWrites,o.path):fo(o.children,U=>{n.visibleWrites=QE(n.visibleWrites,Ls(o.path,U))}),!0))}(n.pendingWriteTree_,r)){let m=new $i(null);return null!=o.snap?m=m.set(hi(),!0):fo(o.children,D=>{m=m.set(new Sr(D),!0)}),Tm(n,new By(o.path,m,t))}return[]}function Ef(n,r,t){return Tm(n,new bm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,t))}function Hw(n,r,t,o,d=!1){const m=r._path,D=n.syncPointTree_.get(m);let x=[];if(D&&("default"===r._queryIdentifier||Bw(D,r))){const U=function dI(n,r,t,o){const d=r._queryIdentifier,m=[];let D=[];const x=wf(n);if("default"===d)for(const[U,W]of n.views.entries())D=D.concat(kw(W,t,o)),xw(W)&&(n.views.delete(U),W.query._queryParams.loadsAllData()||m.push(W.query));else{const U=n.views.get(d);U&&(D=D.concat(kw(U,t,o)),xw(U)&&(n.views.delete(d),U.query._queryParams.loadsAllData()||m.push(U.query)))}return x&&!wf(n)&&m.push(new(function dD(){return(0,le.hu)(Tc,"Reference.ts has not been loaded"),Tc}())(r._repo,r._path)),{removed:m,events:D}}(D,r,t,o);(function uI(n){return 0===n.views.size})(D)&&(n.syncPointTree_=n.syncPointTree_.remove(m));const W=U.removed;if(x=U.events,!d){const ie=-1!==W.findIndex(De=>De._queryParams.loadsAllData()),Ee=n.syncPointTree_.findOnPath(m,(De,Ge)=>wf(Ge));if(ie&&!Ee){const De=n.syncPointTree_.subtree(m);if(!De.isEmpty()){const Ge=function bI(n){return n.fold((r,t,o)=>{if(t&&wf(t))return[$y(t)];{let d=[];return t&&(d=pD(t)),fo(o,(m,D)=>{d=d.concat(D)}),d}})}(De);for(let Tt=0;Tt<Ge.length;++Tt){const Vt=Ge[Tt],Xt=Vt.query,Un=vI(n,Vt);n.listenProvider_.startListening(Am(Xt),Q0(n,Xt),Un.hashFn,Un.onComplete)}}}!Ee&&W.length>0&&!o&&(ie?n.listenProvider_.stopListening(Am(r),null):W.forEach(De=>{const Ge=n.queryToTagMap.get($w(De));n.listenProvider_.stopListening(Am(De),Ge)}))}!function Rp(n,r){for(let t=0;t<r.length;++t){const o=r[t];if(!o._queryParams.loadsAllData()){const d=$w(o),m=n.queryToTagMap.get(d);n.queryToTagMap.delete(d),n.tagToQueryMap.delete(m)}}}(n,W)}return x}function gI(n,r,t,o){const d=zw(n,o);if(null!=d){const m=Sm(d),D=m.path,x=m.queryId,U=vl(D,r);return Ww(n,D,new bm(Ew(x),U,t))}return[]}function Y0(n,r,t,o=!1){const d=r._path;let m=null,D=!1;n.syncPointTree_.foreachOnPath(d,(De,Ge)=>{const Tt=vl(De,d);m=m||hh(Ge,Tt),D=D||wf(Ge)});let U,x=n.syncPointTree_.get(d);x?(D=D||wf(x),m=m||hh(x,hi())):(x=new Lw,n.syncPointTree_=n.syncPointTree_.set(d,x)),null!=m?U=!0:(U=!1,m=gr.EMPTY_NODE,n.syncPointTree_.subtree(d).foreachChild((Ge,Tt)=>{const Vt=hh(Tt,hi());Vt&&(m=m.updateImmediateChild(Ge,Vt))}));const W=Bw(x,r);if(!W&&!r._queryParams.loadsAllData()){const De=$w(r);(0,le.hu)(!n.queryToTagMap.has(De),"View does not exist, but we have a tag");const Ge=function vD(){return mD++}();n.queryToTagMap.set(De,Ge),n.tagToQueryMap.set(Ge,De)}let Ee=function cI(n,r,t,o,d,m){const D=fD(n,r,o,d,m);return n.views.has(r._queryIdentifier)||n.views.set(r._queryIdentifier,D),function lI(n,r){n.eventRegistrations_.push(r)}(D,t),function Fw(n,r){const t=n.viewCache_.eventCache,o=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Hi,(m,D)=>{o.push(Sp(m,D))}),t.isFullyInitialized()&&o.push(_w(t.getNode())),pd(n,o,t.getNode(),r)}(D,t)}(x,r,t,Tw(n.pendingWriteTree_,d),m,U);if(!W&&!D&&!o){const De=hI(x,r);Ee=Ee.concat(function Kw(n,r,t){const o=r._path,d=Q0(n,r),m=vI(n,t),D=n.listenProvider_.startListening(Am(r),d,m.hashFn,m.onComplete),x=n.syncPointTree_.subtree(o);if(d)(0,le.hu)(!wf(x.value),"If we're adding a query, it shouldn't be shadowed");else{const U=x.fold((W,ie,Ee)=>{if(!Or(W)&&ie&&wf(ie))return[$y(ie).query];{let De=[];return ie&&(De=De.concat(pD(ie).map(Ge=>Ge.query))),fo(Ee,(Ge,Tt)=>{De=De.concat(Tt)}),De}});for(let W=0;W<U.length;++W){const ie=U[W];n.listenProvider_.stopListening(Am(ie),Q0(n,ie))}}return D}(n,r,De))}return Ee}function Z0(n,r,t){const d=n.pendingWriteTree_,m=n.syncPointTree_.findOnPath(r,(D,x)=>{const W=hh(x,vl(D,r));if(W)return W});return Aw(d,r,m,t,!0)}function Tm(n,r){return _I(r,n.syncPointTree_,null,Tw(n.pendingWriteTree_,hi()))}function _I(n,r,t,o){if(Or(n.path))return yI(n,r,t,o);{const d=r.get(hi());null==t&&null!=d&&(t=hh(d,hi()));let m=[];const D=Ar(n.path),x=n.operationForChild(D),U=r.children.get(D);if(U&&x){const W=t?t.getImmediateChild(D):null,ie=eI(o,D);m=m.concat(_I(x,U,W,ie))}return d&&(m=m.concat(hD(d,n,o,t))),m}}function yI(n,r,t,o){const d=r.get(hi());null==t&&null!=d&&(t=hh(d,hi()));let m=[];return r.children.inorderTraversal((D,x)=>{const U=t?t.getImmediateChild(D):null,W=eI(o,D),ie=n.operationForChild(D);ie&&(m=m.concat(yI(ie,x,U,W)))}),d&&(m=m.concat(hD(d,n,o,t))),m}function vI(n,r){const t=r.query,o=Q0(n,t);return{hashFn:()=>(function lD(n){return n.viewCache_.serverCache.getNode()}(r)||gr.EMPTY_NODE).hash(),onComplete:d=>{if("ok"===d)return o?function pI(n,r,t){const o=zw(n,t);if(o){const d=Sm(o),m=d.path,D=d.queryId,x=vl(m,r);return Ww(n,m,new Ap(Ew(D),x))}return[]}(n,t._path,o):function fI(n,r){return Tm(n,new Ap({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(n,t._path);{const m=function ew(n,r){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const o=new Error(n+" at "+r._path.toString()+": "+t);return o.code=n.toUpperCase(),o}(d,t);return Hw(n,t,null,m)}}}}function Q0(n,r){const t=$w(r);return n.queryToTagMap.get(t)}function $w(n){return n._path.toString()+"$"+n._queryIdentifier}function zw(n,r){return n.tagToQueryMap.get(r)}function Sm(n){const r=n.indexOf("$");return(0,le.hu)(-1!==r&&r<n.length-1,"Bad queryKey."),{queryId:n.substr(r+1),path:new Sr(n.substr(0,r))}}function Ww(n,r,t){const o=n.syncPointTree_.get(r);return(0,le.hu)(o,"Missing sync point for query tag that we're tracking"),hD(o,t,Tw(n.pendingWriteTree_,r),null)}function Am(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function gD(){return(0,le.hu)(Vw,"Reference.ts has not been loaded"),Vw}())(n._repo,n._path):n}class zy{constructor(r){this.node_=r}getImmediateChild(r){const t=this.node_.getImmediateChild(r);return new zy(t)}node(){return this.node_}}class qw{constructor(r,t){this.syncTree_=r,this.path_=t}getImmediateChild(r){const t=Ls(this.path_,r);return new qw(this.syncTree_,t)}node(){return Z0(this.syncTree_,this.path_)}}const Yw=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},J0=function(n,r,t){return n&&"object"==typeof n?((0,le.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?X0(n[".sv"],r,t):"object"==typeof n[".sv"]?XI(n[".sv"],r):void(0,le.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},X0=function(n,r,t){if("timestamp"===n)return t.timestamp;(0,le.hu)(!1,"Unexpected server value: "+n)},XI=function(n,r,t){n.hasOwnProperty("increment")||(0,le.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const o=n.increment;"number"!=typeof o&&(0,le.hu)(!1,"Unexpected increment value: "+o);const d=r.node();if((0,le.hu)(null!==d&&typeof d<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!d.isLeafNode())return o;const D=d.getValue();return"number"!=typeof D?o:D+o},wI=function(n,r,t,o){return wD(r,new qw(t,n),o)},bD=function(n,r,t){return wD(n,new zy(r),t)};function wD(n,r,t){const o=n.getPriority().val(),d=J0(o,r.getImmediateChild(".priority"),t);let m;if(n.isLeafNode()){const D=n,x=J0(D.getValue(),r,t);return x!==D.getValue()||d!==D.getPriority().val()?new pm(x,ys(d)):n}{const D=n;return m=D,d!==D.getPriority().val()&&(m=m.updatePriority(new pm(d))),D.forEachChild(Hi,(x,U)=>{const W=wD(U,r.getImmediateChild(x),t);W!==U&&(m=m.updateImmediateChild(x,W))}),m}}class eb{constructor(r="",t=null,o={children:{},childCount:0}){this.name=r,this.parent=t,this.node=o}}function tb(n,r){let t=r instanceof Sr?r:new Sr(r),o=n,d=Ar(t);for(;null!==d;){const m=(0,le.DV)(o.node.children,d)||{children:{},childCount:0};o=new eb(d,o,m),t=Pi(t),d=Ar(t)}return o}function Pp(n){return n.node.value}function Zw(n,r){n.node.value=r,nb(n)}function ED(n){return n.node.childCount>0}function Wy(n,r){fo(n.node.children,(t,o)=>{r(new eb(t,n,o))})}function Qw(n,r,t,o){t&&!o&&r(n),Wy(n,d=>{Qw(d,r,!0,o)}),t&&o&&r(n)}function Ky(n){return new Sr(null===n.parent?n.name:Ky(n.parent)+"/"+n.name)}function nb(n){null!==n.parent&&function Jw(n,r,t){const o=function DD(n){return void 0===Pp(n)&&!ED(n)}(t),d=(0,le.r3)(n.node.children,r);o&&d?(delete n.node.children[r],n.node.childCount--,nb(n)):!o&&!d&&(n.node.children[r]=t.node,n.node.childCount++,nb(n))}(n.parent,n.name,n)}const eC=/[\[\].#$\/\u0000-\u001F\u007F]/,ID=/[\[\].#$\u0000-\u001F\u007F]/,qy=10485760,rb=function(n){return"string"==typeof n&&0!==n.length&&!eC.test(n)},CD=function(n){return"string"==typeof n&&0!==n.length&&!ID.test(n)},ib=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ld(n)||n&&"object"==typeof n&&(0,le.r3)(n,".sv")},gd=function(n,r,t,o){o&&void 0===r||Yy((0,le.gK)(n,"value"),r,t)},Yy=function(n,r,t){const o=t instanceof Sr?new NE(t,n):t;if(void 0===r)throw new Error(n+"contains undefined "+Ip(o));if("function"==typeof r)throw new Error(n+"contains a function "+Ip(o)+" with contents = "+r.toString());if(ld(r))throw new Error(n+"contains "+r.toString()+" "+Ip(o));if("string"==typeof r&&r.length>qy/3&&(0,le.ug)(r)>qy)throw new Error(n+"contains a string greater than "+qy+" utf8 bytes "+Ip(o)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let d=!1,m=!1;if(fo(r,(D,x)=>{if(".value"===D)d=!0;else if(".priority"!==D&&".sv"!==D&&(m=!0,!rb(D)))throw new Error(n+" contains an invalid key ("+D+") "+Ip(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function GD(n,r){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(r),n.byteLength_+=(0,le.ug)(r),ME(n)})(o,D),Yy(n,x,o),function jD(n){const r=n.parts_.pop();n.byteLength_-=(0,le.ug)(r),n.parts_.length>0&&(n.byteLength_-=1)}(o)}),d&&m)throw new Error(n+' contains ".value" child '+Ip(o)+" in addition to actual children.")}},II=function(n,r,t,o){if(o&&void 0===r)return;const d=(0,le.gK)(n,"values");if(!r||"object"!=typeof r||Array.isArray(r))throw new Error(d+" must be an object containing the children to replace.");const m=[];fo(r,(D,x)=>{const U=new Sr(D);if(Yy(d,x,Ls(t,U)),".priority"===SE(U)&&!ib(x))throw new Error(d+"contains an invalid value for '"+U.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");m.push(U)}),function(n,r){let t,o;for(t=0;t<r.length;t++){o=r[t];const m=Ty(o);for(let D=0;D<m.length;D++)if((".priority"!==m[D]||D!==m.length-1)&&!rb(m[D]))throw new Error(n+"contains an invalid key ("+m[D]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}r.sort(VD);let d=null;for(t=0;t<r.length;t++){if(o=r[t],null!==d&&hu(d,o))throw new Error(n+"contains a path "+d.toString()+" that is ancestor of another path "+o.toString());d=o}}(d,m)},TD=function(n,r,t){if(!t||void 0!==r){if(ld(r))throw new Error((0,le.gK)(n,"priority")+"is "+r.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ib(r))throw new Error((0,le.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sb=function(n,r,t,o){if(!(o&&void 0===t||rb(t)))throw new Error((0,le.gK)(n,r)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ob=function(n,r,t,o){if(!(o&&void 0===t||CD(t)))throw new Error((0,le.gK)(n,r)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},CI=function(n,r,t,o){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ob(n,r,t,o)},Ac=function(n,r){if(".info"===Ar(r))throw new Error(n+" failed = Can't modify data under /.info/")},TI=function(n,r){const t=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!rb(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),CD(n)}(t))throw new Error((0,le.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class nC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xw(n,r){let t=null;for(let o=0;o<r.length;o++){const d=r[o],m=d.getPath();null!==t&&!R0(m,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:m}),t.events.push(d)}t&&n.eventLists_.push(t)}function SD(n,r,t){Xw(n,t),s(n,o=>R0(o,r))}function qu(n,r,t){Xw(n,t),s(n,o=>hu(o,r)||hu(r,o))}function s(n,r){n.recursionDepth_++;let t=!0;for(let o=0;o<n.eventLists_.length;o++){const d=n.eventLists_[o];d&&(r(d.path)?(a(n.eventLists_[o]),n.eventLists_[o]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function a(n){for(let r=0;r<n.events.length;r++){const t=n.events[r];if(null!==t){n.events[r]=null;const o=t.getEventRunner();ad&&is("event: "+t.toString()),pf(o)}}}const c="repo_interrupt",f=25;class g{constructor(r,t,o,d){this.repoInfo_=r,this.forceRestClient_=t,this.authTokenProvider_=o,this.appCheckProvider_=d,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=U0(),this.transactionQueueTree_=new eb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function I(n){const t=n.infoData_.getNode(new Sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function N(n){return Yw({timestamp:I(n)})}function k(n,r,t,o,d){n.dataUpdateCount++;const m=new Sr(r);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(r,t):t;let D=[];if(d)if(o){const U=(0,le.UI)(t,W=>ys(W));D=function JI(n,r,t,o){const d=zw(n,o);if(d){const m=Sm(d),D=m.path,x=m.queryId,U=vl(D,r),W=$i.fromObject(t);return Ww(n,D,new wm(Ew(x),U,W))}return[]}(n.serverSyncTree_,m,U,d)}else{const U=ys(t);D=gI(n.serverSyncTree_,m,U,d)}else if(o){const U=(0,le.UI)(t,W=>ys(W));D=function yD(n,r,t){const o=$i.fromObject(t);return Tm(n,new wm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,o))}(n.serverSyncTree_,m,U)}else{const U=ys(t);D=Ef(n.serverSyncTree_,m,U)}let x=m;D.length>0&&(x=lb(n,m)),qu(n.eventQueue_,x,D)}function H(n,r){ue(n,"connected",r),!1===r&&function on(n){ab(n,"onDisconnectEvents");const r=N(n),t=U0();Ly(n.onDisconnect_,hi(),(d,m)=>{const D=wI(d,m,n.serverSyncTree_,r);vm(t,d,D)});let o=[];Ly(t,hi(),(d,m)=>{o=o.concat(Ef(n.serverSyncTree_,d,m));const D=OI(n,d);lb(n,D)}),n.onDisconnect_=U0(),qu(n.eventQueue_,hi(),o)}(n)}function ue(n,r,t){const o=new Sr("/.info/"+r),d=ys(t);n.infoData_.updateSnapshot(o,d);const m=Ef(n.infoSyncTree_,o,d);qu(n.eventQueue_,o,m)}function Oe(n){return n.nextWriteId_++}function Dt(n,r,t,o,d){ab(n,"set",{path:r.toString(),value:t,priority:o});const m=N(n),D=ys(t,o),x=Z0(n.serverSyncTree_,r),U=bD(D,x,m),W=Oe(n),ie=q0(n.serverSyncTree_,r,U,W,!0);Xw(n.eventQueue_,ie),n.server_.put(r.toString(),D.val(!0),(De,Ge)=>{const Tt="ok"===De;Tt||zo("set at "+r+" failed: "+De);const Vt=Sc(n.serverSyncTree_,W,!Tt);qu(n.eventQueue_,r,Vt),Om(0,d,De,Ge)});const Ee=OI(n,r);lb(n,Ee),qu(n.eventQueue_,Ee,[])}function _n(n,r,t){n.server_.onDisconnectCancel(r.toString(),(o,d)=>{"ok"===o&&bw(n.onDisconnect_,r),Om(0,t,o,d)})}function $n(n,r,t,o){const d=ys(t);n.server_.onDisconnectPut(r.toString(),d.val(!0),(m,D)=>{"ok"===m&&vm(n.onDisconnect_,r,d),Om(0,o,m,D)})}function Us(n,r,t){let o;o=".info"===Ar(r._path)?Hw(n.infoSyncTree_,r,t):Hw(n.serverSyncTree_,r,t),SD(n.eventQueue_,r._path,o)}function SI(n){n.persistentConnection_&&n.persistentConnection_.interrupt(c)}function ab(n,...r){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),is(t,...r)}function Om(n,r,t,o){r&&pf(()=>{if("ok"===t)r(null);else{const d=(t||"error").toUpperCase();let m=d;o&&(m+=": "+o);const D=new Error(m);D.code=d,r(D)}})}function AI(n,r,t){return Z0(n.serverSyncTree_,r,t)||gr.EMPTY_NODE}function AD(n,r=n.transactionQueueTree_){if(r||OD(n,r),Pp(r)){const t=iC(n,r);(0,le.hu)(t.length>0,"Sending zero length transaction queue"),t.every(d=>0===d.status)&&function zC(n,r,t){const o=t.map(W=>W.currentWriteId),d=AI(n,r,o);let m=d;const D=d.hash();for(let W=0;W<t.length;W++){const ie=t[W];(0,le.hu)(0===ie.status,"tryToSendTransactionQueue_: items in queue should all be run."),ie.status=1,ie.retryCount++;const Ee=vl(r,ie.path);m=m.updateChild(Ee,ie.currentOutputSnapshotRaw)}const x=m.val(!0),U=r;n.server_.put(U.toString(),x,W=>{ab(n,"transaction put response",{path:U.toString(),status:W});let ie=[];if("ok"===W){const Ee=[];for(let De=0;De<t.length;De++)t[De].status=2,ie=ie.concat(Sc(n.serverSyncTree_,t[De].currentWriteId)),t[De].onComplete&&Ee.push(()=>t[De].onComplete(null,!0,t[De].currentOutputSnapshotResolved)),t[De].unwatcher();OD(n,tb(n.transactionQueueTree_,r)),AD(n,n.transactionQueueTree_),qu(n.eventQueue_,r,ie);for(let De=0;De<Ee.length;De++)pf(Ee[De])}else{if("datastale"===W)for(let Ee=0;Ee<t.length;Ee++)t[Ee].status=3===t[Ee].status?4:0;else{zo("transaction at "+U.toString()+" failed: "+W);for(let Ee=0;Ee<t.length;Ee++)t[Ee].status=4,t[Ee].abortReason=W}lb(n,r)}},D)}(n,Ky(r),t)}else ED(r)&&Wy(r,t=>{AD(n,t)})}function lb(n,r){const t=rC(n,r),o=Ky(t);return function WC(n,r,t){if(0===r.length)return;const o=[];let d=[];const D=r.filter(x=>0===x.status).map(x=>x.currentWriteId);for(let x=0;x<r.length;x++){const U=r[x],W=vl(t,U.path);let Ee,ie=!1;if((0,le.hu)(null!==W,"rerunTransactionsUnderNode_: relativePath should not be null."),4===U.status)ie=!0,Ee=U.abortReason,d=d.concat(Sc(n.serverSyncTree_,U.currentWriteId,!0));else if(0===U.status)if(U.retryCount>=f)ie=!0,Ee="maxretry",d=d.concat(Sc(n.serverSyncTree_,U.currentWriteId,!0));else{const De=AI(n,U.path,D);U.currentInputSnapshot=De;const Ge=r[x].update(De.val());if(void 0!==Ge){Yy("transaction failed: Data returned ",Ge,U.path);let Tt=ys(Ge);"object"==typeof Ge&&null!=Ge&&(0,le.r3)(Ge,".priority")||(Tt=Tt.updatePriority(De.getPriority()));const Xt=U.currentWriteId,Un=N(n),Bn=bD(Tt,De,Un);U.currentOutputSnapshotRaw=Tt,U.currentOutputSnapshotResolved=Bn,U.currentWriteId=Oe(n),D.splice(D.indexOf(Xt),1),d=d.concat(q0(n.serverSyncTree_,U.path,Bn,U.currentWriteId,U.applyLocally)),d=d.concat(Sc(n.serverSyncTree_,Xt,!0))}else ie=!0,Ee="nodata",d=d.concat(Sc(n.serverSyncTree_,U.currentWriteId,!0))}qu(n.eventQueue_,t,d),d=[],ie&&(r[x].status=2,setTimeout(r[x].unwatcher,Math.floor(0)),r[x].onComplete&&o.push("nodata"===Ee?()=>r[x].onComplete(null,!1,r[x].currentInputSnapshot):()=>r[x].onComplete(new Error(Ee),!1,null)))}OD(n,n.transactionQueueTree_);for(let x=0;x<o.length;x++)pf(o[x]);AD(n,n.transactionQueueTree_)}(n,iC(n,t),o),o}function rC(n,r){let t,o=n.transactionQueueTree_;for(t=Ar(r);null!==t&&void 0===Pp(o);)o=tb(o,t),t=Ar(r=Pi(r));return o}function iC(n,r){const t=[];return sC(n,r,t),t.sort((o,d)=>o.order-d.order),t}function sC(n,r,t){const o=Pp(r);if(o)for(let d=0;d<o.length;d++)t.push(o[d]);Wy(r,d=>{sC(n,d,t)})}function OD(n,r){const t=Pp(r);if(t){let o=0;for(let d=0;d<t.length;d++)2!==t[d].status&&(t[o]=t[d],o++);t.length=o,Zw(r,t.length>0?t:void 0)}Wy(r,o=>{OD(n,o)})}function OI(n,r){const t=Ky(rC(n,r)),o=tb(n.transactionQueueTree_,r);return function EI(n,r,t){let o=t?n:n.parent;for(;null!==o;){if(r(o))return!0;o=o.parent}}(o,d=>{NI(n,d)}),NI(n,o),Qw(o,d=>{NI(n,d)}),t}function NI(n,r){const t=Pp(r);if(t){const o=[];let d=[],m=-1;for(let D=0;D<t.length;D++)3===t[D].status||(1===t[D].status?((0,le.hu)(m===D-1,"All SENT items should be at beginning of queue."),m=D,t[D].status=3,t[D].abortReason="set"):((0,le.hu)(0===t[D].status,"Unexpected transaction status in abort"),t[D].unwatcher(),d=d.concat(Sc(n.serverSyncTree_,t[D].currentWriteId,!0)),t[D].onComplete&&o.push(t[D].onComplete.bind(null,new Error("set"),!1,null))));-1===m?Zw(r,void 0):t.length=m+1,qu(n.eventQueue_,Ky(r),d);for(let D=0;D<o.length;D++)pf(o[D])}}const MI=function(n,r){const t=YC(n),o=t.namespace;return"firebase.com"===t.domain&&cu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==t.domain&&cu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ec(t.host,t.secure,o,"ws"===t.scheme||"wss"===t.scheme,r,"",o!==t.subdomain),path:new Sr(t.pathString)}},YC=function(n){let r="",t="",o="",d="",m="",D=!0,x="https",U=443;if("string"==typeof n){let W=n.indexOf("//");W>=0&&(x=n.substring(0,W-1),n=n.substring(W+2));let ie=n.indexOf("/");-1===ie&&(ie=n.length);let Ee=n.indexOf("?");-1===Ee&&(Ee=n.length),r=n.substring(0,Math.min(ie,Ee)),ie<Ee&&(d=function KC(n){let r="";const t=n.split("/");for(let o=0;o<t.length;o++)if(t[o].length>0){let d=t[o];try{d=decodeURIComponent(d.replace(/\+/g," "))}catch{}r+="/"+d}return r}(n.substring(ie,Ee)));const De=function qC(n){const r={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const o=t.split("=");2===o.length?r[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):zo(`Invalid query segment '${t}' in query '${n}'`)}return r}(n.substring(Math.min(n.length,Ee)));W=r.indexOf(":"),W>=0?(D="https"===x||"wss"===x,U=parseInt(r.substring(W+1),10)):W=r.length;const Ge=r.slice(0,W);if("localhost"===Ge.toLowerCase())t="localhost";else if(Ge.split(".").length<=2)t=Ge;else{const Tt=r.indexOf(".");o=r.substring(0,Tt).toLowerCase(),t=r.substring(Tt+1),m=o}"ns"in De&&(m=De.ns)}return{host:r,port:U,domain:t,subdomain:o,secure:D,scheme:x,pathString:d,namespace:m}},oC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ZC=function(){let n=0;const r=[];return function(t){const o=t===n;let d;n=t;const m=new Array(8);for(d=7;d>=0;d--)m[d]=oC.charAt(t%64),t=Math.floor(t/64);(0,le.hu)(0===t,"Cannot push at time == 0");let D=m.join("");if(o){for(d=11;d>=0&&63===r[d];d--)r[d]=0;r[d]++}else for(d=0;d<12;d++)r[d]=Math.floor(64*Math.random());for(d=0;d<12;d++)D+=oC.charAt(r[d]);return(0,le.hu)(20===D.length,"nextPushId: Length should be 20."),D}}();class aC{constructor(r,t,o,d){this.eventType=r,this.eventRegistration=t,this.snapshot=o,this.prevName=d}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,le.Wl)(this.snapshot.exportVal())}}class lC{constructor(r,t,o){this.eventRegistration=r,this.error=t,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class RI{constructor(r,t){this.snapshotCallback=r,this.cancelCallback=t}onValue(r,t){this.snapshotCallback.call(null,r,t)}onCancel(r){return(0,le.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class uC{constructor(r,t){this._repo=r,this._path=t}cancel(){const r=new le.BH;return _n(this._repo,this._path,r.wrapCallback(()=>{})),r.promise}remove(){Ac("OnDisconnect.remove",this._path);const r=new le.BH;return $n(this._repo,this._path,null,r.wrapCallback(()=>{})),r.promise}set(r){Ac("OnDisconnect.set",this._path),gd("OnDisconnect.set",r,this._path,!1);const t=new le.BH;return $n(this._repo,this._path,r,t.wrapCallback(()=>{})),t.promise}setWithPriority(r,t){Ac("OnDisconnect.setWithPriority",this._path),gd("OnDisconnect.setWithPriority",r,this._path,!1),TD("OnDisconnect.setWithPriority",t,!1);const o=new le.BH;return function Ft(n,r,t,o,d){const m=ys(t,o);n.server_.onDisconnectPut(r.toString(),m.val(!0),(D,x)=>{"ok"===D&&vm(n.onDisconnect_,r,m),Om(0,d,D,x)})}(this._repo,this._path,r,t,o.wrapCallback(()=>{})),o.promise}update(r){Ac("OnDisconnect.update",this._path),II("OnDisconnect.update",r,this._path,!1);const t=new le.BH;return function ur(n,r,t,o){if((0,le.xb)(t))return is("onDisconnect().update() called with empty data.  Don't do anything."),void Om(0,o,"ok",void 0);n.server_.onDisconnectMerge(r.toString(),t,(d,m)=>{"ok"===d&&fo(t,(D,x)=>{const U=ys(x);vm(n.onDisconnect_,Ls(r,D),U)}),Om(0,o,d,m)})}(this._repo,this._path,r,t.wrapCallback(()=>{})),t.promise}}class Yu{constructor(r,t,o,d){this._repo=r,this._path=t,this._queryParams=o,this._orderByCalled=d}get key(){return Or(this._path)?null:SE(this._path)}get ref(){return new md(this._repo,this._path)}get _queryIdentifier(){const r=F0(this._queryParams),t=w0(r);return"{}"===t?"default":t}get _queryObject(){return F0(this._queryParams)}isEqual(r){if(!((r=(0,le.m9)(r))instanceof Yu))return!1;const t=this._repo===r._repo,o=R0(this._path,r._path);return t&&o&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function AE(n){let r="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(r+="/"+encodeURIComponent(String(n.pieces_[t])));return r||"/"}(this._path)}}function ND(n,r){if(!0===n._orderByCalled)throw new Error(r+": You can't combine multiple orderBy calls.")}function Nm(n){let r=null,t=null;if(n.hasStart()&&(r=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===fd){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",d="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ud)throw new Error(o);if("string"!=typeof r)throw new Error(d)}if(n.hasEnd()){if(n.getIndexEndName()!==wc)throw new Error(o);if("string"!=typeof t)throw new Error(d)}}else if(n.getIndex()===Hi){if(null!=r&&!ib(r)||null!=t&&!ib(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,le.hu)(n.getIndex()instanceof ky||n.getIndex()===x0,"unknown index type."),null!=r&&"object"==typeof r||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function MD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class md extends Yu{constructor(r,t){super(r,t,new ma,!1)}get parent(){const r=OE(this._path);return null===r?null:new md(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class Zy{constructor(r,t,o){this._node=r,this.ref=t,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const t=new Sr(r),o=Qy(this.ref,r);return new Zy(this._node.getChild(t),o,Hi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,d)=>r(new Zy(d,Qy(this.ref,o),Hi)))}hasChild(r){const t=new Sr(r);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cC(n,r){return(n=(0,le.m9)(n))._checkNotDeleted("ref"),void 0!==r?Qy(n._root,r):n._root}function dC(n,r){(n=(0,le.m9)(n))._checkNotDeleted("refFromURL");const t=MI(r,n._repo.repoInfo_.nodeAdmin);TI("refFromURL",t);const o=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&o.host!==n._repo.repoInfo_.host&&cu("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+n._repo.repoInfo_.host+")"),cC(n,t.path.toString())}function Qy(n,r){return null===Ar((n=(0,le.m9)(n))._path)?CI("child","path",r,!1):ob("child","path",r,!1),new md(n._repo,Ls(n._path,r))}function PI(n,r){n=(0,le.m9)(n),Ac("set",n._path),gd("set",r,n._path,!1);const t=new le.BH;return Dt(n._repo,n._path,r,null,t.wrapCallback(()=>{})),t.promise}function tT(n,r){II("update",r,n._path,!1);const t=new le.BH;return function $t(n,r,t,o){ab(n,"update",{path:r.toString(),value:t});let d=!0;const m=N(n),D={};if(fo(t,(x,U)=>{d=!1,D[x]=wI(Ls(r,x),ys(U),n.serverSyncTree_,m)}),d)is("update() called with empty data.  Don't do anything."),Om(0,o,"ok",void 0);else{const x=Oe(n),U=function _D(n,r,t,o){!function $I(n,r,t,o){(0,le.hu)(o>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:r,children:t,writeId:o,visible:!0}),n.visibleWrites=H0(n.visibleWrites,r,t),n.lastWriteId=o}(n.pendingWriteTree_,r,t,o);const d=$i.fromObject(t);return Tm(n,new wm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,d))}(n.serverSyncTree_,r,D,x);Xw(n.eventQueue_,U),n.server_.merge(r.toString(),t,(W,ie)=>{const Ee="ok"===W;Ee||zo("update at "+r+" failed: "+W);const De=Sc(n.serverSyncTree_,x,!Ee),Ge=De.length>0?lb(n,r):r;qu(n.eventQueue_,Ge,De),Om(0,o,W,ie)}),fo(t,W=>{const ie=OI(n,Ls(r,W));lb(n,ie)}),qu(n.eventQueue_,r,[])}}(n._repo,n._path,r,t.wrapCallback(()=>{})),t.promise}function nT(n){n=(0,le.m9)(n);const r=new RI(()=>{}),t=new eE(r);return function Ze(n,r,t){const o=function mI(n,r){const t=r._path;let o=null;n.syncPointTree_.foreachOnPath(t,(W,ie)=>{const Ee=vl(W,t);o=o||hh(ie,Ee)});let d=n.syncPointTree_.get(t);d?o=o||hh(d,hi()):(d=new Lw,n.syncPointTree_=n.syncPointTree_.set(t,d));const m=null!=o,D=m?new Op(o,!0,!1):null;return function aI(n){return G0(n.viewCache_)}(fD(d,r,Tw(n.pendingWriteTree_,r._path),m?D.getNode():gr.EMPTY_NODE,m))}(n.serverSyncTree_,r);return null!=o?Promise.resolve(o):n.server_.get(r).then(d=>{const m=ys(d).withIndex(r._queryParams.getIndex());let D;if(Y0(n.serverSyncTree_,r,t,!0),r._queryParams.loadsAllData())D=Ef(n.serverSyncTree_,r._path,m);else{const x=Q0(n.serverSyncTree_,r);D=gI(n.serverSyncTree_,r._path,m,x)}return qu(n.eventQueue_,r._path,D),Hw(n.serverSyncTree_,r,t,null,!0),m},d=>(ab(n,"get for query "+(0,le.Wl)(r)+" failed: "+d),Promise.reject(new Error(d))))}(n._repo,n,t).then(o=>new Zy(o,new md(n._repo,n._path),n._queryParams.getIndex()))}class eE{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,t){const o=t._queryParams.getIndex();return new aC("value",this,new Zy(r.snapshotNode,new md(t._repo,t._path),o))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,t){return this.callbackContext.hasCancelCallback?new lC(this,r,t):null}matches(r){return r instanceof eE&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RD{constructor(r,t){this.eventType=r,this.callbackContext=t}respondsTo(r){let t="children_added"===r?"child_added":r;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(r,t){return this.callbackContext.hasCancelCallback?new lC(this,r,t):null}createEvent(r,t){(0,le.hu)(null!=r.childName,"Child events should have a childName.");const o=Qy(new md(t._repo,t._path),r.childName),d=t._queryParams.getIndex();return new aC(r.type,this,new Zy(r.snapshotNode,o,d),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof RD&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function tE(n,r,t,o,d){let m;if("object"==typeof o&&(m=void 0,d=o),"function"==typeof o&&(m=o),d&&d.onlyOnce){const U=t,W=(ie,Ee)=>{Us(n._repo,n,x),U(ie,Ee)};W.userCallback=t.userCallback,W.context=t.context,t=W}const D=new RI(t,m||void 0),x="value"===r?new eE(D):new RD(r,D);return function vs(n,r,t){let o;o=".info"===Ar(r._path)?Y0(n.infoSyncTree_,r,t):Y0(n.serverSyncTree_,r,t),SD(n.eventQueue_,r._path,o)}(n._repo,n,x),()=>Us(n._repo,n,x)}function xI(n,r,t,o){return tE(n,"value",r,t,o)}function hC(n,r,t,o){return tE(n,"child_added",r,t,o)}function fC(n,r,t,o){return tE(n,"child_changed",r,t,o)}function pC(n,r,t,o){return tE(n,"child_moved",r,t,o)}function gC(n,r,t,o){return tE(n,"child_removed",r,t,o)}function mC(n,r,t){let o=null;const d=t?new RI(t):null;"value"===r?o=new eE(d):r&&(o=new RD(r,d)),Us(n._repo,n,o)}class fh{}class _C extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){gd("endAt",this._value,r._path,!0);const t=k0(r._queryParams,this._value,this._key);if(MD(t),Nm(t),r._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Yu(r._repo,r._path,t,r._orderByCalled)}}class iT extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){gd("endBefore",this._value,r._path,!1);const t=function vw(n,r,t){let o;return o=k0(n,r,n.index_===fd||t?t:ud),o.endBeforeSet_=!0,o}(r._queryParams,this._value,this._key);if(MD(t),Nm(t),r._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Yu(r._repo,r._path,t,r._orderByCalled)}}class yC extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){gd("startAt",this._value,r._path,!0);const t=HE(r._queryParams,this._value,this._key);if(MD(t),Nm(t),r._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Yu(r._repo,r._path,t,r._orderByCalled)}}class aT extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){gd("startAfter",this._value,r._path,!1);const t=function GI(n,r,t){let o;return o=HE(n,r,n.index_===fd||t?t:wc),o.startAfterSet_=!0,o}(r._queryParams,this._value,this._key);if(MD(t),Nm(t),r._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Yu(r._repo,r._path,t,r._orderByCalled)}}class uT extends fh{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Yu(r._repo,r._path,function KD(n,r){const t=n.copy();return t.limitSet_=!0,t.limit_=r,t.viewFrom_="l",t}(r._queryParams,this._limit),r._orderByCalled)}}class dT extends fh{constructor(r){super(),this._limit=r}_apply(r){if(r._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Yu(r._repo,r._path,function qD(n,r){const t=n.copy();return t.limitSet_=!0,t.limit_=r,t.viewFrom_="r",t}(r._queryParams,this._limit),r._orderByCalled)}}class fT extends fh{constructor(r){super(),this._path=r}_apply(r){ND(r,"orderByChild");const t=new Sr(this._path);if(Or(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new ky(t),d=vf(r._queryParams,o);return Nm(d),new Yu(r._repo,r._path,d,!0)}}class gT extends fh{_apply(r){ND(r,"orderByKey");const t=vf(r._queryParams,fd);return Nm(t),new Yu(r._repo,r._path,t,!0)}}class _T extends fh{_apply(r){ND(r,"orderByPriority");const t=vf(r._queryParams,Hi);return Nm(t),new Yu(r._repo,r._path,t,!0)}}class vT extends fh{_apply(r){ND(r,"orderByValue");const t=vf(r._queryParams,x0);return Nm(t),new Yu(r._repo,r._path,t,!0)}}class wT extends fh{constructor(r,t){super(),this._value=r,this._key=t}_apply(r){if(gd("equalTo",this._value,r._path,!1),r._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(r._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _C(this._value,this._key)._apply(new yC(this._value,this._key)._apply(r))}}function ph(n,...r){let t=(0,le.m9)(n);for(const o of r)t=o._apply(t);return t}(function Uw(n){(0,le.hu)(!Tc,"__referenceConstructor has already been defined"),Tc=n})(md),function Gw(n){(0,le.hu)(!Vw,"__referenceConstructor has already been defined"),Vw=n}(md);const DT="FIREBASE_DATABASE_EMULATOR_HOST",kI={};let vC=!1;function bC(n,r,t,o,d){let m=o||n.options.databaseURL;void 0===m&&(n.options.projectId||cu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",n.options.projectId),m=`${n.options.projectId}-default-rtdb.firebaseio.com`);let U,W,D=MI(m,d),x=D.repoInfo;typeof process<"u"&&process.env&&(W=process.env[DT]),W?(U=!0,m=`http://${W}?ns=${x.namespace}`,D=MI(m,d),x=D.repoInfo):U=!D.repoInfo.secure;const ie=d&&U?new gf(gf.OWNER):new T0(n.name,n.options,r);TI("Invalid Firebase Database URL",D),Or(D.path)||cu("Database URL must point to the root of a Firebase Database (not including a child path).");const Ee=function TT(n,r,t,o){let d=kI[r.name];d||(d={},kI[r.name]=d);let m=d[n.toURLString()];return m&&cu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),m=new g(n,vC,t,o),d[n.toURLString()]=m,m}(x,n,ie,new nw(n.name,t));return new AT(Ee,n)}class AT{constructor(r,t){this._repoInternal=r,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function y(n,r,t){if(n.stats_=du(n.repoInfo_),n.forceRestClient_||_y())n.server_=new L0(n.repoInfo_,(o,d,m,D)=>{k(n,o,d,m,D)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>H(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,le.Wl)(t)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}n.persistentConnection_=new yf(n.repoInfo_,r,(o,d,m,D)=>{k(n,o,d,m,D)},o=>{H(n,o)},o=>{!function X(n,r){fo(r,(t,o)=>{ue(n,t,o)})}(n,o)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(o=>{n.server_.refreshAuthToken(o)}),n.appCheckProvider_.addTokenChangeListener(o=>{n.server_.refreshAppCheckToken(o.token)}),n.statsReporter_=function rw(n,r){const t=n.toString();return lm[t]||(lm[t]=r()),lm[t]}(n.repoInfo_,()=>new qE(n.stats_,n.server_)),n.infoData_=new zE,n.infoSyncTree_=new jw({startListening:(o,d,m,D)=>{let x=[];const U=n.infoData_.getNode(o._path);return U.isEmpty()||(x=Ef(n.infoSyncTree_,o._path,U),setTimeout(()=>{D("ok")},0)),x},stopListening:()=>{}}),ue(n,"connected",!1),n.serverSyncTree_=new jw({startListening:(o,d,m,D)=>(n.server_.listen(o,m,d,(x,U)=>{const W=D(x,U);qu(n.eventQueue_,o._path,W)}),[]),stopListening:(o,d)=>{n.server_.unlisten(o,d)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new md(this._repo,hi())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CT(n,r){const t=kI[r];(!t||t[n.key]!==n)&&cu(`Database ${r}(${n.repoInfo_}) has already been deleted.`),SI(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&cu("Cannot call "+r+" on a deleted database.")}}function wC(){u.IS_TRANSPORT_INITIALIZED&&zo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function OT(){wC(),Hu.forceDisallow()}function NT(){wC(),i.forceDisallow(),Hu.forceAllow()}function PT(n,r){dh(n,r)}const kT={".sv":"timestamp"};class UT{constructor(r,t){this.committed=r,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}yf.prototype.simpleListen=function(n,r){this.sendRequest("q",{p:n},r)},yf.prototype.echo=function(n,r){this.sendRequest("echo",{d:n},r)},function xT(n){Vu(Ll.SDK_VERSION),(0,Ll._registerComponent)(new Jd.wA("database",(r,{instanceIdentifier:t})=>bC(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ll.registerVersion)(rs,"0.14.4",n),(0,Ll.registerVersion)(rs,"0.14.4","esm2017")}();const jT=new yl.Yd("@firebase/database-compat"),DC=function(n){jT.warn("FIREBASE WARNING: "+n)};class zT{constructor(r){this._delegate=r}cancel(r){(0,le.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,le.Wj)("OnDisconnect.cancel","onComplete",r,!0);const t=this._delegate.cancel();return r&&t.then(()=>r(null),o=>r(o)),t}remove(r){(0,le.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,le.Wj)("OnDisconnect.remove","onComplete",r,!0);const t=this._delegate.remove();return r&&t.then(()=>r(null),o=>r(o)),t}set(r,t){(0,le.Dv)("OnDisconnect.set",1,2,arguments.length),(0,le.Wj)("OnDisconnect.set","onComplete",t,!0);const o=this._delegate.set(r);return t&&o.then(()=>t(null),d=>t(d)),o}setWithPriority(r,t,o){(0,le.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,le.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const d=this._delegate.setWithPriority(r,t);return o&&d.then(()=>o(null),m=>o(m)),d}update(r,t){if((0,le.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(r)){const d={};for(let m=0;m<r.length;++m)d[""+m]=r[m];r=d,DC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,le.Wj)("OnDisconnect.update","onComplete",t,!0);const o=this._delegate.update(r);return t&&o.then(()=>t(null),d=>t(d)),o}}class WT{constructor(r,t){this.committed=r,this.snapshot=t}toJSON(){return(0,le.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Mm{constructor(r,t){this._database=r,this._delegate=t}val(){return(0,le.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,le.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,le.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,le.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(r){return(0,le.Dv)("DataSnapshot.child",0,1,arguments.length),r=String(r),ob("DataSnapshot.child","path",r,!1),new Mm(this._database,this._delegate.child(r))}hasChild(r){return(0,le.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ob("DataSnapshot.hasChild","path",r,!1),this._delegate.hasChild(r)}getPriority(){return(0,le.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(r){return(0,le.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,le.Wj)("DataSnapshot.forEach","action",r,!1),this._delegate.forEach(t=>r(new Mm(this._database,t)))}hasChildren(){return(0,le.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,le.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,le.Dv)("DataSnapshot.ref",0,0,arguments.length),new Oc(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class bl{constructor(r,t){this.database=r,this._delegate=t}on(r,t,o,d){var m;(0,le.Dv)("Query.on",2,4,arguments.length),(0,le.Wj)("Query.on","callback",t,!1);const D=bl.getCancelAndContextArgs_("Query.on",o,d),x=(W,ie)=>{t.call(D.context,new Mm(this.database,W),ie)};x.userCallback=t,x.context=D.context;const U=null===(m=D.cancel)||void 0===m?void 0:m.bind(D.context);switch(r){case"value":return xI(this._delegate,x,U),t;case"child_added":return hC(this._delegate,x,U),t;case"child_removed":return gC(this._delegate,x,U),t;case"child_changed":return fC(this._delegate,x,U),t;case"child_moved":return pC(this._delegate,x,U),t;default:throw new Error((0,le.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(r,t,o){if((0,le.Dv)("Query.off",0,3,arguments.length),function(n,r,t){if(void 0!==r)switch(r){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,le.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,r),(0,le.Wj)("Query.off","callback",t,!0),(0,le.lb)("Query.off","context",o,!0),t){const d=()=>{};d.userCallback=t,d.context=o,mC(this._delegate,r,d)}else mC(this._delegate,r)}get(){return nT(this._delegate).then(r=>new Mm(this.database,r))}once(r,t,o,d){(0,le.Dv)("Query.once",1,4,arguments.length),(0,le.Wj)("Query.once","callback",t,!0);const m=bl.getCancelAndContextArgs_("Query.once",o,d),D=new le.BH,x=(W,ie)=>{const Ee=new Mm(this.database,W);t&&t.call(m.context,Ee,ie),D.resolve(Ee)};x.userCallback=t,x.context=m.context;const U=W=>{m.cancel&&m.cancel.call(m.context,W),D.reject(W)};switch(r){case"value":xI(this._delegate,x,U,{onlyOnce:!0});break;case"child_added":hC(this._delegate,x,U,{onlyOnce:!0});break;case"child_removed":gC(this._delegate,x,U,{onlyOnce:!0});break;case"child_changed":fC(this._delegate,x,U,{onlyOnce:!0});break;case"child_moved":pC(this._delegate,x,U,{onlyOnce:!0});break;default:throw new Error((0,le.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return D.promise}limitToFirst(r){return(0,le.Dv)("Query.limitToFirst",1,1,arguments.length),new bl(this.database,ph(this._delegate,function cT(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new uT(n)}(r)))}limitToLast(r){return(0,le.Dv)("Query.limitToLast",1,1,arguments.length),new bl(this.database,ph(this._delegate,function hT(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dT(n)}(r)))}orderByChild(r){return(0,le.Dv)("Query.orderByChild",1,1,arguments.length),new bl(this.database,ph(this._delegate,function pT(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ob("orderByChild","path",n,!1),new fT(n)}(r)))}orderByKey(){return(0,le.Dv)("Query.orderByKey",0,0,arguments.length),new bl(this.database,ph(this._delegate,function mT(){return new gT}()))}orderByPriority(){return(0,le.Dv)("Query.orderByPriority",0,0,arguments.length),new bl(this.database,ph(this._delegate,function yT(){return new _T}()))}orderByValue(){return(0,le.Dv)("Query.orderByValue",0,0,arguments.length),new bl(this.database,ph(this._delegate,function bT(){return new vT}()))}startAt(r=null,t){return(0,le.Dv)("Query.startAt",0,2,arguments.length),new bl(this.database,ph(this._delegate,function oT(n=null,r){return sb("startAt","key",r,!0),new yC(n,r)}(r,t)))}startAfter(r=null,t){return(0,le.Dv)("Query.startAfter",0,2,arguments.length),new bl(this.database,ph(this._delegate,function lT(n,r){return sb("startAfter","key",r,!0),new aT(n,r)}(r,t)))}endAt(r=null,t){return(0,le.Dv)("Query.endAt",0,2,arguments.length),new bl(this.database,ph(this._delegate,function rT(n,r){return sb("endAt","key",r,!0),new _C(n,r)}(r,t)))}endBefore(r=null,t){return(0,le.Dv)("Query.endBefore",0,2,arguments.length),new bl(this.database,ph(this._delegate,function sT(n,r){return sb("endBefore","key",r,!0),new iT(n,r)}(r,t)))}equalTo(r,t){return(0,le.Dv)("Query.equalTo",1,2,arguments.length),new bl(this.database,ph(this._delegate,function ET(n,r){return sb("equalTo","key",r,!0),new wT(n,r)}(r,t)))}toString(){return(0,le.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,le.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(r){if((0,le.Dv)("Query.isEqual",1,1,arguments.length),!(r instanceof bl))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(r._delegate)}static getCancelAndContextArgs_(r,t,o){const d={cancel:void 0,context:void 0};if(t&&o)d.cancel=t,(0,le.Wj)(r,"cancel",d.cancel,!0),d.context=o,(0,le.lb)(r,"context",d.context,!0);else if(t)if("object"==typeof t&&null!==t)d.context=t;else{if("function"!=typeof t)throw new Error((0,le.gK)(r,"cancelOrContext")+" must either be a cancel callback or a context object.");d.cancel=t}return d}get ref(){return new Oc(this.database,new md(this._delegate._repo,this._delegate._path))}}class Oc extends bl{constructor(r,t){super(r,new Yu(t._repo,t._path,new ma,!1)),this.database=r,this._delegate=t}getKey(){return(0,le.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(r){return(0,le.Dv)("Reference.child",1,1,arguments.length),"number"==typeof r&&(r=String(r)),new Oc(this.database,Qy(this._delegate,r))}getParent(){(0,le.Dv)("Reference.parent",0,0,arguments.length);const r=this._delegate.parent;return r?new Oc(this.database,r):null}getRoot(){return(0,le.Dv)("Reference.root",0,0,arguments.length),new Oc(this.database,this._delegate.root)}set(r,t){(0,le.Dv)("Reference.set",1,2,arguments.length),(0,le.Wj)("Reference.set","onComplete",t,!0);const o=PI(this._delegate,r);return t&&o.then(()=>t(null),d=>t(d)),o}update(r,t){if((0,le.Dv)("Reference.update",1,2,arguments.length),Array.isArray(r)){const d={};for(let m=0;m<r.length;++m)d[""+m]=r[m];r=d,DC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ac("Reference.update",this._delegate._path),(0,le.Wj)("Reference.update","onComplete",t,!0);const o=tT(this._delegate,r);return t&&o.then(()=>t(null),d=>t(d)),o}setWithPriority(r,t,o){(0,le.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,le.Wj)("Reference.setWithPriority","onComplete",o,!0);const d=function eT(n,r,t){if(Ac("setWithPriority",n._path),gd("setWithPriority",r,n._path,!1),TD("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const o=new le.BH;return Dt(n._repo,n._path,r,t,o.wrapCallback(()=>{})),o.promise}(this._delegate,r,t);return o&&d.then(()=>o(null),m=>o(m)),d}remove(r){(0,le.Dv)("Reference.remove",0,1,arguments.length),(0,le.Wj)("Reference.remove","onComplete",r,!0);const t=function JC(n){return Ac("remove",n._path),PI(n,null)}(this._delegate);return r&&t.then(()=>r(null),o=>r(o)),t}transaction(r,t,o){(0,le.Dv)("Reference.transaction",1,3,arguments.length),(0,le.Wj)("Reference.transaction","transactionUpdate",r,!1),(0,le.Wj)("Reference.transaction","onComplete",t,!0),function(n,r,t,o){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,le.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const d=function BT(n,r,t){var o;if(n=(0,le.m9)(n),Ac("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const d=null===(o=t?.applyLocally)||void 0===o||o,m=new le.BH,x=xI(n,()=>{});return function $C(n,r,t,o,d,m){ab(n,"transaction on "+r);const D={path:r,update:t,onComplete:o,status:null,order:my(),applyLocally:m,retryCount:0,unwatcher:d,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},x=AI(n,r,void 0);D.currentInputSnapshot=x;const U=D.update(x.val());if(void 0===U)D.unwatcher(),D.currentOutputSnapshotRaw=null,D.currentOutputSnapshotResolved=null,D.onComplete&&D.onComplete(null,!1,D.currentInputSnapshot);else{Yy("transaction failed: Data returned ",U,D.path),D.status=0;const W=tb(n.transactionQueueTree_,r),ie=Pp(W)||[];let Ee;ie.push(D),Zw(W,ie),"object"==typeof U&&null!==U&&(0,le.r3)(U,".priority")?(Ee=(0,le.DV)(U,".priority"),(0,le.hu)(ib(Ee),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ee=(Z0(n.serverSyncTree_,r)||gr.EMPTY_NODE).getPriority().val();const De=N(n),Ge=ys(U,Ee),Tt=bD(Ge,x,De);D.currentOutputSnapshotRaw=Ge,D.currentOutputSnapshotResolved=Tt,D.currentWriteId=Oe(n);const Vt=q0(n.serverSyncTree_,r,Tt,D.currentWriteId,D.applyLocally);qu(n.eventQueue_,r,Vt),AD(n,n.transactionQueueTree_)}}(n._repo,n._path,r,(U,W,ie)=>{let Ee=null;U?m.reject(U):(Ee=new Zy(ie,new md(n._repo,n._path),Hi),m.resolve(new UT(W,Ee)))},x,d),m.promise}(this._delegate,r,{applyLocally:o}).then(m=>new WT(m.committed,new Mm(this.database,m.snapshot)));return t&&d.then(m=>t(null,m.committed,m.snapshot),m=>t(m,!1,null)),d}setPriority(r,t){(0,le.Dv)("Reference.setPriority",1,2,arguments.length),(0,le.Wj)("Reference.setPriority","onComplete",t,!0);const o=function XC(n,r){n=(0,le.m9)(n),Ac("setPriority",n._path),TD("setPriority",r,!1);const t=new le.BH;return Dt(n._repo,Ls(n._path,".priority"),r,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,r);return t&&o.then(()=>t(null),d=>t(d)),o}push(r,t){(0,le.Dv)("Reference.push",0,2,arguments.length),(0,le.Wj)("Reference.push","onComplete",t,!0);const o=function QC(n,r){n=(0,le.m9)(n),Ac("push",n._path),gd("push",r,n._path,!0);const t=I(n._repo),o=ZC(t),d=Qy(n,o),m=Qy(n,o);let D;return D=null!=r?PI(m,r).then(()=>m):Promise.resolve(m),d.then=D.then.bind(D),d.catch=D.then.bind(D,void 0),d}(this._delegate,r),d=o.then(D=>new Oc(this.database,D));t&&d.then(()=>t(null),D=>t(D));const m=new Oc(this.database,o);return m.then=d.then.bind(d),m.catch=d.catch.bind(d,void 0),m}onDisconnect(){return Ac("Reference.onDisconnect",this._delegate._path),new zT(new uC(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class nE{constructor(r,t){this._delegate=r,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:OT,forceLongPolling:NT}}useEmulator(r,t,o={}){!function EC(n,r,t,o={}){(n=(0,le.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&cu("Cannot call useEmulator() after instance has already been initialized.");const d=n._repoInternal;let m;if(d.repoInfo_.nodeAdmin)o.mockUserToken&&cu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),m=new gf(gf.OWNER);else if(o.mockUserToken){const D="string"==typeof o.mockUserToken?o.mockUserToken:(0,le.Sg)(o.mockUserToken,n.app.options.projectId);m=new gf(D)}!function IT(n,r,t,o){n.repoInfo_=new Ec(`${r}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),o&&(n.authTokenProvider_=o)}(d,r,t,m)}(this._delegate,r,t,o)}ref(r){if((0,le.Dv)("database.ref",0,1,arguments.length),r instanceof Oc){const t=dC(this._delegate,r.toString());return new Oc(this,t)}{const t=cC(this._delegate,r);return new Oc(this,t)}}refFromURL(r){(0,le.Dv)("database.refFromURL",1,1,arguments.length);const o=dC(this._delegate,r);return new Oc(this,o)}goOffline(){return(0,le.Dv)("database.goOffline",0,0,arguments.length),function MT(n){(n=(0,le.m9)(n))._checkNotDeleted("goOffline"),SI(n._repo)}(this._delegate)}goOnline(){return(0,le.Dv)("database.goOnline",0,0,arguments.length),function RT(n){(n=(0,le.m9)(n))._checkNotDeleted("goOnline"),function HC(n){n.persistentConnection_&&n.persistentConnection_.resume(c)}(n._repo)}(this._delegate)}}nE.ServerValue={TIMESTAMP:function FT(){return kT}(),increment:n=>function LT(n){return{".sv":{increment:n}}}(n)};var qT=Object.freeze({__proto__:null,initStandalone:function KT({app:n,url:r,version:t,customAuthImpl:o,namespace:d,nodeAdmin:m=!1}){Vu(t);const D=new Jd.zt("auth-internal",new Jd.H0("database-standalone"));return D.setComponent(new Jd.wA("auth-internal",()=>o,"PRIVATE")),{instance:new nE(bC(n,D,void 0,r,m),n),namespace:d}}});const YT=nE.ServerValue;function IC(n){return null==n}function CC(n){return"function"==typeof n.set}function TC(n,r){return CC(r)?r:n.ref(r)}function SC(n,r){if(function QT(n){return"string"==typeof n}(n))return r.stringCase();if(CC(n))return r.firebaseCase();if(function JT(n){return"function"==typeof n.exportVal}(n))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function rE(n,r,t="on",o=ft.z){return new Ce.y(d=>{let m=null;return m=n[t](r,(D,x)=>{o.schedule(()=>{d.next({snapshot:D,prevKey:x})}),"once"===t&&o.schedule(()=>d.complete())},D=>{o.schedule(()=>d.error(D))}),"on"===t?{unsubscribe(){null!=m&&n.off(r,m)}}:{unsubscribe(){}}}).pipe((0,qn.U)(d=>{const{snapshot:m,prevKey:D}=d;let x=null;return m.exists()&&(x=m.key),{type:r,payload:m,prevKey:D,key:x}}),(0,CE.B)())}function AC(n,r){const t=n.length;for(let o=0;o<t;o++)if(n[o].payload.key===r)return o;return-1}function tS(n,r){const{payload:t,prevKey:o,key:d}=r,m=AC(n,d),D=function eS(n,r){if(IC(r))return 0;{const t=AC(n,r);return-1===t?n.length:t+1}}(n,o);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let x=null;r.payload.forEach(U=>{const W={payload:U,type:"value",prevKey:x,key:U.key};return x=U.key,n=[...n,W],!1})}return n;case"child_added":if(m>-1){const x=n[m-1];(x&&x.key||null)!==o&&(n=n.filter(U=>U.payload.key!==t.key)).splice(D,0,r)}else{if(null==o)return[r,...n];(n=n.slice()).splice(D,0,r)}return n;case"child_removed":return n.filter(x=>x.payload.key!==t.key);case"child_changed":return n.map(x=>x.payload.key===d?r:x);case"child_moved":if(m>-1){const x=n.splice(m,1)[0];return(n=n.slice()).splice(D,0,x),n}return n;default:return n}}function OC(n){return(IC(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function NC(n,r,t){return function XT(n,r,t){return rE(n,"value","once",t).pipe((0,An.w)(o=>{const d=[(0,Ke.of)(o)];return r.forEach(m=>d.push(rE(n,m,"on",t))),(0,xn.T)(...d).pipe((0,_l.R)(tS,[]))}),(0,en.x)())}(n,r=OC(r),t)}function MC(n,r,t){const o=(r=OC(r)).map(d=>rE(n,d,"on",t));return(0,xn.T)(...o)}function RC(n,r){return function(o,d){return SC(o,{stringCase:()=>n.child(o)[r](d),firebaseCase:()=>o[r](d),snapshotCase:()=>o.ref[r](d)})}}function sS(n){return function(t){return t?SC(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function PC(n,r){return function(){return rE(n,"value","on",r)}}!function ZT(n){n.INTERNAL.registerComponent(new Jd.wA("database-compat",(r,{instanceIdentifier:t})=>{const o=r.getProvider("app-compat").getImmediate(),d=r.getProvider("database").getImmediate({identifier:t});return new nE(d,o)},"PUBLIC").setServiceProps({Reference:Oc,Query:bl,Database:nE,DataSnapshot:Mm,enableLogging:PT,INTERNAL:qT,ServerValue:YT}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Ig.Z);const lS=new h.OlP("angularfire2.realtimeDatabaseURL"),uS=new h.OlP("angularfire2.database.use-emulator");let cS=(()=>{class n{constructor(t,o,d,m,D,x,U,W,ie,Ee,De,Ge,Tt,Vt,Xt){this.schedulers=x;const Un=U,Bn=(0,Ru.on)(t,D,o);W&&(0,hc.nw)(Bn,D,ie,De,Ge,Tt,Ee,Vt),this.database=(0,Ru.cc)(`${Bn.name}.database.${d}`,"AngularFireDatabase",Bn.name,()=>{const tr=D.runOutsideAngular(()=>Bn.database(d||void 0));return Un&&tr.useEmulator(...Un),tr},[Un])}list(t,o){const d=this.schedulers.ngZone.runOutsideAngular(()=>TC(this.database,t));let m=d;return o&&(m=o(d)),function oS(n,r){const t=r.schedulers.outsideAngular,o=r.schedulers.ngZone.run(()=>n.ref);return{query:n,update:RC(o,"update"),set:RC(o,"set"),push:d=>o.push(d),remove:sS(o),snapshotChanges:d=>NC(n,d,t).pipe(Aa.iC),stateChanges:d=>MC(n,d,t).pipe(Aa.iC),auditTrail:d=>function nS(n,r,t){return function iS(n,r,t){return function rS(n,r){return rE(n,"value","on",r).pipe((0,qn.U)(t=>{let o;return t.payload.forEach(d=>(o=d.key,!1)),{data:t,lastKeyToLoad:o}}))}(n,t).pipe(ei(r),(0,qn.U)(([d,m])=>{const D=d.lastKeyToLoad,x=m.map(U=>U.key);return{actions:m,lastKeyToLoad:D,loadedKeys:x}}),function vc(n){return(0,Dr.e)((r,t)=>{let o=!1,d=0;r.subscribe((0,nt.x)(t,m=>(o||(o=!n(m,d++)))&&t.next(m)))})}(d=>-1===d.loadedKeys.indexOf(d.lastKeyToLoad)),(0,qn.U)(d=>d.actions))}(n,MC(n,r).pipe((0,_l.R)((d,m)=>[...d,m],[])),t)}(n,d,t).pipe(Aa.iC),valueChanges:(d,m)=>NC(n,d,t).pipe((0,qn.U)(x=>x.map(U=>m&&m.idField?Object.assign(Object.assign({},U.payload.val()),{[m.idField]:U.key}):U.payload.val())),Aa.iC)}}(m,this)}object(t){return function aS(n,r){return{query:n,snapshotChanges:()=>PC(n,r.schedulers.outsideAngular)().pipe(Aa.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>PC(n,r.schedulers.outsideAngular)().pipe(Aa.iC,(0,qn.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>TC(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ru.Dh),h.LFG(Ru.xv,8),h.LFG(lS,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Aa.HU),h.LFG(uS,8),h.LFG(hc.zQ,8),h.LFG(hc.Qv,8),h.LFG(hc.L6,8),h.LFG(hc._Q,8),h.LFG(hc.rT,8),h.LFG(hc.lh,8),h.LFG(hc.f7,8),h.LFG(fy.nm,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dS=(()=>{class n{constructor(){yc.Z.registerVersion("angularfire",Aa.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[cS]}),n})();const hS_firebase={apiKey:"AIzaSyBZwKztkqkhS6b7UHmRBdOyeg1myLJEcR8",authDomain:"psicoleigos-eeee1.firebaseapp.com",projectId:"psicoleigos-eeee1",storageBucket:"psicoleigos-eeee1.appspot.com",messagingSenderId:"711814031287",appId:"1:711814031287:web:742f26ac4bafc1e2b7ea32",measurementId:"G-PL2WDP34XM"};let fS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[de]}),n.\u0275inj=h.cJS({providers:[ve.e],imports:[T.b2,ke,$v,Ru.hO.initializeApp(hS_firebase),hc.ww,IE.yb,Qb,dS]}),n})();T.q6().bootstrapModule(fS).catch(n=>console.error(n))},1135:(zt,We,j)=>{j.d(We,{X:()=>Y});var T=j(7579);class Y extends T.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const Se=super._subscribe(ve);return!Se.closed&&ve.next(this._value),Se}getValue(){const{hasError:ve,thrownError:Se,_value:Te}=this;if(ve)throw Se;return this._throwIfClosed(),Te}next(ve){super.next(this._value=ve)}}},9751:(zt,We,j)=>{j.d(We,{y:()=>pe});var T=j(930),Y=j(727),h=j(8822),ve=j(9635),Se=j(2416),Te=j(576),ke=j(2806);let pe=(()=>{class Ce{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const at=new Ce;return at.source=this,at.operator=Ke,at}subscribe(Ke,at,Nt){const Je=function de(Ce){return Ce&&Ce instanceof T.Lv||function me(Ce){return Ce&&(0,Te.m)(Ce.next)&&(0,Te.m)(Ce.error)&&(0,Te.m)(Ce.complete)}(Ce)&&(0,Y.Nn)(Ce)}(Ke)?Ke:new T.Hp(Ke,at,Nt);return(0,ke.x)(()=>{const{operator:ct,source:fe}=this;Je.add(ct?ct.call(Je,fe):fe?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(at){Ke.error(at)}}forEach(Ke,at){return new(at=Fe(at))((Nt,Je)=>{const ct=new T.Hp({next:fe=>{try{Ke(fe)}catch(ht){Je(ht),ct.unsubscribe()}},error:Je,complete:Nt});this.subscribe(ct)})}_subscribe(Ke){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(Ke)}[h.L](){return this}pipe(...Ke){return(0,ve.U)(Ke)(this)}toPromise(Ke){return new(Ke=Fe(Ke))((at,Nt)=>{let Je;this.subscribe(ct=>Je=ct,ct=>Nt(ct),()=>at(Je))})}}return Ce.create=et=>new Ce(et),Ce})();function Fe(Ce){var et;return null!==(et=Ce??Se.v.Promise)&&void 0!==et?et:Promise}},7579:(zt,We,j)=>{j.d(We,{x:()=>ke});var T=j(9751),Y=j(727);const ve=(0,j(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=j(8737),Te=j(2806);let ke=(()=>{class Fe extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(de){const Ce=new pe(this,this);return Ce.operator=de,Ce}_throwIfClosed(){if(this.closed)throw new ve}next(de){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(de)}})}error(de){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=de;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(de)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:de}=this;for(;de.length;)de.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var de;return(null===(de=this.observers)||void 0===de?void 0:de.length)>0}_trySubscribe(de){return this._throwIfClosed(),super._trySubscribe(de)}_subscribe(de){return this._throwIfClosed(),this._checkFinalizedStatuses(de),this._innerSubscribe(de)}_innerSubscribe(de){const{hasError:Ce,isStopped:et,observers:Ke}=this;return Ce||et?Y.Lc:(this.currentObservers=null,Ke.push(de),new Y.w0(()=>{this.currentObservers=null,(0,Se.P)(Ke,de)}))}_checkFinalizedStatuses(de){const{hasError:Ce,thrownError:et,isStopped:Ke}=this;Ce?de.error(et):Ke&&de.complete()}asObservable(){const de=new T.y;return de.source=this,de}}return Fe.create=(me,de)=>new pe(me,de),Fe})();class pe extends ke{constructor(me,de){super(),this.destination=me,this.source=de}next(me){var de,Ce;null===(Ce=null===(de=this.destination)||void 0===de?void 0:de.next)||void 0===Ce||Ce.call(de,me)}error(me){var de,Ce;null===(Ce=null===(de=this.destination)||void 0===de?void 0:de.error)||void 0===Ce||Ce.call(de,me)}complete(){var me,de;null===(de=null===(me=this.destination)||void 0===me?void 0:me.complete)||void 0===de||de.call(me)}_subscribe(me){var de,Ce;return null!==(Ce=null===(de=this.source)||void 0===de?void 0:de.subscribe(me))&&void 0!==Ce?Ce:Y.Lc}}},930:(zt,We,j)=>{j.d(We,{Hp:()=>Nt,Lv:()=>Ce});var T=j(576),Y=j(727),h=j(2416),ve=j(7849),Se=j(5032);const Te=Fe("C",void 0,void 0);function Fe(lt,Qe,Ye){return{kind:lt,value:Qe,error:Ye}}var me=j(3410),de=j(2806);class Ce extends Y.w0{constructor(Qe){super(),this.isStopped=!1,Qe?(this.destination=Qe,(0,Y.Nn)(Qe)&&Qe.add(this)):this.destination=ht}static create(Qe,Ye,Et){return new Nt(Qe,Ye,Et)}next(Qe){this.isStopped?fe(function pe(lt){return Fe("N",lt,void 0)}(Qe),this):this._next(Qe)}error(Qe){this.isStopped?fe(function ke(lt){return Fe("E",void 0,lt)}(Qe),this):(this.isStopped=!0,this._error(Qe))}complete(){this.isStopped?fe(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Qe){this.destination.next(Qe)}_error(Qe){try{this.destination.error(Qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Ke(lt,Qe){return et.call(lt,Qe)}class at{constructor(Qe){this.partialObserver=Qe}next(Qe){const{partialObserver:Ye}=this;if(Ye.next)try{Ye.next(Qe)}catch(Et){Je(Et)}}error(Qe){const{partialObserver:Ye}=this;if(Ye.error)try{Ye.error(Qe)}catch(Et){Je(Et)}else Je(Qe)}complete(){const{partialObserver:Qe}=this;if(Qe.complete)try{Qe.complete()}catch(Ye){Je(Ye)}}}class Nt extends Ce{constructor(Qe,Ye,Et){let Ne;if(super(),(0,T.m)(Qe)||!Qe)Ne={next:Qe??void 0,error:Ye??void 0,complete:Et??void 0};else{let Ie;this&&h.v.useDeprecatedNextContext?(Ie=Object.create(Qe),Ie.unsubscribe=()=>this.unsubscribe(),Ne={next:Qe.next&&Ke(Qe.next,Ie),error:Qe.error&&Ke(Qe.error,Ie),complete:Qe.complete&&Ke(Qe.complete,Ie)}):Ne=Qe}this.destination=new at(Ne)}}function Je(lt){h.v.useDeprecatedSynchronousErrorHandling?(0,de.O)(lt):(0,ve.h)(lt)}function fe(lt,Qe){const{onStoppedNotification:Ye}=h.v;Ye&&me.z.setTimeout(()=>Ye(lt,Qe))}const ht={closed:!0,next:Se.Z,error:function ct(lt){throw lt},complete:Se.Z}},727:(zt,We,j)=>{j.d(We,{Lc:()=>Te,w0:()=>Se,Nn:()=>ke});var T=j(576);const h=(0,j(3888).d)(Fe=>function(de){Fe(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((Ce,et)=>`${et+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de});var ve=j(8737);class Se{constructor(me){this.initialTeardown=me,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let me;if(!this.closed){this.closed=!0;const{_parentage:de}=this;if(de)if(this._parentage=null,Array.isArray(de))for(const Ke of de)Ke.remove(this);else de.remove(this);const{initialTeardown:Ce}=this;if((0,T.m)(Ce))try{Ce()}catch(Ke){me=Ke instanceof h?Ke.errors:[Ke]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Ke of et)try{pe(Ke)}catch(at){me=me??[],at instanceof h?me=[...me,...at.errors]:me.push(at)}}if(me)throw new h(me)}}add(me){var de;if(me&&me!==this)if(this.closed)pe(me);else{if(me instanceof Se){if(me.closed||me._hasParent(this))return;me._addParent(this)}(this._finalizers=null!==(de=this._finalizers)&&void 0!==de?de:[]).push(me)}}_hasParent(me){const{_parentage:de}=this;return de===me||Array.isArray(de)&&de.includes(me)}_addParent(me){const{_parentage:de}=this;this._parentage=Array.isArray(de)?(de.push(me),de):de?[de,me]:me}_removeParent(me){const{_parentage:de}=this;de===me?this._parentage=null:Array.isArray(de)&&(0,ve.P)(de,me)}remove(me){const{_finalizers:de}=this;de&&(0,ve.P)(de,me),me instanceof Se&&me._removeParent(this)}}Se.EMPTY=(()=>{const Fe=new Se;return Fe.closed=!0,Fe})();const Te=Se.EMPTY;function ke(Fe){return Fe instanceof Se||Fe&&"closed"in Fe&&(0,T.m)(Fe.remove)&&(0,T.m)(Fe.add)&&(0,T.m)(Fe.unsubscribe)}function pe(Fe){(0,T.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(zt,We,j)=>{j.d(We,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(zt,We,j)=>{j.d(We,{a:()=>me});var T=j(9751),Y=j(4742),h=j(8996),ve=j(4671),Se=j(3268),Te=j(3269),ke=j(1810),pe=j(5403),Fe=j(9672);function me(...et){const Ke=(0,Te.yG)(et),at=(0,Te.jO)(et),{args:Nt,keys:Je}=(0,Y.D)(et);if(0===Nt.length)return(0,h.D)([],Ke);const ct=new T.y(function de(et,Ke,at=ve.y){return Nt=>{Ce(Ke,()=>{const{length:Je}=et,ct=new Array(Je);let fe=Je,ht=Je;for(let lt=0;lt<Je;lt++)Ce(Ke,()=>{const Qe=(0,h.D)(et[lt],Ke);let Ye=!1;Qe.subscribe((0,pe.x)(Nt,Et=>{ct[lt]=Et,Ye||(Ye=!0,ht--),ht||Nt.next(at(ct.slice()))},()=>{--fe||Nt.complete()}))},Nt)},Nt)}}(Nt,Ke,Je?fe=>(0,ke.n)(Je,fe):ve.y));return at?ct.pipe((0,Se.Z)(at)):ct}function Ce(et,Ke,at){et?(0,Fe.f)(at,et,Ke):Ke()}},7272:(zt,We,j)=>{j.d(We,{z:()=>Se});var T=j(8189),h=j(3269),ve=j(8996);function Se(...Te){return function Y(){return(0,T.J)(1)}()((0,ve.D)(Te,(0,h.yG)(Te)))}},515:(zt,We,j)=>{j.d(We,{E:()=>Y});const Y=new(j(9751).y)(Se=>Se.complete())},8996:(zt,We,j)=>{j.d(We,{D:()=>Qe});var T=j(8421),Y=j(5363),h=j(9468),Te=j(9751),pe=j(2202),Fe=j(576),me=j(9672);function Ce(Ye,Et){if(!Ye)throw new Error("Iterable cannot be null");return new Te.y(Ne=>{(0,me.f)(Ne,Et,()=>{const Ie=Ye[Symbol.asyncIterator]();(0,me.f)(Ne,Et,()=>{Ie.next().then(tt=>{tt.done?Ne.complete():Ne.next(tt.value)})},0,!0)})})}var et=j(3670),Ke=j(8239),at=j(1144),Nt=j(6495),Je=j(2206),ct=j(4532),fe=j(3260);function Qe(Ye,Et){return Et?function lt(Ye,Et){if(null!=Ye){if((0,et.c)(Ye))return function ve(Ye,Et){return(0,T.Xf)(Ye).pipe((0,h.R)(Et),(0,Y.Q)(Et))}(Ye,Et);if((0,at.z)(Ye))return function ke(Ye,Et){return new Te.y(Ne=>{let Ie=0;return Et.schedule(function(){Ie===Ye.length?Ne.complete():(Ne.next(Ye[Ie++]),Ne.closed||this.schedule())})})}(Ye,Et);if((0,Ke.t)(Ye))return function Se(Ye,Et){return(0,T.Xf)(Ye).pipe((0,h.R)(Et),(0,Y.Q)(Et))}(Ye,Et);if((0,Je.D)(Ye))return Ce(Ye,Et);if((0,Nt.T)(Ye))return function de(Ye,Et){return new Te.y(Ne=>{let Ie;return(0,me.f)(Ne,Et,()=>{Ie=Ye[pe.h](),(0,me.f)(Ne,Et,()=>{let tt,it;try{({value:tt,done:it}=Ie.next())}catch(ft){return void Ne.error(ft)}it?Ne.complete():Ne.next(tt)},0,!0)}),()=>(0,Fe.m)(Ie?.return)&&Ie.return()})}(Ye,Et);if((0,fe.L)(Ye))return function ht(Ye,Et){return Ce((0,fe.Q)(Ye),Et)}(Ye,Et)}throw(0,ct.z)(Ye)}(Ye,Et):(0,T.Xf)(Ye)}},8421:(zt,We,j)=>{j.d(We,{Xf:()=>et});var T=j(655),Y=j(1144),h=j(8239),ve=j(9751),Se=j(3670),Te=j(2206),ke=j(4532),pe=j(6495),Fe=j(3260),me=j(576),de=j(7849),Ce=j(8822);function et(lt){if(lt instanceof ve.y)return lt;if(null!=lt){if((0,Se.c)(lt))return function Ke(lt){return new ve.y(Qe=>{const Ye=lt[Ce.L]();if((0,me.m)(Ye.subscribe))return Ye.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(lt);if((0,Y.z)(lt))return function at(lt){return new ve.y(Qe=>{for(let Ye=0;Ye<lt.length&&!Qe.closed;Ye++)Qe.next(lt[Ye]);Qe.complete()})}(lt);if((0,h.t)(lt))return function Nt(lt){return new ve.y(Qe=>{lt.then(Ye=>{Qe.closed||(Qe.next(Ye),Qe.complete())},Ye=>Qe.error(Ye)).then(null,de.h)})}(lt);if((0,Te.D)(lt))return ct(lt);if((0,pe.T)(lt))return function Je(lt){return new ve.y(Qe=>{for(const Ye of lt)if(Qe.next(Ye),Qe.closed)return;Qe.complete()})}(lt);if((0,Fe.L)(lt))return function fe(lt){return ct((0,Fe.Q)(lt))}(lt)}throw(0,ke.z)(lt)}function ct(lt){return new ve.y(Qe=>{(function ht(lt,Qe){var Ye,Et,Ne,Ie;return(0,T.mG)(this,void 0,void 0,function*(){try{for(Ye=(0,T.KL)(lt);!(Et=yield Ye.next()).done;)if(Qe.next(Et.value),Qe.closed)return}catch(tt){Ne={error:tt}}finally{try{Et&&!Et.done&&(Ie=Ye.return)&&(yield Ie.call(Ye))}finally{if(Ne)throw Ne.error}}Qe.complete()})})(lt,Qe).catch(Ye=>Qe.error(Ye))})}},6451:(zt,We,j)=>{j.d(We,{T:()=>Te});var T=j(8189),Y=j(8421),h=j(515),ve=j(3269),Se=j(8996);function Te(...ke){const pe=(0,ve.yG)(ke),Fe=(0,ve._6)(ke,1/0),me=ke;return me.length?1===me.length?(0,Y.Xf)(me[0]):(0,T.J)(Fe)((0,Se.D)(me,pe)):h.E}},9646:(zt,We,j)=>{j.d(We,{of:()=>h});var T=j(3269),Y=j(8996);function h(...ve){const Se=(0,T.yG)(ve);return(0,Y.D)(ve,Se)}},5403:(zt,We,j)=>{j.d(We,{x:()=>Y});var T=j(930);function Y(ve,Se,Te,ke,pe){return new h(ve,Se,Te,ke,pe)}class h extends T.Lv{constructor(Se,Te,ke,pe,Fe,me){super(Se),this.onFinalize=Fe,this.shouldUnsubscribe=me,this._next=Te?function(de){try{Te(de)}catch(Ce){Se.error(Ce)}}:super._next,this._error=pe?function(de){try{pe(de)}catch(Ce){Se.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=ke?function(){try{ke()}catch(de){Se.error(de)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},6590:(zt,We,j)=>{j.d(We,{d:()=>h});var T=j(4482),Y=j(5403);function h(ve){return(0,T.e)((Se,Te)=>{let ke=!1;Se.subscribe((0,Y.x)(Te,pe=>{ke=!0,Te.next(pe)},()=>{ke||Te.next(ve),Te.complete()}))})}},1884:(zt,We,j)=>{j.d(We,{x:()=>ve});var T=j(4671),Y=j(4482),h=j(5403);function ve(Te,ke=T.y){return Te=Te??Se,(0,Y.e)((pe,Fe)=>{let me,de=!0;pe.subscribe((0,h.x)(Fe,Ce=>{const et=ke(Ce);(de||!Te(me,et))&&(de=!1,me=et,Fe.next(Ce))}))})}function Se(Te,ke){return Te===ke}},9300:(zt,We,j)=>{j.d(We,{h:()=>h});var T=j(4482),Y=j(5403);function h(ve,Se){return(0,T.e)((Te,ke)=>{let pe=0;Te.subscribe((0,Y.x)(ke,Fe=>ve.call(Se,Fe,pe++)&&ke.next(Fe)))})}},590:(zt,We,j)=>{j.d(We,{P:()=>ke});var T=j(6805),Y=j(9300),h=j(5698),ve=j(6590),Se=j(8068),Te=j(4671);function ke(pe,Fe){const me=arguments.length>=2;return de=>de.pipe(pe?(0,Y.h)((Ce,et)=>pe(Ce,et,de)):Te.y,(0,h.q)(1),me?(0,ve.d)(Fe):(0,Se.T)(()=>new T.K))}},4004:(zt,We,j)=>{j.d(We,{U:()=>h});var T=j(4482),Y=j(5403);function h(ve,Se){return(0,T.e)((Te,ke)=>{let pe=0;Te.subscribe((0,Y.x)(ke,Fe=>{ke.next(ve.call(Se,Fe,pe++))}))})}},9718:(zt,We,j)=>{j.d(We,{h:()=>Y});var T=j(4004);function Y(h){return(0,T.U)(()=>h)}},8189:(zt,We,j)=>{j.d(We,{J:()=>h});var T=j(5577),Y=j(4671);function h(ve=1/0){return(0,T.z)(Y.y,ve)}},5577:(zt,We,j)=>{j.d(We,{z:()=>pe});var T=j(4004),Y=j(8421),h=j(4482),ve=j(9672),Se=j(5403),ke=j(576);function pe(Fe,me,de=1/0){return(0,ke.m)(me)?pe((Ce,et)=>(0,T.U)((Ke,at)=>me(Ce,Ke,et,at))((0,Y.Xf)(Fe(Ce,et))),de):("number"==typeof me&&(de=me),(0,h.e)((Ce,et)=>function Te(Fe,me,de,Ce,et,Ke,at,Nt){const Je=[];let ct=0,fe=0,ht=!1;const lt=()=>{ht&&!Je.length&&!ct&&me.complete()},Qe=Et=>ct<Ce?Ye(Et):Je.push(Et),Ye=Et=>{Ke&&me.next(Et),ct++;let Ne=!1;(0,Y.Xf)(de(Et,fe++)).subscribe((0,Se.x)(me,Ie=>{et?.(Ie),Ke?Qe(Ie):me.next(Ie)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(ct--;Je.length&&ct<Ce;){const Ie=Je.shift();at?(0,ve.f)(me,at,()=>Ye(Ie)):Ye(Ie)}lt()}catch(Ie){me.error(Ie)}}))};return Fe.subscribe((0,Se.x)(me,Qe,()=>{ht=!0,lt()})),()=>{Nt?.()}}(Ce,et,Fe,de)))}},5363:(zt,We,j)=>{j.d(We,{Q:()=>ve});var T=j(9672),Y=j(4482),h=j(5403);function ve(Se,Te=0){return(0,Y.e)((ke,pe)=>{ke.subscribe((0,h.x)(pe,Fe=>(0,T.f)(pe,Se,()=>pe.next(Fe),Te),()=>(0,T.f)(pe,Se,()=>pe.complete(),Te),Fe=>(0,T.f)(pe,Se,()=>pe.error(Fe),Te)))})}},5026:(zt,We,j)=>{j.d(We,{R:()=>ve});var T=j(4482),Y=j(5403);function ve(Se,Te){return(0,T.e)(function h(Se,Te,ke,pe,Fe){return(me,de)=>{let Ce=ke,et=Te,Ke=0;me.subscribe((0,Y.x)(de,at=>{const Nt=Ke++;et=Ce?Se(et,at,Nt):(Ce=!0,at),pe&&de.next(et)},Fe&&(()=>{Ce&&de.next(et),de.complete()})))}}(Se,Te,arguments.length>=2,!0))}},3099:(zt,We,j)=>{j.d(We,{B:()=>Se});var T=j(8421),Y=j(7579),h=j(930),ve=j(4482);function Se(ke={}){const{connector:pe=(()=>new Y.x),resetOnError:Fe=!0,resetOnComplete:me=!0,resetOnRefCountZero:de=!0}=ke;return Ce=>{let et,Ke,at,Nt=0,Je=!1,ct=!1;const fe=()=>{Ke?.unsubscribe(),Ke=void 0},ht=()=>{fe(),et=at=void 0,Je=ct=!1},lt=()=>{const Qe=et;ht(),Qe?.unsubscribe()};return(0,ve.e)((Qe,Ye)=>{Nt++,!ct&&!Je&&fe();const Et=at=at??pe();Ye.add(()=>{Nt--,0===Nt&&!ct&&!Je&&(Ke=Te(lt,de))}),Et.subscribe(Ye),!et&&Nt>0&&(et=new h.Hp({next:Ne=>Et.next(Ne),error:Ne=>{ct=!0,fe(),Ke=Te(ht,Fe,Ne),Et.error(Ne)},complete:()=>{Je=!0,fe(),Ke=Te(ht,me),Et.complete()}}),(0,T.Xf)(Qe).subscribe(et))})(Ce)}}function Te(ke,pe,...Fe){if(!0===pe)return void ke();if(!1===pe)return;const me=new h.Hp({next:()=>{me.unsubscribe(),ke()}});return pe(...Fe).subscribe(me)}},8675:(zt,We,j)=>{j.d(We,{O:()=>ve});var T=j(7272),Y=j(3269),h=j(4482);function ve(...Se){const Te=(0,Y.yG)(Se);return(0,h.e)((ke,pe)=>{(Te?(0,T.z)(Se,ke,Te):(0,T.z)(Se,ke)).subscribe(pe)})}},9468:(zt,We,j)=>{j.d(We,{R:()=>Y});var T=j(4482);function Y(h,ve=0){return(0,T.e)((Se,Te)=>{Te.add(h.schedule(()=>Se.subscribe(Te),ve))})}},3900:(zt,We,j)=>{j.d(We,{w:()=>ve});var T=j(8421),Y=j(4482),h=j(5403);function ve(Se,Te){return(0,Y.e)((ke,pe)=>{let Fe=null,me=0,de=!1;const Ce=()=>de&&!Fe&&pe.complete();ke.subscribe((0,h.x)(pe,et=>{Fe?.unsubscribe();let Ke=0;const at=me++;(0,T.Xf)(Se(et,at)).subscribe(Fe=(0,h.x)(pe,Nt=>pe.next(Te?Te(et,Nt,at,Ke++):Nt),()=>{Fe=null,Ce()}))},()=>{de=!0,Ce()}))})}},5698:(zt,We,j)=>{j.d(We,{q:()=>ve});var T=j(515),Y=j(4482),h=j(5403);function ve(Se){return Se<=0?()=>T.E:(0,Y.e)((Te,ke)=>{let pe=0;Te.subscribe((0,h.x)(ke,Fe=>{++pe<=Se&&(ke.next(Fe),Se<=pe&&ke.complete())}))})}},8505:(zt,We,j)=>{j.d(We,{b:()=>Se});var T=j(576),Y=j(4482),h=j(5403),ve=j(4671);function Se(Te,ke,pe){const Fe=(0,T.m)(Te)||ke||pe?{next:Te,error:ke,complete:pe}:Te;return Fe?(0,Y.e)((me,de)=>{var Ce;null===(Ce=Fe.subscribe)||void 0===Ce||Ce.call(Fe);let et=!0;me.subscribe((0,h.x)(de,Ke=>{var at;null===(at=Fe.next)||void 0===at||at.call(Fe,Ke),de.next(Ke)},()=>{var Ke;et=!1,null===(Ke=Fe.complete)||void 0===Ke||Ke.call(Fe),de.complete()},Ke=>{var at;et=!1,null===(at=Fe.error)||void 0===at||at.call(Fe,Ke),de.error(Ke)},()=>{var Ke,at;et&&(null===(Ke=Fe.unsubscribe)||void 0===Ke||Ke.call(Fe)),null===(at=Fe.finalize)||void 0===at||at.call(Fe)}))}):ve.y}},8068:(zt,We,j)=>{j.d(We,{T:()=>ve});var T=j(6805),Y=j(4482),h=j(5403);function ve(Te=Se){return(0,Y.e)((ke,pe)=>{let Fe=!1;ke.subscribe((0,h.x)(pe,me=>{Fe=!0,pe.next(me)},()=>Fe?pe.complete():pe.error(Te())))})}function Se(){return new T.K}},4408:(zt,We,j)=>{j.d(We,{o:()=>Se});var T=j(727);class Y extends T.w0{constructor(ke,pe){super()}schedule(ke,pe=0){return this}}const h={setInterval(Te,ke,...pe){const{delegate:Fe}=h;return Fe?.setInterval?Fe.setInterval(Te,ke,...pe):setInterval(Te,ke,...pe)},clearInterval(Te){const{delegate:ke}=h;return(ke?.clearInterval||clearInterval)(Te)},delegate:void 0};var ve=j(8737);class Se extends Y{constructor(ke,pe){super(ke,pe),this.scheduler=ke,this.work=pe,this.pending=!1}schedule(ke,pe=0){var Fe;if(this.closed)return this;this.state=ke;const me=this.id,de=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(de,me,pe)),this.pending=!0,this.delay=pe,this.id=null!==(Fe=this.id)&&void 0!==Fe?Fe:this.requestAsyncId(de,this.id,pe),this}requestAsyncId(ke,pe,Fe=0){return h.setInterval(ke.flush.bind(ke,this),Fe)}recycleAsyncId(ke,pe,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return pe;null!=pe&&h.clearInterval(pe)}execute(ke,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(ke,pe);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ke,pe){let me,Fe=!1;try{this.work(ke)}catch(de){Fe=!0,me=de||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),me}unsubscribe(){if(!this.closed){const{id:ke,scheduler:pe}=this,{actions:Fe}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Fe,this),null!=ke&&(this.id=this.recycleAsyncId(pe,ke,null)),this.delay=null,super.unsubscribe()}}}},7565:(zt,We,j)=>{j.d(We,{v:()=>h});var T=j(6063);class Y{constructor(Se,Te=Y.now){this.schedulerActionCtor=Se,this.now=Te}schedule(Se,Te=0,ke){return new this.schedulerActionCtor(this,Se).schedule(ke,Te)}}Y.now=T.l.now;class h extends Y{constructor(Se,Te=Y.now){super(Se,Te),this.actions=[],this._active=!1}flush(Se){const{actions:Te}=this;if(this._active)return void Te.push(Se);let ke;this._active=!0;do{if(ke=Se.execute(Se.state,Se.delay))break}while(Se=Te.shift());if(this._active=!1,ke){for(;Se=Te.shift();)Se.unsubscribe();throw ke}}}},4986:(zt,We,j)=>{j.d(We,{P:()=>ve,z:()=>h});var T=j(4408);const h=new(j(7565).v)(T.o),ve=h},6063:(zt,We,j)=>{j.d(We,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},3410:(zt,We,j)=>{j.d(We,{z:()=>T});const T={setTimeout(Y,h,...ve){const{delegate:Se}=T;return Se?.setTimeout?Se.setTimeout(Y,h,...ve):setTimeout(Y,h,...ve)},clearTimeout(Y){const{delegate:h}=T;return(h?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(zt,We,j)=>{j.d(We,{h:()=>Y});const Y=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(zt,We,j)=>{j.d(We,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(zt,We,j)=>{j.d(We,{K:()=>Y});const Y=(0,j(3888).d)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(zt,We,j)=>{j.d(We,{_6:()=>Te,jO:()=>ve,yG:()=>Se});var T=j(576),Y=j(3532);function h(ke){return ke[ke.length-1]}function ve(ke){return(0,T.m)(h(ke))?ke.pop():void 0}function Se(ke){return(0,Y.K)(h(ke))?ke.pop():void 0}function Te(ke,pe){return"number"==typeof h(ke)?ke.pop():pe}},4742:(zt,We,j)=>{j.d(We,{D:()=>Se});const{isArray:T}=Array,{getPrototypeOf:Y,prototype:h,keys:ve}=Object;function Se(ke){if(1===ke.length){const pe=ke[0];if(T(pe))return{args:pe,keys:null};if(function Te(ke){return ke&&"object"==typeof ke&&Y(ke)===h}(pe)){const Fe=ve(pe);return{args:Fe.map(me=>pe[me]),keys:Fe}}}return{args:ke,keys:null}}},8737:(zt,We,j)=>{function T(Y,h){if(Y){const ve=Y.indexOf(h);0<=ve&&Y.splice(ve,1)}}j.d(We,{P:()=>T})},3888:(zt,We,j)=>{function T(Y){const ve=Y(Se=>{Error.call(Se),Se.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}j.d(We,{d:()=>T})},1810:(zt,We,j)=>{function T(Y,h){return Y.reduce((ve,Se,Te)=>(ve[Se]=h[Te],ve),{})}j.d(We,{n:()=>T})},2806:(zt,We,j)=>{j.d(We,{O:()=>ve,x:()=>h});var T=j(2416);let Y=null;function h(Se){if(T.v.useDeprecatedSynchronousErrorHandling){const Te=!Y;if(Te&&(Y={errorThrown:!1,error:null}),Se(),Te){const{errorThrown:ke,error:pe}=Y;if(Y=null,ke)throw pe}}else Se()}function ve(Se){T.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=Se)}},9672:(zt,We,j)=>{function T(Y,h,ve,Se=0,Te=!1){const ke=h.schedule(function(){ve(),Te?Y.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(Y.add(ke),!Te)return ke}j.d(We,{f:()=>T})},4671:(zt,We,j)=>{function T(Y){return Y}j.d(We,{y:()=>T})},1144:(zt,We,j)=>{j.d(We,{z:()=>T});const T=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(zt,We,j)=>{j.d(We,{D:()=>Y});var T=j(576);function Y(h){return Symbol.asyncIterator&&(0,T.m)(h?.[Symbol.asyncIterator])}},576:(zt,We,j)=>{function T(Y){return"function"==typeof Y}j.d(We,{m:()=>T})},3670:(zt,We,j)=>{j.d(We,{c:()=>h});var T=j(8822),Y=j(576);function h(ve){return(0,Y.m)(ve[T.L])}},6495:(zt,We,j)=>{j.d(We,{T:()=>h});var T=j(2202),Y=j(576);function h(ve){return(0,Y.m)(ve?.[T.h])}},8239:(zt,We,j)=>{j.d(We,{t:()=>Y});var T=j(576);function Y(h){return(0,T.m)(h?.then)}},3260:(zt,We,j)=>{j.d(We,{L:()=>ve,Q:()=>h});var T=j(655),Y=j(576);function h(Se){return(0,T.FC)(this,arguments,function*(){const ke=Se.getReader();try{for(;;){const{value:pe,done:Fe}=yield(0,T.qq)(ke.read());if(Fe)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(pe)}}finally{ke.releaseLock()}})}function ve(Se){return(0,Y.m)(Se?.getReader)}},3532:(zt,We,j)=>{j.d(We,{K:()=>Y});var T=j(576);function Y(h){return h&&(0,T.m)(h.schedule)}},4482:(zt,We,j)=>{j.d(We,{A:()=>Y,e:()=>h});var T=j(576);function Y(ve){return(0,T.m)(ve?.lift)}function h(ve){return Se=>{if(Y(Se))return Se.lift(function(Te){try{return ve(Te,this)}catch(ke){this.error(ke)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(zt,We,j)=>{j.d(We,{Z:()=>ve});var T=j(4004);const{isArray:Y}=Array;function ve(Se){return(0,T.U)(Te=>function h(Se,Te){return Y(Te)?Se(...Te):Se(Te)}(Se,Te))}},5032:(zt,We,j)=>{function T(){}j.d(We,{Z:()=>T})},9635:(zt,We,j)=>{j.d(We,{U:()=>h,z:()=>Y});var T=j(4671);function Y(...ve){return h(ve)}function h(ve){return 0===ve.length?T.y:1===ve.length?ve[0]:function(Te){return ve.reduce((ke,pe)=>pe(ke),Te)}}},7849:(zt,We,j)=>{j.d(We,{h:()=>h});var T=j(2416),Y=j(3410);function h(ve){Y.z.setTimeout(()=>{const{onUnhandledError:Se}=T.v;if(!Se)throw ve;Se(ve)})}},4532:(zt,We,j)=>{function T(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(We,{z:()=>T})},655:(zt,We,j)=>{function ve(Le,rt){var $e={};for(var nt in Le)Object.prototype.hasOwnProperty.call(Le,nt)&&rt.indexOf(nt)<0&&($e[nt]=Le[nt]);if(null!=Le&&"function"==typeof Object.getOwnPropertySymbols){var yt=0;for(nt=Object.getOwnPropertySymbols(Le);yt<nt.length;yt++)rt.indexOf(nt[yt])<0&&Object.prototype.propertyIsEnumerable.call(Le,nt[yt])&&($e[nt[yt]]=Le[nt[yt]])}return $e}function Ce(Le,rt,$e,nt){return new($e||($e=Promise))(function(st,Mt){function It(Wt){try{jt(nt.next(Wt))}catch(gt){Mt(gt)}}function tn(Wt){try{jt(nt.throw(Wt))}catch(gt){Mt(gt)}}function jt(Wt){Wt.done?st(Wt.value):function yt(st){return st instanceof $e?st:new $e(function(Mt){Mt(st)})}(Wt.value).then(It,tn)}jt((nt=nt.apply(Le,rt||[])).next())})}function lt(Le){return this instanceof lt?(this.v=Le,this):new lt(Le)}function Qe(Le,rt,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,nt=$e.apply(Le,rt||[]),st=[];return yt={},Mt("next"),Mt("throw"),Mt("return"),yt[Symbol.asyncIterator]=function(){return this},yt;function Mt(yn){nt[yn]&&(yt[yn]=function(xn){return new Promise(function(jn,Hn){st.push([yn,xn,jn,Hn])>1||It(yn,xn)})})}function It(yn,xn){try{!function tn(yn){yn.value instanceof lt?Promise.resolve(yn.value.v).then(jt,Wt):gt(st[0][2],yn)}(nt[yn](xn))}catch(jn){gt(st[0][3],jn)}}function jt(yn){It("next",yn)}function Wt(yn){It("throw",yn)}function gt(yn,xn){yn(xn),st.shift(),st.length&&It(st[0][0],st[0][1])}}function Et(Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,rt=Le[Symbol.asyncIterator];return rt?rt.call(Le):(Le=function Nt(Le){var rt="function"==typeof Symbol&&Symbol.iterator,$e=rt&&Le[rt],nt=0;if($e)return $e.call(Le);if(Le&&"number"==typeof Le.length)return{next:function(){return Le&&nt>=Le.length&&(Le=void 0),{value:Le&&Le[nt++],done:!Le}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Le),$e={},nt("next"),nt("throw"),nt("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function nt(st){$e[st]=Le[st]&&function(Mt){return new Promise(function(It,tn){!function yt(st,Mt,It,tn){Promise.resolve(tn).then(function(jt){st({value:jt,done:It})},Mt)}(It,tn,(Mt=Le[st](Mt)).done,Mt.value)})}}}j.d(We,{FC:()=>Qe,KL:()=>Et,_T:()=>ve,mG:()=>Ce,qq:()=>lt})},6895:(zt,We,j)=>{j.d(We,{Do:()=>fe,EM:()=>no,HT:()=>ve,JF:()=>Wl,K0:()=>Te,Mn:()=>nt,Mx:()=>Wi,NF:()=>va,O5:()=>pi,PM:()=>wl,S$:()=>Nt,Tn:()=>ft,UT:()=>yt,V_:()=>Fe,Ye:()=>ht,Zx:()=>Ao,ax:()=>Lr,b0:()=>ct,bD:()=>ls,ez:()=>xa,ol:()=>$e,p6:()=>pr,q:()=>h,tP:()=>Es,w_:()=>Se,x:()=>it});var T=j(4650);let Y=null;function h(){return Y}function ve(R){Y||(Y=R)}class Se{}const Te=new T.OlP("DocumentToken");let ke=(()=>{class R{historyGo(L){throw new Error("Not implemented")}}return R.\u0275fac=function(L){return new(L||R)},R.\u0275prov=T.Yz7({token:R,factory:function(){return function pe(){return(0,T.LFG)(me)}()},providedIn:"platform"}),R})();const Fe=new T.OlP("Location Initialized");let me=(()=>{class R extends ke{constructor(L){super(),this._doc=L,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return h().getBaseHref(this._doc)}onPopState(L){const J=h().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",L,!1),()=>J.removeEventListener("popstate",L)}onHashChange(L){const J=h().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",L,!1),()=>J.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,J,ce){de()?this._history.pushState(L,J,ce):this._location.hash=ce}replaceState(L,J,ce){de()?this._history.replaceState(L,J,ce):this._location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}}return R.\u0275fac=function(L){return new(L||R)(T.LFG(Te))},R.\u0275prov=T.Yz7({token:R,factory:function(){return function Ce(){return new me((0,T.LFG)(Te))}()},providedIn:"platform"}),R})();function de(){return!!window.history.pushState}function et(R,$){if(0==R.length)return $;if(0==$.length)return R;let L=0;return R.endsWith("/")&&L++,$.startsWith("/")&&L++,2==L?R+$.substring(1):1==L?R+$:R+"/"+$}function Ke(R){const $=R.match(/#|\?|$/),L=$&&$.index||R.length;return R.slice(0,L-("/"===R[L-1]?1:0))+R.slice(L)}function at(R){return R&&"?"!==R[0]?"?"+R:R}let Nt=(()=>{class R{historyGo(L){throw new Error("Not implemented")}}return R.\u0275fac=function(L){return new(L||R)},R.\u0275prov=T.Yz7({token:R,factory:function(){return(0,T.f3M)(ct)},providedIn:"root"}),R})();const Je=new T.OlP("appBaseHref");let ct=(()=>{class R extends Nt{constructor(L,J){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=J??this._platformLocation.getBaseHrefFromDOM()??(0,T.f3M)(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return et(this._baseHref,L)}path(L=!1){const J=this._platformLocation.pathname+at(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&L?`${J}${ce}`:J}pushState(L,J,ce,Ue){const wt=this.prepareExternalUrl(ce+at(Ue));this._platformLocation.pushState(L,J,wt)}replaceState(L,J,ce,Ue){const wt=this.prepareExternalUrl(ce+at(Ue));this._platformLocation.replaceState(L,J,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return R.\u0275fac=function(L){return new(L||R)(T.LFG(ke),T.LFG(Je,8))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),fe=(()=>{class R extends Nt{constructor(L,J){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(L){const J=et(this._baseHref,L);return J.length>0?"#"+J:J}pushState(L,J,ce,Ue){let wt=this.prepareExternalUrl(ce+at(Ue));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.pushState(L,J,wt)}replaceState(L,J,ce,Ue){let wt=this.prepareExternalUrl(ce+at(Ue));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.replaceState(L,J,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return R.\u0275fac=function(L){return new(L||R)(T.LFG(ke),T.LFG(Je,8))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac}),R})(),ht=(()=>{class R{constructor(L){this._subject=new T.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const J=this._locationStrategy.getBaseHref();this._basePath=function Et(R){if(new RegExp("^(https?:)?//").test(R)){const[,L]=R.split(/\/\/[^\/]+/);return L}return R}(Ke(Ye(J))),this._locationStrategy.onPopState(ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:ce.state,type:ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,J=""){return this.path()==this.normalize(L+at(J))}normalize(L){return R.stripTrailingSlash(function Qe(R,$){if(!R||!$.startsWith(R))return $;const L=$.substring(R.length);return""===L||["/",";","?","#"].includes(L[0])?L:$}(this._basePath,Ye(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,J="",ce=null){this._locationStrategy.pushState(ce,"",L,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+at(J)),ce)}replaceState(L,J="",ce=null){this._locationStrategy.replaceState(ce,"",L,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+at(J)),ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)})),()=>{const J=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(J,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",J){this._urlChangeListeners.forEach(ce=>ce(L,J))}subscribe(L,J,ce){return this._subject.subscribe({next:L,error:J,complete:ce})}}return R.normalizeQueryParams=at,R.joinWithSlash=et,R.stripTrailingSlash=Ke,R.\u0275fac=function(L){return new(L||R)(T.LFG(Nt))},R.\u0275prov=T.Yz7({token:R,factory:function(){return function lt(){return new ht((0,T.LFG)(Nt))}()},providedIn:"root"}),R})();function Ye(R){return R.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Percent=1]="Percent",Ie[Ie.Currency=2]="Currency",Ie[Ie.Scientific=3]="Scientific",Ie))(),it=(()=>((it=it||{})[it.Format=0]="Format",it[it.Standalone=1]="Standalone",it))(),ft=(()=>((ft=ft||{})[ft.Narrow=0]="Narrow",ft[ft.Abbreviated=1]="Abbreviated",ft[ft.Wide=2]="Wide",ft[ft.Short=3]="Short",ft))(),qt=(()=>((qt=qt||{})[qt.Short=0]="Short",qt[qt.Medium=1]="Medium",qt[qt.Long=2]="Long",qt[qt.Full=3]="Full",qt))(),Pt=(()=>((Pt=Pt||{})[Pt.Decimal=0]="Decimal",Pt[Pt.Group=1]="Group",Pt[Pt.List=2]="List",Pt[Pt.PercentSign=3]="PercentSign",Pt[Pt.PlusSign=4]="PlusSign",Pt[Pt.MinusSign=5]="MinusSign",Pt[Pt.Exponential=6]="Exponential",Pt[Pt.SuperscriptingExponent=7]="SuperscriptingExponent",Pt[Pt.PerMille=8]="PerMille",Pt[Pt.Infinity=9]="Infinity",Pt[Pt.NaN=10]="NaN",Pt[Pt.TimeSeparator=11]="TimeSeparator",Pt[Pt.CurrencyDecimal=12]="CurrencyDecimal",Pt[Pt.CurrencyGroup=13]="CurrencyGroup",Pt))();function $e(R,$,L){const J=(0,T.cg1)(R),Ue=en([J[T.wAp.DayPeriodsFormat],J[T.wAp.DayPeriodsStandalone]],$);return en(Ue,L)}function nt(R,$,L){const J=(0,T.cg1)(R),Ue=en([J[T.wAp.DaysFormat],J[T.wAp.DaysStandalone]],$);return en(Ue,L)}function yt(R,$,L){const J=(0,T.cg1)(R),Ue=en([J[T.wAp.MonthsFormat],J[T.wAp.MonthsStandalone]],$);return en(Ue,L)}function tn(R,$){return en((0,T.cg1)(R)[T.wAp.DateFormat],$)}function jt(R,$){return en((0,T.cg1)(R)[T.wAp.TimeFormat],$)}function Wt(R,$){return en((0,T.cg1)(R)[T.wAp.DateTimeFormat],$)}function gt(R,$){const L=(0,T.cg1)(R),J=L[T.wAp.NumberSymbols][$];if(typeof J>"u"){if($===Pt.CurrencyDecimal)return L[T.wAp.NumberSymbols][Pt.Decimal];if($===Pt.CurrencyGroup)return L[T.wAp.NumberSymbols][Pt.Group]}return J}function cr(R){if(!R[T.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${R[T.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function en(R,$){for(let L=$;L>-1;L--)if(typeof R[L]<"u")return R[L];throw new Error("Locale data API: locale data undefined")}function An(R){const[$,L]=R.split(":");return{hours:+$,minutes:+L}}const ti=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ni={},ri=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var mn=(()=>((mn=mn||{})[mn.Short=0]="Short",mn[mn.ShortGMT=1]="ShortGMT",mn[mn.Long=2]="Long",mn[mn.Extended=3]="Extended",mn))(),rn=(()=>((rn=rn||{})[rn.FullYear=0]="FullYear",rn[rn.Month=1]="Month",rn[rn.Date=2]="Date",rn[rn.Hours=3]="Hours",rn[rn.Minutes=4]="Minutes",rn[rn.Seconds=5]="Seconds",rn[rn.FractionalSeconds=6]="FractionalSeconds",rn[rn.Day=7]="Day",rn))(),sn=(()=>((sn=sn||{})[sn.DayPeriods=0]="DayPeriods",sn[sn.Days=1]="Days",sn[sn.Months=2]="Months",sn[sn.Eras=3]="Eras",sn))();function pr(R,$,L,J){let ce=function Q(R){if(ae(R))return R;if("number"==typeof R&&!isNaN(R))return new Date(R);if("string"==typeof R){if(R=R.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(R)){const[ce,Ue=1,wt=1]=R.split("-").map(ln=>+ln);return nr(ce,Ue-1,wt)}const L=parseFloat(R);if(!isNaN(R-L))return new Date(L);let J;if(J=R.match(ti))return function Pe(R){const $=new Date(0);let L=0,J=0;const ce=R[8]?$.setUTCFullYear:$.setFullYear,Ue=R[8]?$.setUTCHours:$.setHours;R[9]&&(L=Number(R[9]+R[10]),J=Number(R[9]+R[11])),ce.call($,Number(R[1]),Number(R[2])-1,Number(R[3]));const wt=Number(R[4]||0)-L,ln=Number(R[5]||0)-J,or=Number(R[6]||0),ot=Math.floor(1e3*parseFloat("0."+(R[7]||0)));return Ue.call($,wt,ln,or,ot),$}(J)}const $=new Date(R);if(!ae($))throw new Error(`Unable to convert "${R}" into a date`);return $}(R);$=cn(L,$)||$;let ln,wt=[];for(;$;){if(ln=ri.exec($),!ln){wt.push($);break}{wt=wt.concat(ln.slice(1));const vn=wt.pop();if(!vn)break;$=vn}}let or=ce.getTimezoneOffset();J&&(or=_e(J,or),ce=function re(R,$,L){const J=L?-1:1,ce=R.getTimezoneOffset();return function te(R,$){return(R=new Date(R.getTime())).setMinutes(R.getMinutes()+$),R}(R,J*(_e($,ce)-ce))}(ce,J,!0));let ot="";return wt.forEach(vn=>{const Vn=function be(R){if(kr[R])return kr[R];let $;switch(R){case"G":case"GG":case"GGG":$=kn(sn.Eras,ft.Abbreviated);break;case"GGGG":$=kn(sn.Eras,ft.Wide);break;case"GGGGG":$=kn(sn.Eras,ft.Narrow);break;case"y":$=Pn(rn.FullYear,1,0,!1,!0);break;case"yy":$=Pn(rn.FullYear,2,0,!0,!0);break;case"yyy":$=Pn(rn.FullYear,3,0,!1,!0);break;case"yyyy":$=Pn(rn.FullYear,4,0,!1,!0);break;case"Y":$=En(1);break;case"YY":$=En(2,!0);break;case"YYY":$=En(3);break;case"YYYY":$=En(4);break;case"M":case"L":$=Pn(rn.Month,1,1);break;case"MM":case"LL":$=Pn(rn.Month,2,1);break;case"MMM":$=kn(sn.Months,ft.Abbreviated);break;case"MMMM":$=kn(sn.Months,ft.Wide);break;case"MMMMM":$=kn(sn.Months,ft.Narrow);break;case"LLL":$=kn(sn.Months,ft.Abbreviated,it.Standalone);break;case"LLLL":$=kn(sn.Months,ft.Wide,it.Standalone);break;case"LLLLL":$=kn(sn.Months,ft.Narrow,it.Standalone);break;case"w":$=Yt(1);break;case"ww":$=Yt(2);break;case"W":$=Yt(1,!0);break;case"d":$=Pn(rn.Date,1);break;case"dd":$=Pn(rn.Date,2);break;case"c":case"cc":$=Pn(rn.Day,1);break;case"ccc":$=kn(sn.Days,ft.Abbreviated,it.Standalone);break;case"cccc":$=kn(sn.Days,ft.Wide,it.Standalone);break;case"ccccc":$=kn(sn.Days,ft.Narrow,it.Standalone);break;case"cccccc":$=kn(sn.Days,ft.Short,it.Standalone);break;case"E":case"EE":case"EEE":$=kn(sn.Days,ft.Abbreviated);break;case"EEEE":$=kn(sn.Days,ft.Wide);break;case"EEEEE":$=kn(sn.Days,ft.Narrow);break;case"EEEEEE":$=kn(sn.Days,ft.Short);break;case"a":case"aa":case"aaa":$=kn(sn.DayPeriods,ft.Abbreviated);break;case"aaaa":$=kn(sn.DayPeriods,ft.Wide);break;case"aaaaa":$=kn(sn.DayPeriods,ft.Narrow);break;case"b":case"bb":case"bbb":$=kn(sn.DayPeriods,ft.Abbreviated,it.Standalone,!0);break;case"bbbb":$=kn(sn.DayPeriods,ft.Wide,it.Standalone,!0);break;case"bbbbb":$=kn(sn.DayPeriods,ft.Narrow,it.Standalone,!0);break;case"B":case"BB":case"BBB":$=kn(sn.DayPeriods,ft.Abbreviated,it.Format,!0);break;case"BBBB":$=kn(sn.DayPeriods,ft.Wide,it.Format,!0);break;case"BBBBB":$=kn(sn.DayPeriods,ft.Narrow,it.Format,!0);break;case"h":$=Pn(rn.Hours,1,-12);break;case"hh":$=Pn(rn.Hours,2,-12);break;case"H":$=Pn(rn.Hours,1);break;case"HH":$=Pn(rn.Hours,2);break;case"m":$=Pn(rn.Minutes,1);break;case"mm":$=Pn(rn.Minutes,2);break;case"s":$=Pn(rn.Seconds,1);break;case"ss":$=Pn(rn.Seconds,2);break;case"S":$=Pn(rn.FractionalSeconds,1);break;case"SS":$=Pn(rn.FractionalSeconds,2);break;case"SSS":$=Pn(rn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":$=Cr(mn.Short);break;case"ZZZZZ":$=Cr(mn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":$=Cr(mn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":$=Cr(mn.Long);break;default:return null}return kr[R]=$,$}(vn);ot+=Vn?Vn(ce,L,or):"''"===vn?"'":vn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ot}function nr(R,$,L){const J=new Date(0);return J.setFullYear(R,$,L),J.setHours(0,0,0),J}function cn(R,$){const L=function rt(R){return(0,T.cg1)(R)[T.wAp.LocaleId]}(R);if(ni[L]=ni[L]||{},ni[L][$])return ni[L][$];let J="";switch($){case"shortDate":J=tn(R,qt.Short);break;case"mediumDate":J=tn(R,qt.Medium);break;case"longDate":J=tn(R,qt.Long);break;case"fullDate":J=tn(R,qt.Full);break;case"shortTime":J=jt(R,qt.Short);break;case"mediumTime":J=jt(R,qt.Medium);break;case"longTime":J=jt(R,qt.Long);break;case"fullTime":J=jt(R,qt.Full);break;case"short":const ce=cn(R,"shortTime"),Ue=cn(R,"shortDate");J=br(Wt(R,qt.Short),[ce,Ue]);break;case"medium":const wt=cn(R,"mediumTime"),ln=cn(R,"mediumDate");J=br(Wt(R,qt.Medium),[wt,ln]);break;case"long":const or=cn(R,"longTime"),ot=cn(R,"longDate");J=br(Wt(R,qt.Long),[or,ot]);break;case"full":const vn=cn(R,"fullTime"),Vn=cn(R,"fullDate");J=br(Wt(R,qt.Full),[vn,Vn])}return J&&(ni[L][$]=J),J}function br(R,$){return $&&(R=R.replace(/\{([^}]+)}/g,function(L,J){return null!=$&&J in $?$[J]:L})),R}function Ir(R,$,L="-",J,ce){let Ue="";(R<0||ce&&R<=0)&&(ce?R=1-R:(R=-R,Ue=L));let wt=String(R);for(;wt.length<$;)wt="0"+wt;return J&&(wt=wt.slice(wt.length-$)),Ue+wt}function Pn(R,$,L=0,J=!1,ce=!1){return function(Ue,wt){let ln=function jr(R,$){switch(R){case rn.FullYear:return $.getFullYear();case rn.Month:return $.getMonth();case rn.Date:return $.getDate();case rn.Hours:return $.getHours();case rn.Minutes:return $.getMinutes();case rn.Seconds:return $.getSeconds();case rn.FractionalSeconds:return $.getMilliseconds();case rn.Day:return $.getDay();default:throw new Error(`Unknown DateType value "${R}".`)}}(R,Ue);if((L>0||ln>-L)&&(ln+=L),R===rn.Hours)0===ln&&-12===L&&(ln=12);else if(R===rn.FractionalSeconds)return function Jn(R,$){return Ir(R,3).substring(0,$)}(ln,$);const or=gt(wt,Pt.MinusSign);return Ir(ln,$,or,J,ce)}}function kn(R,$,L=it.Format,J=!1){return function(ce,Ue){return function Ci(R,$,L,J,ce,Ue){switch(L){case sn.Months:return yt($,ce,J)[R.getMonth()];case sn.Days:return nt($,ce,J)[R.getDay()];case sn.DayPeriods:const wt=R.getHours(),ln=R.getMinutes();if(Ue){const ot=function Cn(R){const $=(0,T.cg1)(R);return cr($),($[T.wAp.ExtraData][2]||[]).map(J=>"string"==typeof J?An(J):[An(J[0]),An(J[1])])}($),vn=function qn(R,$,L){const J=(0,T.cg1)(R);cr(J);const Ue=en([J[T.wAp.ExtraData][0],J[T.wAp.ExtraData][1]],$)||[];return en(Ue,L)||[]}($,ce,J),Vn=ot.findIndex(Dn=>{if(Array.isArray(Dn)){const[Ct,xt]=Dn,_i=wt>=Ct.hours&&ln>=Ct.minutes,kt=wt<xt.hours||wt===xt.hours&&ln<xt.minutes;if(Ct.hours<xt.hours){if(_i&&kt)return!0}else if(_i||kt)return!0}else if(Dn.hours===wt&&Dn.minutes===ln)return!0;return!1});if(-1!==Vn)return vn[Vn]}return $e($,ce,J)[wt<12?0:1];case sn.Eras:return function st(R,$){return en((0,T.cg1)(R)[T.wAp.Eras],$)}($,J)[R.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${L}`)}}(ce,Ue,R,$,L,J)}}function Cr(R){return function($,L,J){const ce=-1*J,Ue=gt(L,Pt.MinusSign),wt=ce>0?Math.floor(ce/60):Math.ceil(ce/60);switch(R){case mn.Short:return(ce>=0?"+":"")+Ir(wt,2,Ue)+Ir(Math.abs(ce%60),2,Ue);case mn.ShortGMT:return"GMT"+(ce>=0?"+":"")+Ir(wt,1,Ue);case mn.Long:return"GMT"+(ce>=0?"+":"")+Ir(wt,2,Ue)+":"+Ir(Math.abs(ce%60),2,Ue);case mn.Extended:return 0===J?"Z":(ce>=0?"+":"")+Ir(wt,2,Ue)+":"+Ir(Math.abs(ce%60),2,Ue);default:throw new Error(`Unknown zone width "${R}"`)}}}const Rt=0,bt=4;function hn(R){return nr(R.getFullYear(),R.getMonth(),R.getDate()+(bt-R.getDay()))}function Yt(R,$=!1){return function(L,J){let ce;if($){const Ue=new Date(L.getFullYear(),L.getMonth(),1).getDay()-1,wt=L.getDate();ce=1+Math.floor((wt+Ue)/7)}else{const Ue=hn(L),wt=function Ut(R){const $=nr(R,Rt,1).getDay();return nr(R,0,1+($<=bt?bt:bt+7)-$)}(Ue.getFullYear()),ln=Ue.getTime()-wt.getTime();ce=1+Math.round(ln/6048e5)}return Ir(ce,R,gt(J,Pt.MinusSign))}}function En(R,$=!1){return function(L,J){return Ir(hn(L).getFullYear(),R,gt(J,Pt.MinusSign),$)}}const kr={};function _e(R,$){R=R.replace(/:/g,"");const L=Date.parse("Jan 01, 1970 00:00:00 "+R)/6e4;return isNaN(L)?$:L}function ae(R){return R instanceof Date&&!isNaN(R.valueOf())}const he=/^(\d+)?\.((\d+)(-(\d+))?)?$/,oe=22,Ae=".",Xe="0",mt=";",nn=",",Bt="#";function Fr(R){const $=parseInt(R);if(isNaN($))throw new Error("Invalid integer literal when parsing "+R);return $}function Wi(R,$){$=encodeURIComponent($);for(const L of R.split(";")){const J=L.indexOf("="),[ce,Ue]=-1==J?[L,""]:[L.slice(0,J),L.slice(J+1)];if(ce.trim()===$)return decodeURIComponent(Ue)}return null}class Li{constructor($,L,J,ce){this.$implicit=$,this.ngForOf=L,this.index=J,this.count=ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lr=(()=>{class R{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,J,ce){this._viewContainer=L,this._template=J,this._differs=ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const J=this._viewContainer;L.forEachOperation((ce,Ue,wt)=>{if(null==ce.previousIndex)J.createEmbeddedView(this._template,new Li(ce.item,this._ngForOf,-1,-1),null===wt?void 0:wt);else if(null==wt)J.remove(null===Ue?void 0:Ue);else if(null!==Ue){const ln=J.get(Ue);J.move(ln,wt),ii(ln,ce)}});for(let ce=0,Ue=J.length;ce<Ue;ce++){const ln=J.get(ce).context;ln.index=ce,ln.count=Ue,ln.ngForOf=this._ngForOf}L.forEachIdentityChange(ce=>{ii(J.get(ce.currentIndex),ce)})}static ngTemplateContextGuard(L,J){return!0}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function ii(R,$){R.context.$implicit=$.item}let pi=(()=>{class R{constructor(L,J){this._viewContainer=L,this._context=new Ra,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Fn("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Fn("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,J){return!0}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.s_b),T.Y36(T.Rgc))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class Ra{constructor(){this.$implicit=null,this.ngIf=null}}function Fn(R,$){if($&&!$.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,T.AaK)($)}'.`)}let Es=(()=>{class R{constructor(L){this._viewContainerRef=L,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(L){if(L.ngTemplateOutlet||L.ngTemplateOutletInjector){const J=this._viewContainerRef;if(this._viewRef&&J.remove(J.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ce,ngTemplateOutletContext:Ue,ngTemplateOutletInjector:wt}=this;this._viewRef=J.createEmbeddedView(ce,Ue,wt?{injector:wt}:void 0)}else this._viewRef=null}else this._viewRef&&L.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.s_b))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[T.TTD]}),R})();let Ao=(()=>{class R{constructor(L){this._locale=L}transform(L,J,ce){if(!function ya(R){return!(null==R||""===R||R!=R)}(L))return null;ce=ce||this._locale;try{return function _a(R,$,L){return function qi(R,$,L,J,ce,Ue,wt=!1){let ln="",or=!1;if(isFinite(R)){let ot=function Co(R){let J,ce,Ue,wt,ln,$=Math.abs(R)+"",L=0;for((ce=$.indexOf(Ae))>-1&&($=$.replace(Ae,"")),(Ue=$.search(/e/i))>0?(ce<0&&(ce=Ue),ce+=+$.slice(Ue+1),$=$.substring(0,Ue)):ce<0&&(ce=$.length),Ue=0;$.charAt(Ue)===Xe;Ue++);if(Ue===(ln=$.length))J=[0],ce=1;else{for(ln--;$.charAt(ln)===Xe;)ln--;for(ce-=Ue,J=[],wt=0;Ue<=ln;Ue++,wt++)J[wt]=Number($.charAt(Ue))}return ce>oe&&(J=J.splice(0,oe-1),L=ce-1,ce=1),{digits:J,exponent:L,integerLen:ce}}(R);wt&&(ot=function Vs(R){if(0===R.digits[0])return R;const $=R.digits.length-R.integerLen;return R.exponent?R.exponent+=2:(0===$?R.digits.push(0,0):1===$&&R.digits.push(0),R.integerLen+=2),R}(ot));let vn=$.minInt,Vn=$.minFrac,Dn=$.maxFrac;if(Ue){const _t=Ue.match(he);if(null===_t)throw new Error(`${Ue} is not a valid digit info`);const Tr=_t[1],vo=_t[3],$a=_t[5];null!=Tr&&(vn=Fr(Tr)),null!=vo&&(Vn=Fr(vo)),null!=$a?Dn=Fr($a):null!=vo&&Vn>Dn&&(Dn=Vn)}!function Yn(R,$,L){if($>L)throw new Error(`The minimum number of digits after fraction (${$}) is higher than the maximum (${L}).`);let J=R.digits,ce=J.length-R.integerLen;const Ue=Math.min(Math.max($,ce),L);let wt=Ue+R.integerLen,ln=J[wt];if(wt>0){J.splice(Math.max(R.integerLen,wt));for(let Vn=wt;Vn<J.length;Vn++)J[Vn]=0}else{ce=Math.max(0,ce),R.integerLen=1,J.length=Math.max(1,wt=Ue+1),J[0]=0;for(let Vn=1;Vn<wt;Vn++)J[Vn]=0}if(ln>=5)if(wt-1<0){for(let Vn=0;Vn>wt;Vn--)J.unshift(0),R.integerLen++;J.unshift(1),R.integerLen++}else J[wt-1]++;for(;ce<Math.max(0,Ue);ce++)J.push(0);let or=0!==Ue;const ot=$+R.integerLen,vn=J.reduceRight(function(Vn,Dn,Ct,xt){return xt[Ct]=(Dn+=Vn)<10?Dn:Dn-10,or&&(0===xt[Ct]&&Ct>=ot?xt.pop():or=!1),Dn>=10?1:0},0);vn&&(J.unshift(vn),R.integerLen++)}(ot,Vn,Dn);let Ct=ot.digits,xt=ot.integerLen;const _i=ot.exponent;let kt=[];for(or=Ct.every(_t=>!_t);xt<vn;xt++)Ct.unshift(0);for(;xt<0;xt++)Ct.unshift(0);xt>0?kt=Ct.splice(xt,Ct.length):(kt=Ct,Ct=[0]);const je=[];for(Ct.length>=$.lgSize&&je.unshift(Ct.splice(-$.lgSize,Ct.length).join(""));Ct.length>$.gSize;)je.unshift(Ct.splice(-$.gSize,Ct.length).join(""));Ct.length&&je.unshift(Ct.join("")),ln=je.join(gt(L,J)),kt.length&&(ln+=gt(L,ce)+kt.join("")),_i&&(ln+=gt(L,Pt.Exponential)+"+"+_i)}else ln=gt(L,Pt.Infinity);return ln=R<0&&!or?$.negPre+ln+$.negSuf:$.posPre+ln+$.posSuf,ln}(R,function bs(R,$="-"){const L={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},J=R.split(mt),ce=J[0],Ue=J[1],wt=-1!==ce.indexOf(Ae)?ce.split(Ae):[ce.substring(0,ce.lastIndexOf(Xe)+1),ce.substring(ce.lastIndexOf(Xe)+1)],ln=wt[0],or=wt[1]||"";L.posPre=ln.substring(0,ln.indexOf(Bt));for(let vn=0;vn<or.length;vn++){const Vn=or.charAt(vn);Vn===Xe?L.minFrac=L.maxFrac=vn+1:Vn===Bt?L.maxFrac=vn+1:L.posSuf+=Vn}const ot=ln.split(nn);if(L.gSize=ot[1]?ot[1].length:0,L.lgSize=ot[2]||ot[1]?(ot[2]||ot[1]).length:0,Ue){const vn=ce.length-L.posPre.length-L.posSuf.length,Vn=Ue.indexOf(Bt);L.negPre=Ue.substring(0,Vn).replace(/'/g,""),L.negSuf=Ue.slice(Vn+vn).replace(/'/g,"")}else L.negPre=$+L.posPre,L.negSuf=L.posSuf;return L}(function yn(R,$){return(0,T.cg1)(R)[T.wAp.NumberFormats][$]}($,Ie.Percent),gt($,Pt.MinusSign)),$,Pt.Group,Pt.Decimal,L,!0).replace(new RegExp("%","g"),gt($,Pt.PercentSign))}(function As(R){if("string"==typeof R&&!isNaN(Number(R)-parseFloat(R)))return Number(R);if("number"!=typeof R)throw new Error(`${R} is not a number`);return R}(L),ce,J)}catch(Ue){throw function ye(R,$){return new T.vHH(2100,!1)}()}}}return R.\u0275fac=function(L){return new(L||R)(T.Y36(T.soG,16))},R.\u0275pipe=T.Yjl({name:"percent",type:R,pure:!0,standalone:!0}),R})();let xa=(()=>{class R{}return R.\u0275fac=function(L){return new(L||R)},R.\u0275mod=T.oAB({type:R}),R.\u0275inj=T.cJS({}),R})();const ls="browser",mo="server";function va(R){return R===ls}function wl(R){return R===mo}let no=(()=>{class R{}return R.\u0275prov=(0,T.Yz7)({token:R,providedIn:"root",factory:()=>new ka((0,T.LFG)(Te),window)}),R})();class ka{constructor($,L){this.document=$,this.window=L,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const L=function Fa(R,$){const L=R.getElementById($)||R.getElementsByName($)[0];if(L)return L;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const J=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let ce=J.currentNode;for(;ce;){const Ue=ce.shadowRoot;if(Ue){const wt=Ue.getElementById($)||Ue.querySelector(`[name="${$}"]`);if(wt)return wt}ce=J.nextNode()}}return null}(this.document,$);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const L=this.window.history;L&&L.scrollRestoration&&(L.scrollRestoration=$)}}scrollToElement($){const L=$.getBoundingClientRect(),J=L.left+this.window.pageXOffset,ce=L.top+this.window.pageYOffset,Ue=this.offset();this.window.scrollTo(J-Ue[0],ce-Ue[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=zs(this.window.history)||zs(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function zs(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Wl{}},4650:(zt,We,j)=>{j.d(We,{$8M:()=>za,$WT:()=>ki,$Z:()=>Zf,AFp:()=>Sw,ALo:()=>yf,AaK:()=>pe,BQk:()=>fa,CHM:()=>ba,CRH:()=>Sp,CZH:()=>z0,CqO:()=>lp,D6c:()=>DI,EJc:()=>K0,EpF:()=>tf,F$t:()=>id,F4k:()=>Lg,FYo:()=>ng,FiY:()=>F,Gf:()=>x0,GfV:()=>$f,Gpc:()=>de,Hsn:()=>Bg,Ikx:()=>hy,JOm:()=>Rr,KtG:()=>ta,LFG:()=>Rt,LMc:()=>SD,LSH:()=>n_,Lbi:()=>XD,Lck:()=>we,MAs:()=>$_,MGl:()=>nh,MMx:()=>gn,MT6:()=>mp,NdJ:()=>nf,OlP:()=>Vr,Oqu:()=>pp,P3R:()=>r_,PXZ:()=>cI,Q6J:()=>kg,QGY:()=>ap,Qsj:()=>rg,QtT:()=>Hu,R0b:()=>Ku,RDi:()=>lv,Rgc:()=>fm,SBq:()=>qc,SDv:()=>Iy,Sil:()=>tI,Suo:()=>_w,TTD:()=>no,TgZ:()=>sp,Tol:()=>Wb,Udp:()=>$g,VKq:()=>R0,W1O:()=>jE,WLB:()=>hu,X6Q:()=>pI,XFs:()=>Gt,Xpm:()=>On,Xts:()=>ts,Y36:()=>Hd,YKP:()=>ne,YNc:()=>Pg,Yjl:()=>Co,Yz7:()=>gt,Z0I:()=>Hn,ZZ4:()=>Jw,_Bn:()=>B,_UZ:()=>K_,_Vd:()=>Wc,_c5:()=>gd,_uU:()=>iy,aQg:()=>qy,c2e:()=>W0,cJS:()=>xn,cg1:()=>em,dDg:()=>lI,dqk:()=>mn,eFA:()=>Bw,eJc:()=>vw,ekj:()=>ny,eoX:()=>kw,f3M:()=>Ut,g9A:()=>eD,h0i:()=>z,hGG:()=>Yy,hij:()=>gp,iGM:()=>VE,ifc:()=>Q,ip1:()=>XE,jDz:()=>ss,kEZ:()=>NE,kL8:()=>wp,lG2:()=>Vs,lcZ:()=>Oy,lqb:()=>nu,lri:()=>uD,n5z:()=>Nl,oAB:()=>_a,oxw:()=>Ug,pQV:()=>Cy,q4F:()=>ig,qLn:()=>zf,qOj:()=>Ig,qZA:()=>th,rWj:()=>xw,s9C:()=>jo,sBO:()=>Z0,s_b:()=>Ry,soG:()=>jy,tb:()=>dD,tp0:()=>Z,uIk:()=>ip,vHH:()=>Je,vpe:()=>$u,wAp:()=>Gn,xp6:()=>__,ynx:()=>Fg,z2F:()=>Sc,zSh:()=>Mh,zs3:()=>Zc});var T=j(7579),Y=j(727),h=j(9751),ve=j(6451),Se=j(3099);function Te(s){for(let a in s)if(s[a]===Te)return a;throw Error("Could not find renamed property on target object.")}function ke(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Fe(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const me=Te({__forward_ref__:Te});function de(s){return s.__forward_ref__=de,s.toString=function(){return pe(this())},s}function Ce(s){return et(s)?s():s}function et(s){return"function"==typeof s&&s.hasOwnProperty(me)&&s.__forward_ref__===de}function Ke(s){return s&&!!s.\u0275providers}const Nt="https://g.co/ng/security#xss";class Je extends Error{constructor(a,c){super(ct(a,c)),this.code=a}}function ct(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function Et(s,a){throw new Je(-201,!1)}function It(s,a,c,f){throw new Error(`ASSERTION ERROR: ${s}`+(null==f?"":` [Expected=> ${c} ${f} ${a} <=Actual]`))}function gt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xn(s){return{providers:s.providers||[],imports:s.imports||[]}}function jn(s){return Dr(s,qn)||Dr(s,en)}function Hn(s){return null!==jn(s)}function Dr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Cn(s){return s&&(s.hasOwnProperty(Kr)||s.hasOwnProperty(An))?s[Kr]:null}const qn=Te({\u0275prov:Te}),Kr=Te({\u0275inj:Te}),en=Te({ngInjectableDef:Te}),An=Te({ngInjectorDef:Te});var Gt=(()=>((Gt=Gt||{})[Gt.Default=0]="Default",Gt[Gt.Host=1]="Host",Gt[Gt.Self=2]="Self",Gt[Gt.SkipSelf=4]="SkipSelf",Gt[Gt.Optional=8]="Optional",Gt))();let ai;function ti(s){const a=ai;return ai=s,a}function ni(s,a,c){const f=jn(s);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&Gt.Optional?null:void 0!==a?a:void Et(pe(s))}const mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nr={},cn="__NG_DI_FLAG__",br="ngTempTokenPath",Ir="ngTokenPath",Jn=/\n/gm,Pn="\u0275",jr="__source";let kn;function Ci(s){const a=kn;return kn=s,a}function Cr(s,a=Gt.Default){if(void 0===kn)throw new Je(-203,!1);return null===kn?ni(s,void 0,a):kn.get(s,a&Gt.Optional?null:void 0,a)}function Rt(s,a=Gt.Default){return(function ei(){return ai}()||Cr)(Ce(s),a)}function Ut(s,a=Gt.Default){return Rt(s,hn(a))}function hn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Yt(s){const a=[];for(let c=0;c<s.length;c++){const f=Ce(s[c]);if(Array.isArray(f)){if(0===f.length)throw new Je(900,!1);let g,y=Gt.Default;for(let I=0;I<f.length;I++){const N=f[I],k=kr(N);"number"==typeof k?-1===k?g=N.token:y|=k:g=N}a.push(Rt(g,y))}else a.push(Rt(f))}return a}function En(s,a){return s[cn]=a,s.prototype[cn]=a,s}function kr(s){return s[cn]}function te(s){return{toString:s}.toString()}var re=(()=>((re=re||{})[re.OnPush=0]="OnPush",re[re.Default=1]="Default",re))(),Q=(()=>{return(s=Q||(Q={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Q;var s})();const Pe={},ae=[],he=Te({\u0275cmp:Te}),oe=Te({\u0275dir:Te}),Ae=Te({\u0275pipe:Te}),Xe=Te({\u0275mod:Te}),mt=Te({\u0275fac:Te}),nn=Te({__NG_ELEMENT_ID__:Te});let Bt=0;function On(s){return te(()=>{const a=sr(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===re.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Q.Emulated,id:"c"+Bt++,styles:s.styles||ae,_:null,schemas:s.schemas||null,tView:null};Wi(c);const f=s.dependencies;return c.directiveDefs=as(f,!1),c.pipeDefs=as(f,!0),c})}function qi(s){return Yn(s)||Fr(s)}function Ko(s){return null!==s}function _a(s){return te(()=>({type:s.type,bootstrap:s.bootstrap||ae,declarations:s.declarations||ae,imports:s.imports||ae,exports:s.exports||ae,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function bs(s,a){if(null==s)return Pe;const c={};for(const f in s)if(s.hasOwnProperty(f)){let g=s[f],y=g;Array.isArray(g)&&(y=g[1],g=g[0]),c[g]=f,a&&(a[g]=y)}return c}function Vs(s){return te(()=>{const a=sr(s);return Wi(a),a})}function Co(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yn(s){return s[he]||null}function Fr(s){return s[oe]||null}function Yr(s){return s[Ae]||null}function ki(s){const a=Yn(s)||Fr(s)||Yr(s);return null!==a&&a.standalone}function zi(s,a){const c=s[Xe]||null;if(!c&&!0===a)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return c}function sr(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||ae,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bs(s.inputs,a),outputs:bs(s.outputs)}}function Wi(s){s.features?.forEach(a=>a(s))}function as(s,a){if(!s)return null;const c=a?Yr:qi;return()=>("function"==typeof s?s():s).map(f=>c(f)).filter(Ko)}const Fi=0,Jt=1,Nn=2,vr=3,li=4,Li=5,Lr=6,ii=7,si=8,pi=9,Ra=10,Fn=11,ws=12,To=13,qo=14,So=15,vi=16,Xs=17,Zr=18,bi=19,Es=20,Re=21,ye=22,dt=1,Lt=2,an=7,Rn=8,mr=9,Ln=10;function Qr(s){return Array.isArray(s)&&"object"==typeof s[dt]}function _r(s){return Array.isArray(s)&&!0===s[dt]}function Gs(s){return 0!=(4&s.flags)}function Is(s){return s.componentOffset>-1}function Cs(s){return 1==(1&s.flags)}function js(s){return!!s.template}function Pa(s){return 0!=(256&s[Nn])}function Ui(s,a){return s.hasOwnProperty(mt)?s[mt]:null}class $s{constructor(a,c,f){this.previousValue=a,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function no(){return ka}function ka(s){return s.type.prototype.ngOnChanges&&(s.setInput=Fa),zs}function zs(){const s=Wl(this),a=s?.current;if(a){const c=s.previous;if(c===Pe)s.previous=a;else for(let f in a)c[f]=a[f];s.current=null,this.ngOnChanges(a)}}function Fa(s,a,c,f){const g=this.declaredInputs[c],y=Wl(s)||function La(s,a){return s[pu]=a}(s,{previous:Pe,current:null}),I=y.current||(y.current={}),N=y.previous,k=N[g];I[g]=new $s(k&&k.currentValue,a,N===Pe),s[f]=a}no.ngInherit=!0;const pu="__ngSimpleChanges__";function Wl(s){return s[pu]||null}const yr=function(s,a,c){};function Nr(s){for(;Array.isArray(s);)s=s[Fi];return s}function Jo(s,a){return Nr(a[s])}function gi(s,a){return Nr(a[s.index])}function il(s,a){return s.data[a]}function Ns(s,a){return s[a]}function ui(s,a){const c=a[s];return Qr(c)?c:c[Fi]}function Va(s){return 64==(64&s[Nn])}function Yi(s,a){return null==a?null:s[a]}function Ga(s){s[Zr]=0}function El(s,a){s[Li]+=a;let c=s,f=s[vr];for(;null!==f&&(1===a&&1===c[Li]||-1===a&&0===c[Li]);)f[Li]+=a,c=f,f=f[vr]}const Tn={lFrame:Sl(null),bindingsEnabled:!0};function Mo(){return Tn.bindingsEnabled}function ut(){return Tn.lFrame.lView}function rr(){return Tn.lFrame.tView}function ba(s){return Tn.lFrame.contextLView=s,s[si]}function ta(s){return Tn.lFrame.contextLView=null,s}function Ei(){let s=Il();for(;null!==s&&64===s.type;)s=s.parent;return s}function Il(){return Tn.lFrame.currentTNode}function Ro(){const s=Tn.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function Zi(s,a){const c=Tn.lFrame;c.currentTNode=s,c.isParent=a}function sl(){return Tn.lFrame.isParent}function na(){Tn.lFrame.isParent=!1}function $r(){const s=Tn.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Vi(){return Tn.lFrame.bindingIndex}function Po(){return Tn.lFrame.bindingIndex++}function Qi(s){const a=Tn.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function xo(s){Tn.lFrame.inI18n=s}function Qu(s,a){const c=Tn.lFrame;c.bindingIndex=c.bindingRootIndex=s,yo(a)}function yo(s){Tn.lFrame.currentDirectiveIndex=s}function Tl(){return Tn.lFrame.currentQueryIndex}function oa(s){Tn.lFrame.currentQueryIndex=s}function ol(s){const a=s[Jt];return 2===a.type?a.declTNode:1===a.type?s[Lr]:null}function aa(s,a,c){if(c&Gt.SkipSelf){let g=a,y=s;for(;!(g=g.parent,null!==g||c&Gt.Host||(g=ol(y),null===g||(y=y[So],10&g.type))););if(null===g)return!1;a=g,s=y}const f=Tn.lFrame=ll();return f.currentTNode=a,f.lView=s,!0}function al(s){const a=ll(),c=s[Jt];Tn.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function ll(){const s=Tn.lFrame,a=null===s?null:s.child;return null===a?Sl(s):a}function Sl(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function ko(){const s=Tn.lFrame;return Tn.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Mc=ko;function Kl(){const s=ko();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function mi(){return Tn.lFrame.selectedIndex}function Jr(s){Tn.lFrame.selectedIndex=s}function Xr(){const s=Tn.lFrame;return il(s.tView,s.selectedIndex)}function Al(s,a){for(let c=a.directiveStart,f=a.directiveEnd;c<f;c++){const y=s.data[c].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:N,ngAfterViewInit:k,ngAfterViewChecked:H,ngOnDestroy:X}=y;I&&(s.contentHooks||(s.contentHooks=[])).push(-c,I),N&&((s.contentHooks||(s.contentHooks=[])).push(c,N),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,N)),k&&(s.viewHooks||(s.viewHooks=[])).push(-c,k),H&&((s.viewHooks||(s.viewHooks=[])).push(c,H),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,H)),null!=X&&(s.destroyHooks||(s.destroyHooks=[])).push(c,X)}}function wa(s,a,c){L(s,a,3,c)}function R(s,a,c,f){(3&s[Nn])===c&&L(s,a,c,f)}function $(s,a){let c=s[Nn];(3&c)===a&&(c&=2047,c+=1,s[Nn]=c)}function L(s,a,c,f){const y=f??-1,I=a.length-1;let N=0;for(let k=void 0!==f?65535&s[Zr]:0;k<I;k++)if("number"==typeof a[k+1]){if(N=a[k],null!=f&&N>=f)break}else a[k]<0&&(s[Zr]+=65536),(N<y||-1==y)&&(J(s,c,a,k),s[Zr]=(4294901760&s[Zr])+k+2),k++}function J(s,a,c,f){const g=c[f]<0,y=c[f+1],N=s[g?-c[f]:c[f]];if(g){if(s[Nn]>>11<s[Zr]>>16&&(3&s[Nn])===a){s[Nn]+=2048,yr(4,N,y);try{y.call(N)}finally{yr(5,N,y)}}}else{yr(4,N,y);try{y.call(N)}finally{yr(5,N,y)}}}const ce=-1;class Ue{constructor(a,c,f){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function xt(s,a,c){let f=0;for(;f<c.length;){const g=c[f];if("number"==typeof g){if(0!==g)break;f++;const y=c[f++],I=c[f++],N=c[f++];s.setAttribute(a,I,N,y)}else{const y=g,I=c[++f];kt(y)?s.setProperty(a,y,I):s.setAttribute(a,y,I),f++}}return f}function _i(s){return 3===s||4===s||6===s}function kt(s){return 64===s.charCodeAt(0)}function je(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let f=0;f<a.length;f++){const g=a[f];"number"==typeof g?c=g:0===c||_t(s,c,g,null,-1===c||2===c?a[++f]:null)}}return s}function _t(s,a,c,f,g){let y=0,I=s.length;if(-1===a)I=-1;else for(;y<s.length;){const N=s[y++];if("number"==typeof N){if(N===a){I=-1;break}if(N>a){I=y-1;break}}}for(;y<s.length;){const N=s[y];if("number"==typeof N)break;if(N===c){if(null===f)return void(null!==g&&(s[y+1]=g));if(f===s[y+1])return void(s[y+2]=g)}y++,null!==f&&y++,null!==g&&y++}-1!==I&&(s.splice(I,0,a),y=I+1),s.splice(y++,0,c),null!==f&&s.splice(y++,0,f),null!==g&&s.splice(y++,0,g)}function Tr(s){return s!==ce}function vo(s){return 32767&s}function Fo(s,a){let c=function $a(s){return s>>16}(s),f=a;for(;c>0;)f=f[So],c--;return f}let ul=!0;function la(s){const a=ul;return ul=s,a}const ua=255,Ju=5;let yu=0;const bo={};function Mn(s,a){const c=vu(s,a);if(-1!==c)return c;const f=a[Jt];f.firstCreatePass&&(s.injectorIndex=a.length,Ea(f.data,s),Ea(a,null),Ea(f.blueprint,null));const g=ir(s,a),y=s.injectorIndex;if(Tr(g)){const I=vo(g),N=Fo(g,a),k=N[Jt].data;for(let H=0;H<8;H++)a[y+H]=N[I+H]|k[I+H]}return a[y+8]=g,y}function Ea(s,a){s.push(0,0,0,0,0,0,0,0,a)}function vu(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function ir(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,f=null,g=a;for(;null!==g;){if(f=wo(g),null===f)return ce;if(c++,g=g[So],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return ce}function fn(s,a,c){!function Ol(s,a,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(nn)&&(f=c[nn]),null==f&&(f=c[nn]=yu++);const g=f&ua;a.data[s+(g>>Ju)]|=1<<g}(s,a,c)}function Wn(s,a,c){if(c&Gt.Optional||void 0!==s)return s;Et()}function io(s,a,c,f){if(c&Gt.Optional&&void 0===f&&(f=null),!(c&(Gt.Self|Gt.Host))){const g=s[pi],y=ti(void 0);try{return g?g.get(a,f,c&Gt.Optional):ni(a,f,c&Gt.Optional)}finally{ti(y)}}return Wn(f,0,c)}function dr(s,a,c,f=Gt.Default,g){if(null!==s){if(1024&a[Nn]){const I=function Xl(s,a,c,f,g){let y=s,I=a;for(;null!==y&&null!==I&&1024&I[Nn]&&!(256&I[Nn]);){const N=Ht(y,I,c,f|Gt.Self,bo);if(N!==bo)return N;let k=y.parent;if(!k){const H=I[Re];if(H){const X=H.get(c,bo,f);if(X!==bo)return X}k=wo(I),I=I[So]}y=k}return g}(s,a,c,f,bo);if(I!==bo)return I}const y=Ht(s,a,c,f,bo);if(y!==bo)return y}return io(a,c,f,g)}function Ht(s,a,c,f,g){const y=function Jl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(nn)?s[nn]:void 0;return"number"==typeof a?a>=0?a&ua:Xu:a}(c);if("function"==typeof y){if(!aa(a,s,f))return f&Gt.Host?Wn(g,0,f):io(a,c,f,g);try{const I=y(f);if(null!=I||f&Gt.Optional)return I;Et()}finally{Mc()}}else if("number"==typeof y){let I=null,N=vu(s,a),k=ce,H=f&Gt.Host?a[vi][Lr]:null;for((-1===N||f&Gt.SkipSelf)&&(k=-1===N?ir(s,a):a[N+8],k!==ce&&Da(f,!1)?(I=a[Jt],N=vo(k),a=Fo(k,a)):N=-1);-1!==N;){const X=a[Jt];if(Ur(y,N,X.data)){const ue=Lo(N,a,c,I,f,H);if(ue!==bo)return ue}k=a[N+8],k!==ce&&Da(f,a[Jt].data[N+8]===H)&&Ur(y,N,a)?(I=X,N=vo(k),a=Fo(k,a)):N=-1}}return g}function Lo(s,a,c,f,g,y){const I=a[Jt],N=I.data[s+8],X=so(N,I,c,null==f?Is(N)&&ul:f!=I&&0!=(3&N.type),g&Gt.Host&&y===N);return null!==X?Ti(a,I,X,N):bo}function so(s,a,c,f,g){const y=s.providerIndexes,I=a.data,N=1048575&y,k=s.directiveStart,X=y>>20,Oe=g?N+X:s.directiveEnd;for(let Ze=f?N:N+X;Ze<Oe;Ze++){const Dt=I[Ze];if(Ze<k&&c===Dt||Ze>=k&&Dt.type===c)return Ze}if(g){const Ze=I[k];if(Ze&&js(Ze)&&Ze.type===c)return k}return null}function Ti(s,a,c,f){let g=s[c];const y=a.data;if(function wt(s){return s instanceof Ue}(g)){const I=g;I.resolving&&function lt(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Je(-200,`Circular dependency in DI detected for ${s}${c}`)}(function ht(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}(y[c]));const N=la(I.canSeeViewProviders);I.resolving=!0;const k=I.injectImpl?ti(I.injectImpl):null;aa(s,f,Gt.Default);try{g=s[c]=I.factory(void 0,y,s,f),a.firstCreatePass&&c>=f.directiveStart&&function Ql(s,a,c){const{ngOnChanges:f,ngOnInit:g,ngDoCheck:y}=a.type.prototype;if(f){const I=ka(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,I),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,I)}g&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,g),y&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,y))}(c,y[c],a)}finally{null!==k&&ti(k),la(N),I.resolving=!1,Mc()}}return g}function Ur(s,a,c){return!!(c[a+(s>>Ju)]&1<<s)}function Da(s,a){return!(s&Gt.Self||s&Gt.Host&&a)}class cs{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,f){return dr(this._tNode,this._lView,a,hn(f),c)}}function Xu(){return new cs(Ei(),ut())}function Nl(s){return te(()=>{const a=s.prototype.constructor,c=a[mt]||Br(a),f=Object.prototype;let g=Object.getPrototypeOf(s.prototype).constructor;for(;g&&g!==f;){const y=g[mt]||Br(g);if(y&&y!==c)return y;g=Object.getPrototypeOf(g)}return y=>new y})}function Br(s){return et(s)?()=>{const a=Br(Ce(s));return a&&a()}:Ui(s)}function wo(s){const a=s[Jt],c=a.type;return 2===c?a.declTNode:1===c?s[Lr]:null}function za(s){return function Ai(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const f=c.length;let g=0;for(;g<f;){const y=c[g];if(_i(y))break;if(0===y)g+=2;else if("number"==typeof y)for(g++;g<f&&"string"==typeof c[g];)g++;else{if(y===a)return c[g+1];g+=2}}}return null}(Ei(),s)}const ca="__parameters__";function Wa(s,a,c){return te(()=>{const f=function ao(s){return function(...c){if(s){const f=s(...c);for(const g in f)this[g]=f[g]}}}(a);function g(...y){if(this instanceof g)return f.apply(this,y),this;const I=new g(...y);return N.annotation=I,N;function N(k,H,X){const ue=k.hasOwnProperty(ca)?k[ca]:Object.defineProperty(k,ca,{value:[]})[ca];for(;ue.length<=X;)ue.push(null);return(ue[X]=ue[X]||[]).push(I),k}}return c&&(g.prototype=Object.create(c.prototype)),g.prototype.ngMetadataName=s,g.annotationCls=g,g})}class Vr{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=gt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function co(s,a){s.forEach(c=>Array.isArray(c)?co(c,a):a(c))}function qa(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function C(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function S(s,a){const c=[];for(let f=0;f<s;f++)c.push(a);return c}function ee(s,a,c){let f=vt(s,a);return f>=0?s[1|f]=c:(f=~f,function V(s,a,c,f){let g=s.length;if(g==a)s.push(c,f);else if(1===g)s.push(f,s[0]),s[0]=c;else{for(g--,s.push(s[g-1],s[g]);g>a;)s[g]=s[g-2],g--;s[a]=c,s[a+1]=f}}(s,f,a,c)),f}function Me(s,a){const c=vt(s,a);if(c>=0)return s[1|c]}function vt(s,a){return function Kt(s,a,c){let f=0,g=s.length>>c;for(;g!==f;){const y=f+(g-f>>1),I=s[y<<c];if(a===I)return y<<c;I>a?g=y:f=y+1}return~(g<<c)}(s,a,1)}const F=En(Wa("Optional"),8),Z=En(Wa("SkipSelf"),4);var Rr=(()=>((Rr=Rr||{})[Rr.Important=1]="Important",Rr[Rr.DashCase=2]="DashCase",Rr))();const km=/^>|^->|<!--|-->|--!>|<!-$/g,Of=/(<|>)/,eu="\u200b$1\u200b";const Iu=new Map;let bh=0;const Td="__ngContext__";function Ki(s,a){Qr(a)?(s[Td]=a[Es],function xp(s){Iu.set(s[Es],s)}(a)):s[Td]=a}let St;function un(s,a){return St(s,a)}function Xn(s){const a=s[vr];return _r(a)?a[vr]:a}function Go(s){return Eh(s[To])}function Za(s){return Eh(s[li])}function Eh(s){for(;null!==s&&!_r(s);)s=s[li];return s}function ha(s,a,c,f,g){if(null!=f){let y,I=!1;_r(f)?y=f:Qr(f)&&(I=!0,f=f[Fi]);const N=Nr(f);0===s&&null!==c?null==g?Vm(a,c,N):Bc(a,c,N,g||null,!0):1===s&&null!==c?Bc(a,c,N,g||null,!0):2===s?Lp(a,N,I):3===s&&a.destroyNode(N),null!=y&&function db(s,a,c,f,g){const y=c[an];y!==Nr(c)&&ha(a,s,f,y,g);for(let N=Ln;N<c.length;N++){const k=c[N];xf(k[Jt],k,s,a,f,y)}}(a,s,y,c,g)}}function Od(s,a){return s.createText(a)}function Cu(s,a,c){s.setValue(a,c)}function Fc(s,a){return s.createComment(function kc(s){return s.replace(km,a=>a.replace(Of,eu))}(a))}function Nd(s,a,c){return s.createElement(a,c)}function Fm(s,a){const c=s[mr],f=c.indexOf(a),g=a[vr];512&a[Nn]&&(a[Nn]&=-513,El(g,-1)),c.splice(f,1)}function Lm(s,a){if(s.length<=Ln)return;const c=Ln+a,f=s[c];if(f){const g=f[Xs];null!==g&&g!==s&&Fm(g,f),a>0&&(s[c-1][li]=f[li]);const y=C(s,Ln+a);!function Lc(s,a){xf(s,a,a[Fn],2,null,null),a[Fi]=null,a[Lr]=null}(f[Jt],f);const I=y[bi];null!==I&&I.detachView(y[Jt]),f[vr]=null,f[li]=null,f[Nn]&=-65}return f}function Ih(s,a){if(!(128&a[Nn])){const c=a[Fn];c.destroyNode&&xf(s,a,c,3,null,null),function Mi(s){let a=s[To];if(!a)return Um(s[Jt],s);for(;a;){let c=null;if(Qr(a))c=a[To];else{const f=a[Ln];f&&(c=f)}if(!c){for(;a&&!a[li]&&a!==s;)Qr(a)&&Um(a[Jt],a),a=a[vr];null===a&&(a=s),Qr(a)&&Um(a[Jt],a),c=a&&a[li]}a=c}}(a)}}function Um(s,a){if(!(128&a[Nn])){a[Nn]&=-65,a[Nn]|=128,function Rf(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let f=0;f<c.length;f+=2){const g=a[c[f]];if(!(g instanceof Ue)){const y=c[f+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const N=g[y[I]],k=y[I+1];yr(4,N,k);try{k.call(N)}finally{yr(5,N,k)}}else{yr(4,g,y);try{y.call(g)}finally{yr(5,g,y)}}}}}(s,a),function ov(s,a){const c=s.cleanup,f=a[ii];let g=-1;if(null!==c)for(let y=0;y<c.length-1;y+=2)if("string"==typeof c[y]){const I=c[y+3];I>=0?f[g=I]():f[g=-I].unsubscribe(),y+=2}else{const I=f[g=c[y+1]];c[y].call(I)}if(null!==f){for(let y=g+1;y<f.length;y++)(0,f[y])();a[ii]=null}}(s,a),1===a[Jt].type&&a[Fn].destroy();const c=a[Xs];if(null!==c&&_r(a[vr])){c!==a[vr]&&Fm(c,a);const f=a[bi];null!==f&&f.detachView(s)}!function kp(s){Iu.delete(s[Es])}(a)}}function Tu(s,a,c){return Bm(s,a.parent,c)}function Bm(s,a,c){let f=a;for(;null!==f&&40&f.type;)f=(a=f).parent;if(null===f)return c[Fi];{const{componentOffset:g}=f;if(g>-1){const{encapsulation:y}=s.data[f.directiveStart+g];if(y===Q.None||y===Q.Emulated)return null}return gi(f,c)}}function Bc(s,a,c,f,g){s.insertBefore(a,c,f,g)}function Vm(s,a,c){s.appendChild(a,c)}function Md(s,a,c,f,g){null!==f?Bc(s,a,c,f,g):Vm(s,a,c)}function Xi(s,a){return s.parentNode(a)}function jm(s,a,c){return nc(s,a,c)}function Hm(s,a,c){return 40&s.type?gi(s,c):null}let $m,Gc,Wm,Qa,nc=Hm;function Ca(s,a){nc=s,$m=a}function Pf(s,a,c,f){const g=Tu(s,f,a),y=a[Fn],N=jm(f.parent||a[Lr],f,a);if(null!=g)if(Array.isArray(c))for(let k=0;k<c.length;k++)Md(y,g,c[k],N,!1);else Md(y,g,c,N,!1);void 0!==$m&&$m(y,f,a,c,g)}function Vc(s,a){if(null!==a){const c=a.type;if(3&c)return gi(a,s);if(4&c)return kl(-1,s[a.index]);if(8&c){const f=a.child;if(null!==f)return Vc(s,f);{const g=s[a.index];return _r(g)?kl(-1,g):Nr(g)}}if(32&c)return un(a,s)()||Nr(s[a.index]);{const f=zm(s,a);return null!==f?Array.isArray(f)?f[0]:Vc(Xn(s[vi]),f):Vc(s,a.next)}}return null}function zm(s,a){return null!==a?s[vi][Lr].projection[a.projection]:null}function kl(s,a){const c=Ln+s+1;if(c<a.length){const f=a[c],g=f[Jt].firstChild;if(null!==g)return Vc(f,g)}return a[an]}function Lp(s,a,c){const f=Xi(s,a);f&&function Gm(s,a,c,f){s.removeChild(a,c,f)}(s,f,a,c)}function Rd(s,a,c,f,g,y,I){for(;null!=c;){const N=f[c.index],k=c.type;if(I&&0===a&&(N&&Ki(Nr(N),f),c.flags|=2),32!=(32&c.flags))if(8&k)Rd(s,a,c.child,f,g,y,!1),ha(a,s,g,N,y);else if(32&k){const H=un(c,f);let X;for(;X=H();)ha(a,s,g,X,y);ha(a,s,g,N,y)}else 16&k?hr(s,a,f,c,g,y):ha(a,s,g,N,y);c=I?c.projectionNext:c.next}}function xf(s,a,c,f,g,y){Rd(c,f,s.firstChild,a,g,y,!1)}function hr(s,a,c,f,g,y){const I=c[vi],k=I[Lr].projection[f.projection];if(Array.isArray(k))for(let H=0;H<k.length;H++)ha(a,s,g,k[H],y);else Rd(s,a,k,I[vr],g,y,!0)}function fs(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function Ch(s,a,c){const{mergedAttrs:f,classes:g,styles:y}=c;null!==f&&xt(s,a,f),null!==g&&fs(s,a,g),null!==y&&function Bp(s,a,c){s.setAttribute(a,"style",c)}(s,a,y)}function Ii(s){return function jc(){if(void 0===Gc&&(Gc=null,mn.trustedTypes))try{Gc=mn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Gc}()?.createHTML(s)||s}function lv(s){Wm=s}function kf(s){return function Vp(){if(void 0===Qa&&(Qa=null,mn.trustedTypes))try{Qa=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Qa}()?.createScriptURL(s)||s}class qm{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nt})`}}function Su(s){return s instanceof qm?s.changingThisBreaksApplicationSecurity:s}function tu(s,a){const c=function dv(s){return s instanceof qm&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${Nt})`)}return c===a}class Gp{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Ii(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class jp{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=Ii(a),c}}const Qm=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Jm(s){return(s=String(s)).match(Qm)?s:"unsafe:"+s}function rc(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function Bf(...s){const a={};for(const c of s)for(const f in c)c.hasOwnProperty(f)&&(a[f]=!0);return a}const Au=rc("area,br,col,hr,img,wbr"),Xa=rc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hp=rc("rp,rt"),Xm=Bf(Au,Bf(Xa,rc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bf(Hp,rc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bf(Hp,Xa)),Wp=rc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Vf=Bf(Wp,rc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Zs=(()=>((Zs=Zs||{})[Zs.NONE=0]="NONE",Zs[Zs.HTML=1]="HTML",Zs[Zs.STYLE=2]="STYLE",Zs[Zs.SCRIPT=3]="SCRIPT",Zs[Zs.URL=4]="URL",Zs[Zs.RESOURCE_URL=5]="RESOURCE_URL",Zs))();function n_(s){const a=Pd();return a?a.sanitize(Zs.URL,s)||"":tu(s,"URL")?Su(s):Jm(fe(s))}function gv(s){const a=Pd();if(a)return kf(a.sanitize(Zs.RESOURCE_URL,s)||"");if(tu(s,"ResourceURL"))return kf(Su(s));throw new Je(904,!1)}function r_(s,a,c){return function mb(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?gv:n_}(a,c)(s)}function Pd(){const s=ut();return s&&s[ws]}const ts=new Vr("ENVIRONMENT_INITIALIZER"),Yp=new Vr("INJECTOR",-1),Zp=new Vr("INJECTOR_DEF_TYPES");class Ou{get(a,c=nr){if(c===nr){const f=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw f.name="NullInjectorError",f}return c}}function Qp(...s){return{\u0275providers:kd(0,s),\u0275fromNgModule:!0}}function kd(s,...a){const c=[],f=new Set;let g;return co(a,y=>{const I=y;Ah(I,c,[],f)&&(g||(g=[]),g.push(I))}),void 0!==g&&s_(g,c),c}function s_(s,a){for(let c=0;c<s.length;c++){const{providers:g}=s[c];lr(g,y=>{a.push(y)})}}function Ah(s,a,c,f){if(!(s=Ce(s)))return!1;let g=null,y=Cn(s);const I=!y&&Yn(s);if(y||I){if(I&&!I.standalone)return!1;g=s}else{const k=s.ngModule;if(y=Cn(k),!y)return!1;g=k}const N=f.has(g);if(I){if(N)return!1;if(f.add(g),I.dependencies){const k="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const H of k)Ah(H,a,c,f)}}else{if(!y)return!1;{if(null!=y.imports&&!N){let H;f.add(g);try{co(y.imports,X=>{Ah(X,a,c,f)&&(H||(H=[]),H.push(X))})}finally{}void 0!==H&&s_(H,a)}if(!N){const H=Ui(g)||(()=>new g);a.push({provide:g,useFactory:H,deps:ae},{provide:Zp,useValue:g,multi:!0},{provide:ts,useValue:()=>Rt(g),multi:!0})}const k=y.providers;null==k||N||lr(k,X=>{a.push(X)})}}return g!==s&&void 0!==s.providers}function lr(s,a){for(let c of s)Ke(c)&&(c=c.\u0275providers),Array.isArray(c)?lr(c,a):a(c)}const Fd=Te({provide:String,useValue:Te});function sc(s){return null!==s&&"object"==typeof s&&Fd in s}function oc(s){return"function"==typeof s}const Mh=new Vr("Set Injector scope."),Ld={},Gf={};let jf;function Ud(){return void 0===jf&&(jf=new Ou),jf}class nu{}class ac extends nu{get destroyed(){return this._destroyed}constructor(a,c,f,g){super(),this.parent=c,this.source=f,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xp(a,I=>this.processProvider(I)),this.records.set(Yp,Rh(void 0,this)),g.has("environment")&&this.records.set(nu,Rh(void 0,this));const y=this.records.get(Mh);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Zp.multi,ae,Gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Ci(this),f=ti(void 0);try{return a()}finally{Ci(c),ti(f)}}get(a,c=nr,f=Gt.Default){this.assertNotDestroyed(),f=hn(f);const g=Ci(this),y=ti(void 0);try{if(!(f&Gt.SkipSelf)){let N=this.records.get(a);if(void 0===N){const k=function zc(s){return"function"==typeof s||"object"==typeof s&&s instanceof Vr}(a)&&jn(a);N=k&&this.injectableDefInScope(k)?Rh(Jp(a),Ld):null,this.records.set(a,N)}if(null!=N)return this.hydrate(a,N)}return(f&Gt.Self?Ud():this.parent).get(a,c=f&Gt.Optional&&c===nr?null:c)}catch(I){if("NullInjectorError"===I.name){if((I[br]=I[br]||[]).unshift(pe(a)),g)throw I;return function be(s,a,c,f){const g=s[br];throw a[jr]&&g.unshift(a[jr]),s.message=function _e(s,a,c,f=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==Pn?s.slice(2):s;let g=pe(a);if(Array.isArray(a))g=a.map(pe).join(" -> ");else if("object"==typeof a){let y=[];for(let I in a)if(a.hasOwnProperty(I)){let N=a[I];y.push(I+":"+("string"==typeof N?JSON.stringify(N):pe(N)))}g=`{${y.join(", ")}}`}return`${c}${f?"("+f+")":""}[${g}]: ${s.replace(Jn,"\n  ")}`}("\n"+s.message,g,c,f),s[Ir]=g,s[br]=null,s}(I,a,"R3InjectorError",this.source)}throw I}finally{ti(y),Ci(g)}}resolveInjectorInitializers(){const a=Ci(this),c=ti(void 0);try{const f=this.get(ts.multi,ae,Gt.Self);for(const g of f)g()}finally{Ci(a),ti(c)}}toString(){const a=[],c=this.records;for(const f of c.keys())a.push(pe(f));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processProvider(a){let c=oc(a=Ce(a))?a:Ce(a&&a.provide);const f=function yv(s){return sc(s)?Rh(void 0,s.useValue):Rh(vv(s),Ld)}(a);if(oc(a)||!0!==a.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=Rh(void 0,Ld,!0),g.factory=()=>Yt(g.multi),this.records.set(c,g)),c=a,g.multi.push(a)}this.records.set(c,f)}hydrate(a,c){return c.value===Ld&&(c.value=Gf,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Bd(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Ce(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Jp(s){const a=jn(s),c=null!==a?a.factory:Ui(s);if(null!==c)return c;if(s instanceof Vr)throw new Je(204,!1);if(s instanceof Function)return function l_(s){const a=s.length;if(a>0)throw S(a,"?"),new Je(204,!1);const c=function pn(s){const a=s&&(s[qn]||s[en]);return a?(function cr(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),a):null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Je(204,!1)}function vv(s,a,c){let f;if(oc(s)){const g=Ce(s);return Ui(g)||Jp(g)}if(sc(s))f=()=>Ce(s.useValue);else if(function Nh(s){return!(!s||!s.useFactory)}(s))f=()=>s.useFactory(...Yt(s.deps||[]));else if(function o_(s){return!(!s||!s.useExisting)}(s))f=()=>Rt(Ce(s.useExisting));else{const g=Ce(s&&(s.useClass||s.provide));if(!function Hf(s){return!!s.deps}(s))return Ui(g)||Jp(g);f=()=>new g(...Yt(s.deps))}return f}function Rh(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function Xp(s,a){for(const c of s)Array.isArray(c)?Xp(c,a):c&&Ke(c)?Xp(c.\u0275providers,a):a(c)}class _b{}class u_{}class d_{resolveComponentFactory(a){throw function yb(s){const a=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Wc=(()=>{class s{}return s.NULL=new d_,s})();function tg(){return Kc(Ei(),ut())}function Kc(s,a){return new qc(gi(s,a))}let qc=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=tg,s})();function bv(s){return s instanceof qc?s.nativeElement:s}class ng{}let rg=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function dE(){const s=ut(),c=ui(Ei().index,s);return(Qr(c)?c:s)[Fn]}(),s})(),vb=(()=>{class s{}return s.\u0275prov=gt({token:s,providedIn:"root",factory:()=>null}),s})();class $f{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const ig=new $f("15.2.4"),Ph={},h_="ngOriginalError";function Ta(s){return s[h_]}class zf{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Ta(a);for(;c&&Ta(c);)c=Ta(c);return c||null}}function gl(s){return s instanceof Function?s():s}function sg(s,a,c){let f=s.length;for(;;){const g=s.indexOf(a,c);if(-1===g)return g;if(0===g||s.charCodeAt(g-1)<=32){const y=a.length;if(g+y===f||s.charCodeAt(g+y)<=32)return g}c=g+1}}const Fh="ng-template";function og(s,a,c){let f=0,g=!0;for(;f<s.length;){let y=s[f++];if("string"==typeof y&&g){const I=s[f++];if(c&&"class"===y&&-1!==sg(I.toLowerCase(),a,0))return!0}else{if(1===y){for(;f<s.length&&"string"==typeof(y=s[f++]);)if(y.toLowerCase()===a)return!0;return!1}"number"==typeof y&&(g=!1)}}return!1}function Ev(s){return 4===s.type&&s.value!==Fh}function Dv(s,a,c){return a===(4!==s.type||c?s.value:Fh)}function g_(s,a,c){let f=4;const g=s.attrs||[],y=function Iv(s){for(let a=0;a<s.length;a++)if(_i(s[a]))return a;return s.length}(g);let I=!1;for(let N=0;N<a.length;N++){const k=a[N];if("number"!=typeof k){if(!I)if(4&f){if(f=2|1&f,""!==k&&!Dv(s,k,c)||""===k&&1===a.length){if(ru(f))return!1;I=!0}}else{const H=8&f?k:a[++N];if(8&f&&null!==s.attrs){if(!og(s.attrs,H,c)){if(ru(f))return!1;I=!0}continue}const ue=iu(8&f?"class":k,g,Ev(s),c);if(-1===ue){if(ru(f))return!1;I=!0;continue}if(""!==H){let Oe;Oe=ue>y?"":g[ue+1].toLowerCase();const Ze=8&f?Oe:null;if(Ze&&-1!==sg(Ze,H,0)||2&f&&H!==Oe){if(ru(f))return!1;I=!0}}}}else{if(!I&&!ru(f)&&!ru(k))return!1;if(I&&ru(k))continue;I=!1,f=k|1&f}}return ru(f)||I}function ru(s){return 0==(1&s)}function iu(s,a,c,f){if(null===a)return-1;let g=0;if(f||!c){let y=!1;for(;g<a.length;){const I=a[g];if(I===s)return g;if(3===I||6===I)y=!0;else{if(1===I||2===I){let N=a[++g];for(;"string"==typeof N;)N=a[++g];continue}if(4===I)break;if(0===I){g+=4;continue}}g+=y?1:2}return-1}return function Ib(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const f=s[c];if("number"==typeof f)return-1;if(f===a)return c;c++}return-1}(a,s)}function lc(s,a,c=!1){for(let f=0;f<a.length;f++)if(g_(s,a[f],c))return!0;return!1}function Cv(s,a){e:for(let c=0;c<a.length;c++){const f=a[c];if(s.length===f.length){for(let g=0;g<s.length;g++)if(s[g]!==f[g])continue e;return!0}}return!1}function Tv(s,a){return s?":not("+a.trim()+")":a}function Lh(s){let a=s[0],c=1,f=2,g="",y=!1;for(;c<s.length;){let I=s[c];if("string"==typeof I)if(2&f){const N=s[++c];g+="["+I+(N.length>0?'="'+N+'"':"")+"]"}else 8&f?g+="."+I:4&f&&(g+=" "+I);else""!==g&&!ru(I)&&(a+=Tv(y,g),g=""),f=I,y=y||!ru(f);c++}return""!==g&&(a+=Tv(y,g)),a}const Qn={};function __(s){Kf(rr(),ut(),mi()+s,!1)}function Kf(s,a,c,f){if(!f)if(3==(3&a[Nn])){const y=s.preOrderCheckHooks;null!==y&&wa(a,y,c)}else{const y=s.preOrderHooks;null!==y&&R(a,y,0,c)}Jr(c)}function lg(s,a=null,c=null,f){const g=b_(s,a,c,f);return g.resolveInjectorInitializers(),g}function b_(s,a=null,c=null,f,g=new Set){const y=[c||ae,Qp(s)];return f=f||("object"==typeof s?void 0:pe(s)),new ac(y,a||Ud(),f||null,g)}let Zc=(()=>{class s{static create(c,f){if(Array.isArray(c))return lg({name:""},f,c,"");{const g=c.name??"";return lg({name:g},c.parent,c.providers,g)}}}return s.THROW_IF_NOT_FOUND=nr,s.NULL=new Ou,s.\u0275prov=gt({token:s,providedIn:"any",factory:()=>Rt(Yp)}),s.__NG_ELEMENT_ID__=-1,s})();function Hd(s,a=Gt.Default){const c=ut();return null===c?Rt(s,a):dr(Ei(),c,Ce(s),a)}function Zf(){throw new Error("invalid")}function Qf(s,a){const c=s.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const y=c[f+1];if(-1!==y){const I=s.data[y];oa(c[f]),I.contentQueries(2,a[y],y)}}}function xs(s,a,c,f,g,y,I,N,k,H,X){const ue=a.blueprint.slice();return ue[Fi]=g,ue[Nn]=76|f,(null!==X||s&&1024&s[Nn])&&(ue[Nn]|=1024),Ga(ue),ue[vr]=ue[So]=s,ue[si]=c,ue[Ra]=I||s&&s[Ra],ue[Fn]=N||s&&s[Fn],ue[ws]=k||s&&s[ws]||null,ue[pi]=H||s&&s[pi]||null,ue[Lr]=y,ue[Es]=function Nf(){return bh++}(),ue[Re]=X,ue[vi]=2==a.type?s[vi]:ue,ue}function $d(s,a,c,f,g){let y=s.data[a];if(null===y)y=O_(s,a,c,f,g),function ia(){return Tn.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=c,y.value=f,y.attrs=g;const I=Ro();y.injectorIndex=null===I?-1:I.injectorIndex}return Zi(y,!0),y}function O_(s,a,c,f,g){const y=Il(),I=sl(),k=s.data[a]=function M_(s,a,c,f,g,y){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,c,a,f,g);return null===s.firstChild&&(s.firstChild=k),null!==y&&(I?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k,k.prev=y)),k}function dc(s,a,c,f){if(0===c)return-1;const g=a.length;for(let y=0;y<c;y++)a.push(f),s.blueprint.push(f),s.data.push(null);return g}function zd(s,a,c){al(a);try{const f=s.viewQuery;null!==f&&Zd(1,f,c);const g=s.template;null!==g&&hg(s,a,g,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Qf(s,a),s.staticViewQueries&&Zd(2,s.viewQuery,c);const y=s.components;null!==y&&function Rb(s,a){for(let c=0;c<a.length;c++)Bb(s,a[c])}(a,y)}catch(f){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),f}finally{a[Nn]&=-5,Kl()}}function Wd(s,a,c,f){const g=a[Nn];if(128!=(128&g)){al(a);try{Ga(a),function ra(s){return Tn.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&hg(s,a,c,2,f);const I=3==(3&g);if(I){const H=s.preOrderCheckHooks;null!==H&&wa(a,H,null)}else{const H=s.preOrderHooks;null!==H&&R(a,H,0,null),$(a,0)}if(function x_(s){for(let a=Go(s);null!==a;a=Za(a)){if(!a[Lt])continue;const c=a[mr];for(let f=0;f<c.length;f++){const g=c[f];512&g[Nn]||El(g[vr],1),g[Nn]|=512}}}(a),function Vv(s){for(let a=Go(s);null!==a;a=Za(a))for(let c=Ln;c<a.length;c++){const f=a[c],g=f[Jt];Va(f)&&Wd(g,f,g.template,f[si])}}(a),null!==s.contentQueries&&Qf(s,a),I){const H=s.contentCheckHooks;null!==H&&wa(a,H)}else{const H=s.contentHooks;null!==H&&R(a,H,1),$(a,1)}!function Gh(s,a){const c=s.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const g=c[f];if(g<0)Jr(~g);else{const y=g,I=c[++f],N=c[++f];Qu(I,y),N(2,a[y])}}}finally{Jr(-1)}}(s,a);const N=s.components;null!==N&&function Mb(s,a){for(let c=0;c<a.length;c++)Ub(s,a[c])}(a,N);const k=s.viewQuery;if(null!==k&&Zd(2,k,f),I){const H=s.viewCheckHooks;null!==H&&wa(a,H)}else{const H=s.viewHooks;null!==H&&R(a,H,2),$(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Nn]&=-41,512&a[Nn]&&(a[Nn]&=-513,El(a[vr],-1))}finally{Kl()}}}function hg(s,a,c,f,g){const y=mi(),I=2&f;try{Jr(-1),I&&a.length>ye&&Kf(s,a,ye,!1),yr(I?2:0,g),c(f,g)}finally{Jr(y),yr(I?3:1,g)}}function fg(s,a,c){if(Gs(a)){const g=a.directiveEnd;for(let y=a.directiveStart;y<g;y++){const I=s.data[y];I.contentQueries&&I.contentQueries(1,c[y],y)}}}function pg(s,a,c){Mo()&&(function xb(s,a,c,f){const g=c.directiveStart,y=c.directiveEnd;Is(c)&&function Fb(s,a,c){const f=gi(a,s),g=N_(c),y=s[Ra],I=zh(s,xs(s,g,null,c.onPush?32:16,f,a,y,y.createRenderer(f,c),null,null,null));s[a.index]=I}(a,c,s.data[g+c.componentOffset]),s.firstCreatePass||Mn(c,a),Ki(f,a);const I=c.initialInputs;for(let N=g;N<y;N++){const k=s.data[N],H=Ti(a,s,N,c);Ki(H,a),null!==I&&Bv(0,N-g,H,k,0,I),js(k)&&(ui(c.index,a)[si]=Ti(a,s,N,c))}}(s,a,c,gi(c,a)),64==(64&c.flags)&&Jf(s,a,c))}function gg(s,a,c=gi){const f=a.localNames;if(null!==f){let g=a.index+1;for(let y=0;y<f.length;y+=2){const I=f[y+1],N=-1===I?c(a,s):s[I];s[g++]=N}}}function N_(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=jh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function jh(s,a,c,f,g,y,I,N,k,H){const X=ye+f,ue=X+g,Oe=function Pv(s,a){const c=[];for(let f=0;f<a;f++)c.push(f<s?null:Qn);return c}(X,ue),Ze="function"==typeof H?H():H;return Oe[Jt]={type:s,blueprint:Oe,template:c,queries:null,viewQuery:N,declTNode:a,data:Oe.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:k,consts:Ze,incompleteFirstPass:!1}}function Kd(s,a,c,f){const g=Eg(a);null===c?g.push(f):(g.push(c),s.firstCreatePass&&Wh(s).push(f,g.length-1))}function qd(s,a,c,f){for(let g in s)if(s.hasOwnProperty(g)){c=null===c?{}:c;const y=s[g];null===f?mg(c,a,g,y):f.hasOwnProperty(g)&&mg(c,a,f[g],y)}return c}function mg(s,a,c,f){s.hasOwnProperty(c)?s[c].push(a,f):s[c]=[a,f]}function Sa(s,a,c,f,g,y,I,N){const k=gi(a,c);let X,H=a.inputs;!N&&null!=H&&(X=H[f])?(Xc(s,c,X,f,g),Is(a)&&xv(c,a.index)):3&a.type&&(f=function Hh(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(f),g=null!=I?I(g,a.value||"",f):g,y.setProperty(k,f,g))}function xv(s,a){const c=ui(a,s);16&c[Nn]||(c[Nn]|=32)}function Nu(s,a,c,f){if(Mo()){const g=null===f?null:{"":-1},y=function P_(s,a){const c=s.directiveRegistry;let f=null,g=null;if(c)for(let y=0;y<c.length;y++){const I=c[y];if(lc(a,I.selectors,!1))if(f||(f=[]),js(I))if(null!==I.findHostDirectiveDefs){const N=[];g=g||new Map,I.findHostDirectiveDefs(I,N,g),f.unshift(...N,I),Yd(s,a,N.length)}else f.unshift(I),Yd(s,a,0);else g=g||new Map,I.findHostDirectiveDefs?.(I,f,g),f.push(I)}return null===f?null:[f,g]}(s,c);let I,N;null===y?I=N=null:[I,N]=y,null!==I&&Fv(s,a,c,I,g,N),g&&function yg(s,a,c){if(a){const f=s.localNames=[];for(let g=0;g<a.length;g+=2){const y=c[a[g+1]];if(null==y)throw new Je(-301,!1);f.push(a[g],y)}}}(c,f,g)}c.mergedAttrs=je(c.mergedAttrs,c.attrs)}function Fv(s,a,c,f,g,y){for(let H=0;H<f.length;H++)fn(Mn(c,a),s,f[H].type);!function $h(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,f.length);for(let H=0;H<f.length;H++){const X=f[H];X.providersResolver&&X.providersResolver(X)}let I=!1,N=!1,k=dc(s,a,f.length,null);for(let H=0;H<f.length;H++){const X=f[H];c.mergedAttrs=je(c.mergedAttrs,X.hostAttrs),vg(s,c,a,k,X),Uv(k,X,g),null!==X.contentQueries&&(c.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(c.flags|=64);const ue=X.type.prototype;!I&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),I=!0),!N&&(ue.ngOnChanges||ue.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),N=!0),k++}!function _g(s,a,c){const g=a.directiveEnd,y=s.data,I=a.attrs,N=[];let k=null,H=null;for(let X=a.directiveStart;X<g;X++){const ue=y[X],Oe=c?c.get(ue):null,Dt=Oe?Oe.outputs:null;k=qd(ue.inputs,X,k,Oe?Oe.inputs:null),H=qd(ue.outputs,X,H,Dt);const $t=null===k||null===I||Ev(a)?null:Lb(k,X,I);N.push($t)}null!==k&&(k.hasOwnProperty("class")&&(a.flags|=8),k.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=N,a.inputs=k,a.outputs=H}(s,c,y)}function Jf(s,a,c){const f=c.directiveStart,g=c.directiveEnd,y=c.index,I=function sa(){return Tn.lFrame.currentDirectiveIndex}();try{Jr(y);for(let N=f;N<g;N++){const k=s.data[N],H=a[N];yo(N),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&kb(k,H)}}finally{Jr(-1),yo(I)}}function kb(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Yd(s,a,c){a.componentOffset=c,(s.components||(s.components=[])).push(a.index)}function Uv(s,a,c){if(c){if(a.exportAs)for(let f=0;f<a.exportAs.length;f++)c[a.exportAs[f]]=s;js(a)&&(c[""]=s)}}function vg(s,a,c,f,g){s.data[f]=g;const y=g.factory||(g.factory=Ui(g.type)),I=new Ue(y,js(g),Hd);s.blueprint[f]=I,c[f]=I,function Lv(s,a,c,f,g){const y=g.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const N=~a.index;(function R_(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(I)!=N&&I.push(N),I.push(c,f,y)}}(s,a,f,dc(s,c,g.hostVars,Qn),g)}function Xf(s,a,c,f,g,y,I){if(null==y)s.removeAttribute(a,g,c);else{const N=null==I?fe(y):I(y,f||"",g);s.setAttribute(a,g,N,c)}}function Bv(s,a,c,f,g,y){const I=y[a];if(null!==I){const N=f.setInput;for(let k=0;k<I.length;){const H=I[k++],X=I[k++],ue=I[k++];null!==N?f.setInput(c,ue,H,X):c[X]=ue}}}function Lb(s,a,c){let f=null,g=0;for(;g<c.length;){const y=c[g];if(0!==y)if(5!==y){if("number"==typeof y)break;if(s.hasOwnProperty(y)){null===f&&(f=[]);const I=s[y];for(let N=0;N<I.length;N+=2)if(I[N]===a){f.push(y,I[N+1],c[g+1]);break}}g+=2}else g+=2;else g+=4}return f}function bg(s,a,c,f){return[s,!0,!1,a,null,0,f,c,null,null]}function Ub(s,a){const c=ui(a,s);if(Va(c)){const f=c[Jt];48&c[Nn]?Wd(f,c,f.template,c[si]):c[Li]>0&&ep(c)}}function ep(s){for(let f=Go(s);null!==f;f=Za(f))for(let g=Ln;g<f.length;g++){const y=f[g];if(Va(y))if(512&y[Nn]){const I=y[Jt];Wd(I,y,I.template,y[si])}else y[Li]>0&&ep(y)}const c=s[Jt].components;if(null!==c)for(let f=0;f<c.length;f++){const g=ui(c[f],s);Va(g)&&g[Li]>0&&ep(g)}}function Bb(s,a){const c=ui(a,s),f=c[Jt];(function k_(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])})(f,c),zd(f,c,c[si])}function zh(s,a){return s[To]?s[qo][li]=a:s[To]=a,s[qo]=a,a}function wg(s){for(;s;){s[Nn]|=32;const a=Xn(s);if(Pa(s)&&!a)return s;s=a}return null}function tp(s,a,c,f=!0){const g=a[Ra];g.begin&&g.begin();try{Wd(s,a,s.template,c)}catch(I){throw f&&Gv(a,I),I}finally{g.end&&g.end()}}function Zd(s,a,c){oa(0),a(s,c)}function Eg(s){return s[ii]||(s[ii]=[])}function Wh(s){return s.cleanup||(s.cleanup=[])}function Gv(s,a){const c=s[pi],f=c?c.get(zf,null):null;f&&f.handleError(a)}function Xc(s,a,c,f,g){for(let y=0;y<c.length;){const I=c[y++],N=c[y++],k=a[I],H=s.data[I];null!==H.setInput?H.setInput(k,g,f,N):k[N]=g}}function F_(s,a,c){let f=c?s.styles:null,g=c?s.classes:null,y=0;if(null!==a)for(let I=0;I<a.length;I++){const N=a[I];"number"==typeof N?y=N:1==y?g=Fe(g,N):2==y&&(f=Fe(f,N+": "+a[++I]+";"))}c?s.styles=f:s.stylesWithoutHost=f,c?s.classes=g:s.classesWithoutHost=g}function np(s,a,c,f,g=!1){for(;null!==c;){const y=a[c.index];if(null!==y&&f.push(Nr(y)),_r(y))for(let N=Ln;N<y.length;N++){const k=y[N],H=k[Jt].firstChild;null!==H&&np(k[Jt],k,H,f)}const I=c.type;if(8&I)np(s,a,c.child,f);else if(32&I){const N=un(c,a);let k;for(;k=N();)f.push(k)}else if(16&I){const N=zm(a,c);if(Array.isArray(N))f.push(...N);else{const k=Xn(a[vi]);np(k[Jt],k,N,f,!0)}}c=g?c.projectionNext:c.next}return f}class qh{get rootNodes(){const a=this._lView,c=a[Jt];return np(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[si]}set context(a){this._lView[si]=a}get destroyed(){return 128==(128&this._lView[Nn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[vr];if(_r(a)){const c=a[Rn],f=c?c.indexOf(this):-1;f>-1&&(Lm(a,f),C(c,f))}this._attachedToViewContainer=!1}Ih(this._lView[Jt],this._lView)}onDestroy(a){Kd(this._lView[Jt],this._lView,null,a)}markForCheck(){wg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nn]&=-65}reattach(){this._lView[Nn]|=64}detectChanges(){tp(this._lView[Jt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fp(s,a){xf(s,a,a[Fn],2,null,null)}(this._lView[Jt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Je(902,!1);this._appRef=a}}class Dg extends qh{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;tp(a[Jt],a,a[si],!1)}checkNoChanges(){}get context(){return null}}class L_ extends Wc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Yn(a);return new Yh(c,this.ngModule)}}function Gb(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class jv{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,f){f=hn(f);const g=this.injector.get(a,Ph,f);return g!==Ph||c===Ph?g:this.parentInjector.get(a,c,f)}}class Yh extends u_{get inputs(){return Gb(this.componentDef.inputs)}get outputs(){return Gb(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function uc(s){return s.map(Lh).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,f,g){let y=(g=g||this.ngModule)instanceof nu?g:g?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const I=y?new jv(a,y):a,N=I.get(ng,null);if(null===N)throw new Je(407,!1);const k=I.get(vb,null),H=N.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ue=f?function gE(s,a,c){return s.selectRootElement(a,c===Q.ShadowDom)}(H,f,this.componentDef.encapsulation):Nd(H,X,function mE(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(X)),Oe=this.componentDef.onPush?288:272,Ze=jh(0,null,null,1,0,null,null,null,null,null),Dt=xs(null,Ze,null,Oe,null,null,N,H,k,I,null);let $t,on;al(Dt);try{const _n=this.componentDef;let $n,Ft=null;_n.findHostDirectiveDefs?($n=[],Ft=new Map,_n.findHostDirectiveDefs(_n,$n,Ft),$n.push(_n)):$n=[_n];const ur=function vE(s,a){const c=s[Jt],f=ye;return s[f]=a,$d(c,f,2,"#host",null)}(Dt,ue),vs=function U_(s,a,c,f,g,y,I,N){const k=g[Jt];!function Hv(s,a,c,f){for(const g of s)a.mergedAttrs=je(a.mergedAttrs,g.hostAttrs);null!==a.mergedAttrs&&(F_(a,a.mergedAttrs,!0),null!==c&&Ch(f,c,a))}(f,s,a,I);const H=y.createRenderer(a,c),X=xs(g,N_(c),null,c.onPush?32:16,g[s.index],s,y,H,N||null,null,null);return k.firstCreatePass&&Yd(k,s,f.length-1),zh(g,X),g[s.index]=X}(ur,ue,_n,$n,Dt,N,H);on=il(Ze,ye),ue&&function Ru(s,a,c,f){if(f)xt(s,c,["ng-version",ig.full]);else{const{attrs:g,classes:y}=function ms(s){const a=[],c=[];let f=1,g=2;for(;f<s.length;){let y=s[f];if("string"==typeof y)2===g?""!==y&&a.push(y,s[++f]):8===g&&c.push(y);else{if(!ru(g))break;g=y}f++}return{attrs:a,classes:c}}(a.selectors[0]);g&&xt(s,c,g),y&&y.length>0&&fs(s,c,y.join(" "))}}(H,_n,ue,f),void 0!==c&&function hc(s,a,c){const f=s.projection=[];for(let g=0;g<a.length;g++){const y=c[g];f.push(null!=y?Array.from(y):null)}}(on,this.ngContentSelectors,c),$t=function $v(s,a,c,f,g,y){const I=Ei(),N=g[Jt],k=gi(I,g);Fv(N,g,I,c,null,f);for(let X=0;X<c.length;X++)Ki(Ti(g,N,I.directiveStart+X,I),g);Jf(N,g,I),k&&Ki(k,g);const H=Ti(g,N,I.directiveStart+I.componentOffset,I);if(s[si]=g[si]=H,null!==y)for(const X of y)X(H,a);return fg(N,I,s),H}(vs,_n,$n,Ft,Dt,[jb]),zd(Ze,Dt,null)}finally{Kl()}return new _E(this.componentType,$t,Kc(on,Dt),Dt,on)}}class _E extends _b{constructor(a,c,f,g,y){super(),this.location=f,this._rootLView=g,this._tNode=y,this.instance=c,this.hostView=this.changeDetectorRef=new Dg(g),this.componentType=a}setInput(a,c){const f=this._tNode.inputs;let g;if(null!==f&&(g=f[a])){const y=this._rootLView;Xc(y[Jt],y,g,a,c),xv(y,this._tNode.index)}}get injector(){return new cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function jb(){const s=Ei();Al(ut()[Jt],s)}function Ig(s){let a=function Aa(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const f=[s];for(;a;){let g;if(js(s))g=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Je(903,!1);g=a.\u0275dir}if(g){if(c){f.push(g);const I=s;I.inputs=Ll(s.inputs),I.declaredInputs=Ll(s.declaredInputs),I.outputs=Ll(s.outputs);const N=g.hostBindings;N&&Cg(s,N);const k=g.viewQuery,H=g.contentQueries;if(k&&le(s,k),H&&Jd(s,H),ke(s.inputs,g.inputs),ke(s.declaredInputs,g.declaredInputs),ke(s.outputs,g.outputs),js(g)&&g.data.animation){const X=s.data;X.animation=(X.animation||[]).concat(g.data.animation)}}const y=g.features;if(y)for(let I=0;I<y.length;I++){const N=y[I];N&&N.ngInherit&&N(s),N===Ig&&(c=!1)}}a=Object.getPrototypeOf(a)}!function Qd(s){let a=0,c=null;for(let f=s.length-1;f>=0;f--){const g=s[f];g.hostVars=a+=g.hostVars,g.hostAttrs=je(g.hostAttrs,c=je(c,g.hostAttrs))}}(f)}function Ll(s){return s===Pe?{}:s===ae?[]:s}function le(s,a){const c=s.viewQuery;s.viewQuery=c?(f,g)=>{a(f,g),c(f,g)}:a}function Jd(s,a){const c=s.contentQueries;s.contentQueries=c?(f,g,y)=>{a(f,g,y),c(f,g,y)}:a}function Cg(s,a){const c=s.hostBindings;s.hostBindings=c?(f,g)=>{a(f,g),c(f,g)}:a}function Zh(s){return!!Qh(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Qh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Oa(s,a,c){return s[a]=c}function Io(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function td(s,a,c,f){const g=Io(s,a,c);return Io(s,a+1,f)||g}function ip(s,a,c,f){const g=ut();return Io(g,Po(),a)&&(rr(),function Mu(s,a,c,f,g,y){const I=gi(s,a);Xf(a[Fn],I,y,s.value,c,f,g)}(Xr(),g,s,a,c,f)),ip}function fc(s,a,c,f){return Io(s,Po(),c)?a+fe(c)+f:Qn}function Pg(s,a,c,f,g,y,I,N){const k=ut(),H=rr(),X=s+ye,ue=H.firstCreatePass?function Rg(s,a,c,f,g,y,I,N,k){const H=a.consts,X=$d(a,s,4,I||null,Yi(H,N));Nu(a,c,X,Yi(H,k)),Al(a,X);const ue=X.tView=jh(2,X,f,g,y,a.directiveRegistry,a.pipeRegistry,null,a.schemas,H);return null!==a.queries&&(a.queries.template(a,X),ue.queries=a.queries.embeddedTView(X)),X}(X,H,k,a,c,f,g,y,I):H.data[X];Zi(ue,!1);const Oe=k[Fn].createComment("");Pf(H,k,Oe,ue),Ki(Oe,k),zh(k,k[X]=bg(Oe,k,Oe,ue)),Cs(ue)&&pg(H,k,ue),null!=I&&gg(k,ue,N)}function $_(s){return Ns(function _o(){return Tn.lFrame.contextLView}(),ye+s)}function kg(s,a,c){const f=ut();return Io(f,Po(),a)&&Sa(rr(),Xr(),f,s,a,f[Fn],c,!1),kg}function z_(s,a,c,f,g){const I=g?"class":"style";Xc(s,c,a.inputs[I],I,f)}function sp(s,a,c,f){const g=ut(),y=rr(),I=ye+s,N=g[Fn],k=y.firstCreatePass?function W_(s,a,c,f,g,y){const I=a.consts,k=$d(a,s,2,f,Yi(I,g));return Nu(a,c,k,Yi(I,y)),null!==k.attrs&&F_(k,k.attrs,!1),null!==k.mergedAttrs&&F_(k,k.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,k),k}(I,y,g,a,c,f):y.data[I],H=g[I]=Nd(N,a,function Zl(){return Tn.lFrame.currentNamespace}()),X=Cs(k);return Zi(k,!0),Ch(N,H,k),32!=(32&k.flags)&&Pf(y,g,H,k),0===function Dl(){return Tn.lFrame.elementDepthCount}()&&Ki(H,g),function ea(){Tn.lFrame.elementDepthCount++}(),X&&(pg(y,g,k),fg(y,k,g)),null!==f&&gg(g,k),sp}function th(){let s=Ei();sl()?na():(s=s.parent,Zi(s,!1));const a=s;!function mu(){Tn.lFrame.elementDepthCount--}();const c=rr();return c.firstCreatePass&&(Al(c,s),Gs(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function vn(s){return 0!=(8&s.flags)}(a)&&z_(c,a,ut(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Vn(s){return 0!=(16&s.flags)}(a)&&z_(c,a,ut(),a.stylesWithoutHost,!1),th}function K_(s,a,c,f){return sp(s,a,c,f),th(),K_}function Fg(s,a,c){const f=ut(),g=rr(),y=s+ye,I=g.firstCreatePass?function $b(s,a,c,f,g){const y=a.consts,I=Yi(y,f),N=$d(a,s,8,"ng-container",I);return null!==I&&F_(N,I,!0),Nu(a,c,N,Yi(y,g)),null!==a.queries&&a.queries.elementStart(a,N),N}(y,g,f,a,c):g.data[y];Zi(I,!0);const N=f[y]=f[Fn].createComment("");return Pf(g,f,N,I),Ki(N,f),Cs(I)&&(pg(g,f,I),fg(g,I,f)),null!=c&&gg(f,I),Fg}function fa(){let s=Ei();const a=rr();return sl()?na():(s=s.parent,Zi(s,!1)),a.firstCreatePass&&(Al(a,s),Gs(s)&&a.queries.elementEnd(s)),fa}function tf(){return ut()}function ap(s){return!!s&&"function"==typeof s.then}function Lg(s){return!!s&&"function"==typeof s.subscribe}const lp=Lg;function nf(s,a,c,f){const g=ut(),y=rr(),I=Ei();return function Y_(s,a,c,f,g,y,I){const N=Cs(f),H=s.firstCreatePass&&Wh(s),X=a[si],ue=Eg(a);let Oe=!0;if(3&f.type||I){const $t=gi(f,a),on=I?I($t):$t,_n=ue.length,$n=I?ur=>I(Nr(ur[f.index])):f.index;let Ft=null;if(!I&&N&&(Ft=function q_(s,a,c,f){const g=s.cleanup;if(null!=g)for(let y=0;y<g.length-1;y+=2){const I=g[y];if(I===c&&g[y+1]===f){const N=a[ii],k=g[y+2];return N.length>k?N[k]:null}"string"==typeof I&&(y+=2)}return null}(s,a,g,f.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=y,Ft.__ngLastListenerFn__=y,Oe=!1;else{y=rf(f,a,X,y,!1);const ur=c.listen(on,g,y);ue.push(y,ur),H&&H.push(g,$n,_n,_n+1)}}else y=rf(f,a,X,y,!1);const Ze=f.outputs;let Dt;if(Oe&&null!==Ze&&(Dt=Ze[g])){const $t=Dt.length;if($t)for(let on=0;on<$t;on+=2){const vs=a[Dt[on]][Dt[on+1]].subscribe(y),Us=ue.length;ue.push(y,vs),H&&H.push(g,f.index,Us,-(Us+1))}}}(y,g,g[Fn],I,s,a,f),nf}function nl(s,a,c,f){try{return yr(6,a,c),!1!==c(f)}catch(g){return Gv(s,g),!1}finally{yr(7,a,c)}}function rf(s,a,c,f,g){return function y(I){if(I===Function)return f;wg(s.componentOffset>-1?ui(s.index,a):a);let k=nl(a,c,f,I),H=y.__ngNextListenerFn__;for(;H;)k=nl(a,c,H,I)&&k,H=H.__ngNextListenerFn__;return g&&!1===k&&(I.preventDefault(),I.returnValue=!1),k}}function Ug(s=1){return function ql(s){return(Tn.lFrame.contextLView=function _u(s,a){for(;s>0;)a=a[So],s--;return a}(s,Tn.lFrame.contextLView))[si]}(s)}function Yv(s,a){let c=null;const f=function m_(s){const a=s.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(s);for(let g=0;g<a.length;g++){const y=a[g];if("*"!==y){if(null===f?lc(s,y,!0):Cv(f,y))return g}else c=g}return c}function id(s){const a=ut()[vi][Lr];if(!a.projection){const f=a.projection=S(s?s.length:1,null),g=f.slice();let y=a.child;for(;null!==y;){const I=s?Yv(y,s):0;null!==I&&(g[I]?g[I].projectionNext=y:f[I]=y,g[I]=y),y=y.next}}}function Bg(s,a=0,c){const f=ut(),g=rr(),y=$d(g,ye+s,16,null,c||null);null===y.projection&&(y.projection=a),na(),32!=(32&y.flags)&&function cb(s,a,c){hr(a[Fn],0,a,c,Tu(s,c,a),jm(c.parent||a[Lr],c,a))}(g,f,y)}function jo(s,a,c){return nh(s,"",a,"",c),jo}function nh(s,a,c,f,g){const y=ut(),I=fc(y,a,c,f);return I!==Qn&&Sa(rr(),Xr(),y,s,I,y[Fn],g,!1),nh}function ih(s,a){return s<<17|a<<2}function pc(s){return s>>17&32767}function Na(s){return 2|s}function er(s){return(131068&s)>>2}function jg(s,a){return-131069&s|a<<2}function Vl(s){return 1|s}function J_(s,a,c,f,g){const y=s[c+1],I=null===a;let N=f?pc(y):er(y),k=!1;for(;0!==N&&(!1===k||I);){const X=s[N+1];zb(s[N],a)&&(k=!0,s[N+1]=f?Vl(X):Na(X)),N=f?pc(X):er(X)}k&&(s[c+1]=f?Na(y):Vl(y))}function zb(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&vt(s,a)>=0}const _s={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function X_(s){return s.substring(_s.key,_s.keyEnd)}function sh(s,a){const c=_s.textEnd;return c===a?-1:(a=_s.keyEnd=function wE(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,_s.key=a,c),sf(s,a,c))}function sf(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function $g(s,a,c){return uu(s,a,c,!1),$g}function ny(s,a){return uu(s,a,null,!0),ny}function Wb(s){Gl(ee,Fu,s,!0)}function Fu(s,a){for(let c=function t0(s){return function Ri(s){_s.key=0,_s.keyEnd=0,_s.value=0,_s.valueEnd=0,_s.textEnd=s.length}(s),sh(s,sf(s,0,_s.textEnd))}(a);c>=0;c=sh(a,c))ee(s,X_(a),!0)}function uu(s,a,c,f){const g=ut(),y=rr(),I=Qi(2);y.firstUpdatePass&&sd(y,s,I,f),a!==Qn&&Io(g,I,a)&&fp(y,y.data[mi()],g,g[Fn],s,g[I+1]=function zg(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=pe(Su(s)))),s}(a,c),f,I)}function Gl(s,a,c,f){const g=rr(),y=Qi(2);g.firstUpdatePass&&sd(g,null,y,f);const I=ut();if(c!==Qn&&Io(I,y,c)){const N=g.data[mi()];if(lh(N,f)&&!oh(g,y)){let k=f?N.classesWithoutHost:N.stylesWithoutHost;null!==k&&(c=Fe(k,c||"")),z_(g,N,I,c,f)}else!function ry(s,a,c,f,g,y,I,N){g===Qn&&(g=ae);let k=0,H=0,X=0<g.length?g[0]:null,ue=0<y.length?y[0]:null;for(;null!==X||null!==ue;){const Oe=k<g.length?g[k+1]:void 0,Ze=H<y.length?y[H+1]:void 0;let $t,Dt=null;X===ue?(k+=2,H+=2,Oe!==Ze&&(Dt=ue,$t=Ze)):null===ue||null!==X&&X<ue?(k+=2,Dt=X):(H+=2,Dt=ue,$t=Ze),null!==Dt&&fp(s,a,c,f,Dt,$t,I,N),X=k<g.length?g[k]:null,ue=H<y.length?y[H]:null}}(g,N,I,I[Fn],I[y+1],I[y+1]=function s0(s,a,c){if(null==c||""===c)return ae;const f=[],g=Su(c);if(Array.isArray(g))for(let y=0;y<g.length;y++)s(f,g[y],!0);else if("object"==typeof g)for(const y in g)g.hasOwnProperty(y)&&s(f,y,g[y]);else"string"==typeof g&&a(f,g);return f}(s,a,c),f,y)}}function oh(s,a){return a>=s.expandoStartIndex}function sd(s,a,c,f){const g=s.data;if(null===g[c+1]){const y=g[mi()],I=oh(s,c);lh(y,f)&&null===a&&!I&&(a=!1),a=function Lu(s,a,c,f){const g=function Ws(s){const a=Tn.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let y=f?a.residualClasses:a.residualStyles;if(null===g)0===(f?a.classBindings:a.styleBindings)&&(c=dp(c=lf(null,s,a,c,f),a.attrs,f),y=null);else{const I=a.directiveStylingLast;if(-1===I||s[I]!==g)if(c=lf(g,s,a,c,f),null===y){let k=function gc(s,a,c){const f=c?a.classBindings:a.styleBindings;if(0!==er(f))return s[pc(f)]}(s,a,f);void 0!==k&&Array.isArray(k)&&(k=lf(null,s,a,k[1],f),k=dp(k,a.attrs,f),function Kb(s,a,c,f){s[pc(c?a.classBindings:a.styleBindings)]=f}(s,a,f,k))}else y=function ah(s,a,c){let f;const g=a.directiveEnd;for(let y=1+a.directiveStylingLast;y<g;y++)f=dp(f,s[y].hostAttrs,c);return dp(f,a.attrs,c)}(s,a,f)}return void 0!==y&&(f?a.residualClasses=y:a.residualStyles=y),c}(g,y,a,f),function Ho(s,a,c,f,g,y){let I=y?a.classBindings:a.styleBindings,N=pc(I),k=er(I);s[f]=c;let X,H=!1;if(Array.isArray(c)?(X=c[1],(null===X||vt(c,X)>0)&&(H=!0)):X=c,g)if(0!==k){const Oe=pc(s[N+1]);s[f+1]=ih(Oe,N),0!==Oe&&(s[Oe+1]=jg(s[Oe+1],f)),s[N+1]=function ou(s,a){return 131071&s|a<<17}(s[N+1],f)}else s[f+1]=ih(N,0),0!==N&&(s[N+1]=jg(s[N+1],f)),N=f;else s[f+1]=ih(k,0),0===N?N=f:s[k+1]=jg(s[k+1],f),k=f;H&&(s[f+1]=Na(s[f+1])),J_(s,X,f,!0),J_(s,X,f,!1),function au(s,a,c,f,g){const y=g?s.residualClasses:s.residualStyles;null!=y&&"string"==typeof a&&vt(y,a)>=0&&(c[f+1]=Vl(c[f+1]))}(a,X,s,f,y),I=ih(N,k),y?a.classBindings=I:a.styleBindings=I}(g,y,a,c,I,f)}}function lf(s,a,c,f,g){let y=null;const I=c.directiveEnd;let N=c.directiveStylingLast;for(-1===N?N=c.directiveStart:N++;N<I&&(y=a[N],f=dp(f,y.hostAttrs,g),y!==s);)N++;return null!==s&&(c.directiveStylingLast=N),f}function dp(s,a,c){const f=c?1:2;let g=-1;if(null!==a)for(let y=0;y<a.length;y++){const I=a[y];"number"==typeof I?g=I:g===f&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ee(s,I,!!c||a[++y]))}return void 0===s?null:s}function fp(s,a,c,f,g,y,I,N){if(!(3&a.type))return;const k=s.data,H=k[N+1],X=function e0(s){return 1==(1&s)}(H)?o0(k,a,c,g,er(H),I):void 0;Uu(X)||(Uu(y)||function Xv(s){return 2==(2&s)}(H)&&(y=o0(k,null,c,g,N,I)),function Up(s,a,c,f,g){if(a)g?s.addClass(c,f):s.removeClass(c,f);else{let y=-1===f.indexOf("-")?void 0:Rr.DashCase;null==g?s.removeStyle(c,f,y):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),y|=Rr.Important),s.setStyle(c,f,g,y))}}(f,I,Jo(mi(),c),g,y))}function o0(s,a,c,f,g,y){const I=null===a;let N;for(;g>0;){const k=s[g],H=Array.isArray(k),X=H?k[1]:k,ue=null===X;let Oe=c[g+1];Oe===Qn&&(Oe=ue?ae:void 0);let Ze=ue?Me(Oe,f):X===f?Oe:void 0;if(H&&!Uu(Ze)&&(Ze=Me(k,f)),Uu(Ze)&&(N=Ze,I))return N;const Dt=s[g+1];g=I?pc(Dt):er(Dt)}if(null!==a){let k=y?a.residualClasses:a.residualStyles;null!=k&&(N=Me(k,f))}return N}function Uu(s){return void 0!==s}function lh(s,a){return 0!=(s.flags&(a?8:16))}function iy(s,a=""){const c=ut(),f=rr(),g=s+ye,y=f.firstCreatePass?$d(f,g,1,a,null):f.data[g],I=c[g]=Od(c[Fn],a);Pf(f,c,I,y),Zi(y,!1)}function pp(s){return gp("",s,""),pp}function gp(s,a,c){const f=ut(),g=fc(f,s,a,c);return g!==Qn&&function ed(s,a,c){const f=Jo(a,s);Cu(s[Fn],f,c)}(f,mi(),g),gp}function mp(s,a,c,f,g){Gl(ee,Fu,function Xd(s,a,c,f,g,y){const N=td(s,Vi(),c,g);return Qi(2),N?a+fe(c)+f+fe(g)+y:Qn}(ut(),s,a,c,f,g),!0)}function hy(s,a,c){const f=ut();return Io(f,Po(),a)&&Sa(rr(),Xr(),f,s,a,f[Fn],c,!0),hy}const yc=void 0;var py=["en",[["a","p"],["AM","PM"],yc],[["AM","PM"],yc,yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yc,"{1} 'at' {0}",yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function f0(s){const c=Math.floor(Math.abs(s)),f=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let Bu={};function em(s){const a=function Qb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=g0(a);if(c)return c;const f=a.split("-")[0];if(c=g0(f),c)return c;if("en"===f)return py;throw new Je(701,!1)}function wp(s){return em(s)[Gn.PluralCase]}function g0(s){return s in Bu||(Bu[s]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[s]),Bu[s]}var Gn=(()=>((Gn=Gn||{})[Gn.LocaleId=0]="LocaleId",Gn[Gn.DayPeriodsFormat=1]="DayPeriodsFormat",Gn[Gn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gn[Gn.DaysFormat=3]="DaysFormat",Gn[Gn.DaysStandalone=4]="DaysStandalone",Gn[Gn.MonthsFormat=5]="MonthsFormat",Gn[Gn.MonthsStandalone=6]="MonthsStandalone",Gn[Gn.Eras=7]="Eras",Gn[Gn.FirstDayOfWeek=8]="FirstDayOfWeek",Gn[Gn.WeekendRange=9]="WeekendRange",Gn[Gn.DateFormat=10]="DateFormat",Gn[Gn.TimeFormat=11]="TimeFormat",Gn[Gn.DateTimeFormat=12]="DateTimeFormat",Gn[Gn.NumberSymbols=13]="NumberSymbols",Gn[Gn.NumberFormats=14]="NumberFormats",Gn[Gn.CurrencyCode=15]="CurrencyCode",Gn[Gn.CurrencySymbol=16]="CurrencySymbol",Gn[Gn.CurrencyName=17]="CurrencyName",Gn[Gn.Currencies=18]="Currencies",Gn[Gn.Directionality=19]="Directionality",Gn[Gn.PluralCase=20]="PluralCase",Gn[Gn.ExtraData=21]="ExtraData",Gn))();const IE=["zero","one","two","few","many"],_l="en-US",uh={marker:"element"},yl={marker:"ICU"};var rs=(()=>((rs=rs||{})[rs.SHIFT=2]="SHIFT",rs[rs.APPEND_EAGERLY=1]="APPEND_EAGERLY",rs[rs.COMMENT=2]="COMMENT",rs))();let tm=_l;function Vu(s){(function Mt(s,a){null==s&&It(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(tm=s.toLowerCase().replace(/_/g,"-"))}function _0(s,a,c){const f=a.insertBeforeIndex,g=Array.isArray(f)?f[0]:f;return null===g?Hm(s,0,c):Nr(c[g])}function gy(s,a,c,f,g){const y=a.insertBeforeIndex;if(Array.isArray(y)){let I=f,N=null;if(3&a.type||(N=I,I=g),null!==I&&-1===a.componentOffset)for(let k=1;k<y.length;k++)Bc(s,I,c[y[k]],N,!1)}}function od(s,a){if(s.push(a),s.length>1)for(let c=s.length-2;c>=0;c--){const f=s[c];nm(f)||ch(f,a)&&null===my(f)&&y0(f,a.index)}}function nm(s){return!(64&s.type)}function ch(s,a){return nm(a)||s.index>a.index}function my(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function y0(s,a){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=a:(Ca(_0,gy),s.insertBeforeIndex=a)}function bc(s,a){const c=s.data[a];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function dh(s,a,c){const f=O_(s,c,64,null,null);return od(a,f),f}function is(s,a){const c=a[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function Ep(s){return s>>>17}function rm(s){return(131070&s)>>>1}let jl=0,ld=0;function cd(s,a,c,f){const g=c[Fn];let I,y=null;for(let N=0;N<a.length;N++){const k=a[N];if("string"==typeof k){const H=a[++N];null===c[H]&&(c[H]=Od(g,k))}else if("number"==typeof k)switch(1&k){case 0:const H=Ep(k);let X,ue;if(null===y&&(y=H,I=Xi(g,f)),H===y?(X=f,ue=I):(X=null,ue=Nr(c[H])),null!==ue){const $t=rm(k);Bc(g,ue,c[$t],X,!1);const _n=bc(s,$t);if(null!==_n&&"object"==typeof _n){const $n=is(_n,c);null!==$n&&cd(s,_n.create[$n],c,c[_n.anchorIdx])}}break;case 1:const Ze=a[++N],Dt=a[++N];Xf(g,Jo(k>>>1,c),null,null,Ze,Dt,null)}else switch(k){case yl:const H=a[++N],X=a[++N];null===c[X]&&Ki(c[X]=Fc(g,H),c);break;case uh:const ue=a[++N],Oe=a[++N];null===c[Oe]&&Ki(c[Oe]=Nd(g,ue,null),c)}}}function b0(s,a,c,f,g){for(let y=0;y<c.length;y++){const I=c[y],N=c[++y];if(I&g){let k="";for(let H=y+1;H<=y+N;H++){const X=c[H];if("string"==typeof X)k+=X;else if("number"==typeof X)if(X<0)k+=fe(a[f-X]);else{const ue=X>>>2;switch(3&X){case 1:const Oe=c[++H],Ze=c[++H],Dt=s.data[ue];"string"==typeof Dt?Xf(a[Fn],a[ue],null,Dt,Oe,k,Ze):Sa(s,Dt,a,Oe,k,a[Fn],Ze,!1);break;case 0:const $t=a[ue];null!==$t&&Cu(a[Fn],$t,k);break;case 2:w0(s,bc(s,ue),a,k);break;case 3:df(s,bc(s,ue),f,a)}}}}else{const k=c[y+1];if(k>0&&3==(3&k)){const X=bc(s,k>>>2);a[X.currentCaseLViewIndex]<0&&df(s,X,f,a)}}y+=N}}function df(s,a,c,f){let g=f[a.currentCaseLViewIndex];if(null!==g){let y=jl;g<0&&(g=f[a.currentCaseLViewIndex]=~g,y=-1),b0(s,f,a.update[g],c,y)}}function w0(s,a,c,f){const g=function fo(s,a){let c=s.cases.indexOf(a);if(-1===c)switch(s.type){case 1:{const f=function CE(s,a){const c=wp(a)(parseInt(s,10)),f=IE[c];return void 0!==f?f:"other"}(a,function Jb(){return tm}());c=s.cases.indexOf(f),-1===c&&"other"!==f&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(a,f);if(is(a,c)!==g&&(E0(s,a,c),c[a.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const I=c[a.anchorIdx];I&&cd(s,a.create[g],c,I)}}function E0(s,a,c){let f=is(a,c);if(null!==f){const g=a.remove[f];for(let y=0;y<g.length;y++){const I=g[y];if(I>0){const N=Jo(I,c);null!==N&&Lp(c[Fn],N)}else E0(s,bc(s,~I),c)}}}function D0(){const s=[];let c,f,a=-1;function y(N,k){a=0;const H=is(N,k);f=null!==H?N.remove[H]:ae}function I(){if(a<f.length){const N=f[a++];return N>0?c[N]:(s.push(a,f),y(c[Jt].data[~N],c),I())}return 0===s.length?null:(f=s.pop(),a=s.pop(),I())}return function g(N,k){for(c=k;s.length;)s.pop();return y(N.value,k),I}}const ff=/\ufffd(\d+):?\d*\ufffd/gi,pf=/\ufffd(\d+)\ufffd/,_y=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Hl="\ufffd",nw=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,T0=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,gf=/\uE500/g;function im(s,a,c,f,g,y,I){const N=dc(s,f,1,null);let k=N<<rs.SHIFT,H=Ro();a===H&&(H=null),null===H&&(k|=rs.APPEND_EAGERLY),I&&(k|=rs.COMMENT,function In(s){void 0===St&&(St=s())}(D0)),g.push(k,null===y?"":y);const X=O_(s,N,I?32:1,null===y?"":y,null);od(c,X);const ue=X.index;return Zi(X,!1),null!==H&&a!==H&&function v0(s,a){let c=s.insertBeforeIndex;null===c?(Ca(_0,gy),c=s.insertBeforeIndex=[null,a]):(function ft(s,a,c){s!=a&&It(c,s,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(H,ue),X}function yy(s,a,c,f,g,y,I){const N=I.match(ff),k=im(s,a,c,y,f,N?null:I,!1);N&&ju(g,I,k.index,null,0,null)}function ju(s,a,c,f,g,y){const I=s.length,N=I+1;s.push(null,null);const k=I+2,H=a.split(ff);let X=0;for(let ue=0;ue<H.length;ue++){const Oe=H[ue];if(1&ue){const Ze=g+parseInt(Oe,10);s.push(-1-Ze),X|=sm(Ze)}else""!==Oe&&s.push(Oe)}return s.push(c<<2|(f?1:0)),f&&s.push(f,y),s[I]=X,s[N]=s.length-k,X}function sm(s){return 1<<Math.min(s,31)}function dd(s){let a,y,c="",f=0,g=!1;for(;null!==(a=nw.exec(s));)g?a[0]===`${Hl}/*${y}${Hl}`&&(f=a.index,g=!1):(c+=s.substring(f,a.index+a[0].length),y=a[1],g=!0);return c+=s.slice(f),c}function am(s,a,c,f,g,y){let I=0;const N={type:g.type,currentCaseLViewIndex:dc(s,a,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function iw(s,a,c){s.push(sm(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,g,y),function ad(s,a,c){const f=s.data[a];null===f?s.data[a]=c:f.value=c}(s,y,N);const k=g.values;for(let H=0;H<k.length;H++){const X=k[H],ue=[];for(let Oe=0;Oe<X.length;Oe++){const Ze=X[Oe];if("string"!=typeof Ze){const Dt=ue.push(Ze)-1;X[Oe]=`\x3c!--\ufffd${Dt}\ufffd--\x3e`}}I=by(s,N,a,c,f,g.cases[H],X.join(""),ue)|I}I&&function S0(s,a,c){s.push(a,1,c<<2|3)}(c,I,y)}function hd(s){const a=[],c=[];let f=1,g=0;const y=vy(s=s.replace(_y,function(I,N,k){return f="select"===k?0:1,g=parseInt(N.slice(1),10),""}));for(let I=0;I<y.length;){let N=y[I++].trim();1===f&&(N=N.replace(/\s*(?:=)?(\w+)\s*/,"$1")),N.length&&a.push(N);const k=vy(y[I++]);a.length>c.length&&c.push(k)}return{type:f,mainBinding:g,cases:a,values:c}}function vy(s){if(!s)return[];let a=0;const c=[],f=[],g=/[{}]/g;let y;for(g.lastIndex=0;y=g.exec(s);){const N=y.index;if("}"==y[0]){if(c.pop(),0==c.length){const k=s.substring(a,N);_y.test(k)?f.push(hd(k)):f.push(k),a=N+1}}else{if(0==c.length){const k=s.substring(a,N);f.push(k),a=N+1}c.push("{")}}const I=s.substring(a);return f.push(I),f}function by(s,a,c,f,g,y,I,N){const k=[],H=[],X=[];a.cases.push(y),a.create.push(k),a.remove.push(H),a.update.push(X);const Oe=function Zm(s){const a=new jp(s);return function lE(){try{return!!(new window.DOMParser).parseFromString(Ii(""),"text/html")}catch{return!1}}()?new Gp(a):a}(function uv(){return void 0!==Wm?Wm:typeof document<"u"?document:void 0}()).getInertBodyElement(I),Ze=function Kp(s){return"content"in s&&function fb(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(Oe)||Oe;return Ze?lm(s,a,c,f,k,H,X,Ze,g,N,0):0}function lm(s,a,c,f,g,y,I,N,k,H,X){let ue=0,Oe=N.firstChild;for(;Oe;){const Ze=dc(s,c,1,null);switch(Oe.nodeType){case Node.ELEMENT_NODE:const Dt=Oe,$t=Dt.tagName.toLowerCase();if(Xm.hasOwnProperty($t)){um(g,uh,$t,k,Ze),s.data[Ze]=$t;const Ft=Dt.attributes;for(let ur=0;ur<Ft.length;ur++){const vs=Ft.item(ur),Us=vs.name.toLowerCase();vs.value.match(ff)?Vf.hasOwnProperty(Us)&&ju(I,vs.value,Ze,vs.name,0,Wp[Us]?Jm:null):sw(g,Ze,vs)}ue=lm(s,a,c,f,g,y,I,Oe,Ze,H,X+1)|ue,du(y,Ze,X)}break;case Node.TEXT_NODE:const on=Oe.textContent||"",_n=on.match(ff);um(g,null,_n?"":on,k,Ze),du(y,Ze,X),_n&&(ue=ju(I,on,Ze,null,0,null)|ue);break;case Node.COMMENT_NODE:const $n=pf.exec(Oe.textContent||"");if($n){const ur=H[parseInt($n[1],10)];um(g,yl,"",k,Ze),am(s,c,f,k,ur,Ze),rw(y,Ze,X)}}Oe=Oe.nextSibling}return ue}function du(s,a,c){0===c&&s.push(a)}function rw(s,a,c){0===c&&(s.push(~a),s.push(a))}function um(s,a,c,f,g){null!==a&&s.push(a),s.push(c,g,function zo(s,a,c){return s|a<<17|c<<1}(0,f,g))}function sw(s,a,c){s.push(a<<1|1,c.name,c.value)}function Dy(s,a,c=-1){const f=rr(),g=ut(),y=ye+s,I=Yi(f.consts,a),N=Ro();f.firstCreatePass&&function pa(s,a,c,f,g,y){const I=Ro(),N=[],k=[],H=[[]];g=function Ec(s,a){if(function om(s){return-1===s}(a))return dd(s);{const c=s.indexOf(`:${a}${Hl}`)+2+a.toString().length,f=s.search(new RegExp(`${Hl}\\/\\*\\d+:${a}${Hl}`));return dd(s.substring(c,f))}}(g,y);const X=function Gu(s){return s.replace(gf," ")}(g).split(T0);for(let ue=0;ue<X.length;ue++){let Oe=X[ue];if(1&ue){const Ze=47===Oe.charCodeAt(0),$t=(Oe.charCodeAt(Ze?1:0),ye+Number.parseInt(Oe.substring(Ze?2:1)));if(Ze)H.shift(),Zi(Ro(),!1);else{const on=dh(s,H[0],$t);H.unshift([]),Zi(on,!0)}}else{const Ze=vy(Oe);for(let Dt=0;Dt<Ze.length;Dt++){let $t=Ze[Dt];if(1&Dt){const on=$t;if("object"!=typeof on)throw new Error(`Unable to parse ICU expression in "${g}" message.`);am(s,c,k,a,on,im(s,I,H[0],c,N,"",!0).index)}else""!==$t&&yy(s,I,H[0],N,k,c,$t)}}}s.data[f]={create:N,update:k}}(f,null===N?0:N.index,g,y,I,c);const k=f.data[y],X=Bm(f,N===g[Lr]?null:N,g);(function wc(s,a,c,f){const g=s[Fn];for(let y=0;y<a.length;y++){const I=a[y++],N=a[y],H=(I&rs.APPEND_EAGERLY)===rs.APPEND_EAGERLY,X=I>>>rs.SHIFT;let ue=s[X];null===ue&&(ue=s[X]=(I&rs.COMMENT)===rs.COMMENT?g.createComment(N):Od(g,N)),H&&null!==c&&Bc(g,c,ue,f,!1)}})(g,k.create,X,N&&8&N.type?g[N.index]:null),xo(!0)}function Iy(s,a,c){Dy(s,a,c),function dm(){xo(!1)}()}function Cy(s){return function Xb(s){s&&(jl|=1<<Math.min(ld,31)),ld++}(Io(ut(),Po(),s)),Cy}function Hu(s){!function ud(s,a,c){if(ld>0){const f=s.data[c];b0(s,a,Array.isArray(f)?f:f.update,Vi()-ld-1,jl)}jl=0,ld=0}(rr(),ut(),s+ye)}function l(s,a,c,f,g){if(s=Ce(s),Array.isArray(s))for(let y=0;y<s.length;y++)l(s[y],a,c,f,g);else{const y=rr(),I=ut();let N=oc(s)?s:Ce(s.provide),k=vv(s);const H=Ei(),X=1048575&H.providerIndexes,ue=H.directiveStart,Oe=H.providerIndexes>>20;if(oc(s)||!s.multi){const Ze=new Ue(k,g,Hd),Dt=u(N,a,g?X:X+Oe,ue);-1===Dt?(fn(Mn(H,I),y,N),e(y,s,a.length),a.push(N),H.directiveStart++,H.directiveEnd++,g&&(H.providerIndexes+=1048576),c.push(Ze),I.push(Ze)):(c[Dt]=Ze,I[Dt]=Ze)}else{const Ze=u(N,a,X+Oe,ue),Dt=u(N,a,X,X+Oe),on=Dt>=0&&c[Dt];if(g&&!on||!g&&!(Ze>=0&&c[Ze])){fn(Mn(H,I),y,N);const _n=function O(s,a,c,f,g){const y=new Ue(s,c,Hd);return y.multi=[],y.index=a,y.componentProviders=0,i(y,g,f&&!c),y}(g?_:p,c.length,g,f,k);!g&&on&&(c[Dt].providerFactory=_n),e(y,s,a.length,0),a.push(N),H.directiveStart++,H.directiveEnd++,g&&(H.providerIndexes+=1048576),c.push(_n),I.push(_n)}else e(y,s,Ze>-1?Ze:Dt,i(c[g?Dt:Ze],k,!g&&f));!g&&f&&on&&c[Dt].componentProviders++}}}function e(s,a,c,f){const g=oc(a),y=function a_(s){return!!s.useClass}(a);if(g||y){const k=(y?Ce(a.useClass):a).prototype.ngOnDestroy;if(k){const H=s.destroyHooks||(s.destroyHooks=[]);if(!g&&a.multi){const X=H.indexOf(c);-1===X?H.push(c,[f,k]):H[X+1].push(f,k)}else H.push(c,k)}}}function i(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function u(s,a,c,f){for(let g=c;g<f;g++)if(a[g]===s)return g;return-1}function p(s,a,c,f){return w(this.multi,[])}function _(s,a,c,f){const g=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,N=Ti(c,c[Jt],this.providerFactory.index,f);y=N.slice(0,I),w(g,y);for(let k=I;k<N.length;k++)y.push(N[k])}else y=[],w(g,y);return y}function w(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function B(s,a=[]){return c=>{c.providersResolver=(f,g)=>function lw(s,a,c){const f=rr();if(f.firstCreatePass){const g=js(s);l(c,f.data,f.blueprint,g,!0),l(a,f.data,f.blueprint,g,!1)}}(f,g?g(s):s,a)}}class z{}class ne{}function we(s,a){return new pt(s,a??null)}class pt extends z{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new L_(this);const f=zi(a);this._bootstrapComponents=gl(f.bootstrap),this._r3Injector=b_(a,c,[{provide:z,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],pe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Ot extends ne{constructor(a){super(),this.moduleType=a}create(a){return new pt(this.moduleType,a)}}class Qt extends z{constructor(a,c,f){super(),this.componentFactoryResolver=new L_(this),this.instance=null;const g=new ac([...a,{provide:z,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],c||Ud(),f,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function gn(s,a,c=null){return new Qt(s,a,c).injector}let di=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const f=kd(0,c.type),g=f.length>0?gn([f],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,g)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=gt({token:s,providedIn:"environment",factory:()=>new s(Rt(nu))}),s})();function ss(s){s.getStandaloneInjector=a=>a.get(di).getOrCreateStandaloneInjector(s)}function R0(s,a,c,f){return cw(ut(),$r(),s,a,c,f)}function hu(s,a,c,f,g){return function RE(s,a,c,f,g,y,I){const N=a+c;return td(s,N,g,y)?Oa(s,N+2,I?f.call(I,g,y):f(g,y)):Ay(s,N+2)}(ut(),$r(),s,a,c,f,g)}function NE(s,a,c,f,g,y){return function PE(s,a,c,f,g,y,I,N){const k=a+c;return function Xh(s,a,c,f,g){const y=td(s,a,c,f);return Io(s,a+2,g)||y}(s,k,g,y,I)?Oa(s,k+3,N?f.call(N,g,y,I):f(g,y,I)):Ay(s,k+3)}(ut(),$r(),s,a,c,f,g,y)}function Ay(s,a){const c=s[a];return c===Qn?void 0:c}function cw(s,a,c,f,g,y){const I=a+c;return Io(s,I,g)?Oa(s,I+1,y?f.call(y,g):f(g)):Ay(s,I+1)}function yf(s,a){const c=rr();let f;const g=s+ye;c.firstCreatePass?(f=function Pr(s,a){if(a)for(let c=a.length-1;c>=0;c--){const f=a[c];if(s===f.name)return f}}(a,c.pipeRegistry),c.data[g]=f,f.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(g,f.onDestroy)):f=c.data[g];const y=f.factory||(f.factory=Ui(f.type)),I=ti(Hd);try{const N=la(!1),k=y();return la(N),function xg(s,a,c,f){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),a[c]=f}(c,ut(),g,k),k}finally{ti(I)}}function Oy(s,a,c){const f=s+ye,g=ut(),y=Ns(g,f);return function Ny(s,a){return s[Jt].data[a].pure}(g,f)?cw(g,$r(),a,y.transform,c,y):y.transform(c)}function fw(s){return a=>{setTimeout(s,void 0,a)}}const $u=class zl extends T.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,f){let g=a,y=c||(()=>null),I=f;if(a&&"object"==typeof a){const k=a;g=k.next?.bind(k),y=k.error?.bind(k),I=k.complete?.bind(k)}this.__isAsync&&(y=fw(y),g&&(g=fw(g)),I&&(I=fw(I)));const N=super.subscribe({next:g,error:y,complete:I});return a instanceof Y.w0&&a.add(N),N}};function pw(){return this._results[Symbol.iterator]()}class gw{get changes(){return this._changes||(this._changes=new $u)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=gw.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=pw)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const f=this;f.dirty=!1;const g=function Oi(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Pl(s,a,c){if(s.length!==a.length)return!1;for(let f=0;f<s.length;f++){let g=s[f],y=a[f];if(c&&(g=c(g),y=c(y)),y!==g)return!1}return!0}(f._results,g,c))&&(f._results=g,f.length=g.length,f.last=g[this.length-1],f.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fm=(()=>{class s{}return s.__NG_ELEMENT_ID__=pm,s})();const FE=fm,LE=class extends FE{constructor(a,c,f){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(a,c){const f=this._declarationTContainer.tView,g=xs(this._declarationLView,f,a,16,null,f.declTNode,null,null,null,null,c||null);g[Xs]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[bi];return null!==I&&(g[bi]=I.createEmbeddedView(f)),zd(f,g,a),new qh(g)}};function pm(){return My(Ei(),ut())}function My(s,a){return 4&s.type?new LE(a,s,Kc(s,a)):null}let Ry=(()=>{class s{}return s.__NG_ELEMENT_ID__=HD,s})();function HD(){return BE(Ei(),ut())}const $D=Ry,UE=class extends $D{constructor(a,c,f){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=f}get element(){return Kc(this._hostTNode,this._hostLView)}get injector(){return new cs(this._hostTNode,this._hostLView)}get parentInjector(){const a=ir(this._hostTNode,this._hostLView);if(Tr(a)){const c=Fo(a,this._hostLView),f=vo(a);return new cs(c[Jt].data[f+8],c)}return new cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Hi(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Ln}createEmbeddedView(a,c,f){let g,y;"number"==typeof f?g=f:null!=f&&(g=f.index,y=f.injector);const I=a.createEmbeddedView(c||{},y);return this.insert(I,g),I}createComponent(a,c,f,g,y){const I=a&&!function uo(s){return"function"==typeof s}(a);let N;if(I)N=c;else{const ue=c||{};N=ue.index,f=ue.injector,g=ue.projectableNodes,y=ue.environmentInjector||ue.ngModuleRef}const k=I?a:new Yh(Yn(a)),H=f||this.parentInjector;if(!y&&null==k.ngModule){const Oe=(I?H:this.parentInjector).get(nu,null);Oe&&(y=Oe)}const X=k.create(H,g,void 0,y);return this.insert(X.hostView,N),X}insert(a,c){const f=a._lView,g=f[Jt];if(function ro(s){return _r(s[vr])}(f)){const X=this.indexOf(a);if(-1!==X)this.detach(X);else{const ue=f[vr],Oe=new UE(ue,ue[Lr],ue[vr]);Oe.detach(Oe.indexOf(a))}}const y=this._adjustIndex(c),I=this._lContainer;!function Uc(s,a,c,f){const g=Ln+f,y=c.length;f>0&&(c[g-1][li]=a),f<y-Ln?(a[li]=c[g],qa(c,Ln+f,a)):(c.push(a),a[li]=null),a[vr]=c;const I=a[Xs];null!==I&&c!==I&&function Dh(s,a){const c=s[mr];a[vi]!==a[vr][vr][vi]&&(s[Lt]=!0),null===c?s[mr]=[a]:c.push(a)}(I,a);const N=a[bi];null!==N&&N.insertView(s),a[Nn]|=64}(g,f,I,y);const N=kl(y,I),k=f[Fn],H=Xi(k,I[an]);return null!==H&&function Mf(s,a,c,f,g,y){f[Fi]=g,f[Lr]=a,xf(s,f,c,1,g,y)}(g,I[Lr],k,f,H,N),a.attachToViewContainerRef(),qa(mw(I),y,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Hi(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),f=Lm(this._lContainer,c);f&&(C(mw(this._lContainer),c),Ih(f[Jt],f))}detach(a){const c=this._adjustIndex(a,-1),f=Lm(this._lContainer,c);return f&&null!=C(mw(this._lContainer),c)?new qh(f):null}_adjustIndex(a,c=0){return a??this.length+c}};function Hi(s){return s[Rn]}function mw(s){return s[Rn]||(s[Rn]=[])}function BE(s,a){let c;const f=a[s.index];if(_r(f))c=f;else{let g;if(8&s.type)g=Nr(f);else{const y=a[Fn];g=y.createComment("");const I=gi(s,a);Bc(y,Xi(y,I),g,function Wr(s,a){return s.nextSibling(a)}(y,I),!1)}a[s.index]=c=bg(f,a,g,s),zh(a,c)}return new UE(c,s,a)}class gm{constructor(a){this.queryList=a,this.matches=null}clone(){return new gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Py{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const f=null!==a.contentQueries?a.contentQueries[0]:c.length,g=[];for(let y=0;y<f;y++){const I=c.getByIndex(y);g.push(this.queries[I.indexInDeclarationView].clone())}return new Py(g)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==_m(a,c).matches&&this.queries[c].setDirty()}}class Cp{constructor(a,c,f=null){this.predicate=a,this.flags=c,this.read=f}}class Ic{constructor(a=[]){this.queries=a}elementStart(a,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let f=0;f<this.length;f++){const g=null!==c?c.length:0,y=this.getByIndex(f).embeddedTView(a,g);y&&(y.indexInDeclarationView=f,null!==c?c.push(y):c=[y])}return null!==c?new Ic(c):null}template(a,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Tp{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Tp(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=a.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let g=0;g<f.length;g++){const y=f[g];this.matchTNodeWithReadOption(a,c,gr(c,y)),this.matchTNodeWithReadOption(a,c,so(c,a,y,!1,!1))}else f===fm?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,so(c,a,f,!1,!1))}matchTNodeWithReadOption(a,c,f){if(null!==f){const g=this.metadata.read;if(null!==g)if(g===qc||g===Ry||g===fm&&4&c.type)this.addMatch(c.index,-2);else{const y=so(c,a,g,!1,!1);null!==y&&this.addMatch(c.index,y)}else this.addMatch(c.index,f)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function gr(s,a){const c=s.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===a)return c[f+1];return null}function xy(s,a,c,f){return-1===c?function zD(s,a){return 11&s.type?Kc(s,a):4&s.type?My(s,a):null}(a,s):-2===c?function WD(s,a,c){return c===qc?Kc(a,s):c===fm?My(a,s):c===Ry?BE(a,s):void 0}(s,a,f):Ti(s,s[Jt],c,a)}function ys(s,a,c,f){const g=a[bi].queries[f];if(null===g.matches){const y=s.data,I=c.matches,N=[];for(let k=0;k<I.length;k+=2){const H=I[k];N.push(H<0?null:xy(a,y[H],I[k+1],c.metadata.read))}g.matches=N}return g.matches}function ky(s,a,c,f){const g=s.queries.getByIndex(c),y=g.matches;if(null!==y){const I=ys(s,a,g,c);for(let N=0;N<y.length;N+=2){const k=y[N];if(k>0)f.push(I[N/2]);else{const H=y[N+1],X=a[-k];for(let ue=Ln;ue<X.length;ue++){const Oe=X[ue];Oe[Xs]===Oe[vr]&&ky(Oe[Jt],Oe,H,f)}if(null!==X[mr]){const ue=X[mr];for(let Oe=0;Oe<ue.length;Oe++){const Ze=ue[Oe];ky(Ze[Jt],Ze,H,f)}}}}}return f}function VE(s){const a=ut(),c=rr(),f=Tl();oa(f+1);const g=_m(c,f);if(s.dirty&&function Ba(s){return 4==(4&s[Nn])}(a)===(2==(2&g.metadata.flags))){if(null===g.matches)s.reset([]);else{const y=g.crossesNgTemplate?ky(c,a,f,[]):ys(c,a,g,f);s.reset(y,bv),s.notifyOnChanges()}return!0}return!1}function x0(s,a,c){const f=rr();f.firstCreatePass&&(GE(f,new Cp(s,a,c),-1),2==(2&a)&&(f.staticViewQueries=!0)),mm(f,ut(),a)}function _w(s,a,c,f){const g=rr();if(g.firstCreatePass){const y=Ei();GE(g,new Cp(a,c,f),y.index),function yw(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(g,s),2==(2&c)&&(g.staticContentQueries=!0)}mm(g,ut(),c)}function Sp(){return function Fy(s,a){return s[bi].queries[a].queryList}(ut(),Tl())}function mm(s,a,c){const f=new gw(4==(4&c));Kd(s,a,f,f.destroy),null===a[bi]&&(a[bi]=new Py),a[bi].queries.push(new gm(f))}function GE(s,a,c){null===s.queries&&(s.queries=new Ic),s.queries.track(new Tp(a,c))}function _m(s,a){return s.queries.getByIndex(a)}function jE(s,a){return My(s,a)}function vw(s){return!!zi(s)}function $0(...s){}const XE=new Vr("Application Initializer");let z0=(()=>{class s{constructor(c){this.appInits=c,this.resolve=$0,this.reject=$0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,g)=>{this.resolve=f,this.reject=g})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const y=this.appInits[g]();if(ap(y))c.push(y);else if(lp(y)){const I=new Promise((N,k)=>{y.subscribe({complete:N,error:k})});c.push(I)}}Promise.all(c).then(()=>{f()}).catch(g=>{this.reject(g)}),0===c.length&&f(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Rt(XE,8))},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Sw=new Vr("AppId",{providedIn:"root",factory:function Aw(){return`${Ow()}${Ow()}${Ow()}`}});function Ow(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eD=new Vr("Platform Initializer"),XD=new Vr("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let W0=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const jy=new Vr("LocaleId",{providedIn:"root",factory:()=>Ut(jy,Gt.Optional|Gt.SkipSelf)||function Nw(){return typeof $localize<"u"&&$localize.locale||_l}()}),K0=new Vr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nD{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let tI=(()=>{class s{compileModuleSync(c){return new Ot(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const f=this.compileModuleSync(c),y=gl(zi(c).declarations).reduce((I,N)=>{const k=Yn(N);return k&&I.push(new Yh(k)),I},[]);return new nD(f,y)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const sD=(()=>Promise.resolve(0))();function Cm(s){typeof Zone>"u"?sD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ku{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $u(!1),this.onMicrotaskEmpty=new $u(!1),this.onStable=new $u(!1),this.onError=new $u(!1),typeof Zone>"u")throw new Je(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!f&&c,g.shouldCoalesceRunChangeDetection=f,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function Rw(){let s=mn.requestAnimationFrame,a=mn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const f=a[Zone.__symbol__("OriginalDelegate")];f&&(a=f)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function oI(s){const a=()=>{!function sI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(mn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Pw(s),s.isCheckStableRunning=!0,Hy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Pw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,g,y,I,N)=>{try{return aD(s),c.invokeTask(g,y,I,N)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||s.shouldCoalesceRunChangeDetection)&&a(),lD(s)}},onInvoke:(c,f,g,y,I,N,k)=>{try{return aD(s),c.invoke(g,y,I,N,k)}finally{s.shouldCoalesceRunChangeDetection&&a(),lD(s)}},onHasTask:(c,f,g,y)=>{c.hasTask(g,y),f===g&&("microTask"==y.change?(s._hasPendingMicrotasks=y.microTask,Pw(s),Hy(s)):"macroTask"==y.change&&(s.hasPendingMacrotasks=y.macroTask))},onHandleError:(c,f,g,y)=>(c.handleError(g,y),s.runOutsideAngular(()=>s.onError.emit(y)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ku.isInAngularZone())throw new Je(909,!1)}static assertNotInAngularZone(){if(Ku.isInAngularZone())throw new Je(909,!1)}run(a,c,f){return this._inner.run(a,c,f)}runTask(a,c,f,g){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+g,a,oD,$0,$0);try{return y.runTask(I,c,f)}finally{y.cancelTask(I)}}runGuarded(a,c,f){return this._inner.runGuarded(a,c,f)}runOutsideAngular(a){return this._outer.run(a)}}const oD={};function Hy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Pw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function aD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function lD(s){s._nesting--,Hy(s)}class aI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $u,this.onMicrotaskEmpty=new $u,this.onStable=new $u,this.onError=new $u}run(a,c,f){return a.apply(c,f)}runGuarded(a,c,f){return a.apply(c,f)}runOutsideAngular(a){return a()}runTask(a,c,f,g){return a.apply(c,f)}}const uD=new Vr(""),xw=new Vr("");let Fw,lI=(()=>{class s{constructor(c,f,g){this._ngZone=c,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fw||(function cD(s){Fw=s}(g),g.addToWindow(f)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ku.assertNotInAngularZone(),Cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cm(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,g){let y=-1;f&&f>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:y,updateCb:g})}whenStable(c,f,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,f,g){return[]}}return s.\u0275fac=function(c){return new(c||s)(Rt(Ku),Rt(kw),Rt(xw))},s.\u0275prov=gt({token:s,factory:s.\u0275fac}),s})(),kw=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return Fw?.findTestabilityInTree(this,c,f)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const pd=!1;let Tc=null;const Lw=new Vr("AllowMultipleToken"),Uw=new Vr("PlatformDestroyListeners"),dD=new Vr("appBootstrapListener");class cI{constructor(a,c){this.name=a,this.token=c}}function Bw(s,a,c=[]){const f=`Platform: ${a}`,g=new Vr(f);return(y=[])=>{let I=Gw();if(!I||I.injector.get(Lw,!1)){const N=[...c,...y,{provide:g,useValue:!0}];s?s(N):function dI(s){if(Tc&&!Tc.get(Lw,!1))throw new Je(400,!1);Tc=s;const a=s.get(gD);(function hh(s){const a=s.get(eD,null);a&&a.forEach(c=>c())})(s)}(function $y(s=[],a){return Zc.create({name:a,providers:[{provide:Mh,useValue:"platform"},{provide:Uw,useValue:new Set([()=>Tc=null])},...s]})}(N,f))}return function wf(s){const a=Gw();if(!a)throw new Je(401,!1);return a}()}}function Gw(){return Tc?.get(gD)??null}let gD=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const g=function jw(s,a){let c;return c="noop"===s?new aI:("zone.js"===s?void 0:s)||new Ku(a),c}(f?.ngZone,function mD(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(f)),y=[{provide:Ku,useValue:g}];return g.run(()=>{const I=Zc.create({providers:y,parent:this.injector,name:c.moduleType.name}),N=c.create(I),k=N.injector.get(zf,null);if(!k)throw new Je(402,!1);return g.runOutsideAngular(()=>{const H=g.onError.subscribe({next:X=>{k.handleError(X)}});N.onDestroy(()=>{Ef(this._modules,N),H.unsubscribe()})}),function q0(s,a,c){try{const f=c();return ap(f)?f.catch(g=>{throw a.runOutsideAngular(()=>s.handleError(g)),g}):f}catch(f){throw a.runOutsideAngular(()=>s.handleError(f)),f}}(k,g,()=>{const H=N.injector.get(z0);return H.runInitializers(),H.donePromise.then(()=>(Vu(N.injector.get(jy,_l)||_l),this._moduleDoBootstrap(N),N))})})}bootstrapModule(c,f=[]){const g=_D({},f);return function uI(s,a,c){const f=new Ot(c);return Promise.resolve(f)}(0,0,c).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(c){const f=c.injector.get(Sc);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(g=>f.bootstrap(g));else{if(!c.instance.ngDoBootstrap)throw new Je(-403,!1);c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const c=this._injector.get(Uw,null);c&&(c.forEach(f=>f()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Rt(Zc))},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function _D(s,a){return Array.isArray(a)?a.reduce(_D,s):{...s,...a}}let Sc=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,f,g){this._zone=c,this._injector=f,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new h.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),I=new h.y(N=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{Ku.assertNotInAngularZone(),Cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{Ku.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{k.unsubscribe(),H.unsubscribe()}});this.isStable=(0,ve.T)(y,I.pipe((0,Se.B)()))}bootstrap(c,f){const g=c instanceof u_;if(!this._injector.get(z0).done){!g&&ki(c);throw new Je(405,pd)}let I;I=g?c:this._injector.get(Wc).resolveComponentFactory(c),this.componentTypes.push(I.componentType);const N=function fD(s){return s.isBoundToModule}(I)?void 0:this._injector.get(z),H=I.create(Zc.NULL,[],f||I.selector,N),X=H.location.nativeElement,ue=H.injector.get(uD,null);return ue?.registerApplication(X),H.onDestroy(()=>{this.detachView(H.hostView),Ef(this.components,H),ue?.unregisterApplication(X)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new Je(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;Ef(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const f=this._injector.get(dD,[]);f.push(...this._bootstrapListeners),f.forEach(g=>g(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Ef(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Je(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(Rt(Ku),Rt(nu),Rt(zf))},s.\u0275prov=gt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ef(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}function pI(){return!1}let Z0=(()=>{class s{}return s.__NG_ELEMENT_ID__=mI,s})();function mI(s){return function Tm(s,a,c){if(Is(s)&&!c){const f=ui(s.index,a);return new qh(f,f)}return 47&s.type?new qh(a[vi],a):null}(Ei(),ut(),16==(16&s))}class eb{constructor(){}supports(a){return Zh(a)}create(a){return new Pp(a)}}const tb=(s,a)=>a;class Pp{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||tb}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,f=this._removalsHead,g=0,y=null;for(;c||f;){const I=!f||c&&c.currentIndex<Wy(f,g,y)?c:f,N=Wy(I,g,y),k=I.currentIndex;if(I===f)g--,f=f._nextRemoved;else if(c=c._next,null==I.previousIndex)g++;else{y||(y=[]);const H=N-g,X=k-g;if(H!=X){for(let Oe=0;Oe<H;Oe++){const Ze=Oe<y.length?y[Oe]:y[Oe]=0,Dt=Ze+Oe;X<=Dt&&Dt<H&&(y[Oe]=Ze+1)}y[I.previousIndex]=X-H}}N!==k&&a(I,N,k)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Zh(a))throw new Je(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let g,y,I,c=this._itHead,f=!1;if(Array.isArray(a)){this.length=a.length;for(let N=0;N<this.length;N++)y=a[N],I=this._trackByFn(N,y),null!==c&&Object.is(c.trackById,I)?(f&&(c=this._verifyReinsertion(c,y,I,N)),Object.is(c.item,y)||this._addIdentityChange(c,y)):(c=this._mismatch(c,y,I,N),f=!0),c=c._next}else g=0,function G_(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let f;for(;!(f=c.next()).done;)a(f.value)}}(a,N=>{I=this._trackByFn(g,N),null!==c&&Object.is(c.trackById,I)?(f&&(c=this._verifyReinsertion(c,N,I,g)),Object.is(c.item,N)||this._addIdentityChange(c,N)):(c=this._mismatch(c,N,I,g),f=!0),c=c._next,g++}),this.length=g;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,f,g){let y;return null===a?y=this._itTail:(y=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,y,g)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(f,g))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,y,g)):a=this._addAfter(new Zw(c,f),y,g),a}_verifyReinsertion(a,c,f,g){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==y?a=this._reinsertAfter(y,a._prev,g):a.currentIndex!=g&&(a.currentIndex=g,this._addToMoves(a,g)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const g=a._prevRemoved,y=a._nextRemoved;return null===g?this._removalsHead=y:g._nextRemoved=y,null===y?this._removalsTail=g:y._prevRemoved=g,this._insertAfter(a,c,f),this._addToMoves(a,f),a}_moveAfter(a,c,f){return this._unlink(a),this._insertAfter(a,c,f),this._addToMoves(a,f),a}_addAfter(a,c,f){return this._insertAfter(a,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,f){const g=null===c?this._itHead:c._next;return a._next=g,a._prev=c,null===g?this._itTail=a:g._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new DD),this._linkedRecords.put(a),a.currentIndex=f,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,f=a._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Zw{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ED{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,a))return f;return null}remove(a){const c=a._prevDup,f=a._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class DD{constructor(){this.map=new Map}put(a){const c=a.trackById;let f=this.map.get(c);f||(f=new ED,this.map.set(c,f)),f.add(a)}get(a,c){const g=this.map.get(a);return g?g.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wy(s,a,c){const f=s.previousIndex;if(null===f)return f;let g=0;return c&&f<c.length&&(g=c[f]),f+a+g}class Qw{constructor(){}supports(a){return a instanceof Map||Qh(a)}create(){return new EI}}class EI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Qh(a)))throw new Je(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(f,g)=>{if(c&&c.key===g)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const y=this._getOrCreateRecordForKey(g,f);c=this._insertBeforeOrAppend(c,y)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const f=a._prev;return c._next=a,c._prev=f,a._prev=c,f&&(f._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const g=this._records.get(a);this._maybeAddToChanges(g,c);const y=g._prev,I=g._next;return y&&(y._next=I),I&&(I._prev=y),g._next=null,g._prev=null,g}const f=new Ky(a);return this._records.set(a,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(f=>c(a[f],f))}}class Ky{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nb(){return new Jw([new eb])}let Jw=(()=>{class s{constructor(c){this.factories=c}static create(c,f){if(null!=f){const g=f.factories.slice();c=c.concat(g)}return new s(c)}static extend(c){return{provide:s,useFactory:f=>s.create(c,f||nb()),deps:[[s,new Z,new F]]}}find(c){const f=this.factories.find(g=>g.supports(c));if(null!=f)return f;throw new Je(901,!1)}}return s.\u0275prov=gt({token:s,providedIn:"root",factory:nb}),s})();function ID(){return new qy([new Qw])}let qy=(()=>{class s{constructor(c){this.factories=c}static create(c,f){if(f){const g=f.factories.slice();c=c.concat(g)}return new s(c)}static extend(c){return{provide:s,useFactory:f=>s.create(c,f||ID()),deps:[[s,new Z,new F]]}}find(c){const f=this.factories.find(g=>g.supports(c));if(f)return f;throw new Je(901,!1)}}return s.\u0275prov=gt({token:s,providedIn:"root",factory:ID}),s})();const gd=Bw(null,"core",[]);let Yy=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Rt(Sc))},s.\u0275mod=_a({type:s}),s.\u0275inj=xn({}),s})();function DI(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function SD(s,a){const c=Yn(s),f=a.elementInjector||Ud();return new Yh(c).create(f,a.projectableNodes,a.hostElement,a.environmentInjector)}},1481:(zt,We,j)=>{j.d(We,{Dx:()=>mn,b2:()=>ai,q6:()=>Kr});var T=j(6895),Y=j(4650);class h extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends h{static makeCurrent(){(0,T.HT)(new ve)}onAndCancel(he,oe,Ae){return he.addEventListener(oe,Ae,!1),()=>{he.removeEventListener(oe,Ae,!1)}}dispatchEvent(he,oe){he.dispatchEvent(oe)}remove(he){he.parentNode&&he.parentNode.removeChild(he)}createElement(he,oe){return(oe=oe||this.getDefaultDocument()).createElement(he)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(he){return he.nodeType===Node.ELEMENT_NODE}isShadowRoot(he){return he instanceof DocumentFragment}getGlobalEventTarget(he,oe){return"window"===oe?window:"document"===oe?he:"body"===oe?he.body:null}getBaseHref(he){const oe=function Te(){return Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null}();return null==oe?null:function pe(ae){ke=ke||document.createElement("a"),ke.setAttribute("href",ae);const he=ke.pathname;return"/"===he.charAt(0)?he:`/${he}`}(oe)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(he){return(0,T.Mx)(document.cookie,he)}}let ke,Se=null;const Fe=new Y.OlP("TRANSITION_ID"),de=[{provide:Y.ip1,useFactory:function me(ae,he,oe){return()=>{oe.get(Y.CZH).donePromise.then(()=>{const Ae=(0,T.q)(),Xe=he.querySelectorAll(`style[ng-transition="${ae}"]`);for(let mt=0;mt<Xe.length;mt++)Ae.remove(Xe[mt])})}},deps:[Fe,T.K0,Y.zs3],multi:!0}];let et=(()=>{class ae{build(){return new XMLHttpRequest}}return ae.\u0275fac=function(oe){return new(oe||ae)},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const Ke=new Y.OlP("EventManagerPlugins");let at=(()=>{class ae{constructor(oe,Ae){this._zone=Ae,this._eventNameToPlugin=new Map,oe.forEach(Xe=>{Xe.manager=this}),this._plugins=oe.slice().reverse()}addEventListener(oe,Ae,Xe){return this._findPluginFor(Ae).addEventListener(oe,Ae,Xe)}addGlobalEventListener(oe,Ae,Xe){return this._findPluginFor(Ae).addGlobalEventListener(oe,Ae,Xe)}getZone(){return this._zone}_findPluginFor(oe){const Ae=this._eventNameToPlugin.get(oe);if(Ae)return Ae;const Xe=this._plugins;for(let mt=0;mt<Xe.length;mt++){const nn=Xe[mt];if(nn.supports(oe))return this._eventNameToPlugin.set(oe,nn),nn}throw new Error(`No event manager plugin found for event ${oe}`)}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(Ke),Y.LFG(Y.R0b))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Nt{constructor(he){this._doc=he}addGlobalEventListener(he,oe,Ae){const Xe=(0,T.q)().getGlobalEventTarget(this._doc,he);if(!Xe)throw new Error(`Unsupported event target ${Xe} for event ${oe}`);return this.addEventListener(Xe,oe,Ae)}}let Je=(()=>{class ae{constructor(){this.usageCount=new Map}addStyles(oe){for(const Ae of oe)1===this.changeUsageCount(Ae,1)&&this.onStyleAdded(Ae)}removeStyles(oe){for(const Ae of oe)0===this.changeUsageCount(Ae,-1)&&this.onStyleRemoved(Ae)}onStyleRemoved(oe){}onStyleAdded(oe){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(oe,Ae){const Xe=this.usageCount;let mt=Xe.get(oe)??0;return mt+=Ae,mt>0?Xe.set(oe,mt):Xe.delete(oe),mt}ngOnDestroy(){for(const oe of this.getAllStyles())this.onStyleRemoved(oe);this.usageCount.clear()}}return ae.\u0275fac=function(oe){return new(oe||ae)},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})(),ct=(()=>{class ae extends Je{constructor(oe){super(),this.doc=oe,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(oe){for(const Ae of this.hostNodes)this.addStyleToHost(Ae,oe)}onStyleRemoved(oe){const Ae=this.styleRef;Ae.get(oe)?.forEach(mt=>mt.remove()),Ae.delete(oe)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(oe){this.hostNodes.add(oe);for(const Ae of this.getAllStyles())this.addStyleToHost(oe,Ae)}removeHost(oe){this.hostNodes.delete(oe)}addStyleToHost(oe,Ae){const Xe=this.doc.createElement("style");Xe.textContent=Ae,oe.appendChild(Xe);const mt=this.styleRef.get(Ae);mt?mt.push(Xe):this.styleRef.set(Ae,[Xe])}resetHostNodes(){const oe=this.hostNodes;oe.clear(),oe.add(this.doc.head)}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const fe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ht=/%COMP%/g,Ie=new Y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ft(ae,he){return he.flat(100).map(oe=>oe.replace(ht,ae))}function qt(ae){return he=>{if("__ngUnwrap__"===he)return ae;!1===ae(he)&&(he.preventDefault(),he.returnValue=!1)}}let Pt=(()=>{class ae{constructor(oe,Ae,Xe,mt){this.eventManager=oe,this.sharedStylesHost=Ae,this.appId=Xe,this.removeStylesOnCompDestory=mt,this.rendererByCompId=new Map,this.defaultRenderer=new Le(oe)}createRenderer(oe,Ae){if(!oe||!Ae)return this.defaultRenderer;const Xe=this.getOrCreateRenderer(oe,Ae);return Xe instanceof Mt?Xe.applyToHost(oe):Xe instanceof st&&Xe.applyStyles(),Xe}getOrCreateRenderer(oe,Ae){const Xe=this.rendererByCompId;let mt=Xe.get(Ae.id);if(!mt){const nn=this.eventManager,Bt=this.sharedStylesHost,On=this.removeStylesOnCompDestory;switch(Ae.encapsulation){case Y.ifc.Emulated:mt=new Mt(nn,Bt,Ae,this.appId,On);break;case Y.ifc.ShadowDom:return new yt(nn,Bt,oe,Ae);default:mt=new st(nn,Bt,Ae,On)}mt.onDestroy=()=>Xe.delete(Ae.id),Xe.set(Ae.id,mt)}return mt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(at),Y.LFG(ct),Y.LFG(Y.AFp),Y.LFG(Ie))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();class Le{constructor(he){this.eventManager=he,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(he,oe){return oe?document.createElementNS(fe[oe]||oe,he):document.createElement(he)}createComment(he){return document.createComment(he)}createText(he){return document.createTextNode(he)}appendChild(he,oe){(nt(he)?he.content:he).appendChild(oe)}insertBefore(he,oe,Ae){he&&(nt(he)?he.content:he).insertBefore(oe,Ae)}removeChild(he,oe){he&&he.removeChild(oe)}selectRootElement(he,oe){let Ae="string"==typeof he?document.querySelector(he):he;if(!Ae)throw new Error(`The selector "${he}" did not match any elements`);return oe||(Ae.textContent=""),Ae}parentNode(he){return he.parentNode}nextSibling(he){return he.nextSibling}setAttribute(he,oe,Ae,Xe){if(Xe){oe=Xe+":"+oe;const mt=fe[Xe];mt?he.setAttributeNS(mt,oe,Ae):he.setAttribute(oe,Ae)}else he.setAttribute(oe,Ae)}removeAttribute(he,oe,Ae){if(Ae){const Xe=fe[Ae];Xe?he.removeAttributeNS(Xe,oe):he.removeAttribute(`${Ae}:${oe}`)}else he.removeAttribute(oe)}addClass(he,oe){he.classList.add(oe)}removeClass(he,oe){he.classList.remove(oe)}setStyle(he,oe,Ae,Xe){Xe&(Y.JOm.DashCase|Y.JOm.Important)?he.style.setProperty(oe,Ae,Xe&Y.JOm.Important?"important":""):he.style[oe]=Ae}removeStyle(he,oe,Ae){Ae&Y.JOm.DashCase?he.style.removeProperty(oe):he.style[oe]=""}setProperty(he,oe,Ae){he[oe]=Ae}setValue(he,oe){he.nodeValue=oe}listen(he,oe,Ae){return"string"==typeof he?this.eventManager.addGlobalEventListener(he,oe,qt(Ae)):this.eventManager.addEventListener(he,oe,qt(Ae))}}function nt(ae){return"TEMPLATE"===ae.tagName&&void 0!==ae.content}class yt extends Le{constructor(he,oe,Ae,Xe){super(he),this.sharedStylesHost=oe,this.hostEl=Ae,this.shadowRoot=Ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const mt=ft(Xe.id,Xe.styles);for(const nn of mt){const Bt=document.createElement("style");Bt.textContent=nn,this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(he){return he===this.hostEl?this.shadowRoot:he}appendChild(he,oe){return super.appendChild(this.nodeOrShadowRoot(he),oe)}insertBefore(he,oe,Ae){return super.insertBefore(this.nodeOrShadowRoot(he),oe,Ae)}removeChild(he,oe){return super.removeChild(this.nodeOrShadowRoot(he),oe)}parentNode(he){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(he)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class st extends Le{constructor(he,oe,Ae,Xe,mt=Ae.id){super(he),this.sharedStylesHost=oe,this.removeStylesOnCompDestory=Xe,this.rendererUsageCount=0,this.styles=ft(mt,Ae.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Mt extends st{constructor(he,oe,Ae,Xe,mt){const nn=Xe+"-"+Ae.id;super(he,oe,Ae,mt,nn),this.contentAttr=function tt(ae){return"_ngcontent-%COMP%".replace(ht,ae)}(nn),this.hostAttr=function it(ae){return"_nghost-%COMP%".replace(ht,ae)}(nn)}applyToHost(he){this.applyStyles(),this.setAttribute(he,this.hostAttr,"")}createElement(he,oe){const Ae=super.createElement(he,oe);return super.setAttribute(Ae,this.contentAttr,""),Ae}}let It=(()=>{class ae extends Nt{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Ae,Xe){return oe.addEventListener(Ae,Xe,!1),()=>this.removeEventListener(oe,Ae,Xe)}removeEventListener(oe,Ae,Xe){return oe.removeEventListener(Ae,Xe)}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const tn=["alt","control","meta","shift"],jt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wt={alt:ae=>ae.altKey,control:ae=>ae.ctrlKey,meta:ae=>ae.metaKey,shift:ae=>ae.shiftKey};let gt=(()=>{class ae extends Nt{constructor(oe){super(oe)}supports(oe){return null!=ae.parseEventName(oe)}addEventListener(oe,Ae,Xe){const mt=ae.parseEventName(Ae),nn=ae.eventCallback(mt.fullKey,Xe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(oe,mt.domEventName,nn))}static parseEventName(oe){const Ae=oe.toLowerCase().split("."),Xe=Ae.shift();if(0===Ae.length||"keydown"!==Xe&&"keyup"!==Xe)return null;const mt=ae._normalizeKey(Ae.pop());let nn="",Bt=Ae.indexOf("code");if(Bt>-1&&(Ae.splice(Bt,1),nn="code."),tn.forEach(Bs=>{const qi=Ae.indexOf(Bs);qi>-1&&(Ae.splice(qi,1),nn+=Bs+".")}),nn+=mt,0!=Ae.length||0===mt.length)return null;const On={};return On.domEventName=Xe,On.fullKey=nn,On}static matchEventFullKeyCode(oe,Ae){let Xe=jt[oe.key]||oe.key,mt="";return Ae.indexOf("code.")>-1&&(Xe=oe.code,mt="code."),!(null==Xe||!Xe)&&(Xe=Xe.toLowerCase()," "===Xe?Xe="space":"."===Xe&&(Xe="dot"),tn.forEach(nn=>{nn!==Xe&&(0,Wt[nn])(oe)&&(mt+=nn+".")}),mt+=Xe,mt===Ae)}static eventCallback(oe,Ae,Xe){return mt=>{ae.matchEventFullKeyCode(mt,oe)&&Xe.runGuarded(()=>Ae(mt))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:ae.\u0275fac}),ae})();const Kr=(0,Y.eFA)(Y._c5,"browser",[{provide:Y.Lbi,useValue:T.bD},{provide:Y.g9A,useValue:function pn(){ve.makeCurrent()},multi:!0},{provide:T.K0,useFactory:function Cn(){return(0,Y.RDi)(document),document},deps:[]}]),en=new Y.OlP(""),An=[{provide:Y.rWj,useClass:class Ce{addToWindow(he){Y.dqk.getAngularTestability=(Ae,Xe=!0)=>{const mt=he.findTestabilityInTree(Ae,Xe);if(null==mt)throw new Error("Could not find testability for element.");return mt},Y.dqk.getAllAngularTestabilities=()=>he.getAllTestabilities(),Y.dqk.getAllAngularRootElements=()=>he.getAllRootElements(),Y.dqk.frameworkStabilizers||(Y.dqk.frameworkStabilizers=[]),Y.dqk.frameworkStabilizers.push(Ae=>{const Xe=Y.dqk.getAllAngularTestabilities();let mt=Xe.length,nn=!1;const Bt=function(On){nn=nn||On,mt--,0==mt&&Ae(nn)};Xe.forEach(function(On){On.whenStable(Bt)})})}findTestabilityInTree(he,oe,Ae){return null==oe?null:he.getTestability(oe)??(Ae?(0,T.q)().isShadowRoot(oe)?this.findTestabilityInTree(he,oe.host,!0):this.findTestabilityInTree(he,oe.parentElement,!0):null)}},deps:[]},{provide:Y.lri,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]},{provide:Y.dDg,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]}],Gt=[{provide:Y.zSh,useValue:"root"},{provide:Y.qLn,useFactory:function cr(){return new Y.qLn},deps:[]},{provide:Ke,useClass:It,multi:!0,deps:[T.K0,Y.R0b,Y.Lbi]},{provide:Ke,useClass:gt,multi:!0,deps:[T.K0]},{provide:Pt,useClass:Pt,deps:[at,ct,Y.AFp,Ie]},{provide:Y.FYo,useExisting:Pt},{provide:Je,useExisting:ct},{provide:ct,useClass:ct,deps:[T.K0]},{provide:at,useClass:at,deps:[Ke,Y.R0b]},{provide:T.JF,useClass:et,deps:[]},[]];let ai=(()=>{class ae{constructor(oe){}static withServerTransition(oe){return{ngModule:ae,providers:[{provide:Y.AFp,useValue:oe.appId},{provide:Fe,useExisting:Y.AFp},de]}}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(en,12))},ae.\u0275mod=Y.oAB({type:ae}),ae.\u0275inj=Y.cJS({providers:[...Gt,...An],imports:[T.ez,Y.hGG]}),ae})(),mn=(()=>{class ae{constructor(oe){this._doc=oe}getTitle(){return this._doc.title}setTitle(oe){this._doc.title=oe||""}}return ae.\u0275fac=function(oe){return new(oe||ae)(Y.LFG(T.K0))},ae.\u0275prov=Y.Yz7({token:ae,factory:function(oe){let Ae=null;return Ae=oe?new oe:function ri(){return new mn((0,Y.LFG)(T.K0))}(),Ae},providedIn:"root"}),ae})();typeof window<"u"&&window},9062:(zt,We,j)=>{j.d(We,{F0:()=>ir,rH:()=>Ai,Bz:()=>fl,lC:()=>$s});var T=j(4650),Y=j(8996),h=j(9646),ve=j(1135),Se=j(6805),Te=j(9841),ke=j(7272),pe=j(9751),Fe=j(8421);function me(C){return new pe.y(S=>{(0,Fe.Xf)(C()).subscribe(S)})}var de=j(9635),Ce=j(576);function et(C,S){const E=(0,Ce.m)(C)?C:()=>C,P=V=>V.error(E());return new pe.y(S?V=>S.schedule(P,0,V):P)}var Ke=j(515),at=j(727),Nt=j(4482),Je=j(5403);function ct(){return(0,Nt.e)((C,S)=>{let E=null;C._refCount++;const P=(0,Je.x)(S,void 0,void 0,void 0,()=>{if(!C||C._refCount<=0||0<--C._refCount)return void(E=null);const V=C._connection,K=E;E=null,V&&(!K||V===K)&&V.unsubscribe(),S.unsubscribe()});C.subscribe(P),P.closed||(E=C.connect())})}class fe extends pe.y{constructor(S,E){super(),this.source=S,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,Nt.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new at.w0;const E=this.getSubject();S.add(this.source.subscribe((0,Je.x)(E,void 0,()=>{this._teardown(),E.complete()},P=>{this._teardown(),E.error(P)},()=>this._teardown()))),S.closed&&(this._connection=null,S=at.w0.EMPTY)}return S}refCount(){return ct()(this)}}var ht=j(7579),lt=j(6895),Qe=j(4004),Ye=j(3900),Et=j(5698),Ne=j(8675),Ie=j(9300),tt=j(5577),it=j(590);function ft(C,S){return(0,Ce.m)(S)?(0,tt.z)(C,S,1):(0,tt.z)(C,1)}var qt=j(8505);function Pt(C){return(0,Nt.e)((S,E)=>{let K,P=null,V=!1;P=S.subscribe((0,Je.x)(E,void 0,void 0,ee=>{K=(0,Fe.Xf)(C(ee,Pt(C)(S))),P?(P.unsubscribe(),P=null,K.subscribe(E)):V=!0})),V&&(P.unsubscribe(),P=null,K.subscribe(E))})}var Le=j(5026);function rt(C){return C<=0?()=>Ke.E:(0,Nt.e)((S,E)=>{let P=[];S.subscribe((0,Je.x)(E,V=>{P.push(V),C<P.length&&P.shift()},()=>{for(const V of P)E.next(V);E.complete()},void 0,()=>{P=null}))})}var $e=j(8068),nt=j(6590),yt=j(4671);function st(C,S){const E=arguments.length>=2;return P=>P.pipe(C?(0,Ie.h)((V,K)=>C(V,K,P)):yt.y,rt(1),E?(0,nt.d)(S):(0,$e.T)(()=>new Se.K))}var It=j(9718);function tn(C){return(0,Nt.e)((S,E)=>{try{S.subscribe(E)}finally{E.add(C)}})}var jt=j(8189),Wt=j(1481);const gt="primary",yn=Symbol("RouteTitle");class xn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E[0]:E}return null}getAll(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function jn(C){return new xn(C)}function Hn(C,S,E){const P=E.path.split("/");if(P.length>C.length||"full"===E.pathMatch&&(S.hasChildren()||P.length<C.length))return null;const V={};for(let K=0;K<P.length;K++){const ee=P[K],Me=C[K];if(ee.startsWith(":"))V[ee.substring(1)]=Me;else if(ee!==Me.path)return null}return{consumed:C.slice(0,P.length),posParams:V}}function pn(C,S){const E=C?Object.keys(C):void 0,P=S?Object.keys(S):void 0;if(!E||!P||E.length!=P.length)return!1;let V;for(let K=0;K<E.length;K++)if(V=E[K],!cr(C[V],S[V]))return!1;return!0}function cr(C,S){if(Array.isArray(C)&&Array.isArray(S)){if(C.length!==S.length)return!1;const E=[...C].sort(),P=[...S].sort();return E.every((V,K)=>P[K]===V)}return C===S}function Cn(C){return Array.prototype.concat.apply([],C)}function qn(C){return C.length>0?C[C.length-1]:null}function en(C,S){for(const E in C)C.hasOwnProperty(E)&&S(C[E],E)}function An(C){return(0,T.CqO)(C)?C:(0,T.QGY)(C)?(0,Y.D)(Promise.resolve(C)):(0,h.of)(C)}const Gt=!1,ai={exact:function ri(C,S,E){if(!Jn(C.segments,S.segments)||!pr(C.segments,S.segments,E)||C.numberOfChildren!==S.numberOfChildren)return!1;for(const P in S.children)if(!C.children[P]||!ri(C.children[P],S.children[P],E))return!1;return!0},subset:rn},ei={exact:function ni(C,S){return pn(C,S)},subset:function mn(C,S){return Object.keys(S).length<=Object.keys(C).length&&Object.keys(S).every(E=>cr(C[E],S[E]))},ignored:()=>!0};function ti(C,S,E){return ai[E.paths](C.root,S.root,E.matrixParams)&&ei[E.queryParams](C.queryParams,S.queryParams)&&!("exact"===E.fragment&&C.fragment!==S.fragment)}function rn(C,S,E){return sn(C,S,S.segments,E)}function sn(C,S,E,P){if(C.segments.length>E.length){const V=C.segments.slice(0,E.length);return!(!Jn(V,E)||S.hasChildren()||!pr(V,E,P))}if(C.segments.length===E.length){if(!Jn(C.segments,E)||!pr(C.segments,E,P))return!1;for(const V in S.children)if(!C.children[V]||!rn(C.children[V],S.children[V],P))return!1;return!0}{const V=E.slice(0,C.segments.length),K=E.slice(C.segments.length);return!!(Jn(C.segments,V)&&pr(C.segments,V,P)&&C.children[gt])&&sn(C.children[gt],S,K,P)}}function pr(C,S,E){return S.every((P,V)=>ei[E](C[V].parameters,P.parameters))}class nr{constructor(S=new cn([],{}),E={},P=null){this.root=S,this.queryParams=E,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return Ci.serialize(this)}}class cn{constructor(S,E){this.segments=S,this.children=E,this.parent=null,en(E,(P,V)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cr(this)}}class br{constructor(S,E){this.path=S,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=jn(this.parameters)),this._parameterMap}toString(){return be(this)}}function Jn(C,S){return C.length===S.length&&C.every((E,P)=>E.path===S[P].path)}let jr=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return new kn},providedIn:"root"}),C})();class kn{parse(S){const E=new Ae(S);return new nr(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(S){const E=`/${Rt(S.root,!0)}`,P=function te(C){const S=Object.keys(C).map(E=>{const P=C[E];return Array.isArray(P)?P.map(V=>`${Ut(E)}=${Ut(V)}`).join("&"):`${Ut(E)}=${Ut(P)}`}).filter(E=>!!E);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${E}${P}${"string"==typeof S.fragment?`#${function hn(C){return encodeURI(C)}(S.fragment)}`:""}`}}const Ci=new kn;function Cr(C){return C.segments.map(S=>be(S)).join("/")}function Rt(C,S){if(!C.hasChildren())return Cr(C);if(S){const E=C.children[gt]?Rt(C.children[gt],!1):"",P=[];return en(C.children,(V,K)=>{K!==gt&&P.push(`${K}:${Rt(V,!1)}`)}),P.length>0?`${E}(${P.join("//")})`:E}{const E=function Pn(C,S){let E=[];return en(C.children,(P,V)=>{V===gt&&(E=E.concat(S(P,V)))}),en(C.children,(P,V)=>{V!==gt&&(E=E.concat(S(P,V)))}),E}(C,(P,V)=>V===gt?[Rt(C.children[gt],!1)]:[`${V}:${Rt(P,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[gt]?`${Cr(C)}/${E[0]}`:`${Cr(C)}/(${E.join("//")})`}}function bt(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ut(C){return bt(C).replace(/%3B/gi,";")}function Yt(C){return bt(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function En(C){return decodeURIComponent(C)}function kr(C){return En(C.replace(/\+/g,"%20"))}function be(C){return`${Yt(C.path)}${function _e(C){return Object.keys(C).map(S=>`;${Yt(S)}=${Yt(C[S])}`).join("")}(C.parameters)}`}const re=/^[^\/()?;=#]+/;function Q(C){const S=C.match(re);return S?S[0]:""}const Pe=/^[^=?&#]+/,he=/^[^&#]+/;class Ae{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(S.length>0||Object.keys(E).length>0)&&(P[gt]=new cn(S,E)),P}parseSegment(){const S=Q(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new T.vHH(4009,Gt);return this.capture(S),new br(En(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const E=Q(this.remaining);if(!E)return;this.capture(E);let P="";if(this.consumeOptional("=")){const V=Q(this.remaining);V&&(P=V,this.capture(P))}S[En(E)]=En(P)}parseQueryParam(S){const E=function ae(C){const S=C.match(Pe);return S?S[0]:""}(this.remaining);if(!E)return;this.capture(E);let P="";if(this.consumeOptional("=")){const ee=function oe(C){const S=C.match(he);return S?S[0]:""}(this.remaining);ee&&(P=ee,this.capture(P))}const V=kr(E),K=kr(P);if(S.hasOwnProperty(V)){let ee=S[V];Array.isArray(ee)||(ee=[ee],S[V]=ee),ee.push(K)}else S[V]=K}parseParens(S){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Q(this.remaining),V=this.remaining[P.length];if("/"!==V&&")"!==V&&";"!==V)throw new T.vHH(4010,Gt);let K;P.indexOf(":")>-1?(K=P.slice(0,P.indexOf(":")),this.capture(K),this.capture(":")):S&&(K=gt);const ee=this.parseChildren();E[K]=1===Object.keys(ee).length?ee[gt]:new cn([],ee),this.consumeOptional("//")}return E}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new T.vHH(4011,Gt)}}function Xe(C){return C.segments.length>0?new cn([],{[gt]:C}):C}function mt(C){const S={};for(const P of Object.keys(C.children)){const K=mt(C.children[P]);(K.segments.length>0||K.hasChildren())&&(S[P]=K)}return function nn(C){if(1===C.numberOfChildren&&C.children[gt]){const S=C.children[gt];return new cn(C.segments.concat(S.segments),S.children)}return C}(new cn(C.segments,S))}function Bt(C){return C instanceof nr}const On=!1;function _a(C,S,E,P,V){if(0===E.length)return Vs(S.root,S.root,S.root,P,V);const K=function Fr(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new Yn(!0,0,C);let S=0,E=!1;const P=C.reduce((V,K,ee)=>{if("object"==typeof K&&null!=K){if(K.outlets){const Me={};return en(K.outlets,(vt,Zt)=>{Me[Zt]="string"==typeof vt?vt.split("/"):vt}),[...V,{outlets:Me}]}if(K.segmentPath)return[...V,K.segmentPath]}return"string"!=typeof K?[...V,K]:0===ee?(K.split("/").forEach((Me,vt)=>{0==vt&&"."===Me||(0==vt&&""===Me?E=!0:".."===Me?S++:""!=Me&&V.push(Me))}),V):[...V,K]},[]);return new Yn(E,S,P)}(E);return K.toRoot()?Vs(S.root,S.root,new cn([],{}),P,V):function ee(vt){const Zt=function zi(C,S,E,P){if(C.isAbsolute)return new Yr(S.root,!0,0);if(-1===P)return new Yr(E,E===S.root,0);return function sr(C,S,E){let P=C,V=S,K=E;for(;K>V;){if(K-=V,P=P.parent,!P)throw new T.vHH(4005,On&&"Invalid number of '../'");V=P.segments.length}return new Yr(P,!1,V-K)}(E,P+(qr(C.commands[0])?0:1),C.numberOfDoubleDots)}(K,S,C.snapshot?._urlSegment,vt),Kt=Zt.processChildren?Fi(Zt.segmentGroup,Zt.index,K.commands):as(Zt.segmentGroup,Zt.index,K.commands);return Vs(S.root,Zt.segmentGroup,Kt,P,V)}(C.snapshot?._lastPathIndex)}function qr(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function bs(C){return"object"==typeof C&&null!=C&&C.outlets}function Vs(C,S,E,P,V){let ee,K={};P&&en(P,(vt,Zt)=>{K[Zt]=Array.isArray(vt)?vt.map(Kt=>`${Kt}`):`${vt}`}),ee=C===S?E:Co(C,S,E);const Me=Xe(mt(ee));return new nr(Me,K,V)}function Co(C,S,E){const P={};return en(C.children,(V,K)=>{P[K]=V===S?E:Co(V,S,E)}),new cn(C.segments,P)}class Yn{constructor(S,E,P){if(this.isAbsolute=S,this.numberOfDoubleDots=E,this.commands=P,S&&P.length>0&&qr(P[0]))throw new T.vHH(4003,On&&"Root segment cannot have matrix parameters");const V=P.find(bs);if(V&&V!==qn(P))throw new T.vHH(4004,On&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yr{constructor(S,E,P){this.segmentGroup=S,this.processChildren=E,this.index=P}}function as(C,S,E){if(C||(C=new cn([],{})),0===C.segments.length&&C.hasChildren())return Fi(C,S,E);const P=function Jt(C,S,E){let P=0,V=S;const K={match:!1,pathIndex:0,commandIndex:0};for(;V<C.segments.length;){if(P>=E.length)return K;const ee=C.segments[V],Me=E[P];if(bs(Me))break;const vt=`${Me}`,Zt=P<E.length-1?E[P+1]:null;if(V>0&&void 0===vt)break;if(vt&&Zt&&"object"==typeof Zt&&void 0===Zt.outlets){if(!Li(vt,Zt,ee))return K;P+=2}else{if(!Li(vt,{},ee))return K;P++}V++}return{match:!0,pathIndex:V,commandIndex:P}}(C,S,E),V=E.slice(P.commandIndex);if(P.match&&P.pathIndex<C.segments.length){const K=new cn(C.segments.slice(0,P.pathIndex),{});return K.children[gt]=new cn(C.segments.slice(P.pathIndex),C.children),Fi(K,0,V)}return P.match&&0===V.length?new cn(C.segments,{}):P.match&&!C.hasChildren()?Nn(C,S,E):P.match?Fi(C,0,V):Nn(C,S,E)}function Fi(C,S,E){if(0===E.length)return new cn(C.segments,{});{const P=function Wi(C){return bs(C[0])?C[0].outlets:{[gt]:C}}(E),V={};return!P[gt]&&C.children[gt]&&1===C.numberOfChildren&&0===C.children[gt].segments.length?Fi(C.children[gt],S,E):(en(P,(K,ee)=>{"string"==typeof K&&(K=[K]),null!==K&&(V[ee]=as(C.children[ee],S,K))}),en(C.children,(K,ee)=>{void 0===P[ee]&&(V[ee]=K)}),new cn(C.segments,V))}}function Nn(C,S,E){const P=C.segments.slice(0,S);let V=0;for(;V<E.length;){const K=E[V];if(bs(K)){const vt=vr(K.outlets);return new cn(P,vt)}if(0===V&&qr(E[0])){P.push(new br(C.segments[S].path,li(E[0]))),V++;continue}const ee=bs(K)?K.outlets[gt]:`${K}`,Me=V<E.length-1?E[V+1]:null;ee&&Me&&qr(Me)?(P.push(new br(ee,li(Me))),V+=2):(P.push(new br(ee,{})),V++)}return new cn(P,{})}function vr(C){const S={};return en(C,(E,P)=>{"string"==typeof E&&(E=[E]),null!==E&&(S[P]=Nn(new cn([],{}),0,E))}),S}function li(C){const S={};return en(C,(E,P)=>S[P]=`${E}`),S}function Li(C,S,E){return C==E.path&&pn(S,E.parameters)}const Lr="imperative";class ii{constructor(S,E){this.id=S,this.url=E}}class si extends ii{constructor(S,E,P="imperative",V=null){super(S,E),this.type=0,this.navigationTrigger=P,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pi extends ii{constructor(S,E,P){super(S,E),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ra extends ii{constructor(S,E,P,V){super(S,E),this.reason=P,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fn extends ii{constructor(S,E,P,V){super(S,E),this.reason=P,this.code=V,this.type=16}}class ws extends ii{constructor(S,E,P,V){super(S,E),this.error=P,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class To extends ii{constructor(S,E,P,V){super(S,E),this.urlAfterRedirects=P,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qo extends ii{constructor(S,E,P,V){super(S,E),this.urlAfterRedirects=P,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class So extends ii{constructor(S,E,P,V,K){super(S,E),this.urlAfterRedirects=P,this.state=V,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vi extends ii{constructor(S,E,P,V){super(S,E),this.urlAfterRedirects=P,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xs extends ii{constructor(S,E,P,V){super(S,E),this.urlAfterRedirects=P,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zr{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bi{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Es{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Re{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ye{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dt{constructor(S,E,P){this.routerEvent=S,this.position=E,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Rn=(()=>{class C{createUrlTree(E,P,V,K,ee,Me){return _a(E||P.root,V,K,ee,Me)}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac}),C})(),Ln=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(S){return Rn.\u0275fac(S)},providedIn:"root"}),C})();class Ds{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const E=this.pathFromRoot(S);return E.length>1?E[E.length-2]:null}children(S){const E=Qr(S,this._root);return E?E.children.map(P=>P.value):[]}firstChild(S){const E=Qr(S,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(S){const E=_r(S,this._root);return E.length<2?[]:E[E.length-2].children.map(V=>V.value).filter(V=>V!==S)}pathFromRoot(S){return _r(S,this._root).map(E=>E.value)}}function Qr(C,S){if(C===S.value)return S;for(const E of S.children){const P=Qr(C,E);if(P)return P}return null}function _r(C,S){if(C===S.value)return[S];for(const E of S.children){const P=_r(C,E);if(P.length)return P.unshift(S),P}return[]}class Gs{constructor(S,E){this.value=S,this.children=E}toString(){return`TreeNode(${this.value})`}}function Is(C){const S={};return C&&C.children.forEach(E=>S[E.value.outlet]=E),S}class Cs extends Ds{constructor(S,E){super(S),this.snapshot=E,Qo(this,S)}toString(){return this.snapshot.toString()}}function js(C,S){const E=function Pa(C,S){const ee=new go([],{},{},"",{},gt,S,null,C.root,-1,{});return new Zo("",new Gs(ee,[]))}(C,S),P=new ve.X([new br("",{})]),V=new ve.X({}),K=new ve.X({}),ee=new ve.X({}),Me=new ve.X(""),vt=new Ts(P,V,ee,Me,K,gt,S,E.root);return vt.snapshot=E.root,new Cs(new Gs(vt,[]),E)}class Ts{constructor(S,E,P,V,K,ee,Me,vt){this.url=S,this.params=E,this.queryParams=P,this.fragment=V,this.data=K,this.outlet=ee,this.component=Me,this.title=this.data?.pipe((0,Qe.U)(Zt=>Zt[yn]))??(0,h.of)(void 0),this._futureSnapshot=vt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(S=>jn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(S=>jn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hs(C,S="emptyOnly"){const E=C.pathFromRoot;let P=0;if("always"!==S)for(P=E.length-1;P>=1;){const V=E[P],K=E[P-1];if(V.routeConfig&&""===V.routeConfig.path)P--;else{if(K.component)break;P--}}return function Yo(C){return C.reduce((S,E)=>({params:{...S.params,...E.params},data:{...S.data,...E.data},resolve:{...E.data,...S.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(P))}class go{get title(){return this.data?.[yn]}constructor(S,E,P,V,K,ee,Me,vt,Zt,Kt,Kn){this.url=S,this.params=E,this.queryParams=P,this.fragment=V,this.data=K,this.outlet=ee,this.component=Me,this.routeConfig=vt,this._urlSegment=Zt,this._lastPathIndex=Kt,this._resolve=Kn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zo extends Ds{constructor(S,E){super(E),this.url=S,Qo(this,E)}toString(){return Ao(this._root)}}function Qo(C,S){S.value._routerState=C,S.children.forEach(E=>Qo(C,E))}function Ao(C){const S=C.children.length>0?` { ${C.children.map(Ao).join(", ")} } `:"";return`${C.value}${S}`}function Ss(C){if(C.snapshot){const S=C.snapshot,E=C._futureSnapshot;C.snapshot=E,pn(S.queryParams,E.queryParams)||C.queryParams.next(E.queryParams),S.fragment!==E.fragment&&C.fragment.next(E.fragment),pn(S.params,E.params)||C.params.next(E.params),function Dr(C,S){if(C.length!==S.length)return!1;for(let E=0;E<C.length;++E)if(!pn(C[E],S[E]))return!1;return!0}(S.url,E.url)||C.url.next(E.url),pn(S.data,E.data)||C.data.next(E.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function ya(C,S){const E=pn(C.params,S.params)&&function Ir(C,S){return Jn(C,S)&&C.every((E,P)=>pn(E.parameters,S[P].parameters))}(C.url,S.url);return E&&!(!C.parent!=!S.parent)&&(!C.parent||ya(C.parent,S.parent))}function eo(C,S,E){if(E&&C.shouldReuseRoute(S.value,E.value.snapshot)){const P=E.value;P._futureSnapshot=S.value;const V=function Zu(C,S,E){return S.children.map(P=>{for(const V of E.children)if(C.shouldReuseRoute(P.value,V.value.snapshot))return eo(C,P,V);return eo(C,P)})}(C,S,E);return new Gs(P,V)}{if(C.shouldAttach(S.value)){const K=C.retrieve(S.value);if(null!==K){const ee=K.route;return ee.value._futureSnapshot=S.value,ee.children=S.children.map(Me=>eo(C,Me)),ee}}const P=function xa(C){return new Ts(new ve.X(C.url),new ve.X(C.params),new ve.X(C.queryParams),new ve.X(C.fragment),new ve.X(C.data),C.outlet,C.component,C)}(S.value),V=S.children.map(K=>eo(C,K));return new Gs(P,V)}}const ls="ngNavigationCancelingError";function mo(C,S){const{redirectTo:E,navigationBehaviorOptions:P}=Bt(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,V=to(!1,0,S);return V.url=E,V.navigationBehaviorOptions=P,V}function to(C,S,E){const P=new Error("NavigationCancelingError: "+(C||""));return P[ls]=!0,P.cancellationCode=S,E&&(P.url=E),P}function Oo(C){return va(C)&&Bt(C.url)}function va(C){return C&&C[ls]}class wl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Hr,this.attachRef=null}}let Hr=(()=>{class C{constructor(){this.contexts=new Map}onChildOutletCreated(E,P){const V=this.getOrCreateContext(E);V.outlet=P,this.contexts.set(E,V)}onChildOutletDestroyed(E){const P=this.getContext(E);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let P=this.getContext(E);return P||(P=new wl,this.contexts.set(E,P)),P}getContext(E){return this.contexts.get(E)||null}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Ui=!1;let $s=(()=>{class C{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.parentContexts=(0,T.f3M)(Hr),this.location=(0,T.f3M)(T.s_b),this.changeDetector=(0,T.f3M)(T.sBO),this.environmentInjector=(0,T.f3M)(T.lqb)}ngOnChanges(E){if(E.name){const{firstChange:P,previousValue:V}=E.name;if(P)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(E){return this.parentContexts.getContext(E)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const E=this.parentContexts.getContext(this.name);E?.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.vHH(4012,Ui);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.vHH(4012,Ui);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.vHH(4012,Ui);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,P){this.activated=E,this._activatedRoute=P,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,P){if(this.isActivated)throw new T.vHH(4013,Ui);this._activatedRoute=E;const V=this.location,ee=E.snapshot.component,Me=this.parentContexts.getOrCreateContext(this.name).children,vt=new no(E,Me,V.injector);if(P&&function ka(C){return!!C.resolveComponentFactory}(P)){const Zt=P.resolveComponentFactory(ee);this.activated=V.createComponent(Zt,V.length,vt)}else this.activated=V.createComponent(ee,{index:V.length,injector:vt,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275dir=T.lG2({type:C,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.TTD]}),C})();class no{constructor(S,E,P){this.route=S,this.childContexts=E,this.parent=P}get(S,E){return S===Ts?this.route:S===Hr?this.childContexts:this.parent.get(S,E)}}let zs=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275cmp=T.Xpm({type:C,selectors:[["ng-component"]],standalone:!0,features:[T.jDz],decls:1,vars:0,template:function(E,P){1&E&&T._UZ(0,"router-outlet")},dependencies:[$s],encapsulation:2}),C})();function Fa(C,S){return C.providers&&!C._injector&&(C._injector=(0,T.MMx)(C.providers,S,`Route: ${C.path}`)),C._injector??S}function Nr(C){const S=C.children&&C.children.map(Nr),E=S?{...C,children:S}:{...C};return!E.component&&!E.loadComponent&&(S||E.loadChildren)&&E.outlet&&E.outlet!==gt&&(E.component=zs),E}function Bi(C){return C.outlet||gt}function Jo(C,S){const E=C.filter(P=>Bi(P)===S);return E.push(...C.filter(P=>Bi(P)!==S)),E}function gi(C){if(!C)return null;if(C.routeConfig?._injector)return C.routeConfig._injector;for(let S=C.parent;S;S=S.parent){const E=S.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class il{constructor(S,E,P,V){this.routeReuseStrategy=S,this.futureState=E,this.currState=P,this.forwardEvent=V}activate(S){const E=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,P,S),Ss(this.futureState.root),this.activateChildRoutes(E,P,S)}deactivateChildRoutes(S,E,P){const V=Is(E);S.children.forEach(K=>{const ee=K.value.outlet;this.deactivateRoutes(K,V[ee],P),delete V[ee]}),en(V,(K,ee)=>{this.deactivateRouteAndItsChildren(K,P)})}deactivateRoutes(S,E,P){const V=S.value,K=E?E.value:null;if(V===K)if(V.component){const ee=P.getContext(V.outlet);ee&&this.deactivateChildRoutes(S,E,ee.children)}else this.deactivateChildRoutes(S,E,P);else K&&this.deactivateRouteAndItsChildren(E,P)}deactivateRouteAndItsChildren(S,E){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,E):this.deactivateRouteAndOutlet(S,E)}detachAndStoreRouteSubtree(S,E){const P=E.getContext(S.value.outlet),V=P&&S.value.component?P.children:E,K=Is(S);for(const ee of Object.keys(K))this.deactivateRouteAndItsChildren(K[ee],V);if(P&&P.outlet){const ee=P.outlet.detach(),Me=P.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:ee,route:S,contexts:Me})}}deactivateRouteAndOutlet(S,E){const P=E.getContext(S.value.outlet),V=P&&S.value.component?P.children:E,K=Is(S);for(const ee of Object.keys(K))this.deactivateRouteAndItsChildren(K[ee],V);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(S,E,P){const V=Is(E);S.children.forEach(K=>{this.activateRoutes(K,V[K.value.outlet],P),this.forwardEvent(new Ve(K.value.snapshot))}),S.children.length&&this.forwardEvent(new Re(S.value.snapshot))}activateRoutes(S,E,P){const V=S.value,K=E?E.value:null;if(Ss(V),V===K)if(V.component){const ee=P.getOrCreateContext(V.outlet);this.activateChildRoutes(S,E,ee.children)}else this.activateChildRoutes(S,E,P);else if(V.component){const ee=P.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Me=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ee.children.onOutletReAttached(Me.contexts),ee.attachRef=Me.componentRef,ee.route=Me.route.value,ee.outlet&&ee.outlet.attach(Me.componentRef,Me.route.value),Ss(Me.route.value),this.activateChildRoutes(S,null,ee.children)}else{const Me=gi(V.snapshot),vt=Me?.get(T._Vd)??null;ee.attachRef=null,ee.route=V,ee.resolver=vt,ee.injector=Me,ee.outlet&&ee.outlet.activateWith(V,ee.injector),this.activateChildRoutes(S,null,ee.children)}}else this.activateChildRoutes(S,null,P)}}class Ns{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class ui{constructor(S,E){this.component=S,this.route=E}}function Ba(C,S,E){const P=C._root;return Yi(P,S?S._root:null,E,[P.value])}function ro(C,S){const E=Symbol(),P=S.get(C,E);return P===E?"function"!=typeof C||(0,T.Z0I)(C)?S.get(C):C:P}function Yi(C,S,E,P,V={canDeactivateChecks:[],canActivateChecks:[]}){const K=Is(S);return C.children.forEach(ee=>{(function Ga(C,S,E,P,V={canDeactivateChecks:[],canActivateChecks:[]}){const K=C.value,ee=S?S.value:null,Me=E?E.getContext(C.value.outlet):null;if(ee&&K.routeConfig===ee.routeConfig){const vt=function El(C,S,E){if("function"==typeof E)return E(C,S);switch(E){case"pathParamsChange":return!Jn(C.url,S.url);case"pathParamsOrQueryParamsChange":return!Jn(C.url,S.url)||!pn(C.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ya(C,S)||!pn(C.queryParams,S.queryParams);default:return!ya(C,S)}}(ee,K,K.routeConfig.runGuardsAndResolvers);vt?V.canActivateChecks.push(new Ns(P)):(K.data=ee.data,K._resolvedData=ee._resolvedData),Yi(C,S,K.component?Me?Me.children:null:E,P,V),vt&&Me&&Me.outlet&&Me.outlet.isActivated&&V.canDeactivateChecks.push(new ui(Me.outlet.component,ee))}else ee&&Tn(S,Me,V),V.canActivateChecks.push(new Ns(P)),Yi(C,null,K.component?Me?Me.children:null:E,P,V)})(ee,K[ee.value.outlet],E,P.concat([ee.value]),V),delete K[ee.value.outlet]}),en(K,(ee,Me)=>Tn(ee,E.getContext(Me),V)),V}function Tn(C,S,E){const P=Is(C),V=C.value;en(P,(K,ee)=>{Tn(K,V.component?S?S.children.getContext(ee):null:S,E)}),E.canDeactivateChecks.push(new ui(V.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,V))}function No(C){return"function"==typeof C}function rr(C){return C instanceof Se.K||"EmptyError"===C?.name}const ba=Symbol("INITIAL_VALUE");function ta(){return(0,Ye.w)(C=>(0,Te.a)(C.map(S=>S.pipe((0,Et.q)(1),(0,Ne.O)(ba)))).pipe((0,Qe.U)(S=>{for(const E of S)if(!0!==E){if(E===ba)return ba;if(!1===E||E instanceof nr)return E}return!0}),(0,Ie.h)(S=>S!==ba),(0,Et.q)(1)))}function $r(C){return(0,de.z)((0,qt.b)(S=>{if(Bt(S))throw mo(0,S)}),(0,Qe.U)(S=>!0===S))}const ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Po(C,S,E,P,V){const K=Qi(C,S,E);return K.matched?function Vi(C,S,E,P){const V=S.canMatch;if(!V||0===V.length)return(0,h.of)(!0);const K=V.map(ee=>{const Me=ro(ee,C);return An(function ja(C){return C&&No(C.canMatch)}(Me)?Me.canMatch(S,E):C.runInContext(()=>Me(S,E)))});return(0,h.of)(K).pipe(ta(),$r())}(P=Fa(S,P),S,E).pipe((0,Qe.U)(ee=>!0===ee?K:{...ra})):(0,h.of)(K)}function Qi(C,S,E){if(""===S.path)return"full"===S.pathMatch&&(C.hasChildren()||E.length>0)?{...ra}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const V=(S.matcher||Hn)(E,C,S);if(!V)return{...ra};const K={};en(V.posParams,(Me,vt)=>{K[vt]=Me.path});const ee=V.consumed.length>0?{...K,...V.consumed[V.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:V.consumed,remainingSegments:E.slice(V.consumed.length),parameters:ee,positionalParamSegments:V.posParams??{}}}function ia(C,S,E,P){if(E.length>0&&function sa(C,S,E){return E.some(P=>Ws(C,S,P)&&Bi(P)!==gt)}(C,E,P)){const K=new cn(S,function Qu(C,S,E,P){const V={};V[gt]=P,P._sourceSegment=C,P._segmentIndexShift=S.length;for(const K of E)if(""===K.path&&Bi(K)!==gt){const ee=new cn([],{});ee._sourceSegment=C,ee._segmentIndexShift=S.length,V[Bi(K)]=ee}return V}(C,S,P,new cn(E,C.children)));return K._sourceSegment=C,K._segmentIndexShift=S.length,{segmentGroup:K,slicedSegments:[]}}if(0===E.length&&function yo(C,S,E){return E.some(P=>Ws(C,S,P))}(C,E,P)){const K=new cn(C.segments,function xo(C,S,E,P,V){const K={};for(const ee of P)if(Ws(C,E,ee)&&!V[Bi(ee)]){const Me=new cn([],{});Me._sourceSegment=C,Me._segmentIndexShift=S.length,K[Bi(ee)]=Me}return{...V,...K}}(C,S,E,P,C.children));return K._sourceSegment=C,K._segmentIndexShift=S.length,{segmentGroup:K,slicedSegments:E}}const V=new cn(C.segments,C.children);return V._sourceSegment=C,V._segmentIndexShift=S.length,{segmentGroup:V,slicedSegments:E}}function Ws(C,S,E){return(!(C.hasChildren()||S.length>0)||"full"!==E.pathMatch)&&""===E.path}function Tl(C,S,E,P){return!!(Bi(C)===P||P!==gt&&Ws(S,E,C))&&("**"===C.path||Qi(S,C,E).matched)}function oa(C,S,E){return 0===S.length&&!C.children[E]}const ol=!1;class aa{constructor(S){this.segmentGroup=S||null}}class al{constructor(S){this.urlTree=S}}function ll(C){return et(new aa(C))}function Sl(C){return et(new al(C))}class ql{constructor(S,E,P,V,K){this.injector=S,this.configLoader=E,this.urlSerializer=P,this.urlTree=V,this.config=K,this.allowRedirects=!0}apply(){const S=ia(this.urlTree.root,[],[],this.config).segmentGroup,E=new cn(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,E,gt).pipe((0,Qe.U)(K=>this.createUrlTree(mt(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pt(K=>{if(K instanceof al)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof aa?this.noMatchError(K):K}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,gt).pipe((0,Qe.U)(V=>this.createUrlTree(mt(V),S.queryParams,S.fragment))).pipe(Pt(V=>{throw V instanceof aa?this.noMatchError(V):V}))}noMatchError(S){return new T.vHH(4002,ol)}createUrlTree(S,E,P){const V=Xe(S);return new nr(V,E,P)}expandSegmentGroup(S,E,P,V){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(S,E,P).pipe((0,Qe.U)(K=>new cn([],K))):this.expandSegment(S,P,E,P.segments,V,!0)}expandChildren(S,E,P){const V=[];for(const K of Object.keys(P.children))"primary"===K?V.unshift(K):V.push(K);return(0,Y.D)(V).pipe(ft(K=>{const ee=P.children[K],Me=Jo(E,K);return this.expandSegmentGroup(S,Me,ee,K).pipe((0,Qe.U)(vt=>({segment:vt,outlet:K})))}),(0,Le.R)((K,ee)=>(K[ee.outlet]=ee.segment,K),{}),st())}expandSegment(S,E,P,V,K,ee){return(0,Y.D)(P).pipe(ft(Me=>this.expandSegmentAgainstRoute(S,E,P,Me,V,K,ee).pipe(Pt(Zt=>{if(Zt instanceof aa)return(0,h.of)(null);throw Zt}))),(0,it.P)(Me=>!!Me),Pt((Me,vt)=>{if(rr(Me))return oa(E,V,K)?(0,h.of)(new cn([],{})):ll(E);throw Me}))}expandSegmentAgainstRoute(S,E,P,V,K,ee,Me){return Tl(V,E,K,ee)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(S,E,V,K,ee):Me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,E,P,V,K,ee):ll(E):ll(E)}expandSegmentAgainstRouteUsingRedirect(S,E,P,V,K,ee){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,P,V,ee):this.expandRegularSegmentAgainstRouteUsingRedirect(S,E,P,V,K,ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,E,P,V){const K=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?Sl(K):this.lineralizeSegments(P,K).pipe((0,tt.z)(ee=>{const Me=new cn(ee,{});return this.expandSegment(S,Me,E,ee,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,E,P,V,K,ee){const{matched:Me,consumedSegments:vt,remainingSegments:Zt,positionalParamSegments:Kt}=Qi(E,V,K);if(!Me)return ll(E);const Kn=this.applyRedirectCommands(vt,V.redirectTo,Kt);return V.redirectTo.startsWith("/")?Sl(Kn):this.lineralizeSegments(V,Kn).pipe((0,tt.z)(oi=>this.expandSegment(S,E,P,oi.concat(Zt),ee,!1)))}matchSegmentAgainstRoute(S,E,P,V,K){return"**"===P.path?(S=Fa(P,S),P.loadChildren?(P._loadedRoutes?(0,h.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(S,P)).pipe((0,Qe.U)(Me=>(P._loadedRoutes=Me.routes,P._loadedInjector=Me.injector,new cn(V,{})))):(0,h.of)(new cn(V,{}))):Po(E,P,V,S).pipe((0,Ye.w)(({matched:ee,consumedSegments:Me,remainingSegments:vt})=>ee?this.getChildConfig(S=P._injector??S,P,V).pipe((0,tt.z)(Kt=>{const Kn=Kt.injector??S,oi=Kt.routes,{segmentGroup:yi,slicedSegments:Ks}=ia(E,Me,vt,oi),qs=new cn(yi.segments,yi.children);if(0===Ks.length&&qs.hasChildren())return this.expandChildren(Kn,oi,qs).pipe((0,Qe.U)(Uo=>new cn(Me,Uo)));if(0===oi.length&&0===Ks.length)return(0,h.of)(new cn(Me,{}));const ho=Bi(P)===K;return this.expandSegment(Kn,qs,oi,Ks,ho?gt:K,!0).pipe((0,Qe.U)(Ia=>new cn(Me.concat(Ia.segments),Ia.children)))})):ll(E)))}getChildConfig(S,E,P){return E.children?(0,h.of)({routes:E.children,injector:S}):E.loadChildren?void 0!==E._loadedRoutes?(0,h.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function Cl(C,S,E,P){const V=S.canLoad;if(void 0===V||0===V.length)return(0,h.of)(!0);const K=V.map(ee=>{const Me=ro(ee,C);return An(function Dl(C){return C&&No(C.canLoad)}(Me)?Me.canLoad(S,E):C.runInContext(()=>Me(S,E)))});return(0,h.of)(K).pipe(ta(),$r())}(S,E,P).pipe((0,tt.z)(V=>V?this.configLoader.loadChildren(S,E).pipe((0,qt.b)(K=>{E._loadedRoutes=K.routes,E._loadedInjector=K.injector})):function Mc(C){return et(to(ol,3))}())):(0,h.of)({routes:[],injector:S})}lineralizeSegments(S,E){let P=[],V=E.root;for(;;){if(P=P.concat(V.segments),0===V.numberOfChildren)return(0,h.of)(P);if(V.numberOfChildren>1||!V.children[gt])return S.redirectTo,et(new T.vHH(4e3,ol));V=V.children[gt]}}applyRedirectCommands(S,E,P){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),S,P)}applyRedirectCreateUrlTree(S,E,P,V){const K=this.createSegmentGroup(S,E.root,P,V);return new nr(K,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(S,E){const P={};return en(S,(V,K)=>{if("string"==typeof V&&V.startsWith(":")){const Me=V.substring(1);P[K]=E[Me]}else P[K]=V}),P}createSegmentGroup(S,E,P,V){const K=this.createSegments(S,E.segments,P,V);let ee={};return en(E.children,(Me,vt)=>{ee[vt]=this.createSegmentGroup(S,Me,P,V)}),new cn(K,ee)}createSegments(S,E,P,V){return E.map(K=>K.path.startsWith(":")?this.findPosParam(S,K,V):this.findOrReturn(K,P))}findPosParam(S,E,P){const V=P[E.path.substring(1)];if(!V)throw new T.vHH(4001,ol);return V}findOrReturn(S,E){let P=0;for(const V of E){if(V.path===S.path)return E.splice(P),V;P++}return S}}class Jr{}class Di{constructor(S,E,P,V,K,ee,Me){this.injector=S,this.rootComponentType=E,this.config=P,this.urlTree=V,this.url=K,this.paramsInheritanceStrategy=ee,this.urlSerializer=Me}recognize(){const S=ia(this.urlTree.root,[],[],this.config.filter(E=>void 0===E.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,gt).pipe((0,Qe.U)(E=>{if(null===E)return null;const P=new go([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Gs(P,E),K=new Zo(this.url,V);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(S){const E=S.value,P=Hs(E,this.paramsInheritanceStrategy);E.params=Object.freeze(P.params),E.data=Object.freeze(P.data),S.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(S,E,P,V){return 0===P.segments.length&&P.hasChildren()?this.processChildren(S,E,P):this.processSegment(S,E,P,P.segments,V)}processChildren(S,E,P){return(0,Y.D)(Object.keys(P.children)).pipe(ft(V=>{const K=P.children[V],ee=Jo(E,V);return this.processSegmentGroup(S,ee,K,V)}),(0,Le.R)((V,K)=>V&&K?(V.push(...K),V):null),function Mt(C,S=!1){return(0,Nt.e)((E,P)=>{let V=0;E.subscribe((0,Je.x)(P,K=>{const ee=C(K,V++);(ee||S)&&P.next(K),!ee&&P.complete()}))})}(V=>null!==V),(0,nt.d)(null),st(),(0,Qe.U)(V=>{if(null===V)return null;const K=Ql(V);return function Rc(C){C.sort((S,E)=>S.value.outlet===gt?-1:E.value.outlet===gt?1:S.value.outlet.localeCompare(E.value.outlet))}(K),K}))}processSegment(S,E,P,V,K){return(0,Y.D)(E).pipe(ft(ee=>this.processSegmentAgainstRoute(ee._injector??S,ee,P,V,K)),(0,it.P)(ee=>!!ee),Pt(ee=>{if(rr(ee))return oa(P,V,K)?(0,h.of)([]):(0,h.of)(null);throw ee}))}processSegmentAgainstRoute(S,E,P,V,K){if(E.redirectTo||!Tl(E,P,V,K))return(0,h.of)(null);let ee;if("**"===E.path){const Me=V.length>0?qn(V).parameters:{},vt=R(P)+V.length,Zt=new go(V,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,L(E),Bi(E),E.component??E._loadedComponent??null,E,wa(P),vt,J(E));ee=(0,h.of)({snapshot:Zt,consumedSegments:[],remainingSegments:[]})}else ee=Po(P,E,V,S).pipe((0,Qe.U)(({matched:Me,consumedSegments:vt,remainingSegments:Zt,parameters:Kt})=>{if(!Me)return null;const Kn=R(P)+vt.length;return{snapshot:new go(vt,Kt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,L(E),Bi(E),E.component??E._loadedComponent??null,E,wa(P),Kn,J(E)),consumedSegments:vt,remainingSegments:Zt}}));return ee.pipe((0,Ye.w)(Me=>{if(null===Me)return(0,h.of)(null);const{snapshot:vt,consumedSegments:Zt,remainingSegments:Kt}=Me;S=E._injector??S;const Kn=E._loadedInjector??S,oi=function _d(C){return C.children?C.children:C.loadChildren?C._loadedRoutes:[]}(E),{segmentGroup:yi,slicedSegments:Ks}=ia(P,Zt,Kt,oi.filter(ho=>void 0===ho.redirectTo));if(0===Ks.length&&yi.hasChildren())return this.processChildren(Kn,oi,yi).pipe((0,Qe.U)(ho=>null===ho?null:[new Gs(vt,ho)]));if(0===oi.length&&0===Ks.length)return(0,h.of)([new Gs(vt,[])]);const qs=Bi(E)===K;return this.processSegment(Kn,oi,yi,Ks,qs?gt:K).pipe((0,Qe.U)(ho=>null===ho?null:[new Gs(vt,ho)]))}))}}function Zl(C){const S=C.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function Ql(C){const S=[],E=new Set;for(const P of C){if(!Zl(P)){S.push(P);continue}const V=S.find(K=>P.value.routeConfig===K.value.routeConfig);void 0!==V?(V.children.push(...P.children),E.add(V)):S.push(P)}for(const P of E){const V=Ql(P.children);S.push(new Gs(P.value,V))}return S.filter(P=>!E.has(P))}function wa(C){let S=C;for(;S._sourceSegment;)S=S._sourceSegment;return S}function R(C){let S=C,E=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,E+=S._segmentIndexShift??0;return E-1}function L(C){return C.data||{}}function J(C){return C.resolve||{}}function vn(C){return"string"==typeof C.title||null===C.title}function Vn(C){return(0,Ye.w)(S=>{const E=C(S);return E?(0,Y.D)(E).pipe((0,Qe.U)(()=>S)):(0,h.of)(S)})}const Ct=new T.OlP("ROUTES");let xt=(()=>{class C{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.f3M)(T.Sil)}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,h.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const P=An(E.loadComponent()).pipe((0,Qe.U)(kt),(0,qt.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=K}),tn(()=>{this.componentLoaders.delete(E)})),V=new fe(P,()=>new ht.x).pipe(ct());return this.componentLoaders.set(E,V),V}loadChildren(E,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,h.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const K=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Qe.U)(Me=>{this.onLoadEndListener&&this.onLoadEndListener(P);let vt,Zt,Kt=!1;Array.isArray(Me)?Zt=Me:(vt=Me.create(E).injector,Zt=Cn(vt.get(Ct,[],T.XFs.Self|T.XFs.Optional)));return{routes:Zt.map(Nr),injector:vt}}),tn(()=>{this.childrenLoaders.delete(P)})),ee=new fe(K,()=>new ht.x).pipe(ct());return this.childrenLoaders.set(P,ee),ee}loadModuleFactoryOrRoutes(E){return An(E()).pipe((0,Qe.U)(kt),(0,tt.z)(P=>P instanceof T.YKP||Array.isArray(P)?(0,h.of)(P):(0,Y.D)(this.compiler.compileModuleAsync(P))))}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function kt(C){return function _i(C){return C&&"object"==typeof C&&"default"in C}(C)?C.default:C}let _t=(()=>{class C{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ht.x,this.configLoader=(0,T.f3M)(xt),this.environmentInjector=(0,T.f3M)(T.lqb),this.urlSerializer=(0,T.f3M)(jr),this.rootContexts=(0,T.f3M)(Hr),this.navigationId=0,this.afterPreactivation=()=>(0,h.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new bi(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new Zr(V))}complete(){this.transitions?.complete()}handleNavigationRequest(E){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...E,id:P})}setupNavigations(E){return this.transitions=new ve.X({id:0,targetPageId:0,currentUrlTree:E.currentUrlTree,currentRawUrl:E.currentUrlTree,extractedUrl:E.urlHandlingStrategy.extract(E.currentUrlTree),urlAfterRedirects:E.urlHandlingStrategy.extract(E.currentUrlTree),rawUrl:E.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lr,restoredState:null,currentSnapshot:E.routerState.snapshot,targetSnapshot:null,currentRouterState:E.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ie.h)(P=>0!==P.id),(0,Qe.U)(P=>({...P,extractedUrl:E.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ye.w)(P=>{let V=!1,K=!1;return(0,h.of)(P).pipe((0,qt.b)(ee=>{this.currentNavigation={id:ee.id,initialUrl:ee.rawUrl,extractedUrl:ee.extractedUrl,trigger:ee.source,extras:ee.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ye.w)(ee=>{const Me=E.browserUrlTree.toString(),vt=!E.navigated||ee.extractedUrl.toString()!==Me||Me!==E.currentUrlTree.toString();if(!vt&&"reload"!==(ee.extras.onSameUrlNavigation??E.onSameUrlNavigation)){const Kt="";return this.events.next(new Fn(ee.id,E.serializeUrl(P.rawUrl),Kt,0)),E.rawUrlTree=ee.rawUrl,ee.resolve(null),Ke.E}if(E.urlHandlingStrategy.shouldProcessUrl(ee.rawUrl))return Tr(ee.source)&&(E.browserUrlTree=ee.extractedUrl),(0,h.of)(ee).pipe((0,Ye.w)(Kt=>{const Kn=this.transitions?.getValue();return this.events.next(new si(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),Kt.source,Kt.restoredState)),Kn!==this.transitions?.getValue()?Ke.E:Promise.resolve(Kt)}),function _u(C,S,E,P){return(0,Ye.w)(V=>function Kl(C,S,E,P,V){return new ql(C,S,E,P,V).apply()}(C,S,E,V.extractedUrl,P).pipe((0,Qe.U)(K=>({...V,urlAfterRedirects:K}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,E.config),(0,qt.b)(Kt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Kt.urlAfterRedirects},P.urlAfterRedirects=Kt.urlAfterRedirects}),function ce(C,S,E,P,V){return(0,tt.z)(K=>function Yl(C,S,E,P,V,K,ee="emptyOnly"){return new Di(C,S,E,P,V,ee,K).recognize().pipe((0,Ye.w)(Me=>null===Me?function Xr(C){return new pe.y(S=>S.error(C))}(new Jr):(0,h.of)(Me)))}(C,S,E,K.urlAfterRedirects,P.serialize(K.urlAfterRedirects),P,V).pipe((0,Qe.U)(ee=>({...K,targetSnapshot:ee}))))}(this.environmentInjector,this.rootComponentType,E.config,this.urlSerializer,E.paramsInheritanceStrategy),(0,qt.b)(Kt=>{if(P.targetSnapshot=Kt.targetSnapshot,"eager"===E.urlUpdateStrategy){if(!Kt.extras.skipLocationChange){const oi=E.urlHandlingStrategy.merge(Kt.urlAfterRedirects,Kt.rawUrl);E.setBrowserUrl(oi,Kt)}E.browserUrlTree=Kt.urlAfterRedirects}const Kn=new To(Kt.id,this.urlSerializer.serialize(Kt.extractedUrl),this.urlSerializer.serialize(Kt.urlAfterRedirects),Kt.targetSnapshot);this.events.next(Kn)}));if(vt&&E.urlHandlingStrategy.shouldProcessUrl(E.rawUrlTree)){const{id:Kt,extractedUrl:Kn,source:oi,restoredState:yi,extras:Ks}=ee,qs=new si(Kt,this.urlSerializer.serialize(Kn),oi,yi);this.events.next(qs);const ho=js(Kn,this.rootComponentType).snapshot;return P={...ee,targetSnapshot:ho,urlAfterRedirects:Kn,extras:{...Ks,skipLocationChange:!1,replaceUrl:!1}},(0,h.of)(P)}{const Kt="";return this.events.next(new Fn(ee.id,E.serializeUrl(P.extractedUrl),Kt,1)),E.rawUrlTree=ee.rawUrl,ee.resolve(null),Ke.E}}),(0,qt.b)(ee=>{const Me=new qo(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(Me)}),(0,Qe.U)(ee=>P={...ee,guards:Ba(ee.targetSnapshot,ee.currentSnapshot,this.rootContexts)}),function Ei(C,S){return(0,tt.z)(E=>{const{targetSnapshot:P,currentSnapshot:V,guards:{canActivateChecks:K,canDeactivateChecks:ee}}=E;return 0===ee.length&&0===K.length?(0,h.of)({...E,guardsResult:!0}):function Il(C,S,E,P){return(0,Y.D)(C).pipe((0,tt.z)(V=>function Ha(C,S,E,P,V){const K=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,h.of)(!0);const ee=K.map(Me=>{const vt=gi(S)??V,Zt=ro(Me,vt);return An(function Mo(C){return C&&No(C.canDeactivate)}(Zt)?Zt.canDeactivate(C,S,E,P):vt.runInContext(()=>Zt(C,S,E,P))).pipe((0,it.P)())});return(0,h.of)(ee).pipe(ta())}(V.component,V.route,E,S,P)),(0,it.P)(V=>!0!==V,!0))}(ee,P,V,C).pipe((0,tt.z)(Me=>Me&&function Xo(C){return"boolean"==typeof C}(Me)?function Ro(C,S,E,P){return(0,Y.D)(S).pipe(ft(V=>(0,ke.z)(function sl(C,S){return null!==C&&S&&S(new Es(C)),(0,h.of)(!0)}(V.route.parent,P),function Zi(C,S){return null!==C&&S&&S(new ye(C)),(0,h.of)(!0)}(V.route,P),function _o(C,S,E){const P=S[S.length-1],K=S.slice(0,S.length-1).reverse().map(ee=>function Va(C){const S=C.routeConfig?C.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:C,guards:S}:null}(ee)).filter(ee=>null!==ee).map(ee=>me(()=>{const Me=ee.guards.map(vt=>{const Zt=gi(ee.node)??E,Kt=ro(vt,Zt);return An(function mu(C){return C&&No(C.canActivateChild)}(Kt)?Kt.canActivateChild(P,C):Zt.runInContext(()=>Kt(P,C))).pipe((0,it.P)())});return(0,h.of)(Me).pipe(ta())}));return(0,h.of)(K).pipe(ta())}(C,V.path,E),function na(C,S,E){const P=S.routeConfig?S.routeConfig.canActivate:null;if(!P||0===P.length)return(0,h.of)(!0);const V=P.map(K=>me(()=>{const ee=gi(S)??E,Me=ro(K,ee);return An(function ea(C){return C&&No(C.canActivate)}(Me)?Me.canActivate(S,C):ee.runInContext(()=>Me(S,C))).pipe((0,it.P)())}));return(0,h.of)(V).pipe(ta())}(C,V.route,E))),(0,it.P)(V=>!0!==V,!0))}(P,K,C,S):(0,h.of)(Me)),(0,Qe.U)(Me=>({...E,guardsResult:Me})))})}(this.environmentInjector,ee=>this.events.next(ee)),(0,qt.b)(ee=>{if(P.guardsResult=ee.guardsResult,Bt(ee.guardsResult))throw mo(0,ee.guardsResult);const Me=new So(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot,!!ee.guardsResult);this.events.next(Me)}),(0,Ie.h)(ee=>!!ee.guardsResult||(E.restoreHistory(ee),this.cancelNavigationTransition(ee,"",3),!1)),Vn(ee=>{if(ee.guards.canActivateChecks.length)return(0,h.of)(ee).pipe((0,qt.b)(Me=>{const vt=new vi(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(vt)}),(0,Ye.w)(Me=>{let vt=!1;return(0,h.of)(Me).pipe(function Ue(C,S){return(0,tt.z)(E=>{const{targetSnapshot:P,guards:{canActivateChecks:V}}=E;if(!V.length)return(0,h.of)(E);let K=0;return(0,Y.D)(V).pipe(ft(ee=>function wt(C,S,E,P){const V=C.routeConfig,K=C._resolve;return void 0!==V?.title&&!vn(V)&&(K[yn]=V.title),function ln(C,S,E,P){const V=function or(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}(C);if(0===V.length)return(0,h.of)({});const K={};return(0,Y.D)(V).pipe((0,tt.z)(ee=>function ot(C,S,E,P){const V=gi(S)??P,K=ro(C,V);return An(K.resolve?K.resolve(S,E):V.runInContext(()=>K(S,E)))}(C[ee],S,E,P).pipe((0,it.P)(),(0,qt.b)(Me=>{K[ee]=Me}))),rt(1),(0,It.h)(K),Pt(ee=>rr(ee)?Ke.E:et(ee)))}(K,C,S,P).pipe((0,Qe.U)(ee=>(C._resolvedData=ee,C.data=Hs(C,E).resolve,V&&vn(V)&&(C.data[yn]=V.title),null)))}(ee.route,P,C,S)),(0,qt.b)(()=>K++),rt(1),(0,tt.z)(ee=>K===V.length?(0,h.of)(E):Ke.E))})}(E.paramsInheritanceStrategy,this.environmentInjector),(0,qt.b)({next:()=>vt=!0,complete:()=>{vt||(E.restoreHistory(Me),this.cancelNavigationTransition(Me,"",2))}}))}),(0,qt.b)(Me=>{const vt=new Xs(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(vt)}))}),Vn(ee=>{const Me=vt=>{const Zt=[];vt.routeConfig?.loadComponent&&!vt.routeConfig._loadedComponent&&Zt.push(this.configLoader.loadComponent(vt.routeConfig).pipe((0,qt.b)(Kt=>{vt.component=Kt}),(0,Qe.U)(()=>{})));for(const Kt of vt.children)Zt.push(...Me(Kt));return Zt};return(0,Te.a)(Me(ee.targetSnapshot.root)).pipe((0,nt.d)(),(0,Et.q)(1))}),Vn(()=>this.afterPreactivation()),(0,Qe.U)(ee=>{const Me=function As(C,S,E){const P=eo(C,S._root,E?E._root:void 0);return new Cs(P,S)}(E.routeReuseStrategy,ee.targetSnapshot,ee.currentRouterState);return P={...ee,targetRouterState:Me}}),(0,qt.b)(ee=>{E.currentUrlTree=ee.urlAfterRedirects,E.rawUrlTree=E.urlHandlingStrategy.merge(ee.urlAfterRedirects,ee.rawUrl),E.routerState=ee.targetRouterState,"deferred"===E.urlUpdateStrategy&&(ee.extras.skipLocationChange||E.setBrowserUrl(E.rawUrlTree,ee),E.browserUrlTree=ee.urlAfterRedirects)}),((C,S,E)=>(0,Qe.U)(P=>(new il(S,P.targetRouterState,P.currentRouterState,E).activate(C),P)))(this.rootContexts,E.routeReuseStrategy,ee=>this.events.next(ee)),(0,qt.b)({next:ee=>{V=!0,this.lastSuccessfulNavigation=this.currentNavigation,E.navigated=!0,this.events.next(new pi(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(E.currentUrlTree))),E.titleStrategy?.updateTitle(ee.targetRouterState.snapshot),ee.resolve(!0)},complete:()=>{V=!0}}),tn(()=>{V||K||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Pt(ee=>{if(K=!0,va(ee)){Oo(ee)||(E.navigated=!0,E.restoreHistory(P,!0));const Me=new Ra(P.id,this.urlSerializer.serialize(P.extractedUrl),ee.message,ee.cancellationCode);if(this.events.next(Me),Oo(ee)){const vt=E.urlHandlingStrategy.merge(ee.url,E.rawUrlTree),Zt={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===E.urlUpdateStrategy||Tr(P.source)};E.scheduleNavigation(vt,Lr,null,Zt,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{E.restoreHistory(P,!0);const Me=new ws(P.id,this.urlSerializer.serialize(P.extractedUrl),ee,P.targetSnapshot??void 0);this.events.next(Me);try{P.resolve(E.errorHandler(ee))}catch(vt){P.reject(vt)}}return Ke.E}))}))}cancelNavigationTransition(E,P,V){const K=new Ra(E.id,this.urlSerializer.serialize(E.extractedUrl),P,V);this.events.next(K),E.resolve(!1)}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Tr(C){return C!==Lr}let vo=(()=>{class C{buildTitle(E){let P,V=E.root;for(;void 0!==V;)P=this.getResolvedTitleForRoute(V)??P,V=V.children.find(K=>K.outlet===gt);return P}getResolvedTitleForRoute(E){return E.data[yn]}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return(0,T.f3M)($a)},providedIn:"root"}),C})(),$a=(()=>{class C extends vo{constructor(E){super(),this.title=E}updateTitle(E){const P=this.buildTitle(E);void 0!==P&&this.title.setTitle(P)}}return C.\u0275fac=function(E){return new(E||C)(T.LFG(Wt.Dx))},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),Fo=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return(0,T.f3M)(la)},providedIn:"root"}),C})();class ul{shouldDetach(S){return!1}store(S,E){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,E){return S.routeConfig===E.routeConfig}}let la=(()=>{class C extends ul{}return C.\u0275fac=function(){let S;return function(P){return(S||(S=T.n5z(C)))(P||C)}}(),C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const ua=new T.OlP("",{providedIn:"root",factory:()=>({})});let Ju=(()=>{class C{}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:function(){return(0,T.f3M)(yu)},providedIn:"root"}),C})(),yu=(()=>{class C{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,P){return E}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ol(C){throw C}function Mn(C,S,E){return S.parse("/")}const Ea={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class C{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,T.f3M)(T.c2e),this.isNgZoneEnabled=!1,this.options=(0,T.f3M)(ua,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ol,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Mn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,T.f3M)(Ju),this.routeReuseStrategy=(0,T.f3M)(Fo),this.urlCreationStrategy=(0,T.f3M)(Ln),this.titleStrategy=(0,T.f3M)(vo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Cn((0,T.f3M)(Ct,{optional:!0})??[]),this.navigationTransitions=(0,T.f3M)(_t),this.urlSerializer=(0,T.f3M)(jr),this.location=(0,T.f3M)(lt.Ye),this.isNgZoneEnabled=(0,T.f3M)(T.R0b)instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=js(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(E=>{this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}resetRootComponentType(E){this.routerState.root.component=E,this.navigationTransitions.rootComponentType=E}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const E=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Lr,E)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const P="popstate"===E.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(E.url,P,E.state)},0)}))}navigateToSyncWithBrowser(E,P,V){const K={replaceUrl:!0},ee=V?.navigationId?V:null;if(V){const vt={...V};delete vt.navigationId,delete vt.\u0275routerPageId,0!==Object.keys(vt).length&&(K.state=vt)}const Me=this.parseUrl(E);this.scheduleNavigation(Me,P,ee,K)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(E){this.config=E.map(Nr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,P={}){const{relativeTo:V,queryParams:K,fragment:ee,queryParamsHandling:Me,preserveFragment:vt}=P,Zt=vt?this.currentUrlTree.fragment:ee;let Kt=null;switch(Me){case"merge":Kt={...this.currentUrlTree.queryParams,...K};break;case"preserve":Kt=this.currentUrlTree.queryParams;break;default:Kt=K||null}return null!==Kt&&(Kt=this.removeEmptyProps(Kt)),this.urlCreationStrategy.createUrlTree(V,this.routerState,this.currentUrlTree,E,Kt,Zt??null)}navigateByUrl(E,P={skipLocationChange:!1}){const V=Bt(E)?E:this.parseUrl(E),K=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(K,Lr,null,P)}navigate(E,P={skipLocationChange:!1}){return function fn(C){for(let S=0;S<C.length;S++){const E=C[S];if(null==E)throw new T.vHH(4008,false)}}(E),this.navigateByUrl(this.createUrlTree(E,P),P)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let P;try{P=this.urlSerializer.parse(E)}catch(V){P=this.malformedUriErrorHandler(V,this.urlSerializer,E)}return P}isActive(E,P){let V;if(V=!0===P?{...Ea}:!1===P?{...vu}:P,Bt(E))return ti(this.currentUrlTree,E,V);const K=this.parseUrl(E);return ti(this.currentUrlTree,K,V)}removeEmptyProps(E){return Object.keys(E).reduce((P,V)=>{const K=E[V];return null!=K&&(P[V]=K),P},{})}scheduleNavigation(E,P,V,K,ee){if(this.disposed)return Promise.resolve(!1);let Me,vt,Zt,Kt;return ee?(Me=ee.resolve,vt=ee.reject,Zt=ee.promise):Zt=new Promise((Kn,oi)=>{Me=Kn,vt=oi}),Kt="computed"===this.canceledNavigationResolution?V&&V.\u0275routerPageId?V.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Kt,source:P,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:E,extras:K,resolve:Me,reject:vt,promise:Zt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Zt.catch(Kn=>Promise.reject(Kn))}setBrowserUrl(E,P){const V=this.urlSerializer.serialize(E),K={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(V)||P.extras.replaceUrl?this.location.replaceState(V,"",K):this.location.go(V,"",K)}restoreHistory(E,P=!1){if("computed"===this.canceledNavigationResolution){const V=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===V?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===V&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(V)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(E,P){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:P}:{navigationId:E}}}return C.\u0275fac=function(E){return new(E||C)},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),Ai=(()=>{class C{constructor(E,P,V,K,ee,Me){this.router=E,this.route=P,this.tabIndexAttribute=V,this.renderer=K,this.el=ee,this.locationStrategy=Me,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ht.x;const vt=ee.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===vt||"area"===vt,this.isAnchorElement?this.subscription=E.events.subscribe(Zt=>{Zt instanceof pi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(E){this._preserveFragment=(0,T.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,T.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,T.D6c)(E)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(E){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",E)}ngOnChanges(E){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(E,P,V,K,ee){return!!(null===this.urlTree||this.isAnchorElement&&(0!==E||P||V||K||ee||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const E=null===this.href?null:(0,T.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",E)}applyAttributeValue(E,P){const V=this.renderer,K=this.el.nativeElement;null!==P?V.setAttribute(K,E,P):V.removeAttribute(K,E)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return C.\u0275fac=function(E){return new(E||C)(T.Y36(ir),T.Y36(Ts),T.$8M("tabindex"),T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(lt.S$))},C.\u0275dir=T.lG2({type:C,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(E,P){1&E&&T.NdJ("click",function(K){return P.onClick(K.button,K.ctrlKey,K.shiftKey,K.altKey,K.metaKey)}),2&E&&T.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[T.TTD]}),C})();class dr{}let so=(()=>{class C{constructor(E,P,V,K,ee){this.router=E,this.injector=V,this.preloadingStrategy=K,this.loader=ee}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ie.h)(E=>E instanceof pi),ft(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,P){const V=[];for(const K of P){K.providers&&!K._injector&&(K._injector=(0,T.MMx)(K.providers,E,`Route: ${K.path}`));const ee=K._injector??E,Me=K._loadedInjector??ee;K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent?V.push(this.preloadConfig(ee,K)):(K.children||K._loadedRoutes)&&V.push(this.processRoutes(Me,K.children??K._loadedRoutes))}return(0,Y.D)(V).pipe((0,jt.J)())}preloadConfig(E,P){return this.preloadingStrategy.preload(P,()=>{let V;V=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(E,P):(0,h.of)(null);const K=V.pipe((0,tt.z)(ee=>null===ee?(0,h.of)(void 0):(P._loadedRoutes=ee.routes,P._loadedInjector=ee.injector,this.processRoutes(ee.injector??E,ee.routes))));if(P.loadComponent&&!P._loadedComponent){const ee=this.loader.loadComponent(P);return(0,Y.D)([K,ee]).pipe((0,jt.J)())}return K})}}return C.\u0275fac=function(E){return new(E||C)(T.LFG(ir),T.LFG(T.Sil),T.LFG(T.lqb),T.LFG(dr),T.LFG(xt))},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Ti=new T.OlP("");let Jl=(()=>{class C{constructor(E,P,V,K,ee={}){this.urlSerializer=E,this.transitions=P,this.viewportScroller=V,this.zone=K,this.options=ee,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ee.scrollPositionRestoration=ee.scrollPositionRestoration||"disabled",ee.anchorScrolling=ee.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof pi&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof dt&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dt(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return C.\u0275fac=function(E){T.$Z()},C.\u0275prov=T.Yz7({token:C,factory:C.\u0275fac}),C})();var Ur=(()=>((Ur=Ur||{})[Ur.COMPLETE=0]="COMPLETE",Ur[Ur.FAILED=1]="FAILED",Ur[Ur.REDIRECTING=2]="REDIRECTING",Ur))();const cs=!1;function Br(C,S){return{\u0275kind:C,\u0275providers:S}}const Xl=new T.OlP("",{providedIn:"root",factory:()=>!1});function ca(){const C=(0,T.f3M)(T.zs3);return S=>{const E=C.get(T.z2F);if(S!==E.components[0])return;const P=C.get(ir),V=C.get(qe);1===C.get(Ml)&&P.initialNavigation(),C.get(lo,null,T.XFs.Optional)?.setUpPreloading(),C.get(Ti,null,T.XFs.Optional)?.init(),P.resetRootComponentType(E.componentTypes[0]),V.closed||(V.next(),V.unsubscribe())}}const qe=new T.OlP(cs?"bootstrap done indicator":"",{factory:()=>new ht.x}),Ml=new T.OlP(cs?"initial navigation":"",{providedIn:"root",factory:()=>1});function cl(){let C=[];return C=cs?[{provide:T.Xts,multi:!0,useFactory:()=>{const S=(0,T.f3M)(ir);return()=>S.events.subscribe(E=>{console.group?.(`Router Event: ${E.constructor.name}`),console.log(function Lt(C){if(!("type"in C))return`Unknown Router Event: ${C.constructor.name}`;switch(C.type){case 14:return`ActivationEnd(path: '${C.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${C.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${C.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${C.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state}, shouldActivate: ${C.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 2:return`NavigationCancel(id: ${C.id}, url: '${C.url}')`;case 16:return`NavigationSkipped(id: ${C.id}, url: '${C.url}')`;case 1:return`NavigationEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${C.id}, url: '${C.url}', error: ${C.error})`;case 0:return`NavigationStart(id: ${C.id}, url: '${C.url}')`;case 6:return`ResolveEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 5:return`ResolveStart(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 10:return`RouteConfigLoadEnd(path: ${C.route.path})`;case 9:return`RouteConfigLoadStart(path: ${C.route.path})`;case 4:return`RoutesRecognized(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 15:return`Scroll(anchor: '${C.anchor}', position: '${C.position?`${C.position[0]}, ${C.position[1]}`:null}')`}}(E)),console.log(E),console.groupEnd?.()})}}]:[],Br(1,C)}const lo=new T.OlP(cs?"router preloader":"");function Vr(C){return Br(0,[{provide:lo,useExisting:so},{provide:dr,useExisting:C}])}const hl=!1,Ms=new T.OlP(hl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Pc=[lt.Ye,{provide:jr,useClass:kn},ir,Hr,{provide:Ts,useFactory:function Nl(C){return C.routerState.root},deps:[ir]},xt,hl?{provide:Xl,useValue:!0}:[]];function Ka(){return new T.PXZ("Router",ir)}let fl=(()=>{class C{constructor(E){}static forRoot(E,P){return{ngModule:C,providers:[Pc,hl&&P?.enableTracing?cl().\u0275providers:[],{provide:Ct,multi:!0,useValue:E},{provide:Ms,useFactory:uo,deps:[[ir,new T.FiY,new T.tp0]]},{provide:ua,useValue:P||{}},P?.useHash?{provide:lt.S$,useClass:lt.Do}:{provide:lt.S$,useClass:lt.b0},{provide:Ti,useFactory:()=>{const C=(0,T.f3M)(lt.EM),S=(0,T.f3M)(T.R0b),E=(0,T.f3M)(ua),P=(0,T.f3M)(_t),V=(0,T.f3M)(jr);return E.scrollOffset&&C.setOffset(E.scrollOffset),new Jl(V,P,C,S,E)}},P?.preloadingStrategy?Vr(P.preloadingStrategy).\u0275providers:[],{provide:T.PXZ,multi:!0,useFactory:Ka},P?.initialNavigation?Pl(P):[],[{provide:Oi,useFactory:ca},{provide:T.tb,multi:!0,useExisting:Oi}]]}}static forChild(E){return{ngModule:C,providers:[{provide:Ct,multi:!0,useValue:E}]}}}return C.\u0275fac=function(E){return new(E||C)(T.LFG(Ms,8))},C.\u0275mod=T.oAB({type:C}),C.\u0275inj=T.cJS({imports:[zs]}),C})();function uo(C){if(hl&&C)throw new T.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Pl(C){return["disabled"===C.initialNavigation?Br(3,[{provide:T.ip1,multi:!0,useFactory:()=>{const S=(0,T.f3M)(ir);return()=>{S.setUpLocationChangeListener()}}},{provide:Ml,useValue:2}]).\u0275providers:[],"enabledBlocking"===C.initialNavigation?Br(2,[{provide:Ml,useValue:0},{provide:T.ip1,multi:!0,deps:[T.zs3],useFactory:S=>{const E=S.get(lt.V_,Promise.resolve());return()=>E.then(()=>new Promise(P=>{const V=S.get(ir),K=S.get(qe);(function Da(C,S){C.events.pipe((0,Ie.h)(E=>E instanceof pi||E instanceof Ra||E instanceof ws||E instanceof Fn),(0,Qe.U)(E=>E instanceof pi||E instanceof Fn?Ur.COMPLETE:E instanceof Ra&&(0===E.code||1===E.code)?Ur.REDIRECTING:Ur.FAILED),(0,Ie.h)(E=>E!==Ur.REDIRECTING),(0,Et.q)(1)).subscribe(()=>{S()})})(V,()=>{P(!0)}),S.get(_t).afterPreactivation=()=>(P(!0),K.closed?(0,h.of)(void 0):K),V.initialNavigation()}))}}]).\u0275providers:[]]}const Oi=new T.OlP(hl?"Router Initializer":"")},3942:(zt,We,j)=>{j.d(We,{Z:()=>at});var T=j(2090),Y=j(4859),h=j(9681),ve=j(1877);class Se{constructor(Je,ct){this._delegate=Je,this.firebase=ct,(0,h._addComponent)(Je,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,h.deleteApp)(this._delegate)))}_getService(Je,ct=h._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(Je);return!ht.isInitialized()&&"EXPLICIT"===(null===(fe=ht.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:ct})}_removeServiceInstance(Je,ct=h._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(ct)}_addComponent(Je){(0,h._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,h._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ke=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),me=function Fe(){const Nt=function pe(Nt){const Je={},ct={__esModule:!0,initializeApp:function lt(Ne,Ie={}){const tt=h.initializeApp(Ne,Ie);if((0,T.r3)(Je,tt.name))return Je[tt.name];const it=new Nt(tt,ct);return Je[tt.name]=it,it},app:ht,registerVersion:h.registerVersion,setLogLevel:h.setLogLevel,onLog:h.onLog,apps:null,SDK_VERSION:h.SDK_VERSION,INTERNAL:{registerComponent:function Ye(Ne){const Ie=Ne.name,tt=Ie.replace("-compat","");if(h._registerComponent(Ne)&&"PUBLIC"===Ne.type){const it=(ft=ht())=>{if("function"!=typeof ft[tt])throw ke.create("invalid-app-argument",{appName:Ie});return ft[tt]()};void 0!==Ne.serviceProps&&(0,T.ZB)(it,Ne.serviceProps),ct[tt]=it,Nt.prototype[tt]=function(...ft){return this._getService.bind(this,Ie).apply(this,Ne.multipleInstances?ft:[])}}return"PUBLIC"===Ne.type?ct[tt]:null},removeApp:function fe(Ne){delete Je[Ne]},useAsService:function Et(Ne,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:h}};function ht(Ne){if(!(0,T.r3)(Je,Ne=Ne||h._DEFAULT_ENTRY_NAME))throw ke.create("no-app",{appName:Ne});return Je[Ne]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function Qe(){return Object.keys(Je).map(Ne=>Je[Ne])}}),ht.App=Nt,ct}(Se);return Nt.INTERNAL=Object.assign(Object.assign({},Nt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Je(ct){(0,T.ZB)(Nt,ct)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),Nt}(),de=new ve.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Nt=self.firebase.SDK_VERSION;Nt&&Nt.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=me;!function Ke(Nt){(0,h.registerVersion)("@firebase/app-compat","0.2.5",Nt)}()},9681:(zt,We,j)=>{j.r(We),j.d(We,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>pn,_DEFAULT_ENTRY_NAME:()=>yt,_addComponent:()=>tn,_addOrOverwriteComponent:()=>jt,_apps:()=>Mt,_clearComponents:()=>xn,_components:()=>It,_getProvider:()=>gt,_registerComponent:()=>Wt,_removeServiceInstance:()=>yn,deleteApp:()=>Kr,getApp:()=>Cn,getApps:()=>qn,initializeApp:()=>cr,onLog:()=>Gt,registerVersion:()=>An,setLogLevel:()=>ai});var T=j(5861),Y=j(4859),h=j(1877),ve=j(2090),Se=j(8766);class Te{constructor(bt){this.container=bt}getPlatformInfoString(){return this.container.getProviders().map(Ut=>{if(function ke(Rt){return"VERSION"===Rt.getComponent()?.type}(Ut)){const hn=Ut.getImmediate();return`${hn.library}/${hn.version}`}return null}).filter(Ut=>Ut).join(" ")}}const pe="@firebase/app",me=new h.Yd("@firebase/app"),yt="[DEFAULT]",st={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Mt=new Map,It=new Map;function tn(Rt,bt){try{Rt.container.addComponent(bt)}catch(Ut){me.debug(`Component ${bt.name} failed to register with FirebaseApp ${Rt.name}`,Ut)}}function jt(Rt,bt){Rt.container.addOrOverwriteComponent(bt)}function Wt(Rt){const bt=Rt.name;if(It.has(bt))return me.debug(`There were multiple attempts to register component ${bt}.`),!1;It.set(bt,Rt);for(const Ut of Mt.values())tn(Ut,Rt);return!0}function gt(Rt,bt){const Ut=Rt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ut&&Ut.triggerHeartbeat(),Rt.container.getProvider(bt)}function yn(Rt,bt,Ut=yt){gt(Rt,bt).clearInstance(Ut)}function xn(){It.clear()}const Hn=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dr{constructor(bt,Ut,hn){this._isDeleted=!1,this._options=Object.assign({},bt),this._config=Object.assign({},Ut),this._name=Ut.name,this._automaticDataCollectionEnabled=Ut.automaticDataCollectionEnabled,this._container=hn,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(bt){this.checkDestroyed(),this._automaticDataCollectionEnabled=bt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(bt){this._isDeleted=bt}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const pn="9.18.0";function cr(Rt,bt={}){let Ut=Rt;"object"!=typeof bt&&(bt={name:bt});const hn=Object.assign({name:yt,automaticDataCollectionEnabled:!1},bt),Yt=hn.name;if("string"!=typeof Yt||!Yt)throw Hn.create("bad-app-name",{appName:String(Yt)});if(Ut||(Ut=(0,ve.aH)()),!Ut)throw Hn.create("no-options");const En=Mt.get(Yt);if(En){if((0,ve.vZ)(Ut,En.options)&&(0,ve.vZ)(hn,En.config))return En;throw Hn.create("duplicate-app",{appName:Yt})}const kr=new Y.H0(Yt);for(const _e of It.values())kr.addComponent(_e);const be=new Dr(Ut,hn,kr);return Mt.set(Yt,be),be}function Cn(Rt=yt){const bt=Mt.get(Rt);if(!bt&&Rt===yt)return cr();if(!bt)throw Hn.create("no-app",{appName:Rt});return bt}function qn(){return Array.from(Mt.values())}function Kr(Rt){return en.apply(this,arguments)}function en(){return(en=(0,T.Z)(function*(Rt){const bt=Rt.name;Mt.has(bt)&&(Mt.delete(bt),yield Promise.all(Rt.container.getProviders().map(Ut=>Ut.delete())),Rt.isDeleted=!0)})).apply(this,arguments)}function An(Rt,bt,Ut){var hn;let Yt=null!==(hn=st[Rt])&&void 0!==hn?hn:Rt;Ut&&(Yt+=`-${Ut}`);const En=Yt.match(/\s|\//),kr=bt.match(/\s|\//);if(En||kr){const be=[`Unable to register library "${Yt}" with version "${bt}":`];return En&&be.push(`library name "${Yt}" contains illegal characters (whitespace or "/")`),En&&kr&&be.push("and"),kr&&be.push(`version name "${bt}" contains illegal characters (whitespace or "/")`),void me.warn(be.join(" "))}Wt(new Y.wA(`${Yt}-version`,()=>({library:Yt,version:bt}),"VERSION"))}function Gt(Rt,bt){if(null!==Rt&&"function"!=typeof Rt)throw Hn.create("invalid-log-argument");(0,h.Am)(Rt,bt)}function ai(Rt){(0,h.Ub)(Rt)}const ei="firebase-heartbeat-database",ti=1,ni="firebase-heartbeat-store";let ri=null;function mn(){return ri||(ri=(0,Se.X3)(ei,ti,{upgrade:(Rt,bt)=>{0===bt&&Rt.createObjectStore(ni)}}).catch(Rt=>{throw Hn.create("idb-open",{originalErrorMessage:Rt.message})})),ri}function sn(){return(sn=(0,T.Z)(function*(Rt){try{return(yield mn()).transaction(ni).objectStore(ni).get(cn(Rt))}catch(bt){if(bt instanceof ve.ZR)me.warn(bt.message);else{const Ut=Hn.create("idb-get",{originalErrorMessage:bt?.message});me.warn(Ut.message)}}})).apply(this,arguments)}function pr(Rt,bt){return nr.apply(this,arguments)}function nr(){return(nr=(0,T.Z)(function*(Rt,bt){try{const hn=(yield mn()).transaction(ni,"readwrite");return yield hn.objectStore(ni).put(bt,cn(Rt)),hn.done}catch(Ut){if(Ut instanceof ve.ZR)me.warn(Ut.message);else{const hn=Hn.create("idb-set",{originalErrorMessage:Ut?.message});me.warn(hn.message)}}})).apply(this,arguments)}function cn(Rt){return`${Rt.name}!${Rt.options.appId}`}class Jn{constructor(bt){this.container=bt,this._heartbeatsCache=null;const Ut=this.container.getProvider("app").getImmediate();this._storage=new kn(Ut),this._heartbeatsCachePromise=this._storage.read().then(hn=>(this._heartbeatsCache=hn,hn))}triggerHeartbeat(){var bt=this;return(0,T.Z)(function*(){const hn=bt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yt=Pn();if(null===bt._heartbeatsCache&&(bt._heartbeatsCache=yield bt._heartbeatsCachePromise),bt._heartbeatsCache.lastSentHeartbeatDate!==Yt&&!bt._heartbeatsCache.heartbeats.some(En=>En.date===Yt))return bt._heartbeatsCache.heartbeats.push({date:Yt,agent:hn}),bt._heartbeatsCache.heartbeats=bt._heartbeatsCache.heartbeats.filter(En=>{const kr=new Date(En.date).valueOf();return Date.now()-kr<=2592e6}),bt._storage.overwrite(bt._heartbeatsCache)})()}getHeartbeatsHeader(){var bt=this;return(0,T.Z)(function*(){if(null===bt._heartbeatsCache&&(yield bt._heartbeatsCachePromise),null===bt._heartbeatsCache||0===bt._heartbeatsCache.heartbeats.length)return"";const Ut=Pn(),{heartbeatsToSend:hn,unsentEntries:Yt}=function jr(Rt,bt=1024){const Ut=[];let hn=Rt.slice();for(const Yt of Rt){const En=Ut.find(kr=>kr.agent===Yt.agent);if(En){if(En.dates.push(Yt.date),Ci(Ut)>bt){En.dates.pop();break}}else if(Ut.push({agent:Yt.agent,dates:[Yt.date]}),Ci(Ut)>bt){Ut.pop();break}hn=hn.slice(1)}return{heartbeatsToSend:Ut,unsentEntries:hn}}(bt._heartbeatsCache.heartbeats),En=(0,ve.L)(JSON.stringify({version:2,heartbeats:hn}));return bt._heartbeatsCache.lastSentHeartbeatDate=Ut,Yt.length>0?(bt._heartbeatsCache.heartbeats=Yt,yield bt._storage.overwrite(bt._heartbeatsCache)):(bt._heartbeatsCache.heartbeats=[],bt._storage.overwrite(bt._heartbeatsCache)),En})()}}function Pn(){return(new Date).toISOString().substring(0,10)}class kn{constructor(bt){this.app=bt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var bt=this;return(0,T.Z)(function*(){return(yield bt._canUseIndexedDBPromise)&&(yield function rn(Rt){return sn.apply(this,arguments)}(bt.app))||{heartbeats:[]}})()}overwrite(bt){var Ut=this;return(0,T.Z)(function*(){var hn;if(yield Ut._canUseIndexedDBPromise){const En=yield Ut.read();return pr(Ut.app,{lastSentHeartbeatDate:null!==(hn=bt.lastSentHeartbeatDate)&&void 0!==hn?hn:En.lastSentHeartbeatDate,heartbeats:bt.heartbeats})}})()}add(bt){var Ut=this;return(0,T.Z)(function*(){var hn;if(yield Ut._canUseIndexedDBPromise){const En=yield Ut.read();return pr(Ut.app,{lastSentHeartbeatDate:null!==(hn=bt.lastSentHeartbeatDate)&&void 0!==hn?hn:En.lastSentHeartbeatDate,heartbeats:[...En.heartbeats,...bt.heartbeats]})}})()}}function Ci(Rt){return(0,ve.L)(JSON.stringify({version:2,heartbeats:Rt})).length}!function Cr(Rt){Wt(new Y.wA("platform-logger",bt=>new Te(bt),"PRIVATE")),Wt(new Y.wA("heartbeat",bt=>new Jn(bt),"PRIVATE")),An(pe,"0.9.5",Rt),An(pe,"0.9.5","esm2017"),An("fire-js","")}("")},4859:(zt,We,j)=>{j.d(We,{H0:()=>pe,wA:()=>h,zt:()=>Se});var T=j(5861),Y=j(2090);class h{constructor(me,de,Ce){this.name=me,this.instanceFactory=de,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(me){return this.instantiationMode=me,this}setMultipleInstances(me){return this.multipleInstances=me,this}setServiceProps(me){return this.serviceProps=me,this}setInstanceCreatedCallback(me){return this.onInstanceCreated=me,this}}const ve="[DEFAULT]";class Se{constructor(me,de){this.name=me,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(me){const de=this.normalizeInstanceIdentifier(me);if(!this.instancesDeferred.has(de)){const Ce=new Y.BH;if(this.instancesDeferred.set(de,Ce),this.isInitialized(de)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:de});et&&Ce.resolve(et)}catch{}}return this.instancesDeferred.get(de).promise}getImmediate(me){var de;const Ce=this.normalizeInstanceIdentifier(me?.identifier),et=null!==(de=me?.optional)&&void 0!==de&&de;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(Ke){if(et)return null;throw Ke}}getComponent(){return this.component}setComponent(me){if(me.name!==this.name)throw Error(`Mismatching Component ${me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=me,this.shouldAutoInitialize()){if(function ke(Fe){return"EAGER"===Fe.instantiationMode}(me))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[de,Ce]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(de);try{const Ke=this.getOrInitializeService({instanceIdentifier:et});Ce.resolve(Ke)}catch{}}}}clearInstance(me=ve){this.instancesDeferred.delete(me),this.instancesOptions.delete(me),this.instances.delete(me)}delete(){var me=this;return(0,T.Z)(function*(){const de=Array.from(me.instances.values());yield Promise.all([...de.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...de.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(me=ve){return this.instances.has(me)}getOptions(me=ve){return this.instancesOptions.get(me)||{}}initialize(me={}){const{options:de={}}=me,Ce=this.normalizeInstanceIdentifier(me.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:Ce,options:de});for(const[Ke,at]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(Ke)&&at.resolve(et);return et}onInit(me,de){var Ce;const et=this.normalizeInstanceIdentifier(de),Ke=null!==(Ce=this.onInitCallbacks.get(et))&&void 0!==Ce?Ce:new Set;Ke.add(me),this.onInitCallbacks.set(et,Ke);const at=this.instances.get(et);return at&&me(at,et),()=>{Ke.delete(me)}}invokeOnInitCallbacks(me,de){const Ce=this.onInitCallbacks.get(de);if(Ce)for(const et of Ce)try{et(me,de)}catch{}}getOrInitializeService({instanceIdentifier:me,options:de={}}){let Ce=this.instances.get(me);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=me,Fe===ve?void 0:Fe),options:de}),this.instances.set(me,Ce),this.instancesOptions.set(me,de),this.invokeOnInitCallbacks(Ce,me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,me,Ce)}catch{}var Fe;return Ce||null}normalizeInstanceIdentifier(me=ve){return this.component?this.component.multipleInstances?me:ve:me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(me){this.name=me,this.providers=new Map}addComponent(me){const de=this.getProvider(me.name);if(de.isComponentSet())throw new Error(`Component ${me.name} has already been registered with ${this.name}`);de.setComponent(me)}addOrOverwriteComponent(me){this.getProvider(me.name).isComponentSet()&&this.providers.delete(me.name),this.addComponent(me)}getProvider(me){if(this.providers.has(me))return this.providers.get(me);const de=new Se(me,this);return this.providers.set(me,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(zt,We,j)=>{j.d(We,{Am:()=>Fe,Ub:()=>pe,Yd:()=>ke,in:()=>Y});const T=[];var Y=(()=>{return(me=Y||(Y={}))[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",Y;var me})();const h={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ve=Y.INFO,Se={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Te=(me,de,...Ce)=>{if(de<me.logLevel)return;const et=(new Date).toISOString(),Ke=Se[de];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Ke](`[${et}]  ${me.name}:`,...Ce)};class ke{constructor(de){this.name=de,this._logLevel=ve,this._logHandler=Te,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in Y))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?h[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...de),this._logHandler(this,Y.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...de),this._logHandler(this,Y.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...de),this._logHandler(this,Y.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...de),this._logHandler(this,Y.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...de),this._logHandler(this,Y.ERROR,...de)}}function pe(me){T.forEach(de=>{de.setLogLevel(me)})}function Fe(me,de){for(const Ce of T){let et=null;de&&de.level&&(et=h[de.level]),Ce.userLogHandler=null===me?null:(Ke,at,...Nt)=>{const Je=Nt.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");at>=(et??Ke.logLevel)&&me({level:Y[at].toLowerCase(),message:Je,args:Nt,type:Ke.name})}}}},259:(zt,We,j)=>{j.d(We,{C6:()=>T.getApps,Mq:()=>T.getApp});var T=j(9681);(0,T.registerVersion)("firebase","9.18.0","app")},9260:(zt,We,j)=>{j.d(We,{Z:()=>T.Z});var T=j(3942);T.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(zt,We,j)=>{j.r(We);var T=j(5861),Y=j(3942),h=j(5114),ve=j(2090),ke=(j(9681),j(1877),j(4859));function pe(){return window}const Fe=2e3;function de(){return de=(0,T.Z)(function*(te,re,Q){var Pe;const{BuildInfo:ae}=pe();(0,h.ap)(re.sessionId,"AuthEvent did not contain a session ID");const he=yield function ct(te){return fe.apply(this,arguments)}(re.sessionId),oe={};return(0,h.aq)()?oe.ibi=ae.packageName:(0,h.ar)()?oe.apn=ae.packageName:(0,h.as)(te,"operation-not-supported-in-this-environment"),ae.displayName&&(oe.appDisplayName=ae.displayName),oe.sessionId=he,(0,h.at)(te,Q,re.type,void 0,null!==(Pe=re.eventId)&&void 0!==Pe?Pe:void 0,oe)}),de.apply(this,arguments)}function et(){return(et=(0,T.Z)(function*(te){const{BuildInfo:re}=pe(),Q={};(0,h.aq)()?Q.iosBundleId=re.packageName:(0,h.ar)()?Q.androidPackageName=re.packageName:(0,h.as)(te,"operation-not-supported-in-this-environment"),yield(0,h.au)(te,Q)})).apply(this,arguments)}function Nt(){return(Nt=(0,T.Z)(function*(te,re,Q){const{cordova:Pe}=pe();let ae=()=>{};try{yield new Promise((he,oe)=>{let Ae=null;function Xe(){var Bt;he();const On=null===(Bt=Pe.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof On&&On(),"function"==typeof Q?.close&&Q.close()}function mt(){Ae||(Ae=window.setTimeout(()=>{oe((0,h.aw)(te,"redirect-cancelled-by-user"))},Fe))}function nn(){"visible"===document?.visibilityState&&mt()}re.addPassiveListener(Xe),document.addEventListener("resume",mt,!1),(0,h.ar)()&&document.addEventListener("visibilitychange",nn,!1),ae=()=>{re.removePassiveListener(Xe),document.removeEventListener("resume",mt,!1),document.removeEventListener("visibilitychange",nn,!1),Ae&&window.clearTimeout(Ae)}})}finally{ae()}})).apply(this,arguments)}function fe(){return(fe=(0,T.Z)(function*(te){const re=function ht(te){if((0,h.ap)(/[0-9a-zA-Z]+/.test(te),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(te);const re=new ArrayBuffer(te.length),Q=new Uint8Array(re);for(let Pe=0;Pe<te.length;Pe++)Q[Pe]=te.charCodeAt(Pe);return Q}(te),Q=yield crypto.subtle.digest("SHA-256",re);return Array.from(new Uint8Array(Q)).map(ae=>ae.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const lt=20;class Qe extends h.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(re=>{this.resolveInialized=re})}addPassiveListener(re){this.passiveListeners.add(re)}removePassiveListener(re){this.passiveListeners.delete(re)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(re){return this.resolveInialized(),this.passiveListeners.forEach(Q=>Q(re)),super.onEvent(re)}initialized(){var re=this;return(0,T.Z)(function*(){yield re.initPromise})()}}function Ne(te){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,T.Z)(function*(te){const re=yield ft()._get(qt(te));return re&&(yield ft()._remove(qt(te))),re})).apply(this,arguments)}function it(){const te=[],re="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Q=0;Q<lt;Q++){const Pe=Math.floor(Math.random()*re.length);te.push(re.charAt(Pe))}return te.join("")}function ft(){return(0,h.az)(h.b)}function qt(te){return(0,h.aA)("authEvent",te.config.apiKey,te.name)}function rt(te){if(!te?.includes("?"))return{};const[re,...Q]=te.split("?");return(0,ve.zd)(Q.join("?"))}const yt=class nt{constructor(){this._redirectPersistence=h.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=h.aB,this._overrideRedirectResult=h.aC}_initialize(re){var Q=this;return(0,T.Z)(function*(){const Pe=re._key();let ae=Q.eventManagers.get(Pe);return ae||(ae=new Qe(re),Q.eventManagers.set(Pe,ae),Q.attachCallbackListeners(re,ae)),ae})()}_openPopup(re){(0,h.as)(re,"operation-not-supported-in-this-environment")}_openRedirect(re,Q,Pe,ae){var he=this;return(0,T.Z)(function*(){!function Je(te){var re,Q,Pe,ae,he,oe,Ae,Xe,mt,nn;const Bt=pe();(0,h.ax)("function"==typeof(null===(re=Bt?.universalLinks)||void 0===re?void 0:re.subscribe),te,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,h.ax)(typeof(null===(Q=Bt?.BuildInfo)||void 0===Q?void 0:Q.packageName)<"u",te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,h.ax)("function"==typeof(null===(he=null===(ae=null===(Pe=Bt?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===he?void 0:he.openUrl),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,h.ax)("function"==typeof(null===(Xe=null===(Ae=null===(oe=Bt?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===Xe?void 0:Xe.isAvailable),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,h.ax)("function"==typeof(null===(nn=null===(mt=Bt?.cordova)||void 0===mt?void 0:mt.InAppBrowser)||void 0===nn?void 0:nn.open),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(re);const oe=yield he._initialize(re);yield oe.initialized(),oe.resetRedirect(),(0,h.aD)(),yield he._originValidation(re);const Ae=function Ye(te,re,Q=null){return{type:re,eventId:Q,urlResponse:null,sessionId:it(),postBody:null,tenantId:te.tenantId,error:(0,h.aw)(te,"no-auth-event")}}(re,Pe,ae);yield function Et(te,re){return ft()._set(qt(te),re)}(re,Ae);const Xe=yield function me(te,re,Q){return de.apply(this,arguments)}(re,Ae,Q),mt=yield function Ke(te){const{cordova:re}=pe();return new Promise(Q=>{re.plugins.browsertab.isAvailable(Pe=>{let ae=null;Pe?re.plugins.browsertab.openUrl(te):ae=re.InAppBrowser.open(te,(0,h.av)()?"_blank":"_system","location=yes"),Q(ae)})})}(Xe);return function at(te,re,Q){return Nt.apply(this,arguments)}(re,oe,mt)})()}_isIframeWebStorageSupported(re,Q){throw new Error("Method not implemented.")}_originValidation(re){const Q=re._key();return this.originValidationPromises[Q]||(this.originValidationPromises[Q]=function Ce(te){return et.apply(this,arguments)}(re)),this.originValidationPromises[Q]}attachCallbackListeners(re,Q){const{universalLinks:Pe,handleOpenURL:ae,BuildInfo:he}=pe(),oe=setTimeout((0,T.Z)(function*(){yield Ne(re),Q.onEvent(st())}),500),Ae=function(){var nn=(0,T.Z)(function*(Bt){clearTimeout(oe);const On=yield Ne(re);let Bs=null;On&&Bt?.url&&(Bs=function tt(te,re){var Q,Pe;const ae=function Le(te){const re=rt(te),Q=re.link?decodeURIComponent(re.link):void 0,Pe=rt(Q).link,ae=re.deep_link_id?decodeURIComponent(re.deep_link_id):void 0;return rt(ae).link||ae||Pe||Q||te}(re);if(ae.includes("/__/auth/callback")){const he=rt(ae),oe=he.firebaseError?function Pt(te){try{return JSON.parse(te)}catch{return null}}(decodeURIComponent(he.firebaseError)):null,Ae=null===(Pe=null===(Q=oe?.code)||void 0===Q?void 0:Q.split("auth/"))||void 0===Pe?void 0:Pe[1],Xe=Ae?(0,h.aw)(Ae):null;return Xe?{type:te.type,eventId:te.eventId,tenantId:te.tenantId,error:Xe,urlResponse:null,sessionId:null,postBody:null}:{type:te.type,eventId:te.eventId,tenantId:te.tenantId,sessionId:te.sessionId,urlResponse:ae,postBody:null}}return null}(On,Bt.url)),Q.onEvent(Bs||st())});return function(On){return nn.apply(this,arguments)}}();typeof Pe<"u"&&"function"==typeof Pe.subscribe&&Pe.subscribe(null,Ae);const Xe=ae,mt=`${he.packageName.toLowerCase()}://`;pe().handleOpenURL=function(){var nn=(0,T.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(mt)&&Ae({url:Bt}),"function"==typeof Xe)try{Xe(Bt)}catch(On){console.error(On)}});return function(Bt){return nn.apply(this,arguments)}}()}};function st(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,h.aw)("no-auth-event")}}const jt=1e3;function Wt(){var te;return(null===(te=self?.location)||void 0===te?void 0:te.protocol)||null}function yn(te=(0,ve.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!te.toLowerCase().match(/iphone|ipad|ipod|android/))}function pn(){try{const te=self.localStorage,re=h.aI();if(te)return te.setItem(re,"1"),te.removeItem(re),!function Dr(te=(0,ve.z$)()){return function jn(){return(0,ve.w1)()&&11===document?.documentMode}()||function Hn(te=(0,ve.z$)()){return/Edge\/\d+/.test(te)}(te)}()||(0,ve.hl)()}catch{return cr()&&(0,ve.hl)()}return!1}function cr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cn(){return(function gt(){return"http:"===Wt()||"https:"===Wt()}()||(0,ve.ru)()||yn())&&!function xn(){return(0,ve.b$)()||(0,ve.UG)()}()&&pn()&&!cr()}function qn(){return yn()&&typeof document<"u"}function en(){return(en=(0,T.Z)(function*(){return!!qn()&&new Promise(te=>{const re=setTimeout(()=>{te(!1)},jt);document.addEventListener("deviceready",()=>{clearTimeout(re),te(!0)})})})).apply(this,arguments)}const Gt={LOCAL:"local",NONE:"none",SESSION:"session"},ai=h.ax,ei="persistence";function ni(te){return ri.apply(this,arguments)}function ri(){return(ri=(0,T.Z)(function*(te){yield te._initializationPromise;const re=rn(),Q=h.aA(ei,te.config.apiKey,te.name);re&&re.setItem(Q,te._getPersistence())})).apply(this,arguments)}function rn(){var te;try{return(null===(te=function An(){return typeof window<"u"?window:null}())||void 0===te?void 0:te.sessionStorage)||null}catch{return null}}const sn=h.ax;class pr{constructor(){this.browserResolver=h.az(h.k),this.cordovaResolver=h.az(yt),this.underlyingResolver=null,this._redirectPersistence=h.a,this._completeRedirectFn=h.aB,this._overrideRedirectResult=h.aC}_initialize(re){var Q=this;return(0,T.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._initialize(re)})()}_openPopup(re,Q,Pe,ae){var he=this;return(0,T.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openPopup(re,Q,Pe,ae)})()}_openRedirect(re,Q,Pe,ae){var he=this;return(0,T.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openRedirect(re,Q,Pe,ae)})()}_isIframeWebStorageSupported(re,Q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(re,Q)}_originValidation(re){return this.assertedUnderlyingResolver._originValidation(re)}get _shouldInitProactively(){return qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var re=this;return(0,T.Z)(function*(){if(re.underlyingResolver)return;const Q=yield function Kr(){return en.apply(this,arguments)}();re.underlyingResolver=Q?re.cordovaResolver:re.browserResolver})()}}function nr(te){return te.unwrap()}function br(te){return Jn(te)}function Jn(te){const{_tokenResponse:re}=te instanceof ve.ZR?te.customData:te;if(!re)return null;if(!(te instanceof ve.ZR)&&"temporaryProof"in re&&"phoneNumber"in re)return h.P.credentialFromResult(te);const Q=re.providerId;if(!Q||Q===h.o.PASSWORD)return null;let Pe;switch(Q){case h.o.GOOGLE:Pe=h.Q;break;case h.o.FACEBOOK:Pe=h.N;break;case h.o.GITHUB:Pe=h.T;break;case h.o.TWITTER:Pe=h.W;break;default:const{oauthIdToken:ae,oauthAccessToken:he,oauthTokenSecret:oe,pendingToken:Ae,nonce:Xe}=re;return he||oe||ae||Ae?Ae?Q.startsWith("saml.")?h.aL._create(Q,Ae):h.J._fromParams({providerId:Q,signInMethod:Q,pendingToken:Ae,idToken:ae,accessToken:he}):new h.U(Q).credential({idToken:ae,accessToken:he,rawNonce:Xe}):null}return te instanceof ve.ZR?Pe.credentialFromError(te):Pe.credentialFromResult(te)}function Pn(te,re){return re.catch(Q=>{throw Q instanceof ve.ZR&&function Ir(te,re){var Q;const Pe=null===(Q=re.customData)||void 0===Q?void 0:Q._tokenResponse;if("auth/multi-factor-auth-required"===re?.code)re.resolver=new Ci(te,h.an(te,re));else if(Pe){const ae=Jn(re),he=re;ae&&(he.credential=ae,he.tenantId=Pe.tenantId||void 0,he.email=Pe.email||void 0,he.phoneNumber=Pe.phoneNumber||void 0)}}(te,Q),Q}).then(Q=>{const ae=Q.user;return{operationType:Q.operationType,credential:br(Q),additionalUserInfo:h.al(Q),user:Cr.getOrCreate(ae)}})}function jr(te,re){return kn.apply(this,arguments)}function kn(){return(kn=(0,T.Z)(function*(te,re){const Q=yield re;return{verificationId:Q.verificationId,confirm:Pe=>Pn(te,Q.confirm(Pe))}})).apply(this,arguments)}class Ci{constructor(re,Q){this.resolver=Q,this.auth=function cn(te){return te.wrapped()}(re)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(re){return Pn(nr(this.auth),this.resolver.resolveSignIn(re))}}class Cr{constructor(re){this._delegate=re,this.multiFactor=h.ao(re)}static getOrCreate(re){return Cr.USER_MAP.has(re)||Cr.USER_MAP.set(re,new Cr(re)),Cr.USER_MAP.get(re)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(re){return this._delegate.getIdTokenResult(re)}getIdToken(re){return this._delegate.getIdToken(re)}linkAndRetrieveDataWithCredential(re){return this.linkWithCredential(re)}linkWithCredential(re){var Q=this;return(0,T.Z)(function*(){return Pn(Q.auth,h.Z(Q._delegate,re))})()}linkWithPhoneNumber(re,Q){var Pe=this;return(0,T.Z)(function*(){return jr(Pe.auth,h.l(Pe._delegate,re,Q))})()}linkWithPopup(re){var Q=this;return(0,T.Z)(function*(){return Pn(Q.auth,h.d(Q._delegate,re,pr))})()}linkWithRedirect(re){var Q=this;return(0,T.Z)(function*(){return yield ni(h.aE(Q.auth)),h.g(Q._delegate,re,pr)})()}reauthenticateAndRetrieveDataWithCredential(re){return this.reauthenticateWithCredential(re)}reauthenticateWithCredential(re){var Q=this;return(0,T.Z)(function*(){return Pn(Q.auth,h._(Q._delegate,re))})()}reauthenticateWithPhoneNumber(re,Q){return jr(this.auth,h.r(this._delegate,re,Q))}reauthenticateWithPopup(re){return Pn(this.auth,h.e(this._delegate,re,pr))}reauthenticateWithRedirect(re){var Q=this;return(0,T.Z)(function*(){return yield ni(h.aE(Q.auth)),h.h(Q._delegate,re,pr)})()}sendEmailVerification(re){return h.ab(this._delegate,re)}unlink(re){var Q=this;return(0,T.Z)(function*(){return yield h.ak(Q._delegate,re),Q})()}updateEmail(re){return h.ag(this._delegate,re)}updatePassword(re){return h.ah(this._delegate,re)}updatePhoneNumber(re){return h.u(this._delegate,re)}updateProfile(re){return h.af(this._delegate,re)}verifyBeforeUpdateEmail(re,Q){return h.ac(this._delegate,re,Q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cr.USER_MAP=new WeakMap;const Rt=h.ax;let bt=(()=>{class te{constructor(Q,Pe){if(this.app=Q,Pe.isInitialized())return this._delegate=Pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ae}=Q.options;Rt(ae,"invalid-api-key",{appName:Q.name}),Rt(ae,"invalid-api-key",{appName:Q.name});const he=typeof window<"u"?pr:void 0;this._delegate=Pe.initialize({options:{persistence:hn(ae,Q.name),popupRedirectResolver:he}}),this._delegate._updateErrorMap(h.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Q){this._delegate.languageCode=Q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Q){this._delegate.tenantId=Q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Q,Pe){h.G(this._delegate,Q,Pe)}applyActionCode(Q){return h.a2(this._delegate,Q)}checkActionCode(Q){return h.a3(this._delegate,Q)}confirmPasswordReset(Q,Pe){return h.a1(this._delegate,Q,Pe)}createUserWithEmailAndPassword(Q,Pe){var ae=this;return(0,T.Z)(function*(){return Pn(ae._delegate,h.a5(ae._delegate,Q,Pe))})()}fetchProvidersForEmail(Q){return this.fetchSignInMethodsForEmail(Q)}fetchSignInMethodsForEmail(Q){return h.aa(this._delegate,Q)}isSignInWithEmailLink(Q){return h.a8(this._delegate,Q)}getRedirectResult(){var Q=this;return(0,T.Z)(function*(){Rt(Cn(),Q._delegate,"operation-not-supported-in-this-environment");const Pe=yield h.j(Q._delegate,pr);return Pe?Pn(Q._delegate,Promise.resolve(Pe)):{credential:null,user:null}})()}addFrameworkForLogging(Q){!function Mt(te,re){(0,h.aE)(te)._logFramework(re)}(this._delegate,Q)}onAuthStateChanged(Q,Pe,ae){const{next:he,error:oe,complete:Ae}=Ut(Q,Pe,ae);return this._delegate.onAuthStateChanged(he,oe,Ae)}onIdTokenChanged(Q,Pe,ae){const{next:he,error:oe,complete:Ae}=Ut(Q,Pe,ae);return this._delegate.onIdTokenChanged(he,oe,Ae)}sendSignInLinkToEmail(Q,Pe){return h.a7(this._delegate,Q,Pe)}sendPasswordResetEmail(Q,Pe){return h.a0(this._delegate,Q,Pe||void 0)}setPersistence(Q){var Pe=this;return(0,T.Z)(function*(){let ae;switch(function ti(te,re){ai(Object.values(Gt).includes(re),te,"invalid-persistence-type"),(0,ve.b$)()?ai(re!==Gt.SESSION,te,"unsupported-persistence-type"):(0,ve.UG)()?ai(re===Gt.NONE,te,"unsupported-persistence-type"):cr()?ai(re===Gt.NONE||re===Gt.LOCAL&&(0,ve.hl)(),te,"unsupported-persistence-type"):ai(re===Gt.NONE||pn(),te,"unsupported-persistence-type")}(Pe._delegate,Q),Q){case Gt.SESSION:ae=h.a;break;case Gt.LOCAL:ae=(yield h.az(h.i)._isAvailable())?h.i:h.b;break;case Gt.NONE:ae=h.L;break;default:return h.as("argument-error",{appName:Pe._delegate.name})}return Pe._delegate.setPersistence(ae)})()}signInAndRetrieveDataWithCredential(Q){return this.signInWithCredential(Q)}signInAnonymously(){return Pn(this._delegate,h.X(this._delegate))}signInWithCredential(Q){return Pn(this._delegate,h.Y(this._delegate,Q))}signInWithCustomToken(Q){return Pn(this._delegate,h.$(this._delegate,Q))}signInWithEmailAndPassword(Q,Pe){return Pn(this._delegate,h.a6(this._delegate,Q,Pe))}signInWithEmailLink(Q,Pe){return Pn(this._delegate,h.a9(this._delegate,Q,Pe))}signInWithPhoneNumber(Q,Pe){return jr(this._delegate,h.s(this._delegate,Q,Pe))}signInWithPopup(Q){var Pe=this;return(0,T.Z)(function*(){return Rt(Cn(),Pe._delegate,"operation-not-supported-in-this-environment"),Pn(Pe._delegate,h.c(Pe._delegate,Q,pr))})()}signInWithRedirect(Q){var Pe=this;return(0,T.Z)(function*(){return Rt(Cn(),Pe._delegate,"operation-not-supported-in-this-environment"),yield ni(Pe._delegate),h.f(Pe._delegate,Q,pr)})()}updateCurrentUser(Q){return this._delegate.updateCurrentUser(Q)}verifyPasswordResetCode(Q){return h.a4(this._delegate,Q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return te.Persistence=Gt,te})();function Ut(te,re,Q){let Pe=te;"function"!=typeof te&&({next:Pe,error:re,complete:Q}=te);const ae=Pe;return{next:oe=>ae(oe&&Cr.getOrCreate(oe)),error:re,complete:Q}}function hn(te,re){const Q=function mn(te,re){const Q=rn();if(!Q)return[];const Pe=h.aA(ei,te,re);switch(Q.getItem(Pe)){case Gt.NONE:return[h.L];case Gt.LOCAL:return[h.i,h.a];case Gt.SESSION:return[h.a];default:return[]}}(te,re);if(typeof self<"u"&&!Q.includes(h.i)&&Q.push(h.i),typeof window<"u")for(const Pe of[h.b,h.a])Q.includes(Pe)||Q.push(Pe);return Q.includes(h.L)||Q.push(h.L),Q}class Yt{constructor(){this.providerId="phone",this._delegate=new h.P(nr(Y.Z.auth()))}static credential(re,Q){return h.P.credential(re,Q)}verifyPhoneNumber(re,Q){return this._delegate.verifyPhoneNumber(re,Q)}unwrap(){return this._delegate}}Yt.PHONE_SIGN_IN_METHOD=h.P.PHONE_SIGN_IN_METHOD,Yt.PROVIDER_ID=h.P.PROVIDER_ID;const En=h.ax;class kr{constructor(re,Q,Pe=Y.Z.app()){var ae;En(null===(ae=Pe.options)||void 0===ae?void 0:ae.apiKey,"invalid-api-key",{appName:Pe.name}),this._delegate=new h.R(re,Q,Pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _e(te){te.INTERNAL.registerComponent(new ke.wA("auth-compat",re=>{const Q=re.getProvider("app-compat").getImmediate(),Pe=re.getProvider("auth");return new bt(Q,Pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:h.A.EMAIL_SIGNIN,PASSWORD_RESET:h.A.PASSWORD_RESET,RECOVER_EMAIL:h.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:h.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:h.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:h.A.VERIFY_EMAIL}},EmailAuthProvider:h.M,FacebookAuthProvider:h.N,GithubAuthProvider:h.T,GoogleAuthProvider:h.Q,OAuthProvider:h.U,SAMLAuthProvider:h.V,PhoneAuthProvider:Yt,PhoneMultiFactorGenerator:h.m,RecaptchaVerifier:kr,TwitterAuthProvider:h.W,Auth:bt,AuthCredential:h.H,Error:ve.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),te.registerVersion("@firebase/auth-compat","0.3.5")}(Y.Z)},8766:(zt,We,j)=>{j.d(We,{Lj:()=>lt,X3:()=>ht});var T=j(5861);const Y=(Ie,tt)=>tt.some(it=>Ie instanceof it);let h,ve;const ke=new WeakMap,pe=new WeakMap,Fe=new WeakMap,me=new WeakMap,de=new WeakMap;let Ke={get(Ie,tt,it){if(Ie instanceof IDBTransaction){if("done"===tt)return pe.get(Ie);if("objectStoreNames"===tt)return Ie.objectStoreNames||Fe.get(Ie);if("store"===tt)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return ct(Ie[tt])},set:(Ie,tt,it)=>(Ie[tt]=it,!0),has:(Ie,tt)=>Ie instanceof IDBTransaction&&("done"===tt||"store"===tt)||tt in Ie};function Je(Ie){return"function"==typeof Ie?function Nt(Ie){return Ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ie)?function(...tt){return Ie.apply(fe(this),tt),ct(ke.get(this))}:function(...tt){return ct(Ie.apply(fe(this),tt))}:function(tt,...it){const ft=Ie.call(fe(this),tt,...it);return Fe.set(ft,tt.sort?tt.sort():[tt]),ct(ft)}}(Ie):(Ie instanceof IDBTransaction&&function et(Ie){if(pe.has(Ie))return;const tt=new Promise((it,ft)=>{const qt=()=>{Ie.removeEventListener("complete",Pt),Ie.removeEventListener("error",Le),Ie.removeEventListener("abort",Le)},Pt=()=>{it(),qt()},Le=()=>{ft(Ie.error||new DOMException("AbortError","AbortError")),qt()};Ie.addEventListener("complete",Pt),Ie.addEventListener("error",Le),Ie.addEventListener("abort",Le)});pe.set(Ie,tt)}(Ie),Y(Ie,function Se(){return h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ie,Ke):Ie)}function ct(Ie){if(Ie instanceof IDBRequest)return function Ce(Ie){const tt=new Promise((it,ft)=>{const qt=()=>{Ie.removeEventListener("success",Pt),Ie.removeEventListener("error",Le)},Pt=()=>{it(ct(Ie.result)),qt()},Le=()=>{ft(Ie.error),qt()};Ie.addEventListener("success",Pt),Ie.addEventListener("error",Le)});return tt.then(it=>{it instanceof IDBCursor&&ke.set(it,Ie)}).catch(()=>{}),de.set(tt,Ie),tt}(Ie);if(me.has(Ie))return me.get(Ie);const tt=Je(Ie);return tt!==Ie&&(me.set(Ie,tt),de.set(tt,Ie)),tt}const fe=Ie=>de.get(Ie);function ht(Ie,tt,{blocked:it,upgrade:ft,blocking:qt,terminated:Pt}={}){const Le=indexedDB.open(Ie,tt),rt=ct(Le);return ft&&Le.addEventListener("upgradeneeded",$e=>{ft(ct(Le.result),$e.oldVersion,$e.newVersion,ct(Le.transaction))}),it&&Le.addEventListener("blocked",()=>it()),rt.then($e=>{Pt&&$e.addEventListener("close",()=>Pt()),qt&&$e.addEventListener("versionchange",()=>qt())}).catch(()=>{}),rt}function lt(Ie,{blocked:tt}={}){const it=indexedDB.deleteDatabase(Ie);return tt&&it.addEventListener("blocked",()=>tt()),ct(it).then(()=>{})}const Qe=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],Et=new Map;function Ne(Ie,tt){if(!(Ie instanceof IDBDatabase)||tt in Ie||"string"!=typeof tt)return;if(Et.get(tt))return Et.get(tt);const it=tt.replace(/FromIndex$/,""),ft=tt!==it,qt=Ye.includes(it);if(!(it in(ft?IDBIndex:IDBObjectStore).prototype)||!qt&&!Qe.includes(it))return;const Pt=function(){var Le=(0,T.Z)(function*(rt,...$e){const nt=this.transaction(rt,qt?"readwrite":"readonly");let yt=nt.store;return ft&&(yt=yt.index($e.shift())),(yield Promise.all([yt[it](...$e),qt&&nt.done]))[0]});return function($e){return Le.apply(this,arguments)}}();return Et.set(tt,Pt),Pt}!function at(Ie){Ke=Ie(Ke)}(Ie=>({...Ie,get:(tt,it,ft)=>Ne(tt,it)||Ie.get(tt,it,ft),has:(tt,it)=>!!Ne(tt,it)||Ie.has(tt,it)}))},5861:(zt,We,j)=>{function T(h,ve,Se,Te,ke,pe,Fe){try{var me=h[pe](Fe),de=me.value}catch(Ce){return void Se(Ce)}me.done?ve(de):Promise.resolve(de).then(Te,ke)}function Y(h){return function(){var ve=this,Se=arguments;return new Promise(function(Te,ke){var pe=h.apply(ve,Se);function Fe(de){T(pe,Te,ke,Fe,me,"next",de)}function me(de){T(pe,Te,ke,Fe,me,"throw",de)}Fe(void 0)})}}j.d(We,{Z:()=>Y})}},zt=>{zt(zt.s=8896)}]);