"use strict";(self.webpackChunkrpg_psicoleigos=self.webpackChunkrpg_psicoleigos||[]).push([[179],{6217:(Yt,Ke,V)=>{V.d(Ke,{nm:()=>Ui});var b=V(2122);V(4650),V(259);var gt=V(5861),rt=V(9681),Ye=V(4859),xt=V(2090),ke=V(1877);const fe=new Map,qe={activated:!1,tokenObservers:[]},ct={initialized:!1,enabled:!1};function bt(Ve){return fe.get(Ve)||Object.assign({},qe)}function Pt(){return ct}const We="https://content-firebaseappcheck.googleapis.com/v1",at="exchangeDebugToken",wt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Rt{constructor(Te,Xe,Ct,Wt,hn){if(this.operation=Te,this.retryPolicy=Xe,this.getWaitDuration=Ct,this.lowerBound=Wt,this.upperBound=hn,this.pending=null,this.nextErrorWaitInterval=Wt,Wt>hn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Te){var Xe=this;return(0,gt.Z)(function*(){Xe.stop();try{Xe.pending=new xt.BH,yield function Mt(Ve){return new Promise(Te=>{setTimeout(Te,Ve)})}(Xe.getNextRun(Te)),Xe.pending.resolve(),yield Xe.pending.promise,Xe.pending=new xt.BH,yield Xe.operation(),Xe.pending.resolve(),yield Xe.pending.promise,Xe.process(!0).catch(()=>{})}catch(Ct){Xe.retryPolicy(Ct)?Xe.process(!1).catch(()=>{}):Xe.stop()}})()}getNextRun(Te){if(Te)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Xe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Xe}}}const Kt=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gn(Ve,Te){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,gt.Z)(function*({url:Ve,body:Te},Xe){const Ct={"Content-Type":"application/json"},Wt=Xe.getImmediate({optional:!0});if(Wt){const fr=yield Wt.getHeartbeatsHeader();fr&&(Ct["X-Firebase-Client"]=fr)}const hn={method:"POST",body:JSON.stringify(Te),headers:Ct};let Mn,Xn;try{Mn=yield fetch(Ve,hn)}catch(fr){throw Kt.create("fetch-network-error",{originalErrorMessage:fr?.message})}if(200!==Mn.status)throw Kt.create("fetch-status-error",{httpStatus:Mn.status});try{Xn=yield Mn.json()}catch(fr){throw Kt.create("fetch-parse-error",{originalErrorMessage:fr?.message})}const kn=Xn.ttl.match(/^([\d.]+)(s)$/);if(!kn||!kn[2]||isNaN(Number(kn[1])))throw Kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Xn.ttl}`});const ws=1e3*Number(kn[1]),Yr=Date.now();return{token:Xn.token,expireTimeMillis:Yr+ws,issuedAtTimeMillis:Yr}})).apply(this,arguments)}const Vn="firebase-app-check-database",_r=1,Rr="firebase-app-check-store";let Dn=null;function qr(Ve,Te){return mn.apply(this,arguments)}function mn(){return(mn=(0,gt.Z)(function*(Ve,Te){const Ct=(yield function kt(){return Dn||(Dn=new Promise((Ve,Te)=>{try{const Xe=indexedDB.open(Vn,_r);Xe.onsuccess=Ct=>{Ve(Ct.target.result)},Xe.onerror=Ct=>{var Wt;Te(Kt.create("storage-open",{originalErrorMessage:null===(Wt=Ct.target.error)||void 0===Wt?void 0:Wt.message}))},Xe.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(Rr,{keyPath:"compositeKey"})}}catch(Xe){Te(Kt.create("storage-open",{originalErrorMessage:Xe?.message}))}}),Dn)}()).transaction(Rr,"readwrite"),hn=Ct.objectStore(Rr).put({compositeKey:Ve,value:Te});return new Promise((Mn,Xn)=>{hn.onsuccess=kn=>{Mn()},Ct.onerror=kn=>{var ws;Xn(Kt.create("storage-set",{originalErrorMessage:null===(ws=kn.target.error)||void 0===ws?void 0:ws.message}))}})})).apply(this,arguments)}const Kn=new ke.Yd("@firebase/app-check");function or(Ve,Te){return(0,xt.hl)()?function Kr(Ve,Te){return qr(function Hn(Ve){return`${Ve.options.appId}-${Ve.name}`}(Ve),Te)}(Ve,Te).catch(Xe=>{Kn.warn(`Failed to write token to IndexedDB. Error: ${Xe}`)}):Promise.resolve()}function Pn(){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,gt.Z)(function*(){const Ve=Pt();if(Ve.enabled&&Ve.token)return Ve.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Lt={error:"UNKNOWN_ERROR"};function It(Ve){return xt.US.encodeString(JSON.stringify(Ve),!1)}function Ue(Ve){return ye.apply(this,arguments)}function ye(){return(ye=(0,gt.Z)(function*(Ve,Te=!1){const Xe=Ve.app;!function ft(Ve){if(!bt(Ve).activated)throw Kt.create("use-before-activation",{appName:Ve.name})}(Xe);const Ct=bt(Xe);let hn,Wt=Ct.token;if(Wt&&!ne(Wt)&&(Ct.token=void 0,Wt=void 0),!Wt){const kn=yield Ct.cachedTokenPromise;kn&&(ne(kn)?Wt=kn:yield or(Xe,void 0))}if(!Te&&Wt&&ne(Wt))return{token:Wt.token};let Xn,Mn=!1;if(function Dr(){return Pt().enabled}()){Ct.exchangeTokenPromise||(Ct.exchangeTokenPromise=Gn(function Ar(Ve,Te){const{projectId:Xe,appId:Ct,apiKey:Wt}=Ve.options;return{url:`${We}/projects/${Xe}/apps/${Ct}:${at}?key=${Wt}`,body:{debug_token:Te}}}(Xe,yield Pn()),Ve.heartbeatServiceProvider).finally(()=>{Ct.exchangeTokenPromise=void 0}),Mn=!0);const kn=yield Ct.exchangeTokenPromise;return yield or(Xe,kn),Ct.token=kn,{token:kn.token}}try{Ct.exchangeTokenPromise||(Ct.exchangeTokenPromise=Ct.provider.getToken().finally(()=>{Ct.exchangeTokenPromise=void 0}),Mn=!0),Wt=yield bt(Xe).exchangeTokenPromise}catch(kn){"appCheck/throttled"===kn.code?Kn.warn(kn.message):Kn.error(kn),hn=kn}return Wt?hn?Xn=ne(Wt)?{token:Wt.token,internalError:hn}:ie(hn):(Xn={token:Wt.token},Ct.token=Wt,yield or(Xe,Wt)):Xn=ie(hn),Mn&&function pe(Ve,Te){const Xe=bt(Ve).tokenObservers;for(const Ct of Xe)try{"EXTERNAL"===Ct.type&&null!=Te.error?Ct.error(Te.error):Ct.next(Te)}catch{}}(Xe,Xn),Xn})).apply(this,arguments)}function ht(Ve,Te){const Xe=bt(Ve),Ct=Xe.tokenObservers.filter(Wt=>Wt.next!==Te);0===Ct.length&&Xe.tokenRefresher&&Xe.tokenRefresher.isRunning()&&Xe.tokenRefresher.stop(),Xe.tokenObservers=Ct}function mt(Ve){const{app:Te}=Ve,Xe=bt(Te);let Ct=Xe.tokenRefresher;Ct||(Ct=function ge(Ve){const{app:Te}=Ve;return new Rt((0,gt.Z)(function*(){let Ct;if(Ct=bt(Te).token?yield Ue(Ve,!0):yield Ue(Ve),Ct.error)throw Ct.error;if(Ct.internalError)throw Ct.internalError}),()=>!0,()=>{const Xe=bt(Te);if(Xe.token){let Ct=Xe.token.issuedAtTimeMillis+.5*(Xe.token.expireTimeMillis-Xe.token.issuedAtTimeMillis)+3e5;return Ct=Math.min(Ct,Xe.token.expireTimeMillis-3e5),Math.max(0,Ct-Date.now())}return 0},wt.RETRIAL_MIN_WAIT,wt.RETRIAL_MAX_WAIT)}(Ve),Xe.tokenRefresher=Ct),!Ct.isRunning()&&Xe.isTokenAutoRefreshEnabled&&Ct.start()}function ne(Ve){return Ve.expireTimeMillis-Date.now()>0}function ie(Ve){return{token:It(Lt),error:Ve}}class Q{constructor(Te,Xe){this.app=Te,this.heartbeatServiceProvider=Xe}_delete(){const{tokenObservers:Te}=bt(this.app);for(const Xe of Te)ht(this.app,Xe.next);return Promise.resolve()}}const qt="app-check-internal";!function En(){(0,rt._registerComponent)(new Ye.wA("app-check",Ve=>function Le(Ve,Te){return new Q(Ve,Te)}(Ve.getProvider("app").getImmediate(),Ve.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ve,Te,Xe)=>{Ve.getProvider(qt).initialize()})),(0,rt._registerComponent)(new Ye.wA(qt,Ve=>function ce(Ve){return{getToken:Te=>Ue(Ve,Te),addTokenListener:Te=>function Ce(Ve,Te,Xe,Ct){const{app:Wt}=Ve,hn=bt(Wt);if(hn.tokenObservers=[...hn.tokenObservers,{next:Xe,error:Ct,type:Te}],hn.token&&ne(hn.token)){const Xn=hn.token;Promise.resolve().then(()=>{Xe({token:Xn.token}),mt(Ve)}).catch(()=>{})}hn.cachedTokenPromise.then(()=>mt(Ve))}(Ve,"INTERNAL",Te),removeTokenListener:Te=>ht(Ve.app,Te)}}(Ve.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rt.registerVersion)("@firebase/app-check","0.6.4")}();class Ui{constructor(){return(0,b.vb)("app-check")}}typeof window<"u"&&window},1205:(Yt,Ke,V)=>{V.d(Ke,{zQ:()=>We,ww:()=>st,rT:()=>ct,f7:()=>Jt,L6:()=>fe,_Q:()=>qe,lh:()=>bt,Qv:()=>ke,nw:()=>Pt});var b=V(4650),Z=V(7579),p=V(9646),De=V(9751),Me=V(8996),xe=V(6451),Fe=V(5363),Pe=V(3900),Ge=V(4004),be=V(6063);class Ee extends Z.x{constructor(at=1/0,wt=1/0,dt=be.l){super(),this._bufferSize=at,this._windowTime=wt,this._timestampProvider=dt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=wt===1/0,this._bufferSize=Math.max(1,at),this._windowTime=Math.max(1,wt)}next(at){const{isStopped:wt,_buffer:dt,_infiniteTimeWindow:Rt,_timestampProvider:Mt,_windowTime:cn}=this;wt||(dt.push(at),!Rt&&dt.push(Mt.now()+cn)),this._trimBuffer(),super.next(at)}_subscribe(at){this._throwIfClosed(),this._trimBuffer();const wt=this._innerSubscribe(at),{_infiniteTimeWindow:dt,_buffer:Rt}=this,Mt=Rt.slice();for(let cn=0;cn<Mt.length&&!at.closed;cn+=dt?1:2)at.next(Mt[cn]);return this._checkFinalizedStatuses(at),wt}_trimBuffer(){const{_bufferSize:at,_timestampProvider:wt,_buffer:dt,_infiniteTimeWindow:Rt}=this,Mt=(Rt?1:2)*at;if(at<1/0&&Mt<dt.length&&dt.splice(0,dt.length-Mt),!Rt){const cn=wt.now();let Kt=0;for(let Xt=1;Xt<dt.length&&dt[Xt]<=cn;Xt+=2)Kt=Xt;Kt&&dt.splice(0,Kt+1)}}}var Re=V(3099);function yt($e,at,wt){let dt,Rt=!1;return $e&&"object"==typeof $e?({bufferSize:dt=1/0,windowTime:at=1/0,refCount:Rt=!1,scheduler:wt}=$e):dt=$e??1/0,(0,Re.B)({connector:()=>new Ee(dt,at,wt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Rt})}var He=V(590),pt=V(576);function Nt($e,at){return(0,pt.m)(at)?(0,Pe.w)(()=>$e,at):(0,Pe.w)(()=>$e)}var Qe=V(9468),ut=V(9300),Ie=V(2122),Et=V(2011),gt=V(6895),rt=V(6217),Ye=V(9260);const ke=new b.OlP("angularfire2.auth.use-emulator"),fe=new b.OlP("angularfire2.auth.settings"),qe=new b.OlP("angularfire2.auth.tenant-id"),ct=new b.OlP("angularfire2.auth.langugage-code"),bt=new b.OlP("angularfire2.auth.use-device-language"),Jt=new b.OlP("angularfire.auth.persistence"),Pt=($e,at,wt,dt,Rt,Mt,cn,Kt)=>(0,Et.cc)(`${$e.name}.auth`,"AngularFireAuth",$e.name,()=>{const Xt=at.runOutsideAngular(()=>$e.auth());if(wt&&Xt.useEmulator(...wt),dt&&(Xt.tenantId=dt),Xt.languageCode=Rt,Mt&&Xt.useDeviceLanguage(),cn)for(const[ft,bn]of Object.entries(cn))Xt.settings[ft]=bn;return Kt&&Xt.setPersistence(Kt),Xt},[wt,dt,Rt,Mt,cn,Kt]);let We=(()=>{class $e{constructor(wt,dt,Rt,Mt,cn,Kt,Xt,ft,bn,xn,Gn,Ln){const hr=new Z.x,Wn=(0,p.of)(void 0).pipe((0,Fe.Q)(cn.outsideAngular),(0,Pe.w)(()=>Mt.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,Ge.U)(()=>(0,Et.on)(wt,Mt,dt)),(0,Ge.U)(Ar=>Pt(Ar,Mt,Kt,ft,bn,xn,Xt,Gn)),yt({bufferSize:1,refCount:!1}));if((0,gt.PM)(Rt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,p.of)(null);else{Wn.pipe((0,He.P)()).subscribe();const Vn=Wn.pipe((0,Pe.w)(en=>en.getRedirectResult().then(Dn=>Dn,()=>null)),Ie.iC,yt({bufferSize:1,refCount:!1})),_r=Wn.pipe((0,Pe.w)(en=>new De.y(Dn=>({unsubscribe:Mt.runOutsideAngular(()=>en.onAuthStateChanged(kt=>Dn.next(kt),kt=>Dn.error(kt),()=>Dn.complete()))})))),Rr=Wn.pipe((0,Pe.w)(en=>new De.y(Dn=>({unsubscribe:Mt.runOutsideAngular(()=>en.onIdTokenChanged(kt=>Dn.next(kt),kt=>Dn.error(kt),()=>Dn.complete()))}))));this.authState=Vn.pipe(Nt(_r),(0,Qe.R)(cn.outsideAngular),(0,Fe.Q)(cn.insideAngular)),this.user=Vn.pipe(Nt(Rr),(0,Qe.R)(cn.outsideAngular),(0,Fe.Q)(cn.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(en=>en?(0,Me.D)(en.getIdToken()):(0,p.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(en=>en?(0,Me.D)(en.getIdTokenResult()):(0,p.of)(null))),this.credential=(0,xe.T)(Vn,hr,this.authState.pipe((0,ut.h)(en=>!en))).pipe((0,Ge.U)(en=>en?.user?en:null),(0,Qe.R)(cn.outsideAngular),(0,Fe.Q)(cn.insideAngular))}return(0,Et.pX)(this,Wn,Mt,{spy:{apply:(Ar,Vn,_r)=>{(Ar.startsWith("signIn")||Ar.startsWith("createUser"))&&_r.then(Rr=>hr.next(Rr))}}})}}return $e.\u0275fac=function(wt){return new(wt||$e)(b.LFG(Et.Dh),b.LFG(Et.xv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Ie.HU),b.LFG(ke,8),b.LFG(fe,8),b.LFG(qe,8),b.LFG(ct,8),b.LFG(bt,8),b.LFG(Jt,8),b.LFG(rt.nm,8))},$e.\u0275prov=b.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"any"}),$e})(),st=(()=>{class $e{constructor(){Ye.Z.registerVersion("angularfire",Ie.q4.full,"auth-compat")}}return $e.\u0275fac=function(wt){return new(wt||$e)},$e.\u0275mod=b.oAB({type:$e}),$e.\u0275inj=b.cJS({providers:[We]}),$e})()},3101:(Yt,Ke,V)=>{V.d(Ke,{ST:()=>kv,yb:()=>Fv});var b=V(4650),Z=V(4986),p=V(9751),De=V(8996),Me=V(9646),xe=V(2122),Fe=V(8675),Pe=V(4482),Ge=V(5403);function be(){return(0,Pe.e)((a,e)=>{let r,c=!1;a.subscribe((0,Ge.x)(e,f=>{const _=r;r=f,c&&e.next([_,f]),c=!0}))})}var fe,Ee=V(4004),Re=V(5026),yt=V(1884),He=V(9300),pt=V(2011),Nt=V(6895),ut=(V(9568),V(3942)),Ie=V(5861),Et=V(9681),gt=V(4859),rt=V(1877),Ye=V(2090),xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke={},qe=qe||{},ct=xt||self;function bt(){}function Jt(a){var e=typeof a;return"array"==(e="object"!=e?e:a?Array.isArray(a)?"array":e:"null")||"object"==e&&"number"==typeof a.length}function Pt(a){var e=typeof a;return"object"==e&&null!=a||"function"==e}var st="closure_uid_"+(1e9*Math.random()>>>0),$e=0;function at(a,e,r){return a.call.apply(a.bind,arguments)}function wt(a,e,r){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,c),a.apply(e,f)}}return function(){return a.apply(e,arguments)}}function dt(a,e,r){return(dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?at:wt).apply(null,arguments)}function Rt(a,e){var r=Array.prototype.slice.call(arguments,1);return function(){var c=r.slice();return c.push.apply(c,arguments),a.apply(this,c)}}function Mt(a,e){function r(){}r.prototype=e.prototype,a.X=e.prototype,a.prototype=new r,a.prototype.constructor=a,a.Wb=function(c,f,_){for(var w=Array(arguments.length-2),N=2;N<arguments.length;N++)w[N-2]=arguments[N];return e.prototype[f].apply(c,w)}}function cn(){this.s=this.s,this.o=this.o}cn.prototype.s=!1,cn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function We(a){Object.prototype.hasOwnProperty.call(a,st)&&a[st]||(a[st]=++$e)}(this)},cn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xt=Array.prototype.indexOf?function(a,e){return Array.prototype.indexOf.call(a,e,void 0)}:function(a,e){if("string"==typeof a)return"string"!=typeof e||1!=e.length?-1:a.indexOf(e,0);for(let r=0;r<a.length;r++)if(r in a&&a[r]===e)return r;return-1};function ft(a){const e=a.length;if(0<e){const r=Array(e);for(let c=0;c<e;c++)r[c]=a[c];return r}return[]}function bn(a,e){for(let r=1;r<arguments.length;r++){const c=arguments[r];if(Jt(c)){const f=a.length||0,_=c.length||0;a.length=f+_;for(let w=0;w<_;w++)a[f+w]=c[w]}else a.push(c)}}function xn(a,e){this.type=a,this.g=this.target=e,this.defaultPrevented=!1}xn.prototype.h=function(){this.defaultPrevented=!0};var Gn=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var a=!1,e=Object.defineProperty({},"passive",{get:function(){a=!0}});try{ct.addEventListener("test",bt,e),ct.removeEventListener("test",bt,e)}catch{}return a}();function Ln(a){return/^[\s\xa0]*$/.test(a)}var hr=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Wn(a,e){return a<e?-1:a>e?1:0}function Ar(){var a=ct.navigator;return a&&(a=a.userAgent)?a:""}function Vn(a){return-1!=Ar().indexOf(a)}function _r(a){return _r[" "](a),a}_r[" "]=bt;var qr,a,en=Vn("Opera"),Dn=Vn("Trident")||Vn("MSIE"),kt=Vn("Edge"),Zn=kt||Dn,Kr=Vn("Gecko")&&!(-1!=Ar().toLowerCase().indexOf("webkit")&&!Vn("Edge"))&&!(Vn("Trident")||Vn("MSIE"))&&!Vn("Edge"),wr=-1!=Ar().toLowerCase().indexOf("webkit")&&!Vn("Edge");function xr(){var a=ct.document;return a?a.documentMode:void 0}e:{var mn="",on=(a=Ar(),Kr?/rv:([^\);]+)(\)|;)/.exec(a):kt?/Edge\/([\d\.]+)/.exec(a):Dn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):wr?/WebKit\/(\S+)/.exec(a):en?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(on&&(mn=on?on[1]:""),Dn){var $t=xr();if(null!=$t&&$t>parseFloat(mn)){qr=String($t);break e}}qr=mn}var Hn={};var or=ct.document&&Dn&&(xr()||parseInt(qr,10))||void 0;function Pr(a,e){if(xn.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var r=this.type=a.type,c=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=e,e=a.relatedTarget){if(Kr){e:{try{_r(e.nodeName);var f=!0;break e}catch{}f=!1}f||(e=null)}}else"mouseover"==r?e=a.fromElement:"mouseout"==r&&(e=a.toElement);this.relatedTarget=e,c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:Nn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Pr.X.h.call(this)}}Mt(Pr,xn);var Nn={2:"touch",3:"pen",4:"mouse"};Pr.prototype.h=function(){Pr.X.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Dr="closure_listenable_"+(1e6*Math.random()|0),Pn=0;function Ci(a,e,r,c,f){this.listener=a,this.proxy=null,this.src=e,this.type=r,this.capture=!!c,this.ha=f,this.key=++Pn,this.ba=this.ea=!1}function rr(a){a.ba=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Lt(a,e,r){for(const c in a)e.call(r,a[c],c,a)}function It(a){const e={};for(const r in a)e[r]=a[r];return e}const Ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(a,e){let r,c;for(let f=1;f<arguments.length;f++){for(r in c=arguments[f],c)a[r]=c[r];for(let _=0;_<Ue.length;_++)r=Ue[_],Object.prototype.hasOwnProperty.call(c,r)&&(a[r]=c[r])}}function Ce(a){this.src=a,this.g={},this.h=0}function ht(a,e){var r=e.type;if(r in a.g){var _,c=a.g[r],f=Xt(c,e);(_=0<=f)&&Array.prototype.splice.call(c,f,1),_&&(rr(e),0==a.g[r].length&&(delete a.g[r],a.h--))}}function mt(a,e,r,c){for(var f=0;f<a.length;++f){var _=a[f];if(!_.ba&&_.listener==e&&_.capture==!!r&&_.ha==c)return f}return-1}Ce.prototype.add=function(a,e,r,c,f){var _=a.toString();(a=this.g[_])||(a=this.g[_]=[],this.h++);var w=mt(a,e,c,f);return-1<w?(e=a[w],r||(e.ea=!1)):((e=new Ci(e,this.src,_,!!c,f)).ea=r,a.push(e)),e};var ge="closure_lm_"+(1e6*Math.random()|0),pe={};function ne(a,e,r,c,f){if(c&&c.once)return Le(a,e,r,c,f);if(Array.isArray(e)){for(var _=0;_<e.length;_++)ne(a,e[_],r,c,f);return null}return r=Qt(r),a&&a[Dr]?a.N(e,r,Pt(c)?!!c.capture:!!c,f):ie(a,e,r,!1,c,f)}function ie(a,e,r,c,f,_){if(!e)throw Error("Invalid event type");var w=Pt(f)?!!f.capture:!!f,N=Ze(a);if(N||(a[ge]=N=new Ce(a)),(r=N.add(e,r,c,w,_)).proxy)return r;if(c=function Q(){const e=Oe;return function a(r){return e.call(a.src,a.listener,r)}}(),r.proxy=c,c.src=a,c.listener=r,a.addEventListener)Gn||(f=w),void 0===f&&(f=!1),a.addEventListener(e.toString(),c,f);else if(a.attachEvent)a.attachEvent(le(e.toString()),c);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(c)}return r}function Le(a,e,r,c,f){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Le(a,e[_],r,c,f);return null}return r=Qt(r),a&&a[Dr]?a.O(e,r,Pt(c)?!!c.capture:!!c,f):ie(a,e,r,!0,c,f)}function ce(a,e,r,c,f){if(Array.isArray(e))for(var _=0;_<e.length;_++)ce(a,e[_],r,c,f);else c=Pt(c)?!!c.capture:!!c,r=Qt(r),a&&a[Dr]?(a=a.i,(e=String(e).toString())in a.g&&-1<(r=mt(_=a.g[e],r,c,f))&&(rr(_[r]),Array.prototype.splice.call(_,r,1),0==_.length&&(delete a.g[e],a.h--))):a&&(a=Ze(a))&&(e=a.g[e.toString()],a=-1,e&&(a=mt(e,r,c,f)),(r=-1<a?e[a]:null)&&me(r))}function me(a){if("number"!=typeof a&&a&&!a.ba){var e=a.src;if(e&&e[Dr])ht(e.i,a);else{var r=a.type,c=a.proxy;e.removeEventListener?e.removeEventListener(r,c,a.capture):e.detachEvent?e.detachEvent(le(r),c):e.addListener&&e.removeListener&&e.removeListener(c),(r=Ze(e))?(ht(r,a),0==r.h&&(r.src=null,e[ge]=null)):rr(a)}}}function le(a){return a in pe?pe[a]:pe[a]="on"+a}function Oe(a,e){if(a.ba)a=!0;else{e=new Pr(e,this);var r=a.listener,c=a.ha||a.src;a.ea&&me(a),a=r.call(c,e)}return a}function Ze(a){return(a=a[ge])instanceof Ce?a:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qt(a){return"function"==typeof a?a:(a[vt]||(a[vt]=function(e){return a.handleEvent(e)}),a[vt])}function Ht(){cn.call(this),this.i=new Ce(this),this.P=this,this.I=null}function vn(a,e){var r,c=a.I;if(c)for(r=[];c;c=c.I)r.push(c);if(a=a.P,c=e.type||e,"string"==typeof e)e=new xn(e,a);else if(e instanceof xn)e.target=e.target||a;else{var f=e;ye(e=new xn(c,a),f)}if(f=!0,r)for(var _=r.length-1;0<=_;_--){var w=e.g=r[_];f=gi(w,c,!0,e)&&f}if(f=gi(w=e.g=a,c,!0,e)&&f,f=gi(w,c,!1,e)&&f,r)for(_=0;_<r.length;_++)f=gi(w=e.g=r[_],c,!1,e)&&f}function gi(a,e,r,c){if(!(e=a.i.g[String(e)]))return!0;e=e.concat();for(var f=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ba&&w.capture==r){var N=w.listener,H=w.ha||w.src;w.ea&&ht(a.i,w),f=!1!==N.call(H,c)&&f}}return f&&!c.defaultPrevented}Mt(Ht,cn),Ht.prototype[Dr]=!0,Ht.prototype.removeEventListener=function(a,e,r,c){ce(this,a,e,r,c)},Ht.prototype.M=function(){if(Ht.X.M.call(this),this.i){var e,a=this.i;for(e in a.g){for(var r=a.g[e],c=0;c<r.length;c++)rr(r[c]);delete a.g[e],a.h--}}this.I=null},Ht.prototype.N=function(a,e,r,c){return this.i.add(String(a),e,!1,r,c)},Ht.prototype.O=function(a,e,r,c){return this.i.add(String(a),e,!0,r,c)};var Ti=ct.JSON.stringify;function Ks(){var a=Fi;let e=null;return a.g&&(e=a.g,a.g=a.g.next,a.g||(a.h=null),e.next=null),e}var $n,Br=new class{constructor(a,e){this.i=a,this.j=e,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new zi,a=>a.reset());class zi{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Ps(a){ct.setTimeout(()=>{throw a},0)}function Ys(a,e){$n||function Xr(){var a=ct.Promise.resolve(void 0);$n=function(){a.then(Wi)}}(),ei||($n(),ei=!0),Fi.add(a,e)}var ei=!1,Fi=new class qs{constructor(){this.h=this.g=null}add(e,r){const c=Br.get();c.set(e,r),this.h?this.h.next=c:this.g=c,this.h=c}};function Wi(){for(var a;a=Ks();){try{a.h.call(a.g)}catch(r){Ps(r)}var e=Br;e.j(a),100>e.h&&(e.h++,a.next=e.g,e.g=a)}ei=!1}function ir(a,e){Ht.call(this),this.h=a||1,this.g=e||ct,this.j=dt(this.lb,this),this.l=Date.now()}function Ki(a){a.ca=!1,a.R&&(a.g.clearTimeout(a.R),a.R=null)}function ni(a,e,r){if("function"==typeof a)r&&(a=dt(a,r));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=dt(a.handleEvent,a)}return 2147483647<Number(e)?-1:ct.setTimeout(a,e||0)}function mi(a){a.g=ni(()=>{a.g=null,a.i&&(a.i=!1,mi(a))},a.j);const e=a.h;a.h=null,a.m.apply(null,e)}Mt(ir,Ht),(fe=ir.prototype).ca=!1,fe.R=null,fe.lb=function(){if(this.ca){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-a):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vn(this,"tick"),this.ca&&(Ki(this),this.start()))}},fe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.M=function(){ir.X.M.call(this),Ki(this),delete this.g};class qt extends cn{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mi(this)}M(){super.M(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function En(a){cn.call(this),this.h=a,this.g={}}Mt(En,cn);var ar=[];function kr(a,e,r,c){Array.isArray(r)||(r&&(ar[0]=r.toString()),r=ar);for(var f=0;f<r.length;f++){var _=ne(e,r[f],c||a.handleEvent,!1,a.h||a);if(!_)break;a.g[_.key]=_}}function Ui(a){Lt(a.g,function(e,r){this.g.hasOwnProperty(r)&&me(e)},a),a.g={}}function yr(){this.g=!0}function ri(a,e,r,c){a.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _n(a,e){if(!a.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(a=0;a<r.length;a++)if(Array.isArray(r[a])){var c=r[a];if(!(2>c.length)){var f=c[1];if(Array.isArray(f)&&!(1>f.length)){var _=f[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<f.length;w++)f[w]=""}}}return Ti(r)}catch{return e}}(a,r)+(c?" "+c:"")})}En.prototype.M=function(){En.X.M.call(this),Ui(this)},En.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yr.prototype.Aa=function(){this.g=!1},yr.prototype.info=function(){};var Bi={},_i=null;function cs(){return _i=_i||new Ht}function rs(a){xn.call(this,Bi.Pa,a)}function yi(a){const e=cs();vn(e,new rs(e))}function is(a,e){xn.call(this,Bi.STAT_EVENT,a),this.stat=e}function Gr(a){const e=cs();vn(e,new is(e,a))}function vi(a,e){xn.call(this,Bi.Qa,a),this.size=e}function Es(a,e){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){a()},e)}Bi.Pa="serverreachability",Mt(rs,xn),Bi.STAT_EVENT="statevent",Mt(is,xn),Bi.Qa="timingevent",Mt(vi,xn);var Ve={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Te={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Xe(){}function Wt(){}Xe.prototype.h=null;var kn,hn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Mn(){xn.call(this,"d")}function Xn(){xn.call(this,"c")}function ws(){}function Yr(a,e,r,c){this.l=a,this.j=e,this.m=r,this.U=c||1,this.S=new En(this),this.O=ds,this.T=new ir(a=Zn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new fr}function fr(){this.i=null,this.g="",this.h=!1}Mt(Mn,xn),Mt(Xn,xn),Mt(ws,Xe),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},kn=new ws;var ds=45e3,hs={},qi={};function fs(a,e,r){a.K=1,a.v=Gi(gs(e)),a.s=r,a.P=!0,Fo(a,null)}function Fo(a,e){a.F=Date.now(),Lo(a),a.A=gs(a.v);var r=a.A,c=a.U;Array.isArray(c)||(c=[String(c)]),Do(r.i,"t",c),a.C=0,r=a.l.H,a.h=new fr,a.g=Vl(a.l,r?e:null,!a.s),0<a.N&&(a.L=new qt(dt(a.La,a,a.g),a.N)),kr(a.S,a.g,"readystatechange",a.ib),e=a.H?It(a.H):{},a.s?(a.u||(a.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",a.g.da(a.A,a.u,a.s,e)):(a.u="GET",a.g.da(a.A,a.u,null,e)),yi(),function Ir(a,e,r,c,f,_){a.info(function(){if(a.g)if(_)for(var w="",N=_.split("&"),H=0;H<N.length;H++){var q=N[H].split("=");if(1<q.length){var ae=q[0];q=q[1];var Se=ae.split("_");w=2<=Se.length&&"type"==Se[1]?w+(ae+"=")+q+"&":w+(ae+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+c+") [attempt "+f+"]: "+e+"\n"+r+"\n"+w})}(a.j,a.u,a.A,a.m,a.U,a.s)}function Vi(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Da}function Eo(a,e,r){let f,c=!0;for(;!a.I&&a.C<r.length;){if(f=ks(a,r),f==qi){4==e&&(a.o=4,Gr(14),c=!1),ri(a.j,a.m,null,"[Incomplete Response]");break}if(f==hs){a.o=4,Gr(15),ri(a.j,a.m,r,"[Invalid Chunk]"),c=!1;break}ri(a.j,a.m,f,null),Uo(a,f)}Vi(a)&&f!=qi&&f!=hs&&(a.h.g="",a.C=0),4!=e||0!=r.length||a.h.h||(a.o=1,Gr(16),c=!1),a.i=a.i&&c,c?0<r.length&&!a.$&&(a.$=!0,(e=a.l).g==a&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),tl(e),e.K=!0,Gr(11))):(ri(a.j,a.m,r,"[Invalid Chunked Response]"),ps(a),wo(a))}function ks(a,e){var r=a.C,c=e.indexOf("\n",r);return-1==c?qi:(r=Number(e.substring(r,c)),isNaN(r)?hs:(c+=1)+r>e.length?qi:(e=e.substr(c,r),a.C=c+r,e))}function Lo(a){a.V=Date.now()+a.O,uo(a,a.O)}function uo(a,e){if(null!=a.B)throw Error("WatchDog timer not null");a.B=Es(dt(a.gb,a),e)}function ha(a){a.B&&(ct.clearTimeout(a.B),a.B=null)}function wo(a){0==a.l.G||a.I||rl(a.l,a)}function ps(a){ha(a);var e=a.L;e&&"function"==typeof e.na&&e.na(),a.L=null,Ki(a.T),Ui(a.S),a.g&&(e=a.g,a.g=null,e.abort(),e.na())}function Uo(a,e){try{var r=a.l;if(0!=r.G&&(r.g==a||ai(r.h,a)))if(!a.J&&ai(r.h,a)&&3==r.G){try{var c=r.Fa.g.parse(e)}catch{c=null}if(Array.isArray(c)&&3==c.length){var f=c;if(0==f[0]){e:if(!r.u){if(r.g){if(!(r.g.F+3e3<a.F))break e;nl(r),vs(r)}va(r),Gr(18)}}else r.Ba=f[1],0<r.Ba-r.T&&37500>f[2]&&r.L&&0==r.A&&!r.v&&(r.v=Es(dt(r.cb,r),6e3));if(1>=ys(r.h)&&r.ja){try{r.ja()}catch{}r.ja=void 0}}else ia(r,11)}else if((a.J||r.g==a)&&nl(r),!Ln(e))for(f=r.Fa.g.parse(e),e=0;e<f.length;e++){let q=f[e];if(r.T=q[0],q=q[1],2==r.G)if("c"==q[0]){r.I=q[1],r.ka=q[2];const ae=q[3];null!=ae&&(r.ma=ae,r.j.info("VER="+r.ma));const Se=q[4];null!=Se&&(r.Ca=Se,r.j.info("SVER="+r.Ca));const et=q[5];null!=et&&"number"==typeof et&&0<et&&(r.J=c=1.5*et,r.j.info("backChannelRequestTimeoutMs_="+c)),c=r;const Tt=a.g;if(Tt){const Vt=Tt.g?Tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var _=c.h;_.g||-1==Vt.indexOf("spdy")&&-1==Vt.indexOf("quic")&&-1==Vt.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(pa(_,_.h),_.h=null))}if(c.D){const ln=Tt.g?Tt.g.getResponseHeader("X-HTTP-Session-Id"):null;ln&&(c.za=ln,jr(c.F,c.D,ln))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-a.F,r.j.info("Handshake RTT: "+r.P+"ms"));var w=a;if((c=r).sa=uu(c,c.H?c.ka:null,c.V),w.J){Fa(c.h,w);var N=w,H=c.J;H&&N.setTimeout(H),N.B&&(ha(N),Lo(N)),c.g=w}else bl(c);0<r.i.length&&_a(r)}else"stop"!=q[0]&&"close"!=q[0]||ia(r,7);else 3==r.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?ia(r,7):ra(r):"noop"!=q[0]&&r.l&&r.l.wa(q),r.A=0)}yi()}catch{}}function Ja(a,e){if(a.forEach&&"function"==typeof a.forEach)a.forEach(e,void 0);else if(Jt(a)||"string"==typeof a)Array.prototype.forEach.call(a,e,void 0);else for(var r=function Ls(a){if(a.oa&&"function"==typeof a.oa)return a.oa();if(!a.W||"function"!=typeof a.W){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(Jt(a)||"string"==typeof a){var e=[];a=a.length;for(var r=0;r<a;r++)e.push(r);return e}e=[],r=0;for(const c in a)e[r++]=c;return e}}}(a),c=function Fs(a){if(a.W&&"function"==typeof a.W)return a.W();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if("string"==typeof a)return a.split("");if(Jt(a)){for(var e=[],r=a.length,c=0;c<r;c++)e.push(a[c]);return e}for(c in e=[],r=0,a)e[r++]=a[c];return e}(a),f=c.length,_=0;_<f;_++)e.call(void 0,c[_],r&&r[_],a)}(fe=Yr.prototype).setTimeout=function(a){this.O=a},fe.ib=function(a){a=a.target;const e=this.L;e&&3==Cs(a)?e.l():this.La(a)},fe.La=function(a){try{if(a==this.g)e:{const ae=Cs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ae)&&(3!=ae||Zn||this.g&&(this.h.h||this.g.fa()||ma(this.g)))){this.I||4!=ae||7==e||yi(),ha(this);var r=this.g.aa();this.Y=r;t:if(Vi(this)){var c=ma(this.g);a="";var f=c.length,_=4==Cs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),wo(this);var w="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,a+=this.h.i.decode(c[e],{stream:_&&e==f-1});c.splice(0,f),this.h.g+=a,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==r,function Vr(a,e,r,c,f,_,w){a.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+f+"]: "+e+"\n"+r+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.U,ae,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,H=this.g;if((N=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ln(N)){var q=N;break t}}q=null}if(!(r=q)){this.i=!1,this.o=3,Gr(12),ps(this),wo(this);break e}ri(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Uo(this,r)}this.P?(Eo(this,ae,w),Zn&&this.i&&3==ae&&(kr(this.S,this.T,"tick",this.hb),this.T.start())):(ri(this.j,this.m,w,null),Uo(this,w)),4==ae&&ps(this),this.i&&!this.I&&(4==ae?rl(this.l,this):(this.i=!1,Lo(this)))}else 400==r&&0<w.indexOf("Unknown SID")?(this.o=3,Gr(12)):(this.o=0,Gr(13)),ps(this),wo(this)}}}catch{}},fe.hb=function(){if(this.g){var a=Cs(this.g),e=this.g.fa();this.C<e.length&&(ha(this),Eo(this,a,e),this.i&&4!=a&&Lo(this))}},fe.cancel=function(){this.I=!0,ps(this)},fe.gb=function(){this.B=null;const a=Date.now();0<=a-this.V?(function ko(a,e){a.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yi(),Gr(17)),ps(this),this.o=2,wo(this)):uo(this,this.V-a)};var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function co(a,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,a instanceof co){this.h=void 0!==e?e:a.h,Zs(this,a.j),this.s=a.s,this.g=a.g,Bo(this,a.m),this.l=a.l,e=a.i;var r=new _s;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),Qa(this,r),this.o=a.o}else a&&(r=String(a).match(fa))?(this.h=!!e,Zs(this,r[1]||"",!0),this.s=ms(r[2]||""),this.g=ms(r[3]||"",!0),Bo(this,r[4]),this.l=ms(r[5]||"",!0),Qa(this,r[6]||"",!0),this.o=ms(r[7]||"")):(this.h=!!e,this.i=new _s(null,this.h))}function gs(a){return new co(a)}function Zs(a,e,r){a.j=r?ms(e,!0):e,a.j&&(a.j=a.j.replace(/:$/,""))}function Bo(a,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);a.m=e}else a.m=null}function Qa(a,e,r){e instanceof _s?(a.i=e,function Li(a,e){e&&!a.j&&(Is(a),a.i=null,a.g.forEach(function(r,c){var f=c.toLowerCase();c!=f&&(pr(this,c),Do(this,f,r))},a)),a.j=e}(a.i,a.h)):(r||(e=Ds(e,ka)),a.i=new _s(e,a.h))}function jr(a,e,r){a.i.set(e,r)}function Gi(a){return jr(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ms(a,e){return a?e?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ds(a,e,r){return"string"==typeof a?(a=encodeURI(a).replace(e,Qo),r&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Qo(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}co.prototype.toString=function(){var a=[],e=this.j;e&&a.push(Ds(e,Js,!0),":");var r=this.g;return(r||"file"==e)&&(a.push("//"),(e=this.s)&&a.push(Ds(e,Js,!0),"@"),a.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&a.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&a.push("/"),a.push(Ds(r,"/"==r.charAt(0)?Xa:Zi,!0))),(r=this.i.toString())&&a.push("?",r),(r=this.o)&&a.push("#",Ds(r,_l)),a.join("")};var Js=/[#\/\?@]/g,Zi=/[#\?:]/g,Xa=/[#\?]/g,ka=/[#\?@]/g,_l=/#/g;function _s(a,e){this.h=this.g=null,this.i=a||null,this.j=!!e}function Is(a){a.g||(a.g=new Map,a.h=0,a.i&&function Yi(a,e){if(a){a=a.split("&");for(var r=0;r<a.length;r++){var c=a[r].indexOf("="),f=null;if(0<=c){var _=a[r].substring(0,c);f=a[r].substring(c+1)}else _=a[r];e(_,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}(a.i,function(e,r){a.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function pr(a,e){Is(a),e=Or(a,e),a.g.has(e)&&(a.i=null,a.h-=a.g.get(e).length,a.g.delete(e))}function Vo(a,e){return Is(a),e=Or(a,e),a.g.has(e)}function Do(a,e,r){pr(a,e),0<r.length&&(a.i=null,a.g.set(Or(a,e),ft(r)),a.h+=r.length)}function Or(a,e){return e=String(e),a.j&&(e=e.toLowerCase()),e}function oi(a){this.l=a||el,a=ct.PerformanceNavigationTiming?0<(a=ct.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(ct.g&&ct.g.Ga&&ct.g.Ga()&&ct.g.Ga().$b),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=_s.prototype).add=function(a,e){Is(this),this.i=null,a=Or(this,a);var r=this.g.get(a);return r||this.g.set(a,r=[]),r.push(e),this.h+=1,this},fe.forEach=function(a,e){Is(this),this.g.forEach(function(r,c){r.forEach(function(f){a.call(e,f,c,this)},this)},this)},fe.oa=function(){Is(this);const a=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let c=0;c<e.length;c++){const f=a[c];for(let _=0;_<f.length;_++)r.push(e[c])}return r},fe.W=function(a){Is(this);let e=[];if("string"==typeof a)Vo(this,a)&&(e=e.concat(this.g.get(Or(this,a))));else{a=Array.from(this.g.values());for(let r=0;r<a.length;r++)e=e.concat(a[r])}return e},fe.set=function(a,e){return Is(this),this.i=null,Vo(this,a=Or(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[e]),this.h+=1,this},fe.get=function(a,e){return a&&0<(a=this.W(a)).length?String(a[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var c=e[r];const _=encodeURIComponent(String(c)),w=this.W(c);for(c=0;c<w.length;c++){var f=_;""!==w[c]&&(f+="="+encodeURIComponent(String(w[c]))),a.push(f)}}return this.i=a.join("&")};var el=10;function Go(a){return!!a.h||!!a.g&&a.g.size>=a.j}function ys(a){return a.h?1:a.g?a.g.size:0}function ai(a,e){return a.h?a.h==e:!!a.g&&a.g.has(e)}function pa(a,e){a.g?a.g.add(e):a.h=e}function Fa(a,e){a.h&&a.h==e?a.h=null:a.g&&a.g.has(e)&&a.g.delete(e)}function fo(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let e=a.i;for(const r of a.g.values())e=e.concat(r.D);return e}return ft(a.i)}function ji(){}function Xo(){this.g=new ji}function yl(a,e,r){const c=r||"";try{Ja(a,function(f,_){let w=f;Pt(f)&&(w=Ti(f)),e.push(c+_+"="+encodeURIComponent(w))})}catch(f){throw e.push(c+"type="+encodeURIComponent("_badmap")),f}}function po(a,e,r,c,f){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,f(c)}catch{}}function jo(a){this.l=a.ac||null,this.j=a.jb||!1}function ea(a,e){Ht.call(this),this.D=a,this.u=e,this.m=void 0,this.readyState=ta,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oi.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},ji.prototype.stringify=function(a){return ct.JSON.stringify(a,void 0)},ji.prototype.parse=function(a){return ct.JSON.parse(a,void 0)},Mt(jo,Xe),jo.prototype.g=function(){return new ea(this.l,this.j)},jo.prototype.i=function(a){return function(){return a}}({}),Mt(ea,Ht);var ta=0;function Bl(a){a.j.read().then(a.Ta.bind(a)).catch(a.ga.bind(a))}function Io(a){a.readyState=4,a.l=null,a.j=null,a.A=null,ga(a)}function ga(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(fe=ea.prototype).open=function(a,e){if(this.readyState!=ta)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=e,this.readyState=1,ga(this)},fe.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(e.body=a),(this.D||ct).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Io(this)),this.readyState=ta},fe.Wa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ct.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bl(this)}else a.text().then(this.Va.bind(this),this.ga.bind(this))},fe.Ta=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var e=a.value?a.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!a.done}))&&(this.response=this.responseText+=e)}a.done?Io(this):ga(this),3==this.readyState&&Bl(this)}},fe.Va=function(a){this.g&&(this.response=this.responseText=a,Io(this))},fe.Ua=function(a){this.g&&(this.response=a,Io(this))},fe.ga=function(){this.g&&Io(this)},fe.setRequestHeader=function(a,e){this.v.append(a,e)},fe.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],e=this.h.entries();for(var r=e.next();!r.done;)a.push((r=r.value)[0]+": "+r[1]),r=e.next();return a.join("\r\n")},Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var j=ct.JSON.parse;function R(a){Ht.call(this),this.headers=new Map,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=L,this.K=this.L=!1}Mt(R,Ht);var L="",oe=/^https?$/i,lt=["POST","PUT"];function Fr(a,e){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=e,a.m=5,Si(a),Qs(a)}function Si(a){a.D||(a.D=!0,vn(a,"complete"),vn(a,"error"))}function bi(a){if(a.h&&typeof qe<"u"&&(!a.C[1]||4!=Cs(a)||2!=a.aa()))if(a.v&&4==Cs(a))ni(a.Ha,0,a);else if(vn(a,"readystatechange"),4==Cs(a)){a.h=!1;try{const N=a.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var c;if(c=0===N){var f=String(a.H).match(fa)[1]||null;if(!f&&ct.self&&ct.self.location){var _=ct.self.location.protocol;f=_.substr(0,_.length-1)}c=!oe.test(f?f.toLowerCase():"")}r=c}if(r)vn(a,"complete"),vn(a,"success");else{a.m=6;try{var w=2<Cs(a)?a.g.statusText:""}catch{w=""}a.j=w+" ["+a.aa()+"]",Si(a)}}finally{Qs(a)}}}function Qs(a,e){if(a.g){Xs(a);const r=a.g,c=a.C[0]?bt:null;a.g=null,a.C=null,e||vn(a,"ready");try{r.onreadystatechange=c}catch{}}}function Xs(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(ct.clearTimeout(a.A),a.A=null)}function Cs(a){return a.g?a.g.readyState:0}function ma(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case L:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function vl(a){let e="";return Lt(a,function(r,c){e+=c,e+=":",e+=r,e+="\r\n"}),e}function li(a,e,r){e:{for(c in r){var c=!1;break e}c=!0}c||(r=vl(r),"string"==typeof a?null!=r&&encodeURIComponent(String(r)):jr(a,e,r))}function Ji(a,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[a]||e}function na(a){this.Ca=0,this.i=[],this.j=new yr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ji("failFast",!1,a),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ji("baseRetryDelayMs",5e3,a),this.bb=Ji("retryDelaySeedMs",1e4,a),this.$a=Ji("forwardChannelMaxRetries",2,a),this.ta=Ji("forwardChannelRequestTimeoutMs",2e4,a),this.ra=a&&a.xmlHttpFactory||void 0,this.Da=a&&a.Zb||!1,this.J=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.I="",this.h=new oi(a&&a.concurrentRequestLimit),this.Fa=new Xo,this.O=a&&a.fastHandshake||!1,this.N=a&&a.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=a&&a.Xb||!1,a&&a.Aa&&this.j.Aa(),a&&a.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&a&&a.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ra(a){if(Ho(a),3==a.G){var e=a.U++,r=gs(a.F);jr(r,"SID",a.I),jr(r,"RID",e),jr(r,"TYPE","terminate"),$o(a,r),(e=new Yr(a,a.j,e,void 0)).K=2,e.v=Gi(gs(r)),r=!1,ct.navigator&&ct.navigator.sendBeacon&&(r=ct.navigator.sendBeacon(e.v.toString(),"")),!r&&ct.Image&&((new Image).src=e.v,r=!0),r||(e.g=Vl(e.l,null),e.g.da(e.v)),e.F=Date.now(),Lo(e)}wc(a)}function vs(a){a.g&&(tl(a),a.g.cancel(),a.g=null)}function Ho(a){vs(a),a.u&&(ct.clearTimeout(a.u),a.u=null),nl(a),a.h.cancel(),a.m&&("number"==typeof a.m&&ct.clearTimeout(a.m),a.m=null)}function _a(a){Go(a.h)||a.m||(a.m=!0,Ys(a.Ja,a),a.C=0)}function ya(a,e){var r;r=e?e.m:a.U++;const c=gs(a.F);jr(c,"SID",a.I),jr(c,"RID",r),jr(c,"AID",a.T),$o(a,c),a.o&&a.s&&li(c,a.o,a.s),r=new Yr(a,a.j,r,a.C+1),null===a.o&&(r.H=a.s),e&&(a.i=e.D.concat(a.i)),e=La(a,r,1e3),r.setTimeout(Math.round(.5*a.ta)+Math.round(.5*a.ta*Math.random())),pa(a.h,r),fs(r,c,e)}function $o(a,e){a.ia&&Lt(a.ia,function(r,c){jr(e,c,r)}),a.l&&Ja({},function(r,c){jr(e,c,r)})}function La(a,e,r){r=Math.min(a.i.length,r);var c=a.l?dt(a.l.Ra,a.l,a):null;e:{var f=a.i;let _=-1;for(;;){const w=["count="+r];-1==_?0<r?(_=f[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let N=!0;for(let H=0;H<r;H++){let q=f[H].h;const ae=f[H].g;if(q-=_,0>q)_=Math.max(0,f[H].h-100),N=!1;else try{yl(ae,w,"req"+q+"_")}catch{c&&c(ae)}}if(N){c=w.join("&");break e}}}return a=a.i.splice(0,r),e.D=a,c}function bl(a){a.g||a.u||(a.Z=1,Ys(a.Ia,a),a.A=0)}function va(a){return!(a.g||a.u||3<=a.A||(a.Z++,a.u=Es(dt(a.Ia,a),lu(a,a.A)),a.A++,0))}function tl(a){null!=a.B&&(ct.clearTimeout(a.B),a.B=null)}function ba(a){a.g=new Yr(a,a.j,"rpc",a.Z),null===a.o&&(a.g.H=a.s),a.g.N=0;var e=gs(a.sa);jr(e,"RID","rpc"),jr(e,"SID",a.I),jr(e,"CI",a.L?"0":"1"),jr(e,"AID",a.T),jr(e,"TYPE","xmlhttp"),$o(a,e),a.o&&a.s&&li(e,a.o,a.s),a.J&&a.g.setTimeout(a.J);var r=a.g;a=a.ka,r.K=1,r.v=Gi(gs(e)),r.s=null,r.P=!0,Fo(r,a)}function nl(a){null!=a.v&&(ct.clearTimeout(a.v),a.v=null)}function rl(a,e){var r=null;if(a.g==e){nl(a),tl(a),a.g=null;var c=2}else{if(!ai(a.h,e))return;r=e.D,Fa(a.h,e),c=1}if(0!=a.G)if(a.pa=e.Y,e.i)if(1==c){r=e.s?e.s.length:0,e=Date.now()-e.F;var f=a.C;vn(c=cs(),new vi(c,r)),_a(a)}else bl(a);else if(3==(f=e.o)||0==f&&0<a.pa||!(1==c&&function Hu(a,e){return!(ys(a.h)>=a.h.j-(a.m?1:0)||(a.m?(a.i=e.D.concat(a.i),0):1==a.G||2==a.G||a.C>=(a.Za?0:a.$a)||(a.m=Es(dt(a.Ja,a,e),lu(a,a.C)),a.C++,0)))}(a,e)||2==c&&va(a)))switch(r&&0<r.length&&(e=a.h,e.i=e.i.concat(r)),f){case 1:ia(a,5);break;case 4:ia(a,10);break;case 3:ia(a,6);break;default:ia(a,2)}}function lu(a,e){let r=a.Xa+Math.floor(Math.random()*a.bb);return a.l||(r*=2),r*e}function ia(a,e){if(a.j.info("Error code "+e),2==e){var r=null;a.l&&(r=null);var c=dt(a.kb,a);r||(r=new co("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||Zs(r,"https"),Gi(r)),function An(a,e){const r=new yr;if(ct.Image){const c=new Image;c.onload=Rt(po,r,c,"TestLoadImage: loaded",!0,e),c.onerror=Rt(po,r,c,"TestLoadImage: error",!1,e),c.onabort=Rt(po,r,c,"TestLoadImage: abort",!1,e),c.ontimeout=Rt(po,r,c,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=a}else e(!1)}(r.toString(),c)}else Gr(2);a.G=0,a.l&&a.l.va(e),wc(a),Ho(a)}function wc(a){if(a.G=0,a.la=[],a.l){const e=fo(a.h);(0!=e.length||0!=a.i.length)&&(bn(a.la,e),bn(a.la,a.i),a.h.i.length=0,ft(a.i),a.i.length=0),a.l.ua()}}function uu(a,e,r){var c=r instanceof co?gs(r):new co(r,void 0);if(""!=c.g)e&&(c.g=e+"."+c.g),Bo(c,c.m);else{var f=ct.location;c=f.protocol,e=e?e+"."+f.hostname:f.hostname,f=+f.port;var _=new co(null,void 0);c&&Zs(_,c),e&&(_.g=e),f&&Bo(_,f),r&&(_.l=r),c=_}return e=a.za,(r=a.D)&&e&&jr(c,r,e),jr(c,"VER",a.ma),$o(a,c),c}function Vl(a,e,r){if(e&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new R(r&&a.Da&&!a.ra?new jo({jb:!0}):a.ra)).Ka(a.H),e}function $u(){}function Ai(){if(Dn&&!(10<=Number(or)))throw Error("Environmental error: no available transport.")}function ui(a,e){Ht.call(this),this.g=new na(e),this.l=a,this.h=e&&e.messageUrlParams||null,a=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(a?a["X-WebChannel-Content-Type"]=e.messageContentType:a={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(a?a["X-WebChannel-Client-Profile"]=e.ya:a={"X-WebChannel-Client-Profile":e.ya}),this.g.S=a,(a=e&&e.Yb)&&!Ln(a)&&(this.g.o=a),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ln(e)&&(this.g.D=e,null!==(a=this.h)&&e in a&&e in(a=this.h)&&delete a[e]),this.j=new Oi(this)}function ii(a){Mn.call(this);var e=a.__sm__;if(e){e:{for(const r in e){a=r;break e}a=void 0}(this.i=a)&&(a=this.i,e=null!==e&&a in e?e[a]:void 0),this.data=e}else this.data=a}function Gl(){Xn.call(this),this.status=1}function Oi(a){this.g=a}(fe=R.prototype).Ka=function(a){this.L=a},fe.da=function(a,e,r,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);e=e?e.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kn.g(),this.C=function Ct(a){return a.h||(a.h=a.i())}(this.u?this.u:kn),this.g.onreadystatechange=dt(this.Ha,this);try{this.F=!0,this.g.open(e,String(a),!0),this.F=!1}catch(_){return void Fr(this,_)}if(a=r||"",r=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var f in c)r.set(f,c[f]);else{if("function"!=typeof c.keys||"function"!=typeof c.get)throw Error("Unknown input type for opt_headers: "+String(c));for(const _ of c.keys())r.set(_,c.get(_))}c=Array.from(r.keys()).find(_=>"content-type"==_.toLowerCase()),f=ct.FormData&&a instanceof ct.FormData,!(0<=Xt(lt,e))||c||f||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of r)this.g.setRequestHeader(_,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xs(this),0<this.B&&((this.K=function rn(a){return Dn&&function Kn(){return function Rr(a){var e=Hn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=a(9)}(function(){let a=0;const e=hr(String(qr)).split("."),r=hr("9").split("."),c=Math.max(e.length,r.length);for(let w=0;0==a&&w<c;w++){var f=e[w]||"",_=r[w]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==f[0].length&&0==_[0].length)break;a=Wn(0==f[1].length?0:parseInt(f[1],10),0==_[1].length?0:parseInt(_[1],10))||Wn(0==f[2].length,0==_[2].length)||Wn(f[2],_[2]),f=f[3],_=_[3]}while(0==a)}return 0<=a})}()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dt(this.qa,this)):this.A=ni(this.qa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(_){Fr(this,_)}},fe.qa=function(){typeof qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))},fe.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,vn(this,"complete"),vn(this,"abort"),Qs(this))},fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qs(this,!0)),R.X.M.call(this)},fe.Ha=function(){this.s||(this.F||this.v||this.l?bi(this):this.fb())},fe.fb=function(){bi(this)},fe.aa=function(){try{return 2<Cs(this)?this.g.status:-1}catch{return-1}},fe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Sa=function(a){if(this.g){var e=this.g.responseText;return a&&0==e.indexOf(a)&&(e=e.substring(a.length)),j(e)}},fe.Ea=function(){return this.m},fe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=na.prototype).ma=8,fe.G=1,fe.Ja=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const f=new Yr(this,this.j,a,void 0);let _=this.s;if(this.S&&(_?(_=It(_),ye(_,this.S)):_=this.S),null!==this.o||this.N||(f.H=_,_=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var c=this.i[r];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(e+=c)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=La(this,f,e),jr(r=gs(this.F),"RID",a),jr(r,"CVER",22),this.D&&jr(r,"X-HTTP-Session-Id",this.D),$o(this,r),_&&(this.N?e="headers="+encodeURIComponent(String(vl(_)))+"&"+e:this.o&&li(r,this.o,_)),pa(this.h,f),this.Ya&&jr(r,"TYPE","init"),this.O?(jr(r,"$req",e),jr(r,"SID","null"),f.Z=!0,fs(f,r,null)):fs(f,r,e),this.G=2}}else 3==this.G&&(a?ya(this,a):0==this.i.length||Go(this.h)||ya(this))},fe.Ia=function(){if(this.u=null,ba(this),this.$&&!(this.K||null==this.g||0>=this.P)){var a=2*this.P;this.j.info("BP detection timer enabled: "+a),this.B=Es(dt(this.eb,this),a)}},fe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Gr(10),vs(this),ba(this))},fe.cb=function(){null!=this.v&&(this.v=null,vs(this),va(this),Gr(19))},fe.kb=function(a){a?(this.j.info("Successfully pinged google.com"),Gr(2)):(this.j.info("Failed to ping google.com"),Gr(1))},(fe=$u.prototype).xa=function(){},fe.wa=function(){},fe.va=function(){},fe.ua=function(){},fe.Ra=function(){},Ai.prototype.g=function(a,e){return new ui(a,e)},Mt(ui,Ht),ui.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var a=this.g,e=this.l,r=this.h||void 0;Gr(0),a.V=e,a.ia=r||{},a.L=a.Y,a.F=uu(a,null,a.V),_a(a)},ui.prototype.close=function(){ra(this.g)},ui.prototype.u=function(a){var e=this.g;if("string"==typeof a){var r={};r.__data__=a,a=r}else this.v&&((r={}).__data__=Ti(a),a=r);e.i.push(new class{constructor(a,e){this.h=a,this.g=e}}(e.ab++,a)),3==e.G&&_a(e)},ui.prototype.M=function(){this.g.l=null,delete this.j,ra(this.g),delete this.g,ui.X.M.call(this)},Mt(ii,Mn),Mt(Gl,Xn),Mt(Oi,$u),Oi.prototype.xa=function(){vn(this.g,"a")},Oi.prototype.wa=function(a){vn(this.g,new ii(a))},Oi.prototype.va=function(a){vn(this.g,new Gl)},Oi.prototype.ua=function(){vn(this.g,"b")},Ai.prototype.createWebChannel=Ai.prototype.g,ui.prototype.send=ui.prototype.u,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,Ve.NO_ERROR=0,Ve.TIMEOUT=8,Ve.HTTP_ERROR=6,Te.COMPLETE="complete",Wt.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",Ht.prototype.listen=Ht.prototype.N,R.prototype.listenOnce=R.prototype.O,R.prototype.getLastError=R.prototype.Oa,R.prototype.getLastErrorCode=R.prototype.Ea,R.prototype.getStatus=R.prototype.aa,R.prototype.getResponseJson=R.prototype.Sa,R.prototype.getResponseText=R.prototype.fa,R.prototype.send=R.prototype.da,R.prototype.setWithCredentials=R.prototype.Ka;var zu=ke.createWebChannelTransport=function(){return new Ai},Dc=ke.getStatEventTarget=function(){return cs()},El=ke.ErrorCode=Ve,jl=ke.EventType=Te,il=ke.Event=Bi,sa=ke.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},k=ke.FetchXmlHttpFactory=jo,K=ke.WebChannel=Wt,B=ke.XhrIo=R;const re="@firebase/firestore";class ve{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");let Je="9.18.0";const St=new rt.Yd("@firebase/firestore");function fn(){return St.logLevel}function Dt(a,...e){if(St.logLevel<=rt.in.DEBUG){const r=e.map(qn);St.debug(`Firestore (${Je}): ${a}`,...r)}}function Cn(a,...e){if(St.logLevel<=rt.in.ERROR){const r=e.map(qn);St.error(`Firestore (${Je}): ${a}`,...r)}}function zn(a,...e){if(St.logLevel<=rt.in.WARN){const r=e.map(qn);St.warn(`Firestore (${Je}): ${a}`,...r)}}function qn(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function jt(a="Unexpected state"){const e=`FIRESTORE (${Je}) INTERNAL ASSERTION FAILED: `+a;throw Cn(e),new Error(e)}function Zt(a,e){a||jt()}function zt(a,e){return a}const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ot extends Ye.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class si{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Co{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ve.UNAUTHENTICATED))}shutdown(){}}class ol{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class al{constructor(e){this.t=e,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var c=this;let f=this.i;const _=q=>this.i!==f?(f=this.i,r(q)):Promise.resolve();let w=new si;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new si,e.enqueueRetryable(()=>_(this.currentUser))};const N=()=>{const q=w;e.enqueueRetryable((0,Ie.Z)(function*(){yield q.promise,yield _(c.currentUser)}))},H=q=>{Dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(q=>H(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?H(q):(Dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new si)}},0),N()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(c=>this.i!==e?(Dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):c?(Zt("string"==typeof c.accessToken),new Co(c.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zt(null===e||"string"==typeof e),new ve(e)}}class Ea{constructor(e,r,c,f){this.h=e,this.l=r,this.m=c,this.g=f,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Zt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class zd{constructor(e,r,c,f){this.h=e,this.l=r,this.m=c,this.g=f}getToken(){return Promise.resolve(new Ea(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const c=_=>{null!=_.error&&Dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.A;return this.A=_.token,Dt("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?r(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>c(_))};const f=_=>{Dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>f(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?f(_):Dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Zt("string"==typeof r.token),this.A=r.token,new oa(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function To(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let c=0;c<a;c++)r[c]=Math.floor(256*Math.random());return r}class wl{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let c="";for(;c.length<20;){const f=To(40);for(let _=0;_<f.length;++_)c.length<20&&f[_]<r&&(c+=e.charAt(f[_]%e.length))}return c}}function Fn(a,e){return a<e?-1:a>e?1:0}function wa(a,e,r){return a.length===e.length&&a.every((c,f)=>r(c,e[f]))}function du(a){return a+"\0"}class sr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ot(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ot(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ot(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ot(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),c=Math.floor(1e6*(e-1e3*r));return new sr(r,c)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yn(e)}static min(){return new yn(new sr(0,0))}static max(){return new yn(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ua{constructor(e,r,c){void 0===r?r=0:r>e.length&&jt(),void 0===c?c=e.length-r:c>e.length-r&&jt(),this.segments=e,this.offset=r,this.len=c}get length(){return this.len}isEqual(e){return 0===Ua.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach(c=>{r.push(c)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,c=this.limit();r<c;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const c=Math.min(e.length,r.length);for(let f=0;f<c;f++){const _=e.get(f),w=r.get(f);if(_<w)return-1;if(_>w)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class lr extends Ua{construct(e,r,c){return new lr(e,r,c)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const c of e){if(c.indexOf("//")>=0)throw new Ot(it.INVALID_ARGUMENT,`Invalid segment (${c}). Paths must not contain // in them.`);r.push(...c.split("/").filter(f=>f.length>0))}return new lr(r)}static emptyPath(){return new lr([])}}const Ic=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cr extends Ua{construct(e,r,c){return new Cr(e,r,c)}static isValidIdentifier(e){return Ic.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cr(["__name__"])}static fromServerFormat(e){const r=[];let c="",f=0;const _=()=>{if(0===c.length)throw new Ot(it.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(c),c=""};let w=!1;for(;f<e.length;){const N=e[f];if("\\"===N){if(f+1===e.length)throw new Ot(it.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[f+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Ot(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);c+=H,f+=2}else"`"===N?(w=!w,f++):"."!==N||w?(c+=N,f++):(_(),f++)}if(_(),w)throw new Ot(it.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cr(r)}static emptyPath(){return new Cr([])}}class tn{constructor(e){this.path=e}static fromPath(e){return new tn(lr.fromString(e))}static fromName(e){return new tn(lr.fromString(e).popFirst(5))}static empty(){return new tn(lr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===lr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return lr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tn(new lr(e.slice()))}}class Hl{constructor(e,r,c,f){this.indexId=e,this.collectionGroup=r,this.fields=c,this.indexState=f}}function Da(a){return a.fields.find(e=>2===e.kind)}function Nr(a){return a.fields.filter(e=>2!==e.kind)}Hl.UNKNOWN_ID=-1;class Lr{constructor(e,r){this.fieldPath=e,this.kind=r}}class gr{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new gr(0,xi.min())}}function Ni(a,e){const r=a.toTimestamp().seconds,c=a.toTimestamp().nanoseconds+1,f=yn.fromTimestamp(1e9===c?new sr(r+1,0):new sr(r,c));return new xi(f,tn.empty(),e)}function So(a){return new xi(a.readTime,a.key,-1)}class xi{constructor(e,r,c){this.readTime=e,this.documentKey=r,this.largestBatchId=c}static min(){return new xi(yn.min(),tn.empty(),-1)}static max(){return new xi(yn.max(),tn.empty(),-1)}}function aa(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=tn.comparator(a.documentKey,e.documentKey),0!==r?r:Fn(a.largestBatchId,e.largestBatchId))}const Ku="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wo(a){return eo.apply(this,arguments)}function eo(){return eo=(0,Ie.Z)(function*(a){if(a.code!==it.FAILED_PRECONDITION||a.message!==Ku)throw a;Dt("LocalStore","Unexpectedly lost primary lease")}),eo.apply(this,arguments)}class ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ot((c,f)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(c,f)},this.catchCallback=_=>{this.wrapFailure(r,_).next(c,f)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ot?r:ot.resolve(r)}catch(r){return ot.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ot.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ot.reject(r)}static resolve(e){return new ot((r,c)=>{r(e)})}static reject(e){return new ot((r,c)=>{c(e)})}static waitFor(e){return new ot((r,c)=>{let f=0,_=0,w=!1;e.forEach(N=>{++f,N.next(()=>{++_,w&&_===f&&r()},H=>c(H))}),w=!0,_===f&&r()})}static or(e){let r=ot.resolve(!1);for(const c of e)r=r.next(f=>f?ot.resolve(f):c());return r}static forEach(e,r){const c=[];return e.forEach((f,_)=>{c.push(r.call(this,f,_))}),this.waitFor(c)}static mapArray(e,r){return new ot((c,f)=>{const _=e.length,w=new Array(_);let N=0;for(let H=0;H<_;H++){const q=H;r(e[q]).next(ae=>{w[q]=ae,++N,N===_&&c(w)},ae=>f(ae))}})}static doWhile(e,r){return new ot((c,f)=>{const _=()=>{!0===e()?r().next(()=>{_()},f):c()};_()})}}class ll{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new si,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new qu(e,r.error)):this.P.resolve()},this.transaction.onerror=c=>{const f=Yu(c.target.error);this.P.reject(new qu(e,f))}}static open(e,r,c,f){try{return new ll(r,e.transaction(f,c))}catch(_){throw new qu(r,_)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Ur(r)}}class Ao{constructor(e,r,c){this.name=e,this.version=r,this.S=c,12.2===Ao.D((0,Ye.z$)())&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Dt("SimpleDb","Removing database:",e),Ei(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ye.hl)())return!1;if(Ao.N())return!0;const e=(0,Ye.z$)(),r=Ao.D(e),c=0<r&&r<10,f=Ao.k(e),_=0<f&&f<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||c||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),c=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(c)}static k(e){const r=e.match(/Android ([\d.]+)/i),c=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(c)}O(e){var r=this;return(0,Ie.Z)(function*(){return r.db||(Dt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((c,f)=>{const _=indexedDB.open(r.name,r.version);_.onsuccess=w=>{c(w.target.result)},_.onblocked=()=>{f(new qu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const N=w.target.error;f("VersionError"===N.name?new Ot(it.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new Ot(it.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new qu(e,N))},_.onupgradeneeded=w=>{Dt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',w.oldVersion),r.S.F(w.target.result,_.transaction,w.oldVersion,r.version).next(()=>{Dt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=c=>r.B(c)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,c,f){var _=this;return(0,Ie.Z)(function*(){const w="readonly"===r;let N=0;for(;;){++N;try{_.db=yield _.O(e);const H=ll.open(_.db,e,w?"readonly":"readwrite",c),q=f(H).next(ae=>(H.V(),ae)).catch(ae=>(H.abort(ae),ot.reject(ae))).toPromise();return q.catch(()=>{}),yield H.v,q}catch(H){const q=H,ae="FirebaseError"!==q.name&&N<3;if(Dt("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ae),_.close(),!ae)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ia{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Ei(this.q.delete())}}class qu extends Ot{constructor(e,r){super(it.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Oo(a){return"IndexedDbTransactionError"===a.name}class Ur{constructor(e){this.store=e}put(e,r){let c;return void 0!==r?(Dt("SimpleDb","PUT",this.store.name,e,r),c=this.store.put(r,e)):(Dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),c=this.store.put(e)),Ei(c)}add(e){return Dt("SimpleDb","ADD",this.store.name,e,e),Ei(this.store.add(e))}get(e){return Ei(this.store.get(e)).next(r=>(void 0===r&&(r=null),Dt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Dt("SimpleDb","DELETE",this.store.name,e),Ei(this.store.delete(e))}count(){return Dt("SimpleDb","COUNT",this.store.name),Ei(this.store.count())}W(e,r){const c=this.options(e,r);if(c.index||"function"!=typeof this.store.getAll){const f=this.cursor(c),_=[];return this.H(f,(w,N)=>{_.push(N)}).next(()=>_)}{const f=this.store.getAll(c.range);return new ot((_,w)=>{f.onerror=N=>{w(N.target.error)},f.onsuccess=N=>{_(N.target.result)}})}}J(e,r){const c=this.store.getAll(e,null===r?void 0:r);return new ot((f,_)=>{c.onerror=w=>{_(w.target.error)},c.onsuccess=w=>{f(w.target.result)}})}Y(e,r){Dt("SimpleDb","DELETE ALL",this.store.name);const c=this.options(e,r);c.Z=!1;const f=this.cursor(c);return this.H(f,(_,w,N)=>N.delete())}X(e,r){let c;r?c=e:(c={},r=e);const f=this.cursor(c);return this.H(f,r)}tt(e){const r=this.cursor({});return new ot((c,f)=>{r.onerror=_=>{const w=Yu(_.target.error);f(w)},r.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(N=>{N?w.continue():c()}):c()}})}H(e,r){const c=[];return new ot((f,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const N=w.target.result;if(!N)return void f();const H=new Ia(N),q=r(N.primaryKey,N.value,H);if(q instanceof ot){const ae=q.catch(Se=>(H.done(),ot.reject(Se)));c.push(ae)}H.isDone?f():null===H.G?N.continue():N.continue(H.G)}}).next(()=>ot.waitFor(c))}options(e,r){let c;return void 0!==e&&("string"==typeof e?c=e:r=e),{index:c,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const c=this.store.index(e.index);return e.Z?c.openKeyCursor(e.range,r):c.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Ei(a){return new ot((e,r)=>{a.onsuccess=c=>{e(c.target.result)},a.onerror=c=>{const f=Yu(c.target.error);r(f)}})}let Wd=!1;function Yu(a){const e=Ao.D((0,Ye.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const c=new Ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wd||(Wd=!0,setTimeout(()=>{throw c},0)),c}}return a}class Va{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;Dt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){r.task=null;try{Dt("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(c){Oo(c)?Dt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",c):yield Wo(c)}yield r.nt(6e4)}))}}class Il{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,Ie.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",c=>r.it(c,e))})()}it(e,r){const c=new Set;let f=r,_=!0;return ot.doWhile(()=>!0===_&&f>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!c.has(w))return Dt("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,f).next(N=>{f-=N,c.add(w)});_=!1})).next(()=>r-f)}rt(e,r,c){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(f=>this.localStore.localDocuments.getNextDocuments(e,r,f,c).next(_=>{const w=_.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(f,_)).next(N=>(Dt("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,r,N))).next(()=>w.size)}))}ot(e,r){let c=e;return r.changes.forEach((f,_)=>{const w=So(_);aa(w,c)>0&&(c=w)}),new xi(c.readTime,c.documentKey,Math.max(r.batchId,e.largestBatchId))}}let go=(()=>{class a{constructor(r,c){this.previousValue=r,c&&(c.sequenceNumberHandler=f=>this.ut(f),this.ct=f=>c.writeSequenceNumber(f))}ut(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.ct&&this.ct(r),r}}return a.at=-1,a})();class fu{constructor(e,r,c,f,_,w,N,H){this.databaseId=e,this.appId=r,this.persistenceKey=c,this.host=f,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=N,this.useFetchStreams=H}}class ti{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ti("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ti&&e.projectId===this.projectId&&e.database===this.database}}function pu(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function to(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function Ga(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Qi(a){return null==a}function no(a){return 0===a&&1/a==-1/0}function gu(a){return"number"==typeof a&&Number.isInteger(a)&&!no(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}class T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class D{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(c){try{return atob(c)}catch(f){throw f instanceof DOMException?new T("Invalid base64 string: "+f):f}}(e);return new D(r)}static fromUint8Array(e){const r=function(c){let f="";for(let _=0;_<c.length;++_)f+=String.fromCharCode(c[_]);return f}(e);return new D(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let c=0;c<e.length;c++)r[c]=e.charCodeAt(c);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}D.EMPTY_BYTE_STRING=new D("");const P=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $(a){if(Zt(!!a),"string"==typeof a){let e=0;const r=P.exec(a);if(Zt(!!r),r[1]){let f=r[1];f=(f+"000000000").substr(0,9),e=Number(f)}const c=new Date(a);return{seconds:Math.floor(c.getTime()/1e3),nanos:e}}return{seconds:J(a.seconds),nanos:J(a.nanos)}}function J(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function se(a){return"string"==typeof a?D.fromBase64String(a):D.fromUint8Array(a)}function Be(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function At(a){const e=a.mapValue.fields.__previous_value__;return Be(e)?At(e):e}function an(a){const e=$(a.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}const nn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yn={nullValue:"NULL_VALUE"};function ci(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Be(a)?4:Ut(a)?9007199254740991:10:jt()}function Zr(a,e){if(a===e)return!0;const r=ci(a);if(r!==ci(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return an(a).isEqual(an(e));case 3:return function(c,f){if("string"==typeof c.timestampValue&&"string"==typeof f.timestampValue&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const _=$(c.timestampValue),w=$(f.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return f=e,se(a.bytesValue).isEqual(se(f.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(c,f){return J(c.geoPointValue.latitude)===J(f.geoPointValue.latitude)&&J(c.geoPointValue.longitude)===J(f.geoPointValue.longitude)}(a,e);case 2:return function(c,f){if("integerValue"in c&&"integerValue"in f)return J(c.integerValue)===J(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const _=J(c.doubleValue),w=J(f.doubleValue);return _===w?no(_)===no(w):isNaN(_)&&isNaN(w)}return!1}(a,e);case 9:return wa(a.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:return function(c,f){const _=c.mapValue.fields||{},w=f.mapValue.fields||{};if(pu(_)!==pu(w))return!1;for(const N in _)if(_.hasOwnProperty(N)&&(void 0===w[N]||!Zr(_[N],w[N])))return!1;return!0}(a,e);default:return jt()}var f}function Us(a,e){return void 0!==(a.values||[]).find(r=>Zr(r,e))}function mo(a,e){if(a===e)return 0;const r=ci(a),c=ci(e);if(r!==c)return Fn(r,c);switch(r){case 0:case 9007199254740991:return 0;case 1:return Fn(a.booleanValue,e.booleanValue);case 2:return function(f,_){const w=J(f.integerValue||f.doubleValue),N=J(_.integerValue||_.doubleValue);return w<N?-1:w>N?1:w===N?0:isNaN(w)?isNaN(N)?0:-1:1}(a,e);case 3:return _o(a.timestampValue,e.timestampValue);case 4:return _o(an(a),an(e));case 5:return Fn(a.stringValue,e.stringValue);case 6:return function(f,_){const w=se(f),N=se(_);return w.compareTo(N)}(a.bytesValue,e.bytesValue);case 7:return function(f,_){const w=f.split("/"),N=_.split("/");for(let H=0;H<w.length&&H<N.length;H++){const q=Fn(w[H],N[H]);if(0!==q)return q}return Fn(w.length,N.length)}(a.referenceValue,e.referenceValue);case 8:return function(f,_){const w=Fn(J(f.latitude),J(_.latitude));return 0!==w?w:Fn(J(f.longitude),J(_.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return function(f,_){const w=f.values||[],N=_.values||[];for(let H=0;H<w.length&&H<N.length;++H){const q=mo(w[H],N[H]);if(q)return q}return Fn(w.length,N.length)}(a.arrayValue,e.arrayValue);case 10:return function(f,_){if(f===nn.mapValue&&_===nn.mapValue)return 0;if(f===nn.mapValue)return 1;if(_===nn.mapValue)return-1;const w=f.fields||{},N=Object.keys(w),H=_.fields||{},q=Object.keys(H);N.sort(),q.sort();for(let ae=0;ae<N.length&&ae<q.length;++ae){const Se=Fn(N[ae],q[ae]);if(0!==Se)return Se;const et=mo(w[N[ae]],H[q[ae]]);if(0!==et)return et}return Fn(N.length,q.length)}(a.mapValue,e.mapValue);default:throw jt()}}function _o(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return Fn(a,e);const r=$(a),c=$(e),f=Fn(r.seconds,c.seconds);return 0!==f?f:Fn(r.nanos,c.nanos)}function ja(a){return di(a)}function di(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(c){const f=$(c);return`time(${f.seconds},${f.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?se(a.bytesValue).toBase64():"referenceValue"in a?tn.fromName(a.referenceValue).toString():"geoPointValue"in a?`geo(${(e=a.geoPointValue).latitude},${e.longitude})`:"arrayValue"in a?function(c){let f="[",_=!0;for(const w of c.values||[])_?_=!1:f+=",",f+=di(w);return f+"]"}(a.arrayValue):"mapValue"in a?function(c){const f=Object.keys(c.fields||{}).sort();let _="{",w=!0;for(const N of f)w?w=!1:_+=",",_+=`${N}:${di(c.fields[N])}`;return _+"}"}(a.mapValue):jt();var e}function Bs(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function U(a){return!!a&&"integerValue"in a}function z(a){return!!a&&"arrayValue"in a}function te(a){return!!a&&"nullValue"in a}function we(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function je(a){return!!a&&"mapValue"in a}function tt(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return to(a.mapValue.fields,(r,c)=>e.mapValue.fields[r]=tt(c)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=tt(a.arrayValue.values[r]);return e}return Object.assign({},a)}function Ut(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}function gn(a){return"nullValue"in a?Yn:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Bs(ti.empty(),tn.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?{mapValue:{}}:jt()}function Tn(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Bs(ti.empty(),tn.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?{mapValue:{}}:"mapValue"in a?nn:jt()}function Rn(a,e){const r=mo(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function Jn(a,e){const r=mo(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Sn{constructor(e,r){this.position=e,this.inclusive=r}}function No(a,e,r){let c=0;for(let f=0;f<a.position.length;f++){const _=e[f],w=a.position[f];if(c=_.field.isKeyField()?tn.comparator(tn.fromName(w.referenceValue),r.key):mo(w,r.data.field(_.field)),"desc"===_.dir&&(c*=-1),0!==c)break}return c}function Xi(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!Zr(a.position[r],e.position[r]))return!1;return!0}class $l{}class er extends $l{constructor(e,r,c){super(),this.field=e,this.op=r,this.value=c}static create(e,r,c){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,c):new Tr(e,r,c):"array-contains"===r?new Xc(e,c):"in"===r?new Qg(e,c):"not-in"===r?new Xg(e,c):"array-contains-any"===r?new ed(e,c):new er(e,r,c)}static createKeyFieldInFilter(e,r,c){return"in"===r?new ry(e,c):new Tc(e,c)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(mo(r,this.value)):null!==r&&ci(this.value)===ci(r)&&this.matchesComparison(mo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Hr extends $l{constructor(e,r){super(),this.filters=e,this.op=r,this.ft=null}static create(e,r){return new Hr(e,r)}matches(e){return Vs(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(r=>r.isInequality());return null!==e?e.field:null}dt(e){for(const r of this.getFlattenedFilters())if(e(r))return r;return null}}function Vs(a){return"and"===a.op}function Ts(a){return"or"===a.op}function Cc(a){return Zu(a)&&Vs(a)}function Zu(a){for(const e of a.filters)if(e instanceof Hr)return!1;return!0}function zl(a){if(a instanceof er)return a.field.canonicalString()+a.op.toString()+ja(a.value);if(Cc(a))return a.filters.map(e=>zl(e)).join(",");{const e=a.filters.map(r=>zl(r)).join(",");return`${a.op}(${e})`}}function Kd(a,e){return a instanceof er?(r=a,(c=e)instanceof er&&r.op===c.op&&r.field.isEqual(c.field)&&Zr(r.value,c.value)):a instanceof Hr?function(r,c){return c instanceof Hr&&r.op===c.op&&r.filters.length===c.filters.length&&r.filters.reduce((f,_,w)=>f&&Kd(_,c.filters[w]),!0)}(a,e):void jt();var r,c}function Jh(a,e){const r=a.filters.concat(e);return Hr.create(r,a.op)}function Jg(a){return a instanceof er?`${(e=a).field.canonicalString()} ${e.op} ${ja(e.value)}`:a instanceof Hr?function(e){return e.op.toString()+" {"+e.getFilters().map(Jg).join(" ,")+"}"}(a):"Filter";var e}class Tr extends er{constructor(e,r,c){super(e,r,c),this.key=tn.fromName(c.referenceValue)}matches(e){const r=tn.comparator(e.key,this.key);return this.matchesComparison(r)}}class ry extends er{constructor(e,r){super(e,"in",r),this.keys=pp(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Tc extends er{constructor(e,r){super(e,"not-in",r),this.keys=pp(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function pp(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(c=>tn.fromName(c.referenceValue))}class Xc extends er{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return z(r)&&Us(r.arrayValue,this.value)}}class Qg extends er{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Us(this.value.arrayValue,r)}}class Xg extends er{constructor(e,r){super(e,"not-in",r)}matches(e){if(Us(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Us(this.value.arrayValue,r)}}class ed extends er{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!z(r)||!r.arrayValue.values)&&r.arrayValue.values.some(c=>Us(this.value.arrayValue,c))}}class mu{constructor(e,r="asc"){this.field=e,this.dir=r}}function Qh(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class ss{constructor(e,r){this.comparator=e,this.root=r||Mo.EMPTY}insert(e,r){return new ss(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Mo.BLACK,null,null))}remove(e){return new ss(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const c=this.comparator(e,r.key);if(0===c)return r.value;c<0?r=r.left:c>0&&(r=r.right)}return null}indexOf(e){let r=0,c=this.root;for(;!c.isEmpty();){const f=this.comparator(e,c.key);if(0===f)return r+c.left.size;f<0?c=c.left:(r+=c.left.size+1,c=c.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,c)=>(e(r,c),!1))}toString(){const e=[];return this.inorderTraversal((r,c)=>(e.push(`${r}:${c}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,r,c,f){this.isReverse=f,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=r?c(e.key,r):1,r&&f&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mo{constructor(e,r,c,f,_){this.key=e,this.value=r,this.color=c??Mo.RED,this.left=f??Mo.EMPTY,this.right=_??Mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,c,f,_){return new Mo(e??this.key,r??this.value,c??this.color,f??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,c){let f=this;const _=c(e,f.key);return f=_<0?f.copy(null,null,null,f.left.insert(e,r,c),null):0===_?f.copy(null,r,null,null,null):f.copy(null,null,null,null,f.right.insert(e,r,c)),f.fixUp()}removeMin(){if(this.left.isEmpty())return Mo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let c,f=this;if(r(e,f.key)<0)f.left.isEmpty()||f.left.isRed()||f.left.left.isRed()||(f=f.moveRedLeft()),f=f.copy(null,null,null,f.left.remove(e,r),null);else{if(f.left.isRed()&&(f=f.rotateRight()),f.right.isEmpty()||f.right.isRed()||f.right.left.isRed()||(f=f.moveRedRight()),0===r(e,f.key)){if(f.right.isEmpty())return Mo.EMPTY;c=f.right.min(),f=f.copy(c.key,c.value,null,null,f.right.removeMin())}f=f.copy(null,null,null,null,f.right.remove(e,r))}return f.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}Mo.EMPTY=null,Mo.RED=!0,Mo.BLACK=!1,Mo.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(a,e,r,c,f){return this}insert(a,e,r){return new Mo(a,e)}remove(a,e){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pi{constructor(e){this.comparator=e,this.data=new ss(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,c)=>(e(r),!1))}forEachInRange(e,r){const c=this.data.getIteratorFrom(e[0]);for(;c.hasNext();){const f=c.getNext();if(this.comparator(f.key,e[1])>=0)return;r(f.key)}}forEachWhile(e,r){let c;for(c=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();c.hasNext();)if(!e(c.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new qd(this.data.getIterator())}getIteratorFrom(e){return new qd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(c=>{r=r.add(c)}),r}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const r=this.data.getIterator(),c=e.data.getIterator();for(;r.hasNext();){const f=r.getNext().key,_=c.getNext().key;if(0!==this.comparator(f,_))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new pi(this.comparator);return r.data=e,r}}class qd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wl(a){return a.hasNext()?a.getNext():void 0}class Ro{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new Ro([])}unionWith(e){let r=new pi(Cr.comparator);for(const c of this.fields)r=r.add(c);for(const c of e)r=r.add(c);return new Ro(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,(r,c)=>r.isEqual(c))}}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let c=0;c<e.length-1;++c)if(r=(r.mapValue.fields||{})[e.get(c)],!je(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=tt(r)}setAll(e){let r=Cr.emptyPath(),c={},f=[];e.forEach((w,N)=>{if(!r.isImmediateParentOf(N)){const H=this.getFieldsMap(r);this.applyChanges(H,c,f),c={},f=[],r=N.popLast()}w?c[N.lastSegment()]=tt(w):f.push(N.lastSegment())});const _=this.getFieldsMap(r);this.applyChanges(_,c,f)}delete(e){const r=this.field(e.popLast());je(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let c=0;c<e.length;++c){let f=r.mapValue.fields[e.get(c)];je(f)&&f.mapValue.fields||(f={mapValue:{fields:{}}},r.mapValue.fields[e.get(c)]=f),r=f}return r.mapValue.fields}applyChanges(e,r,c){to(r,(f,_)=>e[f]=_);for(const f of c)delete e[f]}clone(){return new Ss(tt(this.value))}}function Xh(a){const e=[];return to(a.fields,(r,c)=>{const f=new Cr([r]);if(je(c)){const _=Xh(c.mapValue).fields;if(0===_.length)e.push(f);else for(const w of _)e.push(f.child(w))}else e.push(f)}),new Ro(e)}class $r{constructor(e,r,c,f,_,w,N){this.key=e,this.documentType=r,this.version=c,this.readTime=f,this.createTime=_,this.data=w,this.documentState=N}static newInvalidDocument(e){return new $r(e,0,yn.min(),yn.min(),yn.min(),Ss.empty(),0)}static newFoundDocument(e,r,c,f){return new $r(e,1,r,yn.min(),c,f,0)}static newNoDocument(e,r){return new $r(e,2,r,yn.min(),yn.min(),Ss.empty(),0)}static newUnknownDocument(e,r){return new $r(e,3,r,yn.min(),yn.min(),Ss.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(yn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class em{constructor(e,r=null,c=[],f=[],_=null,w=null,N=null){this.path=e,this.collectionGroup=r,this.orderBy=c,this.filters=f,this.limit=_,this.startAt=w,this.endAt=N,this._t=null}}function ef(a,e=null,r=[],c=[],f=null,_=null,w=null){return new em(a,e,r,c,f,_,w)}function Kl(a){const e=zt(a);if(null===e._t){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(c=>zl(c)).join(","),r+="|ob:",r+=e.orderBy.map(c=>{return(f=c).field.canonicalString()+f.dir;var f}).join(","),Qi(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(c=>ja(c)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(c=>ja(c)).join(",")),e._t=r}return e._t}function Sc(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Qh(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!Kd(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Xi(a.startAt,e.startAt)&&Xi(a.endAt,e.endAt)}function _u(a){return tn.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Yd(a,e){return a.filters.filter(r=>r instanceof er&&r.field.isEqual(e))}function tf(a,e,r){let c=Yn,f=!0;for(const _ of Yd(a,e)){let w=Yn,N=!0;switch(_.op){case"<":case"<=":w=gn(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,N=!1;break;case"!=":case"not-in":w=Yn}Rn({value:c,inclusive:f},{value:w,inclusive:N})<0&&(c=w,f=N)}if(null!==r)for(let _=0;_<a.orderBy.length;++_)if(a.orderBy[_].field.isEqual(e)){const w=r.position[_];Rn({value:c,inclusive:f},{value:w,inclusive:r.inclusive})<0&&(c=w,f=r.inclusive);break}return{value:c,inclusive:f}}function nf(a,e,r){let c=nn,f=!0;for(const _ of Yd(a,e)){let w=nn,N=!0;switch(_.op){case">=":case">":w=Tn(_.value),N=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,N=!1;break;case"!=":case"not-in":w=nn}Jn({value:c,inclusive:f},{value:w,inclusive:N})>0&&(c=w,f=N)}if(null!==r)for(let _=0;_<a.orderBy.length;++_)if(a.orderBy[_].field.isEqual(e)){const w=r.position[_];Jn({value:c,inclusive:f},{value:w,inclusive:r.inclusive})>0&&(c=w,f=r.inclusive);break}return{value:c,inclusive:f}}class Ta{constructor(e,r=null,c=[],f=[],_=null,w="F",N=null,H=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=c,this.filters=f,this.limit=_,this.limitType=w,this.startAt=N,this.endAt=H,this.wt=null,this.gt=null}}function rf(a,e,r,c,f,_,w,N){return new Ta(a,e,r,c,f,_,w,N)}function yu(a){return new Ta(a)}function yo(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function nd(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function Ac(a){for(const e of a.filters){const r=e.getFirstInequalityField();if(null!==r)return r}return null}function rd(a){return null!==a.collectionGroup}function os(a){const e=zt(a);if(null===e.wt){e.wt=[];const r=Ac(e),c=nd(e);if(null!==r&&null===c)r.isKeyField()||e.wt.push(new mu(r)),e.wt.push(new mu(Cr.keyField(),"asc"));else{let f=!1;for(const _ of e.explicitOrderBy)e.wt.push(_),_.field.isKeyField()&&(f=!0);if(!f){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new mu(Cr.keyField(),_))}}}return e.wt}function ro(a){const e=zt(a);if(!e.gt)if("F"===e.limitType)e.gt=ef(e.path,e.collectionGroup,os(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const _ of os(e))r.push(new mu(_.field,"desc"===_.dir?"asc":"desc"));const c=e.endAt?new Sn(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new Sn(e.startAt.position,e.startAt.inclusive):null;e.gt=ef(e.path,e.collectionGroup,r,e.filters,e.limit,c,f)}return e.gt}function Zd(a,e){e.getFirstInequalityField(),Ac(a);const r=a.filters.concat([e]);return new Ta(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Jd(a,e,r){return new Ta(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function sf(a,e){return Sc(ro(a),ro(e))&&a.limitType===e.limitType}function A(a){return`${Kl(ro(a))}|lt:${a.limitType}`}function v(a){return`Query(target=${function(e){let r=e.path.canonicalString();return null!==e.collectionGroup&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(c=>Jg(c)).join(", ")}]`),Qi(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(c=>{return`${(f=c).field.canonicalString()} (${f.dir})`;var f}).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(c=>ja(c)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(c=>ja(c)).join(",")),`Target(${r})`}(ro(a))}; limitType=${a.limitType})`}function E(a,e){return e.isFoundDocument()&&function(r,c){const f=c.key.path;return null!==r.collectionGroup?c.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(f):tn.isDocumentKey(r.path)?r.path.isEqual(f):r.path.isImmediateParentOf(f)}(a,e)&&function(r,c){for(const f of os(r))if(!f.field.isKeyField()&&null===c.data.field(f.field))return!1;return!0}(a,e)&&function(r,c){for(const f of r.filters)if(!f.matches(c))return!1;return!0}(a,e)&&(c=e,!((r=a).startAt&&!function(f,_,w){const N=No(f,_,w);return f.inclusive?N<=0:N<0}(r.startAt,os(r),c)||r.endAt&&!function(f,_,w){const N=No(f,_,w);return f.inclusive?N>=0:N>0}(r.endAt,os(r),c)));var r,c}function M(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function ee(a){return(e,r)=>{let c=!1;for(const f of os(a)){const _=de(f,e,r);if(0!==_)return _;c=c||f.field.isKeyField()}return 0}}function de(a,e,r){const c=a.field.isKeyField()?tn.comparator(e.key,r.key):function(f,_,w){const N=_.data.field(f),H=w.data.field(f);return null!==N&&null!==H?mo(N,H):jt()}(a.field,e,r);switch(a.dir){case"asc":return c;case"desc":return-1*c;default:return jt()}}function nt(a,e){if(a.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(e)?"-0":e}}function Ft(a){return{integerValue:""+a}}function pn(a,e){return gu(e)?Ft(e):nt(a,e)}class On{constructor(){this._=void 0}}function nr(a,e,r){return a instanceof la?function(c,f){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&(_.fields.__previous_value__=f),{mapValue:_}}(r,e):a instanceof cl?af(a,e):a instanceof Ko?Qd(a,e):function(c,f){const _=Cl(c,f),w=Mi(_)+Mi(c.It);return U(_)&&U(c.It)?Ft(w):nt(c.Tt,w)}(a,e)}function es(a,e,r){return a instanceof cl?af(a,e):a instanceof Ko?Qd(a,e):r}function Cl(a,e){return a instanceof io?U(r=e)||(c=r)&&"doubleValue"in c?e:{integerValue:0}:null;var c,r}class la extends On{}class cl extends On{constructor(e){super(),this.elements=e}}function af(a,e){const r=Ju(e);for(const c of a.elements)r.some(f=>Zr(f,c))||r.push(c);return{arrayValue:{values:r}}}class Ko extends On{constructor(e){super(),this.elements=e}}function Qd(a,e){let r=Ju(e);for(const c of a.elements)r=r.filter(f=>!Zr(f,c));return{arrayValue:{values:r}}}class io extends On{constructor(e,r){super(),this.Tt=e,this.It=r}}function Mi(a){return J(a.integerValue||a.doubleValue)}function Ju(a){return z(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Qu{constructor(e,r){this.field=e,this.transform=r}}class gp{constructor(e,r){this.version=e,this.transformResults=r}}class Hi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vu(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class lf{}function sd(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new Eu(a.key,Hi.none()):new eh(a.key,a.data,Hi.none());{const r=a.data,c=Ss.empty();let f=new pi(Cr.comparator);for(let _ of e.fields)if(!f.has(_)){let w=r.field(_);null===w&&_.length>1&&(_=_.popLast(),w=r.field(_)),null===w?c.delete(_):c.set(_,w),f=f.add(_)}return new bu(a.key,c,new Ro(f.toArray()),Hi.none())}}function Xd(a,e,r){a instanceof eh?function(c,f,_){const w=c.value.clone(),N=Ha(c.fieldTransforms,f,_.transformResults);w.setAll(N),f.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(a,e,r):a instanceof bu?function(c,f,_){if(!vu(c.precondition,f))return void f.convertToUnknownDocument(_.version);const w=Ha(c.fieldTransforms,f,_.transformResults),N=f.data;N.setAll(Oc(c)),N.setAll(w),f.convertToFoundDocument(_.version,N).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function od(a,e,r,c){return a instanceof eh?function(f,_,w,N){if(!vu(f.precondition,_))return w;const H=f.value.clone(),q=ad(f.fieldTransforms,N,_);return H.setAll(q),_.convertToFoundDocument(_.version,H).setHasLocalMutations(),null}(a,e,r,c):a instanceof bu?function(f,_,w,N){if(!vu(f.precondition,_))return w;const H=ad(f.fieldTransforms,N,_),q=_.data;return q.setAll(Oc(f)),q.setAll(H),_.convertToFoundDocument(_.version,q).setHasLocalMutations(),null===w?null:w.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map(ae=>ae.field))}(a,e,r,c):(w=r,vu(a.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):w);var _,w}function tm(a,e){let r=null;for(const c of a.fieldTransforms){const f=e.data.field(c.field),_=Cl(c.transform,f||null);null!=_&&(null===r&&(r=Ss.empty()),r.set(c.field,_))}return r||null}function iy(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(r=a.fieldTransforms)&&void 0===c||r&&c&&wa(r,c,(f,_)=>function id(a,e){return a.field.isEqual(e.field)&&(c=e.transform,(r=a.transform)instanceof cl&&c instanceof cl||r instanceof Ko&&c instanceof Ko?wa(r.elements,c.elements,Zr):r instanceof io&&c instanceof io?Zr(r.It,c.It):r instanceof la&&c instanceof la);var r,c}(f,_))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var r,c}class eh extends lf{constructor(e,r,c,f=[]){super(),this.key=e,this.value=r,this.precondition=c,this.fieldTransforms=f,this.type=0}getFieldMask(){return null}}class bu extends lf{constructor(e,r,c,f,_=[]){super(),this.key=e,this.data=r,this.fieldMask=c,this.precondition=f,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function Oc(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const c=a.data.field(r);e.set(r,c)}}),e}function Ha(a,e,r){const c=new Map;Zt(a.length===r.length);for(let f=0;f<r.length;f++){const _=a[f],w=_.transform,N=e.data.field(_.field);c.set(_.field,es(w,N,r[f]))}return c}function ad(a,e,r){const c=new Map;for(const f of a){const _=f.transform,w=r.data.field(f.field);c.set(f.field,nr(_,w,e))}return c}class Eu extends lf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mp extends lf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nm{constructor(e){this.count=e}}var Ri,Jr;function sy(a){switch(a){default:return jt();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function oy(a){if(void 0===a)return Cn("GRPC error has no .code"),it.UNKNOWN;switch(a){case Ri.OK:return it.OK;case Ri.CANCELLED:return it.CANCELLED;case Ri.UNKNOWN:return it.UNKNOWN;case Ri.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case Ri.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case Ri.INTERNAL:return it.INTERNAL;case Ri.UNAVAILABLE:return it.UNAVAILABLE;case Ri.UNAUTHENTICATED:return it.UNAUTHENTICATED;case Ri.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case Ri.NOT_FOUND:return it.NOT_FOUND;case Ri.ALREADY_EXISTS:return it.ALREADY_EXISTS;case Ri.PERMISSION_DENIED:return it.PERMISSION_DENIED;case Ri.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case Ri.ABORTED:return it.ABORTED;case Ri.OUT_OF_RANGE:return it.OUT_OF_RANGE;case Ri.UNIMPLEMENTED:return it.UNIMPLEMENTED;case Ri.DATA_LOSS:return it.DATA_LOSS;default:return jt()}}(Jr=Ri||(Ri={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";class Nc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),c=this.inner[r];if(void 0!==c)for(const[f,_]of c)if(this.equalsFn(f,e))return _}has(e){return void 0!==this.get(e)}set(e,r){const c=this.mapKeyFn(e),f=this.inner[c];if(void 0===f)return this.inner[c]=[[e,r]],void this.innerSize++;for(let _=0;_<f.length;_++)if(this.equalsFn(f[_][0],e))return void(f[_]=[e,r]);f.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),c=this.inner[r];if(void 0===c)return!1;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return 1===c.length?delete this.inner[r]:c.splice(f,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(r,c)=>{for(const[f,_]of c)e(f,_)})}isEmpty(){return Ga(this.inner)}size(){return this.innerSize}}const ay=new ss(tn.comparator);function $a(){return ay}const _p=new ss(tn.comparator);function ld(...a){let e=_p;for(const r of a)e=e.insert(r.key,r);return e}function ly(a){let e=_p;return a.forEach((r,c)=>e=e.insert(r,c.overlayedDocument)),e}function ql(){return th()}function rm(){return th()}function th(){return new Nc(a=>a.toString(),(a,e)=>a.isEqual(e))}const yp=new ss(tn.comparator),Hb=new pi(tn.comparator);function ur(...a){let e=Hb;for(const r of a)e=e.add(r);return e}const $b=new pi(Fn);function im(){return $b}class nh{constructor(e,r,c,f,_){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=c,this.documentUpdates=f,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,r,c){const f=new Map;return f.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,r,c)),new nh(yn.min(),f,im(),$a(),ur())}}class rh{constructor(e,r,c,f,_){this.resumeToken=e,this.current=r,this.addedDocuments=c,this.modifiedDocuments=f,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,r,c){return new rh(c,r,ur(),ur(),ur())}}class ih{constructor(e,r,c,f){this.Et=e,this.removedTargetIds=r,this.key=c,this.At=f}}class sh{constructor(e,r){this.targetId=e,this.Rt=r}}class uf{constructor(e,r,c=D.EMPTY_BYTE_STRING,f=null){this.state=e,this.targetIds=r,this.resumeToken=c,this.cause=f}}class wu{constructor(){this.Pt=0,this.vt=zb(),this.bt=D.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=ur(),r=ur(),c=ur();return this.vt.forEach((f,_)=>{switch(_){case 0:e=e.add(f);break;case 2:r=r.add(f);break;case 1:c=c.add(f);break;default:jt()}}),new rh(this.bt,this.Vt,e,r,c)}kt(){this.St=!1,this.vt=zb()}$t(e,r){this.St=!0,this.vt=this.vt.insert(e,r)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class c0{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=$a(),this.Kt=cf(),this.Gt=new pi(Fn)}Qt(e){for(const r of e.Et)e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At);for(const r of e.removedTargetIds)this.zt(r,e.key,e.At)}Wt(e){this.forEachTarget(e,r=>{const c=this.Ht(r);switch(e.state){case 0:this.Jt(r)&&c.xt(e.resumeToken);break;case 1:c.Ft(),c.Dt||c.kt(),c.xt(e.resumeToken);break;case 2:c.Ft(),c.Dt||this.removeTarget(r);break;case 3:this.Jt(r)&&(c.Bt(),c.xt(e.resumeToken));break;case 4:this.Jt(r)&&(this.Yt(r),c.xt(e.resumeToken));break;default:jt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qt.forEach((c,f)=>{this.Jt(f)&&r(f)})}Zt(e){const r=e.targetId,c=e.Rt.count,f=this.Xt(r);if(f){const _=f.target;if(_u(_))if(0===c){const w=new tn(_.path);this.zt(r,w,$r.newNoDocument(w,yn.min()))}else Zt(1===c);else this.te(r)!==c&&(this.Yt(r),this.Gt=this.Gt.add(r))}}ee(e){const r=new Map;this.qt.forEach((_,w)=>{const N=this.Xt(w);if(N){if(_.current&&_u(N.target)){const H=new tn(N.target.path);null!==this.Ut.get(H)||this.ne(w,H)||this.zt(w,H,$r.newNoDocument(H,e))}_.Ct&&(r.set(w,_.Nt()),_.kt())}});let c=ur();this.Kt.forEach((_,w)=>{let N=!0;w.forEachWhile(H=>{const q=this.Xt(H);return!q||2===q.purpose||(N=!1,!1)}),N&&(c=c.add(_))}),this.Ut.forEach((_,w)=>w.setReadTime(e));const f=new nh(e,r,this.Gt,this.Ut,c);return this.Ut=$a(),this.Kt=cf(),this.Gt=new pi(Fn),f}jt(e,r){if(!this.Jt(e))return;const c=this.ne(e,r.key)?2:0;this.Ht(e).$t(r.key,c),this.Ut=this.Ut.insert(r.key,r),this.Kt=this.Kt.insert(r.key,this.se(r.key).add(e))}zt(e,r,c){if(!this.Jt(e))return;const f=this.Ht(e);this.ne(e,r)?f.$t(r,1):f.Mt(r),this.Kt=this.Kt.insert(r,this.se(r).delete(e)),c&&(this.Ut=this.Ut.insert(r,c))}removeTarget(e){this.qt.delete(e)}te(e){const r=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let r=this.qt.get(e);return r||(r=new wu,this.qt.set(e,r)),r}se(e){let r=this.Kt.get(e);return r||(r=new pi(Fn),this.Kt=this.Kt.insert(e,r)),r}Jt(e){const r=null!==this.Xt(e);return r||Dt("WatchChangeAggregator","Detected inactive target",e),r}Xt(e){const r=this.qt.get(e);return r&&r.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new wu),this.Lt.getRemoteKeysForTarget(e).forEach(r=>{this.zt(e,r,null)})}ne(e,r){return this.Lt.getRemoteKeysForTarget(e).has(r)}}function cf(){return new ss(tn.comparator)}function zb(){return new ss(tn.comparator)}const uy={asc:"ASCENDING",desc:"DESCENDING"},Xu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wb={and:"AND",or:"OR"};class cy{constructor(e,r){this.databaseId=e,this.yt=r}}function Du(a,e){return a.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vp(a,e){return a.yt?e.toBase64():e.toUint8Array()}function oh(a,e){return Du(a,e.toTimestamp())}function As(a){return Zt(!!a),yn.fromTimestamp(function(e){const r=$(e);return new sr(r.seconds,r.nanos)}(a))}function bp(a,e){return(r=a,new lr(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function sm(a){const e=lr.fromString(a);return Zt(Kb(e)),e}function df(a,e){return bp(a.databaseId,e.path)}function Iu(a,e){const r=sm(e);if(r.get(1)!==a.databaseId.projectId)throw new Ot(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Ot(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new tn(ec(r))}function Ep(a,e){return bp(a.databaseId,e)}function dy(a){const e=sm(a);return 4===e.length?lr.emptyPath():ec(e)}function ah(a){return new lr(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function ec(a){return Zt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function ud(a,e,r){return{name:df(a,e),fields:r.value.mapValue.fields}}function wp(a,e,r){const c=Iu(a,e.name),f=As(e.updateTime),_=e.createTime?As(e.createTime):yn.min(),w=new Ss({mapValue:{fields:e.fields}}),N=$r.newFoundDocument(c,f,_,w);return r&&N.setHasCommittedMutations(),r?N.setHasCommittedMutations():N}function Dp(a,e){let r;if(e instanceof eh)r={update:ud(a,e.key,e.value)};else if(e instanceof Eu)r={delete:df(a,e.key)};else if(e instanceof bu)r={update:ud(a,e.key,e.data),updateMask:f0(e.fieldMask)};else{if(!(e instanceof mp))return jt();r={verify:df(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(c=>function(f,_){const w=_.transform;if(w instanceof la)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof cl)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Ko)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof io)return{fieldPath:_.field.canonicalString(),increment:w.It};throw jt()}(0,c))),e.precondition.isNone||(r.currentDocument=void 0!==(f=e.precondition).updateTime?{updateTime:oh(a,f.updateTime)}:void 0!==f.exists?{exists:f.exists}:jt()),r;var f}function fy(a,e){const r=e.currentDocument?void 0!==(f=e.currentDocument).updateTime?Hi.updateTime(As(f.updateTime)):void 0!==f.exists?Hi.exists(f.exists):Hi.none():Hi.none(),c=e.updateTransforms?e.updateTransforms.map(f=>function(_,w){let N=null;"setToServerValue"in w?(Zt("REQUEST_TIME"===w.setToServerValue),N=new la):"appendMissingElements"in w?N=new cl(w.appendMissingElements.values||[]):"removeAllFromArray"in w?N=new Ko(w.removeAllFromArray.values||[]):"increment"in w?N=new io(_,w.increment):jt();const H=Cr.fromServerFormat(w.fieldPath);return new Qu(H,N)}(a,f)):[];var f;if(e.update){const f=Iu(a,e.update.name),_=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Ro((e.updateMask.fieldPaths||[]).map(q=>Cr.fromServerFormat(q)));return new bu(f,_,w,r,c)}return new eh(f,_,r,c)}if(e.delete){const f=Iu(a,e.delete);return new Eu(f,r)}if(e.verify){const f=Iu(a,e.verify);return new mp(f,r)}return jt()}function Ip(a,e){return{documents:[Ep(a,e.path)]}}function gy(a,e){const r={structuredQuery:{}},c=e.path;null!==e.collectionGroup?(r.parent=Ep(a,c),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=Ep(a,c.popLast()),r.structuredQuery.from=[{collectionId:c.lastSegment()}]);const f=function(H){if(0!==H.length)return Tp(Hr.create(H,"and"))}(e.filters);f&&(r.structuredQuery.where=f);const _=function(H){if(0!==H.length)return H.map(q=>{return{field:Tu((ae=q).field),direction:Cp(ae.dir)};var ae})}(e.orderBy);_&&(r.structuredQuery.orderBy=_);const w=(q=e.limit,a.yt||Qi(q)?q:{value:q});var q,N,H;return null!==w&&(r.structuredQuery.limit=w),e.startAt&&(r.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(r.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),r}function om(a){let e=dy(a.parent);const r=a.structuredQuery,c=r.from?r.from.length:0;let f=null;if(c>0){Zt(1===c);const ae=r.from[0];ae.allDescendants?f=ae.collectionId:e=e.child(ae.collectionId)}let _=[];r.where&&(_=function(ae){const Se=am(ae);return Se instanceof Hr&&Cc(Se)?Se.getFilters():[Se]}(r.where));let w=[];r.orderBy&&(w=r.orderBy.map(ae=>{return new mu(Mc((Se=ae).field),function(et){switch(et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Se.direction));var Se}));let N=null;r.limit&&(N=function(ae){let Se;return Se="object"==typeof ae?ae.value:ae,Qi(Se)?null:Se}(r.limit));let H=null;var ae;r.startAt&&(H=new Sn((ae=r.startAt).values||[],!!ae.before));let q=null;return r.endAt&&(q=function(ae){return new Sn(ae.values||[],!ae.before)}(r.endAt)),rf(e,f,w,_,N,"F",H,q)}function am(a){return void 0!==a.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Mc(e.unaryFilter.field);return er.create(r,"==",{doubleValue:NaN});case"IS_NULL":const c=Mc(e.unaryFilter.field);return er.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Mc(e.unaryFilter.field);return er.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=Mc(e.unaryFilter.field);return er.create(_,"!=",{nullValue:"NULL_VALUE"});default:return jt()}}(a):void 0!==a.fieldFilter?er.create(Mc((e=a).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==a.compositeFilter?function(e){return Hr.create(e.compositeFilter.filters.map(r=>am(r)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return jt()}}(e.compositeFilter.op))}(a):jt();var e}function Cp(a){return uy[a]}function Cu(a){return Xu[a]}function lh(a){return Wb[a]}function Tu(a){return{fieldPath:a.canonicalString()}}function Mc(a){return Cr.fromServerFormat(a.fieldPath)}function Tp(a){return a instanceof er?function(e){if("=="===e.op){if(we(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NAN"}};if(te(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(we(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NAN"}};if(te(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tu(e.field),op:Cu(e.op),value:e.value}}}(a):a instanceof Hr?function(e){const r=e.getFilters().map(c=>Tp(c));return 1===r.length?r[0]:{compositeFilter:{op:lh(e.op),filters:r}}}(a):jt()}function f0(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Kb(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function Sa(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=Sp(e)),e=lm(a.get(r),e);return Sp(e)}function lm(a,e){let r=e;const c=a.length;for(let f=0;f<c;f++){const _=a.charAt(f);switch(_){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=_}}return r}function Sp(a){return a+"\x01\x01"}function tc(a){const e=a.length;if(Zt(e>=2),2===e)return Zt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),lr.emptyPath();const r=e-2,c=[];let f="";for(let _=0;_<e;){const w=a.indexOf("\x01",_);switch((w<0||w>r)&&jt(),a.charAt(w+1)){case"\x01":const N=a.substring(_,w);let H;0===f.length?H=N:(f+=N,H=f,f=""),c.push(H);break;case"\x10":f+=a.substring(_,w),f+="\0";break;case"\x11":f+=a.substring(_,w+1);break;default:jt()}_=w+2}return new lr(c)}const p0=["userId","batchId"];function uh(a,e){return[a,Sa(e)]}function my(a,e,r){return[a,Sa(e),r]}const qb={},Yb=["prefixPath","collectionGroup","readTime","documentId"],Zb=["prefixPath","collectionGroup","documentId"],g0=["collectionGroup","readTime","prefixPath","documentId"],um=["canonicalId","targetId"],_y=["targetId","path"],cm=["path","targetId"],m0=["collectionId","parent"],Gs=["indexId","uid"],_0=["uid","sequenceNumber"],y0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ap=["indexId","uid","orderedDocumentKey"],dm=["userId","collectionPath","documentId"],v0=["userId","collectionPath","largestBatchId"],b0=["userId","collectionGroup","largestBatchId"],hm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],E0=[...hm,"documentOverlays"],fm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yy=fm,Jb=[...yy,"indexConfiguration","indexState","indexEntries"];class cd extends Dl{constructor(e,r){super(),this.re=e,this.currentSequenceNumber=r}}function so(a,e){const r=zt(a);return Ao.M(r.re,e)}class hf{constructor(e,r,c,f){this.batchId=e,this.localWriteTime=r,this.baseMutations=c,this.mutations=f}applyToRemoteDocument(e,r){const c=r.mutationResults;for(let f=0;f<this.mutations.length;f++){const _=this.mutations[f];_.key.isEqual(e.key)&&Xd(_,e,c[f])}}applyToLocalView(e,r){for(const c of this.baseMutations)c.key.isEqual(e.key)&&(r=od(c,e,r,this.localWriteTime));for(const c of this.mutations)c.key.isEqual(e.key)&&(r=od(c,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const c=rm();return this.mutations.forEach(f=>{const _=e.get(f.key),w=_.overlayedDocument;let N=this.applyToLocalView(w,_.mutatedFields);N=r.has(f.key)?null:N;const H=sd(w,N);null!==H&&c.set(f.key,H),w.isValidDocument()||w.convertToNoDocument(yn.min())}),c}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ur())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,(r,c)=>iy(r,c))&&wa(this.baseMutations,e.baseMutations,(r,c)=>iy(r,c))}}class Op{constructor(e,r,c,f){this.batch=e,this.commitVersion=r,this.mutationResults=c,this.docVersions=f}static from(e,r,c){Zt(e.mutations.length===c.length);let f=yp;const _=e.mutations;for(let w=0;w<_.length;w++)f=f.insert(_[w].key,c[w].version);return new Op(e,r,c,f)}}class Np{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rc{constructor(e,r,c,f,_=yn.min(),w=yn.min(),N=D.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=c,this.sequenceNumber=f,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=N}withSequenceNumber(e){return new Rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vy{constructor(e){this.oe=e}}function Mp(a,e){const r=e.key,c={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ff(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())c.document={name:df(f=a.oe,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:Du(f,_.version.toTimestamp()),createTime:Du(f,_.createTime.toTimestamp())};else if(e.isNoDocument())c.noDocument={path:r.path.toArray(),readTime:pf(e.version)};else{if(!e.isUnknownDocument())return jt();c.unknownDocument={path:r.path.toArray(),version:pf(e.version)}}var f,_;return c}function ff(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function pf(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xc(a){const e=new sr(a.seconds,a.nanoseconds);return yn.fromTimestamp(e)}function ch(a,e){const r=(e.baseMutations||[]).map(_=>fy(a.oe,_));for(let _=0;_<e.mutations.length-1;++_)_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(e.mutations[_].updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_);const c=e.mutations.map(_=>fy(a.oe,_)),f=sr.fromMillis(e.localWriteTimeMs);return new hf(e.batchId,f,r,c)}function Pc(a){const e=xc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?xc(a.lastLimboFreeSnapshotVersion):yn.min();let c;var f;return void 0!==a.query.documents?(Zt(1===(f=a.query).documents.length),c=ro(yu(dy(f.documents[0])))):c=ro(om(a.query)),new Rc(c,a.targetId,0,a.lastListenSequenceNumber,e,r,D.fromBase64String(a.resumeToken))}function pm(a,e){const r=pf(e.snapshotVersion),c=pf(e.lastLimboFreeSnapshotVersion);let f;f=_u(e.target)?Ip(a.oe,e.target):gy(a.oe,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kl(e.target),readTime:r,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:c,query:f}}function gm(a){const e=om({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Jd(e,e.limit,"L"):e}function kc(a,e){return new Np(e.largestBatchId,fy(a.oe,e.overlayMutation))}function w0(a,e){const r=e.path.lastSegment();return[a,Sa(e.path.popLast()),r]}function Rp(a,e,r,c){return{indexId:a,uid:e.uid||"",sequenceNumber:r,readTime:pf(c.readTime),documentKey:Sa(c.documentKey.path),largestBatchId:c.largestBatchId}}class mm{getBundleMetadata(e,r){return D0(e).get(r).next(c=>{if(c)return{id:(f=c).bundleId,createTime:xc(f.createTime),version:f.version};var f})}saveBundleMetadata(e,r){return D0(e).put({bundleId:(c=r).id,createTime:pf(As(c.createTime)),version:c.version});var c}getNamedQuery(e,r){return _m(e).get(r).next(c=>{if(c)return{name:(f=c).name,query:gm(f.bundledQuery),readTime:xc(f.readTime)};var f})}saveNamedQuery(e,r){return _m(e).put({name:(c=r).name,readTime:pf(As(c.readTime)),bundledQuery:c.bundledQuery});var c}}function D0(a){return so(a,"bundles")}function _m(a){return so(a,"namedQueries")}class dh{constructor(e,r){this.Tt=e,this.userId=r}static ue(e,r){return new dh(e,r.uid||"")}getOverlay(e,r){return Tl(e).get(w0(this.userId,r)).next(c=>c?kc(this.Tt,c):null)}getOverlays(e,r){const c=ql();return ot.forEach(r,f=>this.getOverlay(e,f).next(_=>{null!==_&&c.set(f,_)})).next(()=>c)}saveOverlays(e,r,c){const f=[];return c.forEach((_,w)=>{const N=new Np(r,w);f.push(this.ce(e,N))}),ot.waitFor(f)}removeOverlaysForBatchId(e,r,c){const f=new Set;r.forEach(w=>f.add(Sa(w.getCollectionPath())));const _=[];return f.forEach(w=>{const N=IDBKeyRange.bound([this.userId,w,c],[this.userId,w,c+1],!1,!0);_.push(Tl(e).Y("collectionPathOverlayIndex",N))}),ot.waitFor(_)}getOverlaysForCollection(e,r,c){const f=ql(),_=Sa(r),w=IDBKeyRange.bound([this.userId,_,c],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Tl(e).W("collectionPathOverlayIndex",w).next(N=>{for(const H of N){const q=kc(this.Tt,H);f.set(q.getKey(),q)}return f})}getOverlaysForCollectionGroup(e,r,c,f){const _=ql();let w;const N=IDBKeyRange.bound([this.userId,r,c],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Tl(e).X({index:"collectionGroupOverlayIndex",range:N},(H,q,ae)=>{const Se=kc(this.Tt,q);_.size()<f||Se.largestBatchId===w?(_.set(Se.getKey(),Se),w=Se.largestBatchId):ae.done()}).next(()=>_)}ce(e,r){return Tl(e).put(function(c,f,_){const[w,N,H]=w0(f,_.mutation.key);return{userId:f,collectionPath:N,documentId:H,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Dp(c.oe,_.mutation)}}(this.Tt,this.userId,r))}}function Tl(a){return so(a,"documentOverlays")}class dd{constructor(){}ae(e,r){this.he(e,r),r.le()}he(e,r){if("nullValue"in e)this.fe(r,5);else if("booleanValue"in e)this.fe(r,10),r.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(r,15),r.de(J(e.integerValue));else if("doubleValue"in e){const c=J(e.doubleValue);isNaN(c)?this.fe(r,13):(this.fe(r,15),no(c)?r.de(0):r.de(c))}else if("timestampValue"in e){const c=e.timestampValue;this.fe(r,20),"string"==typeof c?r._e(c):(r._e(`${c.seconds||""}`),r.de(c.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,r),this.me(r);else if("bytesValue"in e)this.fe(r,30),r.ge(se(e.bytesValue)),this.me(r);else if("referenceValue"in e)this.ye(e.referenceValue,r);else if("geoPointValue"in e){const c=e.geoPointValue;this.fe(r,45),r.de(c.latitude||0),r.de(c.longitude||0)}else"mapValue"in e?Ut(e)?this.fe(r,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,r),this.me(r)):"arrayValue"in e?(this.Ie(e.arrayValue,r),this.me(r)):jt()}we(e,r){this.fe(r,25),this.Te(e,r)}Te(e,r){r._e(e)}pe(e,r){const c=e.fields||{};this.fe(r,55);for(const f of Object.keys(c))this.we(f,r),this.he(c[f],r)}Ie(e,r){const c=e.values||[];this.fe(r,50);for(const f of c)this.he(f,r)}ye(e,r){this.fe(r,37),tn.fromName(e).path.forEach(c=>{this.fe(r,60),this.Te(c,r)})}fe(e,r){e.de(r)}me(e){e.de(2)}}function Ey(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function I0(a){const e=64-function(r){let c=0;for(let f=0;f<8;++f){const _=Ey(255&r[f]);if(c+=_,8!==_)break}return c}(a);return Math.ceil(e/8)}dd.Ee=new dd;class Qb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const r=e[Symbol.iterator]();let c=r.next();for(;!c.done;)this.Re(c.value),c=r.next();this.Pe()}ve(e){const r=e[Symbol.iterator]();let c=r.next();for(;!c.done;)this.be(c.value),c=r.next();this.Ve()}Se(e){for(const r of e){const c=r.charCodeAt(0);if(c<128)this.Re(c);else if(c<2048)this.Re(960|c>>>6),this.Re(128|63&c);else if(r<"\ud800"||"\udbff"<r)this.Re(480|c>>>12),this.Re(128|63&c>>>6),this.Re(128|63&c);else{const f=r.codePointAt(0);this.Re(240|f>>>18),this.Re(128|63&f>>>12),this.Re(128|63&f>>>6),this.Re(128|63&f)}}this.Pe()}De(e){for(const r of e){const c=r.charCodeAt(0);if(c<128)this.be(c);else if(c<2048)this.be(960|c>>>6),this.be(128|63&c);else if(r<"\ud800"||"\udbff"<r)this.be(480|c>>>12),this.be(128|63&c>>>6),this.be(128|63&c);else{const f=r.codePointAt(0);this.be(240|f>>>18),this.be(128|63&f>>>12),this.be(128|63&f>>>6),this.be(128|63&f)}}this.Ve()}Ce(e){const r=this.xe(e),c=I0(r);this.Ne(1+c),this.buffer[this.position++]=255&c;for(let f=r.length-c;f<r.length;++f)this.buffer[this.position++]=255&r[f]}ke(e){const r=this.xe(e),c=I0(r);this.Ne(1+c),this.buffer[this.position++]=~(255&c);for(let f=r.length-c;f<r.length;++f)this.buffer[this.position++]=~(255&r[f])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const r=function(f){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,f,!1),new Uint8Array(_.buffer)}(e),c=0!=(128&r[0]);r[0]^=c?255:128;for(let f=1;f<r.length;++f)r[f]^=c?255:0;return r}Re(e){const r=255&e;0===r?(this.Me(0),this.Me(255)):255===r?(this.Me(255),this.Me(0)):this.Me(r)}be(e){const r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const r=e+this.position;if(r<=this.buffer.length)return;let c=2*this.buffer.length;c<r&&(c=r);const f=new Uint8Array(c);f.set(this.buffer),this.buffer=f}}class C0{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class gf{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class xp{constructor(){this.Le=new Qb,this.qe=new C0(this.Le),this.Ue=new gf(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class hh{constructor(e,r,c,f){this.indexId=e,this.documentKey=r,this.arrayValue=c,this.directionalValue=f}Ge(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,c=new Uint8Array(r);return c.set(this.directionalValue,0),r!==e?c.set([0],this.directionalValue.length):++c[c.length-1],new hh(this.indexId,this.documentKey,this.arrayValue,c)}}function nc(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=Pp(a.arrayValue,e.arrayValue),0!==r?r:(r=Pp(a.directionalValue,e.directionalValue),0!==r?r:tn.comparator(a.documentKey,e.documentKey)))}function Pp(a,e){for(let r=0;r<a.length&&r<e.length;++r){const c=a[r]-e[r];if(0!==c)return c}return a.length-e.length}class T0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const r of e.filters){const c=r;c.isInequality()?this.ze=c:this.je.push(c)}}We(e){Zt(e.collectionGroup===this.collectionId);const r=Da(e);if(void 0!==r&&!this.He(r))return!1;const c=Nr(e);let f=0,_=0;for(;f<c.length&&this.He(c[f]);++f);if(f===c.length)return!0;if(void 0!==this.ze){const w=c[f];if(!this.Je(this.ze,w)||!this.Ye(this.Qe[_++],w))return!1;++f}for(;f<c.length;++f)if(_>=this.Qe.length||!this.Ye(this.Qe[_++],c[f]))return!1;return!0}He(e){for(const r of this.je)if(this.Je(r,e))return!0;return!1}Je(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Yl(a){var e,r;if(Zt(a instanceof er||a instanceof Hr),a instanceof er){if(a instanceof Qg){const f=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(_=>er.create(a.field,"==",_)))||[];return Hr.create(f,"or")}return a}const c=a.filters.map(f=>Yl(f));return Hr.create(c,a.op)}function kp(a){if(0===a.getFilters().length)return[];const e=Zl(Yl(a));return Zt(ym(e)),Fp(e)||Aa(e)?[e]:e.getFilters()}function Fp(a){return a instanceof er}function Aa(a){return a instanceof Hr&&Cc(a)}function ym(a){return Fp(a)||Aa(a)||function(e){if(e instanceof Hr&&Ts(e)){for(const r of e.getFilters())if(!Fp(r)&&!Aa(r))return!1;return!0}return!1}(a)}function Zl(a){if(Zt(a instanceof er||a instanceof Hr),a instanceof er)return a;if(1===a.filters.length)return Zl(a.filters[0]);const e=a.filters.map(c=>Zl(c));let r=Hr.create(e,a.op);return r=za(r),ym(r)?r:(Zt(r instanceof Hr),Zt(Vs(r)),Zt(r.filters.length>1),r.filters.reduce((c,f)=>Su(c,f)))}function Su(a,e){let r;return Zt(a instanceof er||a instanceof Hr),Zt(e instanceof er||e instanceof Hr),r=a instanceof er?e instanceof er?Hr.create([a,e],"and"):_e(a,e):e instanceof er?_e(e,a):function(c,f){if(Zt(c.filters.length>0&&f.filters.length>0),Vs(c)&&Vs(f))return Jh(c,f.getFilters());const _=Ts(c)?c:f,w=Ts(c)?f:c,N=_.filters.map(H=>Su(H,w));return Hr.create(N,"or")}(a,e),za(r)}function _e(a,e){if(Vs(e))return Jh(e,a.getFilters());{const r=e.filters.map(c=>Su(a,c));return Hr.create(r,"or")}}function za(a){if(Zt(a instanceof er||a instanceof Hr),a instanceof er)return a;const e=a.getFilters();if(1===e.length)return za(e[0]);if(Zu(a))return a;const r=e.map(f=>za(f)),c=[];return r.forEach(f=>{f instanceof er?c.push(f):f instanceof Hr&&(f.op===a.op?c.push(...f.filters):c.push(f))}),1===c.length?c[0]:Hr.create(c,a.op)}class wy{constructor(){this.Ze=new mf}addToCollectionParentIndex(e,r){return this.Ze.add(r),ot.resolve()}getCollectionParents(e,r){return ot.resolve(this.Ze.getEntries(r))}addFieldIndex(e,r){return ot.resolve()}deleteFieldIndex(e,r){return ot.resolve()}getDocumentsMatchingTarget(e,r){return ot.resolve(null)}getIndexType(e,r){return ot.resolve(0)}getFieldIndexes(e,r){return ot.resolve([])}getNextCollectionGroupToUpdate(e){return ot.resolve(null)}getMinOffset(e,r){return ot.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,r){return ot.resolve(xi.min())}updateCollectionGroup(e,r,c){return ot.resolve()}updateIndexEntries(e,r){return ot.resolve()}}class mf{constructor(){this.index={}}add(e){const r=e.lastSegment(),c=e.popLast(),f=this.index[r]||new pi(lr.comparator),_=!f.has(c);return this.index[r]=f.add(c),_}has(e){const r=e.lastSegment(),c=e.popLast(),f=this.index[r];return f&&f.has(c)}getEntries(e){return(this.index[e]||new pi(lr.comparator)).toArray()}}const Lp=new Uint8Array(0);class S0{constructor(e,r){this.user=e,this.databaseId=r,this.Xe=new mf,this.tn=new Nc(c=>Kl(c),(c,f)=>Sc(c,f)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Xe.has(r)){const c=r.lastSegment(),f=r.popLast();e.addOnCommittedListener(()=>{this.Xe.add(r)});const _={collectionId:c,parent:Sa(f)};return Dy(e).put(_)}return ot.resolve()}getCollectionParents(e,r){const c=[],f=IDBKeyRange.bound([r,""],[du(r),""],!1,!0);return Dy(e).W(f).next(_=>{for(const w of _){if(w.collectionId!==r)break;c.push(tc(w.parent))}return c})}addFieldIndex(e,r){const c=wi(e),f={indexId:(w=r).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var w;delete f.indexId;const _=c.add(f);if(r.indexState){const w=rc(e);return _.next(N=>{w.put(Rp(N,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return _.next()}deleteFieldIndex(e,r){const c=wi(e),f=rc(e),_=Pi(e);return c.delete(r.indexId).next(()=>f.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const c=Pi(e);let f=!0;const _=new Map;return ot.forEach(this.en(r),w=>this.nn(e,w).next(N=>{f&&(f=!!N),_.set(w,N)})).next(()=>{if(f){let w=ur();const N=[];return ot.forEach(_,(H,q)=>{var ae;Dt("IndexedDbIndexManager",`Using index ${ae=H,`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(dr=>`${dr.fieldPath}:${dr.kind}`).join(",")}`} to execute ${Kl(r)}`);const Se=function(dr,Rs){const Wr=Da(Rs);if(void 0===Wr)return null;for(const Qr of Yd(dr,Wr.fieldPath))switch(Qr.op){case"array-contains-any":return Qr.value.arrayValue.values||[];case"array-contains":return[Qr.value]}return null}(q,H),et=function(dr,Rs){const Wr=new Map;for(const Qr of Nr(Rs))for(const bo of Yd(dr,Qr.fieldPath))switch(bo.op){case"==":case"in":Wr.set(Qr.fieldPath.canonicalString(),bo.value);break;case"not-in":case"!=":return Wr.set(Qr.fieldPath.canonicalString(),bo.value),Array.from(Wr.values())}return null}(q,H),Tt=function(dr,Rs){const Wr=[];let Qr=!0;for(const bo of Nr(Rs)){const bc=0===bo.kind?tf(dr,bo.fieldPath,dr.startAt):nf(dr,bo.fieldPath,dr.startAt);Wr.push(bc.value),Qr&&(Qr=bc.inclusive)}return new Sn(Wr,Qr)}(q,H),Vt=function(dr,Rs){const Wr=[];let Qr=!0;for(const bo of Nr(Rs)){const bc=0===bo.kind?nf(dr,bo.fieldPath,dr.endAt):tf(dr,bo.fieldPath,dr.endAt);Wr.push(bc.value),Qr&&(Qr=bc.inclusive)}return new Sn(Wr,Qr)}(q,H),ln=this.sn(H,q,Tt),wn=this.sn(H,q,Vt),Ii=this.rn(H,q,et),Ms=this.on(H.indexId,Se,ln,Tt.inclusive,wn,Vt.inclusive,Ii);return ot.forEach(Ms,dr=>c.J(dr,r.limit).next(Rs=>{Rs.forEach(Wr=>{const Qr=tn.fromSegments(Wr.documentKey);w.has(Qr)||(w=w.add(Qr),N.push(Qr))})}))}).next(()=>N)}return ot.resolve(null)})}en(e){let r=this.tn.get(e);return r||(r=0===e.filters.length?[e]:kp(Hr.create(e.filters,"and")).map(c=>ef(e.path,e.collectionGroup,e.orderBy,c.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,r),r)}on(e,r,c,f,_,w,N){const H=(null!=r?r.length:1)*Math.max(c.length,_.length),q=H/(null!=r?r.length:1),ae=[];for(let Se=0;Se<H;++Se){const et=r?this.un(r[Se/q]):Lp,Tt=this.cn(e,et,c[Se%q],f),Vt=this.an(e,et,_[Se%q],w),ln=N.map(wn=>this.cn(e,et,wn,!0));ae.push(...this.createRange(Tt,Vt,ln))}return ae}cn(e,r,c,f){const _=new hh(e,tn.empty(),r,c);return f?_:_.Ge()}an(e,r,c,f){const _=new hh(e,tn.empty(),r,c);return f?_.Ge():_}nn(e,r){const c=new T0(r),f=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,f).next(_=>{let w=null;for(const N of _)c.We(N)&&(!w||N.fields.length>w.fields.length)&&(w=N);return w})}getIndexType(e,r){let c=2;const f=this.en(r);return ot.forEach(f,_=>this.nn(e,_).next(w=>{w?0!==c&&w.fields.length<function(N){let H=new pi(Cr.comparator),q=!1;for(const ae of N.filters)for(const Se of ae.getFlattenedFilters())Se.field.isKeyField()||("array-contains"===Se.op||"array-contains-any"===Se.op?q=!0:H=H.add(Se.field));for(const ae of N.orderBy)ae.field.isKeyField()||(H=H.add(ae.field));return H.size+(q?1:0)}(_)&&(c=1):c=0})).next(()=>null!==r.limit&&f.length>1&&2===c?1:c)}hn(e,r){const c=new xp;for(const f of Nr(e)){const _=r.data.field(f.fieldPath);if(null==_)return null;const w=c.Ke(f.kind);dd.Ee.ae(_,w)}return c.Be()}un(e){const r=new xp;return dd.Ee.ae(e,r.Ke(0)),r.Be()}ln(e,r){const c=new xp;return dd.Ee.ae(Bs(this.databaseId,r),c.Ke(function(f){const _=Nr(f);return 0===_.length?0:_[_.length-1].kind}(e))),c.Be()}rn(e,r,c){if(null===c)return[];let f=[];f.push(new xp);let _=0;for(const w of Nr(e)){const N=c[_++];for(const H of f)if(this.fn(r,w.fieldPath)&&z(N))f=this.dn(f,w,N);else{const q=H.Ke(w.kind);dd.Ee.ae(N,q)}}return this._n(f)}sn(e,r,c){return this.rn(e,r,c.position)}_n(e){const r=[];for(let c=0;c<e.length;++c)r[c]=e[c].Be();return r}dn(e,r,c){const f=[...e],_=[];for(const w of c.arrayValue.values||[])for(const N of f){const H=new xp;H.seed(N.Be()),dd.Ee.ae(w,H.Ke(r.kind)),_.push(H)}return _}fn(e,r){return!!e.filters.find(c=>c instanceof er&&c.field.isEqual(r)&&("in"===c.op||"not-in"===c.op))}getFieldIndexes(e,r){const c=wi(e),f=rc(e);return(r?c.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):c.W()).next(_=>{const w=[];return ot.forEach(_,N=>f.get([N.indexId,this.uid]).next(H=>{w.push(function(q,ae){const Se=ae?new gr(ae.sequenceNumber,new xi(xc(ae.readTime),new tn(tc(ae.documentKey)),ae.largestBatchId)):gr.empty(),et=q.fields.map(([Tt,Vt])=>new Lr(Cr.fromServerFormat(Tt),Vt));return new Hl(q.indexId,q.collectionGroup,et,Se)}(N,H))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((c,f)=>{const _=c.indexState.sequenceNumber-f.indexState.sequenceNumber;return 0!==_?_:Fn(c.collectionGroup,f.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,c){const f=wi(e),_=rc(e);return this.wn(e).next(w=>f.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(N=>ot.forEach(N,H=>_.put(Rp(H.indexId,this.user,w,c)))))}updateIndexEntries(e,r){const c=new Map;return ot.forEach(r,(f,_)=>{const w=c.get(f.collectionGroup);return(w?ot.resolve(w):this.getFieldIndexes(e,f.collectionGroup)).next(N=>(c.set(f.collectionGroup,N),ot.forEach(N,H=>this.mn(e,f,H).next(q=>{const ae=this.gn(_,H);return q.isEqual(ae)?ot.resolve():this.yn(e,_,H,q,ae)}))))})}pn(e,r,c,f){return Pi(e).put({indexId:f.indexId,uid:this.uid,arrayValue:f.arrayValue,directionalValue:f.directionalValue,orderedDocumentKey:this.ln(c,r.key),documentKey:r.key.path.toArray()})}In(e,r,c,f){return Pi(e).delete([f.indexId,this.uid,f.arrayValue,f.directionalValue,this.ln(c,r.key),r.key.path.toArray()])}mn(e,r,c){const f=Pi(e);let _=new pi(nc);return f.X({index:"documentKeyIndex",range:IDBKeyRange.only([c.indexId,this.uid,this.ln(c,r)])},(w,N)=>{_=_.add(new hh(c.indexId,r,N.arrayValue,N.directionalValue))}).next(()=>_)}gn(e,r){let c=new pi(nc);const f=this.hn(r,e);if(null==f)return c;const _=Da(r);if(null!=_){const w=e.data.field(_.fieldPath);if(z(w))for(const N of w.arrayValue.values||[])c=c.add(new hh(r.indexId,e.key,this.un(N),f))}else c=c.add(new hh(r.indexId,e.key,Lp,f));return c}yn(e,r,c,f,_){Dt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const w=[];return function(N,H,q,ae,Se){const et=N.getIterator(),Tt=H.getIterator();let Vt=Wl(et),ln=Wl(Tt);for(;Vt||ln;){let wn=!1,Ii=!1;if(Vt&&ln){const Ms=q(Vt,ln);Ms<0?Ii=!0:Ms>0&&(wn=!0)}else null!=Vt?Ii=!0:wn=!0;wn?(ae(ln),ln=Wl(Tt)):Ii?(Se(Vt),Vt=Wl(et)):(Vt=Wl(et),ln=Wl(Tt))}}(f,_,nc,N=>{w.push(this.pn(e,r,c,N))},N=>{w.push(this.In(e,r,c,N))}),ot.waitFor(w)}wn(e){let r=1;return rc(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(c,f,_)=>{_.done(),r=f.sequenceNumber+1}).next(()=>r)}createRange(e,r,c){c=c.sort((w,N)=>nc(w,N)).filter((w,N,H)=>!N||0!==nc(w,H[N-1]));const f=[];f.push(e);for(const w of c){const N=nc(w,e),H=nc(w,r);if(0===N)f[0]=e.Ge();else if(N>0&&H<0)f.push(w),f.push(w.Ge());else if(H>0)break}f.push(r);const _=[];for(let w=0;w<f.length;w+=2){if(this.Tn(f[w],f[w+1]))return[];_.push(IDBKeyRange.bound([f[w].indexId,this.uid,f[w].arrayValue,f[w].directionalValue,Lp,[]],[f[w+1].indexId,this.uid,f[w+1].arrayValue,f[w+1].directionalValue,Lp,[]]))}return _}Tn(e,r){return nc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(fh)}getMinOffset(e,r){return ot.mapArray(this.en(r),c=>this.nn(e,c).next(f=>f||jt())).next(fh)}}function Dy(a){return so(a,"collectionParents")}function Pi(a){return so(a,"indexEntries")}function wi(a){return so(a,"indexConfiguration")}function rc(a){return so(a,"indexState")}function fh(a){Zt(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let c=1;c<a.length;c++){const f=a[c].indexState.offset;aa(f,e)<0&&(e=f),r<f.largestBatchId&&(r=f.largestBatchId)}return new xi(e.readTime,e.documentKey,r)}const Iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,r,c){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=c}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ph(a,e,r){const c=a.store("mutations"),f=a.store("documentMutations"),_=[],w=IDBKeyRange.only(r.batchId);let N=0;const H=c.X({range:w},(ae,Se,et)=>(N++,et.delete()));_.push(H.next(()=>{Zt(1===N)}));const q=[];for(const ae of r.mutations){const Se=my(e,ae.key.path,r.batchId);_.push(f.delete(Se)),q.push(ae.key)}return ot.waitFor(_).next(()=>q)}function Up(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw jt();e=a.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class Bp{constructor(e,r,c,f){this.userId=e,this.Tt=r,this.indexManager=c,this.referenceDelegate=f,this.En={}}static ue(e,r,c,f){Zt(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Bp(_,r,c,f)}checkEmpty(e){let r=!0;const c=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ic(e).X({index:"userMutationsIndex",range:c},(f,_,w)=>{r=!1,w.done()}).next(()=>r)}addMutationBatch(e,r,c,f){const _=gh(e),w=ic(e);return w.add({}).next(N=>{Zt("number"==typeof N);const H=new hf(N,r,c,f),q=function(et,Tt,Vt){const ln=Vt.baseMutations.map(Ii=>Dp(et.oe,Ii)),wn=Vt.mutations.map(Ii=>Dp(et.oe,Ii));return{userId:Tt,batchId:Vt.batchId,localWriteTimeMs:Vt.localWriteTime.toMillis(),baseMutations:ln,mutations:wn}}(this.Tt,this.userId,H),ae=[];let Se=new pi((et,Tt)=>Fn(et.canonicalString(),Tt.canonicalString()));for(const et of f){const Tt=my(this.userId,et.key.path,N);Se=Se.add(et.key.path.popLast()),ae.push(w.put(q)),ae.push(_.put(Tt,qb))}return Se.forEach(et=>{ae.push(this.indexManager.addToCollectionParentIndex(e,et))}),e.addOnCommittedListener(()=>{this.En[N]=H.keys()}),ot.waitFor(ae).next(()=>H)})}lookupMutationBatch(e,r){return ic(e).get(r).next(c=>c?(Zt(c.userId===this.userId),ch(this.Tt,c)):null)}An(e,r){return this.En[r]?ot.resolve(this.En[r]):this.lookupMutationBatch(e,r).next(c=>{if(c){const f=c.keys();return this.En[r]=f,f}return null})}getNextMutationBatchAfterBatchId(e,r){const c=r+1,f=IDBKeyRange.lowerBound([this.userId,c]);let _=null;return ic(e).X({index:"userMutationsIndex",range:f},(w,N,H)=>{N.userId===this.userId&&(Zt(N.batchId>=c),_=ch(this.Tt,N)),H.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let c=-1;return ic(e).X({index:"userMutationsIndex",range:r,reverse:!0},(f,_,w)=>{c=_.batchId,w.done()}).next(()=>c)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ic(e).W("userMutationsIndex",r).next(c=>c.map(f=>ch(this.Tt,f)))}getAllMutationBatchesAffectingDocumentKey(e,r){const c=uh(this.userId,r.path),f=IDBKeyRange.lowerBound(c),_=[];return gh(e).X({range:f},(w,N,H)=>{const[q,ae,Se]=w,et=tc(ae);if(q===this.userId&&r.path.isEqual(et))return ic(e).get(Se).next(Tt=>{if(!Tt)throw jt();Zt(Tt.userId===this.userId),_.push(ch(this.Tt,Tt))});H.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,r){let c=new pi(Fn);const f=[];return r.forEach(_=>{const w=uh(this.userId,_.path),N=IDBKeyRange.lowerBound(w),H=gh(e).X({range:N},(q,ae,Se)=>{const[et,Tt,Vt]=q,ln=tc(Tt);et===this.userId&&_.path.isEqual(ln)?c=c.add(Vt):Se.done()});f.push(H)}),ot.waitFor(f).next(()=>this.Rn(e,c))}getAllMutationBatchesAffectingQuery(e,r){const c=r.path,f=c.length+1,_=uh(this.userId,c),w=IDBKeyRange.lowerBound(_);let N=new pi(Fn);return gh(e).X({range:w},(H,q,ae)=>{const[Se,et,Tt]=H,Vt=tc(et);Se===this.userId&&c.isPrefixOf(Vt)?Vt.length===f&&(N=N.add(Tt)):ae.done()}).next(()=>this.Rn(e,N))}Rn(e,r){const c=[],f=[];return r.forEach(_=>{f.push(ic(e).get(_).next(w=>{if(null===w)throw jt();Zt(w.userId===this.userId),c.push(ch(this.Tt,w))}))}),ot.waitFor(f).next(()=>c)}removeMutationBatch(e,r){return ph(e.re,this.userId,r).next(c=>(e.addOnCommittedListener(()=>{this.Pn(r.batchId)}),ot.forEach(c,f=>this.referenceDelegate.markPotentiallyOrphaned(e,f))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return ot.resolve();const c=IDBKeyRange.lowerBound([this.userId]),f=[];return gh(e).X({range:c},(_,w,N)=>{if(_[0]===this.userId){const H=tc(_[1]);f.push(H)}else N.done()}).next(()=>{Zt(0===f.length)})})}containsKey(e,r){return vm(e,this.userId,r)}vn(e){return Cy(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vm(a,e,r){const c=uh(e,r.path),f=c[1],_=IDBKeyRange.lowerBound(c);let w=!1;return gh(a).X({range:_,Z:!0},(N,H,q)=>{const[ae,Se,et]=N;ae===e&&Se===f&&(w=!0),q.done()}).next(()=>w)}function ic(a){return so(a,"mutations")}function gh(a){return so(a,"documentMutations")}function Cy(a){return so(a,"mutationQueues")}class hd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new hd(0)}static Sn(){return new hd(-1)}}class fd{constructor(e,r){this.referenceDelegate=e,this.Tt=r}allocateTargetId(e){return this.Dn(e).next(r=>{const c=new hd(r.highestTargetId);return r.highestTargetId=c.next(),this.Cn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(r=>yn.fromTimestamp(new sr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,c){return this.Dn(e).next(f=>(f.highestListenSequenceNumber=r,c&&(f.lastRemoteSnapshotVersion=c.toTimestamp()),r>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=r),this.Cn(e,f)))}addTargetData(e,r){return this.xn(e,r).next(()=>this.Dn(e).next(c=>(c.targetCount+=1,this.Nn(r,c),this.Cn(e,c))))}updateTargetData(e,r){return this.xn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Wa(e).delete(r.targetId)).next(()=>this.Dn(e)).next(c=>(Zt(c.targetCount>0),c.targetCount-=1,this.Cn(e,c)))}removeTargets(e,r,c){let f=0;const _=[];return Wa(e).X((w,N)=>{const H=Pc(N);H.sequenceNumber<=r&&null===c.get(H.targetId)&&(f++,_.push(this.removeTargetData(e,H)))}).next(()=>ot.waitFor(_)).next(()=>f)}forEachTarget(e,r){return Wa(e).X((c,f)=>{const _=Pc(f);r(_)})}Dn(e){return Ty(e).get("targetGlobalKey").next(r=>(Zt(null!==r),r))}Cn(e,r){return Ty(e).put("targetGlobalKey",r)}xn(e,r){return Wa(e).put(pm(this.Tt,r))}Nn(e,r){let c=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,c=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,c=!0),c}getTargetCount(e){return this.Dn(e).next(r=>r.targetCount)}getTargetData(e,r){const c=Kl(r),f=IDBKeyRange.bound([c,Number.NEGATIVE_INFINITY],[c,Number.POSITIVE_INFINITY]);let _=null;return Wa(e).X({range:f,index:"queryTargetsIndex"},(w,N,H)=>{const q=Pc(N);Sc(r,q.target)&&(_=q,H.done())}).next(()=>_)}addMatchingKeys(e,r,c){const f=[],_=Fc(e);return r.forEach(w=>{const N=Sa(w.path);f.push(_.put({targetId:c,path:N})),f.push(this.referenceDelegate.addReference(e,c,w))}),ot.waitFor(f)}removeMatchingKeys(e,r,c){const f=Fc(e);return ot.forEach(r,_=>{const w=Sa(_.path);return ot.waitFor([f.delete([c,w]),this.referenceDelegate.removeReference(e,c,_)])})}removeMatchingKeysForTargetId(e,r){const c=Fc(e),f=IDBKeyRange.bound([r],[r+1],!1,!0);return c.delete(f)}getMatchingKeysForTargetId(e,r){const c=IDBKeyRange.bound([r],[r+1],!1,!0),f=Fc(e);let _=ur();return f.X({range:c,Z:!0},(w,N,H)=>{const q=tc(w[1]),ae=new tn(q);_=_.add(ae)}).next(()=>_)}containsKey(e,r){const c=Sa(r.path),f=IDBKeyRange.bound([c],[du(c)],!1,!0);let _=0;return Fc(e).X({index:"documentTargetsIndex",Z:!0,range:f},([w,N],H,q)=>{0!==w&&(_++,q.done())}).next(()=>_>0)}ie(e,r){return Wa(e).get(r).next(c=>c?Pc(c):null)}}function Wa(a){return so(a,"targets")}function Ty(a){return so(a,"targetGlobal")}function Fc(a){return so(a,"targetDocuments")}function mh([a,e],[r,c]){const f=Fn(a,r);return 0===f?Fn(e,c):f}class A0{constructor(e){this.kn=e,this.buffer=new pi(mh),this.$n=0}Mn(){return++this.$n}On(e){const r=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(r);else{const c=this.buffer.last();mh(r,c)<0&&(this.buffer=this.buffer.delete(c).add(r))}}get maxValue(){return this.buffer.last()[0]}}class bm{constructor(e,r,c){this.garbageCollector=e,this.asyncQueue=r,this.localStore=c,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var r=this;Dt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){r.Fn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(c){Oo(c)?Dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield Wo(c)}yield r.Bn(3e5)}))}}class Vp{constructor(e,r){this.Ln=e,this.params=r}calculateTargetCount(e,r){return this.Ln.qn(e).next(c=>Math.floor(r/100*c))}nthSequenceNumber(e,r){if(0===r)return ot.resolve(go.at);const c=new A0(r);return this.Ln.forEachTarget(e,f=>c.On(f.sequenceNumber)).next(()=>this.Ln.Un(e,f=>c.On(f))).next(()=>c.maxValue)}removeTargets(e,r,c){return this.Ln.removeTargets(e,r,c)}removeOrphanedDocuments(e,r){return this.Ln.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(Iy)):this.getCacheSize(e).next(c=>c<this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${c} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iy):this.Kn(e,r))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,r){let c,f,_,w,N,H,q;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Se=>(Se>this.params.maximumSequenceNumbersToCollect?(Dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Se}`),f=this.params.maximumSequenceNumbersToCollect):f=Se,w=Date.now(),this.nthSequenceNumber(e,f))).next(Se=>(c=Se,N=Date.now(),this.removeTargets(e,c,r))).next(Se=>(_=Se,H=Date.now(),this.removeOrphanedDocuments(e,c))).next(Se=>(q=Date.now(),fn()<=rt.in.DEBUG&&Dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ae}ms\n\tDetermined least recently used ${f} in `+(N-w)+`ms\n\tRemoved ${_} targets in `+(H-N)+`ms\n\tRemoved ${Se} documents in `+(q-H)+`ms\nTotal Duration: ${q-ae}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:_,documentsRemoved:Se})))}}class _h{constructor(e,r){this.db=e,this.garbageCollector=new Vp(this,r)}qn(e){const r=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(c=>r.next(f=>c+f))}Gn(e){let r=0;return this.Un(e,c=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Un(e,r){return this.Qn(e,(c,f)=>r(f))}addReference(e,r,c){return oo(e,c)}removeReference(e,r,c){return oo(e,c)}removeTargets(e,r,c){return this.db.getTargetCache().removeTargets(e,r,c)}markPotentiallyOrphaned(e,r){return oo(e,r)}jn(e,r){return function(c,f){let _=!1;return Cy(c).tt(w=>vm(c,w,f).next(N=>(N&&(_=!0),ot.resolve(!N)))).next(()=>_)}(e,r)}removeOrphanedDocuments(e,r){const c=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[];let _=0;return this.Qn(e,(w,N)=>{if(N<=r){const H=this.jn(e,w).next(q=>{if(!q)return _++,c.getEntry(e,w).next(()=>(c.removeEntry(w,yn.min()),Fc(e).delete([0,Sa(w.path)])))});f.push(H)}}).next(()=>ot.waitFor(f)).next(()=>c.apply(e)).next(()=>_)}removeTarget(e,r){const c=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,c)}updateLimboDocument(e,r){return oo(e,r)}Qn(e,r){const c=Fc(e);let f,_=go.at;return c.X({index:"documentTargetsIndex"},([w,N],{path:H,sequenceNumber:q})=>{0===w?(_!==go.at&&r(new tn(tc(f)),_),_=q,f=H):_=go.at}).next(()=>{_!==go.at&&r(new tn(tc(f)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oo(a,e){return Fc(a).put((c=a.currentSequenceNumber,{targetId:0,path:Sa(e.path),sequenceNumber:c}));var c}class Sy{constructor(){this.changes=new Nc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,$r.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const c=this.changes.get(r);return void 0!==c?ot.resolve(c):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ay{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,c){return pd(e).put(c)}removeEntry(e,r,c){return pd(e).delete(function(f,_){const w=f.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],ff(_),w[w.length-1]]}(r,c))}updateMetadata(e,r){return this.getMetadata(e).next(c=>(c.byteSize+=r,this.zn(e,c)))}getEntry(e,r){let c=$r.newInvalidDocument(r);return pd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sc(r))},(f,_)=>{c=this.Wn(r,_)}).next(()=>c)}Hn(e,r){let c={size:0,document:$r.newInvalidDocument(r)};return pd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sc(r))},(f,_)=>{c={document:this.Wn(r,_),size:Up(_)}}).next(()=>c)}getEntries(e,r){let c=$a();return this.Jn(e,r,(f,_)=>{const w=this.Wn(f,_);c=c.insert(f,w)}).next(()=>c)}Yn(e,r){let c=$a(),f=new ss(tn.comparator);return this.Jn(e,r,(_,w)=>{const N=this.Wn(_,w);c=c.insert(_,N),f=f.insert(_,Up(w))}).next(()=>({documents:c,Zn:f}))}Jn(e,r,c){if(r.isEmpty())return ot.resolve();let f=new pi(Gp);r.forEach(H=>f=f.add(H));const _=IDBKeyRange.bound(sc(f.first()),sc(f.last())),w=f.getIterator();let N=w.getNext();return pd(e).X({index:"documentKeyIndex",range:_},(H,q,ae)=>{const Se=tn.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;N&&Gp(N,Se)<0;)c(N,null),N=w.getNext();N&&N.isEqual(Se)&&(c(N,q),N=w.hasNext()?w.getNext():null),N?ae.j(sc(N)):ae.done()}).next(()=>{for(;N;)c(N,null),N=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,r,c,f){const _=r.path,w=[_.popLast().toArray(),_.lastSegment(),ff(c.readTime),c.documentKey.path.isEmpty()?"":c.documentKey.path.lastSegment()],N=[_.popLast().toArray(),_.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pd(e).W(IDBKeyRange.bound(w,N,!0)).next(H=>{let q=$a();for(const ae of H){const Se=this.Wn(tn.fromSegments(ae.prefixPath.concat(ae.collectionGroup,ae.documentId)),ae);Se.isFoundDocument()&&(E(r,Se)||f.has(Se.key))&&(q=q.insert(Se.key,Se))}return q})}getAllFromCollectionGroup(e,r,c,f){let _=$a();const w=Em(r,c),N=Em(r,xi.max());return pd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,N,!0)},(H,q,ae)=>{const Se=this.Wn(tn.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);_=_.insert(Se.key,Se),_.size===f&&ae.done()}).next(()=>_)}newChangeBuffer(e){return new O0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Sl(e).get("remoteDocumentGlobalKey").next(r=>(Zt(!!r),r))}zn(e,r){return Sl(e).put("remoteDocumentGlobalKey",r)}Wn(e,r){if(r){const c=function by(a,e){let r;if(e.document)r=wp(a.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const c=tn.fromSegments(e.noDocument.path),f=xc(e.noDocument.readTime);r=$r.newNoDocument(c,f),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const c=tn.fromSegments(e.unknownDocument.path),f=xc(e.unknownDocument.version);r=$r.newUnknownDocument(c,f)}}return e.readTime&&r.setReadTime(function(c){const f=new sr(c[0],c[1]);return yn.fromTimestamp(f)}(e.readTime)),r}(this.Tt,r);if(!c.isNoDocument()||!c.version.isEqual(yn.min()))return c}return $r.newInvalidDocument(e)}}function Oy(a){return new Ay(a)}class O0 extends Sy{constructor(e,r){super(),this.Xn=e,this.trackRemovals=r,this.ts=new Nc(c=>c.toString(),(c,f)=>c.isEqual(f))}applyChanges(e){const r=[];let c=0,f=new pi((_,w)=>Fn(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const N=this.ts.get(_);if(r.push(this.Xn.removeEntry(e,_,N.readTime)),w.isValidDocument()){const H=Mp(this.Xn.Tt,w);f=f.add(_.path.popLast());const q=Up(H);c+=q-N.size,r.push(this.Xn.addEntry(e,_,H))}else if(c-=N.size,this.trackRemovals){const H=Mp(this.Xn.Tt,w.convertToNoDocument(yn.min()));r.push(this.Xn.addEntry(e,_,H))}}),f.forEach(_=>{r.push(this.Xn.indexManager.addToCollectionParentIndex(e,_))}),r.push(this.Xn.updateMetadata(e,c)),ot.waitFor(r)}getFromCache(e,r){return this.Xn.Hn(e,r).next(c=>(this.ts.set(r,{size:c.size,readTime:c.document.readTime}),c.document))}getAllFromCache(e,r){return this.Xn.Yn(e,r).next(({documents:c,Zn:f})=>(f.forEach((_,w)=>{this.ts.set(_,{size:w,readTime:c.get(_).readTime})}),c))}}function Sl(a){return so(a,"remoteDocumentGlobal")}function pd(a){return so(a,"remoteDocumentsV14")}function sc(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Em(a,e){const r=e.documentKey.path.toArray();return[a,ff(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Gp(a,e){const r=a.path.toArray(),c=e.path.toArray();let f=0;for(let _=0;_<r.length-2&&_<c.length-2;++_)if(f=Fn(r[_],c[_]),f)return f;return f=Fn(r.length,c.length),f||(f=Fn(r[r.length-2],c[c.length-2]),f||Fn(r[r.length-1],c[c.length-1]))}class wm{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Au{constructor(e,r,c,f){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=c,this.indexManager=f}getDocument(e,r){let c=null;return this.documentOverlayCache.getOverlay(e,r).next(f=>(c=f,this.remoteDocumentCache.getEntry(e,r))).next(f=>(null!==c&&od(c.mutation,f,Ro.empty(),sr.now()),f))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(c=>this.getLocalViewOfDocuments(e,c,ur()).next(()=>c))}getLocalViewOfDocuments(e,r,c=ur()){const f=ql();return this.populateOverlays(e,f,r).next(()=>this.computeViews(e,r,f,c).next(_=>{let w=ld();return _.forEach((N,H)=>{w=w.insert(N,H.overlayedDocument)}),w}))}getOverlayedDocuments(e,r){const c=ql();return this.populateOverlays(e,c,r).next(()=>this.computeViews(e,r,c,ur()))}populateOverlays(e,r,c){const f=[];return c.forEach(_=>{r.has(_)||f.push(_)}),this.documentOverlayCache.getOverlays(e,f).next(_=>{_.forEach((w,N)=>{r.set(w,N)})})}computeViews(e,r,c,f){let _=$a();const w=th(),N=th();return r.forEach((H,q)=>{const ae=c.get(q.key);f.has(q.key)&&(void 0===ae||ae.mutation instanceof bu)?_=_.insert(q.key,q):void 0!==ae?(w.set(q.key,ae.mutation.getFieldMask()),od(ae.mutation,q,ae.mutation.getFieldMask(),sr.now())):w.set(q.key,Ro.empty())}),this.recalculateAndSaveOverlays(e,_).next(H=>(H.forEach((q,ae)=>w.set(q,ae)),r.forEach((q,ae)=>{var Se;return N.set(q,new wm(ae,null!==(Se=w.get(q))&&void 0!==Se?Se:null))}),N))}recalculateAndSaveOverlays(e,r){const c=th();let f=new ss((w,N)=>w-N),_=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(w=>{for(const N of w)N.keys().forEach(H=>{const q=r.get(H);if(null===q)return;let ae=c.get(H)||Ro.empty();ae=N.applyToLocalView(q,ae),c.set(H,ae);const Se=(f.get(N.batchId)||ur()).add(H);f=f.insert(N.batchId,Se)})}).next(()=>{const w=[],N=f.getReverseIterator();for(;N.hasNext();){const H=N.getNext(),q=H.key,ae=H.value,Se=rm();ae.forEach(et=>{if(!_.has(et)){const Tt=sd(r.get(et),c.get(et));null!==Tt&&Se.set(et,Tt),_=_.add(et)}}),w.push(this.documentOverlayCache.saveOverlays(e,q,Se))}return ot.waitFor(w)}).next(()=>c)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(c=>this.recalculateAndSaveOverlays(e,c))}getDocumentsMatchingQuery(e,r,c){return tn.isDocumentKey((f=r).path)&&null===f.collectionGroup&&0===f.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):rd(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,c):this.getDocumentsMatchingCollectionQuery(e,r,c);var f}getNextDocuments(e,r,c,f){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,c,f).next(_=>{const w=f-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,c.largestBatchId,f-_.size):ot.resolve(ql());let N=-1,H=_;return w.next(q=>ot.forEach(q,(ae,Se)=>(N<Se.largestBatchId&&(N=Se.largestBatchId),_.get(ae)?ot.resolve():this.remoteDocumentCache.getEntry(e,ae).next(et=>{H=H.insert(ae,et)}))).next(()=>this.populateOverlays(e,q,_)).next(()=>this.computeViews(e,H,q,ur())).next(ae=>({batchId:N,changes:ly(ae)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new tn(r)).next(c=>{let f=ld();return c.isFoundDocument()&&(f=f.insert(c.key,c)),f})}getDocumentsMatchingCollectionGroupQuery(e,r,c){const f=r.collectionGroup;let _=ld();return this.indexManager.getCollectionParents(e,f).next(w=>ot.forEach(w,N=>{const H=(q=r,ae=N.child(f),new Ta(ae,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ae;return this.getDocumentsMatchingCollectionQuery(e,H,c).next(q=>{q.forEach((ae,Se)=>{_=_.insert(ae,Se)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,r,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,c.largestBatchId).next(_=>(f=_,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,c,f))).next(_=>{f.forEach((N,H)=>{const q=H.getKey();null===_.get(q)&&(_=_.insert(q,$r.newInvalidDocument(q)))});let w=ld();return _.forEach((N,H)=>{const q=f.get(N);void 0!==q&&od(q.mutation,H,Ro.empty(),sr.now()),E(r,H)&&(w=w.insert(N,H))}),w})}}class Dm{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,r){return ot.resolve(this.es.get(r))}saveBundleMetadata(e,r){var c;return this.es.set(r.id,{id:(c=r).id,version:c.version,createTime:As(c.createTime)}),ot.resolve()}getNamedQuery(e,r){return ot.resolve(this.ns.get(r))}saveNamedQuery(e,r){return this.ns.set(r.name,{name:(c=r).name,query:gm(c.bundledQuery),readTime:As(c.readTime)}),ot.resolve();var c}}class Lc{constructor(){this.overlays=new ss(tn.comparator),this.ss=new Map}getOverlay(e,r){return ot.resolve(this.overlays.get(r))}getOverlays(e,r){const c=ql();return ot.forEach(r,f=>this.getOverlay(e,f).next(_=>{null!==_&&c.set(f,_)})).next(()=>c)}saveOverlays(e,r,c){return c.forEach((f,_)=>{this.ce(e,r,_)}),ot.resolve()}removeOverlaysForBatchId(e,r,c){const f=this.ss.get(c);return void 0!==f&&(f.forEach(_=>this.overlays=this.overlays.remove(_)),this.ss.delete(c)),ot.resolve()}getOverlaysForCollection(e,r,c){const f=ql(),_=r.length+1,w=new tn(r.child("")),N=this.overlays.getIteratorFrom(w);for(;N.hasNext();){const H=N.getNext().value,q=H.getKey();if(!r.isPrefixOf(q.path))break;q.path.length===_&&H.largestBatchId>c&&f.set(H.getKey(),H)}return ot.resolve(f)}getOverlaysForCollectionGroup(e,r,c,f){let _=new ss((q,ae)=>q-ae);const w=this.overlays.getIterator();for(;w.hasNext();){const q=w.getNext().value;if(q.getKey().getCollectionGroup()===r&&q.largestBatchId>c){let ae=_.get(q.largestBatchId);null===ae&&(ae=ql(),_=_.insert(q.largestBatchId,ae)),ae.set(q.getKey(),q)}}const N=ql(),H=_.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((q,ae)=>N.set(q,ae)),!(N.size()>=f)););return ot.resolve(N)}ce(e,r,c){const f=this.overlays.get(c.key);if(null!==f){const w=this.ss.get(f.largestBatchId).delete(c.key);this.ss.set(f.largestBatchId,w)}this.overlays=this.overlays.insert(c.key,new Np(r,c));let _=this.ss.get(r);void 0===_&&(_=ur(),this.ss.set(r,_)),this.ss.set(r,_.add(c.key))}}class jp{constructor(){this.rs=new pi(xo.os),this.us=new pi(xo.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,r){const c=new xo(e,r);this.rs=this.rs.add(c),this.us=this.us.add(c)}hs(e,r){e.forEach(c=>this.addReference(c,r))}removeReference(e,r){this.ls(new xo(e,r))}fs(e,r){e.forEach(c=>this.removeReference(c,r))}ds(e){const r=new tn(new lr([])),c=new xo(r,e),f=new xo(r,e+1),_=[];return this.us.forEachInRange([c,f],w=>{this.ls(w),_.push(w.key)}),_}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const r=new tn(new lr([])),c=new xo(r,e),f=new xo(r,e+1);let _=ur();return this.us.forEachInRange([c,f],w=>{_=_.add(w.key)}),_}containsKey(e){const r=new xo(e,0),c=this.rs.firstAfterOrEqual(r);return null!==c&&e.isEqual(c.key)}}class xo{constructor(e,r){this.key=e,this.gs=r}static os(e,r){return tn.comparator(e.key,r.key)||Fn(e.gs,r.gs)}static cs(e,r){return Fn(e.gs,r.gs)||tn.comparator(e.key,r.key)}}class Qn{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ys=1,this.ps=new pi(xo.os)}checkEmpty(e){return ot.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,c,f){const _=this.ys;this.ys++;const w=new hf(_,r,c,f);this.mutationQueue.push(w);for(const N of f)this.ps=this.ps.add(new xo(N.key,_)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return ot.resolve(w)}lookupMutationBatch(e,r){return ot.resolve(this.Is(r))}getNextMutationBatchAfterBatchId(e,r){const f=this.Ts(r+1),_=f<0?0:f;return ot.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const c=new xo(r,0),f=new xo(r,Number.POSITIVE_INFINITY),_=[];return this.ps.forEachInRange([c,f],w=>{const N=this.Is(w.gs);_.push(N)}),ot.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,r){let c=new pi(Fn);return r.forEach(f=>{const _=new xo(f,0),w=new xo(f,Number.POSITIVE_INFINITY);this.ps.forEachInRange([_,w],N=>{c=c.add(N.gs)})}),ot.resolve(this.Es(c))}getAllMutationBatchesAffectingQuery(e,r){const c=r.path,f=c.length+1;let _=c;tn.isDocumentKey(_)||(_=_.child(""));const w=new xo(new tn(_),0);let N=new pi(Fn);return this.ps.forEachWhile(H=>{const q=H.key.path;return!!c.isPrefixOf(q)&&(q.length===f&&(N=N.add(H.gs)),!0)},w),ot.resolve(this.Es(N))}Es(e){const r=[];return e.forEach(c=>{const f=this.Is(c);null!==f&&r.push(f)}),r}removeMutationBatch(e,r){Zt(0===this.As(r.batchId,"removed")),this.mutationQueue.shift();let c=this.ps;return ot.forEach(r.mutations,f=>{const _=new xo(f.key,r.batchId);return c=c.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(()=>{this.ps=c})}Pn(e){}containsKey(e,r){const c=new xo(r,0),f=this.ps.firstAfterOrEqual(c);return ot.resolve(r.isEqual(f&&f.key))}performConsistencyCheck(e){return ot.resolve()}As(e,r){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const r=this.Ts(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Ny{constructor(e){this.Rs=e,this.docs=new ss(tn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const c=r.key,f=this.docs.get(c),_=f?f.size:0,w=this.Rs(r);return this.docs=this.docs.insert(c,{document:r.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,c.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const c=this.docs.get(r);return ot.resolve(c?c.document.mutableCopy():$r.newInvalidDocument(r))}getEntries(e,r){let c=$a();return r.forEach(f=>{const _=this.docs.get(f);c=c.insert(f,_?_.document.mutableCopy():$r.newInvalidDocument(f))}),ot.resolve(c)}getDocumentsMatchingQuery(e,r,c,f){let _=$a();const w=r.path,N=new tn(w.child("")),H=this.docs.getIteratorFrom(N);for(;H.hasNext();){const{key:q,value:{document:ae}}=H.getNext();if(!w.isPrefixOf(q.path))break;q.path.length>w.length+1||aa(So(ae),c)<=0||(f.has(ae.key)||E(r,ae))&&(_=_.insert(ae.key,ae.mutableCopy()))}return ot.resolve(_)}getAllFromCollectionGroup(e,r,c,f){jt()}Ps(e,r){return ot.forEach(this.docs,c=>r(c))}newChangeBuffer(e){return new My(this)}getSize(e){return ot.resolve(this.size)}}class My extends Sy{constructor(e){super(),this.Xn=e}applyChanges(e){const r=[];return this.changes.forEach((c,f)=>{f.isValidDocument()?r.push(this.Xn.addEntry(e,f)):this.Xn.removeEntry(c)}),ot.waitFor(r)}getFromCache(e,r){return this.Xn.getEntry(e,r)}getAllFromCache(e,r){return this.Xn.getEntries(e,r)}}class Ry{constructor(e){this.persistence=e,this.vs=new Nc(r=>Kl(r),Sc),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.bs=0,this.Vs=new jp,this.targetCount=0,this.Ss=hd.Vn()}forEachTarget(e,r){return this.vs.forEach((c,f)=>r(f)),ot.resolve()}getLastRemoteSnapshotVersion(e){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ot.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(e,r,c){return c&&(this.lastRemoteSnapshotVersion=c),r>this.bs&&(this.bs=r),ot.resolve()}xn(e){this.vs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ss=new hd(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.xn(r),this.targetCount+=1,ot.resolve()}updateTargetData(e,r){return this.xn(r),ot.resolve()}removeTargetData(e,r){return this.vs.delete(r.target),this.Vs.ds(r.targetId),this.targetCount-=1,ot.resolve()}removeTargets(e,r,c){let f=0;const _=[];return this.vs.forEach((w,N)=>{N.sequenceNumber<=r&&null===c.get(N.targetId)&&(this.vs.delete(w),_.push(this.removeMatchingKeysForTargetId(e,N.targetId)),f++)}),ot.waitFor(_).next(()=>f)}getTargetCount(e){return ot.resolve(this.targetCount)}getTargetData(e,r){const c=this.vs.get(r)||null;return ot.resolve(c)}addMatchingKeys(e,r,c){return this.Vs.hs(r,c),ot.resolve()}removeMatchingKeys(e,r,c){this.Vs.fs(r,c);const f=this.persistence.referenceDelegate,_=[];return f&&r.forEach(w=>{_.push(f.markPotentiallyOrphaned(e,w))}),ot.waitFor(_)}removeMatchingKeysForTargetId(e,r){return this.Vs.ds(r),ot.resolve()}getMatchingKeysForTargetId(e,r){const c=this.Vs.ws(r);return ot.resolve(c)}containsKey(e,r){return ot.resolve(this.Vs.containsKey(r))}}class xy{constructor(e,r){this.Ds={},this.overlays={},this.Cs=new go(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Ry(this),this.indexManager=new wy,this.remoteDocumentCache=new Ny(c=>this.referenceDelegate.ks(c)),this.Tt=new vy(r),this.$s=new Dm(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Lc,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let c=this.Ds[e.toKey()];return c||(c=new Qn(r,this.referenceDelegate),this.Ds[e.toKey()]=c),c}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,r,c){Dt("MemoryPersistence","Starting transaction:",e);const f=new N0(this.Cs.next());return this.referenceDelegate.Ms(),c(f).next(_=>this.referenceDelegate.Os(f).next(()=>_)).toPromise().then(_=>(f.raiseOnCommittedEvent(),_))}Fs(e,r){return ot.or(Object.values(this.Ds).map(c=>()=>c.containsKey(e,r)))}}class N0 extends Dl{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Bs=new jp,this.Ls=null}static qs(e){return new _f(e)}get Us(){if(this.Ls)return this.Ls;throw jt()}addReference(e,r,c){return this.Bs.addReference(c,r),this.Us.delete(c.toString()),ot.resolve()}removeReference(e,r,c){return this.Bs.removeReference(c,r),this.Us.add(c.toString()),ot.resolve()}markPotentiallyOrphaned(e,r){return this.Us.add(r.toString()),ot.resolve()}removeTarget(e,r){this.Bs.ds(r.targetId).forEach(f=>this.Us.add(f.toString()));const c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(e,r.targetId).next(f=>{f.forEach(_=>this.Us.add(_.toString()))}).next(()=>c.removeTargetData(e,r))}Ms(){this.Ls=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.Us,c=>{const f=tn.fromPath(c);return this.Ks(e,f).next(_=>{_||r.removeEntry(f,yn.min())})}).next(()=>(this.Ls=null,r.apply(e)))}updateLimboDocument(e,r){return this.Ks(e,r).next(c=>{c?this.Us.delete(r.toString()):this.Us.add(r.toString())})}ks(e){return 0}Ks(e,r){return ot.or([()=>ot.resolve(this.Bs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Fs(e,r)])}}class M0{constructor(e){this.Tt=e}F(e,r,c,f){const _=new ll("createOrUpgrade",r);var N;c<1&&f>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",p0,{unique:!0}),N.createObjectStore("documentMutations"),Im(e),function(N){N.createObjectStore("remoteDocuments")}(e));let w=ot.resolve();return c<3&&f>=3&&(0!==c&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Im(e)),w=w.next(()=>function(N){const H=N.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",q)}(_))),c<4&&f>=4&&(0!==c&&(w=w.next(()=>function(N,H){return H.store("mutations").W().next(q=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",p0,{unique:!0});const ae=H.store("mutations"),Se=q.map(et=>ae.put(et));return ot.waitFor(Se)})}(e,_))),w=w.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),c<5&&f>=5&&(w=w.next(()=>this.Gs(_))),c<6&&f>=6&&(w=w.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(_)))),c<7&&f>=7&&(w=w.next(()=>this.js(_))),c<8&&f>=8&&(w=w.next(()=>this.zs(e,_))),c<9&&f>=9&&(w=w.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),c<10&&f>=10&&(w=w.next(()=>this.Ws(_))),c<11&&f>=11&&(w=w.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),c<12&&f>=12&&(w=w.next(()=>{!function(N){const H=N.createObjectStore("documentOverlays",{keyPath:dm});H.createIndex("collectionPathOverlayIndex",v0,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",b0,{unique:!1})}(e)})),c<13&&f>=13&&(w=w.next(()=>function(N){const H=N.createObjectStore("remoteDocumentsV14",{keyPath:Yb});H.createIndex("documentKeyIndex",Zb),H.createIndex("collectionGroupIndex",g0)}(e)).next(()=>this.Hs(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),c<14&&f>=14&&(w=w.next(()=>this.Js(e,_))),c<15&&f>=15&&(w=w.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:Gs}).createIndex("sequenceNumberIndex",_0,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:y0}).createIndex("documentKeyIndex",Ap,{unique:!1})}(e))),w}Qs(e){let r=0;return e.store("remoteDocuments").X((c,f)=>{r+=Up(f)}).next(()=>{const c={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",c)})}Gs(e){const r=e.store("mutationQueues"),c=e.store("mutations");return r.W().next(f=>ot.forEach(f,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return c.W("userMutationsIndex",w).next(N=>ot.forEach(N,H=>{Zt(H.userId===_.userId);const q=ch(this.Tt,H);return ph(e,_.userId,q).next(()=>{})}))}))}js(e){const r=e.store("targetDocuments"),c=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(f=>{const _=[];return c.X((w,N)=>{const H=new lr(w),q=[0,Sa(H)];_.push(r.get(q).next(ae=>ae?ot.resolve():r.put({targetId:0,path:Sa(H),sequenceNumber:f.highestListenSequenceNumber})))}).next(()=>ot.waitFor(_))})}zs(e,r){e.createObjectStore("collectionParents",{keyPath:m0});const c=r.store("collectionParents"),f=new mf,_=w=>{if(f.add(w)){const N=w.lastSegment(),H=w.popLast();return c.put({collectionId:N,parent:Sa(H)})}};return r.store("remoteDocuments").X({Z:!0},(w,N)=>{const H=new lr(w);return _(H.popLast())}).next(()=>r.store("documentMutations").X({Z:!0},([w,N,H],q)=>{const ae=tc(N);return _(ae.popLast())}))}Ws(e){const r=e.store("targets");return r.X((c,f)=>{const _=Pc(f),w=pm(this.Tt,_);return r.put(w)})}Hs(e,r){const c=r.store("remoteDocuments"),f=[];return c.X((_,w)=>{const N=r.store("remoteDocumentsV14"),H=(q=w,q.document?new tn(lr.fromString(q.document.name).popFirst(5)):q.noDocument?tn.fromSegments(q.noDocument.path):q.unknownDocument?tn.fromSegments(q.unknownDocument.path):jt()).path.toArray();var q;const ae={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};f.push(N.put(ae))}).next(()=>ot.waitFor(f))}Js(e,r){const c=r.store("mutations"),f=Oy(this.Tt),_=new xy(_f.qs,this.Tt.oe);return c.W().next(w=>{const N=new Map;return w.forEach(H=>{var q;let ae=null!==(q=N.get(H.userId))&&void 0!==q?q:ur();ch(this.Tt,H).keys().forEach(Se=>ae=ae.add(Se)),N.set(H.userId,ae)}),ot.forEach(N,(H,q)=>{const ae=new ve(q),Se=dh.ue(this.Tt,ae),et=_.getIndexManager(ae),Tt=Bp.ue(ae,this.Tt,et,_.referenceDelegate);return new Au(f,Tt,Se,et).recalculateAndSaveOverlaysForDocumentKeys(new cd(r,go.at),H).next()})})}}function Im(a){a.createObjectStore("targetDocuments",{keyPath:_y}).createIndex("documentTargetsIndex",cm,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",um,{unique:!0}),a.createObjectStore("targetGlobal")}const Cm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Oa{constructor(e,r,c,f,_,w,N,H,q,ae,Se=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=c,this.Ys=_,this.window=w,this.document=N,this.Zs=q,this.Xs=ae,this.ti=Se,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=et=>Promise.resolve(),!Oa.C())throw new Ot(it.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _h(this,f),this.oi=r+"main",this.Tt=new vy(H),this.ui=new Ao(this.oi,this.ti,new M0(this.Tt)),this.Ns=new fd(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Oy(this.Tt),this.$s=new mm,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ae&&Cn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ot(it.FAILED_PRECONDITION,Cm);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new go(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var r=this;return this.ri=function(){var c=(0,Ie.Z)(function*(f){if(r.started)return e(f)});return function(f){return c.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var r=(0,Ie.Z)(function*(c){null===c.newVersion&&(yield e())});return function(c){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,Ie.Z)(function*(){r.started&&(yield r.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(r=>{r||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(r=>this.isPrimary&&!r?this.mi(e).next(()=>!1):!!r&&this.gi(e).next(()=>!0))).catch(e=>{if(Oo(e))return Dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return yh(e).get("owner").next(r=>ot.resolve(this.yi(r)))}pi(e){return gd(e).delete(this.clientId)}Ii(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",c=>{const f=so(c,"clientMetadata");return f.W().next(_=>{const w=e.Ei(_,18e5),N=_.filter(H=>-1===w.indexOf(H));return ot.forEach(N,H=>f.delete(H.clientId)).next(()=>N)})}).catch(()=>[]);if(e.ci)for(const c of r)e.ci.removeItem(e.Ai(c.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ot.resolve(!0):yh(e).get("owner").next(r=>{if(null!==r&&this.Ti(r.leaseTimestampMs,5e3)&&!this.Ri(r.ownerId)){if(this.yi(r)&&this.networkEnabled)return!0;if(!this.yi(r)){if(!r.allowTabSynchronization)throw new Ot(it.FAILED_PRECONDITION,Cm);return!1}}return!(!this.networkEnabled||!this.inForeground)||gd(e).W().next(c=>void 0===this.Ei(c,5e3).find(f=>!(this.clientId===f.clientId||!(!this.networkEnabled&&f.networkEnabled||!this.inForeground&&f.inForeground&&this.networkEnabled===f.networkEnabled))))}).next(r=>(this.isPrimary!==r&&Dt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const c=new cd(r,go.at);return e.mi(c).next(()=>e.pi(c))}),e.ui.close(),e.Vi()})()}Ei(e,r){return e.filter(c=>this.Ti(c.updateTimeMs,r)&&!this.Ri(c.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>gd(e).W().next(r=>this.Ei(r,18e5).map(c=>c.clientId)))}get started(){return this.xs}getMutationQueue(e,r){return Bp.ue(e,this.Tt,r,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S0(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return dh.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,r,c){Dt("IndexedDbPersistence","Starting transaction:",e);const f="readonly"===r?"readonly":"readwrite",_=15===(w=this.ti)?Jb:14===w?yy:13===w?fm:12===w?E0:11===w?hm:void jt();var w;let N;return this.ui.runTransaction(e,f,_,H=>(N=new cd(H,this.Cs?this.Cs.next():go.at),"readwrite-primary"===r?this._i(N).next(q=>!!q||this.wi(N)).next(q=>{if(!q)throw Cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ot(it.FAILED_PRECONDITION,Ku);return c(N)}).next(q=>this.gi(N).next(()=>q)):this.Di(N).next(()=>c(N)))).then(H=>(N.raiseOnCommittedEvent(),H))}Di(e){return yh(e).get("owner").next(r=>{if(null!==r&&this.Ti(r.leaseTimestampMs,5e3)&&!this.Ri(r.ownerId)&&!this.yi(r)&&!(this.Xs||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ot(it.FAILED_PRECONDITION,Cm)})}gi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yh(e).put("owner",r)}static C(){return Ao.C()}mi(e){const r=yh(e);return r.get("owner").next(c=>this.yi(c)?(Dt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ot.resolve())}Ti(e,r){const c=Date.now();return!(e<c-r||e>c&&(Cn(`Detected an update time that is in the future: ${e} > ${c}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const r=/(?:Version|Mobile)\/1[456]/;(0,Ye.G6)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var r;try{const c=null!==(null===(r=this.ci)||void 0===r?void 0:r.getItem(this.Ai(e)));return Dt("IndexedDbPersistence",`Client '${e}' ${c?"is":"is not"} zombied in LocalStorage`),c}catch(c){return Cn("IndexedDbPersistence","Failed to get zombied client id.",c),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Cn("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yh(a){return so(a,"owner")}function gd(a){return so(a,"clientMetadata")}function yf(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class oc{constructor(e,r,c,f){this.targetId=e,this.fromCache=r,this.Ci=c,this.xi=f}static Ni(e,r){let c=ur(),f=ur();for(const _ of r.docChanges)switch(_.type){case 0:c=c.add(_.doc.key);break;case 1:f=f.add(_.doc.key)}return new oc(e,r.fromCache,c,f)}}class Tm{constructor(){this.ki=!1}initialize(e,r){this.$i=e,this.indexManager=r,this.ki=!0}getDocumentsMatchingQuery(e,r,c,f){return this.Mi(e,r).next(_=>_||this.Oi(e,r,f,c)).next(_=>_||this.Fi(e,r))}Mi(e,r){if(yo(r))return ot.resolve(null);let c=ro(r);return this.indexManager.getIndexType(e,c).next(f=>0===f?null:(null!==r.limit&&1===f&&(r=Jd(r,null,"F"),c=ro(r)),this.indexManager.getDocumentsMatchingTarget(e,c).next(_=>{const w=ur(..._);return this.$i.getDocuments(e,w).next(N=>this.indexManager.getMinOffset(e,c).next(H=>{const q=this.Bi(r,N);return this.Li(r,q,w,H.readTime)?this.Mi(e,Jd(r,null,"F")):this.qi(e,q,r,H)}))})))}Oi(e,r,c,f){return yo(r)||f.isEqual(yn.min())?this.Fi(e,r):this.$i.getDocuments(e,c).next(_=>{const w=this.Bi(r,_);return this.Li(r,w,c,f)?this.Fi(e,r):(fn()<=rt.in.DEBUG&&Dt("QueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),v(r)),this.qi(e,w,r,Ni(f,-1)))})}Bi(e,r){let c=new pi(ee(e));return r.forEach((f,_)=>{E(e,_)&&(c=c.add(_))}),c}Li(e,r,c,f){if(null===e.limit)return!1;if(c.size!==r.size)return!0;const _="F"===e.limitType?r.last():r.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(f)>0)}Fi(e,r){return fn()<=rt.in.DEBUG&&Dt("QueryEngine","Using full collection scan to execute query:",v(r)),this.$i.getDocumentsMatchingQuery(e,r,xi.min())}qi(e,r,c,f){return this.$i.getDocumentsMatchingQuery(e,c,f).next(_=>(r.forEach(w=>{_=_.insert(w.key,w)}),_))}}class Hp{constructor(e,r,c,f){this.persistence=e,this.Ui=r,this.Tt=f,this.Ki=new ss(Fn),this.Gi=new Nc(_=>Kl(_),Sc),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(c)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Au(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ki))}}function $p(a,e,r,c){return new Hp(a,e,r,c)}function Py(a,e){return ky.apply(this,arguments)}function ky(){return ky=(0,Ie.Z)(function*(a,e){const r=zt(a);return yield r.persistence.runTransaction("Handle user change","readonly",c=>{let f;return r.mutationQueue.getAllMutationBatches(c).next(_=>(f=_,r.zi(e),r.mutationQueue.getAllMutationBatches(c))).next(_=>{const w=[],N=[];let H=ur();for(const q of f){w.push(q.batchId);for(const ae of q.mutations)H=H.add(ae.key)}for(const q of _){N.push(q.batchId);for(const ae of q.mutations)H=H.add(ae.key)}return r.localDocuments.getDocuments(c,H).next(q=>({Wi:q,removedBatchIds:w,addedBatchIds:N}))})})}),ky.apply(this,arguments)}function Sm(a){const e=zt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ns.getLastRemoteSnapshotVersion(r))}function Am(a,e,r){let c=ur(),f=ur();return r.forEach(_=>c=c.add(_)),e.getEntries(a,c).next(_=>{let w=$a();return r.forEach((N,H)=>{const q=_.get(N);H.isFoundDocument()!==q.isFoundDocument()&&(f=f.add(N)),H.isNoDocument()&&H.version.isEqual(yn.min())?(e.removeEntry(N,H.readTime),w=w.insert(N,H)):!q.isValidDocument()||H.version.compareTo(q.version)>0||0===H.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(H),w=w.insert(N,H)):Dt("LocalStore","Ignoring outdated watch update for ",N,". Current version:",q.version," Watch version:",H.version)}),{Hi:w,Ji:f}})}function x0(a,e){const r=zt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",c=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(c,e)))}function vh(a,e){const r=zt(a);return r.persistence.runTransaction("Allocate target","readwrite",c=>{let f;return r.Ns.getTargetData(c,e).next(_=>_?(f=_,ot.resolve(f)):r.Ns.allocateTargetId(c).next(w=>(f=new Rc(e,w,0,c.currentSequenceNumber),r.Ns.addTargetData(c,f).next(()=>f))))}).then(c=>{const f=r.Ki.get(c.targetId);return(null===f||c.snapshotVersion.compareTo(f.snapshotVersion)>0)&&(r.Ki=r.Ki.insert(c.targetId,c),r.Gi.set(e,c.targetId)),c})}function ts(a,e,r){return bh.apply(this,arguments)}function bh(){return bh=(0,Ie.Z)(function*(a,e,r){const c=zt(a),f=c.Ki.get(e),_=r?"readwrite":"readwrite-primary";try{r||(yield c.persistence.runTransaction("Release target",_,w=>c.persistence.referenceDelegate.removeTarget(w,f)))}catch(w){if(!Oo(w))throw w;Dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}c.Ki=c.Ki.remove(e),c.Gi.delete(f.target)}),bh.apply(this,arguments)}function vf(a,e,r){const c=zt(a);let f=yn.min(),_=ur();return c.persistence.runTransaction("Execute query","readonly",w=>function(N,H,q){const ae=zt(N),Se=ae.Gi.get(q);return void 0!==Se?ot.resolve(ae.Ki.get(Se)):ae.Ns.getTargetData(H,q)}(c,w,ro(e)).next(N=>{if(N)return f=N.lastLimboFreeSnapshotVersion,c.Ns.getMatchingKeysForTargetId(w,N.targetId).next(H=>{_=H})}).next(()=>c.Ui.getDocumentsMatchingQuery(w,e,r?f:yn.min(),r?_:ur())).next(N=>(Om(c,M(e),N),{documents:N,Yi:_})))}function lc(a,e){const r=zt(a),c=zt(r.Ns),f=r.Ki.get(e);return f?Promise.resolve(f.target):r.persistence.runTransaction("Get target data","readonly",_=>c.ie(_,e).next(w=>w?w.target:null))}function Fy(a,e){const r=zt(a),c=r.Qi.get(e)||yn.min();return r.persistence.runTransaction("Get new document changes","readonly",f=>r.ji.getAllFromCollectionGroup(f,e,Ni(c,-1),Number.MAX_SAFE_INTEGER)).then(f=>(Om(r,e,f),f))}function Om(a,e,r){let c=a.Qi.get(e)||yn.min();r.forEach((f,_)=>{_.readTime.compareTo(c)>0&&(c=_.readTime)}),a.Qi.set(e,c)}function Nm(){return Nm=(0,Ie.Z)(function*(a,e,r,c){const f=zt(a);let _=ur(),w=$a();for(const q of r){const ae=e.Zi(q.metadata.name);q.document&&(_=_.add(ae));const Se=e.Xi(q);Se.setReadTime(e.tr(q.metadata.readTime)),w=w.insert(ae,Se)}const N=f.ji.newChangeBuffer({trackRemovals:!0}),H=yield vh(f,(q=c,ro(yu(lr.fromString(`__bundle__/docs/${q}`)))));var q;return f.persistence.runTransaction("Apply bundle documents","readwrite",q=>Am(q,N,w).next(ae=>(N.apply(q),ae)).next(ae=>f.Ns.removeMatchingKeysForTargetId(q,H.targetId).next(()=>f.Ns.addMatchingKeys(q,_,H.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(q,ae.Hi,ae.Ji)).next(()=>ae.Hi)))}),Nm.apply(this,arguments)}function Mm(a,e){return zp.apply(this,arguments)}function zp(){return zp=(0,Ie.Z)(function*(a,e,r=ur()){const c=yield vh(a,ro(gm(e.bundledQuery))),f=zt(a);return f.persistence.runTransaction("Save named query","readwrite",_=>{const w=As(e.readTime);if(c.snapshotVersion.compareTo(w)>=0)return f.$s.saveNamedQuery(_,e);const N=c.withResumeToken(D.EMPTY_BYTE_STRING,w);return f.Ki=f.Ki.insert(N.targetId,N),f.Ns.updateTargetData(_,N).next(()=>f.Ns.removeMatchingKeysForTargetId(_,c.targetId)).next(()=>f.Ns.addMatchingKeys(_,r,c.targetId)).next(()=>f.$s.saveNamedQuery(_,e))})}),zp.apply(this,arguments)}function Rm(a,e){return`firestore_clients_${a}_${e}`}function xm(a,e,r){let c=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(c+=`_${e.uid}`),c}function Pm(a,e){return`firestore_targets_${a}_${e}`}class Ka{constructor(e,r,c,f){this.user=e,this.batchId=r,this.state=c,this.error=f}static er(e,r,c){const f=JSON.parse(c);let _,w="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return w&&f.error&&(w="string"==typeof f.error.message&&"string"==typeof f.error.code,w&&(_=new Ot(f.error.code,f.error.message))),w?new Ka(e,r,f.state,_):(Cn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${c}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Na{constructor(e,r,c){this.targetId=e,this.state=r,this.error=c}static er(e,r){const c=JSON.parse(r);let f,_="object"==typeof c&&-1!==["not-current","current","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return _&&c.error&&(_="string"==typeof c.error.message&&"string"==typeof c.error.code,_&&(f=new Ot(c.error.code,c.error.message))),_?new Na(e,c.state,f):(Cn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uc{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static er(e,r){const c=JSON.parse(r);let f="object"==typeof c&&c.activeTargetIds instanceof Array,_=im();for(let w=0;f&&w<c.activeTargetIds.length;++w)f=gu(c.activeTargetIds[w]),_=_.add(c.activeTargetIds[w]);return f?new uc(e,_):(Cn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Uy{constructor(e,r){this.clientId=e,this.onlineState=r}static er(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Uy(r.clientId,r.onlineState):(Cn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bf{constructor(){this.activeTargetIds=im()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uc{constructor(e,r,c,f,_){this.window=e,this.Ys=r,this.persistenceKey=c,this.rr=f,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ss(Fn),this.started=!1,this.hr=[];const w=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.lr=Rm(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new bf),this._r=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const r=yield e.syncEngine.Si();for(const f of r){if(f===e.rr)continue;const _=e.getItem(Rm(e.persistenceKey,f));if(_){const w=uc.er(f,_);w&&(e.ar=e.ar.insert(w.clientId,w))}}e.pr();const c=e.storage.getItem(e.gr);if(c){const f=e.Ir(c);f&&e.Tr(f)}for(const f of e.hr)e.cr(f);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let r=!1;return this.ar.forEach((c,f)=>{f.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,r,c){this.Ar(e,r,c),this.Rr(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(Pm(this.persistenceKey,e));if(c){const f=Na.er(e,c);f&&(r=f.state)}}return this.Pr.sr(e),this.pr(),r}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pm(this.persistenceKey,e))}updateQueryState(e,r,c){this.vr(e,r,c)}handleUserChange(e,r,c){r.forEach(f=>{this.Rr(f)}),this.currentUser=e,c.forEach(f=>{this.addPendingMutation(f)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Dt("SharedClientState","READ",e,r),r}setItem(e,r){Dt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var r=this;const c=e;if(c.storageArea===this.storage){if(Dt("SharedClientState","EVENT",c.key,c.newValue),c.key===this.lr)return void Cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,Ie.Z)(function*(){if(r.started){if(null!==c.key)if(r._r.test(c.key)){if(null==c.newValue){const f=r.Sr(c.key);return r.Dr(f,null)}{const f=r.Cr(c.key,c.newValue);if(f)return r.Dr(f.clientId,f)}}else if(r.wr.test(c.key)){if(null!==c.newValue){const f=r.Nr(c.key,c.newValue);if(f)return r.kr(f)}}else if(r.mr.test(c.key)){if(null!==c.newValue){const f=r.$r(c.key,c.newValue);if(f)return r.Mr(f)}}else if(c.key===r.gr){if(null!==c.newValue){const f=r.Ir(c.newValue);if(f)return r.Tr(f)}}else if(c.key===r.dr){const f=function(_){let w=go.at;if(null!=_)try{const N=JSON.parse(_);Zt("number"==typeof N),w=N}catch(N){Cn("SharedClientState","Failed to read sequence number from WebStorage",N)}return w}(c.newValue);f!==go.at&&r.sequenceNumberHandler(f)}else if(c.key===r.yr){const f=r.Or(c.newValue);yield Promise.all(f.map(_=>r.syncEngine.Fr(_)))}}else r.hr.push(c)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,r,c){const f=new Ka(this.currentUser,e,r,c),_=xm(this.persistenceKey,this.currentUser,e);this.setItem(_,f.nr())}Rr(e){const r=xm(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,r,c){const f=Pm(this.persistenceKey,e),_=new Na(e,r,c);this.setItem(f,_.nr())}Vr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.yr,r)}Sr(e){const r=this._r.exec(e);return r?r[1]:null}Cr(e,r){const c=this.Sr(e);return uc.er(c,r)}Nr(e,r){const c=this.wr.exec(e),f=Number(c[1]);return Ka.er(new ve(void 0!==c[2]?c[2]:null),f,r)}$r(e,r){const c=this.mr.exec(e),f=Number(c[1]);return Na.er(f,r)}Ir(e){return Uy.er(e)}Or(e){return JSON.parse(e)}kr(e){var r=this;return(0,Ie.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Br(e.batchId,e.state,e.error);Dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,r){const c=r?this.ar.insert(e,r):this.ar.remove(e),f=this.Er(this.ar),_=this.Er(c),w=[],N=[];return _.forEach(H=>{f.has(H)||w.push(H)}),f.forEach(H=>{_.has(H)||N.push(H)}),this.syncEngine.qr(w,N).then(()=>{this.ar=c})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let r=im();return e.forEach((c,f)=>{r=r.unionWith(f.activeTargetIds)}),r}}class Ef{constructor(){this.Ur=new bf,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,c){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,r,c){this.Kr[e]=r}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new bf,Promise.resolve()}handleUserChange(e,r,c){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class md{Gr(e){}shutdown(){}}class km{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let wf=null;function Wp(){return null===wf?wf=268435456+Math.round(2147483648*Math.random()):wf++,"0x"+wf.toString(16)}const P0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k0{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const vo="WebChannelConnection";class _d extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,r,c,f,_){const w=Wp(),N=this.fo(e,r);Dt("RestConnection",`Sending RPC '${e}' ${w}:`,N,c);const H={};return this._o(H,f,_),this.wo(e,N,H,c).then(q=>(Dt("RestConnection",`Received RPC '${e}' ${w}: `,q),q),q=>{throw zn("RestConnection",`RPC '${e}' ${w} failed with error: `,q,"url: ",N,"request:",c),q})}mo(e,r,c,f,_,w){return this.lo(e,r,c,f,_)}_o(e,r,c){e["X-Goog-Api-Client"]="gl-js/ fire/"+Je,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((f,_)=>e[_]=f),c&&c.headers.forEach((f,_)=>e[_]=f)}fo(e,r){return`${this.co}/v1/${r}:${P0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,r,c,f){const _=Wp();return new Promise((w,N)=>{const H=new B;H.setWithCredentials(!0),H.listenOnce(jl.COMPLETE,()=>{try{switch(H.getLastErrorCode()){case El.NO_ERROR:const ae=H.getResponseJson();Dt(vo,`XHR for RPC '${e}' ${_} received:`,JSON.stringify(ae)),w(ae);break;case El.TIMEOUT:Dt(vo,`RPC '${e}' ${_} timed out`),N(new Ot(it.DEADLINE_EXCEEDED,"Request time out"));break;case El.HTTP_ERROR:const Se=H.getStatus();if(Dt(vo,`RPC '${e}' ${_} failed with status:`,Se,"response text:",H.getResponseText()),Se>0){let et=H.getResponseJson();Array.isArray(et)&&(et=et[0]);const Tt=et?.error;if(Tt&&Tt.status&&Tt.message){const Vt=function(ln){const wn=ln.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(wn)>=0?wn:it.UNKNOWN}(Tt.status);N(new Ot(Vt,Tt.message))}else N(new Ot(it.UNKNOWN,"Server responded with status "+H.getStatus()))}else N(new Ot(it.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{Dt(vo,`RPC '${e}' ${_} completed.`)}});const q=JSON.stringify(f);Dt(vo,`RPC '${e}' ${_} sending request:`,f),H.send(r,"POST",q,c,15)})}yo(e,r,c){const f=Wp(),_=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=zu(),N=Dc(),H={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(H.xmlHttpFactory=new k({})),this._o(H.initMessageHeaders,r,c),H.encodeInitMessageHeaders=!0;const q=_.join("");Dt(vo,`Creating RPC '${e}' stream ${f}: ${q}`,H);const ae=w.createWebChannel(q,H);let Se=!1,et=!1;const Tt=new k0({Yr:ln=>{et?Dt(vo,`Not sending because RPC '${e}' stream ${f} is closed:`,ln):(Se||(Dt(vo,`Opening RPC '${e}' stream ${f} transport.`),ae.open(),Se=!0),Dt(vo,`RPC '${e}' stream ${f} sending:`,ln),ae.send(ln))},Zr:()=>ae.close()}),Vt=(ln,wn,Ii)=>{ln.listen(wn,Ms=>{try{Ii(Ms)}catch(dr){setTimeout(()=>{throw dr},0)}})};return Vt(ae,K.EventType.OPEN,()=>{et||Dt(vo,`RPC '${e}' stream ${f} transport opened.`)}),Vt(ae,K.EventType.CLOSE,()=>{et||(et=!0,Dt(vo,`RPC '${e}' stream ${f} transport closed`),Tt.oo())}),Vt(ae,K.EventType.ERROR,ln=>{et||(et=!0,zn(vo,`RPC '${e}' stream ${f} transport errored:`,ln),Tt.oo(new Ot(it.UNAVAILABLE,"The operation could not be completed")))}),Vt(ae,K.EventType.MESSAGE,ln=>{var wn;if(!et){const Ii=ln.data[0];Zt(!!Ii);const dr=Ii.error||(null===(wn=Ii[0])||void 0===wn?void 0:wn.error);if(dr){Dt(vo,`RPC '${e}' stream ${f} received error:`,dr);const Rs=dr.status;let Wr=function(bo){const bc=Ri[bo];if(void 0!==bc)return oy(bc)}(Rs),Qr=dr.message;void 0===Wr&&(Wr=it.INTERNAL,Qr="Unknown error status: "+Rs+" with message "+dr.message),et=!0,Tt.oo(new Ot(Wr,Qr)),ae.close()}else Dt(vo,`RPC '${e}' stream ${f} received:`,Ii),Tt.uo(Ii)}}),Vt(N,il.STAT_EVENT,ln=>{ln.stat===sa.PROXY?Dt(vo,`RPC '${e}' stream ${f} detected buffering proxy`):ln.stat===sa.NOPROXY&&Dt(vo,`RPC '${e}' stream ${f} detected no buffering proxy`)}),setTimeout(()=>{Tt.ro()},0),Tt}}function Df(){return typeof window<"u"?window:null}function Jl(){return typeof document<"u"?document:null}function cc(a){return new cy(a,!0)}class Eh{constructor(e,r,c=1e3,f=1.5,_=6e4){this.Ys=e,this.timerId=r,this.po=c,this.Io=f,this.To=_,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const r=Math.floor(this.Eo+this.bo()),c=Math.max(0,Date.now()-this.Ro),f=Math.max(0,r-c);f>0&&Dt("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.Eo} ms, delay with jitter: ${r} ms, last attempt: ${c} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,f,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class Fm{constructor(e,r,c,f,_,w,N,H){this.Ys=e,this.So=c,this.Do=f,this.connection=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=N,this.listener=H,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Eh(e,r)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,Ie.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,r){var c=this;return(0,Ie.Z)(function*(){c.Uo(),c.Ko(),c.ko.cancel(),c.Co++,4!==e?c.ko.reset():r&&r.code===it.RESOURCE_EXHAUSTED?(Cn(r.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),c.ko.Po()):r&&r.code===it.UNAUTHENTICATED&&3!==c.state&&(c.authCredentialsProvider.invalidateToken(),c.appCheckCredentialsProvider.invalidateToken()),null!==c.stream&&(c.Go(),c.stream.close(),c.stream=null),c.state=e,yield c.listener.no(r)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),r=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([c,f])=>{this.Co===r&&this.jo(c,f)},c=>{e(()=>{const f=new Ot(it.UNKNOWN,"Fetching auth token failed: "+c.message);return this.zo(f)})})}jo(e,r){const c=this.Qo(this.Co);this.stream=this.Wo(e,r),this.stream.Xr(()=>{c(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(f=>{c(()=>this.zo(f))}),this.stream.onMessage(f=>{c(()=>this.onMessage(f))})}Oo(){var e=this;this.state=5,this.ko.vo((0,Ie.Z)(function*(){e.state=0,e.start()}))}zo(e){return Dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return r=>{this.Ys.enqueueAndForget(()=>this.Co===e?r():(Dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kp extends Fm{constructor(e,r,c,f,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,c,f,w),this.Tt=_}Wo(e,r){return this.connection.yo("Listen",e,r)}onMessage(e){this.ko.reset();const r=function d0(a,e){let r;if("targetChange"in e){const c="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:jt(),f=e.targetChange.targetIds||[],_=function(H,q){return H.yt?(Zt(void 0===q||"string"==typeof q),D.fromBase64String(q||"")):(Zt(void 0===q||q instanceof Uint8Array),D.fromUint8Array(q||new Uint8Array))}(a,e.targetChange.resumeToken),w=e.targetChange.cause,N=w&&function(H){const q=void 0===H.code?it.UNKNOWN:oy(H.code);return new Ot(q,H.message||"")}(w);r=new uf(c,f,_,N||null)}else if("documentChange"in e){const c=e.documentChange,f=Iu(a,c.document.name),_=As(c.document.updateTime),w=c.document.createTime?As(c.document.createTime):yn.min(),N=new Ss({mapValue:{fields:c.document.fields}}),H=$r.newFoundDocument(f,_,w,N);r=new ih(c.targetIds||[],c.removedTargetIds||[],H.key,H)}else if("documentDelete"in e){const c=e.documentDelete,f=Iu(a,c.document),_=c.readTime?As(c.readTime):yn.min(),w=$r.newNoDocument(f,_);r=new ih([],c.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const c=e.documentRemove,f=Iu(a,c.document);r=new ih([],c.removedTargetIds||[],f,null)}else{if(!("filter"in e))return jt();{const c=e.filter,_=new nm(c.count||0);r=new sh(c.targetId,_)}}var H;return r}(this.Tt,e),c=function(f){if(!("targetChange"in f))return yn.min();const _=f.targetChange;return _.targetIds&&_.targetIds.length?yn.min():_.readTime?As(_.readTime):yn.min()}(e);return this.listener.Ho(r,c)}Jo(e){const r={};r.database=ah(this.Tt),r.addTarget=function(f,_){let w;const N=_.target;return w=_u(N)?{documents:Ip(f,N)}:{query:gy(f,N)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=vp(f,_.resumeToken):_.snapshotVersion.compareTo(yn.min())>0&&(w.readTime=Du(f,_.snapshotVersion.toTimestamp())),w}(this.Tt,e);const c=function h0(a,e){const r=function(c,f){switch(f){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jt()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);c&&(r.labels=c),this.qo(r)}Yo(e){const r={};r.database=ah(this.Tt),r.removeTarget=e,this.qo(r)}}class Lm extends Fm{constructor(e,r,c,f,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,c,f,w),this.Tt=_,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,r){return this.connection.yo("Write",e,r)}onMessage(e){if(Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const r=function py(a,e){return a&&a.length>0?(Zt(void 0!==e),a.map(r=>function(c,f){let _=As(c.updateTime?c.updateTime:f);return _.isEqual(yn.min())&&(_=As(f)),new gp(_,c.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),c=As(e.commitTime);return this.listener.eu(c,r)}return Zt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=ah(this.Tt),this.qo(e)}tu(e){const r={streamToken:this.lastStreamToken,writes:e.map(c=>Dp(this.Tt,c))};this.qo(r)}}class Um extends class{}{constructor(e,r,c,f){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=c,this.Tt=f,this.iu=!1}ru(){if(this.iu)throw new Ot(it.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,r,c){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.lo(e,r,c,f,_)).catch(f=>{throw"FirebaseError"===f.name?(f.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ot(it.UNKNOWN,f.toString())})}mo(e,r,c,f){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,w])=>this.connection.mo(e,r,c,_,w,f)).catch(_=>{throw"FirebaseError"===_.name?(_.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new Ot(it.UNKNOWN,_.toString())})}terminate(){this.iu=!0}}class F0{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Cn(r),this.cu=!1):Dt("OnlineStateTracker",r)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class wh{constructor(e,r,c,f,_){var w=this;this.localStore=e,this.datastore=r,this.asyncQueue=c,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=_,this.yu.Gr(N=>{c.enqueueAndForget((0,Ie.Z)(function*(){var H;Ql(w)&&(Dt("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,Ie.Z)(function*(q){const ae=zt(q);ae.mu.add(4),yield bd(ae),ae.pu.set("Unknown"),ae.mu.delete(4),yield vd(ae)}),function(q){return H.apply(this,arguments)})(w))}))}),this.pu=new F0(c,f)}}function vd(a){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,Ie.Z)(function*(a){if(Ql(a))for(const e of a.gu)yield e(!0)}),Bm.apply(this,arguments)}function bd(a){return qa.apply(this,arguments)}function qa(){return qa=(0,Ie.Z)(function*(a){for(const e of a.gu)yield e(!1)}),qa.apply(this,arguments)}function qp(a,e){const r=zt(a);r.wu.has(e.targetId)||(r.wu.set(e.targetId,e),Bc(r)?Yp(r):Vc(r).Mo()&&Ma(r,e))}function If(a,e){const r=zt(a),c=Vc(r);r.wu.delete(e),c.Mo()&&Vm(r,e),0===r.wu.size&&(c.Mo()?c.Bo():Ql(r)&&r.pu.set("Unknown"))}function Ma(a,e){a.Iu.Ot(e.targetId),Vc(a).Jo(e)}function Vm(a,e){a.Iu.Ot(e),Vc(a).Yo(e)}function Yp(a){a.Iu=new c0({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>a.wu.get(e)||null}),Vc(a).start(),a.pu.au()}function Bc(a){return Ql(a)&&!Vc(a).$o()&&a.wu.size>0}function Ql(a){return 0===zt(a).mu.size}function Gm(a){a.Iu=void 0}function By(a){return jm.apply(this,arguments)}function jm(){return jm=(0,Ie.Z)(function*(a){a.wu.forEach((e,r)=>{Ma(a,e)})}),jm.apply(this,arguments)}function L0(a,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,Ie.Z)(function*(a,e){Gm(a),Bc(a)?(a.pu.fu(e),Yp(a)):a.pu.set("Unknown")}),Zp.apply(this,arguments)}function Vy(a,e,r){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,Ie.Z)(function*(a,e,r){if(a.pu.set("Online"),e instanceof uf&&2===e.state&&e.cause)try{yield(c=(0,Ie.Z)(function*(f,_){const w=_.cause;for(const N of _.targetIds)f.wu.has(N)&&(yield f.remoteSyncer.rejectListen(N,w),f.wu.delete(N),f.Iu.removeTarget(N))}),function(f,_){return c.apply(this,arguments)})(a,e)}catch(c){Dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),c),yield Ed(a,c)}else if(e instanceof ih?a.Iu.Qt(e):e instanceof sh?a.Iu.Zt(e):a.Iu.Wt(e),!r.isEqual(yn.min()))try{const c=yield Sm(a.localStore);r.compareTo(c)>=0&&(yield function(f,_){const w=f.Iu.ee(_);return w.targetChanges.forEach((N,H)=>{if(N.resumeToken.approximateByteSize()>0){const q=f.wu.get(H);q&&f.wu.set(H,q.withResumeToken(N.resumeToken,_))}}),w.targetMismatches.forEach(N=>{const H=f.wu.get(N);if(!H)return;f.wu.set(N,H.withResumeToken(D.EMPTY_BYTE_STRING,H.snapshotVersion)),Vm(f,N);const q=new Rc(H.target,N,1,H.sequenceNumber);Ma(f,q)}),f.remoteSyncer.applyRemoteEvent(w)}(a,r))}catch(c){Dt("RemoteStore","Failed to raise snapshot:",c),yield Ed(a,c)}var c}),Cf.apply(this,arguments)}function Ed(a,e,r){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,Ie.Z)(function*(a,e,r){if(!Oo(e))throw e;a.mu.add(1),yield bd(a),a.pu.set("Offline"),r||(r=()=>Sm(a.localStore)),a.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Dt("RemoteStore","Retrying IndexedDB access"),yield r(),a.mu.delete(1),yield vd(a)}))}),Hm.apply(this,arguments)}function Gy(a,e){return e().catch(r=>Ed(a,r,e))}function Dh(a){return $m.apply(this,arguments)}function $m(){return $m=(0,Ie.Z)(function*(a){const e=zt(a),r=wd(e);let c=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;jy(e);)try{const f=yield x0(e.localStore,c);if(null===f){0===e._u.length&&r.Bo();break}c=f.batchId,Ou(e,f)}catch(f){yield Ed(e,f)}Jp(e)&&zm(e)}),$m.apply(this,arguments)}function jy(a){return Ql(a)&&a._u.length<10}function Ou(a,e){a._u.push(e);const r=wd(a);r.Mo()&&r.Xo&&r.tu(e.mutations)}function Jp(a){return Ql(a)&&!wd(a).$o()&&a._u.length>0}function zm(a){wd(a).start()}function U0(a){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,Ie.Z)(function*(a){wd(a).su()}),Tf.apply(this,arguments)}function B0(a){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,Ie.Z)(function*(a){const e=wd(a);for(const r of a._u)e.tu(r.mutations)}),Sf.apply(this,arguments)}function Hy(a,e,r){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,Ie.Z)(function*(a,e,r){const c=a._u.shift(),f=Op.from(c,e,r);yield Gy(a,()=>a.remoteSyncer.applySuccessfulWrite(f)),yield Dh(a)}),Ih.apply(this,arguments)}function $y(a,e){return zy.apply(this,arguments)}function zy(){return zy=(0,Ie.Z)(function*(a,e){var r;e&&wd(a).Xo&&(yield(r=(0,Ie.Z)(function*(c,f){if(sy(_=f.code)&&_!==it.ABORTED){const w=c._u.shift();wd(c).Fo(),yield Gy(c,()=>c.remoteSyncer.rejectFailedWrite(w.batchId,f)),yield Dh(c)}var _}),function(c,f){return r.apply(this,arguments)})(a,e)),Jp(a)&&zm(a)}),zy.apply(this,arguments)}function Qp(a,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,Ie.Z)(function*(a,e){const r=zt(a);r.asyncQueue.verifyOperationInProgress(),Dt("RemoteStore","RemoteStore received new credentials");const c=Ql(r);r.mu.add(3),yield bd(r),c&&r.pu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.mu.delete(3),yield vd(r)}),Xp.apply(this,arguments)}function Ch(a,e){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,Ie.Z)(function*(a,e){const r=zt(a);e?(r.mu.delete(2),yield vd(r)):e||(r.mu.add(2),yield bd(r),r.pu.set("Unknown"))}),Wy.apply(this,arguments)}function Vc(a){return a.Tu||(a.Tu=function(e,r,c){const f=zt(e);return f.ru(),new Kp(r,f.connection,f.authCredentials,f.appCheckCredentials,f.Tt,c)}(a.datastore,a.asyncQueue,{Xr:By.bind(null,a),no:L0.bind(null,a),Ho:Vy.bind(null,a)}),a.gu.push(function(){var e=(0,Ie.Z)(function*(r){r?(a.Tu.Fo(),Bc(a)?Yp(a):a.pu.set("Unknown")):(yield a.Tu.stop(),Gm(a))});return function(r){return e.apply(this,arguments)}}())),a.Tu}function wd(a){return a.Eu||(a.Eu=function(e,r,c){const f=zt(e);return f.ru(),new Lm(r,f.connection,f.authCredentials,f.appCheckCredentials,f.Tt,c)}(a.datastore,a.asyncQueue,{Xr:U0.bind(null,a),no:$y.bind(null,a),nu:B0.bind(null,a),eu:Hy.bind(null,a)}),a.gu.push(function(){var e=(0,Ie.Z)(function*(r){r?(a.Eu.Fo(),yield Dh(a)):(yield a.Eu.stop(),a._u.length>0&&(Dt("RemoteStore",`Stopping write stream with ${a._u.length} pending writes`),a._u=[]))});return function(r){return e.apply(this,arguments)}}())),a.Eu}class eg{constructor(e,r,c,f,_){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=c,this.op=f,this.removalCallback=_,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,r,c,f,_){const w=Date.now()+c,N=new eg(e,r,w,f,_);return N.start(c),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ot(it.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dd(a,e){if(Cn("AsyncQueue",`${e}: ${a}`),Oo(a))return new Ot(it.UNAVAILABLE,`${e}: ${a}`);throw a}class Id{constructor(e){this.comparator=e?(r,c)=>e(r,c)||tn.comparator(r.key,c.key):(r,c)=>tn.comparator(r.key,c.key),this.keyedMap=ld(),this.sortedSet=new ss(this.comparator)}static emptySet(e){return new Id(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,c)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Id)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),c=e.sortedSet.getIterator();for(;r.hasNext();){const f=r.getNext().key,_=c.getNext().key;if(!f.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const c=new Id;return c.comparator=this.comparator,c.keyedMap=e,c.sortedSet=r,c}}class tg{constructor(){this.Au=new ss(tn.comparator)}track(e){const r=e.doc.key,c=this.Au.get(r);c?0!==e.type&&3===c.type?this.Au=this.Au.insert(r,e):3===e.type&&1!==c.type?this.Au=this.Au.insert(r,{type:c.type,doc:e.doc}):2===e.type&&2===c.type?this.Au=this.Au.insert(r,{type:2,doc:e.doc}):2===e.type&&0===c.type?this.Au=this.Au.insert(r,{type:0,doc:e.doc}):1===e.type&&0===c.type?this.Au=this.Au.remove(r):1===e.type&&2===c.type?this.Au=this.Au.insert(r,{type:1,doc:c.doc}):0===e.type&&1===c.type?this.Au=this.Au.insert(r,{type:2,doc:e.doc}):jt():this.Au=this.Au.insert(r,e)}Ru(){const e=[];return this.Au.inorderTraversal((r,c)=>{e.push(c)}),e}}class Gc{constructor(e,r,c,f,_,w,N,H,q){this.query=e,this.docs=r,this.oldDocs=c,this.docChanges=f,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=N,this.excludesMetadataChanges=H,this.hasCachedResults=q}static fromInitialDocuments(e,r,c,f,_){const w=[];return r.forEach(N=>{w.push({type:0,doc:N})}),new Gc(e,r,Id.emptySet(r),w,c,f,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,c=e.docChanges;if(r.length!==c.length)return!1;for(let f=0;f<r.length;f++)if(r[f].type!==c[f].type||!r[f].doc.isEqual(c[f].doc))return!1;return!0}}class jc{constructor(){this.Pu=void 0,this.listeners=[]}}class Af{constructor(){this.queries=new Nc(e=>A(e),sf),this.onlineState="Unknown",this.vu=new Set}}function Of(a,e){return Th.apply(this,arguments)}function Th(){return Th=(0,Ie.Z)(function*(a,e){const r=zt(a),c=e.query;let f=!1,_=r.queries.get(c);if(_||(f=!0,_=new jc),f)try{_.Pu=yield r.onListen(c)}catch(w){const N=Dd(w,`Initialization of query '${v(e.query)}' failed`);return void e.onError(N)}r.queries.set(c,_),_.listeners.push(e),e.bu(r.onlineState),_.Pu&&e.Vu(_.Pu)&&rg(r)}),Th.apply(this,arguments)}function Wm(a,e){return ng.apply(this,arguments)}function ng(){return ng=(0,Ie.Z)(function*(a,e){const r=zt(a),c=e.query;let f=!1;const _=r.queries.get(c);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),f=0===_.listeners.length)}if(f)return r.queries.delete(c),r.onUnlisten(c)}),ng.apply(this,arguments)}function Nf(a,e){const r=zt(a);let c=!1;for(const f of e){const w=r.queries.get(f.query);if(w){for(const N of w.listeners)N.Vu(f)&&(c=!0);w.Pu=f}}c&&rg(r)}function Ky(a,e,r){const c=zt(a),f=c.queries.get(e);if(f)for(const _ of f.listeners)_.onError(r);c.queries.delete(e)}function rg(a){a.vu.forEach(e=>{e.next()})}class Ra{constructor(e,r,c){this.query=e,this.Su=r,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=c||{}}Vu(e){if(!this.options.includeMetadataChanges){const c=[];for(const f of e.docChanges)3!==f.type&&c.push(f);e=new Gc(e.query,e.docs,e.oldDocs,c,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Du?this.xu(e)&&(this.Su.next(e),r=!0):this.Nu(e,this.onlineState)&&(this.ku(e),r=!0),this.Cu=e,r}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let r=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),r=!0),r}Nu(e,r){return!e.fromCache||(!this.options.$u||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class qy{constructor(e,r){this.Mu=e,this.byteLength=r}Ou(){return"metadata"in this.Mu}}class Yy{constructor(e){this.Tt=e}Zi(e){return Iu(this.Tt,e)}Xi(e){return e.metadata.exists?wp(this.Tt,e.document,!1):$r.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return As(e)}}class V0{constructor(e,r,c){this.Fu=e,this.localStore=r,this.Tt=c,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zy(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++r;const c=lr.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(c.get(c.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}Lu(e){const r=new Map,c=new Yy(this.Tt);for(const f of e)if(f.metadata.queries){const _=c.Zi(f.metadata.name);for(const w of f.metadata.queries){const N=(r.get(w)||ur()).add(_);r.set(w,N)}}return r}complete(){var e=this;return(0,Ie.Z)(function*(){const r=yield function Ly(a,e,r,c){return Nm.apply(this,arguments)}(e.localStore,new Yy(e.Tt),e.documents,e.Fu.id),c=e.Lu(e.documents);for(const f of e.queries)yield Mm(e.localStore,f,c.get(f.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:r}})()}}function Zy(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Jy{constructor(e){this.key=e}}class Qy{constructor(e){this.key=e}}class Xy{constructor(e,r){this.query=e,this.Ku=r,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=ur(),this.mutatedKeys=ur(),this.ju=ee(e),this.zu=new Id(this.ju)}get Wu(){return this.Ku}Hu(e,r){const c=r?r.Ju:new tg,f=r?r.zu:this.zu;let _=r?r.mutatedKeys:this.mutatedKeys,w=f,N=!1;const H="F"===this.query.limitType&&f.size===this.query.limit?f.last():null,q="L"===this.query.limitType&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal((ae,Se)=>{const et=f.get(ae),Tt=E(this.query,Se)?Se:null,Vt=!!et&&this.mutatedKeys.has(et.key),ln=!!Tt&&(Tt.hasLocalMutations||this.mutatedKeys.has(Tt.key)&&Tt.hasCommittedMutations);let wn=!1;et&&Tt?et.data.isEqual(Tt.data)?Vt!==ln&&(c.track({type:3,doc:Tt}),wn=!0):this.Yu(et,Tt)||(c.track({type:2,doc:Tt}),wn=!0,(H&&this.ju(Tt,H)>0||q&&this.ju(Tt,q)<0)&&(N=!0)):!et&&Tt?(c.track({type:0,doc:Tt}),wn=!0):et&&!Tt&&(c.track({type:1,doc:et}),wn=!0,(H||q)&&(N=!0)),wn&&(Tt?(w=w.add(Tt),_=ln?_.add(ae):_.delete(ae)):(w=w.delete(ae),_=_.delete(ae)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ae="F"===this.query.limitType?w.last():w.first();w=w.delete(ae.key),_=_.delete(ae.key),c.track({type:1,doc:ae})}return{zu:w,Ju:c,Li:N,mutatedKeys:_}}Yu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,c){const f=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const _=e.Ju.Ru();_.sort((q,ae)=>function(Se,et){const Tt=Vt=>{switch(Vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return Tt(Se)-Tt(et)}(q.type,ae.type)||this.ju(q.doc,ae.doc)),this.Zu(c);const w=r?this.Xu():[],N=0===this.Qu.size&&this.current?1:0,H=N!==this.Gu;return this.Gu=N,0!==_.length||H?{snapshot:new Gc(this.query,e.zu,f,_,e.mutatedKeys,0===N,H,!1,!!c&&c.resumeToken.approximateByteSize()>0),tc:w}:{tc:w}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new tg,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(r=>this.Ku=this.Ku.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ku=this.Ku.delete(r)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=ur(),this.zu.forEach(c=>{this.ec(c.key)&&(this.Qu=this.Qu.add(c.key))});const r=[];return e.forEach(c=>{this.Qu.has(c)||r.push(new Qy(c))}),this.Qu.forEach(c=>{e.has(c)||r.push(new Jy(c))}),r}nc(e){this.Ku=e.Yi,this.Qu=ur();const r=this.Hu(e.documents);return this.applyChanges(r,!0)}sc(){return Gc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class ev{constructor(e,r,c){this.query=e,this.targetId=r,this.view=c}}class G0{constructor(e){this.key=e,this.ic=!1}}class Km{constructor(e,r,c,f,_,w){this.localStore=e,this.remoteStore=r,this.eventManager=c,this.sharedClientState=f,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.rc={},this.oc=new Nc(N=>A(N),sf),this.uc=new Map,this.cc=new Set,this.ac=new ss(tn.comparator),this.hc=new Map,this.lc=new jp,this.fc={},this.dc=new Map,this._c=hd.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Sh(a,e){return qm.apply(this,arguments)}function qm(){return qm=(0,Ie.Z)(function*(a,e){const r=og(a);let c,f;const _=r.oc.get(e);if(_)c=_.targetId,r.sharedClientState.addLocalQueryTarget(c),f=_.view.sc();else{const w=yield vh(r.localStore,ro(e));r.isPrimaryClient&&qp(r.remoteStore,w);const N=r.sharedClientState.addLocalQueryTarget(w.targetId);c=w.targetId,f=yield Mf(r,e,c,"current"===N,w.resumeToken)}return f}),qm.apply(this,arguments)}function Mf(a,e,r,c,f){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ie.Z)(function*(a,e,r,c,f){a.mc=(Se,et,Tt)=>{return(Vt=(0,Ie.Z)(function*(ln,wn,Ii,Ms){let dr=wn.view.Hu(Ii);dr.Li&&(dr=yield vf(ln.localStore,wn.query,!1).then(({documents:Qr})=>wn.view.Hu(Qr,dr)));const Rs=Ms&&Ms.targetChanges.get(wn.targetId),Wr=wn.view.applyChanges(dr,ln.isPrimaryClient,Rs);return ao(ln,wn.targetId,Wr.tc),Wr.snapshot}),function(ln,wn,Ii,Ms){return Vt.apply(this,arguments)})(a,Se,et,Tt);var Vt};const _=yield vf(a.localStore,e,!0),w=new Xy(e,_.Yi),N=w.Hu(_.documents),H=rh.createSynthesizedTargetChangeForCurrentChange(r,c&&"Offline"!==a.onlineState,f),q=w.applyChanges(N,a.isPrimaryClient,H);ao(a,r,q.tc);const ae=new ev(e,r,w);return a.oc.set(e,ae),a.uc.has(r)?a.uc.get(r).push(e):a.uc.set(r,[e]),q.snapshot}),Ym.apply(this,arguments)}function j0(a,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Ie.Z)(function*(a,e){const r=zt(a),c=r.oc.get(e),f=r.uc.get(c.targetId);if(f.length>1)return r.uc.set(c.targetId,f.filter(_=>!sf(_,e))),void r.oc.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(c.targetId),r.sharedClientState.isActiveQueryTarget(c.targetId)||(yield ts(r.localStore,c.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(c.targetId),If(r.remoteStore,c.targetId),da(r,c.targetId)}).catch(Wo))):(da(r,c.targetId),yield ts(r.localStore,c.targetId,!0))}),Zm.apply(this,arguments)}function Jm(){return Jm=(0,Ie.Z)(function*(a,e,r){const c=ag(a);try{const f=yield function(_,w){const N=zt(_),H=sr.now(),q=w.reduce((et,Tt)=>et.add(Tt.key),ur());let ae,Se;return N.persistence.runTransaction("Locally write mutations","readwrite",et=>{let Tt=$a(),Vt=ur();return N.ji.getEntries(et,q).next(ln=>{Tt=ln,Tt.forEach((wn,Ii)=>{Ii.isValidDocument()||(Vt=Vt.add(wn))})}).next(()=>N.localDocuments.getOverlayedDocuments(et,Tt)).next(ln=>{ae=ln;const wn=[];for(const Ii of w){const Ms=tm(Ii,ae.get(Ii.key).overlayedDocument);null!=Ms&&wn.push(new bu(Ii.key,Ms,Xh(Ms.value.mapValue),Hi.exists(!0)))}return N.mutationQueue.addMutationBatch(et,H,wn,w)}).next(ln=>{Se=ln;const wn=ln.applyToLocalDocumentSet(ae,Vt);return N.documentOverlayCache.saveOverlays(et,ln.batchId,wn)})}).then(()=>({batchId:Se.batchId,changes:ly(ae)}))}(c.localStore,e);c.sharedClientState.addPendingMutation(f.batchId),function(_,w,N){let H=_.fc[_.currentUser.toKey()];H||(H=new ss(Fn)),H=H.insert(w,N),_.fc[_.currentUser.toKey()]=H}(c,f.batchId,r),yield js(c,f.changes),yield Dh(c.remoteStore)}catch(f){const _=Dd(f,"Failed to persist write");r.reject(_)}}),Jm.apply(this,arguments)}function tv(a,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Ie.Z)(function*(a,e){const r=zt(a);try{const c=yield function R0(a,e){const r=zt(a),c=e.snapshotVersion;let f=r.Ki;return r.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=r.ji.newChangeBuffer({trackRemovals:!0});f=r.Ki;const N=[];e.targetChanges.forEach((ae,Se)=>{const et=f.get(Se);if(!et)return;N.push(r.Ns.removeMatchingKeys(_,ae.removedDocuments,Se).next(()=>r.Ns.addMatchingKeys(_,ae.addedDocuments,Se)));let Tt=et.withSequenceNumber(_.currentSequenceNumber);var Vt,ln,wn;e.targetMismatches.has(Se)?Tt=Tt.withResumeToken(D.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):ae.resumeToken.approximateByteSize()>0&&(Tt=Tt.withResumeToken(ae.resumeToken,c)),f=f.insert(Se,Tt),ln=Tt,wn=ae,(0===(Vt=et).resumeToken.approximateByteSize()||ln.snapshotVersion.toMicroseconds()-Vt.snapshotVersion.toMicroseconds()>=3e8||wn.addedDocuments.size+wn.modifiedDocuments.size+wn.removedDocuments.size>0)&&N.push(r.Ns.updateTargetData(_,Tt))});let H=$a(),q=ur();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&N.push(r.persistence.referenceDelegate.updateLimboDocument(_,ae))}),N.push(Am(_,w,e.documentUpdates).next(ae=>{H=ae.Hi,q=ae.Ji})),!c.isEqual(yn.min())){const ae=r.Ns.getLastRemoteSnapshotVersion(_).next(Se=>r.Ns.setTargetsMetadata(_,_.currentSequenceNumber,c));N.push(ae)}return ot.waitFor(N).next(()=>w.apply(_)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,H,q)).next(()=>H)}).then(_=>(r.Ki=f,_))}(r.localStore,e);e.targetChanges.forEach((f,_)=>{const w=r.hc.get(_);w&&(Zt(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?w.ic=!0:f.modifiedDocuments.size>0?Zt(w.ic):f.removedDocuments.size>0&&(Zt(w.ic),w.ic=!1))}),yield js(r,c,e)}catch(c){yield Wo(c)}}),Qm.apply(this,arguments)}function Xm(a,e,r){const c=zt(a);if(c.isPrimaryClient&&0===r||!c.isPrimaryClient&&1===r){const f=[];c.oc.forEach((_,w)=>{const N=w.view.bu(e);N.snapshot&&f.push(N.snapshot)}),function(_,w){const N=zt(_);N.onlineState=w;let H=!1;N.queries.forEach((q,ae)=>{for(const Se of ae.listeners)Se.bu(w)&&(H=!0)}),H&&rg(N)}(c.eventManager,e),f.length&&c.rc.Ho(f),c.onlineState=e,c.isPrimaryClient&&c.sharedClientState.setOnlineState(e)}}function e_(a,e,r){return t_.apply(this,arguments)}function t_(){return t_=(0,Ie.Z)(function*(a,e,r){const c=zt(a);c.sharedClientState.updateQueryState(e,"rejected",r);const f=c.hc.get(e),_=f&&f.key;if(_){let w=new ss(tn.comparator);w=w.insert(_,$r.newNoDocument(_,yn.min()));const N=ur().add(_),H=new nh(yn.min(),new Map,new pi(Fn),w,N);yield tv(c,H),c.ac=c.ac.remove(_),c.hc.delete(e),Td(c)}else yield ts(c.localStore,e,!1).then(()=>da(c,e,r)).catch(Wo)}),t_.apply(this,arguments)}function _w(a,e){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,Ie.Z)(function*(a,e){const r=zt(a),c=e.batch.batchId;try{const f=yield function ac(a,e){const r=zt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",c=>{const f=e.batch.keys(),_=r.ji.newChangeBuffer({trackRemovals:!0});return function(w,N,H,q){const ae=H.batch,Se=ae.keys();let et=ot.resolve();return Se.forEach(Tt=>{et=et.next(()=>q.getEntry(N,Tt)).next(Vt=>{const ln=H.docVersions.get(Tt);Zt(null!==ln),Vt.version.compareTo(ln)<0&&(ae.applyToRemoteDocument(Vt,H),Vt.isValidDocument()&&(Vt.setReadTime(H.commitVersion),q.addEntry(Vt)))})}),et.next(()=>w.mutationQueue.removeMutationBatch(N,ae))}(r,c,e,_).next(()=>_.apply(c)).next(()=>r.mutationQueue.performConsistencyCheck(c)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(c,f,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,function(w){let N=ur();for(let H=0;H<w.mutationResults.length;++H)w.mutationResults[H].transformResults.length>0&&(N=N.add(w.batch.mutations[H].key));return N}(e))).next(()=>r.localDocuments.getDocuments(c,f))})}(r.localStore,e);r_(r,c,null),Rf(r,c),r.sharedClientState.updateMutationState(c,"acknowledged"),yield js(r,f)}catch(f){yield Wo(f)}}),Ah.apply(this,arguments)}function H0(a,e,r){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,Ie.Z)(function*(a,e,r){const c=zt(a);try{const f=yield function(_,w){const N=zt(_);return N.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let q;return N.mutationQueue.lookupMutationBatch(H,w).next(ae=>(Zt(null!==ae),q=ae.keys(),N.mutationQueue.removeMutationBatch(H,ae))).next(()=>N.mutationQueue.performConsistencyCheck(H)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(H,q,w)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,q)).next(()=>N.localDocuments.getDocuments(H,q))})}(c.localStore,e);r_(c,e,r),Rf(c,e),c.sharedClientState.updateMutationState(e,"rejected",r),yield js(c,f)}catch(f){yield Wo(f)}}),Cd.apply(this,arguments)}function ig(){return ig=(0,Ie.Z)(function*(a,e){const r=zt(a);Ql(r.remoteStore)||Dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const c=yield function(_){const w=zt(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>w.mutationQueue.getHighestUnacknowledgedBatchId(N))}(r.localStore);if(-1===c)return void e.resolve();const f=r.dc.get(c)||[];f.push(e),r.dc.set(c,f)}catch(c){const f=Dd(c,"Initialization of waitForPendingWrites() operation failed");e.reject(f)}}),ig.apply(this,arguments)}function Rf(a,e){(a.dc.get(e)||[]).forEach(r=>{r.resolve()}),a.dc.delete(e)}function r_(a,e,r){const c=zt(a);let f=c.fc[c.currentUser.toKey()];if(f){const _=f.get(e);_&&(r?_.reject(r):_.resolve(),f=f.remove(e)),c.fc[c.currentUser.toKey()]=f}}function da(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const c of a.uc.get(e))a.oc.delete(c),r&&a.rc.gc(c,r);a.uc.delete(e),a.isPrimaryClient&&a.lc.ds(e).forEach(c=>{a.lc.containsKey(c)||Al(a,c)})}function Al(a,e){a.cc.delete(e.path.canonicalString());const r=a.ac.get(e);null!==r&&(If(a.remoteStore,r),a.ac=a.ac.remove(e),a.hc.delete(r),Td(a))}function ao(a,e,r){for(const c of r)c instanceof Jy?(a.lc.addReference(c.key,e),Ol(a,c)):c instanceof Qy?(Dt("SyncEngine","Document no longer in limbo: "+c.key),a.lc.removeReference(c.key,e),a.lc.containsKey(c.key)||Al(a,c.key)):jt()}function Ol(a,e){const r=e.key,c=r.path.canonicalString();a.ac.get(r)||a.cc.has(c)||(Dt("SyncEngine","New document in limbo: "+r),a.cc.add(c),Td(a))}function Td(a){for(;a.cc.size>0&&a.ac.size<a.maxConcurrentLimboResolutions;){const e=a.cc.values().next().value;a.cc.delete(e);const r=new tn(lr.fromString(e)),c=a._c.next();a.hc.set(c,new G0(r)),a.ac=a.ac.insert(r,c),qp(a.remoteStore,new Rc(ro(yu(r.path)),c,2,go.at))}}function js(a,e,r){return dc.apply(this,arguments)}function dc(){return dc=(0,Ie.Z)(function*(a,e,r){const c=zt(a),f=[],_=[],w=[];var N;c.oc.isEmpty()||(c.oc.forEach((N,H)=>{w.push(c.mc(H,e,r).then(q=>{if((q||r)&&c.isPrimaryClient&&c.sharedClientState.updateQueryState(H.targetId,q?.fromCache?"not-current":"current"),q){f.push(q);const ae=oc.Ni(H.targetId,q);_.push(ae)}}))}),yield Promise.all(w),c.rc.Ho(f),yield(N=(0,Ie.Z)(function*(H,q){const ae=zt(H);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",Se=>ot.forEach(q,et=>ot.forEach(et.Ci,Tt=>ae.persistence.referenceDelegate.addReference(Se,et.targetId,Tt)).next(()=>ot.forEach(et.xi,Tt=>ae.persistence.referenceDelegate.removeReference(Se,et.targetId,Tt)))))}catch(Se){if(!Oo(Se))throw Se;Dt("LocalStore","Failed to update sequence numbers: "+Se)}for(const Se of q){const et=Se.targetId;if(!Se.fromCache){const Tt=ae.Ki.get(et),ln=Tt.withLastLimboFreeSnapshotVersion(Tt.snapshotVersion);ae.Ki=ae.Ki.insert(et,ln)}}}),function(H,q){return N.apply(this,arguments)})(c.localStore,_))}),dc.apply(this,arguments)}function Nl(a,e){return hc.apply(this,arguments)}function hc(){return hc=(0,Ie.Z)(function*(a,e){const r=zt(a);if(!r.currentUser.isEqual(e)){Dt("SyncEngine","User change. New user:",e.toKey());const c=yield Py(r.localStore,e);r.currentUser=e,(f=r).dc.forEach(w=>{w.forEach(N=>{N.reject(new Ot(it.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.dc.clear(),r.sharedClientState.handleUserChange(e,c.removedBatchIds,c.addedBatchIds),yield js(r,c.Wi)}var f}),hc.apply(this,arguments)}function Sd(a,e){const r=zt(a),c=r.hc.get(e);if(c&&c.ic)return ur().add(c.key);{let f=ur();const _=r.uc.get(e);if(!_)return f;for(const w of _){const N=r.oc.get(w);f=f.unionWith(N.view.Wu)}return f}}function bs(a,e){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,Ie.Z)(function*(a,e){const r=zt(a),c=yield vf(r.localStore,e.query,!0),f=e.view.nc(c);return r.isPrimaryClient&&ao(r,e.targetId,f.tc),f}),Ml.apply(this,arguments)}function Hc(a,e){return qo.apply(this,arguments)}function qo(){return qo=(0,Ie.Z)(function*(a,e){const r=zt(a);return Fy(r.localStore,e).then(c=>js(r,c))}),qo.apply(this,arguments)}function Hs(a,e,r,c){return $c.apply(this,arguments)}function $c(){return $c=(0,Ie.Z)(function*(a,e,r,c){const f=zt(a),_=yield function(w,N){const H=zt(w),q=zt(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",ae=>q.An(ae,N).next(Se=>Se?H.localDocuments.getDocuments(ae,Se):ot.resolve(null)))}(f.localStore,e);var N;null!==_?("pending"===r?yield Dh(f.remoteStore):"acknowledged"===r||"rejected"===r?(r_(f,e,c||null),Rf(f,e),N=e,zt(zt(f.localStore).mutationQueue).Pn(N)):jt(),yield js(f,_)):Dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),$c.apply(this,arguments)}function sg(){return sg=(0,Ie.Z)(function*(a,e){const r=zt(a);if(og(r),ag(r),!0===e&&!0!==r.wc){const c=r.sharedClientState.getAllActiveQueryTargets(),f=yield Nu(r,c.toArray());r.wc=!0,yield Ch(r.remoteStore,!0);for(const _ of f)qp(r.remoteStore,_)}else if(!1===e&&!1!==r.wc){const c=[];let f=Promise.resolve();r.uc.forEach((_,w)=>{r.sharedClientState.isLocalQueryTarget(w)?c.push(w):f=f.then(()=>(da(r,w),ts(r.localStore,w,!0))),If(r.remoteStore,w)}),yield f,yield Nu(r,c),function(_){const w=zt(_);w.hc.forEach((N,H)=>{If(w.remoteStore,H)}),w.lc._s(),w.hc=new Map,w.ac=new ss(tn.comparator)}(r),r.wc=!1,yield Ch(r.remoteStore,!1)}}),sg.apply(this,arguments)}function Nu(a,e,r){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,Ie.Z)(function*(a,e,r){const c=zt(a),f=[],_=[];for(const w of e){let N;const H=c.uc.get(w);if(H&&0!==H.length){N=yield vh(c.localStore,ro(H[0]));for(const q of H){const ae=c.oc.get(q),Se=yield bs(c,ae);Se.snapshot&&_.push(Se.snapshot)}}else{const q=yield lc(c.localStore,w);N=yield vh(c.localStore,q),yield Mf(c,fc(q),w,!1,N.resumeToken)}f.push(N)}return c.rc.Ho(_),f}),Rl.apply(this,arguments)}function fc(a){return rf(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function nv(a){const e=zt(a);return zt(zt(e.localStore).persistence).Si()}function Oh(a,e,r,c){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,Ie.Z)(function*(a,e,r,c){const f=zt(a);if(f.wc)return void Dt("SyncEngine","Ignoring unexpected query state notification.");const _=f.uc.get(e);if(_&&_.length>0)switch(r){case"current":case"not-current":{const w=yield Fy(f.localStore,M(_[0])),N=nh.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,D.EMPTY_BYTE_STRING);yield js(f,w,N);break}case"rejected":yield ts(f.localStore,e,!0),da(f,e,c);break;default:jt()}}),Nh.apply(this,arguments)}function i_(a,e,r){return lo.apply(this,arguments)}function lo(){return lo=(0,Ie.Z)(function*(a,e,r){const c=og(a);if(c.wc){for(const f of e){if(c.uc.has(f)){Dt("SyncEngine","Adding an already active target "+f);continue}const _=yield lc(c.localStore,f),w=yield vh(c.localStore,_);yield Mf(c,fc(_),w.targetId,!1,w.resumeToken),qp(c.remoteStore,w)}for(const f of r)c.uc.has(f)&&(yield ts(c.localStore,f,!1).then(()=>{If(c.remoteStore,f),da(c,f)}).catch(Wo))}}),lo.apply(this,arguments)}function og(a){const e=zt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=tv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e_.bind(null,e),e.rc.Ho=Nf.bind(null,e.eventManager),e.rc.gc=Ky.bind(null,e.eventManager),e}function ag(a){const e=zt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_w.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H0.bind(null,e),e}class s_{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,Ie.Z)(function*(){r.Tt=cc(e.databaseInfo.databaseId),r.sharedClientState=r.Ic(e),r.persistence=r.Tc(e),yield r.persistence.start(),r.localStore=r.Ec(e),r.gcScheduler=r.Ac(e,r.localStore),r.indexBackfillerScheduler=r.Rc(e,r.localStore)})()}Ac(e,r){return null}Rc(e,r){return null}Ec(e){return $p(this.persistence,new Tm,e.initialUser,this.Tt)}Tc(e){return new xy(_f.qs,this.Tt)}Ic(e){return new Ef}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lg extends s_{constructor(e,r,c){super(),this.Pc=e,this.cacheSizeBytes=r,this.forceOwnership=c,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,c=this;return(0,Ie.Z)(function*(){yield r().call(c,e),yield c.Pc.initialize(c,e),yield ag(c.Pc.syncEngine),yield Dh(c.Pc.remoteStore),yield c.persistence.di(()=>(c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(),c.indexBackfillerScheduler&&!c.indexBackfillerScheduler.started&&c.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return $p(this.persistence,new Tm,e.initialUser,this.Tt)}Ac(e,r){return new bm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Rc(e,r){const c=new Il(r,this.persistence);return new Va(e.asyncQueue,c)}Tc(e){const r=yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),c=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new Oa(this.synchronizeTabs,r,e.clientId,c,e.asyncQueue,Df(),Jl(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Ef}}class o_ extends lg{constructor(e,r){super(e,r,!1),this.Pc=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,c=this;return(0,Ie.Z)(function*(){yield r().call(c,e);const f=c.Pc.syncEngine;c.sharedClientState instanceof Uc&&(c.sharedClientState.syncEngine={Br:Hs.bind(null,f),Lr:Oh.bind(null,f),qr:i_.bind(null,f),Si:nv.bind(null,f),Fr:Hc.bind(null,f)},yield c.sharedClientState.start()),yield c.persistence.di(function(){var _=(0,Ie.Z)(function*(w){yield function xf(a,e){return sg.apply(this,arguments)}(c.Pc.syncEngine,w),c.gcScheduler&&(w&&!c.gcScheduler.started?c.gcScheduler.start():w||c.gcScheduler.stop()),c.indexBackfillerScheduler&&(w&&!c.indexBackfillerScheduler.started?c.indexBackfillerScheduler.start():w||c.indexBackfillerScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}Ic(e){const r=Df();if(!Uc.C(r))throw new Ot(it.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const c=yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uc(r,e.asyncQueue,c,e.clientId,e.initialUser)}}class a_{initialize(e,r){var c=this;return(0,Ie.Z)(function*(){c.localStore||(c.localStore=e.localStore,c.sharedClientState=e.sharedClientState,c.datastore=c.createDatastore(r),c.remoteStore=c.createRemoteStore(r),c.eventManager=c.createEventManager(r),c.syncEngine=c.createSyncEngine(r,!e.synchronizeTabs),c.sharedClientState.onlineStateHandler=f=>Xm(c.syncEngine,f,1),c.remoteStore.remoteSyncer.handleCredentialChange=Nl.bind(null,c.syncEngine),yield Ch(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Af}createDatastore(e){const r=cc(e.databaseInfo.databaseId),c=new _d(e.databaseInfo);return new Um(e.authCredentials,e.appCheckCredentials,c,r)}createRemoteStore(e){return r=this.localStore,c=this.datastore,f=e.asyncQueue,_=N=>Xm(this.syncEngine,N,0),w=km.C()?new km:new md,new wh(r,c,f,_,w);var r,c,f,_,w}createSyncEngine(e,r){return function(c,f,_,w,N,H,q){const ae=new Km(c,f,_,w,N,H);return q&&(ae.wc=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,Ie.Z)(function*(r){const c=zt(r);Dt("RemoteStore","RemoteStore shutting down."),c.mu.add(5),yield bd(c),c.yu.shutdown(),c.pu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mh(a,e=10240){let r=0;return{read:()=>(0,Ie.Z)(function*(){if(r<a.byteLength){const c={value:a.slice(r,r+e),done:!1};return r+=e,c}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class xl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class l_{constructor(e,r){this.Vc=e,this.Tt=r,this.metadata=new si,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(c=>{c&&c.Ou()?this.metadata.resolve(c.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(c?.Mu)}`))},c=>this.metadata.reject(c))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,Ie.Z)(function*(){const r=yield e.Cc();if(null===r)return null;const c=e.Sc.decode(r),f=Number(c);isNaN(f)&&e.xc(`length string (${c}) is not valid number`);const _=yield e.Nc(f);return new qy(JSON.parse(_),r.length+f)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,Ie.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const r=e.kc();r<0&&e.xc("Reached the end of bundle when a length string is expected.");const c=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),c})()}Nc(e){var r=this;return(0,Ie.Z)(function*(){for(;r.buffer.length<e;)(yield r.$c())&&r.xc("Reached the end of bundle when more is expected.");const c=r.Sc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),c})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,Ie.Z)(function*(){const r=yield e.Vc.read();if(!r.done){const c=new Uint8Array(e.buffer.length+r.value.length);c.set(e.buffer),c.set(r.value,e.buffer.length),e.buffer=c}return r.done})()}}class Pf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ie.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Ot(it.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const c=yield(f=(0,Ie.Z)(function*(_,w){const N=zt(_),H=ah(N.Tt)+"/documents",q={documents:w.map(Tt=>df(N.Tt,Tt))},ae=yield N.mo("BatchGetDocuments",H,q,w.length),Se=new Map;ae.forEach(Tt=>{const Vt=function hy(a,e){return"found"in e?function(r,c){Zt(!!c.found);const f=Iu(r,c.found.name),_=As(c.found.updateTime),w=c.found.createTime?As(c.found.createTime):yn.min(),N=new Ss({mapValue:{fields:c.found.fields}});return $r.newFoundDocument(f,_,w,N)}(a,e):"missing"in e?function(r,c){Zt(!!c.missing),Zt(!!c.readTime);const f=Iu(r,c.missing),_=As(c.readTime);return $r.newNoDocument(f,_)}(a,e):jt()}(N.Tt,Tt);Se.set(Vt.key.toString(),Vt)});const et=[];return w.forEach(Tt=>{const Vt=Se.get(Tt.toString());Zt(!!Vt),et.push(Vt)}),et}),function(_,w){return f.apply(this,arguments)})(r.datastore,e);var f;return c.forEach(f=>r.recordVersion(f)),c})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(c){this.lastWriteError=c}this.writtenDocs.add(e.toString())}delete(e){this.write(new Eu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var c;e.mutations.forEach(c=>{r.delete(c.key.toString())}),r.forEach((c,f)=>{const _=tn.fromPath(f);e.mutations.push(new mp(_,e.precondition(_)))}),yield(c=(0,Ie.Z)(function*(f,_){const w=zt(f),N=ah(w.Tt)+"/documents",H={writes:_.map(q=>Dp(w.Tt,q))};yield w.lo("Commit",N,H)}),function(f,_){return c.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw jt();r=yn.min()}const c=this.readVersions.get(e.key.toString());if(c){if(!r.isEqual(c))throw new Ot(it.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(yn.min())?Hi.exists(!1):Hi.updateTime(r):Hi.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(yn.min()))throw new Ot(it.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hi.updateTime(r)}return Hi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ug{constructor(e,r,c,f,_){this.asyncQueue=e,this.datastore=r,this.options=c,this.updateFunction=f,this.deferred=_,this.Mc=c.maxAttempts,this.ko=new Eh(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,Ie.Z)(function*(){const r=new Pf(e.datastore),c=e.Fc(r);c&&c.then(f=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(f)}).catch(_=>{e.Bc(_)}))}).catch(f=>{e.Bc(f)})}))}Fc(e){try{const r=this.updateFunction(e);return!Qi(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!sy(r)}return!1}}class cg{constructor(e,r,c,f){var _=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=c,this.databaseInfo=f,this.user=ve.UNAUTHENTICATED,this.clientId=wl.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(c,function(){var w=(0,Ie.Z)(function*(N){Dt("FirestoreClient","Received user=",N.uid),yield _.authCredentialListener(N),_.user=N});return function(N){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(c,w=>(Dt("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ot(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(c){const f=Dd(c,"Failed to shutdown persistence");r.reject(f)}})),r.promise}}function Ad(a,e){return Od.apply(this,arguments)}function Od(){return Od=(0,Ie.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),Dt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield a.getConfiguration();yield e.initialize(r);let c=r.initialUser;a.setCredentialChangeListener(function(){var f=(0,Ie.Z)(function*(_){c.isEqual(_)||(yield Py(e.localStore,_),c=_)});return function(_){return f.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=e}),Od.apply(this,arguments)}function kf(a,e){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ie.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Lf(a);Dt("FirestoreClient","Initializing OnlineComponentProvider");const c=yield a.getConfiguration();yield e.initialize(r,c),a.setCredentialChangeListener(f=>Qp(e.remoteStore,f)),a.setAppCheckTokenChangeListener((f,_)=>Qp(e.remoteStore,_)),a.onlineComponents=e}),Ff.apply(this,arguments)}function Lf(a){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,Ie.Z)(function*(a){return a.offlineComponents||(Dt("FirestoreClient","Using default OfflineComponentProvider"),yield Ad(a,new s_)),a.offlineComponents}),Rh.apply(this,arguments)}function xh(a){return dg.apply(this,arguments)}function dg(){return dg=(0,Ie.Z)(function*(a){return a.onlineComponents||(Dt("FirestoreClient","Using default OnlineComponentProvider"),yield kf(a,new a_)),a.onlineComponents}),dg.apply(this,arguments)}function hg(a){return Lf(a).then(e=>e.persistence)}function Nd(a){return Lf(a).then(e=>e.localStore)}function Uf(a){return xh(a).then(e=>e.remoteStore)}function Bf(a){return xh(a).then(e=>e.syncEngine)}function Md(a){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Ie.Z)(function*(a){const e=yield xh(a),r=e.eventManager;return r.onListen=Sh.bind(null,e.syncEngine),r.onUnlisten=j0.bind(null,e.syncEngine),r}),Vf.apply(this,arguments)}function Gf(a,e,r={}){const c=new si;return a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(f,_,w,N,H){const q=new xl({next:Se=>{_.enqueueAndForget(()=>Wm(f,ae));const et=Se.docs.has(w);!et&&Se.fromCache?H.reject(new Ot(it.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&Se.fromCache&&N&&"server"===N.source?H.reject(new Ot(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Se)},error:Se=>H.reject(Se)}),ae=new Ra(yu(w.path),q,{includeMetadataChanges:!0,$u:!0});return Of(f,ae)}(yield Md(a),a.asyncQueue,e,r,c)})),c.promise}function c_(a,e,r={}){const c=new si;return a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(f,_,w,N,H){const q=new xl({next:Se=>{_.enqueueAndForget(()=>Wm(f,ae)),Se.fromCache&&"server"===N.source?H.reject(new Ot(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Se)},error:Se=>H.reject(Se)}),ae=new Ra(w,q,{includeMetadataChanges:!0,$u:!0});return Of(f,ae)}(yield Md(a),a.asyncQueue,e,r,c)})),c.promise}const h_=new Map;function Rd(a,e,r){if(!r)throw new Ot(it.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Mu(a,e,r,c){if(!0===e&&!0===c)throw new Ot(it.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function f_(a){if(!tn.isDocumentKey(a))throw new Ot(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ov(a){if(tn.isDocumentKey(a))throw new Ot(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function kh(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(r=a).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof a?"a function":jt()}function cr(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Ot(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=kh(a);throw new Ot(it.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function gg(a,e){if(e<=0)throw new Ot(it.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class av{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ot(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ot(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Mu("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,r,c,f){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=c,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new av({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ot(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ot(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new av(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new sl;switch(r.type){case"gapi":return new zd(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ot(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=h_.get(e);r&&(Dt("ComponentProvider","Removing Datastore"),h_.delete(e),r.terminate())}(this),Promise.resolve()}}class as{constructor(e,r,c){this.converter=r,this._key=c,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new as(this.firestore,e,this._key)}}class Yo{constructor(e,r,c){this.converter=r,this._query=c,this.type="query",this.firestore=e}withConverter(e){return new Yo(this.firestore,e,this._query)}}class Ru extends Yo{constructor(e,r,c){super(e,r,yu(c)),this._path=c,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new as(this.firestore,null,new tn(e))}withConverter(e){return new Ru(this.firestore,e,this._path)}}function xu(a,e,...r){if(a=(0,Ye.m9)(a),Rd("collection","path",e),a instanceof zc){const c=lr.fromString(e,...r);return ov(c),new Ru(a,null,c)}{if(!(a instanceof as||a instanceof Ru))throw new Ot(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=a._path.child(lr.fromString(e,...r));return ov(c),new Ru(a.firestore,null,c)}}function Os(a,e,...r){if(a=(0,Ye.m9)(a),1===arguments.length&&(e=wl.R()),Rd("doc","path",e),a instanceof zc){const c=lr.fromString(e,...r);return f_(c),new as(a,null,new tn(c))}{if(!(a instanceof as||a instanceof Ru))throw new Ot(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=a._path.child(lr.fromString(e,...r));return f_(c),new as(a.firestore,a instanceof Ru?a.converter:null,new tn(c))}}function g_(a,e){return a=(0,Ye.m9)(a),e=(0,Ye.m9)(e),(a instanceof as||a instanceof Ru)&&(e instanceof as||e instanceof Ru)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function Fh(a,e){return a=(0,Ye.m9)(a),e=(0,Ye.m9)(e),a instanceof Yo&&e instanceof Yo&&a.firestore===e.firestore&&sf(a._query,e._query)&&a.converter===e.converter}class Lh{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Eh(this,"async_queue_retry"),this.Hc=()=>{const r=Jl();r&&Dt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.ko.Vo()};const e=Jl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const r=Jl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const r=new si;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(r){if(!Oo(r))throw r;Dt("AsyncQueue","Operation failed with retryable error: "+r)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const r=this.qc.then(()=>(this.jc=!0,e().catch(c=>{throw this.Qc=c,this.jc=!1,Cn("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(c)),c}).then(c=>(this.jc=!1,c))));return this.qc=r,r}enqueueAfterDelay(e,r,c){this.Jc(),this.Wc.indexOf(e)>-1&&(r=0);const f=eg.createAndSchedule(this,e,r,c,_=>this.Xc(_));return this.Gc.push(f),f}Jc(){this.Qc&&jt()}verifyOperationInProgress(){}ta(){var e=this;return(0,Ie.Z)(function*(){let r;do{r=e.qc,yield r}while(r!==e.qc)})()}ea(e){for(const r of this.Gc)if(r.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((r,c)=>r.targetTimeMs-c.targetTimeMs);for(const r of this.Gc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const r=this.Gc.indexOf(e);this.Gc.splice(r,1)}}function jf(a){return function(e,r){if("object"!=typeof e||null===e)return!1;const c=e;for(const f of["next","error","complete"])if(f in c&&"function"==typeof c[f])return!0;return!1}(a)}class z0{constructor(){this._progressObserver={},this._taskCompletionResolver=new si,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,c){this._progressObserver={next:e,error:r,complete:c}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $i extends zc{constructor(e,r,c,f){super(e,r,c,f),this.type="firestore",this._queue=new Lh,this._persistenceKey=f?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||m_(this),this._firestoreClient.terminate()}}function Ns(a){return a._firestoreClient||m_(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function m_(a){var e;const r=a._freezeSettings(),c=(_=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new fu(a._databaseId,_,a._persistenceKey,(N=r).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var _,N;a._firestoreClient=new cg(a._authCredentials,a._appCheckCredentials,a._queue,c)}function fv(a,e,r){const c=new si;return a.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield Ad(a,r),yield kf(a,e),c.resolve()}catch(f){const _=f;if(!("FirebaseError"===(w=_).name?w.code===it.FAILED_PRECONDITION||w.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw _;zn("Error enabling offline persistence. Falling back to persistence disabled: "+_),c.reject(_)}var w})).then(()=>c.promise)}function xa(a){if(a._initialized||a._terminated)throw new Ot(it.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(D.fromBase64String(e))}catch(r){throw new Ot(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Sr(D.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class br{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Ot(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ya{constructor(e){this._methodName=e}}class hi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ot(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ot(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}const Pd=/^__.*__$/;class K0{constructor(e,r,c){this.data=e,this.fieldMask=r,this.fieldTransforms=c}toMutation(e,r){return null!==this.fieldMask?new bu(e,this.data,this.fieldMask,r,this.fieldTransforms):new eh(e,this.data,r,this.fieldTransforms)}}class kd{constructor(e,r,c){this.data=e,this.fieldMask=r,this.fieldTransforms=c}toMutation(e,r){return new bu(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function y_(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class ki{constructor(e,r,c,f,_,w){this.settings=e,this.databaseId=r,this.Tt=c,this.ignoreUndefinedProperties=f,void 0===_&&this.ia(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new ki(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var r;const c=null===(r=this.path)||void 0===r?void 0:r.child(e),f=this.oa({path:c,ca:!1});return f.aa(e),f}ha(e){var r;const c=null===(r=this.path)||void 0===r?void 0:r.child(e),f=this.oa({path:c,ca:!1});return f.ia(),f}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return mr(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(y_(this.ra)&&Pd.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class Er{constructor(e,r,c){this.databaseId=e,this.ignoreUndefinedProperties=r,this.Tt=c||cc(e)}wa(e,r,c,f=!1){return new ki({ra:e,methodName:r,_a:c,path:Cr.emptyPath(),ca:!1,da:f},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function ls(a){const e=a._freezeSettings(),r=cc(a._databaseId);return new Er(a._databaseId,!!e.ignoreUndefinedProperties,r)}function yg(a,e,r,c,f,_={}){const w=a.wa(_.merge||_.mergeFields?2:0,e,r,f);E_("Data must be an object, but it was:",w,c);const N=bg(c,w);let H,q;if(_.merge)H=new Ro(w.fieldMask),q=w.fieldTransforms;else if(_.mergeFields){const ae=[];for(const Se of _.mergeFields){const et=Bh(e,Se,r);if(!w.contains(et))throw new Ot(it.INVALID_ARGUMENT,`Field '${et}' is specified in your field mask but missing from your input data.`);zf(ae,et)||ae.push(et)}H=new Ro(ae),q=w.fieldTransforms.filter(Se=>H.covers(Se.field))}else H=null,q=w.fieldTransforms;return new K0(new Ss(N),H,q)}class Wc extends Ya{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function Za(a,e,r){return new ki({ra:3,_a:e.settings._a,methodName:a._methodName,ca:r},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class $f extends Ya{_toFieldTransform(e){return new Qu(e.path,new la)}isEqual(e){return e instanceof $f}}class vg extends Ya{constructor(e,r){super(e),this.ma=r}_toFieldTransform(e){const r=Za(this,e,!0),c=this.ma.map(_=>Kc(_,r)),f=new cl(c);return new Qu(e.path,f)}isEqual(e){return this===e}}class gv extends Ya{constructor(e,r){super(e),this.ma=r}_toFieldTransform(e){const r=Za(this,e,!0),c=this.ma.map(_=>Kc(_,r)),f=new Ko(c);return new Qu(e.path,f)}isEqual(e){return this===e}}class v_ extends Ya{constructor(e,r){super(e),this.ga=r}_toFieldTransform(e){const r=new io(e.Tt,pn(e.Tt,this.ga));return new Qu(e.path,r)}isEqual(e){return this===e}}function Pu(a,e,r,c){const f=a.wa(1,e,r);E_("Data must be an object, but it was:",f,c);const _=[],w=Ss.empty();to(c,(H,q)=>{const ae=ku(e,H,r);q=(0,Ye.m9)(q);const Se=f.ha(ae);if(q instanceof Wc)_.push(ae);else{const et=Kc(q,Se);null!=et&&(_.push(ae),w.set(ae,et))}});const N=new Ro(_);return new kd(w,N,f.fieldTransforms)}function Uh(a,e,r,c,f,_){const w=a.wa(1,e,r),N=[Bh(e,c,r)],H=[f];if(_.length%2!=0)throw new Ot(it.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let et=0;et<_.length;et+=2)N.push(Bh(e,_[et])),H.push(_[et+1]);const q=[],ae=Ss.empty();for(let et=N.length-1;et>=0;--et)if(!zf(q,N[et])){const Tt=N[et];let Vt=H[et];Vt=(0,Ye.m9)(Vt);const ln=w.ha(Tt);if(Vt instanceof Wc)q.push(Tt);else{const wn=Kc(Vt,ln);null!=wn&&(q.push(Tt),ae.set(Tt,wn))}}const Se=new Ro(q);return new kd(ae,Se,w.fieldTransforms)}function Fd(a,e,r,c=!1){return Kc(r,a.wa(c?4:3,e))}function Kc(a,e){if(b_(a=(0,Ye.m9)(a)))return E_("Unsupported field value:",e,a),bg(a,e);if(a instanceof Ya)return function(r,c){if(!y_(c.ra))throw c.fa(`${r._methodName}() can only be used with update() and set()`);if(!c.path)throw c.fa(`${r._methodName}() is not currently supported inside arrays`);const f=r._toFieldTransform(c);f&&c.fieldTransforms.push(f)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(r,c){const f=[];let _=0;for(const w of r){let N=Kc(w,c.la(_));null==N&&(N={nullValue:"NULL_VALUE"}),f.push(N),_++}return{arrayValue:{values:f}}}(a,e)}return function(r,c){if(null===(r=(0,Ye.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return pn(c.Tt,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const f=sr.fromDate(r);return{timestampValue:Du(c.Tt,f)}}if(r instanceof sr){const f=new sr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Du(c.Tt,f)}}if(r instanceof hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:vp(c.Tt,r._byteString)};if(r instanceof as){const f=c.databaseId,_=r.firestore._databaseId;if(!_.isEqual(f))throw c.fa(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:bp(r.firestore._databaseId||c.databaseId,r._key.path)}}throw c.fa(`Unsupported field value: ${kh(r)}`)}(a,e)}function bg(a,e){const r={};return Ga(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(a,(c,f)=>{const _=Kc(f,e.ua(c));null!=_&&(r[c]=_)}),{mapValue:{fields:r}}}function b_(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof sr||a instanceof hi||a instanceof Sr||a instanceof as||a instanceof Ya)}function E_(a,e,r){if(!b_(r)||"object"!=typeof(c=r)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const c=kh(r);throw e.fa("an object"===c?a+" a custom object":a+" "+c)}var c}function Bh(a,e,r){if((e=(0,Ye.m9)(e))instanceof br)return e._internalPath;if("string"==typeof e)return ku(a,e);throw mr("Field path arguments must be of type string or ",a,!1,void 0,r)}const mv=new RegExp("[~\\*/\\[\\]]");function ku(a,e,r){if(e.search(mv)>=0)throw mr(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new br(...e.split("."))._internalPath}catch{throw mr(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function mr(a,e,r,c,f){const _=c&&!c.isEmpty(),w=void 0!==f;let N=`Function ${e}() called with invalid data`;r&&(N+=" (via `toFirestore()`)"),N+=". ";let H="";return(_||w)&&(H+=" (found",_&&(H+=` in field ${c}`),w&&(H+=` in document ${f}`),H+=")"),new Ot(it.INVALID_ARGUMENT,N+a+H)}function zf(a,e){return a.some(r=>r.isEqual(e))}class qc{constructor(e,r,c,f,_){this._firestore=e,this._userDataWriter=r,this._key=c,this._document=f,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new as(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(dl("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class _v extends qc{data(){return super.data()}}function dl(a,e){return"string"==typeof e?ku(a,e):e instanceof br?e._internalPath:e._delegate._internalPath}function Wf(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Ot(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hl{}class Kf extends hl{}function $s(a,e,...r){let c=[];e instanceof hl&&c.push(e),c=c.concat(r),function(f){const _=f.filter(N=>N instanceof Yc).length,w=f.filter(N=>N instanceof qf).length;if(_>1||_>0&&w>0)throw new Ot(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(c);for(const f of c)a=f._apply(a);return a}class qf extends Kf{constructor(e,r,c){super(),this._field=e,this._op=r,this._value=c,this.type="where"}static _create(e,r,c){return new qf(e,r,c)}_apply(e){const r=this._parse(e);return Pa(e._query,r),new Yo(e.firestore,e.converter,Zd(e._query,r))}_parse(e){const r=ls(e.firestore);return function(f,_,w,N,H,q,ae){let Se;if(H.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new Ot(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){Ld(ae,q);const et=[];for(const Tt of ae)et.push(Eg(N,f,Tt));Se={arrayValue:{values:et}}}else Se=Eg(N,f,ae)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||Ld(ae,q),Se=Fd(w,"where",ae,"in"===q||"not-in"===q);return er.create(H,q,Se)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class Yc extends hl{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Yc(e,r)}_parse(e){const r=this._queryConstraints.map(c=>c._parse(e)).filter(c=>c.getFilters().length>0);return 1===r.length?r[0]:Hr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(c,f){let _=c;const w=f.getFlattenedFilters();for(const N of w)Pa(_,N),_=Zd(_,N)}(e._query,r),new Yo(e.firestore,e.converter,Zd(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Yf extends Kf{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Yf(e,r)}_apply(e){const r=function(c,f,_){if(null!==c.startAt)throw new Ot(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new Ot(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new mu(f,_);return function(N,H){if(null===nd(N)){const q=Ac(N);null!==q&&Jf(0,q,H.field)}}(c,w),w}(e._query,this._field,this._direction);return new Yo(e.firestore,e.converter,function(c,f){const _=c.explicitOrderBy.concat([f]);return new Ta(c.path,c.collectionGroup,_,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,r))}}class Fu extends Kf{constructor(e,r,c){super(),this.type=e,this._limit=r,this._limitType=c}static _create(e,r,c){return new Fu(e,r,c)}_apply(e){return new Yo(e.firestore,e.converter,Jd(e._query,this._limit,this._limitType))}}class Zf extends Kf{constructor(e,r,c){super(),this.type=e,this._docOrFields=r,this._inclusive=c}static _create(e,r,c){return new Zf(e,r,c)}_apply(e){const r=tu(e,this.type,this._docOrFields,this._inclusive);return new Yo(e.firestore,e.converter,(f=r,new Ta((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,f,c.endAt)));var c,f}}class Di extends Kf{constructor(e,r,c){super(),this.type=e,this._docOrFields=r,this._inclusive=c}static _create(e,r,c){return new Di(e,r,c)}_apply(e){const r=tu(e,this.type,this._docOrFields,this._inclusive);return new Yo(e.firestore,e.converter,(f=r,new Ta((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,f)));var c,f}}function tu(a,e,r,c){if(r[0]=(0,Ye.m9)(r[0]),r[0]instanceof qc)return function(f,_,w,N,H){if(!N)throw new Ot(it.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const q=[];for(const ae of os(f))if(ae.field.isKeyField())q.push(Bs(_,N.key));else{const Se=N.data.field(ae.field);if(Be(Se))throw new Ot(it.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Se){const et=ae.field.canonicalString();throw new Ot(it.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${et}' (used as the orderBy) does not exist.`)}q.push(Se)}return new Sn(q,H)}(a._query,a.firestore._databaseId,e,r[0]._document,c);{const f=ls(a.firestore);return function(_,w,N,H,q,ae){const Se=_.explicitOrderBy;if(q.length>Se.length)throw new Ot(it.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const et=[];for(let Tt=0;Tt<q.length;Tt++){const Vt=q[Tt];if(Se[Tt].field.isKeyField()){if("string"!=typeof Vt)throw new Ot(it.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Vt}`);if(!rd(_)&&-1!==Vt.indexOf("/"))throw new Ot(it.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Vt}' contains a slash.`);const ln=_.path.child(lr.fromString(Vt));if(!tn.isDocumentKey(ln))throw new Ot(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${ln}' is not because it contains an odd number of segments.`);const wn=new tn(ln);et.push(Bs(w,wn))}else{const ln=Fd(N,H,Vt);et.push(ln)}}return new Sn(et,ae)}(a._query,a.firestore._databaseId,f,e,r,c)}}function Eg(a,e,r){if("string"==typeof(r=(0,Ye.m9)(r))){if(""===r)throw new Ot(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rd(e)&&-1!==r.indexOf("/"))throw new Ot(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const c=e.path.child(lr.fromString(r));if(!tn.isDocumentKey(c))throw new Ot(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${c}' is not because it has an odd number of segments (${c.length}).`);return Bs(a,new tn(c))}if(r instanceof as)return Bs(a,r._key);throw new Ot(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(r)}.`)}function Ld(a,e){if(!Array.isArray(a)||0===a.length)throw new Ot(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pa(a,e){if(e.isInequality()){const c=Ac(a),f=e.field;if(null!==c&&!c.isEqual(f))throw new Ot(it.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${c.toString()}' and '${f.toString()}'`);const _=nd(a);null!==_&&Jf(0,f,_)}const r=function(c,f){for(const _ of c)for(const w of _.getFlattenedFilters())if(f.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new Ot(it.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function Jf(a,e,r){if(!r.isEqual(e))throw new Ot(it.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Ev{convertValue(e,r="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return J(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(se(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw jt()}}convertObject(e,r){const c={};return to(e.fields,(f,_)=>{c[f]=this.convertValue(_,r)}),c}convertGeoPoint(e){return new hi(J(e.latitude),J(e.longitude))}convertArray(e,r){return(e.values||[]).map(c=>this.convertValue(c,r))}convertServerTimestamp(e,r){switch(r){case"previous":const c=At(e);return null==c?null:this.convertValue(c,r);case"estimate":return this.convertTimestamp(an(e));default:return null}}convertTimestamp(e){const r=$(e);return new sr(r.seconds,r.nanos)}convertDocumentKey(e,r){const c=lr.fromString(e);Zt(Kb(c));const f=new ti(c.get(1),c.get(3)),_=new tn(c.popFirst(5));return f.isEqual(r)||Cn(`Document ${_} contains a document reference within a different database (${f.projectId}/${f.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),_}}function pc(a,e,r){let c;return c=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,c}class wv extends Ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new as(this.firestore,null,r)}}class Zo{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fl extends qc{constructor(e,r,c,f,_,w){super(e,r,c,f,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const c=this._document.data.field(dl("DocumentSnapshot.get",e));if(null!==c)return this._userDataWriter.convertValue(c,r.serverTimestamps)}}}class kl extends fl{data(e={}){return super.data(e)}}class nu{constructor(e,r,c,f){this._firestore=e,this._userDataWriter=r,this._snapshot=f,this.metadata=new Zo(f.hasPendingWrites,f.fromCache),this.query=c}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(c=>{e.call(r,new kl(this._firestore,this._userDataWriter,c.key,c,new Zo(this._snapshot.mutatedKeys.has(c.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ot(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(c,f){if(c._snapshot.oldDocs.isEmpty()){let _=0;return c._snapshot.docChanges.map(w=>({type:"added",doc:new kl(c._firestore,c._userDataWriter,w.doc.key,w.doc,new Zo(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:_++}))}{let _=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(w=>f||3!==w.type).map(w=>{const N=new kl(c._firestore,c._userDataWriter,w.doc.key,w.doc,new Zo(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter);let H=-1,q=-1;return 0!==w.type&&(H=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),q=_.indexOf(w.doc.key)),{type:us(w.type),doc:N,oldIndex:H,newIndex:q}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function us(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}function Qf(a,e){return a instanceof fl&&e instanceof fl?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof nu&&e instanceof nu&&a._firestore===e._firestore&&Fh(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class Fl extends Ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new as(this.firestore,null,r)}}function Dg(a,e,r){a=cr(a,as);const c=cr(a.firestore,$i),f=pc(a.converter,e,r);return Gh(c,[yg(ls(c),"setDoc",a._key,f,null!==a.converter,r).toMutation(a._key,Hi.none())])}function Av(a,e,r,...c){a=cr(a,as);const f=cr(a.firestore,$i),_=ls(f);let w;return w="string"==typeof(e=(0,Ye.m9)(e))||e instanceof br?Uh(_,"updateDoc",a._key,e,r,c):Pu(_,"updateDoc",a._key,e),Gh(f,[w.toMutation(a._key,Hi.exists(!0))])}function S_(a,...e){var r,c,f;a=(0,Ye.m9)(a);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||jf(e[w])||(_=e[w],w++);const N={includeMetadataChanges:_.includeMetadataChanges};if(jf(e[w])){const Se=e[w];e[w]=null===(r=Se.next)||void 0===r?void 0:r.bind(Se),e[w+1]=null===(c=Se.error)||void 0===c?void 0:c.bind(Se),e[w+2]=null===(f=Se.complete)||void 0===f?void 0:f.bind(Se)}let H,q,ae;if(a instanceof as)q=cr(a.firestore,$i),ae=yu(a._key.path),H={next:Se=>{e[w]&&e[w](gc(q,a,Se))},error:e[w+1],complete:e[w+2]};else{const Se=cr(a,Yo);q=cr(Se.firestore,$i),ae=Se._query;const et=new Fl(q);H={next:Tt=>{e[w]&&e[w](new nu(q,et,Se,Tt))},error:e[w+1],complete:e[w+2]},Wf(a._query)}return function(Se,et,Tt,Vt){const ln=new xl(Vt),wn=new Ra(et,ln,Tt);return Se.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Of(yield Md(Se),wn)})),()=>{ln.bc(),Se.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Wm(yield Md(Se),wn)}))}}(Ns(q),ae,N,H)}function Gh(a,e){return function(r,c){const f=new si;return r.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function Xb(a,e,r){return Jm.apply(this,arguments)}(yield Bf(r),c,f)})),f.promise}(Ns(a),e)}function gc(a,e,r){const c=r.docs.get(e._key),f=new Fl(a);return new fl(a,f,e._key,c,new Zo(r.hasPendingWrites,r.fromCache),e.converter)}const Sg={maxAttempts:5};class Ov{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=ls(e)}set(e,r,c){this._verifyNotCommitted();const f=Ll(e,this._firestore),_=pc(f.converter,r,c),w=yg(this._dataReader,"WriteBatch.set",f._key,_,null!==f.converter,c);return this._mutations.push(w.toMutation(f._key,Hi.none())),this}update(e,r,c,...f){this._verifyNotCommitted();const _=Ll(e,this._firestore);let w;return w="string"==typeof(r=(0,Ye.m9)(r))||r instanceof br?Uh(this._dataReader,"WriteBatch.update",_._key,r,c,f):Pu(this._dataReader,"WriteBatch.update",_._key,r),this._mutations.push(w.toMutation(_._key,Hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Ll(e,this._firestore);return this._mutations=this._mutations.concat(new Eu(r._key,Hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ot(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ll(a,e){if((a=(0,Ye.m9)(a)).firestore!==e)throw new Ot(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class Hh extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=ls(e)}get(e){const r=Ll(e,this._firestore),c=new wv(this._firestore);return this._transaction.lookup([r._key]).then(f=>{if(!f||1!==f.length)return jt();const _=f[0];if(_.isFoundDocument())return new qc(this._firestore,c,_.key,_,r.converter);if(_.isNoDocument())return new qc(this._firestore,c,r._key,null,r.converter);throw jt()})}set(e,r,c){const f=Ll(e,this._firestore),_=pc(f.converter,r,c),w=yg(this._dataReader,"Transaction.set",f._key,_,null!==f.converter,c);return this._transaction.set(f._key,w),this}update(e,r,c,...f){const _=Ll(e,this._firestore);let w;return w="string"==typeof(r=(0,Ye.m9)(r))||r instanceof br?Uh(this._dataReader,"Transaction.update",_._key,r,c,f):Pu(this._dataReader,"Transaction.update",_._key,r),this._transaction.update(_._key,w),this}delete(e){const r=Ll(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Ll(e,this._firestore),c=new Fl(this._firestore);return super.get(e).then(f=>new fl(this._firestore,c,r._key,f._document,new Zo(!1,!1),r.converter))}}!function(a,e=!0){Je=Et.SDK_VERSION,(0,Et._registerComponent)(new gt.wA("firestore",(r,{instanceIdentifier:c,options:f})=>{const _=r.getProvider("app").getImmediate(),w=new $i(new al(r.getProvider("auth-internal")),new Wu(r.getProvider("app-check-internal")),function(N,H){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new Ot(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ti(N.options.projectId,H)}(_,c),_);return f=Object.assign({useFetchStreams:e},f),w._setSettings(f),w},"PUBLIC").setMultipleInstances(!0)),(0,Et.registerVersion)(re,"3.9.0",a),(0,Et.registerVersion)(re,"3.9.0","esm2017")}();function mc(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ot("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function tb(){if(typeof Uint8Array>"u")throw new Ot("unimplemented","Uint8Arrays are not available in this environment.")}function nb(){if(!function S(){return typeof atob<"u"}())throw new Ot("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Lu{constructor(e){this._delegate=e}static fromBase64String(e){return nb(),new Lu(Sr.fromBase64String(e))}static fromUint8Array(e){return tb(),new Lu(Sr.fromUint8Array(e))}toBase64(){return nb(),this._delegate.toBase64()}toUint8Array(){return tb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zh(a){return function rb(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const c of e)if(c in r&&"function"==typeof r[c])return!0;return!1}(a,["next","error","complete"])}class Mg{enableIndexedDbPersistence(e,r){return function dv(a,e){xa(a=cr(a,$i));const r=Ns(a),c=a._freezeSettings(),f=new a_;return fv(r,f,new lg(f,c.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function hv(a){xa(a=cr(a,$i));const e=Ns(a),r=a._freezeSettings(),c=new a_;return fv(e,c,new o_(c,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mg(a){if(a._initialized&&!a._terminated)throw new Ot(it.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new si;return a._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(r=(0,Ie.Z)(function*(c){if(!Ao.C())return Promise.resolve();const f=c+"main";yield Ao.delete(f)}),function(c){return r.apply(this,arguments)})(yf(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Bd{constructor(e,r,c){this._delegate=r,this._persistenceProvider=c,this.INTERNAL={delete:()=>this.terminate()},e instanceof ti||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&zn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,c={}){!function lv(a,e,r,c={}){var f;const _=(a=cr(a,zc))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&zn("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${r}`,ssl:!1})),c.mockUserToken){let w,N;if("string"==typeof c.mockUserToken)w=c.mockUserToken,N=ve.MOCK_USER;else{w=(0,Ye.Sg)(c.mockUserToken,null===(f=a._app)||void 0===f?void 0:f.options.projectId);const H=c.mockUserToken.sub||c.mockUserToken.user_id;if(!H)throw new Ot(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new ve(H)}a._authCredentials=new ol(new Co(w,N))}}(this._delegate,e,r,c)}enableNetwork(){return function Xl(a){return function u_(a){return a.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield hg(a),r=yield Uf(a);return e.setNetworkEnabled(!0),function(c){const f=zt(c);return f.mu.delete(0),vd(f)}(r)}))}(Ns(a=cr(a,$i)))}(this._delegate)}disableNetwork(){return function W0(a){return function Ph(a){return a.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield hg(a),r=yield Uf(a);return e.setNetworkEnabled(!1),(c=(0,Ie.Z)(function*(f){const _=zt(f);_.mu.add(0),yield bd(_),_.pu.set("Offline")}),function(f){return c.apply(this,arguments)})(r);var c}))}(Ns(a=cr(a,$i)))}(this._delegate)}enablePersistence(e){let r=!1,c=!1;return e&&(r=!!e.synchronizeTabs,c=!!e.experimentalForceOwningTab,Mu("synchronizeTabs",r,"experimentalForceOwningTab",c)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,c)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _g(a){return function(e){const r=new si;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function n_(a,e){return ig.apply(this,arguments)}(yield Bf(e),r)})),r.promise}(Ns(a=cr(a,$i)))}(this._delegate)}onSnapshotsInSync(e){return function Cg(a,e){return function d_(a,e){const r=new xl(e);return a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return c=yield Md(a),f=r,zt(c).vu.add(f),void f.next();var c,f})),()=>{r.bc(),a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return c=yield Md(a),f=r,void zt(c).vu.delete(f);var c,f}))}}(Ns(a=cr(a,$i)),jf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ot("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yc(this,xu(this._delegate,e))}catch(r){throw ns(r,"collection()","Firestore.collection()")}}doc(e){try{return new zr(this,Os(this._delegate,e))}catch(r){throw ns(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function p_(a,e){if(a=cr(a,zc),Rd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ot(it.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yo(a,null,(r=e,new Ta(lr.emptyPath(),r)));var r}(this._delegate,e))}catch(r){throw ns(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Q0(a,e,r){a=cr(a,$i);const c=Object.assign(Object.assign({},Sg),r);return function(f){if(f.maxAttempts<1)throw new Ot(it.INVALID_ARGUMENT,"Max attempts must be at least 1")}(c),function(f,_,w){const N=new si;return f.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const H=yield function fg(a){return xh(a).then(e=>e.datastore)}(f);new ug(f.asyncQueue,H,w,_,N).run()})),N.promise}(Ns(a),f=>e(new Hh(a,f)),c)}(this._delegate,r=>e(new Zc(this,r)))}batch(){return Ns(this._delegate),new xg(new Ov(this._delegate,e=>Gh(this._delegate,e)))}loadBundle(e){return function eu(a,e){const r=Ns(a=cr(a,$i)),c=new z0;return function iv(a,e,r,c){const f=function(_,w){let N;return N="string"==typeof _?(new TextEncoder).encode(_):_,H=function(H,q){if(H instanceof Uint8Array)return Mh(H,q);if(H instanceof ArrayBuffer)return Mh(new Uint8Array(H),q);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new l_(H,w);var H}(r,cc(e));a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function $0(a,e,r){const c=zt(a);var f;(f=(0,Ie.Z)(function*(_,w,N){try{const H=yield w.getMetadata();if(yield function(et,Tt){const Vt=zt(et),ln=As(Tt.createTime);return Vt.persistence.runTransaction("hasNewerBundle","readonly",wn=>Vt.$s.getBundleMetadata(wn,Tt.id)).then(wn=>!!wn&&wn.createTime.compareTo(ln)>=0)}(_.localStore,H))return yield w.close(),N._completeWith({taskState:"Success",documentsLoaded:(et=H).totalDocuments,bytesLoaded:et.totalBytes,totalDocuments:et.totalDocuments,totalBytes:et.totalBytes}),Promise.resolve(new Set);N._updateProgress(Zy(H));const q=new V0(H,_.localStore,w.Tt);let ae=yield w.yc();for(;ae;){const et=yield q.Bu(ae);et&&N._updateProgress(et),ae=yield w.yc()}const Se=yield q.complete();return yield js(_,Se.Uu,void 0),yield function(et,Tt){const Vt=zt(et);return Vt.persistence.runTransaction("Save bundle","readwrite",ln=>Vt.$s.saveBundleMetadata(ln,Tt))}(_.localStore,H),N._completeWith(Se.progress),Promise.resolve(Se.qu)}catch(H){return zn("SyncEngine",`Loading bundle failed with ${H}`),N._failWith(H),Promise.resolve(new Set)}var et}),function(_,w,N){return f.apply(this,arguments)})(c,e,r).then(f=>{c.sharedClientState.notifyBundleLoaded(f)})}(yield Bf(a),f,c)}))}(r,a._databaseId,e,c),c}(this._delegate,e)}namedQuery(e){return function Pl(a,e){return function sv(a,e){return a.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(r,c){const f=zt(r);return f.persistence.runTransaction("Get named query","readonly",_=>f.$s.getNamedQuery(_,c))}(yield Nd(a),e)}))}(Ns(a=cr(a,$i)),e).then(r=>r?new Yo(a,null,r.query):null)}(this._delegate,e).then(r=>r?new Ws(this,r):null)}}class _c extends Ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(new Sr(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return zr.forKey(r,this.firestore,null)}}class Zc{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new _c(e)}get(e){const r=Ul(e);return this._delegate.get(r).then(c=>new Wh(this._firestore,new fl(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,r.converter)))}set(e,r,c){const f=Ul(e);return c?(mc("Transaction.set",c),this._delegate.set(f,r,c)):this._delegate.set(f,r),this}update(e,r,c,...f){const _=Ul(e);return 2===arguments.length?this._delegate.update(_,r):this._delegate.update(_,r,c,...f),this}delete(e){const r=Ul(e);return this._delegate.delete(r),this}}class xg{constructor(e){this._delegate=e}set(e,r,c){const f=Ul(e);return c?(mc("WriteBatch.set",c),this._delegate.set(f,r,c)):this._delegate.set(f,r),this}update(e,r,c,...f){const _=Ul(e);return 2===arguments.length?this._delegate.update(_,r):this._delegate.update(_,r,c,...f),this}delete(e){const r=Ul(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Vd{constructor(e,r,c){this._firestore=e,this._userDataWriter=r,this._delegate=c}fromFirestore(e,r){const c=new kl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ru(this._firestore,c),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const c=Vd.INSTANCES;let f=c.get(e);f||(f=new WeakMap,c.set(e,f));let _=f.get(r);return _||(_=new Vd(e,new _c(e),r),f.set(r,_)),_}}Vd.INSTANCES=new WeakMap;class zr{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new _c(e)}static forPath(e,r,c){if(e.length%2!=0)throw new Ot("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zr(r,new as(r._delegate,c,new tn(e)))}static forKey(e,r,c){return new zr(r,new as(r._delegate,c,e))}get id(){return this._delegate.id}get parent(){return new yc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yc(this.firestore,xu(this._delegate,e))}catch(r){throw ns(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ye.m9)(e))instanceof as&&g_(this._delegate,e)}set(e,r){r=mc("DocumentReference.set",r);try{return r?Dg(this._delegate,e,r):Dg(this._delegate,e)}catch(c){throw ns(c,"setDoc()","DocumentReference.set()")}}update(e,r,...c){try{return 1===arguments.length?Av(this._delegate,e):Av(this._delegate,e,r,...c)}catch(f){throw ns(f,"updateDoc()","DocumentReference.update()")}}delete(){return function Ig(a){return Gh(cr(a.firestore,$i),[new Eu(a._key,Hi.none())])}(this._delegate)}onSnapshot(...e){const r=Gd(e),c=Pg(e,f=>new Wh(this.firestore,new fl(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)));return S_(this._delegate,r,c)}get(e){let r;return r="cache"===e?.source?function J0(a){a=cr(a,as);const e=cr(a.firestore,$i),r=Ns(e),c=new Fl(e);return function pg(a,e){const r=new si;return a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(c=(0,Ie.Z)(function*(f,_,w){try{const N=yield function(H,q){const ae=zt(H);return ae.persistence.runTransaction("read document","readonly",Se=>ae.localDocuments.getDocument(Se,q))}(f,_);N.isFoundDocument()?w.resolve(N):N.isNoDocument()?w.resolve(null):w.reject(new Ot(it.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const H=Dd(N,`Failed to get document '${_} from cache`);w.reject(H)}}),function(f,_,w){return c.apply(this,arguments)})(yield Nd(a),e,r);var c})),r.promise}(r,a._key).then(f=>new fl(e,c,a._key,f,new Zo(null!==f&&f.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function Cv(a){a=cr(a,as);const e=cr(a.firestore,$i);return Gf(Ns(e),a._key,{source:"server"}).then(r=>gc(e,a,r))}(this._delegate):function Iv(a){a=cr(a,as);const e=cr(a.firestore,$i);return Gf(Ns(e),a._key).then(r=>gc(e,a,r))}(this._delegate),r.then(c=>new Wh(this.firestore,new fl(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)))}withConverter(e){return new zr(this.firestore,this._delegate.withConverter(e?Vd.getInstance(this.firestore,e):null))}}function ns(a,e,r){return a.message=a.message.replace(e,r),a}function Gd(a){for(const e of a)if("object"==typeof e&&!zh(e))return e;return{}}function Pg(a,e){var r,c;let f;return f=zh(a[0])?a[0]:zh(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:_=>{f.next&&f.next(e(_))},error:null===(r=f.error)||void 0===r?void 0:r.bind(f),complete:null===(c=f.complete)||void 0===c?void 0:c.bind(f)}}class Wh{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return Qf(this._delegate,e._delegate)}}class ru extends Wh{data(e){const r=this._delegate.data(e);return function zo(a,e){a||jt()}(void 0!==r),r}}class Ws{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new _c(e)}where(e,r,c){try{return new Ws(this.firestore,$s(this._delegate,function w_(a,e,r){const c=e,f=dl("where",a);return qf._create(f,c,r)}(e,r,c)))}catch(f){throw ns(f,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new Ws(this.firestore,$s(this._delegate,function D_(a,e="asc"){const r=e,c=dl("orderBy",a);return Yf._create(c,r)}(e,r)))}catch(c){throw ns(c,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,$s(this._delegate,function I_(a){return gg("limit",a),Fu._create("limit",a,"F")}(e)))}catch(r){throw ns(r,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,$s(this._delegate,function C_(a){return gg("limitToLast",a),Fu._create("limitToLast",a,"L")}(e)))}catch(r){throw ns(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,$s(this._delegate,function yv(...a){return Zf._create("startAt",a,!0)}(...e)))}catch(r){throw ns(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,$s(this._delegate,function vv(...a){return Zf._create("startAfter",a,!1)}(...e)))}catch(r){throw ns(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,$s(this._delegate,function T_(...a){return Di._create("endBefore",a,!1)}(...e)))}catch(r){throw ns(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,$s(this._delegate,function bv(...a){return Di._create("endAt",a,!0)}(...e)))}catch(r){throw ns(r,"endAt()","Query.endAt()")}}isEqual(e){return Fh(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function wg(a){a=cr(a,Yo);const e=cr(a.firestore,$i),r=Ns(e),c=new Fl(e);return function rv(a,e){const r=new si;return a.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(c=(0,Ie.Z)(function*(f,_,w){try{const N=yield vf(f,_,!0),H=new Xy(_,N.Yi),q=H.Hu(N.documents),ae=H.applyChanges(q,!1);w.resolve(ae.snapshot)}catch(N){const H=Dd(N,`Failed to execute query '${_} against cache`);w.reject(H)}}),function(f,_,w){return c.apply(this,arguments)})(yield Nd(a),e,r);var c})),r.promise}(r,a._query).then(f=>new nu(e,c,a,f))}(this._delegate):"server"===e?.source?function Sv(a){a=cr(a,Yo);const e=cr(a.firestore,$i),r=Ns(e),c=new Fl(e);return c_(r,a._query,{source:"server"}).then(f=>new nu(e,c,a,f))}(this._delegate):function Tv(a){a=cr(a,Yo);const e=cr(a.firestore,$i),r=Ns(e),c=new Fl(e);return Wf(a._query),c_(r,a._query).then(f=>new nu(e,c,a,f))}(this._delegate),r.then(c=>new Uu(this.firestore,new nu(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)))}onSnapshot(...e){const r=Gd(e),c=Pg(e,f=>new Uu(this.firestore,new nu(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)));return S_(this._delegate,r,c)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?Vd.getInstance(this.firestore,e):null))}}class A_{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new ru(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Uu{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ru(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new A_(this._firestore,r))}forEach(e,r){this._delegate.forEach(c=>{e.call(r,new ru(this._firestore,c))})}isEqual(e){return Qf(this._delegate,e._delegate)}}class yc extends Ws{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zr(this.firestore,e):null}doc(e){try{return new zr(this.firestore,void 0===e?Os(this._delegate):Os(this._delegate,e))}catch(r){throw ns(r,"doc()","CollectionReference.doc()")}}add(e){return function Vh(a,e){const r=cr(a.firestore,$i),c=Os(a),f=pc(a.converter,e);return Gh(r,[yg(ls(a.firestore),"addDoc",c._key,f,null!==a.converter,{}).toMutation(c._key,Hi.exists(!1))]).then(()=>c)}(this._delegate,e).then(r=>new zr(this.firestore,r))}isEqual(e){return g_(this._delegate,e._delegate)}withConverter(e){return new yc(this.firestore,this._delegate.withConverter(e?Vd.getInstance(this.firestore,e):null))}}function Ul(a){return cr(a,as)}class ep{constructor(...e){this._delegate=new br(...e)}static documentId(){return new ep(Cr.keyField().canonicalString())}isEqual(e){return(e=(0,Ye.m9)(e))instanceof br&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eb(){return new $f("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bu(e)}static delete(){const e=function X0(){return new Wc("deleteField")}();return e._methodName="FieldValue.delete",new Bu(e)}static arrayUnion(...e){const r=function pl(...a){return new vg("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new Bu(r)}static arrayRemove(...e){const r=function Ag(...a){return new gv("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new Bu(r)}static increment(e){const r=function Og(a){return new v_("increment",a)}(e);return r._methodName="FieldValue.increment",new Bu(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const O_={Firestore:Bd,GeoPoint:hi,Timestamp:sr,Blob:Lu,Transaction:Zc,WriteBatch:xg,DocumentReference:zr,DocumentSnapshot:Wh,Query:Ws,QueryDocumentSnapshot:ru,QuerySnapshot:Uu,CollectionReference:yc,FieldPath:ep,FieldValue:Bu,setLogLevel:function Rg(a){!function vr(a){St.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Mv(a){(function ib(a,e){a.INTERNAL.registerComponent(new gt.wA("firestore-compat",r=>{const c=r.getProvider("app-compat").getImmediate(),f=r.getProvider("firestore").getImmediate();return e(c,f)},"PUBLIC").setServiceProps(Object.assign({},O_)))})(a,(e,r)=>new Bd(e,r,new Mg)),a.registerVersion("@firebase/firestore-compat","0.3.5")}(ut.Z);var vc=V(1205),sb=V(6217),ob=V(9260);function tp(a,e){return function ab(a,e=Z.z){return new p.y(r=>{let c;return null!=e?e.schedule(()=>{c=a.onSnapshot({includeMetadataChanges:!0},r)}):c=a.onSnapshot({includeMetadataChanges:!0},r),()=>{c?.()}})}(a,e)}function kg(a,e){return tp(a,e).pipe((0,Ee.U)(r=>({payload:r,type:"query"})))}function Fg(a,e){return kg(a,e).pipe((0,Fe.O)(void 0),be(),(0,Ee.U)(([r,c])=>{const f=c.payload.docChanges(),_=f.map(w=>({type:w.type,payload:w}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((w,N)=>{const H=f.find(ae=>ae.doc.ref.isEqual(w.ref)),q=r?.payload.docs.find(ae=>ae.ref.isEqual(w.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(w.metadata)||!H&&q&&JSON.stringify(q.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:w}})}),_}))}function xv(a,e,r){return Fg(a,r).pipe((0,Re.R)((c,f)=>function lb(a,e,r){return e.forEach(c=>{r.indexOf(c.type)>-1&&(a=function ub(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return N_(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return N_(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return N_(a,e.oldIndex,1)}return a}(a,c))}),a}(c,f.map(_=>_.payload),e),[]),(0,yt.x)(),(0,Ee.U)(c=>c.map(f=>({type:f.type,payload:f}))))}function N_(a,e,r,...c){const f=a.slice();return f.splice(e,r,...c),f}function np(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Lg{constructor(e,r,c){this.ref=e,this.query=r,this.afs=c}stateChanges(e){let r=Fg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Ee.U)(c=>c.filter(f=>e.indexOf(f.type)>-1)))),r.pipe((0,Fe.O)(void 0),be(),(0,He.h)(([c,f])=>f.length>0||!c),(0,Ee.U)(([c,f])=>f),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((r,c)=>[...r,...c],[]))}snapshotChanges(e){const r=np(e);return xv(this.query,r,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return kg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(r=>r.payload.docs.map(c=>e.idField?Object.assign(Object.assign({},c.data()),{[e.idField]:c.id}):c.data())),xe.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new M_(this.ref.doc(e),this.afs)}}class M_{constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const c=this.ref.collection(e),{ref:f,query:_}=x_(c,r);return new Lg(f,_,this.afs)}snapshotChanges(){return function Rv(a,e){return tp(a,e).pipe((0,Fe.O)(void 0),be(),(0,Ee.U)(([r,c])=>c.exists?r?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ee.U)(({payload:r})=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe(xe.iC)}}class rp{constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Fg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(r=>r.filter(c=>e.indexOf(c.type)>-1)),(0,He.h)(r=>r.length>0),xe.iC):Fg(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Re.R)((r,c)=>[...r,...c],[]))}snapshotChanges(e){const r=np(e);return xv(this.query,r,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return kg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(c=>c.payload.docs.map(f=>e.idField?Object.assign({[e.idField]:f.id},f.data()):f.data())),xe.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(xe.iC)}}const R_=new b.OlP("angularfire2.enableFirestorePersistence"),ip=new b.OlP("angularfire2.firestore.persistenceSettings"),Pv=new b.OlP("angularfire2.firestore.settings"),Ug=new b.OlP("angularfire2.firestore.use-emulator");function x_(a,e=(r=>r)){return{query:e(a),ref:a}}let kv=(()=>{class a{constructor(r,c,f,_,w,N,H,q,ae,Se,et,Tt,Vt,ln,wn,Ii,Ms){this.schedulers=H;const dr=(0,pt.on)(r,N,c),Rs=ae;Se&&(0,vc.nw)(dr,N,et,Vt,ln,wn,Tt,Ii),[this.firestore,this.persistenceEnabled$]=(0,pt.cc)(`${dr.name}.firestore`,"AngularFirestore",dr.name,()=>{const Wr=N.runOutsideAngular(()=>dr.firestore());if(_&&Wr.settings(_),Rs&&Wr.useEmulator(...Rs),f&&!(0,Nt.PM)(w)){const Qr=()=>{try{return(0,De.D)(Wr.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(bo){return typeof console<"u"&&console.warn(bo),(0,Me.of)(!1)}};return[Wr,N.runOutsideAngular(Qr)]}return[Wr,(0,Me.of)(!1)]},[_,Rs,f])}collection(r,c){let f;f="string"==typeof r?this.firestore.collection(r):r;const{ref:_,query:w}=x_(f,c),N=this.schedulers.ngZone.run(()=>_);return new Lg(N,w,this)}collectionGroup(r,c){const f=c||(w=>w),_=this.firestore.collectionGroup(r);return new rp(f(_),this)}doc(r){let c;c="string"==typeof r?this.firestore.doc(r):r;const f=this.schedulers.ngZone.run(()=>c);return new M_(f,this)}createId(){return this.firestore.collection("_").doc().id}}return a.\u0275fac=function(r){return new(r||a)(b.LFG(pt.Dh),b.LFG(pt.xv,8),b.LFG(R_,8),b.LFG(Pv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(xe.HU),b.LFG(ip,8),b.LFG(Ug,8),b.LFG(vc.zQ,8),b.LFG(vc.Qv,8),b.LFG(vc.L6,8),b.LFG(vc._Q,8),b.LFG(vc.rT,8),b.LFG(vc.lh,8),b.LFG(vc.f7,8),b.LFG(sb.nm,8))},a.\u0275prov=b.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),Fv=(()=>{class a{constructor(){ob.Z.registerVersion("angularfire",xe.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:R_,useValue:!0},{provide:ip,useValue:r}]}}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=b.oAB({type:a}),a.\u0275inj=b.cJS({providers:[kv]}),a})()},2011:(Yt,Ke,V)=>{V.d(Ke,{Dh:()=>Pe,GT:()=>xe,cc:()=>He,hO:()=>yt,on:()=>be,pX:()=>Me,xv:()=>Ge});var b=V(4650),Z=V(9260),p=V(2122);Yt=V.hmd(Yt);const De=["ngOnDestroy"],Me=(ut,Ie,Et,gt={})=>new Proxy(ut,{get:(rt,Ye)=>Et.runOutsideAngular(()=>{var xt;if(ut[Ye])return!(null===(xt=gt?.spy)||void 0===xt)&&xt.get&&gt.spy.get(Ye,ut[Ye]),ut[Ye];if(De.indexOf(Ye)>-1)return()=>{};const ke=Ie.toPromise().then(fe=>{const qe=fe&&fe[Ye];return"function"==typeof qe?qe.bind(fe):qe&&qe.then?qe.then(ct=>Et.run(()=>ct)):Et.run(()=>qe)});return new Proxy(()=>{},{get:(fe,qe)=>ke[qe],apply:(fe,qe,ct)=>ke.then(bt=>{var Jt;const Pt=bt&&bt(...ct);return!(null===(Jt=gt?.spy)||void 0===Jt)&&Jt.apply&&gt.spy.apply(Ye,ct,Pt),Pt})})})}),xe=(ut,Ie)=>{Ie.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(gt=>{Object.defineProperty(ut.prototype,gt,Object.getOwnPropertyDescriptor(Et.prototype||Et,gt))})})};class Fe{constructor(Ie){return Ie}}const Pe=new b.OlP("angularfire2.app.options"),Ge=new b.OlP("angularfire2.app.name");function be(ut,Ie,Et){const rt="object"==typeof Et&&Et||{};rt.name=rt.name||"string"==typeof Et&&Et||"[DEFAULT]";const xt=Z.Z.apps.filter(ke=>ke&&ke.name===rt.name)[0]||Ie.runOutsideAngular(()=>Z.Z.initializeApp(ut,rt));try{JSON.stringify(ut)!==JSON.stringify(xt.options)&&Ee("error",`${xt.name} Firebase App already initialized with different options${Yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Fe(xt)}const Ee=(ut,...Ie)=>{(0,b.X6Q)()&&typeof console<"u"&&console[ut](...Ie)},Re={provide:Fe,useFactory:be,deps:[Pe,b.R0b,[new b.FiY,Ge]]};let yt=(()=>{class ut{constructor(Et){Z.Z.registerVersion("angularfire",p.q4.full,"core"),Z.Z.registerVersion("angularfire",p.q4.full,"app-compat"),Z.Z.registerVersion("angular",b.q4F.full,Et.toString())}static initializeApp(Et,gt){return{ngModule:ut,providers:[{provide:Pe,useValue:Et},{provide:Ge,useValue:gt}]}}}return ut.\u0275fac=function(Et){return new(Et||ut)(b.LFG(b.Lbi))},ut.\u0275mod=b.oAB({type:ut}),ut.\u0275inj=b.cJS({providers:[Re]}),ut})();function He(ut,Ie,Et,gt,rt){const[,Ye,xt]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===ut)||[];if(Ye)return function pt(ut,Ie){try{return ut.toString()===Ie.toString()}catch{return ut===Ie}}(rt,xt)||(Qe("error",`${Ie} was already initialized on the ${Et} Firebase App with different settings.${Nt?" You may need to reload as Firebase is not HMR aware.":""}`),Qe("warn",{is:rt,was:xt})),Ye;{const ke=gt();return globalThis.\u0275AngularfireInstanceCache.push([ut,ke,rt]),ke}}const Nt=!!Yt.hot,Qe=(ut,...Ie)=>{(0,b.X6Q)()&&typeof console<"u"&&console[ut](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Yt,Ke,V)=>{V.d(Ke,{q4:()=>pu,iC:()=>_o,fc:()=>Us,HU:()=>nn,vb:()=>se,JM:()=>J});var b=V(4650),Z=V(259),p=V(5861),De=V(9681),Me=V(2090),xe=V(4859),Fe=V(1877),Pe=V(8766);const Ge="@firebase/installations",be="0.6.4",Ee=1e4,Re=`w:${be}`,yt="FIS_v2",He="https://firebaseinstallations.googleapis.com/v1",pt=36e5,Ie=new Me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(U){return U instanceof Me.ZR&&U.code.includes("request-failed")}function gt({projectId:U}){return`${He}/projects/${U}/installations`}function rt(U){return{token:U.token,requestStatus:2,expiresIn:bt(U.expiresIn),creationTime:Date.now()}}function Ye(U,z){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(U,z){const we=(yield z.json()).error;return Ie.create("request-failed",{requestName:U,serverCode:we.code,serverMessage:we.message,serverStatus:we.status})})).apply(this,arguments)}function ke({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function qe(U){return ct.apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(U){const z=yield U();return z.status>=500&&z.status<600?U():z})).apply(this,arguments)}function bt(U){return Number(U.replace("s","000"))}function We(){return(We=(0,p.Z)(function*({appConfig:U,heartbeatServiceProvider:z},{fid:te}){const we=gt(U),je=ke(U),tt=z.getImmediate({optional:!0});if(tt){const Rn=yield tt.getHeartbeatsHeader();Rn&&je.append("x-firebase-client",Rn)}const gn={method:"POST",headers:je,body:JSON.stringify({fid:te,authVersion:yt,appId:U.appId,sdkVersion:Re})},Tn=yield qe(()=>fetch(we,gn));if(Tn.ok){const Rn=yield Tn.json();return{fid:Rn.fid||te,registrationStatus:2,refreshToken:Rn.refreshToken,authToken:rt(Rn.authToken)}}throw yield Ye("Create Installation",Tn)})).apply(this,arguments)}function st(U){return new Promise(z=>{setTimeout(z,U)})}const at=/^[cdef][\w-]{21}$/,wt="";function dt(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const te=function Rt(U){return function $e(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return at.test(te)?te:wt}catch{return wt}}function Mt(U){return`${U.appName}!${U.appId}`}const cn=new Map;function Kt(U,z){const te=Mt(U);bn(te,z),function xn(U,z){const te=function Ln(){return!Gn&&"BroadcastChannel"in self&&(Gn=new BroadcastChannel("[Firebase] FID Change"),Gn.onmessage=U=>{bn(U.data.key,U.data.fid)}),Gn}();te&&te.postMessage({key:U,fid:z}),function hr(){0===cn.size&&Gn&&(Gn.close(),Gn=null)}()}(te,z)}function bn(U,z){const te=cn.get(U);if(te)for(const we of te)we(z)}let Gn=null;const Wn="firebase-installations-database",Ar=1,Vn="firebase-installations-store";let _r=null;function Rr(){return _r||(_r=(0,Pe.X3)(Wn,Ar,{upgrade:(U,z)=>{0===z&&U.createObjectStore(Vn)}})),_r}function en(U,z){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(U,z){const te=Mt(U),je=(yield Rr()).transaction(Vn,"readwrite"),tt=je.objectStore(Vn),Ut=yield tt.get(te);return yield tt.put(z,te),yield je.done,(!Ut||Ut.fid!==z.fid)&&Kt(U,z.fid),z})).apply(this,arguments)}function kt(U){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(U){const z=Mt(U),we=(yield Rr()).transaction(Vn,"readwrite");yield we.objectStore(Vn).delete(z),yield we.done})).apply(this,arguments)}function Kr(U,z){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(U,z){const te=Mt(U),je=(yield Rr()).transaction(Vn,"readwrite"),tt=je.objectStore(Vn),Ut=yield tt.get(te),gn=z(Ut);return void 0===gn?yield tt.delete(te):yield tt.put(gn,te),yield je.done,gn&&(!Ut||Ut.fid!==gn.fid)&&Kt(U,gn.fid),gn})).apply(this,arguments)}function xr(U){return qr.apply(this,arguments)}function qr(){return qr=(0,p.Z)(function*(U){let z;const te=yield Kr(U.appConfig,we=>{const je=function mn(U){return or(U||{fid:dt(),registrationStatus:0})}(we),tt=function on(U,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(Ie.create("app-offline"))};const te={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},we=function $t(U,z){return Hn.apply(this,arguments)}(U,te);return{installationEntry:te,registrationPromise:we}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:Kn(U)}:{installationEntry:z}}(U,je);return z=tt.registrationPromise,tt.installationEntry});return te.fid===wt?{installationEntry:yield z}:{installationEntry:te,registrationPromise:z}}),qr.apply(this,arguments)}function Hn(){return Hn=(0,p.Z)(function*(U,z){try{const te=yield function Pt(U,z){return We.apply(this,arguments)}(U,z);return en(U.appConfig,te)}catch(te){throw Et(te)&&409===te.customData.serverCode?yield kt(U.appConfig):yield en(U.appConfig,{fid:z.fid,registrationStatus:0}),te}}),Hn.apply(this,arguments)}function Kn(U){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(U){let z=yield In(U.appConfig);for(;1===z.registrationStatus;)yield st(100),z=yield In(U.appConfig);if(0===z.registrationStatus){const{installationEntry:te,registrationPromise:we}=yield xr(U);return we||te}return z})).apply(this,arguments)}function In(U){return Kr(U,z=>{if(!z)throw Ie.create("installation-not-found");return or(z)})}function or(U){return function Pr(U){return 1===U.registrationStatus&&U.registrationTime+Ee<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function Dr(){return(Dr=(0,p.Z)(function*({appConfig:U,heartbeatServiceProvider:z},te){const we=function Pn(U,{fid:z}){return`${gt(U)}/${z}/authTokens:generate`}(U,te),je=function fe(U,{refreshToken:z}){const te=ke(U);return te.append("Authorization",function Jt(U){return`${yt} ${U}`}(z)),te}(U,te),tt=z.getImmediate({optional:!0});if(tt){const Rn=yield tt.getHeartbeatsHeader();Rn&&je.append("x-firebase-client",Rn)}const gn={method:"POST",headers:je,body:JSON.stringify({installation:{sdkVersion:Re,appId:U.appId}})},Tn=yield qe(()=>fetch(we,gn));if(Tn.ok)return rt(yield Tn.json());throw yield Ye("Generate Auth Token",Tn)})).apply(this,arguments)}function Ci(U){return rr.apply(this,arguments)}function rr(){return rr=(0,p.Z)(function*(U,z=!1){let te;const we=yield Kr(U.appConfig,tt=>{if(!ht(tt))throw Ie.create("not-registered");const Ut=tt.authToken;if(!z&&function mt(U){return 2===U.requestStatus&&!function ge(U){const z=Date.now();return z<U.creationTime||U.creationTime+U.expiresIn<z+pt}(U)}(Ut))return tt;if(1===Ut.requestStatus)return te=function Lt(U,z){return It.apply(this,arguments)}(U,z),tt;{if(!navigator.onLine)throw Ie.create("app-offline");const gn=function pe(U){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:z})}(tt);return te=function ye(U,z){return Ce.apply(this,arguments)}(U,gn),gn}});return te?yield te:we.authToken}),rr.apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(U,z){let te=yield Ue(U.appConfig);for(;1===te.authToken.requestStatus;)yield st(100),te=yield Ue(U.appConfig);const we=te.authToken;return 0===we.requestStatus?Ci(U,z):we})).apply(this,arguments)}function Ue(U){return Kr(U,z=>{if(!ht(z))throw Ie.create("not-registered");return function ne(U){return 1===U.requestStatus&&U.requestTime+Ee<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function Ce(){return Ce=(0,p.Z)(function*(U,z){try{const te=yield function Nn(U,z){return Dr.apply(this,arguments)}(U,z),we=Object.assign(Object.assign({},z),{authToken:te});return yield en(U.appConfig,we),te}catch(te){if(!Et(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const we=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield en(U.appConfig,we)}else yield kt(U.appConfig);throw te}}),Ce.apply(this,arguments)}function ht(U){return void 0!==U&&2===U.registrationStatus}function Q(){return(Q=(0,p.Z)(function*(U){const z=U,{installationEntry:te,registrationPromise:we}=yield xr(z);return we?we.catch(console.error):Ci(z).catch(console.error),te.fid})).apply(this,arguments)}function ce(){return ce=(0,p.Z)(function*(U,z=!1){const te=U;return yield function me(U){return le.apply(this,arguments)}(te),(yield Ci(te,z)).token}),ce.apply(this,arguments)}function le(){return(le=(0,p.Z)(function*(U){const{registrationPromise:z}=yield xr(U);z&&(yield z)})).apply(this,arguments)}function Ks(U){return Ie.create("missing-app-config-values",{valueName:U})}const qs="installations",zi=U=>{const z=U.getProvider("app").getImmediate(),te=function Ti(U){if(!U||!U.options)throw Ks("App Configuration");if(!U.name)throw Ks("App Name");const z=["projectId","apiKey","appId"];for(const te of z)if(!U.options[te])throw Ks(te);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(z);return{app:z,appConfig:te,heartbeatServiceProvider:(0,De._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},Ps=U=>{const z=U.getProvider("app").getImmediate(),te=(0,De._getProvider)(z,qs).getImmediate();return{getId:()=>function ie(U){return Q.apply(this,arguments)}(te),getToken:je=>function Le(U){return ce.apply(this,arguments)}(te,je)}};(function Ys(){(0,De._registerComponent)(new xe.wA(qs,zi,"PUBLIC")),(0,De._registerComponent)(new xe.wA("installations-internal",Ps,"PRIVATE"))})(),(0,De.registerVersion)(Ge,be),(0,De.registerVersion)(Ge,be,"esm2017");const $n="@firebase/remote-config",ir=new Me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class is{constructor(z,te,we,je){this.client=z,this.storage=te,this.storageCache=we,this.logger=je}isCachedDataFresh(z,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const we=Date.now()-te,je=we<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${we}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${je}.`),je}fetch(z){var te=this;return(0,p.Z)(function*(){const[we,je]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(je&&te.isCachedDataFresh(z.cacheMaxAgeMillis,we))return je;z.eTag=je&&je.eTag;const tt=yield te.client.fetch(z),Ut=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===tt.status&&Ut.push(te.storage.setLastSuccessfulFetchResponse(tt)),yield Promise.all(Ut),tt})()}}function Gr(U=navigator){return U.languages&&U.languages[0]||U.language}class vi{constructor(z,te,we,je,tt,Ut){this.firebaseInstallations=z,this.sdkVersion=te,this.namespace=we,this.projectId=je,this.apiKey=tt,this.appId=Ut}fetch(z){var te=this;return(0,p.Z)(function*(){const[we,je]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Ut=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,gn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},Tn={sdk_version:te.sdkVersion,app_instance_id:we,app_instance_id_token:je,app_id:te.appId,language_code:Gr()},Rn={method:"POST",headers:gn,body:JSON.stringify(Tn)},Jn=fetch(Ut,Rn),Sn=new Promise((Vs,Ts)=>{z.signal.addEventListener(()=>{const Cc=new Error("The operation was aborted.");Cc.name="AbortError",Ts(Cc)})});let No;try{yield Promise.race([Jn,Sn]),No=yield Jn}catch(Vs){let Ts="fetch-client-network";throw"AbortError"===Vs?.name&&(Ts="fetch-timeout"),ir.create(Ts,{originalErrorMessage:Vs?.message})}let Xi=No.status;const $l=No.headers.get("ETag")||void 0;let er,Hr;if(200===No.status){let Vs;try{Vs=yield No.json()}catch(Ts){throw ir.create("fetch-client-parse",{originalErrorMessage:Ts?.message})}er=Vs.entries,Hr=Vs.state}if("INSTANCE_STATE_UNSPECIFIED"===Hr?Xi=500:"NO_CHANGE"===Hr?Xi=304:("NO_TEMPLATE"===Hr||"EMPTY_CONFIG"===Hr)&&(er={}),304!==Xi&&200!==Xi)throw ir.create("fetch-status",{httpStatus:Xi});return{status:Xi,eTag:$l,config:er}})()}}class Te{constructor(z,te){this.client=z,this.storage=te}fetch(z){var te=this;return(0,p.Z)(function*(){const we=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch(z,we)})()}attemptFetch(z,{throttleEndTimeMillis:te,backoffCount:we}){var je=this;return(0,p.Z)(function*(){yield function Es(U,z){return new Promise((te,we)=>{const je=Math.max(z-Date.now(),0),tt=setTimeout(te,je);U.addEventListener(()=>{clearTimeout(tt),we(ir.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,te);try{const tt=yield je.client.fetch(z);return yield je.storage.deleteThrottleMetadata(),tt}catch(tt){if(!function Ve(U){if(!(U instanceof Me.ZR&&U.customData))return!1;const z=Number(U.customData.httpStatus);return 429===z||500===z||503===z||504===z}(tt))throw tt;const Ut={throttleEndTimeMillis:Date.now()+(0,Me.$s)(we),backoffCount:we+1};return yield je.storage.setThrottleMetadata(Ut),je.attemptFetch(z,Ut)}})()}}class Wt{constructor(z,te,we,je,tt){this.app=z,this._client=te,this._storageCache=we,this._storage=je,this._logger=tt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hn(U,z){const te=U.target.error||void 0;return ir.create(z,{originalErrorMessage:te&&te?.message})}const Mn="app_namespace_store";class Yr{constructor(z,te,we,je=function ws(){return new Promise((U,z)=>{try{const te=indexedDB.open("firebase_remote_config",1);te.onerror=we=>{z(hn(we,"storage-open"))},te.onsuccess=we=>{U(we.target.result)},te.onupgradeneeded=we=>{0===we.oldVersion&&we.target.result.createObjectStore(Mn,{keyPath:"compositeKey"})}}catch(te){z(ir.create("storage-open",{originalErrorMessage:te?.message}))}})}()){this.appId=z,this.appName=te,this.namespace=we,this.openDbPromise=je}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var te=this;return(0,p.Z)(function*(){const we=yield te.openDbPromise;return new Promise((je,tt)=>{const gn=we.transaction([Mn],"readonly").objectStore(Mn),Tn=te.createCompositeKey(z);try{const Rn=gn.get(Tn);Rn.onerror=Jn=>{tt(hn(Jn,"storage-get"))},Rn.onsuccess=Jn=>{const Sn=Jn.target.result;je(Sn?Sn.value:void 0)}}catch(Rn){tt(ir.create("storage-get",{originalErrorMessage:Rn?.message}))}})})()}set(z,te){var we=this;return(0,p.Z)(function*(){const je=yield we.openDbPromise;return new Promise((tt,Ut)=>{const Tn=je.transaction([Mn],"readwrite").objectStore(Mn),Rn=we.createCompositeKey(z);try{const Jn=Tn.put({compositeKey:Rn,value:te});Jn.onerror=Sn=>{Ut(hn(Sn,"storage-set"))},Jn.onsuccess=()=>{tt()}}catch(Jn){Ut(ir.create("storage-set",{originalErrorMessage:Jn?.message}))}})})()}delete(z){var te=this;return(0,p.Z)(function*(){const we=yield te.openDbPromise;return new Promise((je,tt)=>{const gn=we.transaction([Mn],"readwrite").objectStore(Mn),Tn=te.createCompositeKey(z);try{const Rn=gn.delete(Tn);Rn.onerror=Jn=>{tt(hn(Jn,"storage-delete"))},Rn.onsuccess=()=>{je()}}catch(Rn){tt(ir.create("storage-delete",{originalErrorMessage:Rn?.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class fr{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,p.Z)(function*(){const te=z.storage.getLastFetchStatus(),we=z.storage.getLastSuccessfulFetchTimestampMillis(),je=z.storage.getActiveConfig(),tt=yield te;tt&&(z.lastFetchStatus=tt);const Ut=yield we;Ut&&(z.lastSuccessfulFetchTimestampMillis=Ut);const gn=yield je;gn&&(z.activeConfig=gn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function fs(){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(){if(!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch{return!1}})).apply(this,arguments)}!function ds(){(0,De._registerComponent)(new xe.wA("remote-config",function U(z,{instanceIdentifier:te}){const we=z.getProvider("app").getImmediate(),je=z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ir.create("registration-window");if(!(0,Me.hl)())throw ir.create("indexed-db-unavailable");const{projectId:tt,apiKey:Ut,appId:gn}=we.options;if(!tt)throw ir.create("registration-project-id");if(!Ut)throw ir.create("registration-api-key");if(!gn)throw ir.create("registration-app-id");const Tn=new Yr(gn,we.name,te=te||"firebase"),Rn=new fr(Tn),Jn=new Fe.Yd($n);Jn.logLevel=Fe.in.ERROR;const Sn=new vi(je,De.SDK_VERSION,te,tt,Ut,gn),No=new Te(Sn,Tn),Xi=new is(No,Tn,Rn,Jn),$l=new Wt(we,Xi,Rn,Tn,Jn);return function Ir(U){const z=(0,Me.m9)(U);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}($l),$l},"PUBLIC").setMultipleInstances(!0)),(0,De.registerVersion)($n,"0.4.4"),(0,De.registerVersion)($n,"0.4.4","esm2017")}();const Vi="/firebase-messaging-sw.js",Eo="/firebase-cloud-messaging-push-scope",ks="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Lo="https://fcmregistrations.googleapis.com/v1",uo="google.c.a.c_id",ha="google.c.a.c_l",wo="google.c.a.ts",ps="google.c.a.e";var Fs=(()=>{return(U=Fs||(Fs={})).PUSH_RECEIVED="push-received",U.NOTIFICATION_CLICKED="notification-clicked",Fs;var U})();function Ls(U){const z=new Uint8Array(U);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ja(U){const te=(U+"=".repeat((4-U.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),we=atob(te),je=new Uint8Array(we.length);for(let tt=0;tt<we.length;++tt)je[tt]=we.charCodeAt(tt);return je}const fa="fcm_token_details_db",Yi=5,co="fcm_token_object_Store";function Zs(){return Zs=(0,p.Z)(function*(U){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(tt=>tt.name).includes(fa))return null;let z=null;return(yield(0,Pe.X3)(fa,Yi,{upgrade:(we=(0,p.Z)(function*(je,tt,Ut,gn){var Tn;if(tt<2||!je.objectStoreNames.contains(co))return;const Rn=gn.objectStore(co),Jn=yield Rn.index("fcmSenderId").get(U);if(yield Rn.clear(),Jn)if(2===tt){const Sn=Jn;if(!Sn.auth||!Sn.p256dh||!Sn.endpoint)return;z={token:Sn.fcmToken,createTime:null!==(Tn=Sn.createTime)&&void 0!==Tn?Tn:Date.now(),subscriptionOptions:{auth:Sn.auth,p256dh:Sn.p256dh,endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:"string"==typeof Sn.vapidKey?Sn.vapidKey:Ls(Sn.vapidKey)}}}else if(3===tt){const Sn=Jn;z={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:Ls(Sn.auth),p256dh:Ls(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:Ls(Sn.vapidKey)}}}else if(4===tt){const Sn=Jn;z={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:Ls(Sn.auth),p256dh:Ls(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:Ls(Sn.vapidKey)}}}}),function(tt,Ut,gn,Tn){return we.apply(this,arguments)})})).close(),yield(0,Pe.Lj)(fa),yield(0,Pe.Lj)("fcm_vapid_details_db"),yield(0,Pe.Lj)("undefined"),function Bo(U){if(!U||!U.subscriptionOptions)return!1;const{subscriptionOptions:z}=U;return"number"==typeof U.createTime&&U.createTime>0&&"string"==typeof U.token&&U.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}(z)?z:null;var we}),Zs.apply(this,arguments)}const Qa="firebase-messaging-database",jr=1,Gi="firebase-messaging-store";let ms=null;function Ds(){return ms||(ms=(0,Pe.X3)(Qa,jr,{upgrade:(U,z)=>{0===z&&U.createObjectStore(Gi)}})),ms}function Qo(U){return Js.apply(this,arguments)}function Js(){return Js=(0,p.Z)(function*(U){const z=_s(U),we=yield(yield Ds()).transaction(Gi).objectStore(Gi).get(z);if(we)return we;{const je=yield function gs(U){return Zs.apply(this,arguments)}(U.appConfig.senderId);if(je)return yield Zi(U,je),je}}),Js.apply(this,arguments)}function Zi(U,z){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(U,z){const te=_s(U),je=(yield Ds()).transaction(Gi,"readwrite");return yield je.objectStore(Gi).put(z,te),yield je.done,z})).apply(this,arguments)}function _l(){return(_l=(0,p.Z)(function*(U){const z=_s(U),we=(yield Ds()).transaction(Gi,"readwrite");yield we.objectStore(Gi).delete(z),yield we.done})).apply(this,arguments)}function _s({appConfig:U}){return U.appId}const pr=new Me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vo(U,z){return Do.apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(U,z){const te=yield Go(U),we=ai(z),je={method:"POST",headers:te,body:JSON.stringify(we)};let tt;try{tt=yield(yield fetch(el(U.appConfig),je)).json()}catch(Ut){throw pr.create("token-subscribe-failed",{errorInfo:Ut?.toString()})}if(tt.error)throw pr.create("token-subscribe-failed",{errorInfo:tt.error.message});if(!tt.token)throw pr.create("token-subscribe-no-token");return tt.token})).apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(U,z){const te=yield Go(U),we=ai(z.subscriptionOptions),je={method:"PATCH",headers:te,body:JSON.stringify(we)};let tt;try{tt=yield(yield fetch(`${el(U.appConfig)}/${z.token}`,je)).json()}catch(Ut){throw pr.create("token-update-failed",{errorInfo:Ut?.toString()})}if(tt.error)throw pr.create("token-update-failed",{errorInfo:tt.error.message});if(!tt.token)throw pr.create("token-update-no-token");return tt.token})).apply(this,arguments)}function ho(U,z){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(U,z){const we={method:"DELETE",headers:yield Go(U)};try{const tt=yield(yield fetch(`${el(U.appConfig)}/${z}`,we)).json();if(tt.error)throw pr.create("token-unsubscribe-failed",{errorInfo:tt.error.message})}catch(je){throw pr.create("token-unsubscribe-failed",{errorInfo:je?.toString()})}})).apply(this,arguments)}function el({projectId:U}){return`${Lo}/projects/${U}/registrations`}function Go(U){return ys.apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*({appConfig:U,installations:z}){const te=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function ai({p256dh:U,auth:z,endpoint:te,vapidKey:we}){const je={web:{endpoint:te,auth:z,p256dh:U}};return we!==ks&&(je.web.applicationPubKey=we),je}const pa=6048e5;function fo(){return fo=(0,p.Z)(function*(U){const z=yield function ea(U,z){return ta.apply(this,arguments)}(U.swRegistration,U.vapidKey),te={vapidKey:U.vapidKey,swScope:U.swRegistration.scope,endpoint:z.endpoint,auth:Ls(z.getKey("auth")),p256dh:Ls(z.getKey("p256dh"))},we=yield Qo(U.firebaseDependencies);if(we){if(function Bl(U,z){return z.vapidKey===U.vapidKey&&z.endpoint===U.endpoint&&z.auth===U.auth&&z.p256dh===U.p256dh}(we.subscriptionOptions,te))return Date.now()>=we.createTime+pa?function yl(U,z){return An.apply(this,arguments)}(U,{token:we.token,createTime:Date.now(),subscriptionOptions:te}):we.token;try{yield ho(U.firebaseDependencies,we.token)}catch(je){console.warn(je)}return po(U.firebaseDependencies,te)}return po(U.firebaseDependencies,te)}),fo.apply(this,arguments)}function Xo(){return Xo=(0,p.Z)(function*(U){const z=yield Qo(U.firebaseDependencies);z&&(yield ho(U.firebaseDependencies,z.token),yield function ka(U){return _l.apply(this,arguments)}(U.firebaseDependencies));const te=yield U.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()}),Xo.apply(this,arguments)}function An(){return An=(0,p.Z)(function*(U,z){try{const te=yield function Or(U,z){return Li.apply(this,arguments)}(U.firebaseDependencies,z),we=Object.assign(Object.assign({},z),{token:te,createTime:Date.now()});return yield Zi(U.firebaseDependencies,we),te}catch(te){throw yield function ji(U){return Xo.apply(this,arguments)}(U),te}}),An.apply(this,arguments)}function po(U,z){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(U,z){const we={token:yield Vo(U,z),createTime:Date.now(),subscriptionOptions:z};return yield Zi(U,we),we.token})).apply(this,arguments)}function ta(){return(ta=(0,p.Z)(function*(U,z){return(yield U.pushManager.getSubscription())||U.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ja(z)})})).apply(this,arguments)}function Io(U){const z={from:U.from,collapseKey:U.collapse_key,messageId:U.fcmMessageId};return function ga(U,z){if(!z.notification)return;U.notification={};const te=z.notification.title;te&&(U.notification.title=te);const we=z.notification.body;we&&(U.notification.body=we);const je=z.notification.image;je&&(U.notification.image=je);const tt=z.notification.icon;tt&&(U.notification.icon=tt)}(z,U),function j(U,z){z.data&&(U.data=z.data)}(z,U),function R(U,z){var te,we,je,tt,Ut;if(!(z.fcmOptions||null!==(te=z.notification)&&void 0!==te&&te.click_action))return;U.fcmOptions={};const gn=null!==(je=null===(we=z.fcmOptions)||void 0===we?void 0:we.link)&&void 0!==je?je:null===(tt=z.notification)||void 0===tt?void 0:tt.click_action;gn&&(U.fcmOptions.link=gn);const Tn=null===(Ut=z.fcmOptions)||void 0===Ut?void 0:Ut.analytics_label;Tn&&(U.fcmOptions.analyticsLabel=Tn)}(z,U),z}function oe(U,z){const te=[];for(let we=0;we<U.length;we++)te.push(U.charAt(we)),we<z.length&&te.push(z.charAt(we));return te.join("")}function rn(U){return pr.create("missing-app-config-values",{valueName:U})}oe("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oe("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fr{constructor(z,te,we){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const je=function lt(U){if(!U||!U.options)throw rn("App Configuration Object");if(!U.name)throw rn("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:te}=U;for(const we of z)if(!te[we])throw rn(we);return{appName:U.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:je,installations:te,analyticsProvider:we}}_delete(){return Promise.resolve()}}function Si(U){return bi.apply(this,arguments)}function bi(){return(bi=(0,p.Z)(function*(U){try{U.swRegistration=yield navigator.serviceWorker.register(Vi,{scope:Eo}),U.swRegistration.update().catch(()=>{})}catch(z){throw pr.create("failed-service-worker-registration",{browserErrorMessage:z?.message})}})).apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(U,z){if(!z&&!U.swRegistration&&(yield Si(U)),z||!U.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw pr.create("invalid-sw-registration");U.swRegistration=z}})).apply(this,arguments)}function ma(){return(ma=(0,p.Z)(function*(U,z){z?U.vapidKey=z:U.vapidKey||(U.vapidKey=ks)})).apply(this,arguments)}function li(){return li=(0,p.Z)(function*(U,z){if(!navigator)throw pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pr.create("permission-blocked");return yield function Cs(U,z){return ma.apply(this,arguments)}(U,z?.vapidKey),yield function Qs(U,z){return Xs.apply(this,arguments)}(U,z?.serviceWorkerRegistration),function Fa(U){return fo.apply(this,arguments)}(U)}),li.apply(this,arguments)}function na(){return(na=(0,p.Z)(function*(U,z,te){const we=function ra(U){switch(U){case Fs.NOTIFICATION_CLICKED:return"notification_open";case Fs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(z);(yield U.firebaseDependencies.analyticsProvider.get()).logEvent(we,{message_id:te[uo],message_name:te[ha],message_time:te[wo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ho(){return Ho=(0,p.Z)(function*(U,z){const te=z.data;if(!te.isFirebaseMessaging)return;U.onMessageHandler&&te.messageType===Fs.PUSH_RECEIVED&&("function"==typeof U.onMessageHandler?U.onMessageHandler(Io(te)):U.onMessageHandler.next(Io(te)));const we=te.data;(function L(U){return"object"==typeof U&&!!U&&uo in U})(we)&&"1"===we[ps]&&(yield function Ji(U,z,te){return na.apply(this,arguments)}(U,te.messageType,we))}),Ho.apply(this,arguments)}const _a="@firebase/messaging",ya=U=>{const z=new Fr(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),U.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function vs(U,z){return Ho.apply(this,arguments)}(z,te)),z},$o=U=>{const z=U.getProvider("messaging").getImmediate();return{getToken:we=>function vl(U,z){return li.apply(this,arguments)}(z,we)}};function bl(){return va.apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(){try{yield(0,Me.eu)()}catch{return!1}return typeof window<"u"&&(0,Me.hl)()&&(0,Me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function La(){(0,De._registerComponent)(new xe.wA("messaging",ya,"PUBLIC")),(0,De._registerComponent)(new xe.wA("messaging-internal",$o,"PRIVATE")),(0,De.registerVersion)(_a,"0.12.4"),(0,De.registerVersion)(_a,"0.12.4","esm2017")}();const Vl="analytics",$u="firebase_id",Ai="origin",ui=6e4,ii="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gl="https://www.googletagmanager.com/gtag/js",Oi=new Fe.Yd("@firebase/analytics");function zu(U){return Promise.all(U.map(z=>z.catch(te=>te)))}function il(){return(il=(0,p.Z)(function*(U,z,te,we,je,tt){const Ut=we[je];try{if(Ut)yield z[Ut];else{const Tn=(yield zu(te)).find(Rn=>Rn.measurementId===je);Tn&&(yield z[Tn.appId])}}catch(gn){Oi.error(gn)}U("config",je,tt)})).apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(U,z,te,we,je){try{let tt=[];if(je&&je.send_to){let Ut=je.send_to;Array.isArray(Ut)||(Ut=[Ut]);const gn=yield zu(te);for(const Tn of Ut){const Rn=gn.find(Sn=>Sn.measurementId===Tn),Jn=Rn&&z[Rn.appId];if(!Jn){tt=[];break}tt.push(Jn)}}0===tt.length&&(tt=Object.values(z)),yield Promise.all(tt),U("event",we,je||{})}catch(tt){Oi.error(tt)}})).apply(this,arguments)}const Je=new Me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),St=30,Dt=new class vr{constructor(z={},te=1e3){this.throttleMetadata=z,this.intervalMillis=te}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,te){this.throttleMetadata[z]=te}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function Cn(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function qn(){return(qn=(0,p.Z)(function*(U){var z;const{appId:te,apiKey:we}=U,je={method:"GET",headers:Cn(we)},tt=ii.replace("{app-id}",te),Ut=yield fetch(tt,je);if(200!==Ut.status&&304!==Ut.status){let gn="";try{const Tn=yield Ut.json();null!==(z=Tn.error)&&void 0!==z&&z.message&&(gn=Tn.error.message)}catch{}throw Je.create("config-fetch-failed",{httpStatus:Ut.status,responseMessage:gn})}return Ut.json()})).apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(U,z=Dt,te){const{appId:we,apiKey:je,measurementId:tt}=U.options;if(!we)throw Je.create("no-app-id");if(!je){if(tt)return{measurementId:tt,appId:we};throw Je.create("no-api-key")}const Ut=z.getThrottleMetadata(we)||{backoffCount:0,throttleEndTimeMillis:Date.now()},gn=new si;return setTimeout((0,p.Z)(function*(){gn.abort()}),void 0!==te?te:ui),zo({appId:we,apiKey:je,measurementId:tt},Ut,gn,z)})).apply(this,arguments)}function zo(U,z,te){return zt.apply(this,arguments)}function zt(){return zt=(0,p.Z)(function*(U,{throttleEndTimeMillis:z,backoffCount:te},we,je=Dt){var tt;const{appId:Ut,measurementId:gn}=U;try{yield function it(U,z){return new Promise((te,we)=>{const je=Math.max(z-Date.now(),0),tt=setTimeout(te,je);U.addEventListener(()=>{clearTimeout(tt),we(Je.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(we,z)}catch(Tn){if(gn)return Oi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gn} provided in the "measurementId" field in the local Firebase config. [${Tn?.message}]`),{appId:Ut,measurementId:gn};throw Tn}try{const Tn=yield function zn(U){return qn.apply(this,arguments)}(U);return je.deleteThrottleMetadata(Ut),Tn}catch(Tn){const Rn=Tn;if(!function Ot(U){if(!(U instanceof Me.ZR&&U.customData))return!1;const z=Number(U.customData.httpStatus);return 429===z||500===z||503===z||504===z}(Rn)){if(je.deleteThrottleMetadata(Ut),gn)return Oi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gn} provided in the "measurementId" field in the local Firebase config. [${Rn?.message}]`),{appId:Ut,measurementId:gn};throw Tn}const Jn=503===Number(null===(tt=Rn?.customData)||void 0===tt?void 0:tt.httpStatus)?(0,Me.$s)(te,je.intervalMillis,St):(0,Me.$s)(te,je.intervalMillis),Sn={throttleEndTimeMillis:Date.now()+Jn,backoffCount:te+1};return je.setThrottleMetadata(Ut,Sn),Oi.debug(`Calling attemptFetch again in ${Jn} millis`),zo(U,Sn,we,je)}}),zt.apply(this,arguments)}class si{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}let Co,Fn;function ol(){return(ol=(0,p.Z)(function*(U,z,te,we,je){if(je&&je.global)U("event",te,we);else{const tt=yield z;U("event",te,Object.assign(Object.assign({},we),{send_to:tt}))}})).apply(this,arguments)}function yn(){return(yn=(0,p.Z)(function*(){if(!(0,Me.hl)())return Oi.warn(Je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Me.eu)()}catch(U){return Oi.warn(Je.create("indexeddb-unavailable",{errorInfo:U?.toString()}).message),!1}return!0})).apply(this,arguments)}function lr(){return lr=(0,p.Z)(function*(U,z,te,we,je,tt,Ut){var gn;const Tn=function jt(U){return Zt.apply(this,arguments)}(U);Tn.then(Xi=>{te[Xi.measurementId]=Xi.appId,U.options.measurementId&&Xi.measurementId!==U.options.measurementId&&Oi.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${Xi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xi=>Oi.error(Xi)),z.push(Tn);const Rn=function sr(){return yn.apply(this,arguments)}().then(Xi=>{if(Xi)return we.getId()}),[Jn,Sn]=yield Promise.all([Tn,Rn]);(function re(U){const z=window.document.getElementsByTagName("script");for(const te of Object.values(z))if(te.src&&te.src.includes(Gl)&&te.src.includes(U))return te;return null})(tt)||function Dc(U,z){const te=document.createElement("script");te.src=`${Gl}?l=${U}&id=${z}`,te.async=!0,document.head.appendChild(te)}(tt,Jn.measurementId),Fn&&(je("consent","default",Fn),function wa(U){Fn=U}(void 0)),je("js",new Date);const No=null!==(gn=Ut?.config)&&void 0!==gn?gn:{};return No[Ai]="firebase",No.update=!0,null!=Sn&&(No[$u]=Sn),je("config",Jn.measurementId,No),Co&&(je("set",Co),function du(U){Co=U}(void 0)),Jn.measurementId}),lr.apply(this,arguments)}class Ic{constructor(z){this.app=z}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},tn=[];const Hl={};let hu,Lr,Da="dataLayer",Nr="gtag",Ba=!1;function So(U,z,te){!function Ni(){const U=[];if((0,Me.ru)()&&U.push("This is a browser extension environment."),(0,Me.zI)()||U.push("Cookies are not available."),U.length>0){const z=U.map((we,je)=>`(${je+1}) ${we}`).join(" "),te=Je.create("invalid-analytics-context",{errorInfo:z});Oi.warn(te.message)}}();const we=U.options.appId;if(!we)throw Je.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw Je.create("no-api-key");Oi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cr[we])throw Je.create("already-exists",{id:we});if(!Ba){!function El(U){let z=[];Array.isArray(window[U])?z=window[U]:window[U]=z}(Da);const{wrappedGtag:tt,gtagCore:Ut}=function B(U,z,te,we,je){let tt=function(...Ut){window[we].push(arguments)};return window[je]&&"function"==typeof window[je]&&(tt=window[je]),window[je]=function K(U,z,te,we){function tt(){return tt=(0,p.Z)(function*(Ut,gn,Tn){try{"event"===Ut?yield function sa(U,z,te,we,je){return k.apply(this,arguments)}(U,z,te,gn,Tn):"config"===Ut?yield function jl(U,z,te,we,je,tt){return il.apply(this,arguments)}(U,z,te,we,gn,Tn):"consent"===Ut?U("consent","update",Tn):U("set",gn)}catch(Rn){Oi.error(Rn)}}),tt.apply(this,arguments)}return function je(Ut,gn,Tn){return tt.apply(this,arguments)}}(tt,U,z,te),{gtagCore:tt,wrappedGtag:window[je]}}(Cr,tn,Hl,Da,Nr);Lr=tt,hu=Ut,Ba=!0}return Cr[we]=function Ua(U,z,te,we,je,tt,Ut){return lr.apply(this,arguments)}(U,tn,Hl,z,hu,Da,te),new Ic(U)}function Ku(){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,p.Z)(function*(){if((0,Me.ru)()||!(0,Me.zI)()||!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch{return!1}})).apply(this,arguments)}const Oo="@firebase/analytics";!function Ei(){(0,De._registerComponent)(new xe.wA(Vl,(z,{options:te})=>So(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,De._registerComponent)(new xe.wA("analytics-internal",function U(z){try{const te=z.getProvider(Vl).getImmediate();return{logEvent:(we,je,tt)=>function Ia(U,z,te,we){U=(0,Me.m9)(U),function sl(U,z,te,we,je){return ol.apply(this,arguments)}(Lr,Cr[U.app.options.appId],z,te,we).catch(je=>Oi.error(je))}(te,we,je,tt)}}catch(te){throw Je.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,De.registerVersion)(Oo,"0.9.4"),(0,De.registerVersion)(Oo,"0.9.4","esm2017")}();var Wd=V(4408),Va=V(7565);const go=new class Il extends Va.v{}(class Yu extends Wd.o{constructor(z,te){super(z,te),this.scheduler=z,this.work=te}schedule(z,te=0){return te>0?super.schedule(z,te):(this.delay=te,this.state=z,this.scheduler.flush(this),this)}execute(z,te){return te>0||this.closed?super.execute(z,te):this._execute(z,te)}requestAsyncId(z,te,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(z,te,we):(z.flush(this),0)}});var Ca=V(4986),ul=V(8505),fu=V(5363),ti=V(9468);const pu=new b.GfV("7.5.0"),to="__angularfire_symbol__analyticsIsSupportedValue",Ga="__angularfire_symbol__analyticsIsSupported",Qi="__angularfire_symbol__remoteConfigIsSupportedValue",no="__angularfire_symbol__remoteConfigIsSupported",gu="__angularfire_symbol__messagingIsSupportedValue",T="__angularfire_symbol__messagingIsSupported";function J(U,z,te){if(z){if(1===z.length)return z[0];const tt=z.filter(Ut=>Ut.app===te);if(1===tt.length)return tt[0]}return te.container.getProvider(U).getImmediate({optional:!0})}globalThis[Ga]||(globalThis[Ga]=Ku().then(U=>globalThis[to]=U).catch(()=>globalThis[to]=!1)),globalThis[T]||(globalThis[T]=bl().then(U=>globalThis[gu]=U).catch(()=>globalThis[gu]=!1)),globalThis[no]||(globalThis[no]=fs().then(U=>globalThis[Qi]=U).catch(()=>globalThis[Qi]=!1));const se=(U,z)=>{const te=z?[z]:(0,Z.C6)(),we=[];return te.forEach(je=>{je.container.getProvider(U).instances.forEach(Ut=>{we.includes(Ut)||we.push(Ut)})}),we};function Be(){}class At{constructor(z,te=go){this.zone=z,this.delegate=te}now(){return this.delegate.now()}schedule(z,te,we){const je=this.zone;return this.delegate.schedule(function(Ut){je.runGuarded(()=>{z.apply(this,[Ut])})},te,we)}}class an{constructor(z){this.zone=z,this.task=null}call(z,te){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Be,{},Be,Be)),te.pipe((0,ul.b)({next:we,complete:we,error:we})).subscribe(z).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nn=(()=>{class U{constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new At(Zone.current)),this.insideAngular=te.run(()=>new At(Zone.current,Ca.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return U.\u0275fac=function(te){return new(te||U)(b.LFG(b.R0b))},U.\u0275prov=b.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function Yn(){const U=globalThis.\u0275AngularFireScheduler;if(!U)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return U}function Us(U){return U.pipe((0,fu.Q)(Yn().outsideAngular))}function _o(U){return Yn(),function ja(U){return function(te){return(te=te.lift(new an(U.ngZone))).pipe((0,ti.R)(U.outsideAngular),(0,fu.Q)(U.insideAngular))}}(Yn())(U)}},5114:(Yt,Ke,V)=>{V.d(Ke,{$:()=>el,A:()=>Ee,B:()=>He,G:()=>Ps,H:()=>Fi,J:()=>Te,L:()=>mt,M:()=>Fo,N:()=>Lo,P:()=>Ca,Q:()=>uo,R:()=>ll,T:()=>ha,U:()=>ks,V:()=>Fs,W:()=>Ls,X:()=>gs,Y:()=>Is,Z:()=>Vo,_:()=>Or,a:()=>fn,a0:()=>Fa,a1:()=>ji,a2:()=>yl,a3:()=>po,a4:()=>ea,a5:()=>Bl,a6:()=>ga,a7:()=>j,a8:()=>L,a9:()=>oe,aA:()=>ge,aB:()=>Tn,aC:()=>Us,aD:()=>Zr,aE:()=>Br,aI:()=>Cn,aL:()=>ps,aa:()=>Si,ab:()=>Qs,ac:()=>Cs,af:()=>Ji,ag:()=>ra,ah:()=>vs,ak:()=>Gi,al:()=>ba,an:()=>Gl,ao:()=>il,ap:()=>qe,aq:()=>Ze,ar:()=>me,as:()=>Et,at:()=>Kl,au:()=>Vs,av:()=>vt,aw:()=>gt,ax:()=>ke,ay:()=>Xi,az:()=>bt,b:()=>Je,c:()=>gu,d:()=>P,e:()=>S,f:()=>ja,g:()=>we,h:()=>U,i:()=>yn,j:()=>Ut,k:()=>tf,l:()=>Ur,m:()=>rf,o:()=>Pe,r:()=>Wd,s:()=>qu,u:()=>go});var b=V(5861),Z=V(2090),p=V(9681),De=V(1877),Me=V(655),xe=V(4859);const Pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const He=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},pt=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Nt=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new De.Yd("@firebase/auth");function Ie(A,...v){ut.logLevel<=De.in.ERROR&&ut.error(`Auth (${p.SDK_VERSION}): ${A}`,...v)}function Et(A,...v){throw xt(A,...v)}function gt(A,...v){return xt(A,...v)}function rt(A,v,E){const M=Object.assign(Object.assign({},pt()),{[v]:E});return new Z.LL("auth","Firebase",M).create(v,{appName:A.name})}function Ye(A,v,E){if(!(v instanceof E))throw E.name!==v.constructor.name&&Et(A,"argument-error"),rt(A,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(A,...v){if("string"!=typeof A){const E=v[0],M=[...v.slice(1)];return M[0]&&(M[0].appName=A.name),A._errorFactory.create(E,...M)}return Nt.create(A,...v)}function ke(A,v,...E){if(!A)throw xt(v,...E)}function fe(A){const v="INTERNAL ASSERTION FAILED: "+A;throw Ie(v),new Error(v)}function qe(A,v){A||fe(v)}const ct=new Map;function bt(A){qe(A instanceof Function,"Expected a class definition");let v=ct.get(A);return v?(qe(v instanceof A,"Instance stored in cache mismatched with class"),v):(v=new A,ct.set(A,v),v)}function We(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function st(){return"http:"===$e()||"https:"===$e()}function $e(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class dt{constructor(v,E){this.shortDelay=v,this.longDelay=E,qe(E>v,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rt(A,v){qe(A.emulator,"Emulator should always be set here");const{url:E}=A.emulator;return v?`${E}${v.startsWith("/")?v.slice(1):v}`:E}class Mt{static initialize(v,E,M){this.fetchImpl=v,E&&(this.headersImpl=E),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new dt(3e4,6e4);function Xt(A,v){return A.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:A.tenantId}):v}function ft(A,v,E,M){return bn.apply(this,arguments)}function bn(){return(bn=(0,b.Z)(function*(A,v,E,M,ee={}){return xn(A,ee,(0,b.Z)(function*(){let de={},nt={};M&&("GET"===v?nt=M:de={body:JSON.stringify(M)});const Ft=(0,Z.xO)(Object.assign({key:A.config.apiKey},nt)).slice(1),pn=yield A._getAdditionalHeaders();return pn["Content-Type"]="application/json",A.languageCode&&(pn["X-Firebase-Locale"]=A.languageCode),Mt.fetch()(Wn(A,A.config.apiHost,E,Ft),Object.assign({method:v,headers:pn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function xn(A,v,E){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,b.Z)(function*(A,v,E){A._canInitEmulator=!1;const M=Object.assign(Object.assign({},cn),v);try{const ee=new Ar(A),de=yield Promise.race([E(),ee.promise]);ee.clearNetworkTimeout();const nt=yield de.json();if("needConfirmation"in nt)throw Vn(A,"account-exists-with-different-credential",nt);if(de.ok&&!("errorMessage"in nt))return nt;{const Ft=de.ok?nt.errorMessage:nt.error.message,[pn,On]=Ft.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pn)throw Vn(A,"credential-already-in-use",nt);if("EMAIL_EXISTS"===pn)throw Vn(A,"email-already-in-use",nt);if("USER_DISABLED"===pn)throw Vn(A,"user-disabled",nt);const nr=M[pn]||pn.toLowerCase().replace(/[_\s]+/g,"-");if(On)throw rt(A,nr,On);Et(A,nr)}}catch(ee){if(ee instanceof Z.ZR)throw ee;Et(A,"internal-error",{message:String(ee)})}})).apply(this,arguments)}function Ln(A,v,E,M){return hr.apply(this,arguments)}function hr(){return(hr=(0,b.Z)(function*(A,v,E,M,ee={}){const de=yield ft(A,v,E,M,ee);return"mfaPendingCredential"in de&&Et(A,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function Wn(A,v,E,M){const ee=`${v}${E}?${M}`;return A.config.emulator?Rt(A.config,ee):`${A.config.apiScheme}://${ee}`}class Ar{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((E,M)=>{this.timer=setTimeout(()=>M(gt(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(A,v,E){const M={appName:A.name};E.email&&(M.email=E.email),E.phoneNumber&&(M.phoneNumber=E.phoneNumber);const ee=gt(A,v,M);return ee.customData._tokenResponse=E,ee}function Rr(){return(Rr=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function Dn(){return(Dn=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Zn(){return(Zn=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function Kr(A){if(A)try{const v=new Date(Number(A));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function qr(){return(qr=(0,b.Z)(function*(A,v=!1){const E=(0,Z.m9)(A),M=yield E.getIdToken(v),ee=on(M);ke(ee&&ee.exp&&ee.auth_time&&ee.iat,E.auth,"internal-error");const de="object"==typeof ee.firebase?ee.firebase:void 0,nt=de?.sign_in_provider;return{claims:ee,token:M,authTime:Kr(mn(ee.auth_time)),issuedAtTime:Kr(mn(ee.iat)),expirationTime:Kr(mn(ee.exp)),signInProvider:nt||null,signInSecondFactor:de?.sign_in_second_factor||null}})).apply(this,arguments)}function mn(A){return 1e3*Number(A)}function on(A){const[v,E,M]=A.split(".");if(void 0===v||void 0===E||void 0===M)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const ee=(0,Z.tV)(E);return ee?JSON.parse(ee):(Ie("Failed to decode base64 JWT payload"),null)}catch(ee){return Ie("Caught error parsing JWT payload as JSON",ee?.toString()),null}}function Hn(A,v){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,b.Z)(function*(A,v,E=!1){if(E)return v;try{return yield v}catch(M){throw M instanceof Z.ZR&&function un({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(M)&&A.auth.currentUser===A&&(yield A.auth.signOut()),M}})).apply(this,arguments)}class In{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var E;if(v){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const ee=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,ee)}}schedule(v=!1){var E=this;if(!this.isRunning)return;const M=this.getInterval(v);this.timerId=setTimeout((0,b.Z)(function*(){yield E.iteration()}),M)}iteration(){var v=this;return(0,b.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&v.schedule(!0))}v.schedule()})()}}class or{constructor(v,E){this.createdAt=v,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pr(A){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,b.Z)(function*(A){var v;const E=A.auth,M=yield A.getIdToken(),ee=yield Hn(A,function kt(A,v){return Zn.apply(this,arguments)}(E,{idToken:M}));ke(ee?.users.length,E,"internal-error");const de=ee.users[0];A._notifyReloadListener(de);const nt=null!==(v=de.providerUserInfo)&&void 0!==v&&v.length?function rr(A){return A.map(v=>{var{providerId:E}=v,M=(0,Me._T)(v,["providerId"]);return{providerId:E,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(de.providerUserInfo):[],Ft=function Ci(A,v){return[...A.filter(M=>!v.some(ee=>ee.providerId===M.providerId)),...v]}(A.providerData,nt),nr=!!A.isAnonymous&&!(A.email&&de.passwordHash||Ft?.length),es={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Ft,metadata:new or(de.createdAt,de.lastLoginAt),isAnonymous:nr};Object.assign(A,es)}),Nn.apply(this,arguments)}function Pn(){return(Pn=(0,b.Z)(function*(A){const v=(0,Z.m9)(A);yield Pr(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function It(){return(It=(0,b.Z)(function*(A,v){const E=yield xn(A,{},(0,b.Z)(function*(){const M=(0,Z.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:ee,apiKey:de}=A.config,nt=Wn(A,ee,"/v1/token",`key=${de}`),Ft=yield A._getAdditionalHeaders();return Ft["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(nt,{method:"POST",headers:Ft,body:M})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class Ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){ke(v.idToken,"internal-error"),ke(typeof v.idToken<"u","internal-error"),ke(typeof v.refreshToken<"u","internal-error");const E="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function $t(A){const v=on(A);return ke(v,"internal-error"),ke(typeof v.exp<"u","internal-error"),ke(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,E)}getToken(v,E=!1){var M=this;return(0,b.Z)(function*(){return ke(!M.accessToken||M.refreshToken,v,"user-token-expired"),E||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(v,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,E){var M=this;return(0,b.Z)(function*(){const{accessToken:ee,refreshToken:de,expiresIn:nt}=yield function Lt(A,v){return It.apply(this,arguments)}(v,E);M.updateTokensAndExpiration(ee,de,Number(nt))})()}updateTokensAndExpiration(v,E,M){this.refreshToken=E||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(v,E){const{refreshToken:M,accessToken:ee,expirationTime:de}=E,nt=new Ue;return M&&(ke("string"==typeof M,"internal-error",{appName:v}),nt.refreshToken=M),ee&&(ke("string"==typeof ee,"internal-error",{appName:v}),nt.accessToken=ee),de&&(ke("number"==typeof de,"internal-error",{appName:v}),nt.expirationTime=de),nt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Ue,this.toJSON())}_performRefresh(){return fe("not implemented")}}function ye(A,v){ke("string"==typeof A||typeof A>"u","internal-error",{appName:v})}class Ce{constructor(v){var{uid:E,auth:M,stsTokenManager:ee}=v,de=(0,Me._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new In(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=M,this.stsTokenManager=ee,this.accessToken=ee.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new or(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(v){var E=this;return(0,b.Z)(function*(){const M=yield Hn(E,E.stsTokenManager.getToken(E.auth,v));return ke(M,E.auth,"internal-error"),E.accessToken!==M&&(E.accessToken=M,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),M})()}getIdTokenResult(v){return function xr(A){return qr.apply(this,arguments)}(this,v)}reload(){return function Dr(A){return Pn.apply(this,arguments)}(this)}_assign(v){this!==v&&(ke(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(E=>Object.assign({},E)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const E=new Ce(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return E.metadata._copy(this.metadata),E}_onReload(v){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,E=!1){var M=this;return(0,b.Z)(function*(){let ee=!1;v.idToken&&v.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(v),ee=!0),E&&(yield Pr(M)),yield M.auth._persistUserIfCurrent(M),ee&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var v=this;return(0,b.Z)(function*(){const E=yield v.getIdToken();return yield Hn(v,function _r(A,v){return Rr.apply(this,arguments)}(v.auth,{idToken:E})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,E){var M,ee,de,nt,Ft,pn,On,nr;const es=null!==(M=E.displayName)&&void 0!==M?M:void 0,Cl=null!==(ee=E.email)&&void 0!==ee?ee:void 0,la=null!==(de=E.phoneNumber)&&void 0!==de?de:void 0,cl=null!==(nt=E.photoURL)&&void 0!==nt?nt:void 0,af=null!==(Ft=E.tenantId)&&void 0!==Ft?Ft:void 0,Ko=null!==(pn=E._redirectEventId)&&void 0!==pn?pn:void 0,Qd=null!==(On=E.createdAt)&&void 0!==On?On:void 0,io=null!==(nr=E.lastLoginAt)&&void 0!==nr?nr:void 0,{uid:Mi,emailVerified:Ju,isAnonymous:Qu,providerData:id,stsTokenManager:gp}=E;ke(Mi&&gp,v,"internal-error");const Hi=Ue.fromJSON(this.name,gp);ke("string"==typeof Mi,v,"internal-error"),ye(es,v.name),ye(Cl,v.name),ke("boolean"==typeof Ju,v,"internal-error"),ke("boolean"==typeof Qu,v,"internal-error"),ye(la,v.name),ye(cl,v.name),ye(af,v.name),ye(Ko,v.name),ye(Qd,v.name),ye(io,v.name);const vu=new Ce({uid:Mi,auth:v,email:Cl,emailVerified:Ju,displayName:es,isAnonymous:Qu,photoURL:cl,phoneNumber:la,tenantId:af,stsTokenManager:Hi,createdAt:Qd,lastLoginAt:io});return id&&Array.isArray(id)&&(vu.providerData=id.map(lf=>Object.assign({},lf))),Ko&&(vu._redirectEventId=Ko),vu}static _fromIdTokenResponse(v,E,M=!1){return(0,b.Z)(function*(){const ee=new Ue;ee.updateFromServerResponse(E);const de=new Ce({uid:E.localId,auth:v,stsTokenManager:ee,isAnonymous:M});return yield Pr(de),de})()}}const mt=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(E,M){var ee=this;return(0,b.Z)(function*(){ee.storage[E]=M})()}_get(E){var M=this;return(0,b.Z)(function*(){const ee=M.storage[E];return void 0===ee?null:ee})()}_remove(E){var M=this;return(0,b.Z)(function*(){delete M.storage[E]})()}_addListener(E,M){}_removeListener(E,M){}}return A.type="NONE",A})();function ge(A,v,E){return`firebase:${A}:${v}:${E}`}class pe{constructor(v,E,M){this.persistence=v,this.auth=E,this.userKey=M;const{config:ee,name:de}=this.auth;this.fullUserKey=ge(this.userKey,ee.apiKey,de),this.fullPersistenceKey=ge("persistence",ee.apiKey,de),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,b.Z)(function*(){const E=yield v.persistence._get(v.fullUserKey);return E?Ce._fromJSON(v.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var E=this;return(0,b.Z)(function*(){if(E.persistence===v)return;const M=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=v,M?E.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,E,M="authUser"){return(0,b.Z)(function*(){if(!E.length)return new pe(bt(mt),v,M);const ee=(yield Promise.all(E.map(function(){var On=(0,b.Z)(function*(nr){if(yield nr._isAvailable())return nr});return function(nr){return On.apply(this,arguments)}}()))).filter(On=>On);let de=ee[0]||bt(mt);const nt=ge(M,v.config.apiKey,v.name);let Ft=null;for(const On of E)try{const nr=yield On._get(nt);if(nr){const es=Ce._fromJSON(v,nr);On!==de&&(Ft=es),de=On;break}}catch{}const pn=ee.filter(On=>On._shouldAllowMigration);return de._shouldAllowMigration&&pn.length?(de=pn[0],Ft&&(yield de._set(nt,Ft.toJSON())),yield Promise.all(E.map(function(){var On=(0,b.Z)(function*(nr){if(nr!==de)try{yield nr._remove(nt)}catch{}});return function(nr){return On.apply(this,arguments)}}())),new pe(de,v,M)):new pe(de,v,M)})()}}function ne(A){const v=A.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(ce(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(ie(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(le(v))return"Blackberry";if(Oe(v))return"Webos";if(Q(v))return"Safari";if((v.includes("chrome/")||Le(v))&&!v.includes("edge/"))return"Chrome";if(me(v))return"Android";{const M=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function ie(A=(0,Z.z$)()){return/firefox\//i.test(A)}function Q(A=(0,Z.z$)()){const v=A.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Le(A=(0,Z.z$)()){return/crios\//i.test(A)}function ce(A=(0,Z.z$)()){return/iemobile/i.test(A)}function me(A=(0,Z.z$)()){return/android/i.test(A)}function le(A=(0,Z.z$)()){return/blackberry/i.test(A)}function Oe(A=(0,Z.z$)()){return/webos/i.test(A)}function Ze(A=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function vt(A=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function vn(A=(0,Z.z$)()){return Ze(A)||me(A)||Oe(A)||le(A)||/windows phone/i.test(A)||ce(A)}function Ti(A,v=[]){let E;switch(A){case"Browser":E=ne((0,Z.z$)());break;case"Worker":E=`${ne((0,Z.z$)())}-${A}`;break;default:E=A}const M=v.length?v.join(","):"FirebaseCore-web";return`${E}/JsCore/${p.SDK_VERSION}/${M}`}class Ks{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,E){const M=de=>new Promise((nt,Ft)=>{try{nt(v(de))}catch(pn){Ft(pn)}});M.onAbort=E,this.queue.push(M);const ee=this.queue.length-1;return()=>{this.queue[ee]=()=>Promise.resolve()}}runMiddleware(v){var E=this;return(0,b.Z)(function*(){if(E.auth.currentUser===v)return;const M=[];try{for(const ee of E.queue)yield ee(v),ee.onAbort&&M.push(ee.onAbort)}catch(ee){M.reverse();for(const de of M)try{de()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:ee?.message})}})()}}class qs{constructor(v,E,M){this.app=v,this.heartbeatServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zi(this),this.idTokenSubscription=new zi(this),this.beforeStateQueue=new Ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(v,E){var M=this;return E&&(this._popupRedirectResolver=bt(E)),this._initializationPromise=this.queue((0,b.Z)(function*(){var ee,de;if(!M._deleted&&(M.persistenceManager=yield pe.create(M,v),!M._deleted)){if(null!==(ee=M._popupRedirectResolver)&&void 0!==ee&&ee._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(E),M.lastNotifiedUid=(null===(de=M.currentUser)||void 0===de?void 0:de.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,b.Z)(function*(){if(v._deleted)return;const E=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||E){if(v.currentUser&&E&&v.currentUser.uid===E.uid)return v._currentUser._assign(E),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(E,!0)}})()}initializeCurrentUser(v){var E=this;return(0,b.Z)(function*(){var M;const ee=yield E.assertedPersistence.getCurrentUser();let de=ee,nt=!1;if(v&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const Ft=null===(M=E.redirectUser)||void 0===M?void 0:M._redirectEventId,pn=de?._redirectEventId,On=yield E.tryRedirectSignIn(v);(!Ft||Ft===pn)&&On?.user&&(de=On.user,nt=!0)}if(!de)return E.directlySetCurrentUser(null);if(!de._redirectEventId){if(nt)try{yield E.beforeStateQueue.runMiddleware(de)}catch(Ft){de=ee,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(Ft))}return de?E.reloadAndSetCurrentUserOrClear(de):E.directlySetCurrentUser(null)}return ke(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===de._redirectEventId?E.directlySetCurrentUser(de):E.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(v){var E=this;return(0,b.Z)(function*(){let M=null;try{M=yield E._popupRedirectResolver._completeRedirectFn(E,v,!0)}catch{yield E._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(v){var E=this;return(0,b.Z)(function*(){try{yield Pr(v)}catch(M){if("auth/network-request-failed"!==M?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function wt(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var v=this;return(0,b.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var E=this;return(0,b.Z)(function*(){const M=v?(0,Z.m9)(v):null;return M&&ke(M.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(M&&M._clone(E))})()}_updateCurrentUser(v,E=!1){var M=this;return(0,b.Z)(function*(){if(!M._deleted)return v&&ke(M.tenantId===v.tenantId,M,"tenant-id-mismatch"),E||(yield M.beforeStateQueue.runMiddleware(v)),M.queue((0,b.Z)(function*(){yield M.directlySetCurrentUser(v),M.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,b.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var E=this;return this.queue((0,b.Z)(function*(){yield E.assertedPersistence.setPersistence(bt(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new Z.LL("auth","Firebase",v())}onAuthStateChanged(v,E,M){return this.registerStateListener(this.authStateSubscription,v,E,M)}beforeAuthStateChanged(v,E){return this.beforeStateQueue.pushCallback(v,E)}onIdTokenChanged(v,E,M){return this.registerStateListener(this.idTokenSubscription,v,E,M)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,E){var M=this;return(0,b.Z)(function*(){const ee=yield M.getOrInitRedirectPersistenceManager(E);return null===v?ee.removeCurrentUser():ee.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var E=this;return(0,b.Z)(function*(){if(!E.redirectPersistenceManager){const M=v&&bt(v)||E._popupRedirectResolver;ke(M,E,"argument-error"),E.redirectPersistenceManager=yield pe.create(E,[bt(M._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(v){var E=this;return(0,b.Z)(function*(){var M,ee;return E._isInitialized&&(yield E.queue((0,b.Z)(function*(){}))),(null===(M=E._currentUser)||void 0===M?void 0:M._redirectEventId)===v?E._currentUser:(null===(ee=E.redirectUser)||void 0===ee?void 0:ee._redirectEventId)===v?E.redirectUser:null})()}_persistUserIfCurrent(v){var E=this;return(0,b.Z)(function*(){if(v===E.currentUser)return E.queue((0,b.Z)(function*(){return E.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(E=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,E,M,ee){if(this._deleted)return()=>{};const de="function"==typeof E?E:E.next.bind(E),nt=this._isInitialized?Promise.resolve():this._initializationPromise;return ke(nt,this,"internal-error"),nt.then(()=>de(this.currentUser)),"function"==typeof E?v.addObserver(E,M,ee):v.addObserver(E)}directlySetCurrentUser(v){var E=this;return(0,b.Z)(function*(){E.currentUser&&E.currentUser!==v&&E._currentUser._stopProactiveRefresh(),v&&E.isProactiveRefreshEnabled&&v._startProactiveRefresh(),E.currentUser=v,v?yield E.assertedPersistence.setCurrentUser(v):yield E.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Ti(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,b.Z)(function*(){var E;const M={"X-Client-Version":v.clientVersion};v.app.options.appId&&(M["X-Firebase-gmpid"]=v.app.options.appId);const ee=yield null===(E=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return ee&&(M["X-Firebase-Client"]=ee),M})()}}function Br(A){return(0,Z.m9)(A)}class zi{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,Z.ne)(E=>this.observer=E)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ps(A,v,E){const M=Br(A);ke(M._canInitEmulator,M,"emulator-config-failed"),ke(/^https?:\/\//.test(v),M,"invalid-emulator-scheme");const ee=!!E?.disableWarnings,de=Ys(v),{host:nt,port:Ft}=function $n(A){const v=Ys(A),E=/(\/\/)?([^?#/]+)/.exec(A.substr(v.length));if(!E)return{host:"",port:null};const M=E[2].split("@").pop()||"",ee=/^(\[[^\]]+\])(:|$)/.exec(M);if(ee){const de=ee[1];return{host:de,port:Xr(M.substr(de.length+1))}}{const[de,nt]=M.split(":");return{host:de,port:Xr(nt)}}}(v);M.config.emulator={url:`${de}//${nt}${null===Ft?"":`:${Ft}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:nt,port:Ft,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:ee})}),ee||function ei(){function A(){const v=document.createElement("p"),E=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function Ys(A){const v=A.indexOf(":");return v<0?"":A.substr(0,v+1)}function Xr(A){if(!A)return null;const v=Number(A);return isNaN(v)?null:v}class Fi{constructor(v,E){this.providerId=v,this.signInMethod=E}toJSON(){return fe("not implemented")}_getIdTokenResponse(v){return fe("not implemented")}_linkToIdToken(v,E){return fe("not implemented")}_getReauthenticationResolver(v){return fe("not implemented")}}function Wi(A,v){return ir.apply(this,arguments)}function ir(){return(ir=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:resetPassword",Xt(A,v))})).apply(this,arguments)}function Ki(A,v){return ni.apply(this,arguments)}function ni(){return(ni=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function qt(){return(qt=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:update",Xt(A,v))})).apply(this,arguments)}function ar(){return(ar=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithPassword",Xt(A,v))})).apply(this,arguments)}function kr(A,v){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:sendOobCode",Xt(A,v))})).apply(this,arguments)}function Ir(){return(Ir=(0,b.Z)(function*(A,v){return kr(A,v)})).apply(this,arguments)}function ri(){return(ri=(0,b.Z)(function*(A,v){return kr(A,v)})).apply(this,arguments)}function _n(){return(_n=(0,b.Z)(function*(A,v){return kr(A,v)})).apply(this,arguments)}function _i(){return(_i=(0,b.Z)(function*(A,v){return kr(A,v)})).apply(this,arguments)}function rs(){return(rs=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithEmailLink",Xt(A,v))})).apply(this,arguments)}function is(){return(is=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithEmailLink",Xt(A,v))})).apply(this,arguments)}class Gr extends Fi{constructor(v,E,M,ee=null){super("password",M),this._email=v,this._password=E,this._tenantId=ee}static _fromEmailAndPassword(v,E){return new Gr(v,E,"password")}static _fromEmailAndCode(v,E,M=null){return new Gr(v,E,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(v){var E=this;return(0,b.Z)(function*(){switch(E.signInMethod){case"password":return function En(A,v){return ar.apply(this,arguments)}(v,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function cs(A,v){return rs.apply(this,arguments)}(v,{email:E._email,oobCode:E._password});default:Et(v,"internal-error")}})()}_linkToIdToken(v,E){var M=this;return(0,b.Z)(function*(){switch(M.signInMethod){case"password":return Ki(v,{idToken:E,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function yi(A,v){return is.apply(this,arguments)}(v,{idToken:E,email:M._email,oobCode:M._password});default:Et(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function vi(A,v){return Es.apply(this,arguments)}function Es(){return(Es=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithIdp",Xt(A,v))})).apply(this,arguments)}class Te extends Fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const E=new Te(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(E.idToken=v.idToken),v.accessToken&&(E.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(E.nonce=v.nonce),v.pendingToken&&(E.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(E.accessToken=v.oauthToken,E.secret=v.oauthTokenSecret):Et("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:ee}=E,de=(0,Me._T)(E,["providerId","signInMethod"]);if(!M||!ee)return null;const nt=new Te(M,ee);return nt.idToken=de.idToken||void 0,nt.accessToken=de.accessToken||void 0,nt.secret=de.secret,nt.nonce=de.nonce,nt.pendingToken=de.pendingToken||null,nt}_getIdTokenResponse(v){return vi(v,this.buildRequest())}_linkToIdToken(v,E){const M=this.buildRequest();return M.idToken=E,vi(v,M)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,vi(v,E)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),v.postBody=(0,Z.xO)(E)}return v}}function Ct(){return(Ct=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:sendVerificationCode",Xt(A,v))})).apply(this,arguments)}function hn(){return(hn=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithPhoneNumber",Xt(A,v))})).apply(this,arguments)}function Xn(){return(Xn=(0,b.Z)(function*(A,v){const E=yield Ln(A,"POST","/v1/accounts:signInWithPhoneNumber",Xt(A,v));if(E.temporaryProof)throw Vn(A,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const kn={USER_NOT_FOUND:"user-not-found"};function Yr(){return(Yr=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithPhoneNumber",Xt(A,Object.assign(Object.assign({},v),{operation:"REAUTH"})),kn)})).apply(this,arguments)}class fr extends Fi{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,E){return new fr({verificationId:v,verificationCode:E})}static _fromTokenResponse(v,E){return new fr({phoneNumber:v,temporaryProof:E})}_getIdTokenResponse(v){return function Wt(A,v){return hn.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,E){return function Mn(A,v){return Xn.apply(this,arguments)}(v,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function ws(A,v){return Yr.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:E,verificationId:M,verificationCode:ee}=this.params;return v&&E?{temporaryProof:v,phoneNumber:E}:{sessionInfo:M,code:ee}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:E,verificationCode:M,phoneNumber:ee,temporaryProof:de}=v;return M||E||ee||de?new fr({verificationId:E,verificationCode:M,phoneNumber:ee,temporaryProof:de}):null}}class qi{constructor(v){var E,M,ee,de,nt,Ft;const pn=(0,Z.zd)((0,Z.pd)(v)),On=null!==(E=pn.apiKey)&&void 0!==E?E:null,nr=null!==(M=pn.oobCode)&&void 0!==M?M:null,es=function ds(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ee=pn.mode)&&void 0!==ee?ee:null);ke(On&&nr&&es,"argument-error"),this.apiKey=On,this.operation=es,this.code=nr,this.continueUrl=null!==(de=pn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(nt=pn.languageCode)&&void 0!==nt?nt:null,this.tenantId=null!==(Ft=pn.tenantId)&&void 0!==Ft?Ft:null}static parseLink(v){const E=function hs(A){const v=(0,Z.zd)((0,Z.pd)(A)).link,E=v?(0,Z.zd)((0,Z.pd)(v)).deep_link_id:null,M=(0,Z.zd)((0,Z.pd)(A)).deep_link_id;return(M?(0,Z.zd)((0,Z.pd)(M)).link:null)||M||E||v||A}(v);try{return new qi(E)}catch{return null}}}let Fo=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(E,M){return Gr._fromEmailAndPassword(E,M)}static credentialWithLink(E,M){const ee=qi.parseLink(M);return ke(ee,"argument-error"),Gr._fromEmailAndCode(E,ee.code,ee.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class Vi{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Eo extends Vi{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class ks extends Eo{static credentialFromJSON(v){const E="string"==typeof v?JSON.parse(v):v;return ke("providerId"in E&&"signInMethod"in E,"argument-error"),Te._fromParams(E)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return ke(v.idToken||v.accessToken,"argument-error"),Te._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return ks.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return ks.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:E,oauthAccessToken:M,oauthTokenSecret:ee,pendingToken:de,nonce:nt,providerId:Ft}=v;if(!M&&!ee&&!E&&!de||!Ft)return null;try{return new ks(Ft)._credential({idToken:E,accessToken:M,nonce:nt,pendingToken:de})}catch{return null}}}let Lo=(()=>{class A extends Eo{constructor(){super("facebook.com")}static credential(E){return Te._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return A.credential(E.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),uo=(()=>{class A extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(E,M){return Te._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:M})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:M,oauthAccessToken:ee}=E;if(!M&&!ee)return null;try{return A.credential(M,ee)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),ha=(()=>{class A extends Eo{constructor(){super("github.com")}static credential(E){return Te._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return A.credential(E.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class ps extends Fi{constructor(v,E){super(v,v),this.pendingToken=E}_getIdTokenResponse(v){return vi(v,this.buildRequest())}_linkToIdToken(v,E){const M=this.buildRequest();return M.idToken=E,vi(v,M)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,vi(v,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:M,signInMethod:ee,pendingToken:de}=E;return M&&ee&&de&&M===ee?new ps(M,de):null}static _create(v,E){return new ps(v,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fs extends Vi{constructor(v){ke(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return Fs.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return Fs.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const E=ps.fromJSON(v);return ke(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:E,providerId:M}=v;if(!E||!M)return null;try{return ps._create(M,E)}catch{return null}}}let Ls=(()=>{class A extends Eo{constructor(){super("twitter.com")}static credential(E,M){return Te._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:M})}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:M,oauthTokenSecret:ee}=E;if(!M||!ee)return null;try{return A.credential(M,ee)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Ja(A,v){return fa.apply(this,arguments)}function fa(){return(fa=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signUp",Xt(A,v))})).apply(this,arguments)}class Yi{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,E,M,ee=!1){return(0,b.Z)(function*(){const de=yield Ce._fromIdTokenResponse(v,M,ee),nt=co(M);return new Yi({user:de,providerId:nt,_tokenResponse:M,operationType:E})})()}static _forOperation(v,E,M){return(0,b.Z)(function*(){yield v._updateTokensIfNecessary(M,!0);const ee=co(M);return new Yi({user:v,providerId:ee,_tokenResponse:M,operationType:E})})()}}function co(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function gs(A){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,b.Z)(function*(A){var v;const E=Br(A);if(yield E._initializationPromise,null!==(v=E.currentUser)&&void 0!==v&&v.isAnonymous)return new Yi({user:E.currentUser,providerId:null,operationType:"signIn"});const M=yield Ja(E,{returnSecureToken:!0}),ee=yield Yi._fromIdTokenResponse(E,"signIn",M,!0);return yield E._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Bo extends Z.ZR{constructor(v,E,M,ee){var de;super(E.code,E.message),this.operationType=M,this.user=ee,Object.setPrototypeOf(this,Bo.prototype),this.customData={appName:v.name,tenantId:null!==(de=v.tenantId)&&void 0!==de?de:void 0,_serverResponse:E.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(v,E,M,ee){return new Bo(v,E,M,ee)}}function Qa(A,v,E,M){return("reauthenticate"===v?E._getReauthenticationResolver(A):E._getIdTokenResponse(A)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?Bo._fromErrorAndOperation(A,de,v,M):de})}function jr(A){return new Set(A.map(({providerId:v})=>v).filter(v=>!!v))}function Gi(A,v){return ms.apply(this,arguments)}function ms(){return ms=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A);yield Js(!0,E,v);const{providerUserInfo:M}=yield function en(A,v){return Dn.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[v]}),ee=jr(M||[]);return E.providerData=E.providerData.filter(de=>ee.has(de.providerId)),ee.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),ms.apply(this,arguments)}function Ds(A,v){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,b.Z)(function*(A,v,E=!1){const M=yield Hn(A,v._linkToIdToken(A.auth,yield A.getIdToken()),E);return Yi._forOperation(A,"link",M)})).apply(this,arguments)}function Js(A,v,E){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,b.Z)(function*(A,v,E){yield Pr(v);const ee=!1===A?"provider-already-linked":"no-such-provider";ke(jr(v.providerData).has(E)===A,v.auth,ee)})).apply(this,arguments)}function Xa(A,v){return ka.apply(this,arguments)}function ka(){return(ka=(0,b.Z)(function*(A,v,E=!1){const{auth:M}=A,ee="reauthenticate";try{const de=yield Hn(A,Qa(M,ee,v,A),E);ke(de.idToken,M,"internal-error");const nt=on(de.idToken);ke(nt,M,"internal-error");const{sub:Ft}=nt;return ke(A.uid===Ft,M,"user-mismatch"),Yi._forOperation(A,ee,de)}catch(de){throw"auth/user-not-found"===de?.code&&Et(M,"user-mismatch"),de}})).apply(this,arguments)}function _l(A,v){return _s.apply(this,arguments)}function _s(){return(_s=(0,b.Z)(function*(A,v,E=!1){const M="signIn",ee=yield Qa(A,M,v),de=yield Yi._fromIdTokenResponse(A,M,ee);return E||(yield A._updateCurrentUser(de.user)),de})).apply(this,arguments)}function Is(A,v){return pr.apply(this,arguments)}function pr(){return(pr=(0,b.Z)(function*(A,v){return _l(Br(A),v)})).apply(this,arguments)}function Vo(A,v){return Do.apply(this,arguments)}function Do(){return(Do=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A);return yield Js(!1,E,v.providerId),Ds(E,v)})).apply(this,arguments)}function Or(A,v){return Li.apply(this,arguments)}function Li(){return(Li=(0,b.Z)(function*(A,v){return Xa((0,Z.m9)(A),v)})).apply(this,arguments)}function oi(){return(oi=(0,b.Z)(function*(A,v){return Ln(A,"POST","/v1/accounts:signInWithCustomToken",Xt(A,v))})).apply(this,arguments)}function el(A,v){return Go.apply(this,arguments)}function Go(){return Go=(0,b.Z)(function*(A,v){const E=Br(A),M=yield function ho(A,v){return oi.apply(this,arguments)}(E,{token:v,returnSecureToken:!0}),ee=yield Yi._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(ee.user),ee}),Go.apply(this,arguments)}class ys{constructor(v,E){this.factorId=v,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(v,E){return"phoneInfo"in E?ai._fromServerResponse(v,E):Et(v,"internal-error")}}class ai extends ys{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,E){return new ai(E)}}function pa(A,v,E){var M;ke((null===(M=E.url)||void 0===M?void 0:M.length)>0,A,"invalid-continue-uri"),ke(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),v.continueUrl=E.url,v.dynamicLinkDomain=E.dynamicLinkDomain,v.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(ke(E.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),v.iOSBundleId=E.iOS.bundleId),E.android&&(ke(E.android.packageName.length>0,A,"missing-android-pkg-name"),v.androidInstallApp=E.android.installApp,v.androidMinimumVersionCode=E.android.minimumVersion,v.androidPackageName=E.android.packageName)}function Fa(A,v,E){return fo.apply(this,arguments)}function fo(){return fo=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A),ee={requestType:"PASSWORD_RESET",email:v};E&&pa(M,ee,E),yield function Vr(A,v){return ri.apply(this,arguments)}(M,ee)}),fo.apply(this,arguments)}function ji(A,v,E){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,b.Z)(function*(A,v,E){yield Wi((0,Z.m9)(A),{oobCode:v,newPassword:E})})).apply(this,arguments)}function yl(A,v){return An.apply(this,arguments)}function An(){return An=(0,b.Z)(function*(A,v){yield function mi(A,v){return qt.apply(this,arguments)}((0,Z.m9)(A),{oobCode:v})}),An.apply(this,arguments)}function po(A,v){return jo.apply(this,arguments)}function jo(){return(jo=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A),M=yield Wi(E,{oobCode:v}),ee=M.requestType;switch(ke(ee,E,"internal-error"),ee){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ke(M.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ke(M.mfaInfo,E,"internal-error");default:ke(M.email,E,"internal-error")}let de=null;return M.mfaInfo&&(de=ys._fromServerResponse(Br(E),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:de},operation:ee}})).apply(this,arguments)}function ea(A,v){return ta.apply(this,arguments)}function ta(){return(ta=(0,b.Z)(function*(A,v){const{data:E}=yield po((0,Z.m9)(A),v);return E.email})).apply(this,arguments)}function Bl(A,v,E){return Io.apply(this,arguments)}function Io(){return(Io=(0,b.Z)(function*(A,v,E){const M=Br(A),ee=yield Ja(M,{returnSecureToken:!0,email:v,password:E}),de=yield Yi._fromIdTokenResponse(M,"signIn",ee);return yield M._updateCurrentUser(de.user),de})).apply(this,arguments)}function ga(A,v,E){return Is((0,Z.m9)(A),Fo.credential(v,E))}function j(A,v,E){return R.apply(this,arguments)}function R(){return R=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A),ee={requestType:"EMAIL_SIGNIN",email:v};ke(E.handleCodeInApp,M,"argument-error"),E&&pa(M,ee,E),yield function ko(A,v){return _n.apply(this,arguments)}(M,ee)}),R.apply(this,arguments)}function L(A,v){return"EMAIL_SIGNIN"===qi.parseLink(v)?.operation}function oe(A,v,E){return lt.apply(this,arguments)}function lt(){return(lt=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A),ee=Fo.credentialWithLink(v,E||We());return ke(ee._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Is(M,ee)})).apply(this,arguments)}function Fr(){return(Fr=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:createAuthUri",Xt(A,v))})).apply(this,arguments)}function Si(A,v){return bi.apply(this,arguments)}function bi(){return bi=(0,b.Z)(function*(A,v){const M={identifier:v,continueUri:st()?We():"http://localhost"},{signinMethods:ee}=yield function rn(A,v){return Fr.apply(this,arguments)}((0,Z.m9)(A),M);return ee||[]}),bi.apply(this,arguments)}function Qs(A,v){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,b.Z)(function*(A,v){const E=(0,Z.m9)(A),ee={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};v&&pa(E.auth,ee,v);const{email:de}=yield function yr(A,v){return Ir.apply(this,arguments)}(E.auth,ee);de!==A.email&&(yield A.reload())}),Xs.apply(this,arguments)}function Cs(A,v,E){return ma.apply(this,arguments)}function ma(){return ma=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:v};E&&pa(M.auth,de,E);const{email:nt}=yield function Bi(A,v){return _i.apply(this,arguments)}(M.auth,de);nt!==A.email&&(yield A.reload())}),ma.apply(this,arguments)}function li(){return(li=(0,b.Z)(function*(A,v){return ft(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Ji(A,v){return na.apply(this,arguments)}function na(){return na=(0,b.Z)(function*(A,{displayName:v,photoURL:E}){if(void 0===v&&void 0===E)return;const M=(0,Z.m9)(A),de={idToken:yield M.getIdToken(),displayName:v,photoUrl:E,returnSecureToken:!0},nt=yield Hn(M,function vl(A,v){return li.apply(this,arguments)}(M.auth,de));M.displayName=nt.displayName||null,M.photoURL=nt.photoUrl||null;const Ft=M.providerData.find(({providerId:pn})=>"password"===pn);Ft&&(Ft.displayName=M.displayName,Ft.photoURL=M.photoURL),yield M._updateTokensIfNecessary(nt)}),na.apply(this,arguments)}function ra(A,v){return Ho((0,Z.m9)(A),v,null)}function vs(A,v){return Ho((0,Z.m9)(A),null,v)}function Ho(A,v,E){return _a.apply(this,arguments)}function _a(){return(_a=(0,b.Z)(function*(A,v,E){const{auth:M}=A,de={idToken:yield A.getIdToken(),returnSecureToken:!0};v&&(de.email=v),E&&(de.password=E);const nt=yield Hn(A,Ki(M,de));yield A._updateTokensIfNecessary(nt,!0)})).apply(this,arguments)}class ya{constructor(v,E,M={}){this.isNewUser=v,this.providerId=E,this.profile=M}}class $o extends ya{constructor(v,E,M,ee){super(v,E,M),this.username=ee}}class La extends ya{constructor(v,E){super(v,"facebook.com",E)}}class bl extends $o{constructor(v,E){super(v,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class va extends ya{constructor(v,E){super(v,"google.com",E)}}class tl extends $o{constructor(v,E,M){super(v,"twitter.com",E,M)}}function ba(A){const{user:v,_tokenResponse:E}=A;return v.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Hu(A){var v,E;if(!A)return null;const{providerId:M}=A,ee=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},de=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!M&&A?.idToken){const nt=null===(E=null===(v=on(A.idToken))||void 0===v?void 0:v.firebase)||void 0===E?void 0:E.sign_in_provider;if(nt)return new ya(de,"anonymous"!==nt&&"custom"!==nt?nt:null)}if(!M)return null;switch(M){case"facebook.com":return new La(de,ee);case"github.com":return new bl(de,ee);case"google.com":return new va(de,ee);case"twitter.com":return new tl(de,ee,A.screenName||null);case"custom":case"anonymous":return new ya(de,null);default:return new ya(de,M,ee)}}(E)}class ui{constructor(v,E,M){this.type=v,this.credential=E,this.auth=M}static _fromIdtoken(v,E){return new ui("enroll",v,E)}static _fromMfaPendingCredential(v){return new ui("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var E,M;if(v?.multiFactorSession){if(null!==(E=v.multiFactorSession)&&void 0!==E&&E.pendingCredential)return ui._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(M=v.multiFactorSession)&&void 0!==M&&M.idToken)return ui._fromIdtoken(v.multiFactorSession.idToken)}return null}}class ii{constructor(v,E,M){this.session=v,this.hints=E,this.signInResolver=M}static _fromError(v,E){const M=Br(v),ee=E.customData._serverResponse,de=(ee.mfaInfo||[]).map(Ft=>ys._fromServerResponse(M,Ft));ke(ee.mfaPendingCredential,M,"internal-error");const nt=ui._fromMfaPendingCredential(ee.mfaPendingCredential);return new ii(nt,de,function(){var Ft=(0,b.Z)(function*(pn){const On=yield pn._process(M,nt);delete ee.mfaInfo,delete ee.mfaPendingCredential;const nr=Object.assign(Object.assign({},ee),{idToken:On.idToken,refreshToken:On.refreshToken});switch(E.operationType){case"signIn":const es=yield Yi._fromIdTokenResponse(M,E.operationType,nr);return yield M._updateCurrentUser(es.user),es;case"reauthenticate":return ke(E.user,M,"internal-error"),Yi._forOperation(E.user,E.operationType,nr);default:Et(M,"internal-error")}});return function(pn){return Ft.apply(this,arguments)}}())}resolveSignIn(v){var E=this;return(0,b.Z)(function*(){return E.signInResolver(v)})()}}function Gl(A,v){var E;const M=(0,Z.m9)(A),ee=v;return ke(v.customData.operationType,M,"argument-error"),ke(null===(E=ee.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,M,"argument-error"),ii._fromError(M,ee)}class El{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(M=>ys._fromServerResponse(v.auth,M)))})}static _fromUser(v){return new El(v)}getSession(){var v=this;return(0,b.Z)(function*(){return ui._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,E){var M=this;return(0,b.Z)(function*(){const ee=v,de=yield M.getSession(),nt=yield Hn(M.user,ee._process(M.user.auth,de,E));return yield M.user._updateTokensIfNecessary(nt),M.user.reload()})()}unenroll(v){var E=this;return(0,b.Z)(function*(){const M="string"==typeof v?v:v.uid,ee=yield E.user.getIdToken();try{const de=yield Hn(E.user,function Dc(A,v){return ft(A,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(A,v))}(E.user.auth,{idToken:ee,mfaEnrollmentId:M}));E.enrolledFactors=E.enrolledFactors.filter(({uid:nt})=>nt!==M),yield E.user._updateTokensIfNecessary(de),yield E.user.reload()}catch(de){throw de}})()}}const jl=new WeakMap;function il(A){const v=(0,Z.m9)(A);return jl.has(v)||jl.set(v,El._fromUser(v)),jl.get(v)}const sa="__sak";class k{constructor(v,E){this.storageRetriever=v,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,E){return this.storage.setItem(v,JSON.stringify(E)),Promise.resolve()}_get(v){const E=this.storage.getItem(v);return Promise.resolve(E?JSON.parse(E):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const Je=(()=>{class A extends k{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,M)=>this.onStorageEvent(E,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function K(){const A=(0,Z.z$)();return Q(A)||Ze(A)}()&&function gi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const M of Object.keys(this.listeners)){const ee=this.storage.getItem(M),de=this.localCache[M];ee!==de&&E(M,de,ee)}}onStorageEvent(E,M=!1){if(!E.key)return void this.forAllChangedKeys((Ft,pn,On)=>{this.notifyListeners(Ft,On)});const ee=E.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ft=this.storage.getItem(ee);if(E.newValue!==Ft)null!==E.newValue?this.storage.setItem(ee,E.newValue):this.storage.removeItem(ee);else if(this.localCache[ee]===E.newValue&&!M)return}const de=()=>{const Ft=this.storage.getItem(ee);!M&&this.localCache[ee]===Ft||this.notifyListeners(ee,Ft)},nt=this.storage.getItem(ee);!function Ht(){return(0,Z.w1)()&&10===document.documentMode}()||nt===E.newValue||E.newValue===E.oldValue?de():setTimeout(de,10)}notifyListeners(E,M){this.localCache[E]=M;const ee=this.listeners[E];if(ee)for(const de of Array.from(ee))de(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,M,ee)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:M,newValue:ee}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,M){var ee=()=>super._set,de=this;return(0,b.Z)(function*(){yield ee().call(de,E,M),de.localCache[E]=JSON.stringify(M)})()}_get(E){var M=()=>super._get,ee=this;return(0,b.Z)(function*(){const de=yield M().call(ee,E);return ee.localCache[E]=JSON.stringify(de),de})()}_remove(E){var M=()=>super._remove,ee=this;return(0,b.Z)(function*(){yield M().call(ee,E),delete ee.localCache[E]})()}}return A.type="LOCAL",A})(),fn=(()=>{class A extends k{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,M){}_removeListener(E,M){}}return A.type="SESSION",A})();let Dt=(()=>{class A{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const M=this.receivers.find(de=>de.isListeningto(E));if(M)return M;const ee=new A(E);return this.receivers.push(ee),ee}isListeningto(E){return this.eventTarget===E}handleEvent(E){var M=this;return(0,b.Z)(function*(){const ee=E,{eventId:de,eventType:nt,data:Ft}=ee.data,pn=M.handlersMap[nt];if(!pn?.size)return;ee.ports[0].postMessage({status:"ack",eventId:de,eventType:nt});const On=Array.from(pn).map(function(){var es=(0,b.Z)(function*(Cl){return Cl(ee.origin,Ft)});return function(Cl){return es.apply(this,arguments)}}()),nr=yield function vr(A){return Promise.all(A.map(function(){var v=(0,b.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(M){return{fulfilled:!1,reason:M}}});return function(E){return v.apply(this,arguments)}}()))}(On);ee.ports[0].postMessage({status:"done",eventId:de,eventType:nt,response:nr})})()}_subscribe(E,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(M)}_unsubscribe(E,M){this.handlersMap[E]&&M&&this.handlersMap[E].delete(M),(!M||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function Cn(A="",v=10){let E="";for(let M=0;M<v;M++)E+=Math.floor(10*Math.random());return A+E}class zn{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,E,M=50){var ee=this;return(0,b.Z)(function*(){const de=typeof MessageChannel<"u"?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let nt,Ft;return new Promise((pn,On)=>{const nr=Cn("",20);de.port1.start();const es=setTimeout(()=>{On(new Error("unsupported_event"))},M);Ft={messageChannel:de,onMessage(Cl){const la=Cl;if(la.data.eventId===nr)switch(la.data.status){case"ack":clearTimeout(es),nt=setTimeout(()=>{On(new Error("timeout"))},3e3);break;case"done":clearTimeout(nt),pn(la.data.response);break;default:clearTimeout(es),clearTimeout(nt),On(new Error("invalid_response"))}}},ee.handlers.add(Ft),de.port1.addEventListener("message",Ft.onMessage),ee.target.postMessage({eventType:v,eventId:nr,data:E},[de.port2])}).finally(()=>{Ft&&ee.removeMessageHandler(Ft)})})()}}function qn(){return window}function Zt(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function zt(){return(zt=(0,b.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const si="firebaseLocalStorageDb",Co=1,sl="firebaseLocalStorage",ol="fbase_key";class al{constructor(v){this.request=v}toPromise(){return new Promise((v,E)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function Ea(A,v){return A.transaction([sl],v?"readwrite":"readonly").objectStore(sl)}function oa(){const A=indexedDB.open(si,Co);return new Promise((v,E)=>{A.addEventListener("error",()=>{E(A.error)}),A.addEventListener("upgradeneeded",()=>{const M=A.result;try{M.createObjectStore(sl,{keyPath:ol})}catch(ee){E(ee)}}),A.addEventListener("success",(0,b.Z)(function*(){const M=A.result;M.objectStoreNames.contains(sl)?v(M):(M.close(),yield function zd(){const A=indexedDB.deleteDatabase(si);return new al(A).toPromise()}(),v(yield oa()))}))})}function Wu(A,v,E){return cu.apply(this,arguments)}function cu(){return(cu=(0,b.Z)(function*(A,v,E){const M=Ea(A,!0).put({[ol]:v,value:E});return new al(M).toPromise()})).apply(this,arguments)}function wl(){return(wl=(0,b.Z)(function*(A,v){const E=Ea(A,!1).get(v),M=yield new al(E).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Fn(A,v){const E=Ea(A,!0).delete(v);return new al(E).toPromise()}const yn=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,b.Z)(function*(){return E.db||(E.db=yield oa()),E.db})()}_withRetries(E){var M=this;return(0,b.Z)(function*(){let ee=0;for(;;)try{const de=yield M._openDb();return yield E(de)}catch(de){if(ee++>3)throw de;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,b.Z)(function*(){return Zt()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,b.Z)(function*(){E.receiver=Dt._getInstance(function Ot(){return Zt()?self:null}()),E.receiver._subscribe("keyChanged",function(){var M=(0,b.Z)(function*(ee,de){return{keyProcessed:(yield E._poll()).includes(de.key)}});return function(ee,de){return M.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var M=(0,b.Z)(function*(ee,de){return["keyChanged"]});return function(ee,de){return M.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,b.Z)(function*(){var M,ee;if(E.activeServiceWorker=yield function zo(){return zt.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new zn(E.activeServiceWorker);const de=yield E.sender._send("ping",{},800);de&&null!==(M=de[0])&&void 0!==M&&M.fulfilled&&null!==(ee=de[0])&&void 0!==ee&&ee.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var M=this;return(0,b.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function it(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:E},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const E=yield oa();return yield Wu(E,sa,"1"),yield Fn(E,sa),!0}catch{}return!1})()}_withPendingWrite(E){var M=this;return(0,b.Z)(function*(){M.pendingWrites++;try{yield E()}finally{M.pendingWrites--}})()}_set(E,M){var ee=this;return(0,b.Z)(function*(){return ee._withPendingWrite((0,b.Z)(function*(){return yield ee._withRetries(de=>Wu(de,E,M)),ee.localCache[E]=M,ee.notifyServiceWorker(E)}))})()}_get(E){var M=this;return(0,b.Z)(function*(){const ee=yield M._withRetries(de=>function To(A,v){return wl.apply(this,arguments)}(de,E));return M.localCache[E]=ee,ee})()}_remove(E){var M=this;return(0,b.Z)(function*(){return M._withPendingWrite((0,b.Z)(function*(){return yield M._withRetries(ee=>Fn(ee,E)),delete M.localCache[E],M.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,b.Z)(function*(){const M=yield E._withRetries(nt=>{const Ft=Ea(nt,!1).getAll();return new al(Ft).toPromise()});if(!M)return[];if(0!==E.pendingWrites)return[];const ee=[],de=new Set;for(const{fbase_key:nt,value:Ft}of M)de.add(nt),JSON.stringify(E.localCache[nt])!==JSON.stringify(Ft)&&(E.notifyListeners(nt,Ft),ee.push(nt));for(const nt of Object.keys(E.localCache))E.localCache[nt]&&!de.has(nt)&&(E.notifyListeners(nt,null),ee.push(nt));return ee})()}notifyListeners(E,M){this.localCache[E]=M;const ee=this.listeners[E];if(ee)for(const de of Array.from(ee))de(M)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function Cr(){return(Cr=(0,b.Z)(function*(A){return(yield ft(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Hl(A){return new Promise((v,E)=>{const M=document.createElement("script");M.setAttribute("src",A),M.onload=v,M.onerror=ee=>{const de=gt("internal-error");de.customData=ee,E(de)},M.type="text/javascript",M.charset="UTF-8",function tn(){var A,v;return null!==(v=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==v?v:document}().appendChild(M)})}function Da(A){return`__${A}${Math.floor(1e6*Math.random())}`}const Lr=1e12;class Ba{constructor(v){this.auth=v,this.counter=Lr,this._widgets=new Map}render(v,E){const M=this.counter;return this._widgets.set(M,new gr(v,this.auth.name,E||{})),this.counter++,M}reset(v){var E;const M=v||Lr;null===(E=this._widgets.get(M))||void 0===E||E.delete(),this._widgets.delete(M)}getResponse(v){var E;return(null===(E=this._widgets.get(v||Lr))||void 0===E?void 0:E.getResponse())||""}execute(v){var E=this;return(0,b.Z)(function*(){var M;return null===(M=E._widgets.get(v||Lr))||void 0===M||M.execute(),""})()}}class gr{constructor(v,E,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ee="string"==typeof v?document.getElementById(v):v;ke(ee,"argument-error",{appName:E}),this.container=ee,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ni(A){const v=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<A;M++)v.push(E.charAt(Math.floor(Math.random()*E.length)));return v.join("")}(50);const{callback:v,"expired-callback":E}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const So=Da("rcb"),xi=new dt(3e4,6e4);class Ku{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=qn().grecaptcha)||void 0===v||!v.render)}load(v,E=""){return ke(function Dl(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(E),v,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(qn().grecaptcha):new Promise((M,ee)=>{const de=qn().setTimeout(()=>{ee(gt(v,"network-request-failed"))},xi.get());qn()[So]=()=>{qn().clearTimeout(de),delete qn()[So];const Ft=qn().grecaptcha;if(!Ft)return void ee(gt(v,"internal-error"));const pn=Ft.render;Ft.render=(On,nr)=>{const es=pn(On,nr);return this.counter++,es},this.hostLanguage=E,M(Ft)},Hl(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:So,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(de),ee(gt(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var E;return!(null===(E=qn().grecaptcha)||void 0===E||!E.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wo{load(v){return(0,b.Z)(function*(){return new Ba(v)})()}clearedOneInstance(){}}const eo="recaptcha",ot={theme:"light",type:"image"};class ll{constructor(v,E=Object.assign({},ot),M){this.parameters=E,this.type=eo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Br(M),this.isInvisible="invisible"===this.parameters.size,ke(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ee="string"==typeof v?document.getElementById(v):v;ke(ee,this.auth,"argument-error"),this.container=ee,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wo:new Ku,this.validateStartingState()}verify(){var v=this;return(0,b.Z)(function*(){v.assertNotDestroyed();const E=yield v.render(),M=v.getAssertedRecaptcha();return M.getResponse(E)||new Promise(de=>{const nt=Ft=>{Ft&&(v.tokenChangeListeners.delete(nt),de(Ft))};v.tokenChangeListeners.add(nt),v.isInvisible&&M.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){ke(!this.parameters.sitekey,this.auth,"argument-error"),ke(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ke(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return E=>{if(this.tokenChangeListeners.forEach(M=>M(E)),"function"==typeof v)v(E);else if("string"==typeof v){const M=qn()[v];"function"==typeof M&&M(E)}}}assertNotDestroyed(){ke(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,b.Z)(function*(){if(yield v.init(),!v.widgetId){let E=v.container;if(!v.isInvisible){const M=document.createElement("div");E.appendChild(M),E=M}v.widgetId=v.getAssertedRecaptcha().render(E,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,b.Z)(function*(){ke(st()&&!Zt(),v.auth,"internal-error"),yield function Ao(){let A=null;return new Promise(v=>{"complete"!==document.readyState?(A=()=>v(),window.addEventListener("load",A)):v()}).catch(v=>{throw A&&window.removeEventListener("load",A),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const E=yield function Ic(A){return Cr.apply(this,arguments)}(v.auth);ke(E,v.auth,"internal-error"),v.parameters.sitekey=E})()}getAssertedRecaptcha(){return ke(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ia{constructor(v,E){this.verificationId=v,this.onConfirmation=E}confirm(v){const E=fr._fromVerification(this.verificationId,v);return this.onConfirmation(E)}}function qu(A,v,E){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,b.Z)(function*(A,v,E){const M=Br(A),ee=yield Va(M,v,(0,Z.m9)(E));return new Ia(ee,de=>Is(M,de))})).apply(this,arguments)}function Ur(A,v,E){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A);yield Js(!1,M,"phone");const ee=yield Va(M.auth,v,(0,Z.m9)(E));return new Ia(ee,de=>Vo(M,de))})).apply(this,arguments)}function Wd(A,v,E){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A),ee=yield Va(M.auth,v,(0,Z.m9)(E));return new Ia(ee,de=>Or(M,de))})).apply(this,arguments)}function Va(A,v,E){return Il.apply(this,arguments)}function Il(){return Il=(0,b.Z)(function*(A,v,E){var M;const ee=yield E.verify();try{let de;if(ke("string"==typeof ee,A,"argument-error"),ke(E.type===eo,A,"argument-error"),de="string"==typeof v?{phoneNumber:v}:v,"session"in de){const nt=de.session;if("phoneNumber"in de)return ke("enroll"===nt.type,A,"internal-error"),(yield function Oi(A,v){return ft(A,"POST","/v2/accounts/mfaEnrollment:start",Xt(A,v))}(A,{idToken:nt.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:ee}})).phoneSessionInfo.sessionInfo;{ke("signin"===nt.type,A,"internal-error");const Ft=(null===(M=de.multiFactorHint)||void 0===M?void 0:M.uid)||de.multiFactorUid;return ke(Ft,A,"missing-multi-factor-info"),(yield function Ua(A,v){return ft(A,"POST","/v2/accounts/mfaSignIn:start",Xt(A,v))}(A,{mfaPendingCredential:nt.credential,mfaEnrollmentId:Ft,phoneSignInInfo:{recaptchaToken:ee}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:nt}=yield function Xe(A,v){return Ct.apply(this,arguments)}(A,{phoneNumber:de.phoneNumber,recaptchaToken:ee});return nt}}finally{E._reset()}}),Il.apply(this,arguments)}function go(A,v){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,b.Z)(function*(A,v){yield Ds((0,Z.m9)(A),v)})).apply(this,arguments)}let Ca=(()=>{class A{constructor(E){this.providerId=A.PROVIDER_ID,this.auth=Br(E)}verifyPhoneNumber(E,M){return Va(this.auth,E,(0,Z.m9)(M))}static credential(E,M){return fr._fromVerification(E,M)}static credentialFromResult(E){return A.credentialFromTaggedObject(E)}static credentialFromError(E){return A.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:M,temporaryProof:ee}=E;return M&&ee?fr._fromTokenResponse(M,ee):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function ul(A,v){return v?bt(v):(ke(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class fu extends Fi{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return vi(v,this._buildIdpRequest())}_linkToIdToken(v,E){return vi(v,this._buildIdpRequest(E))}_getReauthenticationResolver(v){return vi(v,this._buildIdpRequest())}_buildIdpRequest(v){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(E.idToken=v),E}}function ti(A){return _l(A.auth,new fu(A),A.bypassAuthState)}function pu(A){const{auth:v,user:E}=A;return ke(E,v,"internal-error"),Xa(E,new fu(A),A.bypassAuthState)}function to(A){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,b.Z)(function*(A){const{auth:v,user:E}=A;return ke(E,v,"internal-error"),Ds(E,new fu(A),A.bypassAuthState)})).apply(this,arguments)}class Qi{constructor(v,E,M,ee,de=!1){this.auth=v,this.resolver=M,this.user=ee,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var v=this;return new Promise(function(){var E=(0,b.Z)(function*(M,ee){v.pendingPromise={resolve:M,reject:ee};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(de){v.reject(de)}});return function(M,ee){return E.apply(this,arguments)}}())}onAuthEvent(v){var E=this;return(0,b.Z)(function*(){const{urlResponse:M,sessionId:ee,postBody:de,tenantId:nt,error:Ft,type:pn}=v;if(Ft)return void E.reject(Ft);const On={auth:E.auth,requestUri:M,sessionId:ee,tenantId:nt||void 0,postBody:de||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(pn)(On))}catch(nr){E.reject(nr)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return ti;case"linkViaPopup":case"linkViaRedirect":return to;case"reauthViaPopup":case"reauthViaRedirect":return pu;default:Et(this.auth,"internal-error")}}resolve(v){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const no=new dt(2e3,1e4);function gu(A,v,E){return T.apply(this,arguments)}function T(){return(T=(0,b.Z)(function*(A,v,E){const M=Br(A);Ye(A,v,Vi);const ee=ul(M,E);return new J(M,"signInViaPopup",v,ee).executeNotNull()})).apply(this,arguments)}function S(A,v,E){return D.apply(this,arguments)}function D(){return(D=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A);Ye(M.auth,v,Vi);const ee=ul(M.auth,E);return new J(M.auth,"reauthViaPopup",v,ee,M).executeNotNull()})).apply(this,arguments)}function P(A,v,E){return $.apply(this,arguments)}function $(){return($=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A);Ye(M.auth,v,Vi);const ee=ul(M.auth,E);return new J(M.auth,"linkViaPopup",v,ee,M).executeNotNull()})).apply(this,arguments)}let J=(()=>{class A extends Qi{constructor(E,M,ee,de,nt){super(E,M,de,nt),this.provider=ee,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var E=this;return(0,b.Z)(function*(){const M=yield E.execute();return ke(M,E.auth,"internal-error"),M})()}onExecution(){var E=this;return(0,b.Z)(function*(){qe(1===E.filter.length,"Popup operations only handle one event");const M=Cn();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],M),E.authWindow.associatedEvent=M,E.resolver._originValidation(E.auth).catch(ee=>{E.reject(ee)}),E.resolver._isIframeWebStorageSupported(E.auth,ee=>{ee||E.reject(gt(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const E=()=>{var M,ee;this.pollId=null!==(ee=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==ee&&ee.closed?window.setTimeout(()=>{this.pollId=null,this.reject(gt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,no.get())};E()}}return A.currentPopupAction=null,A})();const se="pendingRedirect",Be=new Map;class At extends Qi{constructor(v,E,M=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,M),this.eventId=null}execute(){var v=()=>super.execute,E=this;return(0,b.Z)(function*(){let M=Be.get(E.auth._key());if(!M){try{const de=(yield function an(A,v){return nn.apply(this,arguments)}(E.resolver,E.auth))?yield v().call(E):null;M=()=>Promise.resolve(de)}catch(ee){M=()=>Promise.reject(ee)}Be.set(E.auth._key(),M)}return E.bypassAuthState||Be.set(E.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(v){var E=()=>super.onAuthEvent,M=this;return(0,b.Z)(function*(){if("signInViaRedirect"===v.type)return E().call(M,v);if("unknown"!==v.type){if(v.eventId){const ee=yield M.auth._redirectUserForId(v.eventId);if(ee)return M.user=ee,E().call(M,v);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function nn(){return(nn=(0,b.Z)(function*(A,v){const E=_o(v),M=mo(A);if(!(yield M._isAvailable()))return!1;const ee="true"===(yield M._get(E));return yield M._remove(E),ee})).apply(this,arguments)}function Yn(A,v){return ci.apply(this,arguments)}function ci(){return(ci=(0,b.Z)(function*(A,v){return mo(A)._set(_o(v),"true")})).apply(this,arguments)}function Zr(){Be.clear()}function Us(A,v){Be.set(A._key(),v)}function mo(A){return bt(A._redirectPersistence)}function _o(A){return ge(se,A.config.apiKey,A.name)}function ja(A,v,E){return function di(A,v,E){return Bs.apply(this,arguments)}(A,v,E)}function Bs(){return(Bs=(0,b.Z)(function*(A,v,E){const M=Br(A);Ye(A,v,Vi),yield M._initializationPromise;const ee=ul(M,E);return yield Yn(ee,M),ee._openRedirect(M,v,"signInViaRedirect")})).apply(this,arguments)}function U(A,v,E){return function z(A,v,E){return te.apply(this,arguments)}(A,v,E)}function te(){return(te=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A);Ye(M.auth,v,Vi),yield M.auth._initializationPromise;const ee=ul(M.auth,E);yield Yn(ee,M.auth);const de=yield Jn(M);return ee._openRedirect(M.auth,v,"reauthViaRedirect",de)})).apply(this,arguments)}function we(A,v,E){return function je(A,v,E){return tt.apply(this,arguments)}(A,v,E)}function tt(){return(tt=(0,b.Z)(function*(A,v,E){const M=(0,Z.m9)(A);Ye(M.auth,v,Vi),yield M.auth._initializationPromise;const ee=ul(M.auth,E);yield Js(!1,M,v.providerId),yield Yn(ee,M.auth);const de=yield Jn(M);return ee._openRedirect(M.auth,v,"linkViaRedirect",de)})).apply(this,arguments)}function Ut(A,v){return gn.apply(this,arguments)}function gn(){return(gn=(0,b.Z)(function*(A,v){return yield Br(A)._initializationPromise,Tn(A,v,!1)})).apply(this,arguments)}function Tn(A,v){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,b.Z)(function*(A,v,E=!1){const M=Br(A),ee=ul(M,v),nt=yield new At(M,ee,E).execute();return nt&&!E&&(delete nt.user._redirectEventId,yield M._persistUserIfCurrent(nt.user),yield M._setRedirectUser(null,v)),nt})).apply(this,arguments)}function Jn(A){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,b.Z)(function*(A){const v=Cn(`${A.uid}:::`);return A._redirectEventId=v,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),v})).apply(this,arguments)}class Xi{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let E=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(v,M)&&(E=!0,this.sendToConsumer(v,M),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function Hr(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return er(A);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=v,E=!0)),E}sendToConsumer(v,E){var M;if(v.error&&!er(v)){const ee=(null===(M=v.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";E.onError(gt(this.auth,ee))}else E.onAuthEvent(v)}isEventForConsumer(v,E){const M=null===E.eventId||!!v.eventId&&v.eventId===E.eventId;return E.filter.includes(v.type)&&M}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($l(v))}saveEventToCache(v){this.cachedEventUids.add($l(v)),this.lastProcessedEventTime=Date.now()}}function $l(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(v=>v).join("-")}function er({type:A,error:v}){return"unknown"===A&&"auth/no-auth-event"===v?.code}function Vs(A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,b.Z)(function*(A,v={}){return ft(A,"GET","/v1/projects",v)})).apply(this,arguments)}const Cc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zu=/^https?/;function Kd(){return(Kd=(0,b.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:v}=yield Vs(A);for(const E of v)try{if(Jh(E))return}catch{}Et(A,"unauthorized-domain")})).apply(this,arguments)}function Jh(A){const v=We(),{protocol:E,hostname:M}=new URL(v);if(A.startsWith("chrome-extension://")){const nt=new URL(A);return""===nt.hostname&&""===M?"chrome-extension:"===E&&A.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===E&&nt.hostname===M}if(!Zu.test(E))return!1;if(Cc.test(A))return M===A;const ee=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ee+"|"+ee+")$","i").test(M)}const Jg=new dt(3e4,6e4);function Tr(){const A=qn().___jsl;if(A?.H)for(const v of Object.keys(A.H))if(A.H[v].r=A.H[v].r||[],A.H[v].L=A.H[v].L||[],A.H[v].r=[...A.H[v].L],A.CP)for(let E=0;E<A.CP.length;E++)A.CP[E]=null}let Tc=null;const Xc=new dt(5e3,15e3),Qg="__/auth/iframe",Xg="emulator/auth/iframe",ed={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qh(A){const v=A.config;ke(v.authDomain,A,"auth-domain-config-required");const E=v.emulator?Rt(v,Xg):`https://${A.config.authDomain}/${Qg}`,M={apiKey:v.apiKey,appName:A.name,v:p.SDK_VERSION},ee=mu.get(A.config.apiHost);ee&&(M.eid=ee);const de=A._getFrameworks();return de.length&&(M.fw=de.join(",")),`${E}?${(0,Z.xO)(M).slice(1)}`}function td(){return td=(0,b.Z)(function*(A){const v=yield function pp(A){return Tc=Tc||function ry(A){return new Promise((v,E)=>{var M,ee,de;function nt(){Tr(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{Tr(),E(gt(A,"network-request-failed"))},timeout:Jg.get()})}if(null!==(ee=null===(M=qn().gapi)||void 0===M?void 0:M.iframes)&&void 0!==ee&&ee.Iframe)v(gapi.iframes.getContext());else{if(null===(de=qn().gapi)||void 0===de||!de.load){const Ft=Da("iframefcb");return qn()[Ft]=()=>{gapi.load?nt():E(gt(A,"network-request-failed"))},Hl(`https://apis.google.com/js/api.js?onload=${Ft}`).catch(pn=>E(pn))}nt()}}).catch(v=>{throw Tc=null,v})}(A),Tc}(A),E=qn().gapi;return ke(E,A,"internal-error"),v.open({where:document.body,url:Qh(A),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ed,dontclear:!0},M=>new Promise(function(){var ee=(0,b.Z)(function*(de,nt){yield M.restyle({setHideOnLeave:!1});const Ft=gt(A,"network-request-failed"),pn=qn().setTimeout(()=>{nt(Ft)},Xc.get());function On(){qn().clearTimeout(pn),de(M)}M.ping(On).then(On,()=>{nt(Ft)})});return function(de,nt){return ee.apply(this,arguments)}}()))}),td.apply(this,arguments)}const Mo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pi=500,qd=600,Wl="_blank",Ro="http://localhost";class Ss{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const em="__/auth/handler",ef="emulator/auth/handler";function Kl(A,v,E,M,ee,de){ke(A.config.authDomain,A,"auth-domain-config-required"),ke(A.config.apiKey,A,"invalid-api-key");const nt={apiKey:A.config.apiKey,appName:A.name,authType:E,redirectUrl:M,v:p.SDK_VERSION,eventId:ee};if(v instanceof Vi){v.setDefaultLanguage(A.languageCode),nt.providerId=v.providerId||"",(0,Z.xb)(v.getCustomParameters())||(nt.customParameters=JSON.stringify(v.getCustomParameters()));for(const[pn,On]of Object.entries(de||{}))nt[pn]=On}if(v instanceof Eo){const pn=v.getScopes().filter(On=>""!==On);pn.length>0&&(nt.scopes=pn.join(","))}A.tenantId&&(nt.tid=A.tenantId);const Ft=nt;for(const pn of Object.keys(Ft))void 0===Ft[pn]&&delete Ft[pn];return`${function Sc({config:A}){return A.emulator?Rt(A,ef):`https://${A.authDomain}/${em}`}(A)}?${(0,Z.xO)(Ft).slice(1)}`}const _u="webStorageSupport",tf=class Yd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fn,this._completeRedirectFn=Tn,this._overrideRedirectResult=Us}_openPopup(v,E,M,ee){var de=this;return(0,b.Z)(function*(){var nt;qe(null===(nt=de.eventManagers[v._key()])||void 0===nt?void 0:nt.manager,"_initialize() not called before _openPopup()");const Ft=Kl(v,E,M,We(),ee);return function Xh(A,v,E,M=pi,ee=qd){const de=Math.max((window.screen.availHeight-ee)/2,0).toString(),nt=Math.max((window.screen.availWidth-M)/2,0).toString();let Ft="";const pn=Object.assign(Object.assign({},Mo),{width:M.toString(),height:ee.toString(),top:de,left:nt}),On=(0,Z.z$)().toLowerCase();E&&(Ft=Le(On)?Wl:E),ie(On)&&(v=v||Ro,pn.scrollbars="yes");const nr=Object.entries(pn).reduce((Cl,[la,cl])=>`${Cl}${la}=${cl},`,"");if(function Qt(A=(0,Z.z$)()){var v;return Ze(A)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(On)&&"_self"!==Ft)return function $r(A,v){const E=document.createElement("a");E.href=A,E.target=v;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(M)}(v||"",Ft),new Ss(null);const es=window.open(v||"",Ft,nr);ke(es,A,"popup-blocked");try{es.focus()}catch{}return new Ss(es)}(v,Ft,Cn())})()}_openRedirect(v,E,M,ee){var de=this;return(0,b.Z)(function*(){return yield de._originValidation(v),function jt(A){qn().location.href=A}(Kl(v,E,M,We(),ee)),new Promise(()=>{})})()}_initialize(v){const E=v._key();if(this.eventManagers[E]){const{manager:ee,promise:de}=this.eventManagers[E];return ee?Promise.resolve(ee):(qe(de,"If manager is not set, promise should be"),de)}const M=this.initAndGetManager(v);return this.eventManagers[E]={promise:M},M.catch(()=>{delete this.eventManagers[E]}),M}initAndGetManager(v){var E=this;return(0,b.Z)(function*(){const M=yield function ss(A){return td.apply(this,arguments)}(v),ee=new Xi(v);return M.register("authEvent",de=>(ke(de?.authEvent,v,"invalid-auth-event"),{status:ee.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[v._key()]={manager:ee},E.iframes[v._key()]=M,ee})()}_isIframeWebStorageSupported(v,E){this.iframes[v._key()].send(_u,{type:_u},ee=>{var de;const nt=null===(de=ee?.[0])||void 0===de?void 0:de[_u];void 0!==nt&&E(!!nt),Et(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const E=v._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function zl(A){return Kd.apply(this,arguments)}(v)),this.originValidationPromises[E]}get _shouldInitProactively(){return vn()||Q()||Ze()}};class nf{constructor(v){this.factorId=v}_process(v,E,M){switch(E.type){case"enroll":return this._finalizeEnroll(v,E.credential,M);case"signin":return this._finalizeSignIn(v,E.credential);default:return fe("unexpected MultiFactorSessionType")}}}class Ta extends nf{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Ta(v)}_finalizeEnroll(v,E,M){return function zu(A,v){return ft(A,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(A,v))}(v,{idToken:E,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,E){return function lr(A,v){return ft(A,"POST","/v2/accounts/mfaSignIn:finalize",Xt(A,v))}(v,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rf=(()=>{class A{constructor(){}static assertion(E){return Ta._fromCredential(E)}}return A.FACTOR_ID="phone",A})();var yu="@firebase/auth";class nd{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var E=this;return(0,b.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const E=this.auth.onIdTokenChanged(M=>{v(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,E),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const E=this.internalListeners.get(v);E&&(this.internalListeners.delete(v),E(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,Z.Pz)("authIdTokenMaxAge"),function rd(A){(0,p._registerComponent)(new xe.wA("auth",(v,{options:E})=>{const M=v.getProvider("app").getImmediate(),ee=v.getProvider("heartbeat"),{apiKey:de,authDomain:nt}=M.options;return((Ft,pn)=>{ke(de&&!de.includes(":"),"invalid-api-key",{appName:Ft.name}),ke(!nt?.includes(":"),"argument-error",{appName:Ft.name});const On={apiKey:de,authDomain:nt,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ti(A)},nr=new qs(Ft,pn,On);return function Pt(A,v){const E=v?.persistence||[],M=(Array.isArray(E)?E:[E]).map(bt);v?.errorMap&&A._updateErrorMap(v.errorMap),A._initializeWithPersistence(M,v?.popupRedirectResolver)}(nr,E),nr})(M,ee)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,E,M)=>{v.getProvider("auth-internal").initialize()})),(0,p._registerComponent)(new xe.wA("auth-internal",v=>{const E=Br(v.getProvider("auth").getImmediate());return new nd(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,p.registerVersion)(yu,"0.21.5",function Ac(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,p.registerVersion)(yu,"0.21.5","esm2017")}("Browser")},2090:(Yt,Ke,V)=>{V.d(Ke,{$s:()=>ye,BH:()=>Ye,DV:()=>_r,Dv:()=>un,G6:()=>at,GJ:()=>Ar,L:()=>Ge,LL:()=>Kt,Pz:()=>rt,Sg:()=>xt,UG:()=>qe,UI:()=>en,US:()=>xe,Wj:()=>Pr,Wl:()=>xn,Yr:()=>$e,ZB:()=>Re,ZR:()=>cn,aH:()=>gt,b$:()=>Jt,cI:()=>bn,dS:()=>Dr,eu:()=>dt,g5:()=>p,gK:()=>In,gQ:()=>qr,h$:()=>Pe,hl:()=>wt,hu:()=>Z,jU:()=>ct,lb:()=>Nn,m9:()=>mt,ne:()=>mn,p$:()=>Ee,pd:()=>xr,r3:()=>Vn,ru:()=>bt,tV:()=>be,uI:()=>fe,ug:()=>Pn,vZ:()=>Dn,w1:()=>We,w9:()=>Wn,xO:()=>Kr,xb:()=>Rr,z$:()=>ke,zI:()=>Rt,zd:()=>wr});const b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(ge,pe){if(!ge)throw p(pe)},p=function(ge){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ge)},De=function(ge){const pe=[];let ne=0;for(let ie=0;ie<ge.length;ie++){let Q=ge.charCodeAt(ie);Q<128?pe[ne++]=Q:Q<2048?(pe[ne++]=Q>>6|192,pe[ne++]=63&Q|128):55296==(64512&Q)&&ie+1<ge.length&&56320==(64512&ge.charCodeAt(ie+1))?(Q=65536+((1023&Q)<<10)+(1023&ge.charCodeAt(++ie)),pe[ne++]=Q>>18|240,pe[ne++]=Q>>12&63|128,pe[ne++]=Q>>6&63|128,pe[ne++]=63&Q|128):(pe[ne++]=Q>>12|224,pe[ne++]=Q>>6&63|128,pe[ne++]=63&Q|128)}return pe},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,pe){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let Q=0;Q<ge.length;Q+=3){const Le=ge[Q],ce=Q+1<ge.length,me=ce?ge[Q+1]:0,le=Q+2<ge.length,Oe=le?ge[Q+2]:0;let Qt=(15&me)<<2|Oe>>6,Ht=63&Oe;le||(Ht=64,ce||(Qt=64)),ie.push(ne[Le>>2],ne[(3&Le)<<4|me>>4],ne[Qt],ne[Ht])}return ie.join("")},encodeString(ge,pe){return this.HAS_NATIVE_SUPPORT&&!pe?btoa(ge):this.encodeByteArray(De(ge),pe)},decodeString(ge,pe){return this.HAS_NATIVE_SUPPORT&&!pe?atob(ge):function(ge){const pe=[];let ne=0,ie=0;for(;ne<ge.length;){const Q=ge[ne++];if(Q<128)pe[ie++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Le=ge[ne++];pe[ie++]=String.fromCharCode((31&Q)<<6|63&Le)}else if(Q>239&&Q<365){const le=((7&Q)<<18|(63&ge[ne++])<<12|(63&ge[ne++])<<6|63&ge[ne++])-65536;pe[ie++]=String.fromCharCode(55296+(le>>10)),pe[ie++]=String.fromCharCode(56320+(1023&le))}else{const Le=ge[ne++],ce=ge[ne++];pe[ie++]=String.fromCharCode((15&Q)<<12|(63&Le)<<6|63&ce)}}return pe.join("")}(this.decodeStringToByteArray(ge,pe))},decodeStringToByteArray(ge,pe){this.init_();const ne=pe?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let Q=0;Q<ge.length;){const Le=ne[ge.charAt(Q++)],me=Q<ge.length?ne[ge.charAt(Q)]:0;++Q;const Oe=Q<ge.length?ne[ge.charAt(Q)]:64;++Q;const vt=Q<ge.length?ne[ge.charAt(Q)]:64;if(++Q,null==Le||null==me||null==Oe||null==vt)throw new Fe;ie.push(Le<<2|me>>4),64!==Oe&&(ie.push(me<<4&240|Oe>>2),64!==vt&&ie.push(Oe<<6&192|vt))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(ge){const pe=De(ge);return xe.encodeByteArray(pe,!0)},Ge=function(ge){return Pe(ge).replace(/\./g,"")},be=function(ge){try{return xe.decodeString(ge,!0)}catch(pe){console.error("base64Decode failed: ",pe)}return null};function Ee(ge){return Re(void 0,ge)}function Re(ge,pe){if(!(pe instanceof Object))return pe;switch(pe.constructor){case Date:return new Date(pe.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return pe}for(const ne in pe)!pe.hasOwnProperty(ne)||!yt(ne)||(ge[ne]=Re(ge[ne],pe[ne]));return ge}function yt(ge){return"__proto__"!==ge}const ut=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const pe=ge&&be(ge[1]);return pe&&JSON.parse(pe)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},gt=()=>{var ge;return null===(ge=ut())||void 0===ge?void 0:ge.config},rt=ge=>{var pe;return null===(pe=ut())||void 0===pe?void 0:pe[`_${ge}`]};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((pe,ne)=>{this.resolve=pe,this.reject=ne})}wrapCallback(pe){return(ne,ie)=>{ne?this.reject(ne):this.resolve(ie),"function"==typeof pe&&(this.promise.catch(()=>{}),1===pe.length?pe(ne):pe(ne,ie))}}}function xt(ge,pe){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=pe||"demo-project",Q=ge.iat||0,Le=ge.sub||ge.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ce=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:Q,exp:Q+3600,auth_time:Q,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Ge(JSON.stringify({alg:"none",type:"JWT"})),Ge(JSON.stringify(ce)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function qe(){var ge;const pe=null===(ge=ut())||void 0===ge?void 0:ge.forceEnvironment;if("node"===pe)return!0;if("browser"===pe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ct(){return"object"==typeof self&&self.self===self}function bt(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){const ge=ke();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function $e(){return!0===b.NODE_CLIENT||!0===b.NODE_ADMIN}function at(){return!qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wt(){try{return"object"==typeof indexedDB}catch{return!1}}function dt(){return new Promise((ge,pe)=>{try{let ne=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ie);Q.onsuccess=()=>{Q.result.close(),ne||self.indexedDB.deleteDatabase(ie),ge(!0)},Q.onupgradeneeded=()=>{ne=!1},Q.onerror=()=>{var Le;pe((null===(Le=Q.error)||void 0===Le?void 0:Le.message)||"")}}catch(ne){pe(ne)}})}function Rt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class cn extends Error{constructor(pe,ne,ie){super(ne),this.code=pe,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(pe,ne,ie){this.service=pe,this.serviceName=ne,this.errors=ie}create(pe,...ne){const ie=ne[0]||{},Q=`${this.service}/${pe}`,Le=this.errors[pe],ce=Le?function Xt(ge,pe){return ge.replace(ft,(ne,ie)=>{const Q=pe[ie];return null!=Q?String(Q):`<${ie}?>`})}(Le,ie):"Error";return new cn(Q,`${this.serviceName}: ${ce} (${Q}).`,ie)}}const ft=/\{\$([^}]+)}/g;function bn(ge){return JSON.parse(ge)}function xn(ge){return JSON.stringify(ge)}const Gn=function(ge){let pe={},ne={},ie={},Q="";try{const Le=ge.split(".");pe=bn(be(Le[0])||""),ne=bn(be(Le[1])||""),Q=Le[2],ie=ne.d||{},delete ne.d}catch{}return{header:pe,claims:ne,data:ie,signature:Q}},Wn=function(ge){const ne=Gn(ge).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},Ar=function(ge){const pe=Gn(ge).claims;return"object"==typeof pe&&!0===pe.admin};function Vn(ge,pe){return Object.prototype.hasOwnProperty.call(ge,pe)}function _r(ge,pe){if(Object.prototype.hasOwnProperty.call(ge,pe))return ge[pe]}function Rr(ge){for(const pe in ge)if(Object.prototype.hasOwnProperty.call(ge,pe))return!1;return!0}function en(ge,pe,ne){const ie={};for(const Q in ge)Object.prototype.hasOwnProperty.call(ge,Q)&&(ie[Q]=pe.call(ne,ge[Q],Q,ge));return ie}function Dn(ge,pe){if(ge===pe)return!0;const ne=Object.keys(ge),ie=Object.keys(pe);for(const Q of ne){if(!ie.includes(Q))return!1;const Le=ge[Q],ce=pe[Q];if(kt(Le)&&kt(ce)){if(!Dn(Le,ce))return!1}else if(Le!==ce)return!1}for(const Q of ie)if(!ne.includes(Q))return!1;return!0}function kt(ge){return null!==ge&&"object"==typeof ge}function Kr(ge){const pe=[];for(const[ne,ie]of Object.entries(ge))Array.isArray(ie)?ie.forEach(Q=>{pe.push(encodeURIComponent(ne)+"="+encodeURIComponent(Q))}):pe.push(encodeURIComponent(ne)+"="+encodeURIComponent(ie));return pe.length?"&"+pe.join("&"):""}function wr(ge){const pe={};return ge.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[Q,Le]=ie.split("=");pe[decodeURIComponent(Q)]=decodeURIComponent(Le)}}),pe}function xr(ge){const pe=ge.indexOf("?");if(!pe)return"";const ne=ge.indexOf("#",pe);return ge.substring(pe,ne>0?ne:void 0)}class qr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let pe=1;pe<this.blockSize;++pe)this.pad_[pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(pe,ne){ne||(ne=0);const ie=this.W_;if("string"==typeof pe)for(let vt=0;vt<16;vt++)ie[vt]=pe.charCodeAt(ne)<<24|pe.charCodeAt(ne+1)<<16|pe.charCodeAt(ne+2)<<8|pe.charCodeAt(ne+3),ne+=4;else for(let vt=0;vt<16;vt++)ie[vt]=pe[ne]<<24|pe[ne+1]<<16|pe[ne+2]<<8|pe[ne+3],ne+=4;for(let vt=16;vt<80;vt++){const Qt=ie[vt-3]^ie[vt-8]^ie[vt-14]^ie[vt-16];ie[vt]=4294967295&(Qt<<1|Qt>>>31)}let Oe,Ze,Q=this.chain_[0],Le=this.chain_[1],ce=this.chain_[2],me=this.chain_[3],le=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(Oe=me^Le&(ce^me),Ze=1518500249):(Oe=Le^ce^me,Ze=1859775393):vt<60?(Oe=Le&ce|me&(Le|ce),Ze=2400959708):(Oe=Le^ce^me,Ze=3395469782);const Qt=(Q<<5|Q>>>27)+Oe+le+Ze+ie[vt]&4294967295;le=me,me=ce,ce=4294967295&(Le<<30|Le>>>2),Le=Q,Q=Qt}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Le&4294967295,this.chain_[2]=this.chain_[2]+ce&4294967295,this.chain_[3]=this.chain_[3]+me&4294967295,this.chain_[4]=this.chain_[4]+le&4294967295}update(pe,ne){if(null==pe)return;void 0===ne&&(ne=pe.length);const ie=ne-this.blockSize;let Q=0;const Le=this.buf_;let ce=this.inbuf_;for(;Q<ne;){if(0===ce)for(;Q<=ie;)this.compress_(pe,Q),Q+=this.blockSize;if("string"==typeof pe){for(;Q<ne;)if(Le[ce]=pe.charCodeAt(Q),++ce,++Q,ce===this.blockSize){this.compress_(Le),ce=0;break}}else for(;Q<ne;)if(Le[ce]=pe[Q],++ce,++Q,ce===this.blockSize){this.compress_(Le),ce=0;break}}this.inbuf_=ce,this.total_+=ne}digest(){const pe=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&ne,ne/=256;this.compress_(this.buf_);let ie=0;for(let Q=0;Q<5;Q++)for(let Le=24;Le>=0;Le-=8)pe[ie]=this.chain_[Q]>>Le&255,++ie;return pe}}function mn(ge,pe){const ne=new on(ge,pe);return ne.subscribe.bind(ne)}class on{constructor(pe,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{pe(this)}).catch(ie=>{this.error(ie)})}next(pe){this.forEachObserver(ne=>{ne.next(pe)})}error(pe){this.forEachObserver(ne=>{ne.error(pe)}),this.close(pe)}complete(){this.forEachObserver(pe=>{pe.complete()}),this.close()}subscribe(pe,ne,ie){let Q;if(void 0===pe&&void 0===ne&&void 0===ie)throw new Error("Missing Observer.");Q=function Hn(ge,pe){if("object"!=typeof ge||null===ge)return!1;for(const ne of pe)if(ne in ge&&"function"==typeof ge[ne])return!0;return!1}(pe,["next","error","complete"])?pe:{next:pe,error:ne,complete:ie},void 0===Q.next&&(Q.next=Kn),void 0===Q.error&&(Q.error=Kn),void 0===Q.complete&&(Q.complete=Kn);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Le}unsubscribeOne(pe){void 0===this.observers||void 0===this.observers[pe]||(delete this.observers[pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(pe){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,pe)}sendOne(pe,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[pe])try{ne(this.observers[pe])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(pe){this.finalized||(this.finalized=!0,void 0!==pe&&(this.finalError=pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kn(){}const un=function(ge,pe,ne,ie){let Q;if(ie<pe?Q="at least "+pe:ie>ne&&(Q=0===ne?"none":"no more than "+ne),Q)throw new Error(ge+" failed: Was called with "+ie+(1===ie?" argument.":" arguments.")+" Expects "+Q+".")};function In(ge,pe){return`${ge} failed: ${pe} argument `}function Pr(ge,pe,ne,ie){if((!ie||ne)&&"function"!=typeof ne)throw new Error(In(ge,pe)+"must be a valid function.")}function Nn(ge,pe,ne,ie){if((!ie||ne)&&("object"!=typeof ne||null===ne))throw new Error(In(ge,pe)+"must be a valid context object.")}const Dr=function(ge){const pe=[];let ne=0;for(let ie=0;ie<ge.length;ie++){let Q=ge.charCodeAt(ie);if(Q>=55296&&Q<=56319){const Le=Q-55296;ie++,Z(ie<ge.length,"Surrogate pair missing trail surrogate."),Q=65536+(Le<<10)+(ge.charCodeAt(ie)-56320)}Q<128?pe[ne++]=Q:Q<2048?(pe[ne++]=Q>>6|192,pe[ne++]=63&Q|128):Q<65536?(pe[ne++]=Q>>12|224,pe[ne++]=Q>>6&63|128,pe[ne++]=63&Q|128):(pe[ne++]=Q>>18|240,pe[ne++]=Q>>12&63|128,pe[ne++]=Q>>6&63|128,pe[ne++]=63&Q|128)}return pe},Pn=function(ge){let pe=0;for(let ne=0;ne<ge.length;ne++){const ie=ge.charCodeAt(ne);ie<128?pe++:ie<2048?pe+=2:ie>=55296&&ie<=56319?(pe+=4,ne++):pe+=3}return pe},rr=1e3,Lt=2,It=144e5,Ue=.5;function ye(ge,pe=rr,ne=Lt){const ie=pe*Math.pow(ne,ge),Q=Math.round(Ue*ie*(Math.random()-.5)*2);return Math.min(It,ie+Q)}function mt(ge){return ge&&ge._delegate?ge._delegate:ge}},4132:(Yt,Ke,V)=>{V.d(Ke,{O:()=>Z});var b=V(4650);let Z=(()=>{class p{}return p.\u0275fac=function(Me){return new(Me||p)},p.\u0275cmp=b.Xpm({type:p,selectors:[["app-spinner"]],decls:2,vars:0,consts:[[1,"cell"],[1,"pl","pl-puzzle"]],template:function(Me,xe){1&Me&&(b.TgZ(0,"div",0),b._UZ(1,"div",1),b.qZA())},styles:['.cell[_ngcontent-%COMP%]{flex-basis:50%;padding:1.5em}.pl[_ngcontent-%COMP%], .pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}.pl[_ngcontent-%COMP%]{margin:0 auto 1.5em;position:relative;width:3em;height:3em}.pl[_ngcontent-%COMP%]:before, .pl[_ngcontent-%COMP%]:after{background:currentColor;content:"";display:block;position:absolute;top:0;left:0;width:100%;height:50%;transform-origin:50% 100%;clip-path:polygon(0 0,100% 0,50% 100%);-webkit-clip-path:polygon(0 0,100% 0,50% 100%)}.pl-name[_ngcontent-%COMP%]{text-align:center}.pl-puzzle[_ngcontent-%COMP%]:before, .pl-puzzle[_ngcontent-%COMP%]:after{transform-origin:50% 50%;color:#98e3f4}.pl-puzzle[_ngcontent-%COMP%]:before{animation-name:_ngcontent-%COMP%_puzzleA}.pl-puzzle[_ngcontent-%COMP%]:after{animation-name:_ngcontent-%COMP%_puzzleB;background:#f5b0cb}@keyframes _ngcontent-%COMP%_puzzleA{0%{transform:translate(0) scale(1) rotate(0);z-index:1}12.5%{transform:translateY(50%) scale(1.5) rotate(-90deg);z-index:1}25%,50.1%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:1}25.1%,50%{transform:translateY(100%) scale(1) rotate(-180deg);z-index:0}62.5%{transform:translateY(50%) scale(1.5) rotate(-270deg);z-index:1}75%{transform:translate(0) scale(1) rotate(-360deg);z-index:1}to{transform:translate(0) scale(1) rotate(-360deg);z-index:0}}@keyframes _ngcontent-%COMP%_puzzleB{0%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:0}25.1%{transform:translate(25%,50%) scale(1) rotate(90deg);z-index:1}37.5%{transform:translateY(50%) scale(1.5) rotate(0);z-index:1}50%,75.1%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:1}50.1%,75%{transform:translate(-25%,50%) scale(1) rotate(-90deg);z-index:0}87.5%{transform:translateY(50%) scale(1.5) rotate(-180deg);z-index:1}to{transform:translate(25%,50%) scale(1) rotate(-270deg);z-index:1}}']}),p})()},1266:(Yt,Ke,V)=>{V.d(Ke,{F:()=>p});var b=V(6895),Z=V(4650);let p=(()=>{class De{}return De.\u0275fac=function(xe){return new(xe||De)},De.\u0275mod=Z.oAB({type:De}),De.\u0275inj=Z.cJS({imports:[b.ez]}),De})()},6743:(Yt,Ke,V)=>{V.d(Ke,{N:()=>b});const b={baseUrl:"https://psicoleigos.azurewebsites.net/",production:!0,firebase:{apiKey:"AIzaSyBZwKztkqkhS6b7UHmRBdOyeg1myLJEcR8",authDomain:"psicoleigos-eeee1.firebaseapp.com",projectId:"psicoleigos-eeee1",storageBucket:"psicoleigos-eeee1.appspot.com",messagingSenderId:"711814031287",appId:"1:711814031287:web:742f26ac4bafc1e2b7ea32",measurementId:"G-PL2WDP34XM"}}},3651:(Yt,Ke,V)=>{V.d(Ke,{e:()=>Ee});var b=V(5861),Z=V(5114),Fe=(V(2090),V(9681),V(1877),V(4859),V(4650)),Pe=V(3101),Ge=V(1205),be=V(4629);let Ee=(()=>{class Re{constructor(He,pt,Nt,Qe){this.afs=He,this.afAuth=pt,this.router=Nt,this.ngZone=Qe,this.afAuth.authState.subscribe(ut=>{ut?(this.userData=ut,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(He,pt){var Nt=this;return(0,b.Z)(function*(){try{const Qe=yield Nt.afAuth.signInWithEmailAndPassword(He,pt);Nt.SetUserData(Qe.user),Nt.afAuth.authState.subscribe(ut=>{ut&&Nt.router.navigate(["rpd"])})}catch(Qe){window.alert(Qe.message)}})()}SignUp(He,pt){var Nt=this;return(0,b.Z)(function*(){try{const Qe=yield Nt.afAuth.createUserWithEmailAndPassword(He,pt);Nt.SendVerificationMail(),Nt.SetUserData(Qe.user)}catch(Qe){window.alert(Qe.message)}})()}SendVerificationMail(){var He=this;return(0,b.Z)(function*(){return He.afAuth.currentUser.then(pt=>pt.sendEmailVerification()).then(()=>{He.router.navigate(["verify-email"])})})()}ForgotPassword(He){var pt=this;return(0,b.Z)(function*(){return pt.afAuth.sendPasswordResetEmail(He).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Nt=>{window.alert(Nt)})})()}get isLoggedIn(){const He=JSON.parse(localStorage.getItem("user"));return null!==He&&!1!==He.emailVerified&&null!=this.afAuth.currentUser}GoogleAuth(){var He=this;return(0,b.Z)(function*(){return yield He.AuthLogin(new Z.Q)})()}AuthLogin(He){var pt=this;return(0,b.Z)(function*(){try{const Nt=yield pt.afAuth.signInWithPopup(He);pt.SetUserData(Nt.user)}catch(Nt){window.alert(Nt)}})()}SetUserData(He){return this.afs.doc(`users/${He.uid}`).set({uid:He.uid,email:He.email,displayName:He.displayName,photoURL:He.photoURL,emailVerified:He.emailVerified},{merge:!0})}SignOut(){var He=this;return(0,b.Z)(function*(){return He.afAuth.signOut().then(()=>{localStorage.removeItem("user"),delete He.userData,He.router.navigate(["landing-page"])})})()}getUser(){var He=this;return(0,b.Z)(function*(){const pt=localStorage.getItem("user");let Nt;return pt&&"null"!=pt?Nt=JSON.parse(pt):(Nt=(yield He.afAuth.currentUser)||He.userData,Nt)})()}}return Re.\u0275fac=function(He){return new(He||Re)(Fe.LFG(Pe.ST),Fe.LFG(Ge.zQ),Fe.LFG(be.F0),Fe.LFG(Fe.R0b))},Re.\u0275prov=Fe.Yz7({token:Re,factory:Re.\u0275fac,providedIn:"root"}),Re})()},4884:(Yt,Ke,V)=>{var b=V(1481),Z=V(4629),p=V(4650),De=V(3651);let Me=(()=>{class n{constructor(t,l){this.authService=t,this.router=l}canActivate(t,l){return this.authService.isLoggedIn&&this.router.navigate(["rpd"]),!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(De.e),p.LFG(Z.F0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var xe=V(9635),Fe=V(4004),Pe=V(5698),Ge=V(1205),be=V(9260);const Ee=(0,Fe.U)(n=>!!n);let Re=(()=>{class n{constructor(t,l){this.router=t,this.auth=l,this.canActivate=(h,m)=>{const C=h.data.authGuardPipe||(()=>Ee);return this.auth.user.pipe((0,Pe.q)(1),C(h,m),(0,Fe.U)(F=>"boolean"==typeof F?F:Array.isArray(F)?this.router.createUrlTree(F):this.router.parseUrl(F)))}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Z.F0),p.LFG(Ge.zQ))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const yt=n=>({canActivate:[Re],data:{authGuardPipe:n}}),xt=[{path:"landing-page",loadChildren:()=>Promise.all([V.e(592),V.e(601)]).then(V.bind(V,8601)).then(n=>n.LandingPageModule),...yt(()=>{return n=["rpd"],(0,xe.z)(Ee,(0,Fe.U)(s=>s&&n||!0));var n})},{path:"rpd",loadChildren:()=>V.e(438).then(V.bind(V,438)).then(n=>n.RpdModule),...yt(()=>{return n=["sign-in"],(0,xe.z)(Ee,(0,Fe.U)(s=>s||n));var n})},{path:"sign-in",loadChildren:()=>V.e(592).then(V.bind(V,8471)).then(n=>n.SignInModule)},{path:"forgot-password",loadChildren:()=>V.e(163).then(V.bind(V,7163)).then(n=>n.ForgotPasswordModule)},{path:"sign-up",loadChildren:()=>V.e(148).then(V.bind(V,3148)).then(n=>n.SignUpModule)},{path:"verify-email",loadChildren:()=>V.e(454).then(V.bind(V,3454)).then(n=>n.VerifyEmailModule)},{path:"",loadChildren:()=>Promise.all([V.e(592),V.e(601)]).then(V.bind(V,8601)).then(n=>n.LandingPageModule),canActivate:[Me]}];let ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Z.Bz.forRoot(xt,{useHash:!0}),Z.Bz]}),n})();var fe=V(6895),qe=V(4132);function ct(n,s){1&n&&(p.TgZ(0,"div",2),p._UZ(1,"app-spinner"),p.qZA())}function bt(n,s){1&n&&p._UZ(0,"router-outlet")}let Jt=(()=>{class n{constructor(){this.title="rpg-psicoleigos",this.loaded=!0}ngOnInit(){setTimeout(()=>{this.loaded=!1},1e3)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[["class","spinner",4,"ngIf","ngIfElse"],["routerOutlet",""],[1,"spinner"]],template:function(t,l){if(1&t&&(p.YNc(0,ct,2,0,"div",0),p.YNc(1,bt,1,0,"ng-template",null,1,p.W1O)),2&t){const h=p.MAs(2);p.Q6J("ngIf",l.loaded)("ngIfElse",h)}},dependencies:[fe.O5,Z.lC,qe.O],styles:[".spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh}.spinner[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#98e3f4}"]}),n})();var Pt=V(9751),We=V(515),st=V(9646),$e=V(7579),at=V(8421),wt=V(5577),dt=V(1144),Rt=V(576),Mt=V(3268);const cn=["addListener","removeListener"],Kt=["addEventListener","removeEventListener"],Xt=["on","off"];function ft(n,s,t,l){if((0,Rt.m)(t)&&(l=t,t=void 0),l)return ft(n,s,t).pipe((0,Mt.Z)(l));const[h,m]=function Ln(n){return(0,Rt.m)(n.addEventListener)&&(0,Rt.m)(n.removeEventListener)}(n)?Kt.map(C=>F=>n[C](s,F,t)):function xn(n){return(0,Rt.m)(n.addListener)&&(0,Rt.m)(n.removeListener)}(n)?cn.map(bn(n,s)):function Gn(n){return(0,Rt.m)(n.on)&&(0,Rt.m)(n.off)}(n)?Xt.map(bn(n,s)):[];if(!h&&(0,dt.z)(n))return(0,wt.z)(C=>ft(C,s,t))((0,at.Xf)(n));if(!h)throw new TypeError("Invalid event target");return new Pt.y(C=>{const F=(...G)=>C.next(1<G.length?G:G[0]);return h(F),()=>m(F)})}function bn(n,s){return t=>l=>n[t](s,l)}var hr=V(4986),Wn=V(3532);function Vn(n=0,s,t=hr.P){let l=-1;return null!=s&&((0,Wn.K)(s)?t=s:l=s),new Pt.y(h=>{let m=function Ar(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;m<0&&(m=0);let C=0;return t.schedule(function(){h.closed||(h.next(C++),0<=l?this.schedule(void 0,l):h.complete())},m)})}const{isArray:_r}=Array;function Rr(n){return 1===n.length&&_r(n[0])?n[0]:n}var en=V(5403);var Zn=V(1135),Kr=V(9841),wr=V(5032);const xr=new Pt.y(wr.Z);var mn=V(3269);function on(...n){const s=(0,mn.jO)(n),t=Rr(n);return t.length?new Pt.y(l=>{let h=t.map(()=>[]),m=t.map(()=>!1);l.add(()=>{h=m=null});for(let C=0;!l.closed&&C<t.length;C++)(0,at.Xf)(t[C]).subscribe((0,en.x)(l,F=>{if(h[C].push(F),h.every(G=>G.length)){const G=h.map(Y=>Y.shift());l.next(s?s(...G):G),h.some((Y,ue)=>!Y.length&&m[ue])&&l.complete()}},()=>{m[C]=!0,!h[C].length&&l.complete()}));return()=>{h=m=null}}):We.E}var $t=V(6451),Hn=V(7272),un=V(4482);function In(n){return(0,un.e)((s,t)=>{(0,at.Xf)(n).subscribe((0,en.x)(t,()=>t.complete(),wr.Z)),!t.closed&&s.subscribe(t)})}var or=V(9300),Pr=V(8675),Nn=V(1884),Dr=V(3900),Pn=V(8505),Ci=V(4671);function rr(...n){const s=(0,mn.jO)(n);return(0,un.e)((t,l)=>{const h=n.length,m=new Array(h);let C=n.map(()=>!1),F=!1;for(let G=0;G<h;G++)(0,at.Xf)(n[G]).subscribe((0,en.x)(l,Y=>{m[G]=Y,!F&&!C[G]&&(C[G]=!0,(F=C.every(Ci.y))&&(C=null))},wr.Z));t.subscribe((0,en.x)(l,G=>{if(F){const Y=[G,...m];l.next(s?s(...Y):Y)}}))})}V(9718);var ht=V(433);function Fa(n,s){}function fo(n,s){if(1&n&&(p.TgZ(0,"button",3),p._uU(1),p.YNc(2,Fa,0,0,"ng-template",4),p.qZA()),2&n){const t=s.$implicit;p.Q6J("ngbPanelToggle",t),p.xp6(1),p.hij(" ",t.title," "),p.xp6(1),p.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function ji(n,s){}function Xo(n,s){}function yl(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"div",8),p.NdJ("ngbRef",function(h){p.CHM(t);const m=p.oxw().$implicit;return p.KtG(m.panelDiv=h)}),p.TgZ(1,"div",9),p.YNc(2,Xo,0,0,"ng-template",4),p.qZA()()}if(2&n){const t=p.oxw().$implicit;p.s9C("id",t.id),p.uIk("aria-labelledby",t.id+"-header"),p.xp6(2),p.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const An=function(n,s){return{$implicit:n,opened:s}};function po(n,s){if(1&n&&(p.TgZ(0,"div")(1,"div",5),p.YNc(2,ji,0,0,"ng-template",6),p.qZA(),p.YNc(3,yl,3,3,"div",7),p.qZA()),2&n){const t=s.$implicit,l=p.oxw(),h=p.MAs(1);p.Tol("accordion-item "+(t.cardClass||"")),p.xp6(1),p.Tol("accordion-header "+(t.type?"bg-"+t.type:l.type?"bg-"+l.type:"")),p.MGl("id","",t.id,"-header"),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||h)("ngTemplateOutletContext",p.WLB(8,An,t,t.isOpen)),p.xp6(1),p.Q6J("ngIf",!l.destroyOnHide||t.isOpen||t.transitionRunning)}}function jo(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",1),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.close())}),p.qZA()}}const ea=["*"];function ta(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",6),p.NdJ("click",function(){const m=p.CHM(t).$implicit,C=p.oxw();return C.focus(),p.KtG(C.select(m.id,C.NgbSlideEventSource.INDICATOR))}),p.qZA()}if(2&n){const t=s.$implicit,l=p.oxw();p.ekj("active",t.id===l.activeId),p.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===l.activeId)}}function Bl(n,s){}function Io(n,s){if(1&n&&(p.TgZ(0,"div",7)(1,"span",8),p.SDv(2,9),p.qZA(),p.YNc(3,Bl,0,0,"ng-template",10),p.qZA()),2&n){const t=s.$implicit,l=s.index,h=s.count;p.Q6J("id","slide-"+t.id),p.xp6(2),p.pQV(l+1)(h),p.QtT(2),p.xp6(1),p.Q6J("ngTemplateOutlet",t.tplRef)}}function ga(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.arrowLeft())}),p._UZ(1,"span",12),p.TgZ(2,"span",8),p.SDv(3,13),p.qZA()()}}function j(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",14),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.arrowRight())}),p._UZ(1,"span",15),p.TgZ(2,"span",8),p.SDv(3,16),p.qZA()()}}const R=["ngbDatepickerDayView",""],L=["month"],oe=["year"];function lt(n,s){if(1&n&&(p.TgZ(0,"option",5),p._uU(1),p.qZA()),2&n){const t=s.$implicit,l=p.oxw();p.Q6J("value",t),p.uIk("aria-label",l.i18n.getMonthFullName(t,l.date.year)),p.xp6(1),p.Oqu(l.i18n.getMonthShortName(t,l.date.year))}}function rn(n,s){if(1&n&&(p.TgZ(0,"option",5),p._uU(1),p.qZA()),2&n){const t=s.$implicit,l=p.oxw();p.Q6J("value",t),p.xp6(1),p.Oqu(l.i18n.getYearNumerals(t))}}function Fr(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"ngb-datepicker-navigation-select",7),p.NdJ("select",function(h){p.CHM(t);const m=p.oxw();return p.KtG(m.select.emit(h))}),p.qZA()}if(2&n){const t=p.oxw();p.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function Si(n,s){1&n&&p._UZ(0,"div",0)}function bi(n,s){1&n&&p._UZ(0,"div",0)}function Qs(n,s){if(1&n&&(p.YNc(0,Si,1,0,"div",9),p.TgZ(1,"div",10),p._uU(2),p.qZA(),p.YNc(3,bi,1,0,"div",9)),2&n){const t=s.$implicit,l=s.index,h=p.oxw(2);p.Q6J("ngIf",l>0),p.xp6(2),p.hij(" ",h.i18n.getMonthLabel(t.firstDate)," "),p.xp6(1),p.Q6J("ngIf",l!==h.months.length-1)}}function Xs(n,s){if(1&n&&p.YNc(0,Qs,4,3,"ng-template",8),2&n){const t=p.oxw();p.Q6J("ngForOf",t.months)}}function Cs(n,s){if(1&n&&(p.TgZ(0,"div",5),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.Oqu(t.i18n.getWeekLabel())}}function ma(n,s){if(1&n&&(p.TgZ(0,"div",6),p._uU(1),p.qZA()),2&n){const t=s.$implicit;p.xp6(1),p.Oqu(t)}}function vl(n,s){if(1&n&&(p.TgZ(0,"div",2),p.YNc(1,Cs,2,1,"div",3),p.YNc(2,ma,2,1,"div",4),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.datepicker.showWeekNumbers),p.xp6(1),p.Q6J("ngForOf",t.viewModel.weekdays)}}function li(n,s){if(1&n&&(p.TgZ(0,"div",11),p._uU(1),p.qZA()),2&n){const t=p.oxw(2).$implicit,l=p.oxw();p.xp6(1),p.Oqu(l.i18n.getWeekNumerals(t.number))}}function Ji(n,s){}function na(n,s){if(1&n&&p.YNc(0,Ji,0,0,"ng-template",14),2&n){const t=p.oxw().$implicit,l=p.oxw(3);p.Q6J("ngTemplateOutlet",l.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function ra(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"div",12),p.NdJ("click",function(h){const C=p.CHM(t).$implicit;return p.oxw(3).doSelect(C),p.KtG(h.preventDefault())}),p.YNc(1,na,1,2,"ng-template",13),p.qZA()}if(2&n){const t=s.$implicit;p.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),p.Q6J("tabindex",t.tabindex),p.uIk("aria-label",t.ariaLabel),p.xp6(1),p.Q6J("ngIf",!t.hidden)}}function vs(n,s){if(1&n&&(p.TgZ(0,"div",8),p.YNc(1,li,2,1,"div",9),p.YNc(2,ra,2,9,"div",10),p.qZA()),2&n){const t=p.oxw().$implicit,l=p.oxw();p.xp6(1),p.Q6J("ngIf",l.datepicker.showWeekNumbers),p.xp6(1),p.Q6J("ngForOf",t.days)}}function Ho(n,s){1&n&&p.YNc(0,vs,3,2,"div",7),2&n&&p.Q6J("ngIf",!s.$implicit.collapsed)}const _a=["defaultDayTemplate"],Hu=["content"];function ya(n,s){if(1&n&&p._UZ(0,"div",7),2&n){const l=s.currentMonth,h=s.selected,m=s.disabled,C=s.focused;p.Q6J("date",s.date)("currentMonth",l)("selected",h)("disabled",m)("focused",C)}}function $o(n,s){if(1&n&&(p.TgZ(0,"div",12),p._uU(1),p.qZA()),2&n){const t=p.oxw().$implicit,l=p.oxw(2);p.xp6(1),p.hij(" ",l.i18n.getMonthLabel(t.firstDate)," ")}}function La(n,s){if(1&n&&(p.TgZ(0,"div",9),p.YNc(1,$o,2,1,"div",10),p._UZ(2,"ngb-datepicker-month",11),p.qZA()),2&n){const t=s.$implicit,l=p.oxw(2);p.xp6(1),p.Q6J("ngIf","none"===l.navigation||l.displayMonths>1&&"select"===l.navigation),p.xp6(1),p.Q6J("month",t.firstDate)}}function bl(n,s){if(1&n&&p.YNc(0,La,3,2,"div",8),2&n){const t=p.oxw();p.Q6J("ngForOf",t.model.months)}}function va(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"ngb-datepicker-navigation",13),p.NdJ("navigate",function(h){p.CHM(t);const m=p.oxw();return p.KtG(m.onNavigateEvent(h))})("select",function(h){p.CHM(t);const m=p.oxw();return p.KtG(m.onNavigateDateSelect(h))}),p.qZA()}if(2&n){const t=p.oxw();p.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function tl(n,s){}function ba(n,s){}const nl=["dialog"],rl=["ngbNavOutlet",""];function lu(n,s){}const ia=function(n){return{$implicit:n}};function wc(n,s){if(1&n&&(p.TgZ(0,"div",2),p.YNc(1,lu,0,0,"ng-template",3),p.qZA()),2&n){const t=p.oxw().$implicit,l=p.oxw();p.Q6J("item",t)("nav",l.nav)("role",l.paneRole),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",p.VKq(5,ia,t.active||l.isPanelTransitioning(t)))}}function uu(n,s){if(1&n&&p.YNc(0,wc,2,7,"div",1),2&n){const t=s.$implicit,l=p.oxw();p.Q6J("ngIf",t.isPanelInDom()||l.isPanelTransitioning(t))}}function Vl(n,s){1&n&&(p.TgZ(0,"span",9),p.SDv(1,10),p.qZA())}function $u(n,s){1&n&&(p.TgZ(0,"span",9),p.SDv(1,11),p.qZA())}function Ai(n,s){1&n&&(p.TgZ(0,"span",9),p.SDv(1,12),p.qZA())}function ui(n,s){1&n&&(p.TgZ(0,"span",9),p.SDv(1,13),p.qZA())}function ii(n,s){1&n&&p._uU(0,"...")}function Gl(n,s){1&n&&(p.TgZ(0,"span",15),p._uU(1,"(current)"),p.qZA())}function Oi(n,s){if(1&n&&(p._uU(0),p.YNc(1,Gl,2,0,"span",14)),2&n){const t=s.$implicit,l=s.currentPage;p.hij(" ",t," "),p.xp6(1),p.Q6J("ngIf",t===l)}}function zu(n,s){}const Dc=function(n){return{disabled:!0,currentPage:n}};function El(n,s){if(1&n&&(p.TgZ(0,"a",20),p.YNc(1,zu,0,0,"ng-template",8),p.qZA()),2&n){const t=p.oxw(2).$implicit,l=p.oxw(),h=p.MAs(9);p.xp6(1),p.Q6J("ngTemplateOutlet",(null==l.tplEllipsis?null:l.tplEllipsis.templateRef)||h)("ngTemplateOutletContext",p.VKq(2,Dc,t))}}function jl(n,s){}const il=function(n,s,t){return{disabled:n,$implicit:s,currentPage:t}};function sa(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"a",21),p.NdJ("click",function(h){p.CHM(t);const m=p.oxw().$implicit;return p.oxw(2).selectPage(m),p.KtG(h.preventDefault())}),p.YNc(1,jl,0,0,"ng-template",8),p.qZA()}if(2&n){const t=p.oxw().$implicit,l=p.oxw(),h=l.disabled,m=l.$implicit,C=p.oxw(),F=p.MAs(11);p.uIk("tabindex",h?"-1":null)("aria-disabled",h?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==C.tplNumber?null:C.tplNumber.templateRef)||F)("ngTemplateOutletContext",p.kEZ(4,il,h,t,m))}}function k(n,s){if(1&n&&(p.TgZ(0,"li",17),p.YNc(1,El,2,4,"a",18),p.YNc(2,sa,2,8,"a",19),p.qZA()),2&n){const t=s.$implicit,l=p.oxw(),h=l.$implicit,m=l.disabled,C=p.oxw();p.ekj("active",t===h)("disabled",C.isEllipsis(t)||m),p.uIk("aria-current",t===h?"page":null),p.xp6(1),p.Q6J("ngIf",C.isEllipsis(t)),p.xp6(1),p.Q6J("ngIf",!C.isEllipsis(t))}}function K(n,s){1&n&&p.YNc(0,k,3,7,"li",16),2&n&&p.Q6J("ngForOf",s.pages)}function B(n,s){}const re=function(n,s){return{disabled:n,currentPage:s}};function ve(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",22),p.NdJ("click",function(h){return p.CHM(t),p.oxw().selectPage(1),p.KtG(h.preventDefault())}),p.YNc(2,B,0,0,"ng-template",8),p.qZA()()}if(2&n){const t=p.oxw(),l=p.MAs(1);p.ekj("disabled",t.previousDisabled()),p.xp6(1),p.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||l)("ngTemplateOutletContext",p.WLB(6,re,t.previousDisabled(),t.page))}}function Je(n,s){}const St=function(n){return{disabled:n}};function fn(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",23),p.NdJ("click",function(h){p.CHM(t);const m=p.oxw();return m.selectPage(m.page-1),p.KtG(h.preventDefault())}),p.YNc(2,Je,0,0,"ng-template",8),p.qZA()()}if(2&n){const t=p.oxw(),l=p.MAs(3);p.ekj("disabled",t.previousDisabled()),p.xp6(1),p.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||l)("ngTemplateOutletContext",p.VKq(6,St,t.previousDisabled()))}}function vr(n,s){}function Dt(n,s){}function Cn(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",24),p.NdJ("click",function(h){p.CHM(t);const m=p.oxw();return m.selectPage(m.page+1),p.KtG(h.preventDefault())}),p.YNc(2,Dt,0,0,"ng-template",8),p.qZA()()}if(2&n){const t=p.oxw(),l=p.MAs(5);p.ekj("disabled",t.nextDisabled()),p.xp6(1),p.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||l)("ngTemplateOutletContext",p.WLB(6,re,t.nextDisabled(),t.page))}}function zn(n,s){}function qn(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"li",17)(1,"a",25),p.NdJ("click",function(h){p.CHM(t);const m=p.oxw();return m.selectPage(m.pageCount),p.KtG(h.preventDefault())}),p.YNc(2,zn,0,0,"ng-template",8),p.qZA()()}if(2&n){const t=p.oxw(),l=p.MAs(7);p.ekj("disabled",t.nextDisabled()),p.xp6(1),p.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||l)("ngTemplateOutletContext",p.WLB(6,re,t.nextDisabled(),t.page))}}const jt=function(n,s,t){return{$implicit:n,pages:s,disabled:t}};function it(n,s){if(1&n&&(p.TgZ(0,"span"),p.SDv(1,1),p.ALo(2,"percent"),p.qZA()),2&n){const t=p.oxw();p.xp6(2),p.pQV(p.lcZ(2,1,t.getValue()/t.max)),p.QtT(1)}}function Ot(n,s){1&n&&p._uU(0),2&n&&p.Oqu(100===s.fill?"\u2605":"\u2606")}function si(n,s){}function Co(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"span",2),p._uU(1),p.qZA(),p.TgZ(2,"span",3),p.NdJ("mouseenter",function(){const m=p.CHM(t).index,C=p.oxw();return p.KtG(C.enter(m+1))})("click",function(){const m=p.CHM(t).index,C=p.oxw();return p.KtG(C.handleClick(m+1))}),p.YNc(3,si,0,0,"ng-template",4),p.qZA()}if(2&n){const t=s.index,l=p.oxw(),h=p.MAs(1);p.xp6(1),p.hij("(",t<l.nextRate?"*":" ",")"),p.xp6(1),p.Udp("cursor",l.isInteractive()?"pointer":"default"),p.xp6(1),p.Q6J("ngTemplateOutlet",l.starTemplate||l.starTemplateFromContent||h)("ngTemplateOutletContext",l.contexts[t])}}function sl(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.changeHour(h.hourStep))}),p._UZ(1,"span",12),p.TgZ(2,"span",13),p.SDv(3,14),p.qZA()()}if(2&n){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function ol(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.changeHour(-h.hourStep))}),p._UZ(1,"span",15),p.TgZ(2,"span",13),p.SDv(3,16),p.qZA()()}if(2&n){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function al(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.changeMinute(h.minuteStep))}),p._UZ(1,"span",12),p.TgZ(2,"span",13),p.SDv(3,17),p.qZA()()}if(2&n){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function Ea(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.changeMinute(-h.minuteStep))}),p._UZ(1,"span",15),p.TgZ(2,"span",13),p.SDv(3,18),p.qZA()()}if(2&n){const t=p.oxw();p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function zd(n,s){1&n&&(p.TgZ(0,"div",5),p._uU(1,":"),p.qZA())}function oa(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw(2);return p.KtG(h.changeSecond(h.secondStep))}),p._UZ(1,"span",12),p.TgZ(2,"span",13),p.SDv(3,21),p.qZA()()}if(2&n){const t=p.oxw(2);p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function Wu(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){p.CHM(t);const h=p.oxw(2);return p.KtG(h.changeSecond(-h.secondStep))}),p._UZ(1,"span",15),p.TgZ(2,"span",13),p.SDv(3,22),p.qZA()()}if(2&n){const t=p.oxw(2);p.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),p.Q6J("disabled",t.disabled)}}function cu(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"div",19),p.YNc(1,oa,4,7,"button",3),p.TgZ(2,"input",20),p.NdJ("change",function(h){p.CHM(t);const m=p.oxw();return p.KtG(m.updateSecond(h.target.value))})("blur",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.handleBlur())})("input",function(h){p.CHM(t);const m=p.oxw();return p.KtG(m.formatInput(h.target))})("keydown.ArrowUp",function(h){p.CHM(t);const m=p.oxw();return m.changeSecond(m.secondStep),p.KtG(h.preventDefault())})("keydown.ArrowDown",function(h){p.CHM(t);const m=p.oxw();return m.changeSecond(-m.secondStep),p.KtG(h.preventDefault())}),p.qZA(),p.YNc(3,Wu,4,7,"button",3),p.qZA()}if(2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.spinners),p.xp6(1),p.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),p.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),p.xp6(1),p.Q6J("ngIf",t.spinners)}}function To(n,s){1&n&&p._UZ(0,"div",5)}function wl(n,s){if(1&n&&(p.ynx(0),p.SDv(1,27),p.BQk()),2&n){const t=p.oxw(2);p.xp6(1),p.pQV(t.i18n.getAfternoonPeriod()),p.QtT(1)}}function Fn(n,s){if(1&n&&p.SDv(0,28),2&n){const t=p.oxw(2);p.pQV(t.i18n.getMorningPeriod()),p.QtT(0)}}function wa(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"div",23)(1,"button",24),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.toggleMeridian())}),p.YNc(2,wl,2,1,"ng-container",25),p.YNc(3,Fn,1,1,"ng-template",null,26,p.W1O),p.qZA()()}if(2&n){const t=p.MAs(4),l=p.oxw();p.xp6(1),p.ekj("btn-sm",l.isSmallSize)("btn-lg",l.isLargeSize)("disabled",l.disabled),p.Q6J("disabled",l.disabled),p.xp6(1),p.Q6J("ngIf",l.model&&l.model.hour>=12)("ngIfElse",t)}}function du(n,s){if(1&n&&(p.TgZ(0,"strong",3),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Oqu(t.header)}}function sr(n,s){}function yn(n,s){if(1&n){const t=p.EpF();p.TgZ(0,"div",4),p.YNc(1,sr,0,0,"ng-template",5),p.TgZ(2,"button",6),p.NdJ("click",function(){p.CHM(t);const h=p.oxw();return p.KtG(h.hide())}),p.qZA()()}if(2&n){const t=p.oxw(),l=p.MAs(1);p.xp6(1),p.Q6J("ngTemplateOutlet",t.contentHeaderTpl||l)}}function Ua(n,s){if(1&n&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&n){const t=p.oxw().$implicit,l=p.oxw();p.Tol(l.highlightClass),p.xp6(1),p.Oqu(t)}}function lr(n,s){if(1&n&&p._uU(0),2&n){const t=p.oxw().$implicit;p.Oqu(t)}}function Ic(n,s){if(1&n&&(p.YNc(0,Ua,2,3,"span",1),p.YNc(1,lr,1,1,"ng-template",null,2,p.W1O)),2&n){const t=s.odd,l=p.MAs(2);p.Q6J("ngIf",t)("ngIfElse",l)}}function Nr(n){return parseInt(`${n}`,10)}function hu(n){return null!=n?`${n}`:""}function Lr(n,s,t=0){return Math.max(Math.min(n,s),t)}function Ba(n){return"string"==typeof n}function gr(n){return!isNaN(Nr(n))}function Ni(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function So(n){return null!=n}function aa(n){return gr(n)?`0${n}`.slice(-2):""}function Dl(n,s){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(s)>=0}function eo(n){return(n||document.body).getBoundingClientRect()}function ll(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const Ia={animation:!0,transitionTimerDelayMs:5},qu=()=>{},{transitionTimerDelayMs:Oo}=Ia,Ur=new Map,Ei=(n,s,t,l)=>{let h=l.context||{};const m=Ur.get(s);if(m)switch(l.runningTransition){case"continue":return We.E;case"stop":n.run(()=>m.transition$.complete()),h=Object.assign(m.context,h),Ur.delete(s)}const C=t(s,l.animation,h)||qu;if(!l.animation||"none"===window.getComputedStyle(s).transitionProperty)return n.run(()=>C()),(0,st.of)(void 0).pipe(function ot(n){return s=>new Pt.y(t=>s.subscribe({next:C=>n.run(()=>t.next(C)),error:C=>n.run(()=>t.error(C)),complete:()=>n.run(()=>t.complete())}))}(n));const F=new $e.x,G=new $e.x,Y=F.pipe(function Kn(...n){return s=>(0,Hn.z)(s,(0,st.of)(...n))}(!0));Ur.set(s,{transition$:F,complete:()=>{G.next(),G.complete()},context:h});const ue=function Ao(n){const{transitionDelay:s,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(s)+parseFloat(t))}(s);return n.runOutsideAngular(()=>{const Ne=ft(s,"transitionend").pipe(In(Y),(0,or.h)(({target:o})=>o===s));(function Dn(...n){return 1===(n=Rr(n)).length?(0,at.Xf)(n[0]):new Pt.y(function kt(n){return s=>{let t=[];for(let l=0;t&&!s.closed&&l<n.length;l++)t.push((0,at.Xf)(n[l]).subscribe((0,en.x)(s,h=>{if(t){for(let m=0;m<t.length;m++)m!==l&&t[m].unsubscribe();t=null}s.next(h)})))}}(n))})(Vn(ue+Oo).pipe(In(Y)),Ne,G).pipe(In(Y)).subscribe(()=>{Ur.delete(s),n.run(()=>{C(),F.next(),F.complete()})})}),F.asObservable()},Va=(n,s,t)=>{let{direction:l,maxSize:h,dimension:m}=t;const{classList:C}=n;function F(){C.add("collapse"),"show"===l?C.add("show"):C.remove("show")}if(s)return h||(h=function Yu(n,s){if(typeof navigator>"u")return"0px";const{classList:t}=n,l=t.contains("show");l||t.add("show"),n.style[s]="";const h=n.getBoundingClientRect()[s]+"px";return l||t.remove("show"),h}(n,m),t.maxSize=h,n.style[m]="show"!==l?h:"0px",C.remove("collapse"),C.remove("collapsing"),C.remove("show"),eo(n),C.add("collapsing")),n.style[m]="show"===l?h:"0px",()=>{F(),C.remove("collapsing"),n.style[m]=""};F()};let Il=(()=>{class n{constructor(){this.animation=Ia.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),go=(()=>{class n{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Il))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qc=0,Ca=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),ul=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),fu=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),ti=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+Qc++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new p.vpe,this.hidden=new p.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["ngb-panel"]],contentQueries:function(t,l,h){if(1&t&&(p.Suo(h,ul,4),p.Suo(h,Ca,4),p.Suo(h,fu,4)),2&t){let m;p.iGM(m=p.CRH())&&(l.titleTpls=m),p.iGM(m=p.CRH())&&(l.headerTpls=m),p.iGM(m=p.CRH())&&(l.contentTpls=m)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),pu=(()=>{class n{constructor(t){this._El=t,this.ngbRef=new p.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),to=(()=>{class n{constructor(t,l){this.accordion=t,this.panel=l}set ngbPanelToggle(t){t&&(this.panel=t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36((0,p.Gpc)(()=>Ga)),p.Y36(ti,9))},n.\u0275dir=p.lG2({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,l){1&t&&p.NdJ("click",function(){return l.accordion.toggle(l.panel.id)}),2&t&&(p.Ikx("disabled",l.panel.disabled),p.uIk("aria-expanded",l.panel.isOpen)("aria-controls",l.panel.id),p.ekj("collapsed",!l.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),Ga=(()=>{class n{constructor(t,l,h){this._ngZone=l,this._changeDetector=h,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new p.vpe,this.shown=new p.vpe,this.hidden=new p.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const l=this._findPanelById(t);l&&this._changeOpenState(l,!l.isOpen)}ngAfterContentChecked(){Ba(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe((0,Pe.q)(1)).subscribe(()=>{this.panels.forEach(t=>{const l=t.panelDiv;l?t.initClassDone||(t.initClassDone=!0,Ei(this._ngZone,l,Va,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,l){if(null!=t&&!t.disabled&&t.isOpen!==l){let h=!1;this.panelChange.emit({panelId:t.id,nextState:l,preventDefault:()=>{h=!0}}),h||(t.isOpen=l,t.transitionRunning=!0,l&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,l=!0){this.panels.forEach(h=>{h.id!==t&&h.isOpen&&(h.isOpen=!1,h.transitionRunning=l)})}_findPanelById(t){return this.panels.find(l=>l.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(l=>{l.transitionRunning&&Ei(this._ngZone,l.panelDiv,Va,{animation:t,runningTransition:"stop",context:{direction:l.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{l.transitionRunning=!1;const{id:m}=l;l.isOpen?(l.shown.emit(),this.shown.emit(m)):(l.hidden.emit(),this.hidden.emit(m))})})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(go),p.Y36(p.R0b),p.Y36(p.sBO))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-accordion"]],contentQueries:function(t,l,h){if(1&t&&p.Suo(h,ti,4),2&t){let m;p.iGM(m=p.CRH())&&(l.panels=m)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,l){2&t&&p.uIk("aria-multiselectable",!l.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[p.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,l){1&t&&(p.YNc(0,fo,3,3,"ng-template",0,1,p.W1O),p.YNc(2,po,4,11,"ng-template",2)),2&t&&(p.xp6(2),p.Q6J("ngForOf",l.panels))},dependencies:[fe.ax,fe.tP,to,pu,Ca,fe.O5],encapsulation:2}),n})(),no=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Ga]}),n})();const gu=({classList:n})=>{n.remove("show")};let T=(()=>{class n{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Il))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S=(()=>{class n{constructor(t,l,h,m){this._renderer=l,this._element=h,this._zone=m,this.closed=new p.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=Ei(this._zone,this._element.nativeElement,gu,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const l=t.type;l&&!l.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${l.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${l.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(T),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(p.R0b))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,l){2&t&&p.ekj("fade",l.animation)("alert-dismissible",l.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[p.TTD,p.jDz],ngContentSelectors:ea,decls:2,vars:1,consts:function(){let s;return s=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",s,3,"click",4,"ngIf"],["type","button","aria-label",s,1,"btn-close",3,"click"]]},template:function(t,l){1&t&&(p.F$t(),p.Hsn(0),p.YNc(1,jo,1,0,"button",0)),2&t&&(p.xp6(1),p.Q6J("ngIf",l.dismissible))},dependencies:[fe.O5],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[S]}),n})();var P=(()=>{return(n=P||(P={})).START="start",n.END="end",P;var n})();const $=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),J=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},se=n=>{J(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},Be=(n,s,{direction:t})=>{const{classList:l}=n;return s?($(n)?J(l):(l.add("carousel-item-"+(t===P.START?"next":"prev")),eo(n),l.add("carousel-item-"+t)),()=>{se(l),l.add("active")}):(J(l),se(l),void l.add("active"))},At=(n,s,{direction:t})=>{const{classList:l}=n;return s?($(n)?J(l):l.add("carousel-item-"+t),()=>{se(l),l.remove("active")}):(J(l),se(l),void l.remove("active"))};let an=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Il))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nn=0,Yn=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+nn++,this.slid=new p.vpe}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),ci=(()=>{class n{constructor(t,l,h,m,C){this._platformId=l,this._ngZone=h,this._cd=m,this._container=C,this.NgbSlideEventSource=Zr,this._destroy$=new $e.x,this._interval$=new Zn.X(0),this._mouseHover$=new Zn.X(!1),this._focused$=new Zn.X(!1),this._pauseOnHover$=new Zn.X(!1),this._pauseOnFocus$=new Zn.X(!1),this._pause$=new Zn.X(!1),this._wrap$=new Zn.X(!1),this.slide=new p.vpe,this.slid=new p.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Zr.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Zr.ARROW_RIGHT)}ngAfterContentInit(){(0,fe.NF)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=(0,Kr.a)([this.slide.pipe((0,Fe.U)(l=>l.current),(0,Pr.O)(this.activeId)),this._wrap$,this.slides.changes.pipe((0,Pr.O)(null))]).pipe((0,Fe.U)(([l,h])=>{const m=this.slides.toArray(),C=this._getSlideIdxById(l);return h?m.length>1:C<m.length-1}),(0,Nn.x)());(0,Kr.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,Fe.U)(([l,h,m,C,F,G,Y])=>l||h&&m||C&&F||!Y?0:G),(0,Nn.x)(),(0,Dr.w)(l=>l>0?Vn(l,l):xr),In(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Zr.TIMER)))}),this.slides.changes.pipe(In(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(n=>{Ur.get(n)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,Pe.q)(1)).subscribe(()=>{for(const{id:t}of this.slides){const l=this._getSlideElement(t);t===this.activeId?l.classList.add("active"):l.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,l){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),l)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),P.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),P.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,l,h){const m=this._transitionIds;if(m&&(m[0]!==t||m[1]!==this.activeId))return;let C=this._getSlideById(t);if(C&&C.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:C.id,direction:l,paused:this._pause$.value,source:h});const F={animation:this.animation,runningTransition:"stop",context:{direction:l}},G=[],Y=this._getSlideById(this.activeId);if(Y){const o=Ei(this._ngZone,this._getSlideElement(Y.id),At,F);o.subscribe(()=>{Y.slid.emit({isShown:!1,direction:l,source:h})}),G.push(o)}const ue=this.activeId;this.activeId=C.id;const Ne=this._getSlideById(this.activeId),i=Ei(this._ngZone,this._getSlideElement(C.id),Be,F);i.subscribe(()=>{Ne?.slid.emit({isShown:!0,direction:l,source:h})}),G.push(i),on(...G).pipe((0,Pe.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:ue,current:C.id,direction:l,paused:this._pause$.value,source:h})})}this._cd.markForCheck()}_getSlideEventDirection(t,l){return this._getSlideIdxById(t)>this._getSlideIdxById(l)?P.END:P.START}_getSlideById(t){return this.slides.find(l=>l.id===t)||null}_getSlideIdxById(t){const l=this._getSlideById(t);return null!=l?this.slides.toArray().indexOf(l):-1}_getNextSlide(t){const l=this.slides.toArray(),h=this._getSlideIdxById(t);return h===l.length-1?this.wrap?l[0].id:l[l.length-1].id:l[h+1].id}_getPrevSlide(t){const l=this.slides.toArray(),h=this._getSlideIdxById(t);return 0===h?this.wrap?l[l.length-1].id:l[0].id:l[h-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(an),p.Y36(p.Lbi),p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(p.SBq))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,l,h){if(1&t&&p.Suo(h,Yn,4),2&t){let m;p.iGM(m=p.CRH())&&(l.slides=m)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,l){1&t&&p.NdJ("keydown.arrowLeft",function(){return l.keyboard&&l.arrowLeft()})("keydown.arrowRight",function(){return l.keyboard&&l.arrowRight()})("mouseenter",function(){return l.mouseHover=!0})("mouseleave",function(){return l.mouseHover=!1})("focusin",function(){return l.focused=!0})("focusout",function(){return l.focused=!1}),2&t&&(p.uIk("aria-activedescendant","slide-"+l.activeId),p.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[p.jDz],decls:6,vars:6,consts:function(){let s,t,l;return s=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,l=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],s,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],l]},template:function(t,l){1&t&&(p.TgZ(0,"div",0),p.YNc(1,ta,1,5,"button",1),p.qZA(),p.TgZ(2,"div",2),p.YNc(3,Io,4,4,"div",3),p.qZA(),p.YNc(4,ga,4,0,"button",4),p.YNc(5,j,4,0,"button",5)),2&t&&(p.ekj("visually-hidden",!l.showNavigationIndicators),p.xp6(1),p.Q6J("ngForOf",l.slides),p.xp6(2),p.Q6J("ngForOf",l.slides),p.xp6(1),p.Q6J("ngIf",l.showNavigationArrows),p.xp6(1),p.Q6J("ngIf",l.showNavigationArrows))},dependencies:[fe.ax,fe.tP,fe.O5],encapsulation:2,changeDetection:0}),n})();var Zr=(()=>{return(n=Zr||(Zr={})).TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator",Zr;var n})();let Us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[ci]}),n})(),ja=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();class di{constructor(s,t,l){this.year=Ni(s)?s:null,this.month=Ni(t)?t:null,this.day=Ni(l)?l:null}static from(s){return s instanceof di?s:s?new di(s.year,s.month,s.day):null}equals(s){return null!=s&&this.year===s.year&&this.month===s.month&&this.day===s.day}before(s){return!!s&&(this.year===s.year?this.month===s.month?this.day!==s.day&&this.day<s.day:this.month<s.month:this.year<s.year)}after(s){return!!s&&(this.year===s.year?this.month===s.month?this.day!==s.day&&this.day>s.day:this.month>s.month:this.year>s.year)}}function Bs(n,s){return!function z(n,s){return!n&&!s||!!n&&!!s&&n.equals(s)}(n,s)}function U(n,s){return!(!n&&!s||n&&s&&n.year===s.year&&n.month===s.month)}function we(n,s,t){return n&&s&&n.before(s)?s:n&&t&&n.after(t)?t:n||null}function je(n,s){const{minDate:t,maxDate:l,disabled:h,markDisabled:m}=s;return!(null==n||h||m&&m(n,{year:n.year,month:n.month})||t&&n.before(t)||l&&n.after(l))}function No(n){return new di(n.getFullYear(),n.getMonth()+1,n.getDate())}function Xi(n){const s=new Date(n.year,n.month-1,n.day,12);return isNaN(s.getTime())||s.setFullYear(n.year),s}let er=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function $l(){return new Hr}()},providedIn:"root"}),n})(),Hr=(()=>{class n extends er{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,l="d",h=1){let m=Xi(t),C=!0,F=m.getMonth();switch(l){case"y":m.setFullYear(m.getFullYear()+h);break;case"m":F+=h,m.setMonth(F),F%=12,F<0&&(F+=12);break;case"d":m.setDate(m.getDate()+h),C=!1;break;default:return t}return C&&m.getMonth()!==F&&m.setDate(0),No(m)}getPrev(t,l="d",h=1){return this.getNext(t,l,-h)}getWeekday(t){let h=Xi(t).getDay();return 0===h?7:h}getWeekNumber(t,l){7===l&&(l=0);const C=Xi(t[(11-l)%7]);C.setDate(C.getDate()+4-(C.getDay()||7));const F=C.getTime();return C.setMonth(0),C.setDate(1),Math.floor(Math.round((F-C.getTime())/864e5)/7)+1}getToday(){return No(new Date)}isValid(t){if(!(t&&Ni(t.year)&&Ni(t.month)&&Ni(t.day)&&0!==t.year))return!1;const l=Xi(t);return!isNaN(l.getTime())&&l.getFullYear()===t.year&&l.getMonth()+1===t.month&&l.getDate()===t.day}}return n.\u0275fac=function(){let s;return function(l){return(s||(s=p.n5z(n)))(l||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(t){let l=null;return l=t?new t:function Vs(n){return new Cc(n)}(p.LFG(p.soG)),l},providedIn:"root"}),n})(),Cc=(()=>{class n extends Ts{constructor(t){super(),this._locale=t,this._monthsShort=(0,fe.UT)(t,fe.x.Standalone,fe.Tn.Abbreviated),this._monthsFull=(0,fe.UT)(t,fe.x.Standalone,fe.Tn.Wide)}getWeekdayLabel(t,l){const h=(0,fe.Mn)(this._locale,fe.x.Standalone,void 0===l?fe.Tn.Short:l);return h.map((C,F)=>h[(F+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){const l=new Date(t.year,t.month-1,t.day);return(0,fe.p6)(l,"fullDate",this._locale)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Zu=(()=>{class n{constructor(t,l){this._calendar=t,this._i18n=l,this._VALIDATORS={dayTemplateData:h=>{if(this._state.dayTemplateData!==h)return{dayTemplateData:h}},displayMonths:h=>{if(Ni(h=Nr(h))&&h>0&&this._state.displayMonths!==h)return{displayMonths:h}},disabled:h=>{if(this._state.disabled!==h)return{disabled:h}},firstDayOfWeek:h=>{if(Ni(h=Nr(h))&&h>=0&&this._state.firstDayOfWeek!==h)return{firstDayOfWeek:h}},focusVisible:h=>{if(this._state.focusVisible!==h&&!this._state.disabled)return{focusVisible:h}},markDisabled:h=>{if(this._state.markDisabled!==h)return{markDisabled:h}},maxDate:h=>{const m=this.toValidDate(h,null);if(Bs(this._state.maxDate,m))return{maxDate:m}},minDate:h=>{const m=this.toValidDate(h,null);if(Bs(this._state.minDate,m))return{minDate:m}},navigation:h=>{if(this._state.navigation!==h)return{navigation:h}},outsideDays:h=>{if(this._state.outsideDays!==h)return{outsideDays:h}},weekdays:h=>{const m=!0===h||!1===h?fe.Tn.Short:h,C=!0!==h&&!1!==h||h;if(this._state.weekdayWidth!==m||this._state.weekdaysVisible!==C)return{weekdayWidth:m,weekdaysVisible:C}}},this._model$=new $e.x,this._dateSelect$=new $e.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:fe.Tn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe((0,or.h)(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe((0,or.h)(t=>null!==t))}set(t){let l=Object.keys(t).map(h=>this._VALIDATORS[h](t[h])).reduce((h,m)=>({...h,...m}),{});Object.keys(l).length>0&&this._nextState(l)}focus(t){const l=this.toValidDate(t,null);null!=l&&!this._state.disabled&&Bs(this._state.focusDate,l)&&this._nextState({focusDate:t})}focusSelect(){je(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const l=this.toValidDate(t,this._calendar.getToday());null!=l&&!this._state.disabled&&(!this._state.firstDate||U(this._state.firstDate,l))&&this._nextState({firstDate:l})}select(t,l={}){const h=this.toValidDate(t,null);null!=h&&!this._state.disabled&&(Bs(this._state.selectedDate,h)&&this._nextState({selectedDate:h}),l.emitEvent&&je(h,this._state)&&this._dateSelect$.next(h))}toValidDate(t,l){const h=di.from(t);return void 0===l&&(l=this._calendar.getToday()),this._calendar.isValid(h)?h:l}getMonth(t){for(let l of this._state.months)if(t.month===l.number&&t.year===l.year)return l;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const l=this._updateState(t);this._patchContexts(l),this._state=l,this._model$.next(this._state)}_patchContexts(t){const{months:l,displayMonths:h,selectedDate:m,focusDate:C,focusVisible:F,disabled:G,outsideDays:Y}=t;t.months.forEach(ue=>{ue.weeks.forEach(Ne=>{Ne.days.forEach(i=>{C&&(i.context.focused=C.equals(i.date)&&F),i.tabindex=!G&&C&&i.date.equals(C)&&C.month===ue.number?0:-1,!0===G&&(i.context.disabled=!0),void 0!==m&&(i.context.selected=null!==m&&m.equals(i.date)),ue.number!==i.date.month&&(i.hidden="hidden"===Y||"collapsed"===Y||h>1&&i.date.after(l[0].firstDate)&&i.date.before(l[h-1].lastDate))})})})}_updateState(t){const l=Object.assign({},this._state,t);let h=l.firstDate;if(("minDate"in t||"maxDate"in t)&&(function te(n,s){if(s&&n&&s.before(n))throw new Error(`'maxDate' ${s} should be greater than 'minDate' ${n}`)}(l.minDate,l.maxDate),l.focusDate=we(l.focusDate,l.minDate,l.maxDate),l.firstDate=we(l.firstDate,l.minDate,l.maxDate),h=l.focusDate),"disabled"in t&&(l.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(h=l.selectedDate),"focusVisible"in t||"focusDate"in t&&(l.focusDate=we(l.focusDate,l.minDate,l.maxDate),h=l.focusDate,0!==l.months.length&&l.focusDate&&!l.focusDate.before(l.firstDate)&&!l.focusDate.after(l.lastDate)))return l;if("firstDate"in t&&(l.firstDate=we(l.firstDate,l.minDate,l.maxDate),h=l.firstDate),h){const C=function Rn(n,s,t,l,h){const{displayMonths:m,months:C}=t,F=C.splice(0,C.length);return Array.from({length:m},(Y,ue)=>{const Ne=Object.assign(n.getNext(s,"m",ue),{day:1});if(C[ue]=null,!h){const i=F.findIndex(o=>o.firstDate.equals(Ne));-1!==i&&(C[ue]=F.splice(i,1)[0])}return Ne}).forEach((Y,ue)=>{null===C[ue]&&(C[ue]=function Jn(n,s,t,l,h={}){const{dayTemplateData:m,minDate:C,maxDate:F,firstDayOfWeek:G,markDisabled:Y,outsideDays:ue,weekdayWidth:Ne,weekdaysVisible:i}=t,o=n.getToday();h.firstDate=null,h.lastDate=null,h.number=s.month,h.year=s.year,h.weeks=h.weeks||[],h.weekdays=h.weekdays||[],s=function Sn(n,s,t){const l=n.getDaysPerWeek(),h=new di(s.year,s.month,1),m=n.getWeekday(h)%l;return n.getPrev(h,"d",(l+m-t)%l)}(n,s,G),i||(h.weekdays.length=0);for(let u=0;u<n.getWeeksPerMonth();u++){let d=h.weeks[u];d||(d=h.weeks[u]={number:0,days:[],collapsed:!0});const g=d.days;for(let y=0;y<n.getDaysPerWeek();y++){0===u&&i&&(h.weekdays[y]=l.getWeekdayLabel(n.getWeekday(s),Ne));const I=new di(s.year,s.month,s.day),O=n.getNext(I),x=l.getDayAriaLabel(I);let W=!!(C&&I.before(C)||F&&I.after(F));!W&&Y&&(W=Y(I,{month:h.number,year:h.year}));let X=I.equals(o),he=m?m(I,{month:h.number,year:h.year}):void 0;null===h.firstDate&&I.month===h.number&&(h.firstDate=I),I.month===h.number&&O.month!==h.number&&(h.lastDate=I);let Ae=g[y];Ae||(Ae=g[y]={}),Ae.date=I,Ae.context=Object.assign(Ae.context||{},{$implicit:I,date:I,data:he,currentMonth:h.number,currentYear:h.year,disabled:W,focused:!1,selected:!1,today:X}),Ae.tabindex=-1,Ae.ariaLabel=x,Ae.hidden=!1,s=O}d.number=n.getWeekNumber(g.map(y=>y.date),G),d.collapsed="collapsed"===ue&&g[0].date.month!==h.number&&g[g.length-1].date.month!==h.number}return h}(n,Y,t,l,F.shift()||{}))}),C}(this._calendar,h,l,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);l.months=C,l.firstDate=C[0].firstDate,l.lastDate=C[C.length-1].lastDate,"selectedDate"in t&&!je(l.selectedDate,l)&&(l.selectedDate=null),"firstDate"in t&&(!l.focusDate||l.focusDate.before(l.firstDate)||l.focusDate.after(l.lastDate))&&(l.focusDate=h);const F=!this._state.firstDate||this._state.firstDate.year!==l.firstDate.year,G=!this._state.firstDate||this._state.firstDate.month!==l.firstDate.month;"select"===l.navigation?(("minDate"in t||"maxDate"in t||0===l.selectBoxes.years.length||F)&&(l.selectBoxes.years=function Ut(n,s,t){if(!n)return[];const l=s?Math.max(s.year,n.year-500):n.year-10,m=(t?Math.min(t.year,n.year+500):n.year+10)-l+1,C=Array(m);for(let F=0;F<m;F++)C[F]=l+F;return C}(l.firstDate,l.minDate,l.maxDate)),("minDate"in t||"maxDate"in t||0===l.selectBoxes.months.length||F)&&(l.selectBoxes.months=function tt(n,s,t,l){if(!s)return[];let h=n.getMonths(s.year);if(t&&s.year===t.year){const m=h.findIndex(C=>C===t.month);h=h.slice(m)}if(l&&s.year===l.year){const m=h.findIndex(C=>C===l.month);h=h.slice(0,m+1)}return h}(this._calendar,l.firstDate,l.minDate,l.maxDate))):l.selectBoxes={years:[],months:[]},("arrows"===l.navigation||"select"===l.navigation)&&(G||F||"minDate"in t||"maxDate"in t||"disabled"in t)&&(l.prevDisabled=l.disabled||function Tn(n,s,t){const l=Object.assign(n.getPrev(s,"m"),{day:1});return null!=t&&(l.year===t.year&&l.month<t.month||l.year<t.year&&1===t.month)}(this._calendar,l.firstDate,l.minDate),l.nextDisabled=l.disabled||function gn(n,s,t){const l=Object.assign(n.getNext(s,"m"),{day:1});return null!=t&&l.after(t)}(this._calendar,l.lastDate,l.maxDate))}return l}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(er),p.LFG(Ts))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();var zl=(()=>{return(n=zl||(zl={}))[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT",zl;var n})();let Kd=(()=>{class n{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ts))},n.\u0275cmp=p.Xpm({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,l){2&t&&p.ekj("bg-primary",l.selected)("text-white",l.selected)("text-muted",l.isMuted())("outside",l.isMuted())("active",l.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[p.jDz],attrs:R,decls:1,vars:1,template:function(t,l){1&t&&p._uU(0),2&t&&p.Oqu(l.i18n.getDayNumerals(l.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),Jh=(()=>{class n{constructor(t,l){this.i18n=t,this._renderer=l,this.select=new p.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new di(this.date.year,Nr(t),1))}changeYear(t){this.select.emit(new di(Nr(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ts),p.Y36(p.Qsj))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,l){if(1&t&&(p.Gf(L,7,p.SBq),p.Gf(oe,7,p.SBq)),2&t){let h;p.iGM(h=p.CRH())&&(l.monthSelect=h.first),p.iGM(h=p.CRH())&&(l.yearSelect=h.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[p.jDz],decls:6,vars:4,consts:function(){let s,t,l,h;return s=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,l=$localize`:@@ngb.datepicker.select-year:Select year`,h=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",s,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",l,"title",h,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,l){1&t&&(p.TgZ(0,"select",0,1),p.NdJ("change",function(m){return l.changeMonth(m.target.value)}),p.YNc(2,lt,2,3,"option",2),p.qZA(),p.TgZ(3,"select",3,4),p.NdJ("change",function(m){return l.changeYear(m.target.value)}),p.YNc(5,rn,2,2,"option",2),p.qZA()),2&t&&(p.Q6J("disabled",l.disabled),p.xp6(2),p.Q6J("ngForOf",l.months),p.xp6(1),p.Q6J("disabled",l.disabled),p.xp6(2),p.Q6J("ngForOf",l.years))},dependencies:[fe.ax],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),Jg=(()=>{class n{constructor(t){this.i18n=t,this.navigation=zl,this.months=[],this.navigate=new p.vpe,this.select=new p.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ts))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[p.jDz],decls:8,vars:4,consts:function(){let s,t,l,h;return s=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,l=$localize`:@@ngb.datepicker.next-month:Next month`,h=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",s,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",l,"title",h,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,l){1&t&&(p.TgZ(0,"div",0)(1,"button",1),p.NdJ("click",function(m){return l.onClickPrev(m)}),p._UZ(2,"span",2),p.qZA()(),p.YNc(3,Fr,1,4,"ngb-datepicker-navigation-select",3),p.YNc(4,Xs,1,1,null,4),p.TgZ(5,"div",5)(6,"button",6),p.NdJ("click",function(m){return l.onClickNext(m)}),p._UZ(7,"span",2),p.qZA()()),2&t&&(p.xp6(1),p.Q6J("disabled",l.prevDisabled),p.xp6(2),p.Q6J("ngIf",l.showSelect),p.xp6(1),p.Q6J("ngIf",!l.showSelect),p.xp6(2),p.Q6J("disabled",l.nextDisabled))},dependencies:[fe.O5,fe.ax,Jh],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var Tr=(()=>{return(n=Tr||(Tr={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",Tr;var n})();let ry=(()=>{class n{processKey(t,l){const{state:h,calendar:m}=l;switch(t.which){case Tr.PageUp:l.focusDate(m.getPrev(h.focusedDate,t.shiftKey?"y":"m",1));break;case Tr.PageDown:l.focusDate(m.getNext(h.focusedDate,t.shiftKey?"y":"m",1));break;case Tr.End:l.focusDate(t.shiftKey?h.maxDate:h.lastDate);break;case Tr.Home:l.focusDate(t.shiftKey?h.minDate:h.firstDate);break;case Tr.ArrowLeft:l.focusDate(m.getPrev(h.focusedDate,"d",1));break;case Tr.ArrowUp:l.focusDate(m.getPrev(h.focusedDate,"d",m.getDaysPerWeek()));break;case Tr.ArrowRight:l.focusDate(m.getNext(h.focusedDate,"d",1));break;case Tr.ArrowDown:l.focusDate(m.getNext(h.focusedDate,"d",m.getDaysPerWeek()));break;case Tr.Enter:case Tr.Space:l.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tc=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=fe.Tn.Short}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function pp(){return new Qg}()},providedIn:"root"}),n})(),Qg=(()=>{class n extends Xc{fromModel(t){return t&&Ni(t.year)&&Ni(t.month)&&Ni(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&Ni(t.year)&&Ni(t.month)&&Ni(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return n.\u0275fac=function(){let s;return function(l){return(s||(s=p.n5z(n)))(l||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Xg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),ed=(()=>{class n{constructor(t,l,h,m){this.i18n=t,this.datepicker=l,this._keyboardService=h,this._service=m}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ts),p.Y36((0,p.Gpc)(()=>mu)),p.Y36(ry),p.Y36(Zu))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,l){1&t&&p.NdJ("keydown",function(m){return l.onKeyDown(m)})},inputs:{month:"month"},standalone:!0,features:[p.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&(p.YNc(0,vl,3,2,"div",0),p.YNc(1,Ho,1,1,"ng-template",1)),2&t&&(p.Q6J("ngIf",l.viewModel.weekdays.length>0),p.xp6(1),p.Q6J("ngForOf",l.viewModel.weeks))},dependencies:[fe.O5,fe.ax,fe.tP],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),mu=(()=>{class n{constructor(t,l,h,m,C,F,G,Y){this._service=t,this._calendar=l,this.i18n=h,this._elementRef=F,this._ngbDateAdapter=G,this._ngZone=Y,this._controlValue=null,this._destroyed$=new $e.x,this._publicState={},this.navigate=new p.vpe,this.dateSelect=new p.vpe,this.onChange=ue=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(ue=>this[ue]=m[ue]),t.dateSelect$.pipe(In(this._destroyed$)).subscribe(ue=>{this.dateSelect.emit(ue)}),t.model$.pipe(In(this._destroyed$)).subscribe(ue=>{const Ne=ue.firstDate,i=this.model?this.model.firstDate:null;this._publicState={maxDate:ue.maxDate,minDate:ue.minDate,firstDate:ue.firstDate,lastDate:ue.lastDate,focusedDate:ue.focusDate,months:ue.months.map(y=>y.firstDate)};let o=!1;if(!Ne.equals(i)&&(this.navigate.emit({current:i?{year:i.year,month:i.month}:null,next:{year:Ne.year,month:Ne.month},preventDefault:()=>o=!0}),o&&null!==i))return void this._service.open(i);const u=ue.selectedDate,d=ue.focusDate,g=this.model?this.model.focusDate:null;this.model=ue,Bs(u,this._controlValue)&&(this._controlValue=u,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(u))),Bs(d,g)&&g&&ue.focusVisible&&this.focus(),C.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(di.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe((0,Pe.q)(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(di.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=ft(this._contentEl.nativeElement,"focusin"),l=ft(this._contentEl.nativeElement,"focusout"),{nativeElement:h}=this._elementRef;(0,$t.T)(t,l).pipe((0,or.h)(({target:m,relatedTarget:C})=>!(Dl(m,"ngb-dp-day")&&Dl(C,"ngb-dp-day")&&h.contains(m)&&h.contains(C))),In(this._destroyed$)).subscribe(({type:m})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===m})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(l=>t[l]=this[l]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const l={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(h=>h in t).forEach(h=>l[h]=this[h]),this._service.set(l),"startDate"in t){const{currentValue:h,previousValue:m}=t.startDate;U(m,h)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case zl.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case zl.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=di.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Zu),p.Y36(er),p.Y36(Ts),p.Y36(Tc),p.Y36(p.sBO),p.Y36(p.SBq),p.Y36(Xc),p.Y36(p.R0b))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(t,l,h){if(1&t&&p.Suo(h,Xg,7),2&t){let m;p.iGM(m=p.CRH())&&(l.contentTemplate=m.first)}},viewQuery:function(t,l){if(1&t&&(p.Gf(_a,7),p.Gf(Hu,7)),2&t){let h;p.iGM(h=p.CRH())&&(l._defaultDayTemplate=h.first),p.iGM(h=p.CRH())&&(l._contentEl=h.first)}},hostVars:2,hostBindings:function(t,l){2&t&&p.ekj("disabled",l.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[p._Bn([{provide:ht.JU,useExisting:(0,p.Gpc)(()=>n),multi:!0},Zu]),p.TTD,p.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,l){if(1&t&&(p.YNc(0,ya,1,5,"ng-template",null,0,p.W1O),p.YNc(2,bl,1,1,"ng-template",null,1,p.W1O),p.TgZ(4,"div",2),p.YNc(5,va,1,7,"ngb-datepicker-navigation",3),p.qZA(),p.TgZ(6,"div",4,5),p.YNc(8,tl,0,0,"ng-template",6),p.qZA(),p.YNc(9,ba,0,0,"ng-template",6)),2&t){const h=p.MAs(3);p.xp6(5),p.Q6J("ngIf","none"!==l.navigation),p.xp6(1),p.ekj("ngb-dp-months",!l.contentTemplate),p.xp6(2),p.Q6J("ngTemplateOutlet",(null==l.contentTemplate?null:l.contentTemplate.templateRef)||h),p.xp6(1),p.Q6J("ngTemplateOutlet",l.footerTemplate)}},dependencies:[fe.O5,fe.ax,fe.tP,Kd,ed,Jg],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const qd=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Wl(n){const s=Array.from(n.querySelectorAll(qd)).filter(t=>-1!==t.tabIndex);return[s[0],s[s.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[mu,ed]}),n})(),uy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();class Xu{constructor(s,t,l){this.nodes=s,this.viewRef=t,this.componentRef=l}}let cy=(()=>{class n{constructor(t,l){this._el=t,this._zone=l}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Pe.q)(1)).subscribe(()=>{Ei(this._zone,this._el.nativeElement,(t,l)=>{l&&eo(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ei(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.R0b))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,l){2&t&&(p.Tol("modal-backdrop"+(l.backdropClass?" "+l.backdropClass:"")),p.ekj("show",!l.animation)("fade",l.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[p.jDz],decls:0,vars:0,template:function(t,l){},encapsulation:2}),n})();class Du{close(s){}dismiss(s){}}class vp{constructor(s,t,l,h){this._windowCmptRef=s,this._contentRef=t,this._backdropCmptRef=l,this._beforeDismiss=h,this._closed=new $e.x,this._dismissed=new $e.x,this._hidden=new $e.x,s.instance.dismissEvent.subscribe(m=>{this.dismiss(m)}),this.result=new Promise((m,C)=>{this._resolve=m,this._reject=C}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(In(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(In(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(s){this._windowCmptRef&&(this._closed.next(s),this._resolve(s),this._removeModalElements())}_dismiss(s){this._dismissed.next(s),this._reject(s),this._removeModalElements()}dismiss(s){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function xi(n){return n&&n.then}(t)?!1!==t&&this._dismiss(s):t.then(l=>{!1!==l&&this._dismiss(s)},()=>{})}else this._dismiss(s)}_removeModalElements(){const s=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,st.of)(void 0);s.subscribe(()=>{const{nativeElement:l}=this._windowCmptRef.location;l.parentNode.removeChild(l),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:l}=this._backdropCmptRef.location;l.parentNode.removeChild(l),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),on(s,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var oh=(()=>{return(n=oh||(oh={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",oh;var n})();let As=(()=>{class n{constructor(t,l,h){this._document=t,this._elRef=l,this._zone=h,this._closed$=new $e.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new p.vpe,this.shown=new $e.x,this.hidden=new $e.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Ba(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Pe.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,l={animation:this.animation,runningTransition:"stop"},C=on(Ei(this._zone,t,()=>t.classList.remove("show"),l),Ei(this._zone,this._dialogEl.nativeElement,()=>{},l));return C.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),C}_show(){const t={animation:this.animation,runningTransition:"continue"};on(Ei(this._zone,this._elRef.nativeElement,(m,C)=>{C&&eo(m),m.classList.add("show")},t),Ei(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{ft(t,"keydown").pipe(In(this._closed$),(0,or.h)(h=>h.which===Tr.Escape)).subscribe(h=>{this.keyboard?requestAnimationFrame(()=>{h.defaultPrevented||this._zone.run(()=>this.dismiss(oh.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let l=!1;ft(this._dialogEl.nativeElement,"mousedown").pipe(In(this._closed$),(0,Pn.b)(()=>l=!1),(0,Dr.w)(()=>ft(t,"mouseup").pipe(In(this._closed$),(0,Pe.q)(1))),(0,or.h)(({target:h})=>t===h)).subscribe(()=>{l=!0}),ft(t,"click").pipe(In(this._closed$)).subscribe(({target:h})=>{t===h&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!l&&this._zone.run(()=>this.dismiss(oh.BACKDROP_CLICK))),l=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const l=t.querySelector("[ngbAutofocus]"),h=Wl(t)[0];(l||h||t).focus()}}_restoreFocus(){const t=this._document.body,l=this._elWithFocus;let h;h=l&&l.focus&&t.contains(l)?l:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>h.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ei(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(fe.K0),p.Y36(p.SBq),p.Y36(p.R0b))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,l){if(1&t&&p.Gf(nl,7),2&t){let h;p.iGM(h=p.CRH())&&(l._dialogEl=h.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,l){2&t&&(p.uIk("aria-modal",!0)("aria-labelledby",l.ariaLabelledBy)("aria-describedby",l.ariaDescribedBy),p.Tol("modal d-block"+(l.windowClass?" "+l.windowClass:"")),p.ekj("fade",l.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[p.jDz],ngContentSelectors:ea,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,l){1&t&&(p.F$t(),p.TgZ(0,"div",0,1)(2,"div",2),p.Hsn(3),p.qZA()()),2&t&&p.Tol("modal-dialog"+(l.size?" modal-"+l.size:"")+(l.centered?" modal-dialog-centered":"")+l.fullscreenClass+(l.scrollable?" modal-dialog-scrollable":"")+(l.modalDialogClass?" "+l.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),bp=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),l=this._document.body,h=l.style,{overflow:m,paddingRight:C}=h;if(t>0){const F=parseFloat(window.getComputedStyle(l).paddingRight);h.paddingRight=`${F+t}px`}return h.overflow="hidden",()=>{t>0&&(h.paddingRight=C),h.overflow=m}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe.K0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sm=(()=>{class n{constructor(t,l,h,m,C,F,G){this._applicationRef=t,this._injector=l,this._environmentInjector=h,this._document=m,this._scrollBar=C,this._rendererFactory=F,this._ngZone=G,this._activeWindowCmptHasChanged=new $e.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new p.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const Y=this._windowCmpts[this._windowCmpts.length-1];((n,s,t,l=!1)=>{n.runOutsideAngular(()=>{const h=ft(s,"focusin").pipe(In(t),(0,Fe.U)(m=>m.target));ft(s,"keydown").pipe(In(t),(0,or.h)(m=>m.which===Tr.Tab),rr(h)).subscribe(([m,C])=>{const[F,G]=Wl(s);(C===F||C===s)&&m.shiftKey&&(G.focus(),m.preventDefault()),C===G&&!m.shiftKey&&(F.focus(),m.preventDefault())}),l&&ft(s,"click").pipe(In(t),rr(h),(0,Fe.U)(m=>m[1])).subscribe(m=>m.focus())})})(this._ngZone,Y.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(Y.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,l,h){const m=h.container instanceof HTMLElement?h.container:So(h.container)?this._document.querySelector(h.container):this._document.body,C=this._rendererFactory.createRenderer(null,null);if(!m)throw new Error(`The specified modal container "${h.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const F=new Du,G=(t=h.injector||t).get(p.lqb,null)||this._environmentInjector,Y=this._getContentRef(t,G,l,F,h);let ue=!1!==h.backdrop?this._attachBackdrop(m):void 0,Ne=this._attachWindowComponent(m,Y.nodes),i=new vp(Ne,Y,ue,h.beforeDismiss);return this._registerModalRef(i),this._registerWindowCmpt(Ne),i.hidden.pipe((0,Pe.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(C.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),F.close=o=>{i.close(o)},F.dismiss=o=>{i.dismiss(o)},this._applyWindowOptions(Ne.instance,h),1===this._modalRefs.length&&C.addClass(this._document.body,"modal-open"),ue&&ue.instance&&(this._applyBackdropOptions(ue.instance,h),ue.changeDetectorRef.detectChanges()),Ne.changeDetectorRef.detectChanges(),i}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(l=>l.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let l=(0,p.LMc)(cy,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(l.hostView),t.appendChild(l.location.nativeElement),l}_attachWindowComponent(t,l){let h=(0,p.LMc)(As,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:l});return this._applicationRef.attachView(h.hostView),t.appendChild(h.location.nativeElement),h}_applyWindowOptions(t,l){this._windowAttributes.forEach(h=>{So(l[h])&&(t[h]=l[h])})}_applyBackdropOptions(t,l){this._backdropAttributes.forEach(h=>{So(l[h])&&(t[h]=l[h])})}_getContentRef(t,l,h,m,C){return h?h instanceof p.Rgc?this._createFromTemplateRef(h,m):Ba(h)?this._createFromString(h):this._createFromComponent(t,l,h,m,C):new Xu([])}_createFromTemplateRef(t,l){const m=t.createEmbeddedView({$implicit:l,close(C){l.close(C)},dismiss(C){l.dismiss(C)}});return this._applicationRef.attachView(m),new Xu([m.rootNodes],m)}_createFromString(t){const l=this._document.createTextNode(`${t}`);return new Xu([[l]])}_createFromComponent(t,l,h,m,C){const F=p.zs3.create({providers:[{provide:Du,useValue:m}],parent:t}),G=(0,p.LMc)(h,{environmentInjector:l,elementInjector:F}),Y=G.location.nativeElement;return C.scrollable&&Y.classList.add("component-host-scrollable"),this._applicationRef.attachView(G.hostView),new Xu([[Y]],G.hostView,G)}_setAriaHidden(t){const l=t.parentElement;l&&t!==this._document.body&&(Array.from(l.children).forEach(h=>{h!==t&&"SCRIPT"!==h.nodeName&&(this._ariaHiddenValues.set(h,h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))}),this._setAriaHidden(l))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,l)=>{t?l.setAttribute("aria-hidden",t):l.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const l=()=>{const h=this._modalRefs.indexOf(t);h>-1&&(this._modalRefs.splice(h,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(l,l)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const l=this._windowCmpts.indexOf(t);l>-1&&(this._windowCmpts.splice(l,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.z2F),p.LFG(p.zs3),p.LFG(p.lqb),p.LFG(fe.K0),p.LFG(bp),p.LFG(p.FYo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),df=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Il))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Iu=(()=>{class n{constructor(t,l,h){this._injector=t,this._modalStack=l,this._config=h}open(t,l={}){const h={...this._config,animation:this._config.animation,...l};return this._modalStack.open(this._injector,t,h)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(sm),p.LFG(df))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ep=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Iu]}),n})();const Dp=({classList:n})=>(n.remove("show"),()=>n.remove("active")),fy=(n,s)=>{s&&eo(n),n.classList.add("show")};let py=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,l){2&t&&(p.Ikx("id",l.item.panelDomId),p.uIk("role",l.role?l.role:l.nav.roles?"tabpanel":void 0)("aria-labelledby",l.item.domId),p.ekj("fade",l.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),Ip=(()=>{class n{constructor(t,l){this._cd=t,this._ngZone=l,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(In(this.nav.destroy$),(0,Pr.O)(this._activePane?.item||null),(0,Nn.x)(),function Ce(n){return(0,or.h)((s,t)=>n<=t)}(1)).subscribe(t=>{const l={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Ei(this._ngZone,this._activePane.elRef.nativeElement,Dp,l).subscribe(()=>{const h=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Ei(this._ngZone,this._activePane.elRef.nativeElement,fy,l).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),h&&(h.hidden.emit(),this.nav.hidden.emit(h.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(l=>l.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO),p.Y36(p.R0b))},n.\u0275cmp=p.Xpm({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,l){if(1&t&&p.Gf(py,5),2&t){let h;p.iGM(h=p.CRH())&&(l._panes=h)}},hostVars:2,hostBindings:function(t,l){2&t&&p.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[p.jDz],attrs:rl,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&p.YNc(0,uu,1,1,"ng-template",0),2&t&&p.Q6J("ngForOf",l.nav.items)},dependencies:[py,fe.ax,fe.O5,fe.tP],encapsulation:2,changeDetection:0}),n})(),om=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Ip]}),n})(),h0=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),am=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),Cp=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),Cu=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),lh=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),Tu=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),Mc=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),Tp=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),f0=(()=>{class n{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new p.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,l){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),l<this.pageCount&&(l<this.pageCount-2?this.pages.push(-1):l===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,l=this.pageCount,h=Math.floor(this.maxSize/2);return this.page<=h?l=this.maxSize:this.pageCount-this.page<h?t=this.pageCount-this.maxSize:(t=this.page-h-1,l=this.page+(this.maxSize%2==0?h-1:h)),[t,l]}_applyPagination(){let l=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[l,l+this.maxSize]}_setPageInRange(t){const l=this.page;this.page=Lr(t,this.pageCount,1),this.page!==l&&gr(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),gr(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let l=1;l<=this.pageCount;l++)this.pages.push(l);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let l=0,h=this.pageCount;[l,h]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(l,h),this._applyEllipses(l,h)}}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(h0))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-pagination"]],contentQueries:function(t,l,h){if(1&t&&(p.Suo(h,am,5),p.Suo(h,Cp,5),p.Suo(h,Cu,5),p.Suo(h,lh,5),p.Suo(h,Tu,5),p.Suo(h,Mc,5),p.Suo(h,Tp,5)),2&t){let m;p.iGM(m=p.CRH())&&(l.tplEllipsis=m.first),p.iGM(m=p.CRH())&&(l.tplFirst=m.first),p.iGM(m=p.CRH())&&(l.tplLast=m.first),p.iGM(m=p.CRH())&&(l.tplNext=m.first),p.iGM(m=p.CRH())&&(l.tplNumber=m.first),p.iGM(m=p.CRH())&&(l.tplPrevious=m.first),p.iGM(m=p.CRH())&&(l.tplPages=m.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[p.TTD,p.jDz],decls:20,vars:12,consts:function(){let s,t,l,h,m,C,F,G;return s=$localize`:@@ngb.pagination.first:««`,t=$localize`:@@ngb.pagination.previous:«`,l=$localize`:@@ngb.pagination.next:»`,h=$localize`:@@ngb.pagination.last:»»`,m=$localize`:@@ngb.pagination.first-aria:First`,C=$localize`:@@ngb.pagination.previous-aria:Previous`,F=$localize`:@@ngb.pagination.next-aria:Next`,G=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],s,t,l,h,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",m,"href","",1,"page-link",3,"click"],["aria-label",C,"href","",1,"page-link",3,"click"],["aria-label",F,"href","",1,"page-link",3,"click"],["aria-label",G,"href","",1,"page-link",3,"click"]]},template:function(t,l){if(1&t&&(p.YNc(0,Vl,2,0,"ng-template",null,0,p.W1O),p.YNc(2,$u,2,0,"ng-template",null,1,p.W1O),p.YNc(4,Ai,2,0,"ng-template",null,2,p.W1O),p.YNc(6,ui,2,0,"ng-template",null,3,p.W1O),p.YNc(8,ii,1,0,"ng-template",null,4,p.W1O),p.YNc(10,Oi,2,2,"ng-template",null,5,p.W1O),p.YNc(12,K,1,1,"ng-template",null,6,p.W1O),p.TgZ(14,"ul"),p.YNc(15,ve,3,9,"li",7),p.YNc(16,fn,3,8,"li",7),p.YNc(17,vr,0,0,"ng-template",8),p.YNc(18,Cn,3,9,"li",7),p.YNc(19,qn,3,9,"li",7),p.qZA()),2&t){const h=p.MAs(13);p.xp6(14),p.Tol("pagination"+(l.size?" pagination-"+l.size:"")),p.xp6(1),p.Q6J("ngIf",l.boundaryLinks),p.xp6(1),p.Q6J("ngIf",l.directionLinks),p.xp6(1),p.Q6J("ngTemplateOutlet",(null==l.tplPages?null:l.tplPages.templateRef)||h)("ngTemplateOutletContext",p.kEZ(8,jt,l.page,l.pages,l.disabled)),p.xp6(1),p.Q6J("ngIf",l.directionLinks),p.xp6(1),p.Q6J("ngIf",l.boundaryLinks)}},dependencies:[fe.O5,fe.ax,fe.tP],encapsulation:2,changeDetection:0}),n})(),Sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[f0]}),n})(),_y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),cm=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m0=(()=>{class n{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!gr(t)||t<=0?100:t}get max(){return this._max}getValue(){return Lr(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(cm))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,l){2&t&&(p.uIk("aria-valuenow",l.getValue())("aria-valuemax",l.max)("aria-label",l.ariaLabel),p.Udp("height",l.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[p.jDz],ngContentSelectors:ea,decls:3,vars:11,consts:function(){let s;return s=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],s]},template:function(t,l){1&t&&(p.F$t(),p.TgZ(0,"div"),p.YNc(1,it,3,3,"span",0),p.Hsn(2),p.qZA()),2&t&&(p.MT6("progress-bar",l.type?l.textType?" bg-"+l.type:" text-bg-"+l.type:"","",l.textType?" text-"+l.textType:"",""),p.Udp("width",l.getPercentValue(),"%"),p.ekj("progress-bar-animated",l.animated)("progress-bar-striped",l.striped),p.xp6(1),p.Q6J("ngIf",l.showValue))},dependencies:[fe.O5,fe.Zx],encapsulation:2,changeDetection:0}),n})(),Gs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[m0]}),n})(),_0=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y0=(()=>{class n{constructor(t,l){this._changeDetectorRef=l,this.contexts=[],this.disabled=!1,this.hover=new p.vpe,this.leave=new p.vpe,this.rateChange=new p.vpe(!0),this.onChange=h=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case Tr.ArrowDown:case Tr.ArrowLeft:this.update(this.rate-1);break;case Tr.ArrowUp:case Tr.ArrowRight:this.update(this.rate+1);break;case Tr.Home:this.update(0);break;case Tr.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,l=!0){const h=Lr(t,this.max,0);this.isInteractive()&&this.rate!==h&&(this.rate=h,this.rateChange.emit(this.rate)),l&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((l,h)=>l.fill=Math.round(100*Lr(t-h,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,l)=>({fill:0,index:l}))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_0),p.Y36(p.sBO))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,l,h){if(1&t&&p.Suo(h,p.Rgc,5),2&t){let m;p.iGM(m=p.CRH())&&(l.starTemplateFromContent=m.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,l){1&t&&p.NdJ("blur",function(){return l.handleBlur()})("keydown",function(m){return l.handleKeyDown(m)})("mouseleave",function(){return l.reset()}),2&t&&(p.Ikx("tabindex",l.disabled?-1:l.tabindex),p.uIk("aria-valuemax",l.max)("aria-valuenow",l.nextRate)("aria-valuetext",l.ariaValueText())("aria-disabled",!!l.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[p._Bn([{provide:ht.JU,useExisting:(0,p.Gpc)(()=>n),multi:!0}]),p.TTD,p.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&(p.YNc(0,Ot,1,1,"ng-template",null,0,p.W1O),p.YNc(2,Co,4,5,"ng-template",1)),2&t&&(p.xp6(2),p.Q6J("ngForOf",l.contexts))},dependencies:[fe.ax,fe.tP],encapsulation:2,changeDetection:0}),n})(),Ap=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[y0]}),n})();class dm{constructor(s,t,l){this.hour=Nr(s),this.minute=Nr(t),this.second=Nr(l)}changeHour(s=1){this.updateHour((isNaN(this.hour)?0:this.hour)+s)}updateHour(s){this.hour=gr(s)?(s<0?24+s:s)%24:NaN}changeMinute(s=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+s)}updateMinute(s){gr(s)?(this.minute=s%60<0?60+s%60:s%60,this.changeHour(Math.floor(s/60))):this.minute=NaN}changeSecond(s=1){this.updateSecond((isNaN(this.second)?0:this.second)+s)}updateSecond(s){gr(s)?(this.second=s<0?60+s%60:s%60,this.changeMinute(Math.floor(s/60))):this.second=NaN}isValid(s=!0){return gr(this.hour)&&gr(this.minute)&&(!s||gr(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let v0=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function b0(){return new E0}()},providedIn:"root"}),n})(),E0=(()=>{class n extends hm{fromModel(t){return t&&Ni(t.hour)&&Ni(t.minute)?{hour:t.hour,minute:t.minute,second:Ni(t.second)?t.second:null}:null}toModel(t){return t&&Ni(t.hour)&&Ni(t.minute)?{hour:t.hour,minute:t.minute,second:Ni(t.second)?t.second:null}:null}}return n.\u0275fac=function(){let s;return function(l){return(s||(s=p.n5z(n)))(l||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),yy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(t){let l=null;return l=t?new t:function fm(n){return new Jb(n)}(p.LFG(p.soG)),l},providedIn:"root"}),n})(),Jb=(()=>{class n extends yy{constructor(t){super(),this._periods=(0,fe.ol)(t,fe.x.Standalone,fe.Tn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const cd=/[^0-9]/g;let so=(()=>{class n{constructor(t,l,h,m){this._config=t,this._ngbTimeAdapter=l,this._cd=h,this.i18n=m,this.onChange=C=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=Ni(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=Ni(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=Ni(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const l=this._ngbTimeAdapter.fromModel(t);this.model=l?new dm(l.hour,l.minute,l.second):new dm,!this.seconds&&(!l||!gr(l.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const l=!!this.model&&this.model.hour>=12,h=Nr(t);this.model?.updateHour(this.meridian&&(l&&h<12||!l&&12===h)?h+12:h),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(Nr(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(Nr(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(cd,"")}formatHour(t){return gr(t)?aa(this.meridian?t%12==0?12:t%12:t%24):aa(NaN)}formatMinSec(t){return aa(gr(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!gr(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(v0),p.Y36(hm),p.Y36(p.sBO),p.Y36(yy))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[p._Bn([{provide:ht.JU,useExisting:(0,p.Gpc)(()=>n),multi:!0}]),p.TTD,p.jDz],decls:16,vars:25,consts:function(){let s,t,l,h,m,C,F,G,Y,ue,Ne,i,o,u;return s=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,l=$localize`:@@ngb.timepicker.MM:MM`,h=$localize`:@@ngb.timepicker.minutes:Minutes`,m=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,C=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,F=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,G=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,Y=$localize`:@@ngb.timepicker.SS:SS`,ue=$localize`:@@ngb.timepicker.seconds:Seconds`,Ne=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,i=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,o=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,u=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",s,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",l,"aria-label",h,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],m,[1,"chevron","ngb-tp-chevron","bottom"],C,F,G,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",Y,"aria-label",ue,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],Ne,i,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],o,u]},template:function(t,l){1&t&&(p.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),p.YNc(3,sl,4,7,"button",3),p.TgZ(4,"input",4),p.NdJ("change",function(m){return l.updateHour(m.target.value)})("blur",function(){return l.handleBlur()})("input",function(m){return l.formatInput(m.target)})("keydown.ArrowUp",function(m){return l.changeHour(l.hourStep),m.preventDefault()})("keydown.ArrowDown",function(m){return l.changeHour(-l.hourStep),m.preventDefault()}),p.qZA(),p.YNc(5,ol,4,7,"button",3),p.qZA(),p.TgZ(6,"div",5),p._uU(7,":"),p.qZA(),p.TgZ(8,"div",6),p.YNc(9,al,4,7,"button",3),p.TgZ(10,"input",7),p.NdJ("change",function(m){return l.updateMinute(m.target.value)})("blur",function(){return l.handleBlur()})("input",function(m){return l.formatInput(m.target)})("keydown.ArrowUp",function(m){return l.changeMinute(l.minuteStep),m.preventDefault()})("keydown.ArrowDown",function(m){return l.changeMinute(-l.minuteStep),m.preventDefault()}),p.qZA(),p.YNc(11,Ea,4,7,"button",3),p.qZA(),p.YNc(12,zd,2,0,"div",8),p.YNc(13,cu,4,9,"div",9),p.YNc(14,To,1,0,"div",8),p.YNc(15,wa,5,9,"div",10),p.qZA()()),2&t&&(p.ekj("disabled",l.disabled),p.Q6J("disabled",l.disabled),p.xp6(3),p.Q6J("ngIf",l.spinners),p.xp6(1),p.ekj("form-control-sm",l.isSmallSize)("form-control-lg",l.isLargeSize),p.Q6J("value",l.formatHour(null==l.model?null:l.model.hour))("readOnly",l.readonlyInputs)("disabled",l.disabled),p.xp6(1),p.Q6J("ngIf",l.spinners),p.xp6(4),p.Q6J("ngIf",l.spinners),p.xp6(1),p.ekj("form-control-sm",l.isSmallSize)("form-control-lg",l.isLargeSize),p.Q6J("value",l.formatMinSec(null==l.model?null:l.model.minute))("readOnly",l.readonlyInputs)("disabled",l.disabled),p.xp6(1),p.Q6J("ngIf",l.spinners),p.xp6(1),p.Q6J("ngIf",l.seconds),p.xp6(1),p.Q6J("ngIf",l.seconds),p.xp6(1),p.Q6J("ngIf",l.meridian),p.xp6(1),p.Q6J("ngIf",l.meridian))},dependencies:[fe.O5],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),hf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[so]}),n})();const Op=(n,s)=>{const{classList:t}=n;if(s)return t.add("fade"),eo(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},Np=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let Rc=(()=>{class n{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Il))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),by=(()=>{class n{constructor(t,l,h,m){this.ariaLive=t,this._zone=h,this._element=m,this.contentHeaderTpl=null,this.shown=new p.vpe,this.hidden=new p.vpe,null==this.ariaLive&&(this.ariaLive=l.ariaLive),this.delay=l.delay,this.autohide=l.autohide,this.animation=l.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe((0,Pe.q)(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=Ei(this._zone,this._element.nativeElement,Np,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=Ei(this._zone,this._element.nativeElement,Op,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(t){return new(t||n)(p.$8M("aria-live"),p.Y36(Rc),p.Y36(p.R0b),p.Y36(p.SBq))},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-toast"]],contentQueries:function(t,l,h){if(1&t&&p.Suo(h,vy,7,p.Rgc),2&t){let m;p.iGM(m=p.CRH())&&(l.contentHeaderTpl=m.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,l){2&t&&(p.uIk("aria-live",l.ariaLive),p.ekj("fade",l.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[p.TTD,p.jDz],ngContentSelectors:ea,decls:5,vars:1,consts:function(){let s;return s=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",s,1,"btn-close",3,"click"]]},template:function(t,l){1&t&&(p.F$t(),p.YNc(0,du,2,1,"ng-template",null,0,p.W1O),p.YNc(2,yn,3,1,"ng-template",1),p.TgZ(3,"div",2),p.Hsn(4),p.qZA()),2&t&&(p.xp6(2),p.Q6J("ngIf",l.contentHeaderTpl||l.header))},dependencies:[fe.O5,fe.tP],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),Mp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[by]}),n})(),Pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),pm=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const l=hu(this.result),h=Array.isArray(this.term)?this.term:[this.term],m=Y=>this.accentSensitive?Y:ll(Y),C=h.map(Y=>function Ku(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(m(hu(Y)))).filter(Y=>Y),F=this.accentSensitive?l:ll(l),G=C.length?F.split(new RegExp(`(${C.join("|")})`,"gmi")):[l];if(this.accentSensitive)this.parts=G;else{let Y=0;this.parts=G.map(ue=>l.substring(Y,Y+=ue.length))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[p.TTD,p.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,l){1&t&&p.YNc(0,Ic,3,2,"ng-template",0),2&t&&p.Q6J("ngForOf",l.parts)},dependencies:[fe.O5,fe.ax],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new p.OlP("live announcer delay",{providedIn:"root",factory:function Rp(){return 100}});let Tl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[pm]}),n})(),nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Pp=[no,D,Us,ja,nh,uy,Ep,om,nc,Sa,_y,Gs,Ap,hf,Mp,Pc,Tl];let T0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Pp,no,D,Us,ja,nh,uy,Ep,om,nc,Sa,_y,Gs,Ap,hf,Mp,Pc,Tl]}),n})();var Yl=V(2011),kp=V(8996),Aa=V(2122),ym=V(3942),Zl=V(5861),Su=V(9681),_e=V(2090),za=V(4859);const wy="firebasestorage.googleapis.com",mf="storageBucket";class Pi extends _e.ZR{constructor(s,t,l=0){super(rc(s),`Firebase Storage: ${t} (${rc(s)})`),this.status_=l,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pi.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return rc(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var wi=(()=>{return(n=wi||(wi={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",wi;var n})();function rc(n){return"storage/"+n}function fh(){return new Pi(wi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function vm(){return new Pi(wi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ic(){return new Pi(wi.CANCELED,"User canceled the upload/download.")}function fd(){return new Pi(wi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mh(n){return new Pi(wi.INVALID_ARGUMENT,n)}function A0(){return new Pi(wi.APP_DELETED,"The Firebase app was deleted.")}function bm(n){return new Pi(wi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vp(n,s){return new Pi(wi.INVALID_FORMAT,"String does not match format '"+n+"': "+s)}function _h(n){throw new Pi(wi.INTERNAL_ERROR,"Internal error: "+n)}class oo{constructor(s,t){this.bucket=s,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,t){let l;try{l=oo.makeFromUrl(s,t)}catch{return new oo(s,"")}if(""===l.path)return l;throw function Cy(n){return new Pi(wi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(s)}static makeFromUrl(s,t){let l=null;const h="([A-Za-z0-9.\\-_]+)",F=new RegExp("^gs://"+h+"(/(.*))?$","i");function Y(x){x.path_=decodeURIComponent(x.path)}const Ne=t.replace(/[.]/g,"\\."),O=[{regex:F,indices:{bucket:1,path:3},postModify:function m(x){"/"===x.path.charAt(x.path.length-1)&&(x.path_=x.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ne}/v[A-Za-z0-9_]+/b/${h}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Y},{regex:new RegExp(`^https?://${t===wy?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${h}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Y}];for(let x=0;x<O.length;x++){const W=O[x],X=W.regex.exec(s);if(X){let Ae=X[W.indices.path];Ae||(Ae=""),l=new oo(X[W.indices.bucket],Ae),W.postModify(l);break}}if(null==l)throw function gh(n){return new Pi(wi.INVALID_URL,"Invalid URL '"+n+"'.")}(s);return l}}class Sy{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}function sc(n){return"string"==typeof n||n instanceof String}function Em(n){return Gp()&&n instanceof Blob}function Gp(){return typeof Blob<"u"&&!(0,_e.UG)()}function wm(n,s,t,l){if(l<s)throw mh(`Invalid value for '${n}'. Expected ${s} or greater.`);if(l>t)throw mh(`Invalid value for '${n}'. Expected ${t} or less.`)}function Au(n,s,t){let l=s;return null==t&&(l=`https://${s}`),`${t}://${l}/v0${n}`}function Dm(n){const s=encodeURIComponent;let t="?";for(const l in n)n.hasOwnProperty(l)&&(t=t+(s(l)+"=")+s(n[l])+"&");return t=t.slice(0,-1),t}var Lc=(()=>{return(n=Lc||(Lc={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Lc;var n})();function jp(n,s){const t=n>=500&&n<600,h=-1!==[408,429].indexOf(n),m=-1!==s.indexOf(n);return t||h||m}class xo{constructor(s,t,l,h,m,C,F,G,Y,ue,Ne,i=!0){this.url_=s,this.method_=t,this.headers_=l,this.body_=h,this.successCodes_=m,this.additionalRetryCodes_=C,this.callback_=F,this.errorCallback_=G,this.timeout_=Y,this.progressCallback_=ue,this.connectionFactory_=Ne,this.retry=i,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((o,u)=>{this.resolve_=o,this.reject_=u,this.start_()})}start_(){const t=(l,h)=>{const m=this.resolve_,C=this.reject_,F=h.connection;if(h.wasSuccessCode)try{const G=this.callback_(F,F.getResponse());!function O0(n){return void 0!==n}(G)?m():m(G)}catch(G){C(G)}else if(null!==F){const G=fh();G.serverResponse=F.getErrorText(),C(this.errorCallback_?this.errorCallback_(F,G):G)}else C(h.canceled?this.appDelete_?A0():ic():vm())};this.canceled_?t(0,new Qn(!1,null,!0)):this.backoffId_=function Ay(n,s,t){let l=1,h=null,m=null,C=!1,F=0;function G(){return 2===F}let Y=!1;function ue(...g){Y||(Y=!0,s.apply(null,g))}function Ne(g){h=setTimeout(()=>{h=null,n(o,G())},g)}function i(){m&&clearTimeout(m)}function o(g,...y){if(Y)return void i();if(g)return i(),void ue.call(null,g,...y);if(G()||C)return i(),void ue.call(null,g,...y);let O;l<64&&(l*=2),1===F?(F=2,O=0):O=1e3*(l+Math.random()),Ne(O)}let u=!1;function d(g){u||(u=!0,i(),!Y&&(null!==h?(g||(F=2),clearTimeout(h),Ne(0)):g||(F=1)))}return Ne(0),m=setTimeout(()=>{C=!0,d(!0)},t),d}((l,h)=>{if(h)return void l(!1,new Qn(!1,null,!0));const m=this.connectionFactory_();this.pendingConnection_=m;const C=F=>{null!==this.progressCallback_&&this.progressCallback_(F.loaded,F.lengthComputable?F.total:-1)};null!==this.progressCallback_&&m.addUploadProgressListener(C),m.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&m.removeUploadProgressListener(C),this.pendingConnection_=null;const F=m.getErrorCode()===Lc.NO_ERROR,G=m.getStatus();if(!F||jp(G,this.additionalRetryCodes_)&&this.retry){const ue=m.getErrorCode()===Lc.ABORT;return void l(!1,new Qn(!1,null,ue))}const Y=-1!==this.successCodes_.indexOf(G);l(!0,new Qn(Y,m))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,null!==this.backoffId_&&function Oy(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Qn{constructor(s,t,l){this.wasSuccessCode=s,this.connection=t,this.canceled=!!l}}function M0(...n){const s=function _f(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==s){const t=new s;for(let l=0;l<n.length;l++)t.append(n[l]);return t.getBlob()}if(Gp())return new Blob(n);throw new Pi(wi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Oa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yh{constructor(s,t){this.data=s,this.contentType=t||null}}function gd(n,s){switch(n){case Oa.RAW:return new yh(yf(s));case Oa.BASE64:case Oa.BASE64URL:return new yh(Tm(n,s));case Oa.DATA_URL:return new yh(function $p(n){const s=new Hp(n);return s.base64?Tm(Oa.BASE64,s.rest):function oc(n){let s;try{s=decodeURIComponent(n)}catch{throw Vp(Oa.DATA_URL,"Malformed data URL.")}return yf(s)}(s.rest)}(s),function Py(n){return new Hp(n).contentType}(s))}throw fh()}function yf(n){const s=[];for(let t=0;t<n.length;t++){let l=n.charCodeAt(t);l<=127?s.push(l):l<=2047?s.push(192|l>>6,128|63&l):55296==(64512&l)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(l=65536|(1023&l)<<10|1023&n.charCodeAt(++t),s.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|63&l)):s.push(239,191,189):56320==(64512&l)?s.push(239,191,189):s.push(224|l>>12,128|l>>6&63,128|63&l)}return new Uint8Array(s)}function Tm(n,s){switch(n){case Oa.BASE64:{const h=-1!==s.indexOf("-"),m=-1!==s.indexOf("_");if(h||m)throw Vp(n,"Invalid character '"+(h?"-":"_")+"' found: is it base64url encoded?");break}case Oa.BASE64URL:{const h=-1!==s.indexOf("+"),m=-1!==s.indexOf("/");if(h||m)throw Vp(n,"Invalid character '"+(h?"+":"/")+"' found: is it base64 encoded?");s=s.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Cm(n){if(typeof atob>"u")throw function Fc(n){return new Pi(wi.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(s)}catch(h){throw h.message.includes("polyfill")?h:Vp(n,"Invalid character found")}const l=new Uint8Array(t.length);for(let h=0;h<t.length;h++)l[h]=t.charCodeAt(h);return l}class Hp{constructor(s){this.base64=!1,this.contentType=null;const t=s.match(/^data:([^,]+)?,/);if(null===t)throw Vp(Oa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const l=t[1]||null;null!=l&&(this.base64=function ky(n,s){return n.length>=s.length&&n.substring(n.length-s.length)===s}(l,";base64"),this.contentType=this.base64?l.substring(0,l.length-7):l),this.rest=s.substring(s.indexOf(",")+1)}}class ac{constructor(s,t){let l=0,h="";Em(s)?(this.data_=s,l=s.size,h=s.type):s instanceof ArrayBuffer?(t?this.data_=new Uint8Array(s):(this.data_=new Uint8Array(s.byteLength),this.data_.set(new Uint8Array(s))),l=this.data_.length):s instanceof Uint8Array&&(t?this.data_=s:(this.data_=new Uint8Array(s.length),this.data_.set(s)),l=s.length),this.size_=l,this.type_=h}size(){return this.size_}type(){return this.type_}slice(s,t){if(Em(this.data_)){const h=function Im(n,s,t){return n.webkitSlice?n.webkitSlice(s,t):n.mozSlice?n.mozSlice(s,t):n.slice?n.slice(s,t):null}(this.data_,s,t);return null===h?null:new ac(h)}{const l=new Uint8Array(this.data_.buffer,s,t-s);return new ac(l,!0)}}static getBlob(...s){if(Gp()){const t=s.map(l=>l instanceof ac?l.data_:l);return new ac(M0.apply(null,t))}{const t=s.map(C=>sc(C)?gd(Oa.RAW,C).data:C.data_);let l=0;t.forEach(C=>{l+=C.byteLength});const h=new Uint8Array(l);let m=0;return t.forEach(C=>{for(let F=0;F<C.length;F++)h[m++]=C[F]}),new ac(h,!0)}}uploadData(){return this.data_}}function Sm(n){let s;try{s=JSON.parse(n)}catch{return null}return function pd(n){return"object"==typeof n&&!Array.isArray(n)}(s)?s:null}function x0(n){const s=n.lastIndexOf("/",n.length-2);return-1===s?n:n.slice(s+1)}function vh(n,s){return s}class ts{constructor(s,t,l,h){this.server=s,this.local=t||s,this.writable=!!l,this.xform=h||vh}}let bh=null;function lc(){if(bh)return bh;const n=[];n.push(new ts("bucket")),n.push(new ts("generation")),n.push(new ts("metageneration")),n.push(new ts("name","fullPath",!0));const t=new ts("name");t.xform=function s(m,C){return function vf(n){return!sc(n)||n.length<2?n:x0(n)}(C)},n.push(t);const h=new ts("size");return h.xform=function l(m,C){return void 0!==C?Number(C):C},n.push(h),n.push(new ts("timeCreated")),n.push(new ts("updated")),n.push(new ts("md5Hash",null,!0)),n.push(new ts("cacheControl",null,!0)),n.push(new ts("contentDisposition",null,!0)),n.push(new ts("contentEncoding",null,!0)),n.push(new ts("contentLanguage",null,!0)),n.push(new ts("contentType",null,!0)),n.push(new ts("metadata","customMetadata",!0)),bh=n,bh}function Ly(n,s,t){const l=Sm(s);return null===l?null:function Om(n,s,t){const l={type:"file"},h=t.length;for(let m=0;m<h;m++){const C=t[m];l[C.local]=C.xform(l,s[C.server])}return function Fy(n,s){Object.defineProperty(n,"ref",{get:function t(){const m=new oo(n.bucket,n.fullPath);return s._makeStorageReference(m)}})}(l,n),l}(n,l,t)}function Mm(n,s){const t={},l=s.length;for(let h=0;h<l;h++){const m=s[h];m.writable&&(t[m.server]=n[m.local])}return JSON.stringify(t)}const zp="prefixes",Rm="items";class Ka{constructor(s,t,l,h){this.url=s,this.method=t,this.handler=l,this.timeout=h,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Na(n){if(!n)throw fh()}function uc(n,s){return function t(l,h){const m=Ly(n,h,s);return Na(null!==m),m}}function Uc(n){return function s(t,l){let h;return h=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Up(){return new Pi(wi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ph(){return new Pi(wi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ua(n){return new Pi(wi.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Bp(n){return new Pi(wi.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):l,h.status=t.getStatus(),h.serverResponse=l.serverResponse,h}}function Ef(n){const s=Uc(n);return function t(l,h){let m=s(l,h);return 404===l.getStatus()&&(m=function Iy(n){return new Pi(wi.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),m.serverResponse=h.serverResponse,m}}function md(n,s,t){const h=Au(s.fullServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,F=new Ka(h,"GET",uc(n,t),C);return F.errorHandler=Ef(s),F}function km(n,s,t,l,h){const m={};m.prefix=s.isRoot?"":s.path+"/",t&&t.length>0&&(m.delimiter=t),l&&(m.pageToken=l),h&&(m.maxResults=h);const F=Au(s.bucketOnlyServerUrl(),n.host,n._protocol),Y=n.maxOperationRetryTime,ue=new Ka(F,"GET",function Uy(n,s){return function t(l,h){const m=function Pm(n,s,t){const l=Sm(t);return null===l?null:function xm(n,s,t){const l={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[zp])for(const h of t[zp]){const m=h.replace(/\/$/,""),C=n._makeStorageReference(new oo(s,m));l.prefixes.push(C)}if(t[Rm])for(const h of t[Rm]){const m=n._makeStorageReference(new oo(s,h.name));l.items.push(m)}return l}(n,s,l)}(n,s,h);return Na(null!==m),m}}(n,s.bucket),Y);return ue.urlParams=m,ue.errorHandler=Uc(s),ue}function _d(n,s,t){const l=Object.assign({},t);return l.fullPath=n.path,l.size=s.size(),l.contentType||(l.contentType=function vo(n,s){return n&&n.contentType||s&&s.type()||"application/octet-stream"}(null,s)),l}class Jl{constructor(s,t,l,h){this.current=s,this.total=t,this.finalized=!!l,this.metadata=h||null}}function cc(n,s){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Na(!1)}return Na(!!t&&-1!==(s||["active"]).indexOf(t)),t}const Um={STATE_CHANGED:"state_changed"},ca={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yd(n){switch(n){case"running":case"pausing":case"canceling":return ca.RUNNING;case"paused":return ca.PAUSED;case"success":return ca.SUCCESS;case"canceled":return ca.CANCELED;default:return ca.ERROR}}class F0{constructor(s,t,l){if(function Sl(n){return"function"==typeof n}(s)||null!=t||null!=l)this.next=s,this.error=t??void 0,this.complete=l??void 0;else{const m=s;this.next=m.next,this.error=m.error,this.complete=m.complete}}}function wh(n){return(...s)=>{Promise.resolve().then(()=>n(...s))}}let vd=null;class Bm{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lc.NO_ERROR,this.sendPromise_=new Promise(s=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lc.ABORT,s()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lc.NETWORK_ERROR,s()}),this.xhr_.addEventListener("load",()=>{s()})})}send(s,t,l,h){if(this.sent_)throw _h("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,s,!0),void 0!==h)for(const m in h)h.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,h[m].toString());return void 0!==l?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _h("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _h("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _h("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _h("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(s){return this.xhr_.getResponseHeader(s)}addUploadProgressListener(s){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",s)}removeUploadProgressListener(s){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",s)}}class bd extends Bm{initXhr(){this.xhr_.responseType="text"}}function qa(){return vd?vd():new bd}class Yp{constructor(s,t,l=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=s,this._blob=t,this._metadata=l,this._mappings=lc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=h=>{if(this._request=void 0,this._chunkMultiplier=1,h._codeEquals(wi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const m=this.isExponentialBackoffExpired();if(jp(h.status,[])){if(!m)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();h=vm()}this._error=h,this._transition("error")}},this._metadataErrorHandler=h=>{this._request=void 0,h._codeEquals(wi.CANCELED)?this.completeTransitions_():(this._error=h,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((h,m)=>{this._resolve=h,this._reject=m,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const s=this._transferred;return t=>this._updateProgress(s+t)}_shouldDoResumable(s){return s.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(s){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,l])=>{switch(this._state){case"running":s(t,l);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((s,t)=>{const l=function Eh(n,s,t,l,h){const m=s.bucketOnlyServerUrl(),C=_d(s,l,h),F={name:C.fullPath},G=Au(m,n.host,n._protocol),ue={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l.size()}`,"X-Goog-Upload-Header-Content-Type":C.contentType,"Content-Type":"application/json; charset=utf-8"},Ne=Mm(C,t),u=new Ka(G,"POST",function o(d){let g;cc(d);try{g=d.getResponseHeader("X-Goog-Upload-URL")}catch{Na(!1)}return Na(sc(g)),g},n.maxUploadRetryTime);return u.urlParams=F,u.headers=ue,u.body=Ne,u.errorHandler=Uc(s),u}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),h=this._ref.storage._makeRequest(l,qa,s,t);this._request=h,h.getPromise().then(m=>{this._request=void 0,this._uploadUrl=m,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const s=this._uploadUrl;this._resolveToken((t,l)=>{const h=function Fm(n,s,t,l){const G=new Ka(t,"POST",function m(Y){const ue=cc(Y,["active","final"]);let Ne=null;try{Ne=Y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Na(!1)}Ne||Na(!1);const i=Number(Ne);return Na(!isNaN(i)),new Jl(i,l.size(),"final"===ue)},n.maxUploadRetryTime);return G.headers={"X-Goog-Upload-Command":"query"},G.errorHandler=Uc(s),G}(this._ref.storage,this._ref._location,s,this._blob),m=this._ref.storage._makeRequest(h,qa,t,l);this._request=m,m.getPromise().then(C=>{this._request=void 0,this._updateProgress(C.current),this._needToFetchStatus=!1,C.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const s=262144*this._chunkMultiplier,t=new Jl(this._transferred,this._blob.size()),l=this._uploadUrl;this._resolveToken((h,m)=>{let C;try{C=function Lm(n,s,t,l,h,m,C,F){const G=new Jl(0,0);if(C?(G.current=C.current,G.total=C.total):(G.current=0,G.total=l.size()),l.size()!==G.total)throw function Wa(){return new Pi(wi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Y=G.total-G.current;let ue=Y;h>0&&(ue=Math.min(ue,h));const Ne=G.current;let o="";o=0===ue?"finalize":Y===ue?"upload, finalize":"upload";const u={"X-Goog-Upload-Command":o,"X-Goog-Upload-Offset":`${G.current}`},d=l.slice(Ne,Ne+ue);if(null===d)throw fd();const O=new Ka(t,"POST",function g(x,W){const X=cc(x,["active","final"]),he=G.current+ue,Ae=l.size();let ze;return ze="final"===X?uc(s,m)(x,W):null,new Jl(he,Ae,"final"===X,ze)},s.maxUploadRetryTime);return O.headers=u,O.body=d.uploadData(),O.progressCallback=F||null,O.errorHandler=Uc(n),O}(this._ref._location,this._ref.storage,l,this._blob,s,this._mappings,t,this._makeProgressCallback())}catch(G){return this._error=G,void this._transition("error")}const F=this._ref.storage._makeRequest(C,qa,h,m,!1);this._request=F,F.getPromise().then(G=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(G.current),G.finalized?(this._metadata=G.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((s,t)=>{const l=md(this._ref.storage,this._ref._location,this._mappings),h=this._ref.storage._makeRequest(l,qa,s,t);this._request=h,h.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((s,t)=>{const l=function Df(n,s,t,l,h){const m=s.bucketOnlyServerUrl(),C={"X-Goog-Upload-Protocol":"multipart"},G=function F(){let O="";for(let x=0;x<2;x++)O+=Math.random().toString().slice(2);return O}();C["Content-Type"]="multipart/related; boundary="+G;const Y=_d(s,l,h),ue=Mm(Y,t),o=ac.getBlob("--"+G+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ue+"\r\n--"+G+"\r\nContent-Type: "+Y.contentType+"\r\n\r\n",l,"\r\n--"+G+"--");if(null===o)throw fd();const u={name:Y.fullPath},d=Au(m,n.host,n._protocol),y=n.maxUploadRetryTime,I=new Ka(d,"POST",uc(n,t),y);return I.urlParams=u,I.headers=C,I.body=o.uploadData(),I.errorHandler=Uc(s),I}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),h=this._ref.storage._makeRequest(l,qa,s,t);this._request=h,h.getPromise().then(m=>{this._request=void 0,this._metadata=m,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(s){const t=this._transferred;this._transferred=s,this._transferred!==t&&this._notifyObservers()}_transition(s){if(this._state!==s)switch(s){case"canceling":case"pausing":this._state=s,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=s,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=s,this._notifyObservers();break;case"canceled":this._error=ic(),this._state=s,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const s=yd(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:s,metadata:this._metadata,task:this,ref:this._ref}}on(s,t,l,h){const m=new F0(t||void 0,l||void 0,h||void 0);return this._addObserver(m),()=>{this._removeObserver(m)}}then(s,t){return this._promise.then(s,t)}catch(s){return this.then(null,s)}_addObserver(s){this._observers.push(s),this._notifyObserver(s)}_removeObserver(s){const t=this._observers.indexOf(s);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let s=!0;switch(yd(this._state)){case ca.SUCCESS:wh(this._resolve.bind(null,this.snapshot))();break;case ca.CANCELED:case ca.ERROR:wh(this._reject.bind(null,this._error))();break;default:s=!1}s&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(s){switch(yd(this._state)){case ca.RUNNING:case ca.PAUSED:s.next&&wh(s.next.bind(s,this.snapshot))();break;case ca.SUCCESS:s.complete&&wh(s.complete.bind(s))();break;default:s.error&&wh(s.error.bind(s,this._error))()}}resume(){const s="paused"===this._state||"pausing"===this._state;return s&&this._transition("running"),s}pause(){const s="running"===this._state;return s&&this._transition("pausing"),s}cancel(){const s="running"===this._state||"pausing"===this._state;return s&&this._transition("canceling"),s}}class Bc{constructor(s,t){this._service=s,this._location=t instanceof oo?t:oo.makeFromUrl(t,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,t){return new Bc(s,t)}get root(){const s=new oo(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return x0(this._location.path)}get storage(){return this._service}get parent(){const s=function R0(n){if(0===n.length)return null;const s=n.lastIndexOf("/");return-1===s?"":n.slice(0,s)}(this._location.path);if(null===s)return null;const t=new oo(this._location.bucket,s);return new Bc(this._service,t)}_throwIfRoot(s){if(""===this._location.path)throw bm(s)}}function Vy(n,s,t){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,Zl.Z)(function*(n,s,t){const h=yield Ed(n,{pageToken:t});s.prefixes.push(...h.prefixes),s.items.push(...h.items),null!=h.nextPageToken&&(yield Vy(n,s,h.nextPageToken))})).apply(this,arguments)}function Ed(n,s){null!=s&&"number"==typeof s.maxResults&&wm("options.maxResults",1,1e3,s.maxResults);const t=s||{},l=km(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(l,qa)}function Dh(n){n._throwIfRoot("getDownloadURL");const s=function Wp(n,s,t){const h=Au(s.fullServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,F=new Ka(h,"GET",function bf(n,s){return function t(l,h){const m=Ly(n,h,s);return Na(null!==m),function Nm(n,s,t,l){const h=Sm(s);if(null===h||!sc(h.downloadTokens))return null;const m=h.downloadTokens;if(0===m.length)return null;const C=encodeURIComponent;return m.split(",").map(Y=>{const Ne=n.fullPath;return Au("/b/"+C(n.bucket)+"/o/"+C(Ne),t,l)+Dm({alt:"media",token:Y})})[0]}(m,h,n.host,n._protocol)}}(n,t),C);return F.errorHandler=Ef(s),F}(n.storage,n._location,lc());return n.storage.makeRequestWithTokens(s,qa).then(t=>{if(null===t)throw function Ty(){return new Pi(wi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function jy(n,s){const t=function Am(n,s){const t=s.split("/").filter(l=>l.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,s),l=new oo(n._location.bucket,t);return new Bc(n.storage,l)}function zm(n,s){if(n instanceof Sf){const t=n;if(null==t._bucket)throw function hd(){return new Pi(wi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mf+"' property when initializing the app?")}();const l=new Bc(t,t._bucket);return null!=s?zm(l,s):l}return void 0!==s?jy(n,s):n}function U0(n,s){if(s&&function Ou(n){return/^[A-Za-z]+:\/\//.test(n)}(s)){if(n instanceof Sf)return function Jp(n,s){return new Bc(n,s)}(n,s);throw mh("To use ref(service, url), the first argument must be a Storage instance.")}return zm(n,s)}function Tf(n,s){const t=s?.[mf];return null==t?null:oo.makeFromBucketSpec(t,n)}class Sf{constructor(s,t,l,h,m){this.app=s,this._authProvider=t,this._appCheckProvider=l,this._url=h,this._firebaseVersion=m,this._bucket=null,this._host=wy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=h?oo.makeFromBucketSpec(h,this._host):Tf(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._bucket=null!=this._url?oo.makeFromBucketSpec(this._url,s):Tf(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){wm("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){wm("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}_getAuthToken(){var s=this;return(0,Zl.Z)(function*(){if(s._overrideAuthToken)return s._overrideAuthToken;const t=s._authProvider.getImmediate({optional:!0});if(t){const l=yield t.getToken();if(null!==l)return l.accessToken}return null})()}_getAppCheckToken(){var s=this;return(0,Zl.Z)(function*(){const t=s._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new Bc(this,s)}_makeRequest(s,t,l,h,m=!0){if(this._deleted)return new Sy(A0());{const C=function N0(n,s,t,l,h,m,C=!0){const F=Dm(n.urlParams),G=n.url+F,Y=Object.assign({},n.headers);return function Ry(n,s){s&&(n["X-Firebase-GMPID"]=s)}(Y,s),function Ny(n,s){null!==s&&s.length>0&&(n.Authorization="Firebase "+s)}(Y,t),function My(n,s){n["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}(Y,m),function xy(n,s){null!==s&&(n["X-Firebase-AppCheck"]=s)}(Y,l),new xo(G,n.method,Y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,h,C)}(s,this._appId,l,h,t,this._firebaseVersion,m);return this._requests.add(C),C.getPromise().then(()=>this._requests.delete(C),()=>this._requests.delete(C)),C}}makeRequestWithTokens(s,t){var l=this;return(0,Zl.Z)(function*(){const[h,m]=yield Promise.all([l._getAuthToken(),l._getAppCheckToken()]);return l._makeRequest(s,t,h,m).getPromise()})()}}const Hy="@firebase/storage";function tg(n,s){return U0(n=(0,_e.m9)(n),s)}function Wm(n,{instanceIdentifier:s}){const t=n.getProvider("app").getImmediate(),l=n.getProvider("auth-internal"),h=n.getProvider("app-check-internal");return new Sf(t,l,h,s,Su.SDK_VERSION)}!function ng(){(0,Su._registerComponent)(new za.wA("storage",Wm,"PUBLIC").setMultipleInstances(!0)),(0,Su.registerVersion)(Hy,"0.11.2",""),(0,Su.registerVersion)(Hy,"0.11.2","esm2017")}();class Nf{constructor(s,t,l){this._delegate=s,this.task=t,this.ref=l}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ky{constructor(s,t){this._delegate=s,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Nf(this._delegate.snapshot,this,this._ref)}then(s,t){return this._delegate.then(l=>{if(s)return s(new Nf(l,this,this._ref))},t)}on(s,t,l,h){let m;return t&&(m="function"==typeof t?C=>t(new Nf(C,this,this._ref)):{next:t.next?C=>t.next(new Nf(C,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(s,m,l||void 0,h||void 0)}}class rg{constructor(s,t){this._delegate=s,this._service=t}get prefixes(){return this._delegate.prefixes.map(s=>new Ra(s,this._service))}get items(){return this._delegate.items.map(s=>new Ra(s,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ra{constructor(s,t){this._delegate=s,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(s){const t=function Gc(n,s){return jy(n,s)}(this._delegate,s);return new Ra(t,this.storage)}get root(){return new Ra(this._delegate.root,this.storage)}get parent(){const s=this._delegate.parent;return null==s?null:new Ra(s,this.storage)}put(s,t){return this._throwIfRoot("put"),new Ky(function Ch(n,s,t){return function jm(n,s,t){return n._throwIfRoot("uploadBytesResumable"),new Yp(n,new ac(s),t)}(n=(0,_e.m9)(n),s,t)}(this._delegate,s,t),this)}putString(s,t=Oa.RAW,l){this._throwIfRoot("putString");const h=gd(t,s),m=Object.assign({},l);return null==m.contentType&&null!=h.contentType&&(m.contentType=h.contentType),new Ky(new Yp(this._delegate,new ac(h.data,!0),m),this)}listAll(){return function eg(n){return function Zp(n){const s={prefixes:[],items:[]};return Vy(n,s).then(()=>s)}(n=(0,_e.m9)(n))}(this._delegate).then(s=>new rg(s,this.storage))}list(s){return function wd(n,s){return Ed(n=(0,_e.m9)(n),s)}(this._delegate,s||void 0).then(t=>new rg(t,this.storage))}getMetadata(){return function Wy(n){return function Hm(n){n._throwIfRoot("getMetadata");const s=md(n.storage,n._location,lc());return n.storage.makeRequestWithTokens(s,qa)}(n=(0,_e.m9)(n))}(this._delegate)}updateMetadata(s){return function Vc(n,s){return function Gy(n,s){n._throwIfRoot("updateMetadata");const t=function P0(n,s,t,l){const m=Au(s.fullServerUrl(),n.host,n._protocol),F=Mm(t,l),Y=n.maxOperationRetryTime,ue=new Ka(m,"PATCH",uc(n,l),Y);return ue.headers={"Content-Type":"application/json; charset=utf-8"},ue.body=F,ue.errorHandler=Ef(s),ue}(n.storage,n._location,s,lc());return n.storage.makeRequestWithTokens(t,qa)}(n=(0,_e.m9)(n),s)}(this._delegate,s)}getDownloadURL(){return function Dd(n){return Dh(n=(0,_e.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Id(n){return function $m(n){n._throwIfRoot("deleteObject");const s=function k0(n,s){const l=Au(s.fullServerUrl(),n.host,n._protocol),F=new Ka(l,"DELETE",function C(G,Y){},n.maxOperationRetryTime);return F.successCodes=[200,204],F.errorHandler=Ef(s),F}(n.storage,n._location);return n.storage.makeRequestWithTokens(s,qa)}(n=(0,_e.m9)(n))}(this._delegate)}_throwIfRoot(s){if(""===this._delegate._location.path)throw bm(s)}}class qy{constructor(s,t){this.app=s,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(s){if(Yy(s))throw mh("ref() expected a child path but got a URL, use refFromURL instead.");return new Ra(tg(this._delegate,s),this)}refFromURL(s){if(!Yy(s))throw mh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oo.makeFromUrl(s,this._delegate.host)}catch{throw mh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ra(tg(this._delegate,s),this)}setMaxUploadRetryTime(s){this._delegate.maxUploadRetryTime=s}setMaxOperationRetryTime(s){this._delegate.maxOperationRetryTime=s}useEmulator(s,t,l={}){!function Af(n,s,t,l={}){!function B0(n,s,t,l={}){n.host=`${s}:${t}`,n._protocol="http";const{mockUserToken:h}=l;h&&(n._overrideAuthToken="string"==typeof h?h:(0,_e.Sg)(h,n.app.options.projectId))}(n,s,t,l)}(this._delegate,s,t,l)}}function Yy(n){return/^[A-Za-z]+:\/\//.test(n)}function Qy(n,{instanceIdentifier:s}){const t=n.getProvider("app-compat").getImmediate(),l=n.getProvider("storage").getImmediate({identifier:s});return new qy(t,l)}!function Xy(n){const s={TaskState:ca,TaskEvent:Um,StringFormat:Oa,Storage:qy,Reference:Ra};n.INTERNAL.registerComponent(new za.wA("storage-compat",Qy,"PUBLIC").setServiceProps(s).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(ym.Z);var ev=V(6217);function Km(n){const s=function G0(n){return new Pt.y(s=>{const t=C=>s.next(C);t(n.snapshot);const m=n.on("state_changed",t);return n.then(C=>{t(C),s.complete()},C=>{t(n.snapshot),(C=>{s.error(C)})(C)}),function(){m()}}).pipe(function Fp(n,s=hr.z){return(0,un.e)((t,l)=>{let h=null,m=null,C=null;const F=()=>{if(h){h.unsubscribe(),h=null;const Y=m;m=null,l.next(Y)}};function G(){const Y=C+n,ue=s.now();if(ue<Y)return h=this.schedule(void 0,Y-ue),void l.add(h);F()}t.subscribe((0,en.x)(l,Y=>{m=Y,C=s.now(),h||(h=s.schedule(G,n),l.add(h))},()=>{F(),l.complete()},void 0,()=>{m=h=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>s,percentageChanges:()=>s.pipe((0,Fe.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Sh(n){return{getDownloadURL:()=>(0,st.of)(void 0).pipe(Aa.fc,(0,Dr.w)(()=>n.getDownloadURL()),Aa.iC),getMetadata:()=>(0,st.of)(void 0).pipe(Aa.fc,(0,Dr.w)(()=>n.getMetadata()),Aa.iC),delete:()=>(0,kp.D)(n.delete()),child:s=>Sh(n.child(s)),updateMetadata:s=>(0,kp.D)(n.updateMetadata(s)),put:(s,t)=>Km(n.put(s,t)),putString:(s,t,l)=>Km(n.putString(s,t,l)),list:s=>(0,kp.D)(n.list(s)),listAll:()=>(0,kp.D)(n.listAll())}}const qm=new p.OlP("angularfire2.storageBucket"),Mf=new p.OlP("angularfire2.storage.maxUploadRetryTime"),Ym=new p.OlP("angularfire2.storage.maxOperationRetryTime"),j0=new p.OlP("angularfire2.storage.use-emulator");let Zm=(()=>{class n{constructor(t,l,h,m,C,F,G,Y,ue,Ne){const i=(0,Yl.on)(t,C,l);this.storage=(0,Yl.cc)(`${i.name}.storage.${h}`,"AngularFireStorage",i.name,()=>{const o=C.runOutsideAngular(()=>i.storage(h||void 0)),u=ue;return u&&o.useEmulator(...u),G&&o.setMaxUploadRetryTime(G),Y&&o.setMaxOperationRetryTime(Y),o},[G,Y])}ref(t){return Sh(this.storage.ref(t))}refFromURL(t){return Sh(this.storage.refFromURL(t))}upload(t,l,h){return Sh(this.storage.ref(t)).put(l,h)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Yl.Dh),p.LFG(Yl.xv,8),p.LFG(qm,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Aa.HU),p.LFG(Mf,8),p.LFG(Ym,8),p.LFG(j0,8),p.LFG(ev.nm,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Jm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),tv=(()=>{class n{constructor(){be.Z.registerVersion("angularfire",Aa.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Zm],imports:[Jm]}),n})();var Qm=V(3101),Xm=V(3099),e_=V(5026);V(9568);var Ah=V(1877);const H0="@firebase/database";let n_="";function ig(n){n_=n}class Rf{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,t){null==t?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),(0,_e.Wl)(t))}get(s){const t=this.domStorage_.getItem(this.prefixedName_(s));return null==t?null:(0,_e.cI)(t)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}class r_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,t){null==t?delete this.cache_[s]:this.cache_[s]=t}get(s){return(0,_e.r3)(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}const da=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const s=window[n];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new Rf(s)}}catch{}return new r_},Al=da("localStorage"),ao=da("sessionStorage"),Ol=new Ah.Yd("@firebase/database"),Td=function(){let n=1;return function(){return n++}}(),js=function(n){const s=(0,_e.dS)(n),t=new _e.gQ;t.update(s);const l=t.digest();return _e.US.encodeByteArray(l)},dc=function(...n){let s="";for(let t=0;t<n.length;t++){const l=n[t];Array.isArray(l)||l&&"object"==typeof l&&"number"==typeof l.length?s+=dc.apply(null,l):s+="object"==typeof l?(0,_e.Wl)(l):l,s+=" "}return s};let Nl=null,hc=!0;const Sd=function(n,s){(0,_e.hu)(!s||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ol.logLevel=Ah.in.VERBOSE,Nl=Ol.log.bind(Ol),s&&ao.set("logging_enabled",!0)):"function"==typeof n?Nl=n:(Nl=null,ao.remove("logging_enabled"))},bs=function(...n){if(!0===hc&&(hc=!1,null===Nl&&!0===ao.get("logging_enabled")&&Sd(!0)),Nl){const s=dc.apply(null,n);Nl(s)}},Ml=function(n){return function(...s){bs(n,...s)}},Hc=function(...n){const s="FIREBASE INTERNAL ERROR: "+dc(...n);Ol.error(s)},qo=function(...n){const s=`FIREBASE FATAL ERROR: ${dc(...n)}`;throw Ol.error(s),new Error(s)},Hs=function(...n){const s="FIREBASE WARNING: "+dc(...n);Ol.warn(s)},xf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nu="[MIN_NAME]",Rl="[MAX_NAME]",fc=function(n,s){if(n===s)return 0;if(n===Nu||s===Rl)return-1;if(s===Nu||n===Rl)return 1;{const t=Mh(n),l=Mh(s);return null!==t?null!==l?t-l==0?n.length-s.length:t-l:-1:null!==l?1:n<s?-1:1}},nv=function(n,s){return n===s?0:n<s?-1:1},Oh=function(n,s){if(s&&n in s)return s[n];throw new Error("Missing required key ("+n+") in object: "+(0,_e.Wl)(s))},Nh=function(n){if("object"!=typeof n||null===n)return(0,_e.Wl)(n);const s=[];for(const l in n)s.push(l);s.sort();let t="{";for(let l=0;l<s.length;l++)0!==l&&(t+=","),t+=(0,_e.Wl)(s[l]),t+=":",t+=Nh(n[s[l]]);return t+="}",t},i_=function(n,s){const t=n.length;if(t<=s)return[n];const l=[];for(let h=0;h<t;h+=s)l.push(n.substring(h,h+s>t?t:h+s));return l};function lo(n,s){for(const t in n)n.hasOwnProperty(t)&&s(t,n[t])}const og=function(n){(0,_e.hu)(!xf(n),"Invalid JSON number");const l=1023;let h,m,C,F,G;0===n?(m=0,C=0,h=1/n==-1/0?1:0):(h=n<0,(n=Math.abs(n))>=Math.pow(2,1-l)?(F=Math.min(Math.floor(Math.log(n)/Math.LN2),l),m=F+l,C=Math.round(n*Math.pow(2,52-F)-Math.pow(2,52))):(m=0,C=Math.round(n/Math.pow(2,-1074))));const Y=[];for(G=52;G;G-=1)Y.push(C%2?1:0),C=Math.floor(C/2);for(G=11;G;G-=1)Y.push(m%2?1:0),m=Math.floor(m/2);Y.push(h?1:0),Y.reverse();const ue=Y.join("");let Ne="";for(G=0;G<64;G+=8){let i=parseInt(ue.substr(G,8),2).toString(16);1===i.length&&(i="0"+i),Ne+=i}return Ne.toLowerCase()},lg=new RegExp("^-?(0*)\\d{1,10}$"),Mh=function(n){if(lg.test(n)){const s=Number(n);if(s>=-2147483648&&s<=2147483647)return s}return null},xl=function(n){try{n()}catch(s){setTimeout(()=>{throw Hs("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},l_=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pf=function(n,s){const t=setTimeout(n,s);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class ug{constructor(s,t){this.appName_=s,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(l=>this.appCheck=l)}getToken(s){return this.appCheck?this.appCheck.getToken(s):new Promise((t,l)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(t,l):t(null)},0)})}addTokenChangeListener(s){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(l=>l.addTokenListener(s))}notifyForInvalidToken(){Hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cg{constructor(s,t,l){this.appName_=s,this.firebaseOptions_=t,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(h=>this.auth_=h)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(t=>t&&"auth/token-not-initialized"===t.code?(bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,l)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(t,l):t(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(t=>t.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(t=>t.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';s+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hs(s)}}let Ad=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const xh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Uf="websocket",Bf="long_polling";class fg{constructor(s,t,l,h,m=!1,C="",F=!1,G=!1){this.secure=t,this.namespace=l,this.webSocketOnly=h,this.nodeAdmin=m,this.persistenceKey=C,this.includeNamespaceInQueryParams=F,this.isUsingEmulator=G,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Al.get("host:"+s)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&Al.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Vf(n,s,t){let l;if((0,_e.hu)("string"==typeof s,"typeof type must == string"),(0,_e.hu)("object"==typeof t,"typeof params must == object"),s===Uf)l=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(s!==Bf)throw new Error("Unknown connection type: "+s);l=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Md(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const h=[];return lo(t,(m,C)=>{h.push(m+"="+C)}),l+h.join("&")}class u_{constructor(){this.counters_={}}incrementCounter(s,t=1){(0,_e.r3)(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=t}get(){return(0,_e.p$)(this.counters_)}}const Ph={},pg={};function Gf(n){const s=n.toString();return Ph[s]||(Ph[s]=new u_),Ph[s]}class c_{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,t){this.closeAfterResponse=s,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,t){for(this.pendingResponses[s]=t;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let h=0;h<l.length;++h)l[h]&&xl(()=>{this.onMessage_(l[h])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class xu{constructor(s,t,l,h,m,C,F){this.connId=s,this.repoInfo=t,this.applicationId=l,this.appCheckToken=h,this.authToken=m,this.transportSessionId=C,this.lastSessionId=F,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ml(s),this.stats_=Gf(t),this.urlFn=G=>(this.appCheckToken&&(G.ac=this.appCheckToken),Vf(t,Bf,G))}open(s,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new c_(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,_e.Yr)()||"complete"===document.readyState)n();else{let s=!1;const t=function(){document.body?s||(s=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new p_((...m)=>{const[C,F,G,Y,ue]=m;if(this.incrementIncomingBytes_(m),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===C)this.id=F,this.password=G;else{if("close"!==C)throw new Error("Unrecognized command received: "+C);F?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(F,()=>{this.onClosed_()})):this.onClosed_()}},(...m)=>{const[C,F]=m;this.incrementIncomingBytes_(m),this.myPacketOrderer.handleResponse(C,F)},()=>{this.onClosed_()},this.urlFn);const l={start:"t"};l.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(l.cb=this.scriptTagHolder.uniqueCallbackIdentifier),l.v="5",this.transportSessionId&&(l.s=this.transportSessionId),this.lastSessionId&&(l.ls=this.lastSessionId),this.applicationId&&(l.p=this.applicationId),this.appCheckToken&&(l.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&xh.test(location.hostname)&&(l.r="f");const h=this.urlFn(l);this.log_("Connecting via long-poll to "+h),this.scriptTagHolder.addTag(h,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xu.forceAllow_=!0}static forceDisallow(){xu.forceDisallow_=!0}static isAvailable(){return!((0,_e.Yr)()||!xu.forceAllow_&&(xu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const t=(0,_e.Wl)(s);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const l=(0,_e.h$)(t),h=i_(l,1840);for(let m=0;m<h.length;m++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,h.length,h[m]),this.curSegmentNum++}addDisconnectPingFrame(s,t){if((0,_e.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const l={dframe:"t"};l.id=s,l.pw=t,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const t=(0,_e.Wl)(s).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class p_{constructor(s,t,l,h){if(this.onDisconnect=l,this.urlFn=h,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,_e.Yr)())this.commandCB=s,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Td(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=p_.createIFrame_();let m="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(m='<script>document.domain="'+document.domain+'";<\/script>');const C="<html><body>"+m+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(C),this.myIFrame.doc.close()}catch(F){bs("frame writing exception"),F.stack&&bs(F.stack),bs(F)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||bs("No IE domain setting required")}catch{const l=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,t){for(this.myID=s,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;let t=this.urlFn(s),l="",h=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+l.length<=1870;){const C=this.pendingSegs.shift();l=l+"&seg"+h+"="+C.seg+"&ts"+h+"="+C.ts+"&d"+h+"="+C.d,h++}return t+=l,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(s,t,l){this.pendingSegs.push({seg:s,ts:t,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(s,t){this.outstandingRequests.add(t);const l=()=>{this.outstandingRequests.delete(t),this.newRequest_()},h=setTimeout(l,Math.floor(25e3));this.addTag(s,()=>{clearTimeout(h),l()})}addTag(s,t){(0,_e.Yr)()?this.doNodeLongPoll(s,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=s,l.onload=l.onreadystatechange=function(){const h=l.readyState;(!h||"loaded"===h||"complete"===h)&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),t())},l.onerror=()=>{bs("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}let Fh=null;typeof MozWebSocket<"u"?Fh=MozWebSocket:typeof WebSocket<"u"&&(Fh=WebSocket);let Lh=(()=>{class n{constructor(t,l,h,m,C,F,G){this.connId=t,this.applicationId=h,this.appCheckToken=m,this.authToken=C,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ml(this.connId),this.stats_=Gf(l),this.connURL=n.connectionURL_(l,F,G,m,h),this.nodeAdmin=l.nodeAdmin}static connectionURL_(t,l,h,m,C){const F={v:"5"};return!(0,_e.Yr)()&&typeof location<"u"&&location.hostname&&xh.test(location.hostname)&&(F.r="f"),l&&(F.s=l),h&&(F.ls=h),m&&(F.ac=m),C&&(F.p=C),Vf(t,Uf,F)}open(t,l){this.onDisconnect=l,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Al.set("previous_websocket_failure",!0);try{let h;if((0,_e.Yr)()){h={headers:{"User-Agent":`Firebase/5/${n_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(h.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(h.headers["X-Firebase-AppCheck"]=this.appCheckToken);const C=process.env,F=0===this.connURL.indexOf("wss://")?C.HTTPS_PROXY||C.https_proxy:C.HTTP_PROXY||C.http_proxy;F&&(h.proxy={origin:F})}this.mySock=new Fh(this.connURL,[],h)}catch(h){this.log_("Error instantiating WebSocket.");const m=h.message||h.data;return m&&this.log_(m),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=h=>{this.handleIncomingFrame(h)},this.mySock.onerror=h=>{this.log_("WebSocket error.  Closing connection.");const m=h.message||h.data;m&&this.log_(m),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const h=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);h&&h.length>1&&parseFloat(h[1])<4.4&&(t=!0)}return!t&&null!==Fh&&!n.forceDisallow_}static previouslyFailed(){return Al.isInMemoryStorage||!0===Al.get("previous_websocket_failure")}markConnectionHealthy(){Al.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const l=this.frames.join("");this.frames=null;const h=(0,_e.cI)(l);this.onMessage(h)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,_e.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const l=Number(t);if(!isNaN(l))return this.handleNewFrameCount_(l),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const l=t.data;if(this.bytesReceived+=l.length,this.stats_.incrementCounter("bytes_received",l.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(l);else{const h=this.extractFrameCount_(l);null!==h&&this.appendFrame_(h)}}send(t){this.resetKeepAlive();const l=(0,_e.Wl)(t);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const h=i_(l,16384);h.length>1&&this.sendString_(String(h.length));for(let m=0;m<h.length;m++)this.sendString_(h[m])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(l){this.log_("Exception thrown from WebSocket.send():",l.message||l.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),jf=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[xu,Lh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const l=Lh&&Lh.isAvailable();let h=l&&!Lh.previouslyFailed();if(t.webSocketOnly&&(l||Hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),h=!0),h)this.transports_=[Lh];else{const m=this.transports_=[];for(const C of n.ALL_TRANSPORTS)C&&C.isAvailable()&&m.push(C);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class pv{constructor(s,t,l,h,m,C,F,G,Y,ue){this.id=s,this.repoInfo_=t,this.applicationId_=l,this.appCheckToken_=h,this.authToken_=m,this.onMessage_=C,this.onReady_=F,this.onDisconnect_=G,this.onKill_=Y,this.lastSessionId=ue,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ml("c:"+this.id+":"),this.transportManager_=new jf(t),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,l)},Math.floor(0));const h=s.healthyTimeout||0;h>0&&(this.healthyTimeout_=Pf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(h)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return t=>{s===this.conn_?this.onConnectionLost_(t):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return t=>{2!==this.state_&&(s===this.rx_?this.onPrimaryMessageReceived_(t):s===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(s){this.sendData_({t:"d",d:s})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if("t"in s){const t=s.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const t=Oh("t",s),l=Oh("d",s);if("c"===t)this.onSecondaryControl_(l);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(l)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const t=Oh("t",s),l=Oh("d",s);"c"===t?this.onControl_(l):"d"===t&&this.onDataMessage_(l)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const t=Oh("t",s);if("d"in s){const l=s.d;if("h"===t){const h=Object.assign({},l);this.repoInfo_.isUsingEmulator&&(h.h=this.repoInfo_.host),this.onHandshake_(h)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let h=0;h<this.pendingDataMessages.length;++h)this.onDataMessage_(this.pendingDataMessages[h]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(l):"r"===t?this.onReset_(l):"e"===t?Hc("Server Error: "+l):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hc("Unknown control packet command: "+t)}}onHandshake_(s){const t=s.ts,l=s.v,h=s.h;this.sessionId=s.s,this.repoInfo_.host=h,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==l&&Hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,l),Pf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,t){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Al.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class eu{put(s,t,l,h){}merge(s,t,l,h){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,t,l){}onDisconnectMerge(s,t,l){}onDisconnectCancel(s,t){}reportStats(s){}}class Pl{constructor(s){this.allowedEvents_=s,this.listeners_={},(0,_e.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...t){if(Array.isArray(this.listeners_[s])){const l=[...this.listeners_[s]];for(let h=0;h<l.length;h++)l[h].callback.apply(l[h].context,t)}}on(s,t,l){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:t,context:l});const h=this.getInitialEvent(s);h&&t.apply(l,h)}off(s,t,l){this.validateEventType_(s);const h=this.listeners_[s]||[];for(let m=0;m<h.length;m++)if(h[m].callback===t&&(!l||l===h[m].context))return void h.splice(m,1)}validateEventType_(s){(0,_e.hu)(this.allowedEvents_.find(t=>t===s),"Unknown event: "+s)}}class xa extends Pl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,_e.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xa}getInitialEvent(s){return(0,_e.hu)("online"===s,"Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}const xd=32,__=768;class Sr{constructor(s,t){if(void 0===t){this.pieces_=s.split("/");let l=0;for(let h=0;h<this.pieces_.length;h++)this.pieces_[h].length>0&&(this.pieces_[l]=this.pieces_[h],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=t}toString(){let s="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(s+="/"+this.pieces_[t]);return s||"/"}}function br(){return new Sr("")}function Mr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ya(n){return n.pieces_.length-n.pieceNum_}function hi(n){let s=n.pieceNum_;return s<n.pieces_.length&&s++,new Sr(n.pieces_,s)}function Pd(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kd(n,s=0){return n.pieces_.slice(n.pieceNum_+s)}function y_(n){if(n.pieceNum_>=n.pieces_.length)return null;const s=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)s.push(n.pieces_[t]);return new Sr(s,0)}function ki(n,s){const t=[];for(let l=n.pieceNum_;l<n.pieces_.length;l++)t.push(n.pieces_[l]);if(s instanceof Sr)for(let l=s.pieceNum_;l<s.pieces_.length;l++)t.push(s.pieces_[l]);else{const l=s.split("/");for(let h=0;h<l.length;h++)l[h].length>0&&t.push(l[h])}return new Sr(t,0)}function Er(n){return n.pieceNum_>=n.pieces_.length}function ls(n,s){const t=Mr(n),l=Mr(s);if(null===t)return s;if(t===l)return ls(hi(n),hi(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+n+")")}function yg(n,s){const t=kd(n,0),l=kd(s,0);for(let h=0;h<t.length&&h<l.length;h++){const m=fc(t[h],l[h]);if(0!==m)return m}return t.length===l.length?0:t.length<l.length?-1:1}function Wc(n,s){if(Ya(n)!==Ya(s))return!1;for(let t=n.pieceNum_,l=s.pieceNum_;t<=n.pieces_.length;t++,l++)if(n.pieces_[t]!==s.pieces_[l])return!1;return!0}function Za(n,s){let t=n.pieceNum_,l=s.pieceNum_;if(Ya(n)>Ya(s))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==s.pieces_[l])return!1;++t,++l}return!0}class $f{constructor(s,t){this.errorPrefix_=t,this.parts_=kd(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=(0,_e.ug)(this.parts_[l]);v_(this)}}function v_(n){if(n.byteLength_>__)throw new Error(n.errorPrefix_+"has a key path longer than "+__+" bytes ("+n.byteLength_+").");if(n.parts_.length>xd)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+xd+") or object contains a cycle "+Pu(n))}function Pu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Uh extends Pl{constructor(){let s,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const l=!document[s];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}static getInstance(){return new Uh}getInitialEvent(s){return(0,_e.hu)("visible"===s,"Unknown event type: "+s),[this.visible_]}}const Fd=1e3;let qc,ku=(()=>{class n extends eu{constructor(t,l,h,m,C,F,G,Y){if(super(),this.repoInfo_=t,this.applicationId_=l,this.onDataUpdate_=h,this.onConnectStatus_=m,this.onServerInfoUpdate_=C,this.authTokenProvider_=F,this.appCheckTokenProvider_=G,this.authOverride_=Y,this.id=n.nextPersistentConnectionId_++,this.log_=Ml("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Y&&!(0,_e.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uh.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xa.getInstance().on("online",this.onOnline_,this)}sendRequest(t,l,h){const m=++this.requestNumber_,C={r:m,a:t,b:l};this.log_((0,_e.Wl)(C)),(0,_e.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(C),h&&(this.requestCBHash_[m]=h)}get(t){this.initConnection_();const l=new _e.BH,m={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:F=>{const G=F.d;"ok"===F.s?l.resolve(G):l.reject(G)}};return this.outstandingGets_.push(m),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),l.promise}listen(t,l,h,m){this.initConnection_();const C=t._queryIdentifier,F=t._path.toString();this.log_("Listen called for "+F+" "+C),this.listens.has(F)||this.listens.set(F,new Map),(0,_e.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,_e.hu)(!this.listens.get(F).has(C),"listen() called twice for same path/queryId.");const G={onComplete:m,hashFn:l,query:t,tag:h};this.listens.get(F).set(C,G),this.connected_&&this.sendListen_(G)}sendGet_(t){const l=this.outstandingGets_[t];this.sendRequest("g",l.request,h=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),l.onComplete&&l.onComplete(h)})}sendListen_(t){const l=t.query,h=l._path.toString(),m=l._queryIdentifier;this.log_("Listen on "+h+" for "+m);const C={p:h};t.tag&&(C.q=l._queryObject,C.t=t.tag),C.h=t.hashFn(),this.sendRequest("q",C,G=>{const Y=G.d,ue=G.s;n.warnOnListenWarnings_(Y,l),(this.listens.get(h)&&this.listens.get(h).get(m))===t&&(this.log_("listen response",G),"ok"!==ue&&this.removeListen_(h,m),t.onComplete&&t.onComplete(ue,Y))})}static warnOnListenWarnings_(t,l){if(t&&"object"==typeof t&&(0,_e.r3)(t,"w")){const h=(0,_e.DV)(t,"w");if(Array.isArray(h)&&~h.indexOf("no_index")){const m='".indexOn": "'+l._queryParams.getIndex().toString()+'"',C=l._path.toString();Hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${m} at ${C} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,_e.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,l=(0,_e.w9)(t)?"auth":"gauth",h={cred:t};null===this.authOverride_?h.noauth=!0:"object"==typeof this.authOverride_&&(h.authvar=this.authOverride_),this.sendRequest(l,h,m=>{const C=m.s,F=m.d||"error";this.authToken_===t&&("ok"===C?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(C,F))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const l=t.s,h=t.d||"error";"ok"===l?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(l,h)})}unlisten(t,l){const h=t._path.toString(),m=t._queryIdentifier;this.log_("Unlisten called for "+h+" "+m),(0,_e.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(h,m)&&this.connected_&&this.sendUnlisten_(h,m,t._queryObject,l)}sendUnlisten_(t,l,h,m){this.log_("Unlisten on "+t+" for "+l);const C={p:t};m&&(C.q=h,C.t=m),this.sendRequest("n",C)}onDisconnectPut(t,l,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,l,h):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:l,onComplete:h})}onDisconnectMerge(t,l,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,l,h):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:l,onComplete:h})}onDisconnectCancel(t,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:l})}sendOnDisconnect_(t,l,h,m){const C={p:l,d:h};this.log_("onDisconnect "+t,C),this.sendRequest(t,C,F=>{m&&setTimeout(()=>{m(F.s,F.d)},Math.floor(0))})}put(t,l,h,m){this.putInternal("p",t,l,h,m)}merge(t,l,h,m){this.putInternal("m",t,l,h,m)}putInternal(t,l,h,m,C){this.initConnection_();const F={p:l,d:h};void 0!==C&&(F.h=C),this.outstandingPuts_.push({action:t,request:F,onComplete:m}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+l)}sendPut_(t){const l=this.outstandingPuts_[t].action,h=this.outstandingPuts_[t].request,m=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(l,h,C=>{this.log_(l+" response",C),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),m&&m(C.s,C.d)})}reportStats(t){if(this.connected_){const l={c:t};this.log_("reportStats",l),this.sendRequest("s",l,h=>{"ok"!==h.s&&this.log_("reportStats","Error sending stats: "+h.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,_e.Wl)(t));const l=t.r,h=this.requestCBHash_[l];h&&(delete this.requestCBHash_[l],h(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,l){this.log_("handleServerMessage",t,l),"d"===t?this.onDataUpdate_(l.p,l.d,!1,l.t):"m"===t?this.onDataUpdate_(l.p,l.d,!0,l.t):"c"===t?this.onListenRevoked_(l.p,l.q):"ac"===t?this.onAuthRevoked_(l.s,l.d):"apc"===t?this.onAppCheckRevoked_(l.s,l.d):"sd"===t?this.onSecurityDebugPacket_(l):Hc("Unrecognized action received from server: "+(0,_e.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,l){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=l,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,_e.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let l=Math.max(0,this.reconnectDelay_-t);l=Math.random()*l,this.log_("Trying to reconnect in "+l+"ms"),this.scheduleConnect_(l),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Zl.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const l=t.onDataMessage_.bind(t),h=t.onReady_.bind(t),m=t.onRealtimeDisconnect_.bind(t),C=t.id+":"+n.nextConnectionId_++,F=t.lastSessionId;let G=!1,Y=null;const ue=function(){Y?Y.close():(G=!0,m())};t.realtime_={close:ue,sendRequest:function(o){(0,_e.hu)(Y,"sendRequest call when we're not connected not allowed."),Y.sendRequest(o)}};const i=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[o,u]=yield Promise.all([t.authTokenProvider_.getToken(i),t.appCheckTokenProvider_.getToken(i)]);G?bs("getToken() completed but was canceled"):(bs("getToken() completed. Creating connection."),t.authToken_=o&&o.accessToken,t.appCheckToken_=u&&u.token,Y=new pv(C,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,l,h,m,d=>{Hs(d+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},F))}catch(o){t.log_("Failed to get token: "+o),G||(t.repoInfo_.nodeAdmin&&Hs(o),ue())}}})()}interrupt(t){bs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){bs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,_e.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const l=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:l})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const l=this.outstandingPuts_[t];l&&"h"in l.request&&l.queued&&(l.onComplete&&l.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,l){let h;h=l?l.map(C=>Nh(C)).join("$"):"default";const m=this.removeListen_(t,h);m&&m.onComplete&&m.onComplete("permission_denied")}removeListen_(t,l){const h=new Sr(t).toString();let m;if(this.listens.has(h)){const C=this.listens.get(h);m=C.get(l),C.delete(l),0===C.size&&this.listens.delete(h)}else m=void 0;return m}onAuthRevoked_(t,l){bs("Auth token revoked: "+t+"/"+l),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,l){bs("App check token revoked: "+t+"/"+l),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const l of t.values())this.sendListen_(l);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let l="js";(0,_e.Yr)()&&(l=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+l+"."+n_.replace(/\./g,"-")]=1,(0,_e.uI)()?t["framework.cordova"]=1:(0,_e.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xa.getInstance().currentlyOnline();return(0,_e.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class mr{constructor(s,t){this.name=s,this.node=t}static Wrap(s,t){return new mr(s,t)}}class zf{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,t){const l=new mr(Nu,s),h=new mr(Nu,t);return 0!==this.compare(l,h)}minPost(){return mr.MIN}}class _v extends zf{static get __EMPTY_NODE(){return qc}static set __EMPTY_NODE(s){qc=s}compare(s,t){return fc(s.name,t.name)}isDefinedOn(s){throw(0,_e.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,t){return!1}minPost(){return mr.MIN}maxPost(){return new mr(Rl,qc)}makePost(s,t){return(0,_e.hu)("string"==typeof s,"KeyIndex indexValue must always be a string."),new mr(s,qc)}toString(){return".key"}}const dl=new _v;class Wf{constructor(s,t,l,h,m=null){this.isReverse_=h,this.resultGenerator_=m,this.nodeStack_=[];let C=1;for(;!s.isEmpty();)if(C=t?l(s.key,t):1,h&&(C*=-1),C<0)s=this.isReverse_?s.left:s.right;else{if(0===C){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,s=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}let Yc,hl=(()=>{class n{constructor(t,l,h,m,C){this.key=t,this.value=l,this.color=h??n.RED,this.left=m??$s.EMPTY_NODE,this.right=C??$s.EMPTY_NODE}copy(t,l,h,m,C){return new n(t??this.key,l??this.value,h??this.color,m??this.left,C??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,l,h){let m=this;const C=h(t,m.key);return m=C<0?m.copy(null,null,null,m.left.insert(t,l,h),null):0===C?m.copy(null,l,null,null,null):m.copy(null,null,null,null,m.right.insert(t,l,h)),m.fixUp_()}removeMin_(){if(this.left.isEmpty())return $s.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,l){let h,m;if(h=this,l(t,h.key)<0)!h.left.isEmpty()&&!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),h=h.copy(null,null,null,h.left.remove(t,l),null);else{if(h.left.isRed_()&&(h=h.rotateRight_()),!h.right.isEmpty()&&!h.right.isRed_()&&!h.right.left.isRed_()&&(h=h.moveRedRight_()),0===l(t,h.key)){if(h.right.isEmpty())return $s.EMPTY_NODE;m=h.right.min_(),h=h.copy(m.key,m.value,null,null,h.right.removeMin_())}h=h.copy(null,null,null,null,h.right.remove(t,l))}return h.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),l=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,l)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $s{constructor(s,t=$s.EMPTY_NODE){this.comparator_=s,this.root_=t}insert(s,t){return new $s(this.comparator_,this.root_.insert(s,t,this.comparator_).copy(null,null,hl.BLACK,null,null))}remove(s){return new $s(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,hl.BLACK,null,null))}get(s){let t,l=this.root_;for(;!l.isEmpty();){if(t=this.comparator_(s,l.key),0===t)return l.value;t<0?l=l.left:t>0&&(l=l.right)}return null}getPredecessorKey(s){let t,l=this.root_,h=null;for(;!l.isEmpty();){if(t=this.comparator_(s,l.key),0===t){if(l.left.isEmpty())return h?h.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}t<0?l=l.left:t>0&&(h=l,l=l.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new Wf(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,t){return new Wf(this.root_,s,this.comparator_,!1,t)}getReverseIteratorFrom(s,t){return new Wf(this.root_,s,this.comparator_,!0,t)}getReverseIterator(s){return new Wf(this.root_,null,this.comparator_,!0,s)}}function qf(n,s){return fc(n.name,s.name)}function w_(n,s){return fc(n,s)}$s.EMPTY_NODE=new class Kf{copy(s,t,l,h,m){return this}insert(s,t,l){return new hl(s,t,null)}remove(s,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const q0=function(n){return"number"==typeof n?"number:"+og(n):"string:"+n},Yf=function(n){if(n.isLeafNode()){const s=n.val();(0,_e.hu)("string"==typeof s||"number"==typeof s||"object"==typeof s&&(0,_e.r3)(s,".sv"),"Priority must be a string or number.")}else(0,_e.hu)(n===Yc||n.isEmpty(),"priority of unexpected type.");(0,_e.hu)(n===Yc||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let D_,I_,C_,Fu=(()=>{class n{constructor(t,l=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=l,this.lazyHash_=null,(0,_e.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yf(this.priorityNode_)}static set __childrenNodeConstructor(t){D_=t}static get __childrenNodeConstructor(){return D_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Er(t)?this:".priority"===Mr(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,l){return null}updateImmediateChild(t,l){return".priority"===t?this.updatePriority(l):l.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,l).updatePriority(this.priorityNode_)}updateChild(t,l){const h=Mr(t);return null===h?l:l.isEmpty()&&".priority"!==h?this:((0,_e.hu)(".priority"!==h||1===Ya(t),".priority must be the last token in a path"),this.updateImmediateChild(h,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(hi(t),l)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,l){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+q0(this.priorityNode_.val())+":");const l=typeof this.value_;t+=l+":",t+="number"===l?og(this.value_):this.value_,this.lazyHash_=js(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,_e.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const l=typeof t.value_,h=typeof this.value_,m=n.VALUE_TYPE_ORDER.indexOf(l),C=n.VALUE_TYPE_ORDER.indexOf(h);return(0,_e.hu)(m>=0,"Unknown leaf type: "+l),(0,_e.hu)(C>=0,"Unknown leaf type: "+h),m===C?"object"===h?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:C-m}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Di=new class vv extends zf{compare(s,t){const l=s.node.getPriority(),h=t.node.getPriority(),m=l.compareTo(h);return 0===m?fc(s.name,t.name):m}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,t){return!s.getPriority().equals(t.getPriority())}minPost(){return mr.MIN}maxPost(){return new mr(Rl,new Fu("[PRIORITY-POST]",C_))}makePost(s,t){const l=I_(s);return new mr(t,new Fu("[PRIORITY-POST]",l))}toString(){return".priority"}},T_=Math.log(2);class bv{constructor(s){this.count=parseInt(Math.log(s+1)/T_,10),this.current_=this.count-1;const h=(m=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=s+1&h}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const tu=function(n,s,t,l){n.sort(s);const h=function(G,Y){const ue=Y-G;let Ne,i;if(0===ue)return null;if(1===ue)return Ne=n[G],i=t?t(Ne):Ne,new hl(i,Ne.node,hl.BLACK,null,null);{const o=parseInt(ue/2,10)+G,u=h(G,o),d=h(o+1,Y);return Ne=n[o],i=t?t(Ne):Ne,new hl(i,Ne.node,hl.BLACK,u,d)}},F=function(G){let Y=null,ue=null,Ne=n.length;const i=function(u,d){const g=Ne-u,y=Ne;Ne-=u;const I=h(g+1,y),O=n[g],x=t?t(O):O;o(new hl(x,O.node,d,null,I))},o=function(u){Y?(Y.left=u,Y=u):(ue=u,Y=u)};for(let u=0;u<G.count;++u){const d=G.nextBitIsOne(),g=Math.pow(2,G.count-(u+1));d?i(g,hl.BLACK):(i(g,hl.BLACK),i(g,hl.RED))}return ue}(new bv(n.length));return new $s(l||s,F)};let Eg;const Ld={};class Pa{constructor(s,t){this.indexes_=s,this.indexSet_=t}static get Default(){return(0,_e.hu)(Ld&&Di,"ChildrenNode.ts has not been loaded"),Eg=Eg||new Pa({".priority":Ld},{".priority":Di}),Eg}get(s){const t=(0,_e.DV)(this.indexes_,s);if(!t)throw new Error("No index defined for "+s);return t instanceof $s?t:null}hasIndex(s){return(0,_e.r3)(this.indexSet_,s.toString())}addIndex(s,t){(0,_e.hu)(s!==dl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let h=!1;const m=t.getIterator(mr.Wrap);let F,C=m.getNext();for(;C;)h=h||s.isDefinedOn(C.node),l.push(C),C=m.getNext();F=h?tu(l,s.getCompare()):Ld;const G=s.toString(),Y=Object.assign({},this.indexSet_);Y[G]=s;const ue=Object.assign({},this.indexes_);return ue[G]=F,new Pa(ue,Y)}addToIndexes(s,t){const l=(0,_e.UI)(this.indexes_,(h,m)=>{const C=(0,_e.DV)(this.indexSet_,m);if((0,_e.hu)(C,"Missing index implementation for "+m),h===Ld){if(C.isDefinedOn(s.node)){const F=[],G=t.getIterator(mr.Wrap);let Y=G.getNext();for(;Y;)Y.name!==s.name&&F.push(Y),Y=G.getNext();return F.push(s),tu(F,C.getCompare())}return Ld}{const F=t.get(s.name);let G=h;return F&&(G=G.remove(new mr(s.name,F))),G.insert(s,s.node)}});return new Pa(l,this.indexSet_)}removeFromIndexes(s,t){const l=(0,_e.UI)(this.indexes_,h=>{if(h===Ld)return h;{const m=t.get(s.name);return m?h.remove(new mr(s.name,m)):h}});return new Pa(l,this.indexSet_)}}let Jf,tr=(()=>{class n{constructor(t,l,h){this.children_=t,this.priorityNode_=l,this.indexMap_=h,this.lazyHash_=null,this.priorityNode_&&Yf(this.priorityNode_),this.children_.isEmpty()&&(0,_e.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Jf||(Jf=new n(new $s(w_),null,Pa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Jf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const l=this.children_.get(t);return null===l?Jf:l}}getChild(t){const l=Mr(t);return null===l?this:this.getImmediateChild(l).getChild(hi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,l){if((0,_e.hu)(l,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(l);{const h=new mr(t,l);let m,C;l.isEmpty()?(m=this.children_.remove(t),C=this.indexMap_.removeFromIndexes(h,this.children_)):(m=this.children_.insert(t,l),C=this.indexMap_.addToIndexes(h,this.children_));const F=m.isEmpty()?Jf:this.priorityNode_;return new n(m,F,C)}}updateChild(t,l){const h=Mr(t);if(null===h)return l;{(0,_e.hu)(".priority"!==Mr(t)||1===Ya(t),".priority must be the last token in a path");const m=this.getImmediateChild(h).updateChild(hi(t),l);return this.updateImmediateChild(h,m)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const l={};let h=0,m=0,C=!0;if(this.forEachChild(Di,(F,G)=>{l[F]=G.val(t),h++,C&&n.INTEGER_REGEXP_.test(F)?m=Math.max(m,Number(F)):C=!1}),!t&&C&&m<2*h){const F=[];for(const G in l)F[G]=l[G];return F}return t&&!this.getPriority().isEmpty()&&(l[".priority"]=this.getPriority().val()),l}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+q0(this.getPriority().val())+":"),this.forEachChild(Di,(l,h)=>{const m=h.hash();""!==m&&(t+=":"+l+":"+m)}),this.lazyHash_=""===t?"":js(t)}return this.lazyHash_}getPredecessorChildName(t,l,h){const m=this.resolveIndex_(h);if(m){const C=m.getPredecessorKey(new mr(t,l));return C?C.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const l=this.resolveIndex_(t);if(l){const h=l.minKey();return h&&h.name}return this.children_.minKey()}getFirstChild(t){const l=this.getFirstChildName(t);return l?new mr(l,this.children_.get(l)):null}getLastChildName(t){const l=this.resolveIndex_(t);if(l){const h=l.maxKey();return h&&h.name}return this.children_.maxKey()}getLastChild(t){const l=this.getLastChildName(t);return l?new mr(l,this.children_.get(l)):null}forEachChild(t,l){const h=this.resolveIndex_(t);return h?h.inorderTraversal(m=>l(m.name,m.node)):this.children_.inorderTraversal(l)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,l){const h=this.resolveIndex_(l);if(h)return h.getIteratorFrom(t,m=>m);{const m=this.children_.getIteratorFrom(t.name,mr.Wrap);let C=m.peek();for(;null!=C&&l.compare(C,t)<0;)m.getNext(),C=m.peek();return m}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,l){const h=this.resolveIndex_(l);if(h)return h.getReverseIteratorFrom(t,m=>m);{const m=this.children_.getReverseIteratorFrom(t.name,mr.Wrap);let C=m.peek();for(;null!=C&&l.compare(C,t)>0;)m.getNext(),C=m.peek();return m}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===pc?-1:0}withIndex(t){if(t===dl||this.indexMap_.hasIndex(t))return this;{const l=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,l)}}isIndexed(t){return t===dl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const l=t;if(this.getPriority().equals(l.getPriority())){if(this.children_.count()===l.children_.count()){const h=this.getIterator(Di),m=l.getIterator(Di);let C=h.getNext(),F=m.getNext();for(;C&&F;){if(C.name!==F.name||!C.node.equals(F.node))return!1;C=h.getNext(),F=m.getNext()}return null===C&&null===F}return!1}return!1}}resolveIndex_(t){return t===dl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const pc=new class Ev extends tr{constructor(){super(new $s(w_),tr.EMPTY_NODE,Pa.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return tr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(mr,{MIN:{value:new mr(Nu,tr.EMPTY_NODE)},MAX:{value:new mr(Rl,pc)}}),_v.__EMPTY_NODE=tr.EMPTY_NODE,Fu.__childrenNodeConstructor=tr,function eE(n){Yc=n}(pc),function yv(n){C_=n}(pc);const wv=!0;function zs(n,s=null){if(null===n)return tr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(s=n[".priority"]),(0,_e.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Fu(n,zs(s));if(n instanceof Array||!wv){let t=tr.EMPTY_NODE;return lo(n,(l,h)=>{if((0,_e.r3)(n,l)&&"."!==l.substring(0,1)){const m=zs(h);(m.isLeafNode()||!m.isEmpty())&&(t=t.updateImmediateChild(l,m))}}),t.updatePriority(zs(s))}{const t=[];let l=!1;if(lo(n,(C,F)=>{if("."!==C.substring(0,1)){const G=zs(F);G.isEmpty()||(l=l||!G.getPriority().isEmpty(),t.push(new mr(C,G)))}}),0===t.length)return tr.EMPTY_NODE;const m=tu(t,qf,C=>C.name,w_);if(l){const C=tu(t,Di.getCompare());return new tr(m,zs(s),new Pa({".priority":C},{".priority":Di}))}return new tr(m,zs(s),Pa.Default)}}!function Zf(n){I_=n}(zs);class jn extends zf{constructor(s){super(),this.indexPath_=s,(0,_e.hu)(!Er(s)&&".priority"!==Mr(s),"Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,t){const l=this.extractChild(s.node),h=this.extractChild(t.node),m=l.compareTo(h);return 0===m?fc(s.name,t.name):m}makePost(s,t){const l=zs(s),h=tr.EMPTY_NODE.updateChild(this.indexPath_,l);return new mr(t,h)}maxPost(){const s=tr.EMPTY_NODE.updateChild(this.indexPath_,pc);return new mr(Rl,s)}toString(){return kd(this.indexPath_,0).join("/")}}const Dv=new class Y0 extends zf{compare(s,t){const l=s.node.compareTo(t.node);return 0===l?fc(s.name,t.name):l}isDefinedOn(s){return!0}indexedValueChanged(s,t){return!s.equals(t)}minPost(){return mr.MIN}maxPost(){return mr.MAX}makePost(s,t){const l=zs(s);return new mr(t,l)}toString(){return".value"}};function Z0(n){return{type:"value",snapshotNode:n}}function Zo(n,s){return{type:"child_added",snapshotNode:s,childName:n}}function fl(n,s){return{type:"child_removed",snapshotNode:s,childName:n}}function kl(n,s,t){return{type:"child_changed",snapshotNode:s,childName:n,oldSnap:t}}class us{constructor(s){this.index_=s}updateChild(s,t,l,h,m,C){(0,_e.hu)(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const F=s.getImmediateChild(t);return F.getChild(h).equals(l.getChild(h))&&F.isEmpty()===l.isEmpty()||(null!=C&&(l.isEmpty()?s.hasChild(t)?C.trackChildChange(fl(t,F)):(0,_e.hu)(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):F.isEmpty()?C.trackChildChange(Zo(t,l)):C.trackChildChange(kl(t,l,F))),s.isLeafNode()&&l.isEmpty())?s:s.updateImmediateChild(t,l).withIndex(this.index_)}updateFullNode(s,t,l){return null!=l&&(s.isLeafNode()||s.forEachChild(Di,(h,m)=>{t.hasChild(h)||l.trackChildChange(fl(h,m))}),t.isLeafNode()||t.forEachChild(Di,(h,m)=>{if(s.hasChild(h)){const C=s.getImmediateChild(h);C.equals(m)||l.trackChildChange(kl(h,m,C))}else l.trackChildChange(Zo(h,m))})),t.withIndex(this.index_)}updatePriority(s,t){return s.isEmpty()?tr.EMPTY_NODE:s.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Qf{constructor(s){this.indexedFilter_=new us(s.getIndex()),this.index_=s.getIndex(),this.startPost_=Qf.getStartPost_(s),this.endPost_=Qf.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,l=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return t&&l}updateChild(s,t,l,h,m,C){return this.matches(new mr(t,l))||(l=tr.EMPTY_NODE),this.indexedFilter_.updateChild(s,t,l,h,m,C)}updateFullNode(s,t,l){t.isLeafNode()&&(t=tr.EMPTY_NODE);let h=t.withIndex(this.index_);h=h.updatePriority(tr.EMPTY_NODE);const m=this;return t.forEachChild(Di,(C,F)=>{m.matches(new mr(C,F))||(h=h.updateImmediateChild(C,tr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,h,l)}updatePriority(s,t){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const t=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),t)}return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const t=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),t)}return s.getIndex().maxPost()}}class Iv{constructor(s){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const l=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?l<=0:l<0},this.withinEndPost=t=>{const l=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?l<=0:l<0},this.rangedFilter_=new Qf(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,t,l,h,m,C){return this.rangedFilter_.matches(new mr(t,l))||(l=tr.EMPTY_NODE),s.getImmediateChild(t).equals(l)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,t,l,h,m,C):this.fullLimitUpdateChild_(s,t,l,m,C)}updateFullNode(s,t,l){let h;if(t.isLeafNode()||t.isEmpty())h=tr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let m;h=tr.EMPTY_NODE.withIndex(this.index_),m=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let C=0;for(;m.hasNext()&&C<this.limit_;){const F=m.getNext();if(this.withinDirectionalStart(F)){if(!this.withinDirectionalEnd(F))break;h=h.updateImmediateChild(F.name,F.node),C++}}}else{let m;h=t.withIndex(this.index_),h=h.updatePriority(tr.EMPTY_NODE),m=this.reverse_?h.getReverseIterator(this.index_):h.getIterator(this.index_);let C=0;for(;m.hasNext();){const F=m.getNext();C<this.limit_&&this.withinDirectionalStart(F)&&this.withinDirectionalEnd(F)?C++:h=h.updateImmediateChild(F.name,tr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,h,l)}updatePriority(s,t){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,t,l,h,m){let C;if(this.reverse_){const Ne=this.index_.getCompare();C=(i,o)=>Ne(o,i)}else C=this.index_.getCompare();const F=s;(0,_e.hu)(F.numChildren()===this.limit_,"");const G=new mr(t,l),Y=this.reverse_?F.getFirstChild(this.index_):F.getLastChild(this.index_),ue=this.rangedFilter_.matches(G);if(F.hasChild(t)){const Ne=F.getImmediateChild(t);let i=h.getChildAfterChild(this.index_,Y,this.reverse_);for(;null!=i&&(i.name===t||F.hasChild(i.name));)i=h.getChildAfterChild(this.index_,i,this.reverse_);const o=null==i?1:C(i,G);if(ue&&!l.isEmpty()&&o>=0)return m?.trackChildChange(kl(t,l,Ne)),F.updateImmediateChild(t,l);{m?.trackChildChange(fl(t,Ne));const d=F.updateImmediateChild(t,tr.EMPTY_NODE);return null!=i&&this.rangedFilter_.matches(i)?(m?.trackChildChange(Zo(i.name,i.node)),d.updateImmediateChild(i.name,i.node)):d}}return l.isEmpty()?s:ue&&C(Y,G)>=0?(null!=m&&(m.trackChildChange(fl(Y.name,Y.node)),m.trackChildChange(Zo(t,l))),F.updateImmediateChild(t,l).updateImmediateChild(Y.name,tr.EMPTY_NODE)):s}}class Fl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Di}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,_e.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,_e.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,_e.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,_e.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,_e.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Di}copy(){const s=new Fl;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function wg(n,s,t){const l=n.copy();return l.startSet_=!0,void 0===s&&(s=null),l.indexStartValue_=s,null!=t?(l.startNameSet_=!0,l.indexStartName_=t):(l.startNameSet_=!1,l.indexStartName_=""),l}function Dg(n,s,t){const l=n.copy();return l.endSet_=!0,void 0===s&&(s=null),l.indexEndValue_=s,void 0!==t?(l.endNameSet_=!0,l.indexEndName_=t):(l.endNameSet_=!1,l.indexEndName_=""),l}function Ig(n,s){const t=n.copy();return t.index_=s,t}function Vh(n){const s={};if(n.isDefault())return s;let t;if(n.index_===Di?t="$priority":n.index_===Dv?t="$value":n.index_===dl?t="$key":((0,_e.hu)(n.index_ instanceof jn,"Unrecognized index type!"),t=n.index_.toString()),s.orderBy=(0,_e.Wl)(t),n.startSet_){const l=n.startAfterSet_?"startAfter":"startAt";s[l]=(0,_e.Wl)(n.indexStartValue_),n.startNameSet_&&(s[l]+=","+(0,_e.Wl)(n.indexStartName_))}if(n.endSet_){const l=n.endBeforeSet_?"endBefore":"endAt";s[l]=(0,_e.Wl)(n.indexEndValue_),n.endNameSet_&&(s[l]+=","+(0,_e.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?s.limitToFirst=n.limit_:s.limitToLast=n.limit_),s}function S_(n){const s={};if(n.startSet_&&(s.sp=n.indexStartValue_,n.startNameSet_&&(s.sn=n.indexStartName_),s.sin=!n.startAfterSet_),n.endSet_&&(s.ep=n.indexEndValue_,n.endNameSet_&&(s.en=n.indexEndName_),s.ein=!n.endBeforeSet_),n.limitSet_){s.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),s.vf=t}return n.index_!==Di&&(s.i=n.index_.toString()),s}class Cg extends eu{constructor(s,t,l,h){super(),this.repoInfo_=s,this.onDataUpdate_=t,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.log_=Ml("p:rest:"),this.listens_={}}reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,t){return void 0!==t?"tag$"+t:((0,_e.hu)(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}listen(s,t,l,h){const m=s._path.toString();this.log_("Listen called for "+m+" "+s._queryIdentifier);const C=Cg.getListenId_(s,l),F={};this.listens_[C]=F;const G=Vh(s._queryParams);this.restRequest_(m+".json",G,(Y,ue)=>{let Ne=ue;if(404===Y&&(Ne=null,Y=null),null===Y&&this.onDataUpdate_(m,Ne,!1,l),(0,_e.DV)(this.listens_,C)===F){let i;i=Y?401===Y?"permission_denied":"rest_error:"+Y:"ok",h(i,null)}})}unlisten(s,t){const l=Cg.getListenId_(s,t);delete this.listens_[l]}get(s){const t=Vh(s._queryParams),l=s._path.toString(),h=new _e.BH;return this.restRequest_(l+".json",t,(m,C)=>{let F=C;404===m&&(F=null,m=null),null===m?(this.onDataUpdate_(l,F,!1,null),h.resolve(F)):h.reject(new Error(F))}),h.promise}refreshAuthToken(s){}restRequest_(s,t={},l){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([h,m])=>{h&&h.accessToken&&(t.auth=h.accessToken),m&&m.token&&(t.ac=m.token);const C=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+(0,_e.xO)(t);this.log_("Sending REST request for "+C);const F=new XMLHttpRequest;F.onreadystatechange=()=>{if(l&&4===F.readyState){this.log_("REST Response for "+C+" received. status:",F.status,"response:",F.responseText);let G=null;if(F.status>=200&&F.status<300){try{G=(0,_e.cI)(F.responseText)}catch{Hs("Failed to parse JSON response for "+C+": "+F.responseText)}l(null,G)}else 401!==F.status&&404!==F.status&&Hs("Got unsuccessful REST response for "+C+" Status: "+F.status),l(F.status);l=null}},F.open("GET",C,!0),F.send()})}}class Gh{constructor(){this.rootNode_=tr.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,t){this.rootNode_=this.rootNode_.updateChild(s,t)}}function gc(){return{value:null,children:new Map}}function jh(n,s,t){if(Er(s))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(s,t);else{const l=Mr(s);n.children.has(l)||n.children.set(l,gc()),jh(n.children.get(l),s=hi(s),t)}}function Tg(n,s){if(Er(s))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Di,(l,h)=>{jh(n,new Sr(l),h)}),Tg(n,s)}}if(n.children.size>0){const t=Mr(s);return s=hi(s),n.children.has(t)&&Tg(n.children.get(t),s)&&n.children.delete(t),0===n.children.size}return!0}function Sg(n,s,t){null!==n.value?t(s,n.value):function Ov(n,s){n.children.forEach((t,l)=>{s(l,t)})}(n,(l,h)=>{Sg(h,new Sr(s.toString()+"/"+l),t)})}class Ll{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),t=Object.assign({},s);return this.last_&&lo(this.last_,(l,h)=>{t[l]=t[l]-h}),this.last_=s,t}}class eb{constructor(s,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ll(s);const l=1e4+2e4*Math.random();Pf(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const s=this.statsListener_.get(),t={};let l=!1;lo(s,(h,m)=>{m>0&&(0,_e.r3)(this.statsToReport_,h)&&(t[h]=m,l=!0)}),l&&this.server_.reportStats(t),Pf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pl=(()=>{return(n=pl||(pl={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",pl;var n})();function Nv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ng{constructor(s,t,l){this.path=s,this.affectedTree=t,this.revert=l,this.type=pl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(s){if(Er(this.path)){if(null!=this.affectedTree.value)return(0,_e.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Sr(s));return new Ng(br(),t,this.revert)}}return(0,_e.hu)(Mr(this.path)===s,"operationForChild called for unrelated child."),new Ng(hi(this.path),this.affectedTree,this.revert)}}class $h{constructor(s,t){this.source=s,this.path=t,this.type=pl.LISTEN_COMPLETE}operationForChild(s){return Er(this.path)?new $h(this.source,br()):new $h(this.source,hi(this.path))}}class Ud{constructor(s,t,l){this.source=s,this.path=t,this.snap=l,this.type=pl.OVERWRITE}operationForChild(s){return Er(this.path)?new Ud(this.source,br(),this.snap.getImmediateChild(s)):new Ud(this.source,hi(this.path),this.snap)}}class Xf{constructor(s,t,l){this.source=s,this.path=t,this.children=l,this.type=pl.MERGE}operationForChild(s){if(Er(this.path)){const t=this.children.subtree(new Sr(s));return t.isEmpty()?null:t.value?new Ud(this.source,br(),t.value):new Xf(this.source,br(),t)}return(0,_e.hu)(Mr(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new Xf(this.source,hi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mc{constructor(s,t,l){this.node_=s,this.fullyInitialized_=t,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(Er(s))return this.isFullyInitialized()&&!this.filtered_;const t=Mr(s);return this.isCompleteForChild(t)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}class tb{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function Lu(n,s,t,l,h,m){const C=l.filter(F=>F.type===t);C.sort((F,G)=>function rb(n,s,t){if(null==s.childName||null==t.childName)throw(0,_e.g5)("Should only compare child_ events.");const l=new mr(s.childName,s.snapshotNode),h=new mr(t.childName,t.snapshotNode);return n.index_.compare(l,h)}(n,F,G)),C.forEach(F=>{const G=function zh(n,s,t){return"value"===s.type||"child_removed"===s.type||(s.prevName=t.getPredecessorChildName(s.childName,s.snapshotNode,n.index_)),s}(n,F,m);h.forEach(Y=>{Y.respondsTo(F.type)&&s.push(Y.createEvent(G,n.query_))})})}function Mg(n,s){return{eventCache:n,serverCache:s}}function Bd(n,s,t,l){return Mg(new mc(s,t,l),n.serverCache)}function _c(n,s,t,l){return Mg(n.eventCache,new mc(s,t,l))}function Rg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xg;class zr{constructor(s,t=(()=>(xg||(xg=new $s(nv)),xg))()){this.value=s,this.children=t}static fromObject(s){let t=new zr(null);return lo(s,(l,h)=>{t=t.set(new Sr(l),h)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,t){if(null!=this.value&&t(this.value))return{path:br(),value:this.value};if(Er(s))return null;{const l=Mr(s),h=this.children.get(l);if(null!==h){const m=h.findRootMostMatchingPathAndValue(hi(s),t);return null!=m?{path:ki(new Sr(l),m.path),value:m.value}:null}return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(Er(s))return this;{const t=Mr(s),l=this.children.get(t);return null!==l?l.subtree(hi(s)):new zr(null)}}set(s,t){if(Er(s))return new zr(t,this.children);{const l=Mr(s),m=(this.children.get(l)||new zr(null)).set(hi(s),t),C=this.children.insert(l,m);return new zr(this.value,C)}}remove(s){if(Er(s))return this.children.isEmpty()?new zr(null):new zr(null,this.children);{const t=Mr(s),l=this.children.get(t);if(l){const h=l.remove(hi(s));let m;return m=h.isEmpty()?this.children.remove(t):this.children.insert(t,h),null===this.value&&m.isEmpty()?new zr(null):new zr(this.value,m)}return this}}get(s){if(Er(s))return this.value;{const t=Mr(s),l=this.children.get(t);return l?l.get(hi(s)):null}}setTree(s,t){if(Er(s))return t;{const l=Mr(s),m=(this.children.get(l)||new zr(null)).setTree(hi(s),t);let C;return C=m.isEmpty()?this.children.remove(l):this.children.insert(l,m),new zr(this.value,C)}}fold(s){return this.fold_(br(),s)}fold_(s,t){const l={};return this.children.inorderTraversal((h,m)=>{l[h]=m.fold_(ki(s,h),t)}),t(s,this.value,l)}findOnPath(s,t){return this.findOnPath_(s,br(),t)}findOnPath_(s,t,l){const h=!!this.value&&l(t,this.value);if(h)return h;if(Er(s))return null;{const m=Mr(s),C=this.children.get(m);return C?C.findOnPath_(hi(s),ki(t,m),l):null}}foreachOnPath(s,t){return this.foreachOnPath_(s,br(),t)}foreachOnPath_(s,t,l){if(Er(s))return this;{this.value&&l(t,this.value);const h=Mr(s),m=this.children.get(h);return m?m.foreachOnPath_(hi(s),ki(t,h),l):new zr(null)}}foreach(s){this.foreach_(br(),s)}foreach_(s,t){this.children.inorderTraversal((l,h)=>{h.foreach_(ki(s,l),t)}),this.value&&t(s,this.value)}foreachChild(s){this.children.inorderTraversal((t,l)=>{l.value&&s(t,l.value)})}}class ns{constructor(s){this.writeTree_=s}static empty(){return new ns(new zr(null))}}function Gd(n,s,t){if(Er(s))return new ns(new zr(t));{const l=n.writeTree_.findRootMostValueAndPath(s);if(null!=l){const h=l.path;let m=l.value;const C=ls(h,s);return m=m.updateChild(C,t),new ns(n.writeTree_.set(h,m))}{const h=new zr(t),m=n.writeTree_.setTree(s,h);return new ns(m)}}}function Pg(n,s,t){let l=n;return lo(t,(h,m)=>{l=Gd(l,ki(s,h),m)}),l}function Wh(n,s){if(Er(s))return ns.empty();{const t=n.writeTree_.setTree(s,new zr(null));return new ns(t)}}function ru(n,s){return null!=Ws(n,s)}function Ws(n,s){const t=n.writeTree_.findRootMostValueAndPath(s);return null!=t?n.writeTree_.get(t.path).getChild(ls(t.path,s)):null}function A_(n){const s=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Di,(l,h)=>{s.push(new mr(l,h))}):n.writeTree_.children.inorderTraversal((l,h)=>{null!=h.value&&s.push(new mr(l,h.value))}),s}function Uu(n,s){if(Er(s))return n;{const t=Ws(n,s);return new ns(null!=t?new zr(t):n.writeTree_.subtree(s))}}function yc(n){return n.writeTree_.isEmpty()}function Ul(n,s){return ep(br(),n.writeTree_,s)}function ep(n,s,t){if(null!=s.value)return t.updateChild(n,s.value);{let l=null;return s.children.inorderTraversal((h,m)=>{".priority"===h?((0,_e.hu)(null!==m.value,"Priority writes must always be leaf nodes"),l=m.value):t=ep(ki(n,h),m,t)}),!t.getChild(n).isEmpty()&&null!==l&&(t=t.updateChild(ki(n,".priority"),l)),t}}function Bu(n,s){return Ug(s,n)}function sb(n,s){if(n.snap)return Za(n.path,s);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Za(ki(n.path,t),s))return!0;return!1}function ab(n){return n.visible}function tp(n,s,t){let l=ns.empty();for(let h=0;h<n.length;++h){const m=n[h];if(s(m)){const C=m.path;let F;if(m.snap)Za(t,C)?(F=ls(t,C),l=Gd(l,F,m.snap)):Za(C,t)&&(F=ls(C,t),l=Gd(l,br(),m.snap.getChild(F)));else{if(!m.children)throw(0,_e.g5)("WriteRecord should have .snap or .children");if(Za(t,C))F=ls(t,C),l=Pg(l,F,m.children);else if(Za(C,t))if(F=ls(C,t),Er(F))l=Pg(l,br(),m.children);else{const G=(0,_e.DV)(m.children,Mr(F));if(G){const Y=G.getChild(hi(F));l=Gd(l,br(),Y)}}}}}return l}function Rv(n,s,t,l,h){if(l||h){const m=Uu(n.visibleWrites,s);return!h&&yc(m)?t:h||null!=t||ru(m,br())?Ul(tp(n.allWrites,function(Y){return(Y.visible||h)&&(!l||!~l.indexOf(Y.writeId))&&(Za(Y.path,s)||Za(s,Y.path))},s),t||tr.EMPTY_NODE):null}{const m=Ws(n.visibleWrites,s);if(null!=m)return m;{const C=Uu(n.visibleWrites,s);return yc(C)?t:null!=t||ru(C,br())?Ul(C,t||tr.EMPTY_NODE):null}}}function np(n,s,t,l){return Rv(n.writeTree,n.treePath,s,t,l)}function Lg(n,s){return function kg(n,s,t){let l=tr.EMPTY_NODE;const h=Ws(n.visibleWrites,s);if(h)return h.isLeafNode()||h.forEachChild(Di,(m,C)=>{l=l.updateImmediateChild(m,C)}),l;if(t){const m=Uu(n.visibleWrites,s);return t.forEachChild(Di,(C,F)=>{const G=Ul(Uu(m,new Sr(C)),F);l=l.updateImmediateChild(C,G)}),A_(m).forEach(C=>{l=l.updateImmediateChild(C.name,C.node)}),l}return A_(Uu(n.visibleWrites,s)).forEach(C=>{l=l.updateImmediateChild(C.name,C.node)}),l}(n.writeTree,n.treePath,s)}function M_(n,s,t,l){return function Fg(n,s,t,l,h){(0,_e.hu)(l||h,"Either existingEventSnap or existingServerSnap must exist");const m=ki(s,t);if(ru(n.visibleWrites,m))return null;{const C=Uu(n.visibleWrites,m);return yc(C)?h.getChild(t):Ul(C,h.getChild(t))}}(n.writeTree,n.treePath,s,t,l)}function rp(n,s){return function lb(n,s){return Ws(n.visibleWrites,s)}(n.writeTree,ki(n.treePath,s))}function ip(n,s,t){return function xv(n,s,t,l){const h=ki(s,t),m=Ws(n.visibleWrites,h);return null!=m?m:l.isCompleteForChild(t)?Ul(Uu(n.visibleWrites,h),l.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,s,t)}function Pv(n,s){return Ug(ki(n.treePath,s),n.writeTree)}function Ug(n,s){return{treePath:n,writeTree:s}}class x_{constructor(){this.changeMap=new Map}trackChildChange(s){const t=s.type,l=s.childName;(0,_e.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,_e.hu)(".priority"!==l,"Only non-priority child changes can be tracked.");const h=this.changeMap.get(l);if(h){const m=h.type;if("child_added"===t&&"child_removed"===m)this.changeMap.set(l,kl(l,s.snapshotNode,h.snapshotNode));else if("child_removed"===t&&"child_added"===m)this.changeMap.delete(l);else if("child_removed"===t&&"child_changed"===m)this.changeMap.set(l,fl(l,h.oldSnap));else if("child_changed"===t&&"child_added"===m)this.changeMap.set(l,Zo(l,s.snapshotNode));else{if("child_changed"!==t||"child_changed"!==m)throw(0,_e.g5)("Illegal combination of changes: "+s+" occurred after "+h);this.changeMap.set(l,kl(l,s.snapshotNode,h.oldSnap))}}else this.changeMap.set(l,s)}getChanges(){return Array.from(this.changeMap.values())}}const Fv=new class kv{getCompleteChild(s){return null}getChildAfterChild(s,t,l){return null}};class a{constructor(s,t,l=null){this.writes_=s,this.viewCache_=t,this.optCompleteServerCache_=l}getCompleteChild(s){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(s))return t.getNode().getImmediateChild(s);{const l=null!=this.optCompleteServerCache_?new mc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ip(this.writes_,s,l)}}getChildAfterChild(s,t,l){const h=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zc(this.viewCache_),m=function R_(n,s,t,l,h,m){return function N_(n,s,t,l,h,m,C){let F;const G=Uu(n.visibleWrites,s),Y=Ws(G,br());if(null!=Y)F=Y;else{if(null==t)return[];F=Ul(G,t)}if(F=F.withIndex(C),F.isEmpty()||F.isLeafNode())return[];{const ue=[],Ne=C.getCompare(),i=m?F.getReverseIteratorFrom(l,C):F.getIteratorFrom(l,C);let o=i.getNext();for(;o&&ue.length<h;)0!==Ne(o,l)&&ue.push(o),o=i.getNext();return ue}}(n.writeTree,n.treePath,s,t,l,h,m)}(this.writes_,h,t,1,l,s);return 0===m.length?null:m[0]}}function _(n,s,t,l,h,m){const C=s.eventCache;if(null!=rp(l,t))return s;{let F,G;if(Er(t))if((0,_e.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const Y=Zc(s),Ne=Lg(l,Y instanceof tr?Y:tr.EMPTY_NODE);F=n.filter.updateFullNode(s.eventCache.getNode(),Ne,m)}else{const Y=np(l,Zc(s));F=n.filter.updateFullNode(s.eventCache.getNode(),Y,m)}else{const Y=Mr(t);if(".priority"===Y){(0,_e.hu)(1===Ya(t),"Can't have a priority with additional path components");const ue=C.getNode();G=s.serverCache.getNode();const Ne=M_(l,t,ue,G);F=null!=Ne?n.filter.updatePriority(ue,Ne):C.getNode()}else{const ue=hi(t);let Ne;if(C.isCompleteForChild(Y)){G=s.serverCache.getNode();const i=M_(l,t,C.getNode(),G);Ne=null!=i?C.getNode().getImmediateChild(Y).updateChild(ue,i):C.getNode().getImmediateChild(Y)}else Ne=ip(l,Y,s.serverCache);F=null!=Ne?n.filter.updateChild(C.getNode(),Y,Ne,ue,h,m):C.getNode()}}return Bd(s,F,C.isFullyInitialized()||Er(t),n.filter.filtersNodes())}}function w(n,s,t,l,h,m,C,F){const G=s.serverCache;let Y;const ue=C?n.filter:n.filter.getIndexedFilter();if(Er(t))Y=ue.updateFullNode(G.getNode(),l,null);else if(ue.filtersNodes()&&!G.isFiltered()){const o=G.getNode().updateChild(t,l);Y=ue.updateFullNode(G.getNode(),o,null)}else{const o=Mr(t);if(!G.isCompleteForPath(t)&&Ya(t)>1)return s;const u=hi(t),g=G.getNode().getImmediateChild(o).updateChild(u,l);Y=".priority"===o?ue.updatePriority(G.getNode(),g):ue.updateChild(G.getNode(),o,g,u,Fv,null)}const Ne=_c(s,Y,G.isFullyInitialized()||Er(t),ue.filtersNodes());return _(n,Ne,t,h,new a(h,Ne,m),F)}function N(n,s,t,l,h,m,C){const F=s.eventCache;let G,Y;const ue=new a(h,s,m);if(Er(t))Y=n.filter.updateFullNode(s.eventCache.getNode(),l,C),G=Bd(s,Y,!0,n.filter.filtersNodes());else{const Ne=Mr(t);if(".priority"===Ne)Y=n.filter.updatePriority(s.eventCache.getNode(),l),G=Bd(s,Y,F.isFullyInitialized(),F.isFiltered());else{const i=hi(t),o=F.getNode().getImmediateChild(Ne);let u;if(Er(i))u=l;else{const d=ue.getCompleteChild(Ne);u=null!=d?".priority"===Pd(i)&&d.getChild(y_(i)).isEmpty()?d:d.updateChild(i,l):tr.EMPTY_NODE}G=o.equals(u)?s:Bd(s,n.filter.updateChild(F.getNode(),Ne,u,i,ue,C),F.isFullyInitialized(),n.filter.filtersNodes())}}return G}function H(n,s){return n.eventCache.isCompleteForChild(s)}function ae(n,s,t){return t.foreach((l,h)=>{s=s.updateChild(l,h)}),s}function Se(n,s,t,l,h,m,C,F){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let Y,G=s;Y=Er(t)?l:new zr(null).setTree(t,l);const ue=s.serverCache.getNode();return Y.children.inorderTraversal((Ne,i)=>{if(ue.hasChild(Ne)){const u=ae(0,s.serverCache.getNode().getImmediateChild(Ne),i);G=w(n,G,new Sr(Ne),u,h,m,C,F)}}),Y.children.inorderTraversal((Ne,i)=>{const o=!s.serverCache.isCompleteForChild(Ne)&&null===i.value;if(!ue.hasChild(Ne)&&!o){const d=ae(0,s.serverCache.getNode().getImmediateChild(Ne),i);G=w(n,G,new Sr(Ne),d,h,m,C,F)}}),G}class ln{constructor(s,t){this.query_=s,this.eventRegistrations_=[];const l=this.query_._queryParams,h=new us(l.getIndex()),m=function J0(n){return n.loadsAllData()?new us(n.getIndex()):n.hasLimit()?new Iv(n):new Qf(n)}(l);this.processor_=function e(n){return{filter:n}}(m);const C=t.serverCache,F=t.eventCache,G=h.updateFullNode(tr.EMPTY_NODE,C.getNode(),null),Y=m.updateFullNode(tr.EMPTY_NODE,F.getNode(),null),ue=new mc(G,C.isFullyInitialized(),h.filtersNodes()),Ne=new mc(Y,F.isFullyInitialized(),m.filtersNodes());this.viewCache_=Mg(Ne,ue),this.eventGenerator_=new tb(this.query_)}get query(){return this.query_}}function Ms(n,s){const t=Zc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Er(s)&&!t.getImmediateChild(Mr(s)).isEmpty())?t.getChild(s):null}function dr(n){return 0===n.eventRegistrations_.length}function Wr(n,s,t){const l=[];if(t){(0,_e.hu)(null==s,"A cancel should cancel all event registrations.");const h=n.query._path;n.eventRegistrations_.forEach(m=>{const C=m.createCancelEvent(t,h);C&&l.push(C)})}if(s){let h=[];for(let m=0;m<n.eventRegistrations_.length;++m){const C=n.eventRegistrations_[m];if(C.matches(s)){if(s.hasAnyCallback()){h=h.concat(n.eventRegistrations_.slice(m+1));break}}else h.push(C)}n.eventRegistrations_=h}else n.eventRegistrations_=[];return l}function Qr(n,s,t,l){s.type===pl.MERGE&&null!==s.source.queryId&&((0,_e.hu)(Zc(n.viewCache_),"We should always have a full cache before handling merges"),(0,_e.hu)(Rg(n.viewCache_),"Missing event cache, even though we have a server cache"));const h=n.viewCache_,m=function c(n,s,t,l,h){const m=new x_;let C,F;if(t.type===pl.OVERWRITE){const Y=t;Y.source.fromUser?C=N(n,s,Y.path,Y.snap,l,h,m):((0,_e.hu)(Y.source.fromServer,"Unknown source."),F=Y.source.tagged||s.serverCache.isFiltered()&&!Er(Y.path),C=w(n,s,Y.path,Y.snap,l,h,F,m))}else if(t.type===pl.MERGE){const Y=t;Y.source.fromUser?C=function q(n,s,t,l,h,m,C){let F=s;return l.foreach((G,Y)=>{const ue=ki(t,G);H(s,Mr(ue))&&(F=N(n,F,ue,Y,h,m,C))}),l.foreach((G,Y)=>{const ue=ki(t,G);H(s,Mr(ue))||(F=N(n,F,ue,Y,h,m,C))}),F}(n,s,Y.path,Y.children,l,h,m):((0,_e.hu)(Y.source.fromServer,"Unknown source."),F=Y.source.tagged||s.serverCache.isFiltered(),C=Se(n,s,Y.path,Y.children,l,h,F,m))}else if(t.type===pl.ACK_USER_WRITE){const Y=t;C=Y.revert?function Vt(n,s,t,l,h,m){let C;if(null!=rp(l,t))return s;{const F=new a(l,s,h),G=s.eventCache.getNode();let Y;if(Er(t)||".priority"===Mr(t)){let ue;if(s.serverCache.isFullyInitialized())ue=np(l,Zc(s));else{const Ne=s.serverCache.getNode();(0,_e.hu)(Ne instanceof tr,"serverChildren would be complete if leaf node"),ue=Lg(l,Ne)}Y=n.filter.updateFullNode(G,ue,m)}else{const ue=Mr(t);let Ne=ip(l,ue,s.serverCache);null==Ne&&s.serverCache.isCompleteForChild(ue)&&(Ne=G.getImmediateChild(ue)),Y=null!=Ne?n.filter.updateChild(G,ue,Ne,hi(t),F,m):s.eventCache.getNode().hasChild(ue)?n.filter.updateChild(G,ue,tr.EMPTY_NODE,hi(t),F,m):G,Y.isEmpty()&&s.serverCache.isFullyInitialized()&&(C=np(l,Zc(s)),C.isLeafNode()&&(Y=n.filter.updateFullNode(Y,C,m)))}return C=s.serverCache.isFullyInitialized()||null!=rp(l,br()),Bd(s,Y,C,n.filter.filtersNodes())}}(n,s,Y.path,l,h,m):function et(n,s,t,l,h,m,C){if(null!=rp(h,t))return s;const F=s.serverCache.isFiltered(),G=s.serverCache;if(null!=l.value){if(Er(t)&&G.isFullyInitialized()||G.isCompleteForPath(t))return w(n,s,t,G.getNode().getChild(t),h,m,F,C);if(Er(t)){let Y=new zr(null);return G.getNode().forEachChild(dl,(ue,Ne)=>{Y=Y.set(new Sr(ue),Ne)}),Se(n,s,t,Y,h,m,F,C)}return s}{let Y=new zr(null);return l.foreach((ue,Ne)=>{const i=ki(t,ue);G.isCompleteForPath(i)&&(Y=Y.set(ue,G.getNode().getChild(i)))}),Se(n,s,t,Y,h,m,F,C)}}(n,s,Y.path,Y.affectedTree,l,h,m)}else{if(t.type!==pl.LISTEN_COMPLETE)throw(0,_e.g5)("Unknown operation type: "+t.type);C=function Tt(n,s,t,l,h){const m=s.serverCache;return _(n,_c(s,m.getNode(),m.isFullyInitialized()||Er(t),m.isFiltered()),t,l,Fv,h)}(n,s,t.path,l,m)}const G=m.getChanges();return function f(n,s,t){const l=s.eventCache;if(l.isFullyInitialized()){const h=l.getNode().isLeafNode()||l.getNode().isEmpty(),m=Rg(n);(t.length>0||!n.eventCache.isFullyInitialized()||h&&!l.getNode().equals(m)||!l.getNode().getPriority().equals(m.getPriority()))&&t.push(Z0(Rg(s)))}}(s,C,G),{viewCache:C,changes:G}}(n.processor_,h,s,t,l);return function r(n,s){(0,_e.hu)(s.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,_e.hu)(s.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,m.viewCache),(0,_e.hu)(m.viewCache.serverCache.isFullyInitialized()||!h.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=m.viewCache,bc(n,m.changes,m.viewCache.eventCache.getNode(),null)}function bc(n,s,t,l){return function nb(n,s,t,l){const h=[],m=[];return s.forEach(C=>{"child_changed"===C.type&&n.index_.indexedValueChanged(C.oldSnap,C.snapshotNode)&&m.push(function nu(n,s){return{type:"child_moved",snapshotNode:s,childName:n}}(C.childName,C.snapshotNode))}),Lu(n,h,"child_removed",s,l,t),Lu(n,h,"child_added",s,l,t),Lu(n,h,"child_moved",m,l,t),Lu(n,h,"child_changed",s,l,t),Lu(n,h,"value",s,l,t),h}(n.eventGenerator_,s,t,l?[l]:n.eventRegistrations_)}let Lv,Bv;class tE{constructor(){this.views=new Map}}function Uv(n,s,t,l){const h=s.source.queryId;if(null!==h){const m=n.views.get(h);return(0,_e.hu)(null!=m,"SyncTree gave us an op for an invalid query."),Qr(m,s,t,l)}{let m=[];for(const C of n.views.values())m=m.concat(Qr(C,s,t,l));return m}}function rE(n,s,t,l,h){const C=n.views.get(s._queryIdentifier);if(!C){let F=np(t,h?l:null),G=!1;F?G=!0:l instanceof tr?(F=Lg(t,l),G=!1):(F=tr.EMPTY_NODE,G=!1);const Y=Mg(new mc(F,G,!1),new mc(l,h,!1));return new ln(s,Y)}return C}function iE(n){const s=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||s.push(t);return s}function Kh(n,s){let t=null;for(const l of n.views.values())t=t||Ms(l,s);return t}function sE(n,s){return s._queryParams.loadsAllData()?P_(n):n.views.get(s._queryIdentifier)}function cb(n,s){return null!=sE(n,s)}function jd(n){return null!=P_(n)}function P_(n){for(const s of n.views.values())if(s.query._queryParams.loadsAllData())return s;return null}let ww=1;class oE{constructor(s){this.listenProvider_=s,this.syncPointTree_=new zr(null),this.pendingWriteTree_=function ub(){return{visibleWrites:ns.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function db(n,s,t,l,h){return function O_(n,s,t,l,h){(0,_e.hu)(l>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===h&&(h=!0),n.allWrites.push({path:s,snap:t,writeId:l,visible:h}),h&&(n.visibleWrites=Gd(n.visibleWrites,s,t)),n.lastWriteId=l}(n.pendingWriteTree_,s,t,l,h),h?Vg(n,new Ud({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,t)):[]}function Hd(n,s,t=!1){const l=function Mv(n,s){for(let t=0;t<n.allWrites.length;t++){const l=n.allWrites[t];if(l.writeId===s)return l}return null}(n.pendingWriteTree_,s);if(function vc(n,s){const t=n.allWrites.findIndex(F=>F.writeId===s);(0,_e.hu)(t>=0,"removeWrite called with nonexistent writeId.");const l=n.allWrites[t];n.allWrites.splice(t,1);let h=l.visible,m=!1,C=n.allWrites.length-1;for(;h&&C>=0;){const F=n.allWrites[C];F.visible&&(C>=t&&sb(F,l.path)?h=!1:Za(l.path,F.path)&&(m=!0)),C--}return!!h&&(m?(function ob(n){n.visibleWrites=tp(n.allWrites,ab,br()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(l.snap?n.visibleWrites=Wh(n.visibleWrites,l.path):lo(l.children,G=>{n.visibleWrites=Wh(n.visibleWrites,ki(l.path,G))}),!0))}(n.pendingWriteTree_,s)){let m=new zr(null);return null!=l.snap?m=m.set(br(),!0):lo(l.children,C=>{m=m.set(new Sr(C),!0)}),Vg(n,new Ng(l.path,m,t))}return[]}function Bg(n,s,t){return Vg(n,new Ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,t))}function F_(n,s,t,l,h=!1){const m=s._path,C=n.syncPointTree_.get(m);let F=[];if(C&&("default"===s._queryIdentifier||cb(C,s))){const G=function DD(n,s,t,l){const h=s._queryIdentifier,m=[];let C=[];const F=jd(n);if("default"===h)for(const[G,Y]of n.views.entries())C=C.concat(Wr(Y,t,l)),dr(Y)&&(n.views.delete(G),Y.query._queryParams.loadsAllData()||m.push(Y.query));else{const G=n.views.get(h);G&&(C=C.concat(Wr(G,t,l)),dr(G)&&(n.views.delete(h),G.query._queryParams.loadsAllData()||m.push(G.query)))}return F&&!jd(n)&&m.push(new(function nE(){return(0,_e.hu)(Lv,"Reference.ts has not been loaded"),Lv}())(s._repo,s._path)),{removed:m,events:C}}(C,s,t,l);(function wD(n){return 0===n.views.size})(C)&&(n.syncPointTree_=n.syncPointTree_.remove(m));const Y=G.removed;if(F=G.events,!h){const ue=-1!==Y.findIndex(i=>i._queryParams.loadsAllData()),Ne=n.syncPointTree_.findOnPath(m,(i,o)=>jd(o));if(ue&&!Ne){const i=n.syncPointTree_.subtree(m);if(!i.isEmpty()){const o=function Iw(n){return n.fold((s,t,l)=>{if(t&&jd(t))return[P_(t)];{let h=[];return t&&(h=iE(t)),lo(l,(m,C)=>{h=h.concat(C)}),h}})}(i);for(let u=0;u<o.length;++u){const d=o[u],g=d.query,y=hE(n,d);n.listenProvider_.startListening(U_(g),sp(n,g),y.hashFn,y.onComplete)}}}!Ne&&Y.length>0&&!l&&(ue?n.listenProvider_.stopListening(U_(s),null):Y.forEach(i=>{const o=n.queryToTagMap.get(iu(i));n.listenProvider_.stopListening(U_(i),o)}))}!function Cw(n,s){for(let t=0;t<s.length;++t){const l=s[t];if(!l._queryParams.loadsAllData()){const h=iu(l),m=n.queryToTagMap.get(h);n.queryToTagMap.delete(h),n.tagToQueryMap.delete(m)}}}(n,Y)}return F}function cE(n,s,t,l){const h=hb(n,l);if(null!=h){const m=L_(h),C=m.path,F=m.queryId,G=ls(C,s);return op(n,C,new Ud(Nv(F),G,t))}return[]}function Vv(n,s,t,l=!1){const h=s._path;let m=null,C=!1;n.syncPointTree_.foreachOnPath(h,(i,o)=>{const u=ls(i,h);m=m||Kh(o,u),C=C||jd(o)});let G,F=n.syncPointTree_.get(h);F?(C=C||jd(F),m=m||Kh(F,br())):(F=new tE,n.syncPointTree_=n.syncPointTree_.set(h,F)),null!=m?G=!0:(G=!1,m=tr.EMPTY_NODE,n.syncPointTree_.subtree(h).foreachChild((o,u)=>{const d=Kh(u,br());d&&(m=m.updateImmediateChild(o,d))}));const Y=cb(F,s);if(!Y&&!s._queryParams.loadsAllData()){const i=iu(s);(0,_e.hu)(!n.queryToTagMap.has(i),"View does not exist, but we have a tag");const o=function jv(){return ww++}();n.queryToTagMap.set(i,o),n.tagToQueryMap.set(o,i)}let Ne=function vw(n,s,t,l,h,m){const C=rE(n,s,l,h,m);return n.views.has(s._queryIdentifier)||n.views.set(s._queryIdentifier,C),function Rs(n,s){n.eventRegistrations_.push(s)}(C,t),function bo(n,s){const t=n.viewCache_.eventCache,l=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Di,(m,C)=>{l.push(Zo(m,C))}),t.isFullyInitialized()&&l.push(Z0(t.getNode())),bc(n,l,t.getNode(),s)}(C,t)}(F,s,t,Bu(n.pendingWriteTree_,h),m,G);if(!Y&&!C&&!l){const i=sE(F,s);Ne=Ne.concat(function Hv(n,s,t){const l=s._path,h=sp(n,s),m=hE(n,t),C=n.listenProvider_.startListening(U_(s),h,m.hashFn,m.onComplete),F=n.syncPointTree_.subtree(l);if(h)(0,_e.hu)(!jd(F.value),"If we're adding a query, it shouldn't be shadowed");else{const G=F.fold((Y,ue,Ne)=>{if(!Er(Y)&&ue&&jd(ue))return[P_(ue).query];{let i=[];return ue&&(i=i.concat(iE(ue).map(o=>o.query))),lo(Ne,(o,u)=>{i=i.concat(u)}),i}});for(let Y=0;Y<G.length;++Y){const ue=G[Y];n.listenProvider_.stopListening(U_(ue),sp(n,ue))}}return C}(n,s,i))}return Ne}function Gv(n,s,t){const h=n.pendingWriteTree_,m=n.syncPointTree_.findOnPath(s,(C,F)=>{const Y=Kh(F,ls(C,s));if(Y)return Y});return Rv(h,s,m,t,!0)}function Vg(n,s){return dE(s,n.syncPointTree_,null,Bu(n.pendingWriteTree_,br()))}function dE(n,s,t,l){if(Er(n.path))return Gg(n,s,t,l);{const h=s.get(br());null==t&&null!=h&&(t=Kh(h,br()));let m=[];const C=Mr(n.path),F=n.operationForChild(C),G=s.children.get(C);if(G&&F){const Y=t?t.getImmediateChild(C):null,ue=Pv(l,C);m=m.concat(dE(F,G,Y,ue))}return h&&(m=m.concat(Uv(h,n,l,t))),m}}function Gg(n,s,t,l){const h=s.get(br());null==t&&null!=h&&(t=Kh(h,br()));let m=[];return s.children.inorderTraversal((C,F)=>{const G=t?t.getImmediateChild(C):null,Y=Pv(l,C),ue=n.operationForChild(C);ue&&(m=m.concat(Gg(ue,F,G,Y)))}),h&&(m=m.concat(Uv(h,n,l,t))),m}function hE(n,s){const t=s.query,l=sp(n,t);return{hashFn:()=>(function wn(n){return n.viewCache_.serverCache.getNode()}(s)||tr.EMPTY_NODE).hash(),onComplete:h=>{if("ok"===h)return l?function uE(n,s,t){const l=hb(n,t);if(l){const h=L_(l),m=h.path,C=h.queryId,F=ls(m,s);return op(n,m,new $h(Nv(C),F))}return[]}(n,t._path,l):function lE(n,s){return Vg(n,new $h({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(n,t._path);{const m=function s_(n,s){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const l=new Error(n+" at "+s._path.toString()+": "+t);return l.code=n.toUpperCase(),l}(h,t);return F_(n,t,null,m)}}}}function sp(n,s){const t=iu(s);return n.queryToTagMap.get(t)}function iu(n){return n._path.toString()+"$"+n._queryIdentifier}function hb(n,s){return n.tagToQueryMap.get(s)}function L_(n){const s=n.indexOf("$");return(0,_e.hu)(-1!==s&&s<n.length-1,"Bad queryKey."),{queryId:n.substr(s+1),path:new Sr(n.substr(0,s))}}function op(n,s,t){const l=n.syncPointTree_.get(s);return(0,_e.hu)(l,"Missing sync point for query tag that we're tracking"),Uv(l,t,Bu(n.pendingWriteTree_,s),null)}function U_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ew(){return(0,_e.hu)(Bv,"Reference.ts has not been loaded"),Bv}())(n._repo,n._path):n}class fb{constructor(s){this.node_=s}getImmediateChild(s){const t=this.node_.getImmediateChild(s);return new fb(t)}node(){return this.node_}}class pb{constructor(s,t){this.syncTree_=s,this.path_=t}getImmediateChild(s){const t=ki(this.path_,s);return new pb(this.syncTree_,t)}node(){return Gv(this.syncTree_,this.path_)}}const fE=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},gb=function(n,s,t){return n&&"object"==typeof n?((0,_e.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?mb(n[".sv"],s,t):"object"==typeof n[".sv"]?pE(n[".sv"],s):void(0,_e.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},mb=function(n,s,t){if("timestamp"===n)return t.timestamp;(0,_e.hu)(!1,"Unexpected server value: "+n)},pE=function(n,s,t){n.hasOwnProperty("increment")||(0,_e.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const l=n.increment;"number"!=typeof l&&(0,_e.hu)(!1,"Unexpected increment value: "+l);const h=s.node();if((0,_e.hu)(null!==h&&typeof h<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!h.isLeafNode())return l;const C=h.getValue();return"number"!=typeof C?l:C+l},$v=function(n,s,t,l){return zv(s,new pb(t,n),l)},B_=function(n,s,t){return zv(n,new fb(s),t)};function zv(n,s,t){const l=n.getPriority().val(),h=gb(l,s.getImmediateChild(".priority"),t);let m;if(n.isLeafNode()){const C=n,F=gb(C.getValue(),s,t);return F!==C.getValue()||h!==C.getPriority().val()?new Fu(F,zs(h)):n}{const C=n;return m=C,h!==C.getPriority().val()&&(m=m.updatePriority(new Fu(h))),C.forEachChild(Di,(F,G)=>{const Y=zv(G,s.getImmediateChild(F),t);Y!==G&&(m=m.updateImmediateChild(F,Y))}),m}}class V_{constructor(s="",t=null,l={children:{},childCount:0}){this.name=s,this.parent=t,this.node=l}}function jg(n,s){let t=s instanceof Sr?s:new Sr(s),l=n,h=Mr(t);for(;null!==h;){const m=(0,_e.DV)(l.node.children,h)||{children:{},childCount:0};l=new V_(h,l,m),t=hi(t),h=Mr(t)}return l}function ap(n){return n.node.value}function _b(n,s){n.node.value=s,Kv(n)}function gE(n){return n.node.childCount>0}function G_(n,s){lo(n.node.children,(t,l)=>{s(new V_(t,n,l))})}function Wv(n,s,t,l){t&&!l&&s(n),G_(n,h=>{Wv(h,s,!0,l)}),t&&l&&s(n)}function Hg(n){return new Sr(null===n.parent?n.name:Hg(n.parent)+"/"+n.name)}function Kv(n){null!==n.parent&&function _E(n,s,t){const l=function Tw(n){return void 0===ap(n)&&!gE(n)}(t),h=(0,_e.r3)(n.node.children,s);l&&h?(delete n.node.children[s],n.node.childCount--,Kv(n)):!l&&!h&&(n.node.children[s]=t.node,n.node.childCount++,Kv(n))}(n.parent,n.name,n)}const Sw=/[\[\].#$\/\u0000-\u001F\u007F]/,yE=/[\[\].#$\u0000-\u001F\u007F]/,qv=10485760,Yv=function(n){return"string"==typeof n&&0!==n.length&&!Sw.test(n)},yb=function(n){return"string"==typeof n&&0!==n.length&&!yE.test(n)},Jo=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!xf(n)||n&&"object"==typeof n&&(0,_e.r3)(n,".sv")},gl=function(n,s,t,l){l&&void 0===s||j_((0,_e.gK)(n,"value"),s,t)},j_=function(n,s,t){const l=t instanceof Sr?new $f(t,n):t;if(void 0===s)throw new Error(n+"contains undefined "+Pu(l));if("function"==typeof s)throw new Error(n+"contains a function "+Pu(l)+" with contents = "+s.toString());if(xf(s))throw new Error(n+"contains "+s.toString()+" "+Pu(l));if("string"==typeof s&&s.length>qv/3&&(0,_e.ug)(s)>qv)throw new Error(n+"contains a string greater than "+qv+" utf8 bytes "+Pu(l)+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){let h=!1,m=!1;if(lo(s,(C,F)=>{if(".value"===C)h=!0;else if(".priority"!==C&&".sv"!==C&&(m=!0,!Yv(C)))throw new Error(n+" contains an invalid key ("+C+") "+Pu(l)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function vg(n,s){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(s),n.byteLength_+=(0,_e.ug)(s),v_(n)})(l,C),j_(n,F,l),function gv(n){const s=n.parts_.pop();n.byteLength_-=(0,_e.ug)(s),n.parts_.length>0&&(n.byteLength_-=1)}(l)}),h&&m)throw new Error(n+' contains ".value" child '+Pu(l)+" in addition to actual children.")}},Ow=function(n,s,t,l){if(l&&void 0===s)return;const h=(0,_e.gK)(n,"values");if(!s||"object"!=typeof s||Array.isArray(s))throw new Error(h+" must be an object containing the children to replace.");const m=[];lo(s,(C,F)=>{const G=new Sr(C);if(j_(h,F,ki(t,G)),".priority"===Pd(G)&&!Jo(F))throw new Error(h+"contains an invalid value for '"+G.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");m.push(G)}),function(n,s){let t,l;for(t=0;t<s.length;t++){l=s[t];const m=kd(l);for(let C=0;C<m.length;C++)if((".priority"!==m[C]||C!==m.length-1)&&!Yv(m[C]))throw new Error(n+"contains an invalid key ("+m[C]+") in path "+l.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(yg);let h=null;for(t=0;t<s.length;t++){if(l=s[t],null!==h&&Za(h,l))throw new Error(n+"contains a path "+h.toString()+" that is ancestor of another path "+l.toString());h=l}}(h,m)},bE=function(n,s,t){if(!t||void 0!==s){if(xf(s))throw new Error((0,_e.gK)(n,"priority")+"is "+s.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Jo(s))throw new Error((0,_e.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$g=function(n,s,t,l){if(!(l&&void 0===t||Yv(t)))throw new Error((0,_e.gK)(n,s)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},lp=function(n,s,t,l){if(!(l&&void 0===t||yb(t)))throw new Error((0,_e.gK)(n,s)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},H_=function(n,s,t,l){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lp(n,s,t,l)},Vu=function(n,s){if(".info"===Mr(s))throw new Error(n+" failed = Can't modify data under /.info/")},Zv=function(n,s){const t=s.path.toString();if("string"!=typeof s.repoInfo.host||0===s.repoInfo.host.length||!Yv(s.repoInfo.namespace)&&"localhost"!==s.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yb(n)}(t))throw new Error((0,_e.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Nw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $_(n,s){let t=null;for(let l=0;l<s.length;l++){const h=s[l],m=h.getPath();null!==t&&!Wc(m,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:m}),t.events.push(h)}t&&n.eventLists_.push(t)}function EE(n,s,t){$_(n,t),wE(n,l=>Wc(l,s))}function su(n,s,t){$_(n,t),wE(n,l=>Za(l,s)||Za(s,l))}function wE(n,s){n.recursionDepth_++;let t=!0;for(let l=0;l<n.eventLists_.length;l++){const h=n.eventLists_[l];h&&(s(h.path)?(vb(n.eventLists_[l]),n.eventLists_[l]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function vb(n){for(let s=0;s<n.events.length;s++){const t=n.events[s];if(null!==t){n.events[s]=null;const l=t.getEventRunner();Nl&&bs("event: "+t.toString()),xl(l)}}}const bb="repo_interrupt",DE=25;class Jv{constructor(s,t,l,h){this.repoInfo_=s,this.forceRestClient_=t,this.authTokenProvider_=l,this.appCheckProvider_=h,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gc(),this.transactionQueueTree_=new V_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mw(n){const t=n.infoData_.getNode(new Sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function zg(n){return fE({timestamp:Mw(n)})}function IE(n,s,t,l,h){n.dataUpdateCount++;const m=new Sr(s);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(s,t):t;let C=[];if(h)if(l){const G=(0,_e.UI)(t,Y=>zs(Y));C=function ID(n,s,t,l){const h=hb(n,l);if(h){const m=L_(h),C=m.path,F=m.queryId,G=ls(C,s),Y=zr.fromObject(t);return op(n,C,new Xf(Nv(F),G,Y))}return[]}(n.serverSyncTree_,m,G,h)}else{const G=zs(t);C=cE(n.serverSyncTree_,m,G,h)}else if(l){const G=(0,_e.UI)(t,Y=>zs(Y));C=function aE(n,s,t){const l=zr.fromObject(t);return Vg(n,new Xf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,l))}(n.serverSyncTree_,m,G)}else{const G=zs(t);C=Bg(n.serverSyncTree_,m,G)}let F=m;C.length>0&&(F=up(n,m)),su(n.eventQueue_,F,C)}function wb(n,s){Db(n,"connected",s),!1===s&&function CD(n){Kg(n,"onDisconnectEvents");const s=zg(n),t=gc();Sg(n.onDisconnect_,br(),(h,m)=>{const C=$v(h,m,n.serverSyncTree_,s);jh(t,h,C)});let l=[];Sg(t,br(),(h,m)=>{l=l.concat(Bg(n.serverSyncTree_,h,m));const C=kE(n,h);up(n,C)}),n.onDisconnect_=gc(),su(n.eventQueue_,br(),l)}(n)}function Db(n,s,t){const l=new Sr("/.info/"+s),h=zs(t);n.infoData_.updateSnapshot(l,h);const m=Bg(n.infoSyncTree_,l,h);su(n.eventQueue_,l,m)}function z_(n){return n.nextWriteId_++}function CE(n,s,t,l,h){Kg(n,"set",{path:s.toString(),value:t,priority:l});const m=zg(n),C=zs(t,l),F=Gv(n.serverSyncTree_,s),G=B_(C,F,m),Y=z_(n),ue=db(n.serverSyncTree_,s,G,Y,!0);$_(n.eventQueue_,ue),n.server_.put(s.toString(),C.val(!0),(i,o)=>{const u="ok"===i;u||Hs("set at "+s+" failed: "+i);const d=Hd(n.serverSyncTree_,Y,!u);su(n.eventQueue_,s,d),qh(0,h,i,o)});const Ne=kE(n,s);up(n,Ne),su(n.eventQueue_,Ne,[])}function xw(n,s,t){n.server_.onDisconnectCancel(s.toString(),(l,h)=>{"ok"===l&&Tg(n.onDisconnect_,s),qh(0,t,l,h)})}function TE(n,s,t,l){const h=zs(t);n.server_.onDisconnectPut(s.toString(),h.val(!0),(m,C)=>{"ok"===m&&jh(n.onDisconnect_,s,h),qh(0,l,m,C)})}function Cb(n,s,t){let l;l=".info"===Mr(s._path)?F_(n.infoSyncTree_,s,t):F_(n.serverSyncTree_,s,t),EE(n.eventQueue_,s._path,l)}function Tb(n){n.persistentConnection_&&n.persistentConnection_.interrupt(bb)}function Kg(n,...s){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bs(t,...s)}function qh(n,s,t,l){s&&xl(()=>{if("ok"===t)s(null);else{const h=(t||"error").toUpperCase();let m=h;l&&(m+=": "+l);const C=new Error(m);C.code=h,s(C)}})}function Sb(n,s,t){return Gv(n.serverSyncTree_,s,t)||tr.EMPTY_NODE}function W_(n,s=n.transactionQueueTree_){if(s||K_(n,s),ap(s)){const t=PE(n,s);(0,_e.hu)(t.length>0,"Sending zero length transaction queue"),t.every(h=>0===h.status)&&function ME(n,s,t){const l=t.map(Y=>Y.currentWriteId),h=Sb(n,s,l);let m=h;const C=h.hash();for(let Y=0;Y<t.length;Y++){const ue=t[Y];(0,_e.hu)(0===ue.status,"tryToSendTransactionQueue_: items in queue should all be run."),ue.status=1,ue.retryCount++;const Ne=ls(s,ue.path);m=m.updateChild(Ne,ue.currentOutputSnapshotRaw)}const F=m.val(!0),G=s;n.server_.put(G.toString(),F,Y=>{Kg(n,"transaction put response",{path:G.toString(),status:Y});let ue=[];if("ok"===Y){const Ne=[];for(let i=0;i<t.length;i++)t[i].status=2,ue=ue.concat(Hd(n.serverSyncTree_,t[i].currentWriteId)),t[i].onComplete&&Ne.push(()=>t[i].onComplete(null,!0,t[i].currentOutputSnapshotResolved)),t[i].unwatcher();K_(n,jg(n.transactionQueueTree_,s)),W_(n,n.transactionQueueTree_),su(n.eventQueue_,s,ue);for(let i=0;i<Ne.length;i++)xl(Ne[i])}else{if("datastale"===Y)for(let Ne=0;Ne<t.length;Ne++)t[Ne].status=3===t[Ne].status?4:0;else{Hs("transaction at "+G.toString()+" failed: "+Y);for(let Ne=0;Ne<t.length;Ne++)t[Ne].status=4,t[Ne].abortReason=Y}up(n,s)}},C)}(n,Hg(s),t)}else gE(s)&&G_(s,t=>{W_(n,t)})}function up(n,s){const t=xE(n,s),l=Hg(t);return function RE(n,s,t){if(0===s.length)return;const l=[];let h=[];const C=s.filter(F=>0===F.status).map(F=>F.currentWriteId);for(let F=0;F<s.length;F++){const G=s[F],Y=ls(t,G.path);let Ne,ue=!1;if((0,_e.hu)(null!==Y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===G.status)ue=!0,Ne=G.abortReason,h=h.concat(Hd(n.serverSyncTree_,G.currentWriteId,!0));else if(0===G.status)if(G.retryCount>=DE)ue=!0,Ne="maxretry",h=h.concat(Hd(n.serverSyncTree_,G.currentWriteId,!0));else{const i=Sb(n,G.path,C);G.currentInputSnapshot=i;const o=s[F].update(i.val());if(void 0!==o){j_("transaction failed: Data returned ",o,G.path);let u=zs(o);"object"==typeof o&&null!=o&&(0,_e.r3)(o,".priority")||(u=u.updatePriority(i.getPriority()));const g=G.currentWriteId,y=zg(n),I=B_(u,i,y);G.currentOutputSnapshotRaw=u,G.currentOutputSnapshotResolved=I,G.currentWriteId=z_(n),C.splice(C.indexOf(g),1),h=h.concat(db(n.serverSyncTree_,G.path,I,G.currentWriteId,G.applyLocally)),h=h.concat(Hd(n.serverSyncTree_,g,!0))}else ue=!0,Ne="nodata",h=h.concat(Hd(n.serverSyncTree_,G.currentWriteId,!0))}su(n.eventQueue_,t,h),h=[],ue&&(s[F].status=2,setTimeout(s[F].unwatcher,Math.floor(0)),s[F].onComplete&&l.push("nodata"===Ne?()=>s[F].onComplete(null,!1,s[F].currentInputSnapshot):()=>s[F].onComplete(new Error(Ne),!1,null)))}K_(n,n.transactionQueueTree_);for(let F=0;F<l.length;F++)xl(l[F]);W_(n,n.transactionQueueTree_)}(n,PE(n,t),l),l}function xE(n,s){let t,l=n.transactionQueueTree_;for(t=Mr(s);null!==t&&void 0===ap(l);)l=jg(l,t),t=Mr(s=hi(s));return l}function PE(n,s){const t=[];return kw(n,s,t),t.sort((l,h)=>l.order-h.order),t}function kw(n,s,t){const l=ap(s);if(l)for(let h=0;h<l.length;h++)t.push(l[h]);G_(s,h=>{kw(n,h,t)})}function K_(n,s){const t=ap(s);if(t){let l=0;for(let h=0;h<t.length;h++)2!==t[h].status&&(t[l]=t[h],l++);t.length=l,_b(s,t.length>0?t:void 0)}G_(s,l=>{K_(n,l)})}function kE(n,s){const t=Hg(xE(n,s)),l=jg(n.transactionQueueTree_,s);return function mE(n,s,t){let l=t?n:n.parent;for(;null!==l;){if(s(l))return!0;l=l.parent}}(l,h=>{FE(n,h)}),FE(n,l),Wv(l,h=>{FE(n,h)}),t}function FE(n,s){const t=ap(s);if(t){const l=[];let h=[],m=-1;for(let C=0;C<t.length;C++)3===t[C].status||(1===t[C].status?((0,_e.hu)(m===C-1,"All SENT items should be at beginning of queue."),m=C,t[C].status=3,t[C].abortReason="set"):((0,_e.hu)(0===t[C].status,"Unexpected transaction status in abort"),t[C].unwatcher(),h=h.concat(Hd(n.serverSyncTree_,t[C].currentWriteId,!0)),t[C].onComplete&&l.push(t[C].onComplete.bind(null,new Error("set"),!1,null))));-1===m?_b(s,void 0):t.length=m+1,su(n.eventQueue_,Hg(s),h);for(let C=0;C<l.length;C++)xl(l[C])}}const LE=function(n,s){const t=AD(n),l=t.namespace;return"firebase.com"===t.domain&&qo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||"undefined"===l)&&"localhost"!==t.domain&&qo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fg(t.host,t.secure,l,"ws"===t.scheme||"wss"===t.scheme,s,"",l!==t.subdomain),path:new Sr(t.pathString)}},AD=function(n){let s="",t="",l="",h="",m="",C=!0,F="https",G=443;if("string"==typeof n){let Y=n.indexOf("//");Y>=0&&(F=n.substring(0,Y-1),n=n.substring(Y+2));let ue=n.indexOf("/");-1===ue&&(ue=n.length);let Ne=n.indexOf("?");-1===Ne&&(Ne=n.length),s=n.substring(0,Math.min(ue,Ne)),ue<Ne&&(h=function TD(n){let s="";const t=n.split("/");for(let l=0;l<t.length;l++)if(t[l].length>0){let h=t[l];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch{}s+="/"+h}return s}(n.substring(ue,Ne)));const i=function SD(n){const s={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const l=t.split("=");2===l.length?s[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):Hs(`Invalid query segment '${t}' in query '${n}'`)}return s}(n.substring(Math.min(n.length,Ne)));Y=s.indexOf(":"),Y>=0?(C="https"===F||"wss"===F,G=parseInt(s.substring(Y+1),10)):Y=s.length;const o=s.slice(0,Y);if("localhost"===o.toLowerCase())t="localhost";else if(o.split(".").length<=2)t=o;else{const u=s.indexOf(".");l=s.substring(0,u).toLowerCase(),t=s.substring(u+1),m=l}"ns"in i&&(m=i.ns)}return{host:s,port:G,domain:t,subdomain:l,secure:C,scheme:F,pathString:h,namespace:m}},Fw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OD=function(){let n=0;const s=[];return function(t){const l=t===n;let h;n=t;const m=new Array(8);for(h=7;h>=0;h--)m[h]=Fw.charAt(t%64),t=Math.floor(t/64);(0,_e.hu)(0===t,"Cannot push at time == 0");let C=m.join("");if(l){for(h=11;h>=0&&63===s[h];h--)s[h]=0;s[h]++}else for(h=0;h<12;h++)s[h]=Math.floor(64*Math.random());for(h=0;h<12;h++)C+=Fw.charAt(s[h]);return(0,_e.hu)(20===C.length,"nextPushId: Length should be 20."),C}}();class q_{constructor(s,t,l,h){this.eventType=s,this.eventRegistration=t,this.snapshot=l,this.prevName=h}getPath(){const s=this.snapshot.ref;return"value"===this.eventType?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,_e.Wl)(this.snapshot.exportVal())}}class Lw{constructor(s,t,l){this.eventRegistration=s,this.error=t,this.path=l}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Qv{constructor(s,t){this.snapshotCallback=s,this.cancelCallback=t}onValue(s,t){this.snapshotCallback.call(null,s,t)}onCancel(s){return(0,_e.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}class Y_{constructor(s,t){this._repo=s,this._path=t}cancel(){const s=new _e.BH;return xw(this._repo,this._path,s.wrapCallback(()=>{})),s.promise}remove(){Vu("OnDisconnect.remove",this._path);const s=new _e.BH;return TE(this._repo,this._path,null,s.wrapCallback(()=>{})),s.promise}set(s){Vu("OnDisconnect.set",this._path),gl("OnDisconnect.set",s,this._path,!1);const t=new _e.BH;return TE(this._repo,this._path,s,t.wrapCallback(()=>{})),t.promise}setWithPriority(s,t){Vu("OnDisconnect.setWithPriority",this._path),gl("OnDisconnect.setWithPriority",s,this._path,!1),bE("OnDisconnect.setWithPriority",t,!1);const l=new _e.BH;return function Pw(n,s,t,l,h){const m=zs(t,l);n.server_.onDisconnectPut(s.toString(),m.val(!0),(C,F)=>{"ok"===C&&jh(n.onDisconnect_,s,m),qh(0,h,C,F)})}(this._repo,this._path,s,t,l.wrapCallback(()=>{})),l.promise}update(s){Vu("OnDisconnect.update",this._path),Ow("OnDisconnect.update",s,this._path,!1);const t=new _e.BH;return function SE(n,s,t,l){if((0,_e.xb)(t))return bs("onDisconnect().update() called with empty data.  Don't do anything."),void qh(0,l,"ok",void 0);n.server_.onDisconnectMerge(s.toString(),t,(h,m)=>{"ok"===h&&lo(t,(C,F)=>{const G=zs(F);jh(n.onDisconnect_,ki(s,C),G)}),qh(0,l,h,m)})}(this._repo,this._path,s,t.wrapCallback(()=>{})),t.promise}}class ml{constructor(s,t,l,h){this._repo=s,this._path=t,this._queryParams=l,this._orderByCalled=h}get key(){return Er(this._path)?null:Pd(this._path)}get ref(){return new ou(this._repo,this._path)}get _queryIdentifier(){const s=S_(this._queryParams),t=Nh(s);return"{}"===t?"default":t}get _queryObject(){return S_(this._queryParams)}isEqual(s){if(!((s=(0,_e.m9)(s))instanceof ml))return!1;const t=this._repo===s._repo,l=Wc(this._path,s._path);return t&&l&&this._queryIdentifier===s._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function K0(n){let s="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(s+="/"+encodeURIComponent(String(n.pieces_[t])));return s||"/"}(this._path)}}function Z_(n,s){if(!0===n._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function cp(n){let s=null,t=null;if(n.hasStart()&&(s=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===dl){const l="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",h="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Nu)throw new Error(l);if("string"!=typeof s)throw new Error(h)}if(n.hasEnd()){if(n.getIndexEndName()!==Rl)throw new Error(l);if("string"!=typeof t)throw new Error(h)}}else if(n.getIndex()===Di){if(null!=s&&!Jo(s)||null!=t&&!Jo(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,_e.hu)(n.getIndex()instanceof jn||n.getIndex()===Dv,"unknown index type."),null!=s&&"object"==typeof s||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function qg(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ou extends ml{constructor(s,t){super(s,t,new Fl,!1)}get parent(){const s=y_(this._path);return null===s?null:new ou(this._repo,s)}get root(){let s=this;for(;null!==s.parent;)s=s.parent;return s}}class dp{constructor(s,t,l){this._node=s,this.ref=t,this._index=l}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const t=new Sr(s),l=hp(this.ref,s);return new dp(this._node.getChild(t),l,Di)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(l,h)=>s(new dp(h,hp(this.ref,l),Di)))}hasChild(s){const t=new Sr(s);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Uw(n,s){return(n=(0,_e.m9)(n))._checkNotDeleted("ref"),void 0!==s?hp(n._root,s):n._root}function Bw(n,s){(n=(0,_e.m9)(n))._checkNotDeleted("refFromURL");const t=LE(s,n._repo.repoInfo_.nodeAdmin);Zv("refFromURL",t);const l=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&l.host!==n._repo.repoInfo_.host&&qo("refFromURL: Host name does not match the current database: (found "+l.host+" but expected "+n._repo.repoInfo_.host+")"),Uw(n,t.path.toString())}function hp(n,s){return null===Mr((n=(0,_e.m9)(n))._path)?H_("child","path",s,!1):lp("child","path",s,!1),new ou(n._repo,ki(n._path,s))}function UE(n,s){n=(0,_e.m9)(n),Vu("set",n._path),gl("set",s,n._path,!1);const t=new _e.BH;return CE(n._repo,n._path,s,null,t.wrapCallback(()=>{})),t.promise}function Gw(n,s){Ow("update",s,n._path,!1);const t=new _e.BH;return function Rw(n,s,t,l){Kg(n,"update",{path:s.toString(),value:t});let h=!0;const m=zg(n),C={};if(lo(t,(F,G)=>{h=!1,C[F]=$v(ki(s,F),zs(G),n.serverSyncTree_,m)}),h)bs("update() called with empty data.  Don't do anything."),qh(0,l,"ok",void 0);else{const F=z_(n),G=function k_(n,s,t,l){!function ib(n,s,t,l){(0,_e.hu)(l>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:s,children:t,writeId:l,visible:!0}),n.visibleWrites=Pg(n.visibleWrites,s,t),n.lastWriteId=l}(n.pendingWriteTree_,s,t,l);const h=zr.fromObject(t);return Vg(n,new Xf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,h))}(n.serverSyncTree_,s,C,F);$_(n.eventQueue_,G),n.server_.merge(s.toString(),t,(Y,ue)=>{const Ne="ok"===Y;Ne||Hs("update at "+s+" failed: "+Y);const i=Hd(n.serverSyncTree_,F,!Ne),o=i.length>0?up(n,s):s;su(n.eventQueue_,o,i),qh(0,l,Y,ue)}),lo(t,Y=>{const ue=kE(n,ki(s,Y));up(n,ue)}),su(n.eventQueue_,s,[])}}(n._repo,n._path,s,t.wrapCallback(()=>{})),t.promise}function jw(n){n=(0,_e.m9)(n);const s=new Qv(()=>{}),t=new J_(s);return function Ib(n,s,t){const l=function Dw(n,s){const t=s._path;let l=null;n.syncPointTree_.foreachOnPath(t,(Y,ue)=>{const Ne=ls(Y,t);l=l||Kh(ue,Ne)});let h=n.syncPointTree_.get(t);h?l=l||Kh(h,br()):(h=new tE,n.syncPointTree_=n.syncPointTree_.set(t,h));const m=null!=l,C=m?new mc(l,!0,!1):null;return function Ii(n){return Rg(n.viewCache_)}(rE(h,s,Bu(n.pendingWriteTree_,s._path),m?C.getNode():tr.EMPTY_NODE,m))}(n.serverSyncTree_,s);return null!=l?Promise.resolve(l):n.server_.get(s).then(h=>{const m=zs(h).withIndex(s._queryParams.getIndex());let C;if(Vv(n.serverSyncTree_,s,t,!0),s._queryParams.loadsAllData())C=Bg(n.serverSyncTree_,s._path,m);else{const F=sp(n.serverSyncTree_,s);C=cE(n.serverSyncTree_,s._path,m,F)}return su(n.eventQueue_,s._path,C),F_(n.serverSyncTree_,s,t,null,!0),m},h=>(Kg(n,"get for query "+(0,_e.Wl)(s)+" failed: "+h),Promise.reject(new Error(h))))}(n._repo,n,t).then(l=>new dp(l,new ou(n._repo,n._path),n._queryParams.getIndex()))}class J_{constructor(s){this.callbackContext=s}respondsTo(s){return"value"===s}createEvent(s,t){const l=t._queryParams.getIndex();return new q_("value",this,new dp(s.snapshotNode,new ou(t._repo,t._path),l))}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,t){return this.callbackContext.hasCancelCallback?new Lw(this,s,t):null}matches(s){return s instanceof J_&&(!s.callbackContext||!this.callbackContext||s.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ab{constructor(s,t){this.eventType=s,this.callbackContext=t}respondsTo(s){let t="children_added"===s?"child_added":s;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(s,t){return this.callbackContext.hasCancelCallback?new Lw(this,s,t):null}createEvent(s,t){(0,_e.hu)(null!=s.childName,"Child events should have a childName.");const l=hp(new ou(t._repo,t._path),s.childName),h=t._queryParams.getIndex();return new q_(s.type,this,new dp(s.snapshotNode,l,h),s.prevName)}getEventRunner(s){return"cancel"===s.getEventType()?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,s.prevName)}matches(s){return s instanceof Ab&&this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Q_(n,s,t,l,h){let m;if("object"==typeof l&&(m=void 0,h=l),"function"==typeof l&&(m=l),h&&h.onlyOnce){const G=t,Y=(ue,Ne)=>{Cb(n._repo,n,F),G(ue,Ne)};Y.userCallback=t.userCallback,Y.context=t.context,t=Y}const C=new Qv(t,m||void 0),F="value"===s?new J_(C):new Ab(s,C);return function AE(n,s,t){let l;l=".info"===Mr(s._path)?Vv(n.infoSyncTree_,s,t):Vv(n.serverSyncTree_,s,t),EE(n.eventQueue_,s._path,l)}(n._repo,n,F),()=>Cb(n._repo,n,F)}function e0(n,s,t,l){return Q_(n,"value",s,t,l)}function Ob(n,s,t,l){return Q_(n,"child_added",s,t,l)}function Hw(n,s,t,l){return Q_(n,"child_changed",s,t,l)}function Gu(n,s,t,l){return Q_(n,"child_moved",s,t,l)}function BE(n,s,t,l){return Q_(n,"child_removed",s,t,l)}function t0(n,s,t){let l=null;const h=t?new Qv(t):null;"value"===s?l=new J_(h):s&&(l=new Ab(s,h)),Cb(n._repo,n,l)}class Ec{}class $w extends Ec{constructor(s,t){super(),this._value=s,this._key=t}_apply(s){gl("endAt",this._value,s._path,!0);const t=Dg(s._queryParams,this._value,this._key);if(qg(t),cp(t),s._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ml(s._repo,s._path,t,s._orderByCalled)}}class zw extends Ec{constructor(s,t){super(),this._value=s,this._key=t}_apply(s){gl("endBefore",this._value,s._path,!1);const t=function Av(n,s,t){let l;return l=Dg(n,s,n.index_===dl||t?t:Nu),l.endBeforeSet_=!0,l}(s._queryParams,this._value,this._key);if(qg(t),cp(t),s._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ml(s._repo,s._path,t,s._orderByCalled)}}class VE extends Ec{constructor(s,t){super(),this._value=s,this._key=t}_apply(s){gl("startAt",this._value,s._path,!0);const t=wg(s._queryParams,this._value,this._key);if(qg(t),cp(t),s._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ml(s._repo,s._path,t,s._orderByCalled)}}class Mb extends Ec{constructor(s,t){super(),this._value=s,this._key=t}_apply(s){gl("startAfter",this._value,s._path,!1);const t=function Sv(n,s,t){let l;return l=wg(n,s,n.index_===dl||t?t:Rl),l.startAfterSet_=!0,l}(s._queryParams,this._value,this._key);if(qg(t),cp(t),s._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ml(s._repo,s._path,t,s._orderByCalled)}}class jE extends Ec{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ml(s._repo,s._path,function Cv(n,s){const t=n.copy();return t.limitSet_=!0,t.limit_=s,t.viewFrom_="l",t}(s._queryParams,this._limit),s._orderByCalled)}}class HE extends Ec{constructor(s){super(),this._limit=s}_apply(s){if(s._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ml(s._repo,s._path,function Tv(n,s){const t=n.copy();return t.limitSet_=!0,t.limit_=s,t.viewFrom_="r",t}(s._queryParams,this._limit),s._orderByCalled)}}class qw extends Ec{constructor(s){super(),this._path=s}_apply(s){Z_(s,"orderByChild");const t=new Sr(this._path);if(Er(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const l=new jn(t),h=Ig(s._queryParams,l);return cp(h),new ml(s._repo,s._path,h,!0)}}class Yw extends Ec{_apply(s){Z_(s,"orderByKey");const t=Ig(s._queryParams,dl);return cp(t),new ml(s._repo,s._path,t,!0)}}class $d extends Ec{_apply(s){Z_(s,"orderByPriority");const t=Ig(s._queryParams,Di);return cp(t),new ml(s._repo,s._path,t,!0)}}class WE extends Ec{_apply(s){Z_(s,"orderByValue");const t=Ig(s._queryParams,Dv);return cp(t),new ml(s._repo,s._path,t,!0)}}class KE extends Ec{constructor(s,t){super(),this._value=s,this._key=t}_apply(s){if(gl("equalTo",this._value,s._path,!1),s._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(s._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $w(this._value,this._key)._apply(new VE(this._value,this._key)._apply(s))}}function Jc(n,...s){let t=(0,_e.m9)(n);for(const l of s)t=l._apply(t);return t}(function yw(n){(0,_e.hu)(!Lv,"__referenceConstructor has already been defined"),Lv=n})(ou),function bw(n){(0,_e.hu)(!Bv,"__referenceConstructor has already been defined"),Bv=n}(ou);const Jw="FIREBASE_DATABASE_EMULATOR_HOST",Pb={};let qE=!1;function kb(n,s,t,l,h){let m=l||n.options.databaseURL;void 0===m&&(n.options.projectId||qo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bs("Using default host for project ",n.options.projectId),m=`${n.options.projectId}-default-rtdb.firebaseio.com`);let G,Y,C=LE(m,h),F=C.repoInfo;typeof process<"u"&&process.env&&(Y=process.env[Jw]),Y?(G=!0,m=`http://${Y}?ns=${F.namespace}`,C=LE(m,h),F=C.repoInfo):G=!C.repoInfo.secure;const ue=h&&G?new Ad(Ad.OWNER):new cg(n.name,n.options,s);Zv("Invalid Firebase Database URL",C),Er(C.path)||qo("Database URL must point to the root of a Firebase Database (not including a child path).");const Ne=function YE(n,s,t,l){let h=Pb[s.name];h||(h={},Pb[s.name]=h);let m=h[n.toURLString()];return m&&qo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),m=new Jv(n,qE,t,l),h[n.toURLString()]=m,m}(F,n,ue,new ug(n.name,t));return new ZE(Ne,n)}class ZE{constructor(s,t){this._repoInternal=s,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Eb(n,s,t){if(n.stats_=Gf(n.repoInfo_),n.forceRestClient_||l_())n.server_=new Cg(n.repoInfo_,(l,h,m,C)=>{IE(n,l,h,m,C)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wb(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,_e.Wl)(t)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}n.persistentConnection_=new ku(n.repoInfo_,s,(l,h,m,C)=>{IE(n,l,h,m,C)},l=>{wb(n,l)},l=>{!function Wg(n,s){lo(s,(t,l)=>{Db(n,t,l)})}(n,l)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(l=>{n.server_.refreshAuthToken(l)}),n.appCheckProvider_.addTokenChangeListener(l=>{n.server_.refreshAppCheckToken(l.token)}),n.statsReporter_=function rv(n,s){const t=n.toString();return pg[t]||(pg[t]=s()),pg[t]}(n.repoInfo_,()=>new eb(n.stats_,n.server_)),n.infoData_=new Gh,n.infoSyncTree_=new oE({startListening:(l,h,m,C)=>{let F=[];const G=n.infoData_.getNode(l._path);return G.isEmpty()||(F=Bg(n.infoSyncTree_,l._path,G),setTimeout(()=>{C("ok")},0)),F},stopListening:()=>{}}),Db(n,"connected",!1),n.serverSyncTree_=new oE({startListening:(l,h,m,C)=>(n.server_.listen(l,m,h,(F,G)=>{const Y=C(F,G);su(n.eventQueue_,l._path,Y)}),[]),stopListening:(l,h)=>{n.server_.unlisten(l,h)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ou(this._repo,br())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xD(n,s){const t=Pb[s];(!t||t[n.key]!==n)&&qo(`Database ${s}(${n.repoInfo_}) has already been deleted.`),Tb(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){null===this._rootInternal&&qo("Cannot call "+s+" on a deleted database.")}}function eD(){jf.IS_TRANSPORT_INITIALIZED&&Hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Fb(){eD(),xu.forceDisallow()}function JE(){eD(),Lh.forceDisallow(),xu.forceAllow()}function n0(n,s){Sd(n,s)}const ew={".sv":"timestamp"};class PD{constructor(s,t){this.committed=s,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ku.prototype.simpleListen=function(n,s){this.sendRequest("q",{p:n},s)},ku.prototype.echo=function(n,s){this.sendRequest("echo",{d:n},s)},function r0(n){ig(Su.SDK_VERSION),(0,Su._registerComponent)(new za.wA("database",(s,{instanceIdentifier:t})=>kb(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Su.registerVersion)(H0,"0.14.4",n),(0,Su.registerVersion)(H0,"0.14.4","esm2017")}();const aD=new Ah.Yd("@firebase/database-compat"),lD=function(n){aD.warn("FIREBASE WARNING: "+n)};class UD{constructor(s){this._delegate=s}cancel(s){(0,_e.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,_e.Wj)("OnDisconnect.cancel","onComplete",s,!0);const t=this._delegate.cancel();return s&&t.then(()=>s(null),l=>s(l)),t}remove(s){(0,_e.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,_e.Wj)("OnDisconnect.remove","onComplete",s,!0);const t=this._delegate.remove();return s&&t.then(()=>s(null),l=>s(l)),t}set(s,t){(0,_e.Dv)("OnDisconnect.set",1,2,arguments.length),(0,_e.Wj)("OnDisconnect.set","onComplete",t,!0);const l=this._delegate.set(s);return t&&l.then(()=>t(null),h=>t(h)),l}setWithPriority(s,t,l){(0,_e.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,_e.Wj)("OnDisconnect.setWithPriority","onComplete",l,!0);const h=this._delegate.setWithPriority(s,t);return l&&h.then(()=>l(null),m=>l(m)),h}update(s,t){if((0,_e.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(s)){const h={};for(let m=0;m<s.length;++m)h[""+m]=s[m];s=h,lD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,_e.Wj)("OnDisconnect.update","onComplete",t,!0);const l=this._delegate.update(s);return t&&l.then(()=>t(null),h=>t(h)),l}}class BD{constructor(s,t){this.committed=s,this.snapshot=t}toJSON(){return(0,_e.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zh{constructor(s,t){this._database=s,this._delegate=t}val(){return(0,_e.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,_e.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,_e.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,_e.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(s){return(0,_e.Dv)("DataSnapshot.child",0,1,arguments.length),s=String(s),lp("DataSnapshot.child","path",s,!1),new Zh(this._database,this._delegate.child(s))}hasChild(s){return(0,_e.Dv)("DataSnapshot.hasChild",1,1,arguments.length),lp("DataSnapshot.hasChild","path",s,!1),this._delegate.hasChild(s)}getPriority(){return(0,_e.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(s){return(0,_e.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,_e.Wj)("DataSnapshot.forEach","action",s,!1),this._delegate.forEach(t=>s(new Zh(this._database,t)))}hasChildren(){return(0,_e.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,_e.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,_e.Dv)("DataSnapshot.ref",0,0,arguments.length),new au(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Po{constructor(s,t){this.database=s,this._delegate=t}on(s,t,l,h){var m;(0,_e.Dv)("Query.on",2,4,arguments.length),(0,_e.Wj)("Query.on","callback",t,!1);const C=Po.getCancelAndContextArgs_("Query.on",l,h),F=(Y,ue)=>{t.call(C.context,new Zh(this.database,Y),ue)};F.userCallback=t,F.context=C.context;const G=null===(m=C.cancel)||void 0===m?void 0:m.bind(C.context);switch(s){case"value":return e0(this._delegate,F,G),t;case"child_added":return Ob(this._delegate,F,G),t;case"child_removed":return BE(this._delegate,F,G),t;case"child_changed":return Hw(this._delegate,F,G),t;case"child_moved":return Gu(this._delegate,F,G),t;default:throw new Error((0,_e.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(s,t,l){if((0,_e.Dv)("Query.off",0,3,arguments.length),function(n,s,t){if(void 0!==s)switch(s){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,_e.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,s),(0,_e.Wj)("Query.off","callback",t,!0),(0,_e.lb)("Query.off","context",l,!0),t){const h=()=>{};h.userCallback=t,h.context=l,t0(this._delegate,s,h)}else t0(this._delegate,s)}get(){return jw(this._delegate).then(s=>new Zh(this.database,s))}once(s,t,l,h){(0,_e.Dv)("Query.once",1,4,arguments.length),(0,_e.Wj)("Query.once","callback",t,!0);const m=Po.getCancelAndContextArgs_("Query.once",l,h),C=new _e.BH,F=(Y,ue)=>{const Ne=new Zh(this.database,Y);t&&t.call(m.context,Ne,ue),C.resolve(Ne)};F.userCallback=t,F.context=m.context;const G=Y=>{m.cancel&&m.cancel.call(m.context,Y),C.reject(Y)};switch(s){case"value":e0(this._delegate,F,G,{onlyOnce:!0});break;case"child_added":Ob(this._delegate,F,G,{onlyOnce:!0});break;case"child_removed":BE(this._delegate,F,G,{onlyOnce:!0});break;case"child_changed":Hw(this._delegate,F,G,{onlyOnce:!0});break;case"child_moved":Gu(this._delegate,F,G,{onlyOnce:!0});break;default:throw new Error((0,_e.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return C.promise}limitToFirst(s){return(0,_e.Dv)("Query.limitToFirst",1,1,arguments.length),new Po(this.database,Jc(this._delegate,function Kw(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jE(n)}(s)))}limitToLast(s){return(0,_e.Dv)("Query.limitToLast",1,1,arguments.length),new Po(this.database,Jc(this._delegate,function $E(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HE(n)}(s)))}orderByChild(s){return(0,_e.Dv)("Query.orderByChild",1,1,arguments.length),new Po(this.database,Jc(this._delegate,function zE(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lp("orderByChild","path",n,!1),new qw(n)}(s)))}orderByKey(){return(0,_e.Dv)("Query.orderByKey",0,0,arguments.length),new Po(this.database,Jc(this._delegate,function Rb(){return new Yw}()))}orderByPriority(){return(0,_e.Dv)("Query.orderByPriority",0,0,arguments.length),new Po(this.database,Jc(this._delegate,function Yh(){return new $d}()))}orderByValue(){return(0,_e.Dv)("Query.orderByValue",0,0,arguments.length),new Po(this.database,Jc(this._delegate,function xb(){return new WE}()))}startAt(s=null,t){return(0,_e.Dv)("Query.startAt",0,2,arguments.length),new Po(this.database,Jc(this._delegate,function Ww(n=null,s){return $g("startAt","key",s,!0),new VE(n,s)}(s,t)))}startAfter(s=null,t){return(0,_e.Dv)("Query.startAfter",0,2,arguments.length),new Po(this.database,Jc(this._delegate,function GE(n,s){return $g("startAfter","key",s,!0),new Mb(n,s)}(s,t)))}endAt(s=null,t){return(0,_e.Dv)("Query.endAt",0,2,arguments.length),new Po(this.database,Jc(this._delegate,function ju(n,s){return $g("endAt","key",s,!0),new $w(n,s)}(s,t)))}endBefore(s=null,t){return(0,_e.Dv)("Query.endBefore",0,2,arguments.length),new Po(this.database,Jc(this._delegate,function Nb(n,s){return $g("endBefore","key",s,!0),new zw(n,s)}(s,t)))}equalTo(s,t){return(0,_e.Dv)("Query.equalTo",1,2,arguments.length),new Po(this.database,Jc(this._delegate,function Zw(n,s){return $g("equalTo","key",s,!0),new KE(n,s)}(s,t)))}toString(){return(0,_e.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,_e.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(s){if((0,_e.Dv)("Query.isEqual",1,1,arguments.length),!(s instanceof Po))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(s._delegate)}static getCancelAndContextArgs_(s,t,l){const h={cancel:void 0,context:void 0};if(t&&l)h.cancel=t,(0,_e.Wj)(s,"cancel",h.cancel,!0),h.context=l,(0,_e.lb)(s,"context",h.context,!0);else if(t)if("object"==typeof t&&null!==t)h.context=t;else{if("function"!=typeof t)throw new Error((0,_e.gK)(s,"cancelOrContext")+" must either be a cancel callback or a context object.");h.cancel=t}return h}get ref(){return new au(this.database,new ou(this._delegate._repo,this._delegate._path))}}class au extends Po{constructor(s,t){super(s,new ml(t._repo,t._path,new Fl,!1)),this.database=s,this._delegate=t}getKey(){return(0,_e.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(s){return(0,_e.Dv)("Reference.child",1,1,arguments.length),"number"==typeof s&&(s=String(s)),new au(this.database,hp(this._delegate,s))}getParent(){(0,_e.Dv)("Reference.parent",0,0,arguments.length);const s=this._delegate.parent;return s?new au(this.database,s):null}getRoot(){return(0,_e.Dv)("Reference.root",0,0,arguments.length),new au(this.database,this._delegate.root)}set(s,t){(0,_e.Dv)("Reference.set",1,2,arguments.length),(0,_e.Wj)("Reference.set","onComplete",t,!0);const l=UE(this._delegate,s);return t&&l.then(()=>t(null),h=>t(h)),l}update(s,t){if((0,_e.Dv)("Reference.update",1,2,arguments.length),Array.isArray(s)){const h={};for(let m=0;m<s.length;++m)h[""+m]=s[m];s=h,lD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vu("Reference.update",this._delegate._path),(0,_e.Wj)("Reference.update","onComplete",t,!0);const l=Gw(this._delegate,s);return t&&l.then(()=>t(null),h=>t(h)),l}setWithPriority(s,t,l){(0,_e.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,_e.Wj)("Reference.setWithPriority","onComplete",l,!0);const h=function RD(n,s,t){if(Vu("setWithPriority",n._path),gl("setWithPriority",s,n._path,!1),bE("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const l=new _e.BH;return CE(n._repo,n._path,s,t,l.wrapCallback(()=>{})),l.promise}(this._delegate,s,t);return l&&h.then(()=>l(null),m=>l(m)),h}remove(s){(0,_e.Dv)("Reference.remove",0,1,arguments.length),(0,_e.Wj)("Reference.remove","onComplete",s,!0);const t=function Vw(n){return Vu("remove",n._path),UE(n,null)}(this._delegate);return s&&t.then(()=>s(null),l=>s(l)),t}transaction(s,t,l){(0,_e.Dv)("Reference.transaction",1,3,arguments.length),(0,_e.Wj)("Reference.transaction","transactionUpdate",s,!1),(0,_e.Wj)("Reference.transaction","onComplete",t,!0),function(n,s,t,l){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,_e.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,l);const h=function kD(n,s,t){var l;if(n=(0,_e.m9)(n),Vu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const h=null===(l=t?.applyLocally)||void 0===l||l,m=new _e.BH,F=e0(n,()=>{});return function NE(n,s,t,l,h,m){Kg(n,"transaction on "+s);const C={path:s,update:t,onComplete:l,status:null,order:Td(),applyLocally:m,retryCount:0,unwatcher:h,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},F=Sb(n,s,void 0);C.currentInputSnapshot=F;const G=C.update(F.val());if(void 0===G)C.unwatcher(),C.currentOutputSnapshotRaw=null,C.currentOutputSnapshotResolved=null,C.onComplete&&C.onComplete(null,!1,C.currentInputSnapshot);else{j_("transaction failed: Data returned ",G,C.path),C.status=0;const Y=jg(n.transactionQueueTree_,s),ue=ap(Y)||[];let Ne;ue.push(C),_b(Y,ue),"object"==typeof G&&null!==G&&(0,_e.r3)(G,".priority")?(Ne=(0,_e.DV)(G,".priority"),(0,_e.hu)(Jo(Ne),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ne=(Gv(n.serverSyncTree_,s)||tr.EMPTY_NODE).getPriority().val();const i=zg(n),o=zs(G,Ne),u=B_(o,F,i);C.currentOutputSnapshotRaw=o,C.currentOutputSnapshotResolved=u,C.currentWriteId=z_(n);const d=db(n.serverSyncTree_,s,u,C.currentWriteId,C.applyLocally);su(n.eventQueue_,s,d),W_(n,n.transactionQueueTree_)}}(n._repo,n._path,s,(G,Y,ue)=>{let Ne=null;G?m.reject(G):(Ne=new dp(ue,new ou(n._repo,n._path),Di),m.resolve(new PD(Y,Ne)))},F,h),m.promise}(this._delegate,s,{applyLocally:l}).then(m=>new BD(m.committed,new Zh(this.database,m.snapshot)));return t&&h.then(m=>t(null,m.committed,m.snapshot),m=>t(m,!1,null)),h}setPriority(s,t){(0,_e.Dv)("Reference.setPriority",1,2,arguments.length),(0,_e.Wj)("Reference.setPriority","onComplete",t,!0);const l=function MD(n,s){n=(0,_e.m9)(n),Vu("setPriority",n._path),bE("setPriority",s,!1);const t=new _e.BH;return CE(n._repo,ki(n._path,".priority"),s,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,s);return t&&l.then(()=>t(null),h=>t(h)),l}push(s,t){(0,_e.Dv)("Reference.push",0,2,arguments.length),(0,_e.Wj)("Reference.push","onComplete",t,!0);const l=function Xv(n,s){n=(0,_e.m9)(n),Vu("push",n._path),gl("push",s,n._path,!0);const t=Mw(n._repo),l=OD(t),h=hp(n,l),m=hp(n,l);let C;return C=null!=s?UE(m,s).then(()=>m):Promise.resolve(m),h.then=C.then.bind(C),h.catch=C.then.bind(C,void 0),h}(this._delegate,s),h=l.then(C=>new au(this.database,C));t&&h.then(()=>t(null),C=>t(C));const m=new au(this.database,l);return m.then=h.then.bind(h),m.catch=h.catch.bind(h,void 0),m}onDisconnect(){return Vu("Reference.onDisconnect",this._delegate._path),new UD(new Y_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class X_{constructor(s,t){this._delegate=s,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Fb,forceLongPolling:JE}}useEmulator(s,t,l={}){!function Lb(n,s,t,l={}){(n=(0,_e.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qo("Cannot call useEmulator() after instance has already been initialized.");const h=n._repoInternal;let m;if(h.repoInfo_.nodeAdmin)l.mockUserToken&&qo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),m=new Ad(Ad.OWNER);else if(l.mockUserToken){const C="string"==typeof l.mockUserToken?l.mockUserToken:(0,_e.Sg)(l.mockUserToken,n.app.options.projectId);m=new Ad(C)}!function Qw(n,s,t,l){n.repoInfo_=new fg(`${s}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),l&&(n.authTokenProvider_=l)}(h,s,t,m)}(this._delegate,s,t,l)}ref(s){if((0,_e.Dv)("database.ref",0,1,arguments.length),s instanceof au){const t=Bw(this._delegate,s.toString());return new au(this,t)}{const t=Uw(this._delegate,s);return new au(this,t)}}refFromURL(s){(0,_e.Dv)("database.refFromURL",1,1,arguments.length);const l=Bw(this._delegate,s);return new au(this,l)}goOffline(){return(0,_e.Dv)("database.goOffline",0,0,arguments.length),function QE(n){(n=(0,_e.m9)(n))._checkNotDeleted("goOffline"),Tb(n._repo)}(this._delegate)}goOnline(){return(0,_e.Dv)("database.goOnline",0,0,arguments.length),function XE(n){(n=(0,_e.m9)(n))._checkNotDeleted("goOnline"),function OE(n){n.persistentConnection_&&n.persistentConnection_.resume(bb)}(n._repo)}(this._delegate)}}X_.ServerValue={TIMESTAMP:function nD(){return ew}(),increment:n=>function rD(n){return{".sv":{increment:n}}}(n)};var fp=Object.freeze({__proto__:null,initStandalone:function tw({app:n,url:s,version:t,customAuthImpl:l,namespace:h,nodeAdmin:m=!1}){ig(t);const C=new za.zt("auth-internal",new za.H0("database-standalone"));return C.setComponent(new za.wA("auth-internal",()=>l,"PRIVATE")),{instance:new X_(kb(n,C,void 0,s,m),n),namespace:h}}});const nw=X_.ServerValue;function s0(n){return null==n}function o0(n){return"function"==typeof n.set}function ey(n,s){return o0(s)?s:n.ref(s)}function cD(n,s){if(function Bb(n){return"string"==typeof n}(n))return s.stringCase();if(o0(n))return s.firebaseCase();if(function uD(n){return"function"==typeof n.exportVal}(n))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function a0(n,s,t="on",l=hr.z){return new Pt.y(h=>{let m=null;return m=n[t](s,(C,F)=>{l.schedule(()=>{h.next({snapshot:C,prevKey:F})}),"once"===t&&l.schedule(()=>h.complete())},C=>{l.schedule(()=>h.error(C))}),"on"===t?{unsubscribe(){null!=m&&n.off(s,m)}}:{unsubscribe(){}}}).pipe((0,Fe.U)(h=>{const{snapshot:m,prevKey:C}=h;let F=null;return m.exists()&&(F=m.key),{type:s,payload:m,prevKey:C,key:F}}),(0,Xm.B)())}function dD(n,s){const t=n.length;for(let l=0;l<t;l++)if(n[l].payload.key===s)return l;return-1}function hD(n,s){const{payload:t,prevKey:l,key:h}=s,m=dD(n,h),C=function rw(n,s){if(s0(s))return 0;{const t=dD(n,s);return-1===t?n.length:t+1}}(n,l);switch(s.type){case"value":if(s.payload&&s.payload.exists()){let F=null;s.payload.forEach(G=>{const Y={payload:G,type:"value",prevKey:F,key:G.key};return F=G.key,n=[...n,Y],!1})}return n;case"child_added":if(m>-1){const F=n[m-1];(F&&F.key||null)!==l&&(n=n.filter(G=>G.payload.key!==t.key)).splice(C,0,s)}else{if(null==l)return[s,...n];(n=n.slice()).splice(C,0,s)}return n;case"child_removed":return n.filter(F=>F.payload.key!==t.key);case"child_changed":return n.map(F=>F.payload.key===h?s:F);case"child_moved":if(m>-1){const F=n.splice(m,1)[0];return(n=n.slice()).splice(C,0,F),n}return n;default:return n}}function iw(n){return(s0(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function sw(n,s,t){return function VD(n,s,t){return a0(n,"value","once",t).pipe((0,Dr.w)(l=>{const h=[(0,st.of)(l)];return s.forEach(m=>h.push(a0(n,m,"on",t))),(0,$t.T)(...h).pipe((0,e_.R)(hD,[]))}),(0,Nn.x)())}(n,s=iw(s),t)}function ow(n,s,t){const l=(s=iw(s)).map(h=>a0(n,h,"on",t));return(0,$t.T)(...l)}function cw(n,s){return function(l,h){return cD(l,{stringCase:()=>n.child(l)[s](h),firebaseCase:()=>l[s](h),snapshotCase:()=>l.ref[s](h)})}}function fD(n){return function(t){return t?cD(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function l0(n,s){return function(){return a0(n,"value","on",s)}}!function Ub(n){n.INTERNAL.registerComponent(new za.wA("database-compat",(s,{instanceIdentifier:t})=>{const l=s.getProvider("app-compat").getImmediate(),h=s.getProvider("database").getImmediate({identifier:t});return new X_(h,l)},"PUBLIC").setServiceProps({Reference:au,Query:Po,Database:X_,DataSnapshot:Zh,enableLogging:n0,INTERNAL:fp,ServerValue:nw}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(ym.Z);const hw=new p.OlP("angularfire2.realtimeDatabaseURL"),Vb=new p.OlP("angularfire2.database.use-emulator");let pD=(()=>{class n{constructor(t,l,h,m,C,F,G,Y,ue,Ne,i,o,u,d,g){this.schedulers=F;const y=G,I=(0,Yl.on)(t,C,l);Y&&(0,Ge.nw)(I,C,ue,i,o,u,Ne,d),this.database=(0,Yl.cc)(`${I.name}.database.${h}`,"AngularFireDatabase",I.name,()=>{const O=C.runOutsideAngular(()=>I.database(h||void 0));return y&&O.useEmulator(...y),O},[y])}list(t,l){const h=this.schedulers.ngZone.runOutsideAngular(()=>ey(this.database,t));let m=h;return l&&(m=l(h)),function dw(n,s){const t=s.schedulers.outsideAngular,l=s.schedulers.ngZone.run(()=>n.ref);return{query:n,update:cw(l,"update"),set:cw(l,"set"),push:h=>l.push(h),remove:fD(l),snapshotChanges:h=>sw(n,h,t).pipe(Aa.iC),stateChanges:h=>ow(n,h,t).pipe(Aa.iC),auditTrail:h=>function aw(n,s,t){return function uw(n,s,t){return function lw(n,s){return a0(n,"value","on",s).pipe((0,Fe.U)(t=>{let l;return t.payload.forEach(h=>(l=h.key,!1)),{data:t,lastKeyToLoad:l}}))}(n,t).pipe(rr(s),(0,Fe.U)(([h,m])=>{const C=h.lastKeyToLoad,F=m.map(G=>G.key);return{actions:m,lastKeyToLoad:C,loadedKeys:F}}),function t_(n){return(0,un.e)((s,t)=>{let l=!1,h=0;s.subscribe((0,en.x)(t,m=>(l||(l=!n(m,h++)))&&t.next(m)))})}(h=>-1===h.loadedKeys.indexOf(h.lastKeyToLoad)),(0,Fe.U)(h=>h.actions))}(n,ow(n,s).pipe((0,e_.R)((h,m)=>[...h,m],[])),t)}(n,h,t).pipe(Aa.iC),valueChanges:(h,m)=>sw(n,h,t).pipe((0,Fe.U)(F=>F.map(G=>m&&m.idField?Object.assign(Object.assign({},G.payload.val()),{[m.idField]:G.key}):G.payload.val())),Aa.iC)}}(m,this)}object(t){return function GD(n,s){return{query:n,snapshotChanges:()=>l0(n,s.schedulers.outsideAngular)().pipe(Aa.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>l0(n,s.schedulers.outsideAngular)().pipe(Aa.iC,(0,Fe.U)(l=>l.payload.exists()?l.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ey(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Yl.Dh),p.LFG(Yl.xv,8),p.LFG(hw,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Aa.HU),p.LFG(Vb,8),p.LFG(Ge.zQ,8),p.LFG(Ge.Qv,8),p.LFG(Ge.L6,8),p.LFG(Ge._Q,8),p.LFG(Ge.rT,8),p.LFG(Ge.lh,8),p.LFG(Ge.f7,8),p.LFG(ev.nm,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gD=(()=>{class n{constructor(){be.Z.registerVersion("angularfire",Aa.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[pD]}),n})();var jD=V(6743),HD=V(529),mD=V(1266);let _D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[Jt]}),n.\u0275inj=p.cJS({providers:[De.e],imports:[b.b2,ke,T0,Yl.hO.initializeApp(jD.N.firebase),Ge.ww,Qm.yb,tv,gD,HD.JF,mD.F]}),n})();b.q6().bootstrapModule(_D).catch(n=>console.error(n))},1135:(Yt,Ke,V)=>{V.d(Ke,{X:()=>Z});var b=V(7579);class Z extends b.x{constructor(De){super(),this._value=De}get value(){return this.getValue()}_subscribe(De){const Me=super._subscribe(De);return!Me.closed&&De.next(this._value),Me}getValue(){const{hasError:De,thrownError:Me,_value:xe}=this;if(De)throw Me;return this._throwIfClosed(),xe}next(De){super.next(this._value=De)}}},9751:(Yt,Ke,V)=>{V.d(Ke,{y:()=>Pe});var b=V(930),Z=V(727),p=V(8822),De=V(9635),Me=V(2416),xe=V(576),Fe=V(2806);let Pe=(()=>{class Re{constructor(He){He&&(this._subscribe=He)}lift(He){const pt=new Re;return pt.source=this,pt.operator=He,pt}subscribe(He,pt,Nt){const Qe=function Ee(Re){return Re&&Re instanceof b.Lv||function be(Re){return Re&&(0,xe.m)(Re.next)&&(0,xe.m)(Re.error)&&(0,xe.m)(Re.complete)}(Re)&&(0,Z.Nn)(Re)}(He)?He:new b.Hp(He,pt,Nt);return(0,Fe.x)(()=>{const{operator:ut,source:Ie}=this;Qe.add(ut?ut.call(Qe,Ie):Ie?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(He){try{return this._subscribe(He)}catch(pt){He.error(pt)}}forEach(He,pt){return new(pt=Ge(pt))((Nt,Qe)=>{const ut=new b.Hp({next:Ie=>{try{He(Ie)}catch(Et){Qe(Et),ut.unsubscribe()}},error:Qe,complete:Nt});this.subscribe(ut)})}_subscribe(He){var pt;return null===(pt=this.source)||void 0===pt?void 0:pt.subscribe(He)}[p.L](){return this}pipe(...He){return(0,De.U)(He)(this)}toPromise(He){return new(He=Ge(He))((pt,Nt)=>{let Qe;this.subscribe(ut=>Qe=ut,ut=>Nt(ut),()=>pt(Qe))})}}return Re.create=yt=>new Re(yt),Re})();function Ge(Re){var yt;return null!==(yt=Re??Me.v.Promise)&&void 0!==yt?yt:Promise}},7579:(Yt,Ke,V)=>{V.d(Ke,{x:()=>Fe});var b=V(9751),Z=V(727);const De=(0,V(3888).d)(Ge=>function(){Ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=V(8737),xe=V(2806);let Fe=(()=>{class Ge extends b.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ee){const Re=new Pe(this,this);return Re.operator=Ee,Re}_throwIfClosed(){if(this.closed)throw new De}next(Ee){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Re of this.currentObservers)Re.next(Ee)}})}error(Ee){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ee;const{observers:Re}=this;for(;Re.length;)Re.shift().error(Ee)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ee;return(null===(Ee=this.observers)||void 0===Ee?void 0:Ee.length)>0}_trySubscribe(Ee){return this._throwIfClosed(),super._trySubscribe(Ee)}_subscribe(Ee){return this._throwIfClosed(),this._checkFinalizedStatuses(Ee),this._innerSubscribe(Ee)}_innerSubscribe(Ee){const{hasError:Re,isStopped:yt,observers:He}=this;return Re||yt?Z.Lc:(this.currentObservers=null,He.push(Ee),new Z.w0(()=>{this.currentObservers=null,(0,Me.P)(He,Ee)}))}_checkFinalizedStatuses(Ee){const{hasError:Re,thrownError:yt,isStopped:He}=this;Re?Ee.error(yt):He&&Ee.complete()}asObservable(){const Ee=new b.y;return Ee.source=this,Ee}}return Ge.create=(be,Ee)=>new Pe(be,Ee),Ge})();class Pe extends Fe{constructor(be,Ee){super(),this.destination=be,this.source=Ee}next(be){var Ee,Re;null===(Re=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.next)||void 0===Re||Re.call(Ee,be)}error(be){var Ee,Re;null===(Re=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.error)||void 0===Re||Re.call(Ee,be)}complete(){var be,Ee;null===(Ee=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===Ee||Ee.call(be)}_subscribe(be){var Ee,Re;return null!==(Re=null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(be))&&void 0!==Re?Re:Z.Lc}}},930:(Yt,Ke,V)=>{V.d(Ke,{Hp:()=>Nt,Lv:()=>Re});var b=V(576),Z=V(727),p=V(2416),De=V(7849),Me=V(5032);const xe=Ge("C",void 0,void 0);function Ge(gt,rt,Ye){return{kind:gt,value:rt,error:Ye}}var be=V(3410),Ee=V(2806);class Re extends Z.w0{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,Z.Nn)(rt)&&rt.add(this)):this.destination=Et}static create(rt,Ye,xt){return new Nt(rt,Ye,xt)}next(rt){this.isStopped?Ie(function Pe(gt){return Ge("N",gt,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?Ie(function Fe(gt){return Ge("E",void 0,gt)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?Ie(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function He(gt,rt){return yt.call(gt,rt)}class pt{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:Ye}=this;if(Ye.next)try{Ye.next(rt)}catch(xt){Qe(xt)}}error(rt){const{partialObserver:Ye}=this;if(Ye.error)try{Ye.error(rt)}catch(xt){Qe(xt)}else Qe(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(Ye){Qe(Ye)}}}class Nt extends Re{constructor(rt,Ye,xt){let ke;if(super(),(0,b.m)(rt)||!rt)ke={next:rt??void 0,error:Ye??void 0,complete:xt??void 0};else{let fe;this&&p.v.useDeprecatedNextContext?(fe=Object.create(rt),fe.unsubscribe=()=>this.unsubscribe(),ke={next:rt.next&&He(rt.next,fe),error:rt.error&&He(rt.error,fe),complete:rt.complete&&He(rt.complete,fe)}):ke=rt}this.destination=new pt(ke)}}function Qe(gt){p.v.useDeprecatedSynchronousErrorHandling?(0,Ee.O)(gt):(0,De.h)(gt)}function Ie(gt,rt){const{onStoppedNotification:Ye}=p.v;Ye&&be.z.setTimeout(()=>Ye(gt,rt))}const Et={closed:!0,next:Me.Z,error:function ut(gt){throw gt},complete:Me.Z}},727:(Yt,Ke,V)=>{V.d(Ke,{Lc:()=>xe,w0:()=>Me,Nn:()=>Fe});var b=V(576);const p=(0,V(3888).d)(Ge=>function(Ee){Ge(this),this.message=Ee?`${Ee.length} errors occurred during unsubscription:\n${Ee.map((Re,yt)=>`${yt+1}) ${Re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ee});var De=V(8737);class Me{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:Ee}=this;if(Ee)if(this._parentage=null,Array.isArray(Ee))for(const He of Ee)He.remove(this);else Ee.remove(this);const{initialTeardown:Re}=this;if((0,b.m)(Re))try{Re()}catch(He){be=He instanceof p?He.errors:[He]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const He of yt)try{Pe(He)}catch(pt){be=be??[],pt instanceof p?be=[...be,...pt.errors]:be.push(pt)}}if(be)throw new p(be)}}add(be){var Ee;if(be&&be!==this)if(this.closed)Pe(be);else{if(be instanceof Me){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._finalizers=null!==(Ee=this._finalizers)&&void 0!==Ee?Ee:[]).push(be)}}_hasParent(be){const{_parentage:Ee}=this;return Ee===be||Array.isArray(Ee)&&Ee.includes(be)}_addParent(be){const{_parentage:Ee}=this;this._parentage=Array.isArray(Ee)?(Ee.push(be),Ee):Ee?[Ee,be]:be}_removeParent(be){const{_parentage:Ee}=this;Ee===be?this._parentage=null:Array.isArray(Ee)&&(0,De.P)(Ee,be)}remove(be){const{_finalizers:Ee}=this;Ee&&(0,De.P)(Ee,be),be instanceof Me&&be._removeParent(this)}}Me.EMPTY=(()=>{const Ge=new Me;return Ge.closed=!0,Ge})();const xe=Me.EMPTY;function Fe(Ge){return Ge instanceof Me||Ge&&"closed"in Ge&&(0,b.m)(Ge.remove)&&(0,b.m)(Ge.add)&&(0,b.m)(Ge.unsubscribe)}function Pe(Ge){(0,b.m)(Ge)?Ge():Ge.unsubscribe()}},2416:(Yt,Ke,V)=>{V.d(Ke,{v:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Yt,Ke,V)=>{V.d(Ke,{a:()=>be});var b=V(9751),Z=V(4742),p=V(8996),De=V(4671),Me=V(3268),xe=V(3269),Fe=V(1810),Pe=V(5403),Ge=V(9672);function be(...yt){const He=(0,xe.yG)(yt),pt=(0,xe.jO)(yt),{args:Nt,keys:Qe}=(0,Z.D)(yt);if(0===Nt.length)return(0,p.D)([],He);const ut=new b.y(function Ee(yt,He,pt=De.y){return Nt=>{Re(He,()=>{const{length:Qe}=yt,ut=new Array(Qe);let Ie=Qe,Et=Qe;for(let gt=0;gt<Qe;gt++)Re(He,()=>{const rt=(0,p.D)(yt[gt],He);let Ye=!1;rt.subscribe((0,Pe.x)(Nt,xt=>{ut[gt]=xt,Ye||(Ye=!0,Et--),Et||Nt.next(pt(ut.slice()))},()=>{--Ie||Nt.complete()}))},Nt)},Nt)}}(Nt,He,Qe?Ie=>(0,Fe.n)(Qe,Ie):De.y));return pt?ut.pipe((0,Me.Z)(pt)):ut}function Re(yt,He,pt){yt?(0,Ge.f)(pt,yt,He):He()}},7272:(Yt,Ke,V)=>{V.d(Ke,{z:()=>Me});var b=V(8189),p=V(3269),De=V(8996);function Me(...xe){return function Z(){return(0,b.J)(1)}()((0,De.D)(xe,(0,p.yG)(xe)))}},515:(Yt,Ke,V)=>{V.d(Ke,{E:()=>Z});const Z=new(V(9751).y)(Me=>Me.complete())},8996:(Yt,Ke,V)=>{V.d(Ke,{D:()=>rt});var b=V(8421),Z=V(5363),p=V(9468),xe=V(9751),Pe=V(2202),Ge=V(576),be=V(9672);function Re(Ye,xt){if(!Ye)throw new Error("Iterable cannot be null");return new xe.y(ke=>{(0,be.f)(ke,xt,()=>{const fe=Ye[Symbol.asyncIterator]();(0,be.f)(ke,xt,()=>{fe.next().then(qe=>{qe.done?ke.complete():ke.next(qe.value)})},0,!0)})})}var yt=V(3670),He=V(8239),pt=V(1144),Nt=V(6495),Qe=V(2206),ut=V(4532),Ie=V(3260);function rt(Ye,xt){return xt?function gt(Ye,xt){if(null!=Ye){if((0,yt.c)(Ye))return function De(Ye,xt){return(0,b.Xf)(Ye).pipe((0,p.R)(xt),(0,Z.Q)(xt))}(Ye,xt);if((0,pt.z)(Ye))return function Fe(Ye,xt){return new xe.y(ke=>{let fe=0;return xt.schedule(function(){fe===Ye.length?ke.complete():(ke.next(Ye[fe++]),ke.closed||this.schedule())})})}(Ye,xt);if((0,He.t)(Ye))return function Me(Ye,xt){return(0,b.Xf)(Ye).pipe((0,p.R)(xt),(0,Z.Q)(xt))}(Ye,xt);if((0,Qe.D)(Ye))return Re(Ye,xt);if((0,Nt.T)(Ye))return function Ee(Ye,xt){return new xe.y(ke=>{let fe;return(0,be.f)(ke,xt,()=>{fe=Ye[Pe.h](),(0,be.f)(ke,xt,()=>{let qe,ct;try{({value:qe,done:ct}=fe.next())}catch(bt){return void ke.error(bt)}ct?ke.complete():ke.next(qe)},0,!0)}),()=>(0,Ge.m)(fe?.return)&&fe.return()})}(Ye,xt);if((0,Ie.L)(Ye))return function Et(Ye,xt){return Re((0,Ie.Q)(Ye),xt)}(Ye,xt)}throw(0,ut.z)(Ye)}(Ye,xt):(0,b.Xf)(Ye)}},8421:(Yt,Ke,V)=>{V.d(Ke,{Xf:()=>yt});var b=V(655),Z=V(1144),p=V(8239),De=V(9751),Me=V(3670),xe=V(2206),Fe=V(4532),Pe=V(6495),Ge=V(3260),be=V(576),Ee=V(7849),Re=V(8822);function yt(gt){if(gt instanceof De.y)return gt;if(null!=gt){if((0,Me.c)(gt))return function He(gt){return new De.y(rt=>{const Ye=gt[Re.L]();if((0,be.m)(Ye.subscribe))return Ye.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(gt);if((0,Z.z)(gt))return function pt(gt){return new De.y(rt=>{for(let Ye=0;Ye<gt.length&&!rt.closed;Ye++)rt.next(gt[Ye]);rt.complete()})}(gt);if((0,p.t)(gt))return function Nt(gt){return new De.y(rt=>{gt.then(Ye=>{rt.closed||(rt.next(Ye),rt.complete())},Ye=>rt.error(Ye)).then(null,Ee.h)})}(gt);if((0,xe.D)(gt))return ut(gt);if((0,Pe.T)(gt))return function Qe(gt){return new De.y(rt=>{for(const Ye of gt)if(rt.next(Ye),rt.closed)return;rt.complete()})}(gt);if((0,Ge.L)(gt))return function Ie(gt){return ut((0,Ge.Q)(gt))}(gt)}throw(0,Fe.z)(gt)}function ut(gt){return new De.y(rt=>{(function Et(gt,rt){var Ye,xt,ke,fe;return(0,b.mG)(this,void 0,void 0,function*(){try{for(Ye=(0,b.KL)(gt);!(xt=yield Ye.next()).done;)if(rt.next(xt.value),rt.closed)return}catch(qe){ke={error:qe}}finally{try{xt&&!xt.done&&(fe=Ye.return)&&(yield fe.call(Ye))}finally{if(ke)throw ke.error}}rt.complete()})})(gt,rt).catch(Ye=>rt.error(Ye))})}},6451:(Yt,Ke,V)=>{V.d(Ke,{T:()=>xe});var b=V(8189),Z=V(8421),p=V(515),De=V(3269),Me=V(8996);function xe(...Fe){const Pe=(0,De.yG)(Fe),Ge=(0,De._6)(Fe,1/0),be=Fe;return be.length?1===be.length?(0,Z.Xf)(be[0]):(0,b.J)(Ge)((0,Me.D)(be,Pe)):p.E}},9646:(Yt,Ke,V)=>{V.d(Ke,{of:()=>p});var b=V(3269),Z=V(8996);function p(...De){const Me=(0,b.yG)(De);return(0,Z.D)(De,Me)}},5403:(Yt,Ke,V)=>{V.d(Ke,{x:()=>Z});var b=V(930);function Z(De,Me,xe,Fe,Pe){return new p(De,Me,xe,Fe,Pe)}class p extends b.Lv{constructor(Me,xe,Fe,Pe,Ge,be){super(Me),this.onFinalize=Ge,this.shouldUnsubscribe=be,this._next=xe?function(Ee){try{xe(Ee)}catch(Re){Me.error(Re)}}:super._next,this._error=Pe?function(Ee){try{Pe(Ee)}catch(Re){Me.error(Re)}finally{this.unsubscribe()}}:super._error,this._complete=Fe?function(){try{Fe()}catch(Ee){Me.error(Ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(Me=this.onFinalize)||void 0===Me||Me.call(this))}}}},4351:(Yt,Ke,V)=>{V.d(Ke,{b:()=>p});var b=V(5577),Z=V(576);function p(De,Me){return(0,Z.m)(Me)?(0,b.z)(De,Me,1):(0,b.z)(De,1)}},6590:(Yt,Ke,V)=>{V.d(Ke,{d:()=>p});var b=V(4482),Z=V(5403);function p(De){return(0,b.e)((Me,xe)=>{let Fe=!1;Me.subscribe((0,Z.x)(xe,Pe=>{Fe=!0,xe.next(Pe)},()=>{Fe||xe.next(De),xe.complete()}))})}},1884:(Yt,Ke,V)=>{V.d(Ke,{x:()=>De});var b=V(4671),Z=V(4482),p=V(5403);function De(xe,Fe=b.y){return xe=xe??Me,(0,Z.e)((Pe,Ge)=>{let be,Ee=!0;Pe.subscribe((0,p.x)(Ge,Re=>{const yt=Fe(Re);(Ee||!xe(be,yt))&&(Ee=!1,be=yt,Ge.next(Re))}))})}function Me(xe,Fe){return xe===Fe}},9300:(Yt,Ke,V)=>{V.d(Ke,{h:()=>p});var b=V(4482),Z=V(5403);function p(De,Me){return(0,b.e)((xe,Fe)=>{let Pe=0;xe.subscribe((0,Z.x)(Fe,Ge=>De.call(Me,Ge,Pe++)&&Fe.next(Ge)))})}},590:(Yt,Ke,V)=>{V.d(Ke,{P:()=>Fe});var b=V(6805),Z=V(9300),p=V(5698),De=V(6590),Me=V(8068),xe=V(4671);function Fe(Pe,Ge){const be=arguments.length>=2;return Ee=>Ee.pipe(Pe?(0,Z.h)((Re,yt)=>Pe(Re,yt,Ee)):xe.y,(0,p.q)(1),be?(0,De.d)(Ge):(0,Me.T)(()=>new b.K))}},4004:(Yt,Ke,V)=>{V.d(Ke,{U:()=>p});var b=V(4482),Z=V(5403);function p(De,Me){return(0,b.e)((xe,Fe)=>{let Pe=0;xe.subscribe((0,Z.x)(Fe,Ge=>{Fe.next(De.call(Me,Ge,Pe++))}))})}},9718:(Yt,Ke,V)=>{V.d(Ke,{h:()=>Z});var b=V(4004);function Z(p){return(0,b.U)(()=>p)}},8189:(Yt,Ke,V)=>{V.d(Ke,{J:()=>p});var b=V(5577),Z=V(4671);function p(De=1/0){return(0,b.z)(Z.y,De)}},5577:(Yt,Ke,V)=>{V.d(Ke,{z:()=>Pe});var b=V(4004),Z=V(8421),p=V(4482),De=V(9672),Me=V(5403),Fe=V(576);function Pe(Ge,be,Ee=1/0){return(0,Fe.m)(be)?Pe((Re,yt)=>(0,b.U)((He,pt)=>be(Re,He,yt,pt))((0,Z.Xf)(Ge(Re,yt))),Ee):("number"==typeof be&&(Ee=be),(0,p.e)((Re,yt)=>function xe(Ge,be,Ee,Re,yt,He,pt,Nt){const Qe=[];let ut=0,Ie=0,Et=!1;const gt=()=>{Et&&!Qe.length&&!ut&&be.complete()},rt=xt=>ut<Re?Ye(xt):Qe.push(xt),Ye=xt=>{He&&be.next(xt),ut++;let ke=!1;(0,Z.Xf)(Ee(xt,Ie++)).subscribe((0,Me.x)(be,fe=>{yt?.(fe),He?rt(fe):be.next(fe)},()=>{ke=!0},void 0,()=>{if(ke)try{for(ut--;Qe.length&&ut<Re;){const fe=Qe.shift();pt?(0,De.f)(be,pt,()=>Ye(fe)):Ye(fe)}gt()}catch(fe){be.error(fe)}}))};return Ge.subscribe((0,Me.x)(be,rt,()=>{Et=!0,gt()})),()=>{Nt?.()}}(Re,yt,Ge,Ee)))}},5363:(Yt,Ke,V)=>{V.d(Ke,{Q:()=>De});var b=V(9672),Z=V(4482),p=V(5403);function De(Me,xe=0){return(0,Z.e)((Fe,Pe)=>{Fe.subscribe((0,p.x)(Pe,Ge=>(0,b.f)(Pe,Me,()=>Pe.next(Ge),xe),()=>(0,b.f)(Pe,Me,()=>Pe.complete(),xe),Ge=>(0,b.f)(Pe,Me,()=>Pe.error(Ge),xe)))})}},5026:(Yt,Ke,V)=>{V.d(Ke,{R:()=>De});var b=V(4482),Z=V(5403);function De(Me,xe){return(0,b.e)(function p(Me,xe,Fe,Pe,Ge){return(be,Ee)=>{let Re=Fe,yt=xe,He=0;be.subscribe((0,Z.x)(Ee,pt=>{const Nt=He++;yt=Re?Me(yt,pt,Nt):(Re=!0,pt),Pe&&Ee.next(yt)},Ge&&(()=>{Re&&Ee.next(yt),Ee.complete()})))}}(Me,xe,arguments.length>=2,!0))}},3099:(Yt,Ke,V)=>{V.d(Ke,{B:()=>Me});var b=V(8421),Z=V(7579),p=V(930),De=V(4482);function Me(Fe={}){const{connector:Pe=(()=>new Z.x),resetOnError:Ge=!0,resetOnComplete:be=!0,resetOnRefCountZero:Ee=!0}=Fe;return Re=>{let yt,He,pt,Nt=0,Qe=!1,ut=!1;const Ie=()=>{He?.unsubscribe(),He=void 0},Et=()=>{Ie(),yt=pt=void 0,Qe=ut=!1},gt=()=>{const rt=yt;Et(),rt?.unsubscribe()};return(0,De.e)((rt,Ye)=>{Nt++,!ut&&!Qe&&Ie();const xt=pt=pt??Pe();Ye.add(()=>{Nt--,0===Nt&&!ut&&!Qe&&(He=xe(gt,Ee))}),xt.subscribe(Ye),!yt&&Nt>0&&(yt=new p.Hp({next:ke=>xt.next(ke),error:ke=>{ut=!0,Ie(),He=xe(Et,Ge,ke),xt.error(ke)},complete:()=>{Qe=!0,Ie(),He=xe(Et,be),xt.complete()}}),(0,b.Xf)(rt).subscribe(yt))})(Re)}}function xe(Fe,Pe,...Ge){if(!0===Pe)return void Fe();if(!1===Pe)return;const be=new p.Hp({next:()=>{be.unsubscribe(),Fe()}});return Pe(...Ge).subscribe(be)}},8675:(Yt,Ke,V)=>{V.d(Ke,{O:()=>De});var b=V(7272),Z=V(3269),p=V(4482);function De(...Me){const xe=(0,Z.yG)(Me);return(0,p.e)((Fe,Pe)=>{(xe?(0,b.z)(Me,Fe,xe):(0,b.z)(Me,Fe)).subscribe(Pe)})}},9468:(Yt,Ke,V)=>{V.d(Ke,{R:()=>Z});var b=V(4482);function Z(p,De=0){return(0,b.e)((Me,xe)=>{xe.add(p.schedule(()=>Me.subscribe(xe),De))})}},3900:(Yt,Ke,V)=>{V.d(Ke,{w:()=>De});var b=V(8421),Z=V(4482),p=V(5403);function De(Me,xe){return(0,Z.e)((Fe,Pe)=>{let Ge=null,be=0,Ee=!1;const Re=()=>Ee&&!Ge&&Pe.complete();Fe.subscribe((0,p.x)(Pe,yt=>{Ge?.unsubscribe();let He=0;const pt=be++;(0,b.Xf)(Me(yt,pt)).subscribe(Ge=(0,p.x)(Pe,Nt=>Pe.next(xe?xe(yt,Nt,pt,He++):Nt),()=>{Ge=null,Re()}))},()=>{Ee=!0,Re()}))})}},5698:(Yt,Ke,V)=>{V.d(Ke,{q:()=>De});var b=V(515),Z=V(4482),p=V(5403);function De(Me){return Me<=0?()=>b.E:(0,Z.e)((xe,Fe)=>{let Pe=0;xe.subscribe((0,p.x)(Fe,Ge=>{++Pe<=Me&&(Fe.next(Ge),Me<=Pe&&Fe.complete())}))})}},8505:(Yt,Ke,V)=>{V.d(Ke,{b:()=>Me});var b=V(576),Z=V(4482),p=V(5403),De=V(4671);function Me(xe,Fe,Pe){const Ge=(0,b.m)(xe)||Fe||Pe?{next:xe,error:Fe,complete:Pe}:xe;return Ge?(0,Z.e)((be,Ee)=>{var Re;null===(Re=Ge.subscribe)||void 0===Re||Re.call(Ge);let yt=!0;be.subscribe((0,p.x)(Ee,He=>{var pt;null===(pt=Ge.next)||void 0===pt||pt.call(Ge,He),Ee.next(He)},()=>{var He;yt=!1,null===(He=Ge.complete)||void 0===He||He.call(Ge),Ee.complete()},He=>{var pt;yt=!1,null===(pt=Ge.error)||void 0===pt||pt.call(Ge,He),Ee.error(He)},()=>{var He,pt;yt&&(null===(He=Ge.unsubscribe)||void 0===He||He.call(Ge)),null===(pt=Ge.finalize)||void 0===pt||pt.call(Ge)}))}):De.y}},8068:(Yt,Ke,V)=>{V.d(Ke,{T:()=>De});var b=V(6805),Z=V(4482),p=V(5403);function De(xe=Me){return(0,Z.e)((Fe,Pe)=>{let Ge=!1;Fe.subscribe((0,p.x)(Pe,be=>{Ge=!0,Pe.next(be)},()=>Ge?Pe.complete():Pe.error(xe())))})}function Me(){return new b.K}},4408:(Yt,Ke,V)=>{V.d(Ke,{o:()=>Me});var b=V(727);class Z extends b.w0{constructor(Fe,Pe){super()}schedule(Fe,Pe=0){return this}}const p={setInterval(xe,Fe,...Pe){const{delegate:Ge}=p;return Ge?.setInterval?Ge.setInterval(xe,Fe,...Pe):setInterval(xe,Fe,...Pe)},clearInterval(xe){const{delegate:Fe}=p;return(Fe?.clearInterval||clearInterval)(xe)},delegate:void 0};var De=V(8737);class Me extends Z{constructor(Fe,Pe){super(Fe,Pe),this.scheduler=Fe,this.work=Pe,this.pending=!1}schedule(Fe,Pe=0){var Ge;if(this.closed)return this;this.state=Fe;const be=this.id,Ee=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(Ee,be,Pe)),this.pending=!0,this.delay=Pe,this.id=null!==(Ge=this.id)&&void 0!==Ge?Ge:this.requestAsyncId(Ee,this.id,Pe),this}requestAsyncId(Fe,Pe,Ge=0){return p.setInterval(Fe.flush.bind(Fe,this),Ge)}recycleAsyncId(Fe,Pe,Ge=0){if(null!=Ge&&this.delay===Ge&&!1===this.pending)return Pe;null!=Pe&&p.clearInterval(Pe)}execute(Fe,Pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ge=this._execute(Fe,Pe);if(Ge)return Ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Fe,Pe){let be,Ge=!1;try{this.work(Fe)}catch(Ee){Ge=!0,be=Ee||new Error("Scheduled action threw falsy error")}if(Ge)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:Fe,scheduler:Pe}=this,{actions:Ge}=Pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,De.P)(Ge,this),null!=Fe&&(this.id=this.recycleAsyncId(Pe,Fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Yt,Ke,V)=>{V.d(Ke,{v:()=>p});var b=V(6063);class Z{constructor(Me,xe=Z.now){this.schedulerActionCtor=Me,this.now=xe}schedule(Me,xe=0,Fe){return new this.schedulerActionCtor(this,Me).schedule(Fe,xe)}}Z.now=b.l.now;class p extends Z{constructor(Me,xe=Z.now){super(Me,xe),this.actions=[],this._active=!1}flush(Me){const{actions:xe}=this;if(this._active)return void xe.push(Me);let Fe;this._active=!0;do{if(Fe=Me.execute(Me.state,Me.delay))break}while(Me=xe.shift());if(this._active=!1,Fe){for(;Me=xe.shift();)Me.unsubscribe();throw Fe}}}},4986:(Yt,Ke,V)=>{V.d(Ke,{P:()=>De,z:()=>p});var b=V(4408);const p=new(V(7565).v)(b.o),De=p},6063:(Yt,Ke,V)=>{V.d(Ke,{l:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},3410:(Yt,Ke,V)=>{V.d(Ke,{z:()=>b});const b={setTimeout(Z,p,...De){const{delegate:Me}=b;return Me?.setTimeout?Me.setTimeout(Z,p,...De):setTimeout(Z,p,...De)},clearTimeout(Z){const{delegate:p}=b;return(p?.clearTimeout||clearTimeout)(Z)},delegate:void 0}},2202:(Yt,Ke,V)=>{V.d(Ke,{h:()=>Z});const Z=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Yt,Ke,V)=>{V.d(Ke,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Yt,Ke,V)=>{V.d(Ke,{K:()=>Z});const Z=(0,V(3888).d)(p=>function(){p(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Yt,Ke,V)=>{V.d(Ke,{_6:()=>xe,jO:()=>De,yG:()=>Me});var b=V(576),Z=V(3532);function p(Fe){return Fe[Fe.length-1]}function De(Fe){return(0,b.m)(p(Fe))?Fe.pop():void 0}function Me(Fe){return(0,Z.K)(p(Fe))?Fe.pop():void 0}function xe(Fe,Pe){return"number"==typeof p(Fe)?Fe.pop():Pe}},4742:(Yt,Ke,V)=>{V.d(Ke,{D:()=>Me});const{isArray:b}=Array,{getPrototypeOf:Z,prototype:p,keys:De}=Object;function Me(Fe){if(1===Fe.length){const Pe=Fe[0];if(b(Pe))return{args:Pe,keys:null};if(function xe(Fe){return Fe&&"object"==typeof Fe&&Z(Fe)===p}(Pe)){const Ge=De(Pe);return{args:Ge.map(be=>Pe[be]),keys:Ge}}}return{args:Fe,keys:null}}},8737:(Yt,Ke,V)=>{function b(Z,p){if(Z){const De=Z.indexOf(p);0<=De&&Z.splice(De,1)}}V.d(Ke,{P:()=>b})},3888:(Yt,Ke,V)=>{function b(Z){const De=Z(Me=>{Error.call(Me),Me.stack=(new Error).stack});return De.prototype=Object.create(Error.prototype),De.prototype.constructor=De,De}V.d(Ke,{d:()=>b})},1810:(Yt,Ke,V)=>{function b(Z,p){return Z.reduce((De,Me,xe)=>(De[Me]=p[xe],De),{})}V.d(Ke,{n:()=>b})},2806:(Yt,Ke,V)=>{V.d(Ke,{O:()=>De,x:()=>p});var b=V(2416);let Z=null;function p(Me){if(b.v.useDeprecatedSynchronousErrorHandling){const xe=!Z;if(xe&&(Z={errorThrown:!1,error:null}),Me(),xe){const{errorThrown:Fe,error:Pe}=Z;if(Z=null,Fe)throw Pe}}else Me()}function De(Me){b.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=Me)}},9672:(Yt,Ke,V)=>{function b(Z,p,De,Me=0,xe=!1){const Fe=p.schedule(function(){De(),xe?Z.add(this.schedule(null,Me)):this.unsubscribe()},Me);if(Z.add(Fe),!xe)return Fe}V.d(Ke,{f:()=>b})},4671:(Yt,Ke,V)=>{function b(Z){return Z}V.d(Ke,{y:()=>b})},1144:(Yt,Ke,V)=>{V.d(Ke,{z:()=>b});const b=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(Yt,Ke,V)=>{V.d(Ke,{D:()=>Z});var b=V(576);function Z(p){return Symbol.asyncIterator&&(0,b.m)(p?.[Symbol.asyncIterator])}},576:(Yt,Ke,V)=>{function b(Z){return"function"==typeof Z}V.d(Ke,{m:()=>b})},3670:(Yt,Ke,V)=>{V.d(Ke,{c:()=>p});var b=V(8822),Z=V(576);function p(De){return(0,Z.m)(De[b.L])}},6495:(Yt,Ke,V)=>{V.d(Ke,{T:()=>p});var b=V(2202),Z=V(576);function p(De){return(0,Z.m)(De?.[b.h])}},8239:(Yt,Ke,V)=>{V.d(Ke,{t:()=>Z});var b=V(576);function Z(p){return(0,b.m)(p?.then)}},3260:(Yt,Ke,V)=>{V.d(Ke,{L:()=>De,Q:()=>p});var b=V(655),Z=V(576);function p(Me){return(0,b.FC)(this,arguments,function*(){const Fe=Me.getReader();try{for(;;){const{value:Pe,done:Ge}=yield(0,b.qq)(Fe.read());if(Ge)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(Pe)}}finally{Fe.releaseLock()}})}function De(Me){return(0,Z.m)(Me?.getReader)}},3532:(Yt,Ke,V)=>{V.d(Ke,{K:()=>Z});var b=V(576);function Z(p){return p&&(0,b.m)(p.schedule)}},4482:(Yt,Ke,V)=>{V.d(Ke,{A:()=>Z,e:()=>p});var b=V(576);function Z(De){return(0,b.m)(De?.lift)}function p(De){return Me=>{if(Z(Me))return Me.lift(function(xe){try{return De(xe,this)}catch(Fe){this.error(Fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Yt,Ke,V)=>{V.d(Ke,{Z:()=>De});var b=V(4004);const{isArray:Z}=Array;function De(Me){return(0,b.U)(xe=>function p(Me,xe){return Z(xe)?Me(...xe):Me(xe)}(Me,xe))}},5032:(Yt,Ke,V)=>{function b(){}V.d(Ke,{Z:()=>b})},9635:(Yt,Ke,V)=>{V.d(Ke,{U:()=>p,z:()=>Z});var b=V(4671);function Z(...De){return p(De)}function p(De){return 0===De.length?b.y:1===De.length?De[0]:function(xe){return De.reduce((Fe,Pe)=>Pe(Fe),xe)}}},7849:(Yt,Ke,V)=>{V.d(Ke,{h:()=>p});var b=V(2416),Z=V(3410);function p(De){Z.z.setTimeout(()=>{const{onUnhandledError:Me}=b.v;if(!Me)throw De;Me(De)})}},4532:(Yt,Ke,V)=>{function b(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ke,{z:()=>b})},655:(Yt,Ke,V)=>{function De(We,st){var $e={};for(var at in We)Object.prototype.hasOwnProperty.call(We,at)&&st.indexOf(at)<0&&($e[at]=We[at]);if(null!=We&&"function"==typeof Object.getOwnPropertySymbols){var wt=0;for(at=Object.getOwnPropertySymbols(We);wt<at.length;wt++)st.indexOf(at[wt])<0&&Object.prototype.propertyIsEnumerable.call(We,at[wt])&&($e[at[wt]]=We[at[wt]])}return $e}function Re(We,st,$e,at){return new($e||($e=Promise))(function(dt,Rt){function Mt(Xt){try{Kt(at.next(Xt))}catch(ft){Rt(ft)}}function cn(Xt){try{Kt(at.throw(Xt))}catch(ft){Rt(ft)}}function Kt(Xt){Xt.done?dt(Xt.value):function wt(dt){return dt instanceof $e?dt:new $e(function(Rt){Rt(dt)})}(Xt.value).then(Mt,cn)}Kt((at=at.apply(We,st||[])).next())})}function gt(We){return this instanceof gt?(this.v=We,this):new gt(We)}function rt(We,st,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var wt,at=$e.apply(We,st||[]),dt=[];return wt={},Rt("next"),Rt("throw"),Rt("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function Rt(bn){at[bn]&&(wt[bn]=function(xn){return new Promise(function(Gn,Ln){dt.push([bn,xn,Gn,Ln])>1||Mt(bn,xn)})})}function Mt(bn,xn){try{!function cn(bn){bn.value instanceof gt?Promise.resolve(bn.value.v).then(Kt,Xt):ft(dt[0][2],bn)}(at[bn](xn))}catch(Gn){ft(dt[0][3],Gn)}}function Kt(bn){Mt("next",bn)}function Xt(bn){Mt("throw",bn)}function ft(bn,xn){bn(xn),dt.shift(),dt.length&&Mt(dt[0][0],dt[0][1])}}function xt(We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,st=We[Symbol.asyncIterator];return st?st.call(We):(We=function Nt(We){var st="function"==typeof Symbol&&Symbol.iterator,$e=st&&We[st],at=0;if($e)return $e.call(We);if(We&&"number"==typeof We.length)return{next:function(){return We&&at>=We.length&&(We=void 0),{value:We&&We[at++],done:!We}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}(We),$e={},at("next"),at("throw"),at("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function at(dt){$e[dt]=We[dt]&&function(Rt){return new Promise(function(Mt,cn){!function wt(dt,Rt,Mt,cn){Promise.resolve(cn).then(function(Kt){dt({value:Kt,done:Mt})},Rt)}(Mt,cn,(Rt=We[dt](Rt)).done,Rt.value)})}}}V.d(Ke,{FC:()=>rt,KL:()=>xt,_T:()=>De,mG:()=>Re,qq:()=>gt})},6895:(Yt,Ke,V)=>{V.d(Ke,{Do:()=>Ie,EM:()=>Ds,HT:()=>De,JF:()=>ka,K0:()=>xe,Mn:()=>at,Mx:()=>Ki,NF:()=>Bo,O5:()=>ri,PM:()=>Qa,S$:()=>Nt,Tn:()=>bt,UT:()=>wt,V_:()=>Ge,Ye:()=>Et,Zx:()=>wo,ax:()=>yr,b0:()=>ut,bD:()=>Yi,ez:()=>fa,mk:()=>qt,ol:()=>$e,p6:()=>Hn,q:()=>p,sg:()=>yr,tP:()=>Es,w_:()=>Me,x:()=>ct});var b=V(4650);let Z=null;function p(){return Z}function De(k){Z||(Z=k)}class Me{}const xe=new b.OlP("DocumentToken");let Fe=(()=>{class k{historyGo(B){throw new Error("Not implemented")}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275prov=b.Yz7({token:k,factory:function(){return function Pe(){return(0,b.LFG)(be)}()},providedIn:"platform"}),k})();const Ge=new b.OlP("Location Initialized");let be=(()=>{class k extends Fe{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return p().getBaseHref(this._doc)}onPopState(B){const re=p().getGlobalEventTarget(this._doc,"window");return re.addEventListener("popstate",B,!1),()=>re.removeEventListener("popstate",B)}onHashChange(B){const re=p().getGlobalEventTarget(this._doc,"window");return re.addEventListener("hashchange",B,!1),()=>re.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,re,ve){Ee()?this._history.pushState(B,re,ve):this._location.hash=ve}replaceState(B,re,ve){Ee()?this._history.replaceState(B,re,ve):this._location.hash=ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return k.\u0275fac=function(B){return new(B||k)(b.LFG(xe))},k.\u0275prov=b.Yz7({token:k,factory:function(){return function Re(){return new be((0,b.LFG)(xe))}()},providedIn:"platform"}),k})();function Ee(){return!!window.history.pushState}function yt(k,K){if(0==k.length)return K;if(0==K.length)return k;let B=0;return k.endsWith("/")&&B++,K.startsWith("/")&&B++,2==B?k+K.substring(1):1==B?k+K:k+"/"+K}function He(k){const K=k.match(/#|\?|$/),B=K&&K.index||k.length;return k.slice(0,B-("/"===k[B-1]?1:0))+k.slice(B)}function pt(k){return k&&"?"!==k[0]?"?"+k:k}let Nt=(()=>{class k{historyGo(B){throw new Error("Not implemented")}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275prov=b.Yz7({token:k,factory:function(){return(0,b.f3M)(ut)},providedIn:"root"}),k})();const Qe=new b.OlP("appBaseHref");let ut=(()=>{class k extends Nt{constructor(B,re){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=re??this._platformLocation.getBaseHrefFromDOM()??(0,b.f3M)(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return yt(this._baseHref,B)}path(B=!1){const re=this._platformLocation.pathname+pt(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&B?`${re}${ve}`:re}pushState(B,re,ve,Je){const St=this.prepareExternalUrl(ve+pt(Je));this._platformLocation.pushState(B,re,St)}replaceState(B,re,ve,Je){const St=this.prepareExternalUrl(ve+pt(Je));this._platformLocation.replaceState(B,re,St)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return k.\u0275fac=function(B){return new(B||k)(b.LFG(Fe),b.LFG(Qe,8))},k.\u0275prov=b.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),Ie=(()=>{class k extends Nt{constructor(B,re){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=re&&(this._baseHref=re)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let re=this._platformLocation.hash;return null==re&&(re="#"),re.length>0?re.substring(1):re}prepareExternalUrl(B){const re=yt(this._baseHref,B);return re.length>0?"#"+re:re}pushState(B,re,ve,Je){let St=this.prepareExternalUrl(ve+pt(Je));0==St.length&&(St=this._platformLocation.pathname),this._platformLocation.pushState(B,re,St)}replaceState(B,re,ve,Je){let St=this.prepareExternalUrl(ve+pt(Je));0==St.length&&(St=this._platformLocation.pathname),this._platformLocation.replaceState(B,re,St)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return k.\u0275fac=function(B){return new(B||k)(b.LFG(Fe),b.LFG(Qe,8))},k.\u0275prov=b.Yz7({token:k,factory:k.\u0275fac}),k})(),Et=(()=>{class k{constructor(B){this._subject=new b.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const re=this._locationStrategy.getBaseHref();this._basePath=function xt(k){if(new RegExp("^(https?:)?//").test(k)){const[,B]=k.split(/\/\/[^\/]+/);return B}return k}(He(Ye(re))),this._locationStrategy.onPopState(ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:ve.state,type:ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,re=""){return this.path()==this.normalize(B+pt(re))}normalize(B){return k.stripTrailingSlash(function rt(k,K){if(!k||!K.startsWith(k))return K;const B=K.substring(k.length);return""===B||["/",";","?","#"].includes(B[0])?B:K}(this._basePath,Ye(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,re="",ve=null){this._locationStrategy.pushState(ve,"",B,re),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+pt(re)),ve)}replaceState(B,re="",ve=null){this._locationStrategy.replaceState(ve,"",B,re),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+pt(re)),ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(re=>{this._notifyUrlChangeListeners(re.url,re.state)})),()=>{const re=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(re,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",re){this._urlChangeListeners.forEach(ve=>ve(B,re))}subscribe(B,re,ve){return this._subject.subscribe({next:B,error:re,complete:ve})}}return k.normalizeQueryParams=pt,k.joinWithSlash=yt,k.stripTrailingSlash=He,k.\u0275fac=function(B){return new(B||k)(b.LFG(Nt))},k.\u0275prov=b.Yz7({token:k,factory:function(){return function gt(){return new Et((0,b.LFG)(Nt))}()},providedIn:"root"}),k})();function Ye(k){return k.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Percent=1]="Percent",fe[fe.Currency=2]="Currency",fe[fe.Scientific=3]="Scientific",fe))(),ct=(()=>((ct=ct||{})[ct.Format=0]="Format",ct[ct.Standalone=1]="Standalone",ct))(),bt=(()=>((bt=bt||{})[bt.Narrow=0]="Narrow",bt[bt.Abbreviated=1]="Abbreviated",bt[bt.Wide=2]="Wide",bt[bt.Short=3]="Short",bt))(),Jt=(()=>((Jt=Jt||{})[Jt.Short=0]="Short",Jt[Jt.Medium=1]="Medium",Jt[Jt.Long=2]="Long",Jt[Jt.Full=3]="Full",Jt))(),Pt=(()=>((Pt=Pt||{})[Pt.Decimal=0]="Decimal",Pt[Pt.Group=1]="Group",Pt[Pt.List=2]="List",Pt[Pt.PercentSign=3]="PercentSign",Pt[Pt.PlusSign=4]="PlusSign",Pt[Pt.MinusSign=5]="MinusSign",Pt[Pt.Exponential=6]="Exponential",Pt[Pt.SuperscriptingExponent=7]="SuperscriptingExponent",Pt[Pt.PerMille=8]="PerMille",Pt[Pt.Infinity=9]="Infinity",Pt[Pt.NaN=10]="NaN",Pt[Pt.TimeSeparator=11]="TimeSeparator",Pt[Pt.CurrencyDecimal=12]="CurrencyDecimal",Pt[Pt.CurrencyGroup=13]="CurrencyGroup",Pt))();function $e(k,K,B){const re=(0,b.cg1)(k),Je=en([re[b.wAp.DayPeriodsFormat],re[b.wAp.DayPeriodsStandalone]],K);return en(Je,B)}function at(k,K,B){const re=(0,b.cg1)(k),Je=en([re[b.wAp.DaysFormat],re[b.wAp.DaysStandalone]],K);return en(Je,B)}function wt(k,K,B){const re=(0,b.cg1)(k),Je=en([re[b.wAp.MonthsFormat],re[b.wAp.MonthsStandalone]],K);return en(Je,B)}function cn(k,K){return en((0,b.cg1)(k)[b.wAp.DateFormat],K)}function Kt(k,K){return en((0,b.cg1)(k)[b.wAp.TimeFormat],K)}function Xt(k,K){return en((0,b.cg1)(k)[b.wAp.DateTimeFormat],K)}function ft(k,K){const B=(0,b.cg1)(k),re=B[b.wAp.NumberSymbols][K];if(typeof re>"u"){if(K===Pt.CurrencyDecimal)return B[b.wAp.NumberSymbols][Pt.Decimal];if(K===Pt.CurrencyGroup)return B[b.wAp.NumberSymbols][Pt.Group]}return re}function Ar(k){if(!k[b.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${k[b.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function en(k,K){for(let B=K;B>-1;B--)if(typeof k[B]<"u")return k[B];throw new Error("Locale data API: locale data undefined")}function Dn(k){const[K,B]=k.split(":");return{hours:+K,minutes:+B}}const wr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,xr={},qr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var mn=(()=>((mn=mn||{})[mn.Short=0]="Short",mn[mn.ShortGMT=1]="ShortGMT",mn[mn.Long=2]="Long",mn[mn.Extended=3]="Extended",mn))(),on=(()=>((on=on||{})[on.FullYear=0]="FullYear",on[on.Month=1]="Month",on[on.Date=2]="Date",on[on.Hours=3]="Hours",on[on.Minutes=4]="Minutes",on[on.Seconds=5]="Seconds",on[on.FractionalSeconds=6]="FractionalSeconds",on[on.Day=7]="Day",on))(),$t=(()=>(($t=$t||{})[$t.DayPeriods=0]="DayPeriods",$t[$t.Days=1]="Days",$t[$t.Months=2]="Months",$t[$t.Eras=3]="Eras",$t))();function Hn(k,K,B,re){let ve=function Q(k){if(ce(k))return k;if("number"==typeof k&&!isNaN(k))return new Date(k);if("string"==typeof k){if(k=k.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(k)){const[ve,Je=1,St=1]=k.split("-").map(fn=>+fn);return Kn(ve,Je-1,St)}const B=parseFloat(k);if(!isNaN(k-B))return new Date(B);let re;if(re=k.match(wr))return function Le(k){const K=new Date(0);let B=0,re=0;const ve=k[8]?K.setUTCFullYear:K.setFullYear,Je=k[8]?K.setUTCHours:K.setHours;k[9]&&(B=Number(k[9]+k[10]),re=Number(k[9]+k[11])),ve.call(K,Number(k[1]),Number(k[2])-1,Number(k[3]));const St=Number(k[4]||0)-B,fn=Number(k[5]||0)-re,vr=Number(k[6]||0),Dt=Math.floor(1e3*parseFloat("0."+(k[7]||0)));return Je.call(K,St,fn,vr,Dt),K}(re)}const K=new Date(k);if(!ce(K))throw new Error(`Unable to convert "${k}" into a date`);return K}(k);K=un(B,K)||K;let fn,St=[];for(;K;){if(fn=qr.exec(K),!fn){St.push(K);break}{St=St.concat(fn.slice(1));const Cn=St.pop();if(!Cn)break;K=Cn}}let vr=ve.getTimezoneOffset();re&&(vr=pe(re,vr),ve=function ie(k,K,B){const re=B?-1:1,ve=k.getTimezoneOffset();return function ne(k,K){return(k=new Date(k.getTime())).setMinutes(k.getMinutes()+K),k}(k,re*(pe(K,ve)-ve))}(ve,re,!0));let Dt="";return St.forEach(Cn=>{const zn=function ge(k){if(mt[k])return mt[k];let K;switch(k){case"G":case"GG":case"GGG":K=Pn($t.Eras,bt.Abbreviated);break;case"GGGG":K=Pn($t.Eras,bt.Wide);break;case"GGGGG":K=Pn($t.Eras,bt.Narrow);break;case"y":K=Nn(on.FullYear,1,0,!1,!0);break;case"yy":K=Nn(on.FullYear,2,0,!0,!0);break;case"yyy":K=Nn(on.FullYear,3,0,!1,!0);break;case"yyyy":K=Nn(on.FullYear,4,0,!1,!0);break;case"Y":K=ht(1);break;case"YY":K=ht(2,!0);break;case"YYY":K=ht(3);break;case"YYYY":K=ht(4);break;case"M":case"L":K=Nn(on.Month,1,1);break;case"MM":case"LL":K=Nn(on.Month,2,1);break;case"MMM":K=Pn($t.Months,bt.Abbreviated);break;case"MMMM":K=Pn($t.Months,bt.Wide);break;case"MMMMM":K=Pn($t.Months,bt.Narrow);break;case"LLL":K=Pn($t.Months,bt.Abbreviated,ct.Standalone);break;case"LLLL":K=Pn($t.Months,bt.Wide,ct.Standalone);break;case"LLLLL":K=Pn($t.Months,bt.Narrow,ct.Standalone);break;case"w":K=Ce(1);break;case"ww":K=Ce(2);break;case"W":K=Ce(1,!0);break;case"d":K=Nn(on.Date,1);break;case"dd":K=Nn(on.Date,2);break;case"c":case"cc":K=Nn(on.Day,1);break;case"ccc":K=Pn($t.Days,bt.Abbreviated,ct.Standalone);break;case"cccc":K=Pn($t.Days,bt.Wide,ct.Standalone);break;case"ccccc":K=Pn($t.Days,bt.Narrow,ct.Standalone);break;case"cccccc":K=Pn($t.Days,bt.Short,ct.Standalone);break;case"E":case"EE":case"EEE":K=Pn($t.Days,bt.Abbreviated);break;case"EEEE":K=Pn($t.Days,bt.Wide);break;case"EEEEE":K=Pn($t.Days,bt.Narrow);break;case"EEEEEE":K=Pn($t.Days,bt.Short);break;case"a":case"aa":case"aaa":K=Pn($t.DayPeriods,bt.Abbreviated);break;case"aaaa":K=Pn($t.DayPeriods,bt.Wide);break;case"aaaaa":K=Pn($t.DayPeriods,bt.Narrow);break;case"b":case"bb":case"bbb":K=Pn($t.DayPeriods,bt.Abbreviated,ct.Standalone,!0);break;case"bbbb":K=Pn($t.DayPeriods,bt.Wide,ct.Standalone,!0);break;case"bbbbb":K=Pn($t.DayPeriods,bt.Narrow,ct.Standalone,!0);break;case"B":case"BB":case"BBB":K=Pn($t.DayPeriods,bt.Abbreviated,ct.Format,!0);break;case"BBBB":K=Pn($t.DayPeriods,bt.Wide,ct.Format,!0);break;case"BBBBB":K=Pn($t.DayPeriods,bt.Narrow,ct.Format,!0);break;case"h":K=Nn(on.Hours,1,-12);break;case"hh":K=Nn(on.Hours,2,-12);break;case"H":K=Nn(on.Hours,1);break;case"HH":K=Nn(on.Hours,2);break;case"m":K=Nn(on.Minutes,1);break;case"mm":K=Nn(on.Minutes,2);break;case"s":K=Nn(on.Seconds,1);break;case"ss":K=Nn(on.Seconds,2);break;case"S":K=Nn(on.FractionalSeconds,1);break;case"SS":K=Nn(on.FractionalSeconds,2);break;case"SSS":K=Nn(on.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":K=rr(mn.Short);break;case"ZZZZZ":K=rr(mn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":K=rr(mn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":K=rr(mn.Long);break;default:return null}return mt[k]=K,K}(Cn);Dt+=zn?zn(ve,B,vr):"''"===Cn?"'":Cn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Dt}function Kn(k,K,B){const re=new Date(0);return re.setFullYear(k,K,B),re.setHours(0,0,0),re}function un(k,K){const B=function st(k){return(0,b.cg1)(k)[b.wAp.LocaleId]}(k);if(xr[B]=xr[B]||{},xr[B][K])return xr[B][K];let re="";switch(K){case"shortDate":re=cn(k,Jt.Short);break;case"mediumDate":re=cn(k,Jt.Medium);break;case"longDate":re=cn(k,Jt.Long);break;case"fullDate":re=cn(k,Jt.Full);break;case"shortTime":re=Kt(k,Jt.Short);break;case"mediumTime":re=Kt(k,Jt.Medium);break;case"longTime":re=Kt(k,Jt.Long);break;case"fullTime":re=Kt(k,Jt.Full);break;case"short":const ve=un(k,"shortTime"),Je=un(k,"shortDate");re=In(Xt(k,Jt.Short),[ve,Je]);break;case"medium":const St=un(k,"mediumTime"),fn=un(k,"mediumDate");re=In(Xt(k,Jt.Medium),[St,fn]);break;case"long":const vr=un(k,"longTime"),Dt=un(k,"longDate");re=In(Xt(k,Jt.Long),[vr,Dt]);break;case"full":const Cn=un(k,"fullTime"),zn=un(k,"fullDate");re=In(Xt(k,Jt.Full),[Cn,zn])}return re&&(xr[B][K]=re),re}function In(k,K){return K&&(k=k.replace(/\{([^}]+)}/g,function(B,re){return null!=K&&re in K?K[re]:B})),k}function or(k,K,B="-",re,ve){let Je="";(k<0||ve&&k<=0)&&(ve?k=1-k:(k=-k,Je=B));let St=String(k);for(;St.length<K;)St="0"+St;return re&&(St=St.slice(St.length-K)),Je+St}function Nn(k,K,B=0,re=!1,ve=!1){return function(Je,St){let fn=function Dr(k,K){switch(k){case on.FullYear:return K.getFullYear();case on.Month:return K.getMonth();case on.Date:return K.getDate();case on.Hours:return K.getHours();case on.Minutes:return K.getMinutes();case on.Seconds:return K.getSeconds();case on.FractionalSeconds:return K.getMilliseconds();case on.Day:return K.getDay();default:throw new Error(`Unknown DateType value "${k}".`)}}(k,Je);if((B>0||fn>-B)&&(fn+=B),k===on.Hours)0===fn&&-12===B&&(fn=12);else if(k===on.FractionalSeconds)return function Pr(k,K){return or(k,3).substring(0,K)}(fn,K);const vr=ft(St,Pt.MinusSign);return or(fn,K,vr,re,ve)}}function Pn(k,K,B=ct.Format,re=!1){return function(ve,Je){return function Ci(k,K,B,re,ve,Je){switch(B){case $t.Months:return wt(K,ve,re)[k.getMonth()];case $t.Days:return at(K,ve,re)[k.getDay()];case $t.DayPeriods:const St=k.getHours(),fn=k.getMinutes();if(Je){const Dt=function Vn(k){const K=(0,b.cg1)(k);return Ar(K),(K[b.wAp.ExtraData][2]||[]).map(re=>"string"==typeof re?Dn(re):[Dn(re[0]),Dn(re[1])])}(K),Cn=function _r(k,K,B){const re=(0,b.cg1)(k);Ar(re);const Je=en([re[b.wAp.ExtraData][0],re[b.wAp.ExtraData][1]],K)||[];return en(Je,B)||[]}(K,ve,re),zn=Dt.findIndex(qn=>{if(Array.isArray(qn)){const[jt,Zt]=qn,zo=St>=jt.hours&&fn>=jt.minutes,zt=St<Zt.hours||St===Zt.hours&&fn<Zt.minutes;if(jt.hours<Zt.hours){if(zo&&zt)return!0}else if(zo||zt)return!0}else if(qn.hours===St&&qn.minutes===fn)return!0;return!1});if(-1!==zn)return Cn[zn]}return $e(K,ve,re)[St<12?0:1];case $t.Eras:return function dt(k,K){return en((0,b.cg1)(k)[b.wAp.Eras],K)}(K,re)[k.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${B}`)}}(ve,Je,k,K,B,re)}}function rr(k){return function(K,B,re){const ve=-1*re,Je=ft(B,Pt.MinusSign),St=ve>0?Math.floor(ve/60):Math.ceil(ve/60);switch(k){case mn.Short:return(ve>=0?"+":"")+or(St,2,Je)+or(Math.abs(ve%60),2,Je);case mn.ShortGMT:return"GMT"+(ve>=0?"+":"")+or(St,1,Je);case mn.Long:return"GMT"+(ve>=0?"+":"")+or(St,2,Je)+":"+or(Math.abs(ve%60),2,Je);case mn.Extended:return 0===re?"Z":(ve>=0?"+":"")+or(St,2,Je)+":"+or(Math.abs(ve%60),2,Je);default:throw new Error(`Unknown zone width "${k}"`)}}}const Lt=0,It=4;function ye(k){return Kn(k.getFullYear(),k.getMonth(),k.getDate()+(It-k.getDay()))}function Ce(k,K=!1){return function(B,re){let ve;if(K){const Je=new Date(B.getFullYear(),B.getMonth(),1).getDay()-1,St=B.getDate();ve=1+Math.floor((St+Je)/7)}else{const Je=ye(B),St=function Ue(k){const K=Kn(k,Lt,1).getDay();return Kn(k,0,1+(K<=It?It:It+7)-K)}(Je.getFullYear()),fn=Je.getTime()-St.getTime();ve=1+Math.round(fn/6048e5)}return or(ve,k,ft(re,Pt.MinusSign))}}function ht(k,K=!1){return function(B,re){return or(ye(B).getFullYear(),k,ft(re,Pt.MinusSign),K)}}const mt={};function pe(k,K){k=k.replace(/:/g,"");const B=Date.parse("Jan 01, 1970 00:00:00 "+k)/6e4;return isNaN(B)?K:B}function ce(k){return k instanceof Date&&!isNaN(k.valueOf())}const me=/^(\d+)?\.((\d+)(-(\d+))?)?$/,le=22,Oe=".",Ze="0",vt=";",Qt=",",Ht="#";function Xr(k){const K=parseInt(k);if(isNaN(K))throw new Error("Invalid integer literal when parsing "+k);return K}function Ki(k,K){K=encodeURIComponent(K);for(const B of k.split(";")){const re=B.indexOf("="),[ve,Je]=-1==re?[B,""]:[B.slice(0,re),B.slice(re+1)];if(ve.trim()===K)return decodeURIComponent(Je)}return null}const ni=/\s+/,mi=[];let qt=(()=>{class k{constructor(B,re,ve,Je){this._iterableDiffers=B,this._keyValueDiffers=re,this._ngEl=ve,this._renderer=Je,this.initialClasses=mi,this.stateMap=new Map}set klass(B){this.initialClasses=null!=B?B.trim().split(ni):mi}set ngClass(B){this.rawClass="string"==typeof B?B.trim().split(ni):B}ngDoCheck(){for(const re of this.initialClasses)this._updateState(re,!0);const B=this.rawClass;if(Array.isArray(B)||B instanceof Set)for(const re of B)this._updateState(re,!0);else if(null!=B)for(const re of Object.keys(B))this._updateState(re,Boolean(B[re]));this._applyStateDiff()}_updateState(B,re){const ve=this.stateMap.get(B);void 0!==ve?(ve.enabled!==re&&(ve.changed=!0,ve.enabled=re),ve.touched=!0):this.stateMap.set(B,{enabled:re,changed:!0,touched:!0})}_applyStateDiff(){for(const B of this.stateMap){const re=B[0],ve=B[1];ve.changed?(this._toggleClass(re,ve.enabled),ve.changed=!1):ve.touched||(ve.enabled&&this._toggleClass(re,!1),this.stateMap.delete(re)),ve.touched=!1}}_toggleClass(B,re){(B=B.trim()).length>0&&B.split(ni).forEach(ve=>{re?this._renderer.addClass(this._ngEl.nativeElement,ve):this._renderer.removeClass(this._ngEl.nativeElement,ve)})}}return k.\u0275fac=function(B){return new(B||k)(b.Y36(b.ZZ4),b.Y36(b.aQg),b.Y36(b.SBq),b.Y36(b.Qsj))},k.\u0275dir=b.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})();class Ui{constructor(K,B,re,ve){this.$implicit=K,this.ngForOf=B,this.index=re,this.count=ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yr=(()=>{class k{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,re,ve){this._viewContainer=B,this._template=re,this._differs=ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const re=this._viewContainer;B.forEachOperation((ve,Je,St)=>{if(null==ve.previousIndex)re.createEmbeddedView(this._template,new Ui(ve.item,this._ngForOf,-1,-1),null===St?void 0:St);else if(null==St)re.remove(null===Je?void 0:Je);else if(null!==Je){const fn=re.get(Je);re.move(fn,St),Ir(fn,ve)}});for(let ve=0,Je=re.length;ve<Je;ve++){const fn=re.get(ve).context;fn.index=ve,fn.count=Je,fn.ngForOf=this._ngForOf}B.forEachIdentityChange(ve=>{Ir(re.get(ve.currentIndex),ve)})}static ngTemplateContextGuard(B,re){return!0}}return k.\u0275fac=function(B){return new(B||k)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(b.ZZ4))},k.\u0275dir=b.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function Ir(k,K){k.context.$implicit=K.item}let ri=(()=>{class k{constructor(B,re){this._viewContainer=B,this._context=new ko,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=re}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){_n("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){_n("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,re){return!0}}return k.\u0275fac=function(B){return new(B||k)(b.Y36(b.s_b),b.Y36(b.Rgc))},k.\u0275dir=b.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class ko{constructor(){this.$implicit=null,this.ngIf=null}}function _n(k,K){if(K&&!K.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,b.AaK)(K)}'.`)}let Es=(()=>{class k{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const re=this._viewContainerRef;if(this._viewRef&&re.remove(re.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ve,ngTemplateOutletContext:Je,ngTemplateOutletInjector:St}=this;this._viewRef=re.createEmbeddedView(ve,Je,St?{injector:St}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return k.\u0275fac=function(B){return new(B||k)(b.Y36(b.s_b))},k.\u0275dir=b.lG2({type:k,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[b.TTD]}),k})();let wo=(()=>{class k{constructor(B){this._locale=B}transform(B,re,ve){if(!function Uo(k){return!(null==k||""===k||k!=k)}(B))return null;ve=ve||this._locale;try{return function qs(k,K,B){return function Ti(k,K,B,re,ve,Je,St=!1){let fn="",vr=!1;if(isFinite(k)){let Dt=function Ys(k){let re,ve,Je,St,fn,K=Math.abs(k)+"",B=0;for((ve=K.indexOf(Oe))>-1&&(K=K.replace(Oe,"")),(Je=K.search(/e/i))>0?(ve<0&&(ve=Je),ve+=+K.slice(Je+1),K=K.substring(0,Je)):ve<0&&(ve=K.length),Je=0;K.charAt(Je)===Ze;Je++);if(Je===(fn=K.length))re=[0],ve=1;else{for(fn--;K.charAt(fn)===Ze;)fn--;for(ve-=Je,re=[],St=0;Je<=fn;Je++,St++)re[St]=Number(K.charAt(Je))}return ve>le&&(re=re.splice(0,le-1),B=ve-1,ve=1),{digits:re,exponent:B,integerLen:ve}}(k);St&&(Dt=function Ps(k){if(0===k.digits[0])return k;const K=k.digits.length-k.integerLen;return k.exponent?k.exponent+=2:(0===K?k.digits.push(0,0):1===K&&k.digits.push(0),k.integerLen+=2),k}(Dt));let Cn=K.minInt,zn=K.minFrac,qn=K.maxFrac;if(Je){const Ot=Je.match(me);if(null===Ot)throw new Error(`${Je} is not a valid digit info`);const si=Ot[1],Co=Ot[3],sl=Ot[5];null!=si&&(Cn=Xr(si)),null!=Co&&(zn=Xr(Co)),null!=sl?qn=Xr(sl):null!=Co&&zn>qn&&(qn=zn)}!function $n(k,K,B){if(K>B)throw new Error(`The minimum number of digits after fraction (${K}) is higher than the maximum (${B}).`);let re=k.digits,ve=re.length-k.integerLen;const Je=Math.min(Math.max(K,ve),B);let St=Je+k.integerLen,fn=re[St];if(St>0){re.splice(Math.max(k.integerLen,St));for(let zn=St;zn<re.length;zn++)re[zn]=0}else{ve=Math.max(0,ve),k.integerLen=1,re.length=Math.max(1,St=Je+1),re[0]=0;for(let zn=1;zn<St;zn++)re[zn]=0}if(fn>=5)if(St-1<0){for(let zn=0;zn>St;zn--)re.unshift(0),k.integerLen++;re.unshift(1),k.integerLen++}else re[St-1]++;for(;ve<Math.max(0,Je);ve++)re.push(0);let vr=0!==Je;const Dt=K+k.integerLen,Cn=re.reduceRight(function(zn,qn,jt,Zt){return Zt[jt]=(qn+=zn)<10?qn:qn-10,vr&&(0===Zt[jt]&&jt>=Dt?Zt.pop():vr=!1),qn>=10?1:0},0);Cn&&(re.unshift(Cn),k.integerLen++)}(Dt,zn,qn);let jt=Dt.digits,Zt=Dt.integerLen;const zo=Dt.exponent;let zt=[];for(vr=jt.every(Ot=>!Ot);Zt<Cn;Zt++)jt.unshift(0);for(;Zt<0;Zt++)jt.unshift(0);Zt>0?zt=jt.splice(Zt,jt.length):(zt=jt,jt=[0]);const it=[];for(jt.length>=K.lgSize&&it.unshift(jt.splice(-K.lgSize,jt.length).join(""));jt.length>K.gSize;)it.unshift(jt.splice(-K.gSize,jt.length).join(""));jt.length&&it.unshift(jt.join("")),fn=it.join(ft(B,re)),zt.length&&(fn+=ft(B,ve)+zt.join("")),zo&&(fn+=ft(B,Pt.Exponential)+"+"+zo)}else fn=ft(B,Pt.Infinity);return fn=k<0&&!vr?K.negPre+fn+K.negSuf:K.posPre+fn+K.posSuf,fn}(k,function zi(k,K="-"){const B={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},re=k.split(vt),ve=re[0],Je=re[1],St=-1!==ve.indexOf(Oe)?ve.split(Oe):[ve.substring(0,ve.lastIndexOf(Ze)+1),ve.substring(ve.lastIndexOf(Ze)+1)],fn=St[0],vr=St[1]||"";B.posPre=fn.substring(0,fn.indexOf(Ht));for(let Cn=0;Cn<vr.length;Cn++){const zn=vr.charAt(Cn);zn===Ze?B.minFrac=B.maxFrac=Cn+1:zn===Ht?B.maxFrac=Cn+1:B.posSuf+=zn}const Dt=fn.split(Qt);if(B.gSize=Dt[1]?Dt[1].length:0,B.lgSize=Dt[2]||Dt[1]?(Dt[2]||Dt[1]).length:0,Je){const Cn=ve.length-B.posPre.length-B.posSuf.length,zn=Je.indexOf(Ht);B.negPre=Je.substring(0,zn).replace(/'/g,""),B.negSuf=Je.slice(zn+Cn).replace(/'/g,"")}else B.negPre=K+B.posPre,B.negSuf=B.posSuf;return B}(function bn(k,K){return(0,b.cg1)(k)[b.wAp.NumberFormats][K]}(K,fe.Percent),ft(K,Pt.MinusSign)),K,Pt.Group,Pt.Decimal,B,!0).replace(new RegExp("%","g"),ft(K,Pt.PercentSign))}(function Fs(k){if("string"==typeof k&&!isNaN(Number(k)-parseFloat(k)))return Number(k);if("number"!=typeof k)throw new Error(`${k} is not a number`);return k}(B),ve,re)}catch(Je){throw function Te(k,K){return new b.vHH(2100,!1)}()}}}return k.\u0275fac=function(B){return new(B||k)(b.Y36(b.soG,16))},k.\u0275pipe=b.Yjl({name:"percent",type:k,pure:!0,standalone:!0}),k})();let fa=(()=>{class k{}return k.\u0275fac=function(B){return new(B||k)},k.\u0275mod=b.oAB({type:k}),k.\u0275inj=b.cJS({}),k})();const Yi="browser",co="server";function Bo(k){return k===Yi}function Qa(k){return k===co}let Ds=(()=>{class k{}return k.\u0275prov=(0,b.Yz7)({token:k,providedIn:"root",factory:()=>new Qo((0,b.LFG)(xe),window)}),k})();class Qo{constructor(K,B){this.document=K,this.window=B,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const B=function Zi(k,K){const B=k.getElementById(K)||k.getElementsByName(K)[0];if(B)return B;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const re=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let ve=re.currentNode;for(;ve;){const Je=ve.shadowRoot;if(Je){const St=Je.getElementById(K)||Je.querySelector(`[name="${K}"]`);if(St)return St}ve=re.nextNode()}}return null}(this.document,K);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=K)}}scrollToElement(K){const B=K.getBoundingClientRect(),re=B.left+this.window.pageXOffset,ve=B.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(re-Je[0],ve-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Js(this.window.history)||Js(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Js(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class ka{}},529:(Yt,Ke,V)=>{V.d(Ke,{JF:()=>rr,eN:()=>st});var b=V(6895),Z=V(4650),p=V(9646),De=V(9751),Me=V(4351),xe=V(9300),Fe=V(4004);class Pe{}class Ge{}class be{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(Ce=>{const ht=Ce.indexOf(":");if(ht>0){const mt=Ce.slice(0,ht),ge=mt.toLowerCase(),pe=Ce.slice(ht+1).trim();this.maybeSetNormalizedName(mt,ge),this.headers.has(ge)?this.headers.get(ge).push(pe):this.headers.set(ge,[pe])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(Ce=>{let ht=ye[Ce];const mt=Ce.toLowerCase();"string"==typeof ht&&(ht=[ht]),ht.length>0&&(this.headers.set(mt,ht),this.maybeSetNormalizedName(Ce,mt))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const Ce=this.headers.get(ye.toLowerCase());return Ce&&Ce.length>0?Ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,Ce){return this.clone({name:ye,value:Ce,op:"a"})}set(ye,Ce){return this.clone({name:ye,value:Ce,op:"s"})}delete(ye,Ce){return this.clone({name:ye,value:Ce,op:"d"})}maybeSetNormalizedName(ye,Ce){this.normalizedNames.has(Ce)||this.normalizedNames.set(Ce,ye)}init(){this.lazyInit&&(this.lazyInit instanceof be?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(Ce=>{this.headers.set(Ce,ye.headers.get(Ce)),this.normalizedNames.set(Ce,ye.normalizedNames.get(Ce))})}clone(ye){const Ce=new be;return Ce.lazyInit=this.lazyInit&&this.lazyInit instanceof be?this.lazyInit:this,Ce.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),Ce}applyUpdate(ye){const Ce=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let ht=ye.value;if("string"==typeof ht&&(ht=[ht]),0===ht.length)return;this.maybeSetNormalizedName(ye.name,Ce);const mt=("a"===ye.op?this.headers.get(Ce):void 0)||[];mt.push(...ht),this.headers.set(Ce,mt);break;case"d":const ge=ye.value;if(ge){let pe=this.headers.get(Ce);if(!pe)return;pe=pe.filter(ne=>-1===ge.indexOf(ne)),0===pe.length?(this.headers.delete(Ce),this.normalizedNames.delete(Ce)):this.headers.set(Ce,pe)}else this.headers.delete(Ce),this.normalizedNames.delete(Ce)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ce=>ye(this.normalizedNames.get(Ce),this.headers.get(Ce)))}}class Re{encodeKey(ye){return Nt(ye)}encodeValue(ye){return Nt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const He=/%(\d[a-f0-9])/gi,pt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Nt(Ue){return encodeURIComponent(Ue).replace(He,(ye,Ce)=>pt[Ce]??ye)}function Qe(Ue){return`${Ue}`}class ut{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new Re,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yt(Ue,ye){const Ce=new Map;return Ue.length>0&&Ue.replace(/^\?/,"").split("&").forEach(mt=>{const ge=mt.indexOf("="),[pe,ne]=-1==ge?[ye.decodeKey(mt),""]:[ye.decodeKey(mt.slice(0,ge)),ye.decodeValue(mt.slice(ge+1))],ie=Ce.get(pe)||[];ie.push(ne),Ce.set(pe,ie)}),Ce}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(Ce=>{const ht=ye.fromObject[Ce],mt=Array.isArray(ht)?ht.map(Qe):[Qe(ht)];this.map.set(Ce,mt)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const Ce=this.map.get(ye);return Ce?Ce[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,Ce){return this.clone({param:ye,value:Ce,op:"a"})}appendAll(ye){const Ce=[];return Object.keys(ye).forEach(ht=>{const mt=ye[ht];Array.isArray(mt)?mt.forEach(ge=>{Ce.push({param:ht,value:ge,op:"a"})}):Ce.push({param:ht,value:mt,op:"a"})}),this.clone(Ce)}set(ye,Ce){return this.clone({param:ye,value:Ce,op:"s"})}delete(ye,Ce){return this.clone({param:ye,value:Ce,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const Ce=this.encoder.encodeKey(ye);return this.map.get(ye).map(ht=>Ce+"="+this.encoder.encodeValue(ht)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const Ce=new ut({encoder:this.encoder});return Ce.cloneFrom=this.cloneFrom||this,Ce.updates=(this.updates||[]).concat(ye),Ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const Ce=("a"===ye.op?this.map.get(ye.param):void 0)||[];Ce.push(Qe(ye.value)),this.map.set(ye.param,Ce);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let ht=this.map.get(ye.param)||[];const mt=ht.indexOf(Qe(ye.value));-1!==mt&&ht.splice(mt,1),ht.length>0?this.map.set(ye.param,ht):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Et{constructor(){this.map=new Map}set(ye,Ce){return this.map.set(ye,Ce),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function rt(Ue){return typeof ArrayBuffer<"u"&&Ue instanceof ArrayBuffer}function Ye(Ue){return typeof Blob<"u"&&Ue instanceof Blob}function xt(Ue){return typeof FormData<"u"&&Ue instanceof FormData}class fe{constructor(ye,Ce,ht,mt){let ge;if(this.url=Ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function gt(Ue){switch(Ue){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||mt?(this.body=void 0!==ht?ht:null,ge=mt):ge=ht,ge&&(this.reportProgress=!!ge.reportProgress,this.withCredentials=!!ge.withCredentials,ge.responseType&&(this.responseType=ge.responseType),ge.headers&&(this.headers=ge.headers),ge.context&&(this.context=ge.context),ge.params&&(this.params=ge.params)),this.headers||(this.headers=new be),this.context||(this.context=new Et),this.params){const pe=this.params.toString();if(0===pe.length)this.urlWithParams=Ce;else{const ne=Ce.indexOf("?");this.urlWithParams=Ce+(-1===ne?"?":ne<Ce.length-1?"&":"")+pe}}else this.params=new ut,this.urlWithParams=Ce}serializeBody(){return null===this.body?null:rt(this.body)||Ye(this.body)||xt(this.body)||function ke(Ue){return typeof URLSearchParams<"u"&&Ue instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ut?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xt(this.body)?null:Ye(this.body)?this.body.type||null:rt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ut?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const Ce=ye.method||this.method,ht=ye.url||this.url,mt=ye.responseType||this.responseType,ge=void 0!==ye.body?ye.body:this.body,pe=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,ne=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let ie=ye.headers||this.headers,Q=ye.params||this.params;const Le=ye.context??this.context;return void 0!==ye.setHeaders&&(ie=Object.keys(ye.setHeaders).reduce((ce,me)=>ce.set(me,ye.setHeaders[me]),ie)),ye.setParams&&(Q=Object.keys(ye.setParams).reduce((ce,me)=>ce.set(me,ye.setParams[me]),Q)),new fe(Ce,ht,ge,{params:Q,headers:ie,context:Le,reportProgress:ne,responseType:mt,withCredentials:pe})}}var qe=(()=>((qe=qe||{})[qe.Sent=0]="Sent",qe[qe.UploadProgress=1]="UploadProgress",qe[qe.ResponseHeader=2]="ResponseHeader",qe[qe.DownloadProgress=3]="DownloadProgress",qe[qe.Response=4]="Response",qe[qe.User=5]="User",qe))();class ct{constructor(ye,Ce=200,ht="OK"){this.headers=ye.headers||new be,this.status=void 0!==ye.status?ye.status:Ce,this.statusText=ye.statusText||ht,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class bt extends ct{constructor(ye={}){super(ye),this.type=qe.ResponseHeader}clone(ye={}){return new bt({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Jt extends ct{constructor(ye={}){super(ye),this.type=qe.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new Jt({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Pt extends ct{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function We(Ue,ye){return{body:ye,headers:Ue.headers,context:Ue.context,observe:Ue.observe,params:Ue.params,reportProgress:Ue.reportProgress,responseType:Ue.responseType,withCredentials:Ue.withCredentials}}let st=(()=>{class Ue{constructor(Ce){this.handler=Ce}request(Ce,ht,mt={}){let ge;if(Ce instanceof fe)ge=Ce;else{let ie,Q;ie=mt.headers instanceof be?mt.headers:new be(mt.headers),mt.params&&(Q=mt.params instanceof ut?mt.params:new ut({fromObject:mt.params})),ge=new fe(Ce,ht,void 0!==mt.body?mt.body:null,{headers:ie,context:mt.context,params:Q,reportProgress:mt.reportProgress,responseType:mt.responseType||"json",withCredentials:mt.withCredentials})}const pe=(0,p.of)(ge).pipe((0,Me.b)(ie=>this.handler.handle(ie)));if(Ce instanceof fe||"events"===mt.observe)return pe;const ne=pe.pipe((0,xe.h)(ie=>ie instanceof Jt));switch(mt.observe||"body"){case"body":switch(ge.responseType){case"arraybuffer":return ne.pipe((0,Fe.U)(ie=>{if(null!==ie.body&&!(ie.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ie.body}));case"blob":return ne.pipe((0,Fe.U)(ie=>{if(null!==ie.body&&!(ie.body instanceof Blob))throw new Error("Response is not a Blob.");return ie.body}));case"text":return ne.pipe((0,Fe.U)(ie=>{if(null!==ie.body&&"string"!=typeof ie.body)throw new Error("Response is not a string.");return ie.body}));default:return ne.pipe((0,Fe.U)(ie=>ie.body))}case"response":return ne;default:throw new Error(`Unreachable: unhandled observe type ${mt.observe}}`)}}delete(Ce,ht={}){return this.request("DELETE",Ce,ht)}get(Ce,ht={}){return this.request("GET",Ce,ht)}head(Ce,ht={}){return this.request("HEAD",Ce,ht)}jsonp(Ce,ht){return this.request("JSONP",Ce,{params:(new ut).append(ht,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ce,ht={}){return this.request("OPTIONS",Ce,ht)}patch(Ce,ht,mt={}){return this.request("PATCH",Ce,We(mt,ht))}post(Ce,ht,mt={}){return this.request("POST",Ce,We(mt,ht))}put(Ce,ht,mt={}){return this.request("PUT",Ce,We(mt,ht))}}return Ue.\u0275fac=function(Ce){return new(Ce||Ue)(Z.LFG(Pe))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();function $e(Ue,ye){return ye(Ue)}function at(Ue,ye){return(Ce,ht)=>ye.intercept(Ce,{handle:mt=>Ue(mt,ht)})}const dt=new Z.OlP("HTTP_INTERCEPTORS"),Rt=new Z.OlP("HTTP_INTERCEPTOR_FNS");function Mt(){let Ue=null;return(ye,Ce)=>(null===Ue&&(Ue=((0,Z.f3M)(dt,{optional:!0})??[]).reduceRight(at,$e)),Ue(ye,Ce))}let cn=(()=>{class Ue extends Pe{constructor(Ce,ht){super(),this.backend=Ce,this.injector=ht,this.chain=null}handle(Ce){if(null===this.chain){const ht=Array.from(new Set(this.injector.get(Rt)));this.chain=ht.reduceRight((mt,ge)=>function wt(Ue,ye,Ce){return(ht,mt)=>Ce.runInContext(()=>ye(ht,ge=>Ue(ge,mt)))}(mt,ge,this.injector),$e)}return this.chain(Ce,ht=>this.backend.handle(ht))}}return Ue.\u0275fac=function(Ce){return new(Ce||Ue)(Z.LFG(Ge),Z.LFG(Z.lqb))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const _r=/^\)\]\}',?\n/;let en=(()=>{class Ue{constructor(Ce){this.xhrFactory=Ce}handle(Ce){if("JSONP"===Ce.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new De.y(ht=>{const mt=this.xhrFactory.build();if(mt.open(Ce.method,Ce.urlWithParams),Ce.withCredentials&&(mt.withCredentials=!0),Ce.headers.forEach((le,Oe)=>mt.setRequestHeader(le,Oe.join(","))),Ce.headers.has("Accept")||mt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ce.headers.has("Content-Type")){const le=Ce.detectContentTypeHeader();null!==le&&mt.setRequestHeader("Content-Type",le)}if(Ce.responseType){const le=Ce.responseType.toLowerCase();mt.responseType="json"!==le?le:"text"}const ge=Ce.serializeBody();let pe=null;const ne=()=>{if(null!==pe)return pe;const le=mt.statusText||"OK",Oe=new be(mt.getAllResponseHeaders()),Ze=function Rr(Ue){return"responseURL"in Ue&&Ue.responseURL?Ue.responseURL:/^X-Request-URL:/m.test(Ue.getAllResponseHeaders())?Ue.getResponseHeader("X-Request-URL"):null}(mt)||Ce.url;return pe=new bt({headers:Oe,status:mt.status,statusText:le,url:Ze}),pe},ie=()=>{let{headers:le,status:Oe,statusText:Ze,url:vt}=ne(),Qt=null;204!==Oe&&(Qt=typeof mt.response>"u"?mt.responseText:mt.response),0===Oe&&(Oe=Qt?200:0);let Ht=Oe>=200&&Oe<300;if("json"===Ce.responseType&&"string"==typeof Qt){const vn=Qt;Qt=Qt.replace(_r,"");try{Qt=""!==Qt?JSON.parse(Qt):null}catch(gi){Qt=vn,Ht&&(Ht=!1,Qt={error:gi,text:Qt})}}Ht?(ht.next(new Jt({body:Qt,headers:le,status:Oe,statusText:Ze,url:vt||void 0})),ht.complete()):ht.error(new Pt({error:Qt,headers:le,status:Oe,statusText:Ze,url:vt||void 0}))},Q=le=>{const{url:Oe}=ne(),Ze=new Pt({error:le,status:mt.status||0,statusText:mt.statusText||"Unknown Error",url:Oe||void 0});ht.error(Ze)};let Le=!1;const ce=le=>{Le||(ht.next(ne()),Le=!0);let Oe={type:qe.DownloadProgress,loaded:le.loaded};le.lengthComputable&&(Oe.total=le.total),"text"===Ce.responseType&&mt.responseText&&(Oe.partialText=mt.responseText),ht.next(Oe)},me=le=>{let Oe={type:qe.UploadProgress,loaded:le.loaded};le.lengthComputable&&(Oe.total=le.total),ht.next(Oe)};return mt.addEventListener("load",ie),mt.addEventListener("error",Q),mt.addEventListener("timeout",Q),mt.addEventListener("abort",Q),Ce.reportProgress&&(mt.addEventListener("progress",ce),null!==ge&&mt.upload&&mt.upload.addEventListener("progress",me)),mt.send(ge),ht.next({type:qe.Sent}),()=>{mt.removeEventListener("error",Q),mt.removeEventListener("abort",Q),mt.removeEventListener("load",ie),mt.removeEventListener("timeout",Q),Ce.reportProgress&&(mt.removeEventListener("progress",ce),null!==ge&&mt.upload&&mt.upload.removeEventListener("progress",me)),mt.readyState!==mt.DONE&&mt.abort()}})}}return Ue.\u0275fac=function(Ce){return new(Ce||Ue)(Z.LFG(b.JF))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const Dn=new Z.OlP("XSRF_ENABLED"),Zn=new Z.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),wr=new Z.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xr{}let qr=(()=>{class Ue{constructor(Ce,ht,mt){this.doc=Ce,this.platform=ht,this.cookieName=mt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ce=this.doc.cookie||"";return Ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,b.Mx)(Ce,this.cookieName),this.lastCookieString=Ce),this.lastToken}}return Ue.\u0275fac=function(Ce){return new(Ce||Ue)(Z.LFG(b.K0),Z.LFG(Z.Lbi),Z.LFG(Zn))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();function mn(Ue,ye){const Ce=Ue.url.toLowerCase();if(!(0,Z.f3M)(Dn)||"GET"===Ue.method||"HEAD"===Ue.method||Ce.startsWith("http://")||Ce.startsWith("https://"))return ye(Ue);const ht=(0,Z.f3M)(xr).getToken(),mt=(0,Z.f3M)(wr);return null!=ht&&!Ue.headers.has(mt)&&(Ue=Ue.clone({headers:Ue.headers.set(mt,ht)})),ye(Ue)}var $t=(()=>(($t=$t||{})[$t.Interceptors=0]="Interceptors",$t[$t.LegacyInterceptors=1]="LegacyInterceptors",$t[$t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",$t[$t.NoXsrfProtection=3]="NoXsrfProtection",$t[$t.JsonpSupport=4]="JsonpSupport",$t[$t.RequestsMadeViaParent=5]="RequestsMadeViaParent",$t))();function Hn(Ue,ye){return{\u0275kind:Ue,\u0275providers:ye}}function Kn(...Ue){const ye=[st,en,cn,{provide:Pe,useExisting:cn},{provide:Ge,useExisting:en},{provide:Rt,useValue:mn,multi:!0},{provide:Dn,useValue:!0},{provide:xr,useClass:qr}];for(const Ce of Ue)ye.push(...Ce.\u0275providers);return(0,Z.MR2)(ye)}const In=new Z.OlP("LEGACY_INTERCEPTOR_FN");let rr=(()=>{class Ue{}return Ue.\u0275fac=function(Ce){return new(Ce||Ue)},Ue.\u0275mod=Z.oAB({type:Ue}),Ue.\u0275inj=Z.cJS({providers:[Kn(Hn($t.LegacyInterceptors,[{provide:In,useFactory:Mt},{provide:Rt,useExisting:In,multi:!0}]))]}),Ue})()},4650:(Yt,Ke,V)=>{V.d(Ke,{$8M:()=>Dl,$WT:()=>Fi,$Z:()=>km,AFp:()=>ml,ALo:()=>F_,AaK:()=>Pe,B6R:()=>gi,BQk:()=>cg,CHM:()=>oe,CRH:()=>_E,CZH:()=>Y_,CqO:()=>Lf,D6c:()=>n,EJc:()=>Vw,EpF:()=>Od,F$t:()=>Md,F4k:()=>Ff,FYo:()=>mf,FiY:()=>U,Gf:()=>Hg,GfV:()=>Pi,Gpc:()=>Ee,Hsn:()=>Vf,Ikx:()=>T_,JOm:()=>$r,KtG:()=>lt,LFG:()=>Lt,LMc:()=>ue,LSH:()=>Ap,Lbi:()=>dp,Lck:()=>Se,MAs:()=>s_,MGl:()=>Ph,MMx:()=>wn,MR2:()=>Rc,MT6:()=>Bh,NdJ:()=>Rh,O4$:()=>Gl,OlP:()=>Ur,Oqu:()=>$f,P3R:()=>fm,PXZ:()=>Pb,Q6J:()=>lg,QGY:()=>kf,Qsj:()=>Lp,QtT:()=>x_,R0b:()=>ju,RDi:()=>Wb,Rgc:()=>op,SBq:()=>za,SDv:()=>ip,Sil:()=>jw,Suo:()=>Kv,TTD:()=>Ds,TgZ:()=>Mh,Tol:()=>pv,Udp:()=>mg,VKq:()=>cb,W1O:()=>vE,WLB:()=>jd,X6Q:()=>rD,XFs:()=>kt,Xpm:()=>vn,Xts:()=>so,Y36:()=>md,YKP:()=>ae,YNc:()=>ag,Yjl:()=>Ys,Yz7:()=>ft,Z0I:()=>Ln,ZZ4:()=>l0,_Bn:()=>H,_UZ:()=>l_,_Vd:()=>Zl,_c5:()=>mD,_uU:()=>Za,aQg:()=>Vb,c2e:()=>hp,cJS:()=>xn,cg1:()=>tr,dDg:()=>qw,dqk:()=>mn,eFA:()=>YE,eJc:()=>lp,ekj:()=>_g,eoX:()=>zE,f3M:()=>Ue,g9A:()=>ou,h0i:()=>q,hGG:()=>_D,hij:()=>vg,iGM:()=>mE,ifc:()=>Q,ip1:()=>Qv,jDz:()=>Ms,kEZ:()=>P_,kL8:()=>pc,lG2:()=>Ps,lcZ:()=>Vv,lqb:()=>Tl,lri:()=>HE,n5z:()=>So,oAB:()=>qs,oxw:()=>Bf,pQV:()=>Ug,q4F:()=>wi,qLn:()=>ph,qOj:()=>Sh,qZA:()=>xl,rWj:()=>$E,s9C:()=>u_,sBO:()=>sD,s_b:()=>Hv,soG:()=>Xv,tb:()=>KE,tp0:()=>te,uIk:()=>dc,vHH:()=>Qe,vpe:()=>iu,wAp:()=>jn,xp6:()=>Ny,ynx:()=>ug,z2F:()=>n0,zSh:()=>Rp,zs3:()=>oc});var b=V(7579),Z=V(727),p=V(9751),De=V(6451),Me=V(3099);function xe(i){for(let o in i)if(i[o]===xe)return o;throw Error("Could not find renamed property on target object.")}function Fe(i,o){for(const u in o)o.hasOwnProperty(u)&&!i.hasOwnProperty(u)&&(i[u]=o[u])}function Pe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Pe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ge(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const be=xe({__forward_ref__:xe});function Ee(i){return i.__forward_ref__=Ee,i.toString=function(){return Pe(this())},i}function Re(i){return yt(i)?i():i}function yt(i){return"function"==typeof i&&i.hasOwnProperty(be)&&i.__forward_ref__===Ee}function He(i){return i&&!!i.\u0275providers}const Nt="https://g.co/ng/security#xss";class Qe extends Error{constructor(o,u){super(ut(o,u)),this.code=o}}function ut(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function Ie(i){return"string"==typeof i?i:null==i?"":String(i)}function xt(i,o){throw new Qe(-201,!1)}function Mt(i,o,u,d){throw new Error(`ASSERTION ERROR: ${i}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}function ft(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function xn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gn(i){return hr(i,_r)||hr(i,en)}function Ln(i){return null!==Gn(i)}function hr(i,o){return i.hasOwnProperty(o)?i[o]:null}function Vn(i){return i&&(i.hasOwnProperty(Rr)||i.hasOwnProperty(Dn))?i[Rr]:null}const _r=xe({\u0275prov:xe}),Rr=xe({\u0275inj:xe}),en=xe({ngInjectableDef:xe}),Dn=xe({ngInjectorDef:xe});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let Zn;function wr(i){const o=Zn;return Zn=i,o}function xr(i,o,u){const d=Gn(i);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&kt.Optional?null:void 0!==o?o:void xt(Pe(i))}const mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kn={},un="__NG_DI_FLAG__",In="ngTempTokenPath",or="ngTokenPath",Pr=/\n/gm,Nn="\u0275",Dr="__source";let Pn;function Ci(i){const o=Pn;return Pn=i,o}function rr(i,o=kt.Default){if(void 0===Pn)throw new Qe(-203,!1);return null===Pn?xr(i,void 0,o):Pn.get(i,o&kt.Optional?null:void 0,o)}function Lt(i,o=kt.Default){return(function Kr(){return Zn}()||rr)(Re(i),o)}function Ue(i,o=kt.Default){return Lt(i,ye(o))}function ye(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ce(i){const o=[];for(let u=0;u<i.length;u++){const d=Re(i[u]);if(Array.isArray(d)){if(0===d.length)throw new Qe(900,!1);let g,y=kt.Default;for(let I=0;I<d.length;I++){const O=d[I],x=mt(O);"number"==typeof x?-1===x?g=O.token:y|=x:g=O}o.push(Lt(g,y))}else o.push(Lt(d))}return o}function ht(i,o){return i[un]=o,i.prototype[un]=o,i}function mt(i){return i[un]}function ne(i){return{toString:i}.toString()}var ie=(()=>((ie=ie||{})[ie.OnPush=0]="OnPush",ie[ie.Default=1]="Default",ie))(),Q=(()=>{return(i=Q||(Q={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Q;var i})();const Le={},ce=[],me=xe({\u0275cmp:xe}),le=xe({\u0275dir:xe}),Oe=xe({\u0275pipe:xe}),Ze=xe({\u0275mod:xe}),vt=xe({\u0275fac:xe}),Qt=xe({__NG_ELEMENT_ID__:xe});let Ht=0;function vn(i){return ne(()=>{const o=ir(i),u={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===ie.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||Q.Emulated,id:"c"+Ht++,styles:i.styles||ce,_:null,schemas:i.schemas||null,tView:null};Ki(u);const d=i.dependencies;return u.directiveDefs=ni(d,!1),u.pipeDefs=ni(d,!0),u})}function gi(i,o,u){const d=i.\u0275cmp;d.directiveDefs=ni(o,!1),d.pipeDefs=ni(u,!0)}function Ti(i){return $n(i)||Xr(i)}function Ks(i){return null!==i}function qs(i){return ne(()=>({type:i.type,bootstrap:i.bootstrap||ce,declarations:i.declarations||ce,imports:i.imports||ce,exports:i.exports||ce,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function zi(i,o){if(null==i)return Le;const u={};for(const d in i)if(i.hasOwnProperty(d)){let g=i[d],y=g;Array.isArray(g)&&(y=g[1],g=g[0]),u[g]=d,o&&(o[g]=y)}return u}function Ps(i){return ne(()=>{const o=ir(i);return Ki(o),o})}function Ys(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function $n(i){return i[me]||null}function Xr(i){return i[le]||null}function ei(i){return i[Oe]||null}function Fi(i){const o=$n(i)||Xr(i)||ei(i);return null!==o&&o.standalone}function Wi(i,o){const u=i[Ze]||null;if(!u&&!0===o)throw new Error(`Type ${Pe(i)} does not have '\u0275mod' property.`);return u}function ir(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||ce,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zi(i.inputs,o),outputs:zi(i.outputs)}}function Ki(i){i.features?.forEach(o=>o(i))}function ni(i,o){if(!i)return null;const u=o?ei:Ti;return()=>("function"==typeof i?i():i).map(d=>u(d)).filter(Ks)}const mi=0,qt=1,En=2,ar=3,kr=4,Ui=5,yr=6,Ir=7,Vr=8,ri=9,ko=10,_n=11,Bi=12,_i=13,cs=14,rs=15,yi=16,is=17,Gr=18,vi=19,Es=20,Ve=21,Te=22,Ct=1,Wt=2,hn=7,Mn=8,Xn=9,kn=10;function Yr(i){return Array.isArray(i)&&"object"==typeof i[Ct]}function fr(i){return Array.isArray(i)&&!0===i[Ct]}function ds(i){return 0!=(4&i.flags)}function hs(i){return i.componentOffset>-1}function qi(i){return 1==(1&i.flags)}function fs(i){return!!i.template}function Fo(i){return 0!=(256&i[En])}function Gi(i,o){return i.hasOwnProperty(vt)?i[vt]:null}class ms{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ds(){return Qo}function Qo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Zi),Js}function Js(){const i=ka(this),o=i?.current;if(o){const u=i.previous;if(u===Le)i.previous=o;else for(let d in o)u[d]=o[d];i.current=null,this.ngOnChanges(o)}}function Zi(i,o,u,d){const g=this.declaredInputs[u],y=ka(i)||function _l(i,o){return i[Xa]=o}(i,{previous:Le,current:null}),I=y.current||(y.current={}),O=y.previous,x=O[g];I[g]=new ms(x&&x.currentValue,o,O===Le),i[d]=o}Ds.ngInherit=!0;const Xa="__ngSimpleChanges__";function ka(i){return i[Xa]||null}const pr=function(i,o,u){},Vo="svg";function Or(i){for(;Array.isArray(i);)i=i[mi];return i}function ho(i,o){return Or(o[i])}function oi(i,o){return Or(o[i.index])}function Go(i,o){return i.data[o]}function ys(i,o){return i[o]}function ai(i,o){const u=o[i];return Yr(u)?u:u[mi]}function Fa(i){return 64==(64&i[En])}function ji(i,o){return null==o?null:i[o]}function Xo(i){i[Gr]=0}function yl(i,o){i[Ui]+=o;let u=i,d=i[ar];for(;null!==d&&(1===o&&1===u[Ui]||-1===o&&0===u[Ui]);)d[Ui]+=o,u=d,d=d[ar]}const An={lFrame:lu(null),bindingsEnabled:!0};function Io(){return An.bindingsEnabled}function R(){return An.lFrame.lView}function L(){return An.lFrame.tView}function oe(i){return An.lFrame.contextLView=i,i[Vr]}function lt(i){return An.lFrame.contextLView=null,i}function rn(){let i=Fr();for(;null!==i&&64===i.type;)i=i.parent;return i}function Fr(){return An.lFrame.currentTNode}function Si(){const i=An.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}function bi(i,o){const u=An.lFrame;u.currentTNode=i,u.isParent=o}function Qs(){return An.lFrame.isParent}function Xs(){An.lFrame.isParent=!1}function li(){const i=An.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ji(){return An.lFrame.bindingIndex}function ra(){return An.lFrame.bindingIndex++}function vs(i){const o=An.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,u}function _a(i){An.lFrame.inI18n=i}function Hu(i,o){const u=An.lFrame;u.bindingIndex=u.bindingRootIndex=i,$o(o)}function $o(i){An.lFrame.currentDirectiveIndex=i}function bl(){return An.lFrame.currentQueryIndex}function va(i){An.lFrame.currentQueryIndex=i}function tl(i){const o=i[qt];return 2===o.type?o.declTNode:1===o.type?i[yr]:null}function ba(i,o,u){if(u&kt.SkipSelf){let g=o,y=i;for(;!(g=g.parent,null!==g||u&kt.Host||(g=tl(y),null===g||(y=y[rs],10&g.type))););if(null===g)return!1;o=g,i=y}const d=An.lFrame=rl();return d.currentTNode=o,d.lView=i,!0}function nl(i){const o=rl(),u=i[qt];An.lFrame=o,o.currentTNode=u.firstChild,o.lView=i,o.tView=u,o.contextLView=i,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function rl(){const i=An.lFrame,o=null===i?null:i.child;return null===o?lu(i):o}function lu(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function ia(){const i=An.lFrame;return An.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const wc=ia;function uu(){const i=ia();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ai(){return An.lFrame.selectedIndex}function ui(i){An.lFrame.selectedIndex=i}function ii(){const i=An.lFrame;return Go(i.tView,i.selectedIndex)}function Gl(){An.lFrame.currentNamespace=Vo}function il(i,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const y=i.data[u].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:O,ngAfterViewInit:x,ngAfterViewChecked:W,ngOnDestroy:X}=y;I&&(i.contentHooks||(i.contentHooks=[])).push(-u,I),O&&((i.contentHooks||(i.contentHooks=[])).push(u,O),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(u,O)),x&&(i.viewHooks||(i.viewHooks=[])).push(-u,x),W&&((i.viewHooks||(i.viewHooks=[])).push(u,W),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(u,W)),null!=X&&(i.destroyHooks||(i.destroyHooks=[])).push(u,X)}}function sa(i,o,u){B(i,o,3,u)}function k(i,o,u,d){(3&i[En])===u&&B(i,o,u,d)}function K(i,o){let u=i[En];(3&u)===o&&(u&=2047,u+=1,i[En]=u)}function B(i,o,u,d){const y=d??-1,I=o.length-1;let O=0;for(let x=void 0!==d?65535&i[Gr]:0;x<I;x++)if("number"==typeof o[x+1]){if(O=o[x],null!=d&&O>=d)break}else o[x]<0&&(i[Gr]+=65536),(O<y||-1==y)&&(re(i,u,o,x),i[Gr]=(4294901760&i[Gr])+x+2),x++}function re(i,o,u,d){const g=u[d]<0,y=u[d+1],O=i[g?-u[d]:u[d]];if(g){if(i[En]>>11<i[Gr]>>16&&(3&i[En])===o){i[En]+=2048,pr(4,O,y);try{y.call(O)}finally{pr(5,O,y)}}}else{pr(4,O,y);try{y.call(O)}finally{pr(5,O,y)}}}const ve=-1;class Je{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Zt(i,o,u){let d=0;for(;d<u.length;){const g=u[d];if("number"==typeof g){if(0!==g)break;d++;const y=u[d++],I=u[d++],O=u[d++];i.setAttribute(o,I,O,y)}else{const y=g,I=u[++d];zt(y)?i.setProperty(o,y,I):i.setAttribute(o,y,I),d++}}return d}function zo(i){return 3===i||4===i||6===i}function zt(i){return 64===i.charCodeAt(0)}function it(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const g=o[d];"number"==typeof g?u=g:0===u||Ot(i,u,g,null,-1===u||2===u?o[++d]:null)}}return i}function Ot(i,o,u,d,g){let y=0,I=i.length;if(-1===o)I=-1;else for(;y<i.length;){const O=i[y++];if("number"==typeof O){if(O===o){I=-1;break}if(O>o){I=y-1;break}}}for(;y<i.length;){const O=i[y];if("number"==typeof O)break;if(O===u){if(null===d)return void(null!==g&&(i[y+1]=g));if(d===i[y+1])return void(i[y+2]=g)}y++,null!==d&&y++,null!==g&&y++}-1!==I&&(i.splice(I,0,o),y=I+1),i.splice(y++,0,u),null!==d&&i.splice(y++,0,d),null!==g&&i.splice(y++,0,g)}function si(i){return i!==ve}function Co(i){return 32767&i}function ol(i,o){let u=function sl(i){return i>>16}(i),d=o;for(;u>0;)d=d[rs],u--;return d}let al=!0;function Ea(i){const o=al;return al=i,o}const oa=255,Wu=5;let cu=0;const To={};function Fn(i,o){const u=du(i,o);if(-1!==u)return u;const d=o[qt];d.firstCreatePass&&(i.injectorIndex=o.length,wa(d.data,i),wa(o,null),wa(d.blueprint,null));const g=sr(i,o),y=i.injectorIndex;if(si(g)){const I=Co(g),O=ol(g,o),x=O[qt].data;for(let W=0;W<8;W++)o[y+W]=O[I+W]|x[I+W]}return o[y+8]=g,y}function wa(i,o){i.push(0,0,0,0,0,0,0,0,o)}function du(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function sr(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let u=0,d=null,g=o;for(;null!==g;){if(d=Ku(g),null===d)return ve;if(u++,g=g[rs],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return ve}function yn(i,o,u){!function wl(i,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Qt)&&(d=u[Qt]),null==d&&(d=u[Qt]=cu++);const g=d&oa;o.data[i+(g>>Wu)]|=1<<g}(i,o,u)}function lr(i,o,u){if(u&kt.Optional||void 0!==i)return i;xt()}function Ic(i,o,u,d){if(u&kt.Optional&&void 0===d&&(d=null),!(u&(kt.Self|kt.Host))){const g=i[ri],y=wr(void 0);try{return g?g.get(o,d,u&kt.Optional):xr(o,d,u&kt.Optional)}finally{wr(y)}}return lr(d,0,u)}function Cr(i,o,u,d=kt.Default,g){if(null!==i){if(1024&o[En]){const I=function aa(i,o,u,d,g){let y=i,I=o;for(;null!==y&&null!==I&&1024&I[En]&&!(256&I[En]);){const O=tn(y,I,u,d|kt.Self,To);if(O!==To)return O;let x=y.parent;if(!x){const W=I[Ve];if(W){const X=W.get(u,To,d);if(X!==To)return X}x=Ku(I),I=I[rs]}y=x}return g}(i,o,u,d,To);if(I!==To)return I}const y=tn(i,o,u,d,To);if(y!==To)return y}return Ic(o,u,d,g)}function tn(i,o,u,d,g){const y=function hu(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Qt)?i[Qt]:void 0;return"number"==typeof o?o>=0?o&oa:Ni:o}(u);if("function"==typeof y){if(!ba(o,i,d))return d&kt.Host?lr(g,0,d):Ic(o,u,d,g);try{const I=y(d);if(null!=I||d&kt.Optional)return I;xt()}finally{wc()}}else if("number"==typeof y){let I=null,O=du(i,o),x=ve,W=d&kt.Host?o[yi][yr]:null;for((-1===O||d&kt.SkipSelf)&&(x=-1===O?sr(i,o):o[O+8],x!==ve&&Ba(d,!1)?(I=o[qt],O=Co(x),o=ol(x,o)):O=-1);-1!==O;){const X=o[qt];if(Lr(y,O,X.data)){const he=Hl(O,o,u,I,d,W);if(he!==To)return he}x=o[O+8],x!==ve&&Ba(d,o[qt].data[O+8]===W)&&Lr(y,O,o)?(I=X,O=Co(x),o=ol(x,o)):O=-1}}return g}function Hl(i,o,u,d,g,y){const I=o[qt],O=I.data[i+8],X=Da(O,I,u,null==d?hs(O)&&al:d!=I&&0!=(3&O.type),g&kt.Host&&y===O);return null!==X?Nr(o,I,X,O):To}function Da(i,o,u,d,g){const y=i.providerIndexes,I=o.data,O=1048575&y,x=i.directiveStart,X=y>>20,Ae=g?O+X:i.directiveEnd;for(let ze=d?O:O+X;ze<Ae;ze++){const _t=I[ze];if(ze<x&&u===_t||ze>=x&&_t.type===u)return ze}if(g){const ze=I[x];if(ze&&fs(ze)&&ze.type===u)return x}return null}function Nr(i,o,u,d){let g=i[u];const y=o.data;if(function St(i){return i instanceof Je}(g)){const I=g;I.resolving&&function gt(i,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Qe(-200,`Circular dependency in DI detected for ${i}${u}`)}(function Et(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ie(i)}(y[u]));const O=Ea(I.canSeeViewProviders);I.resolving=!0;const x=I.injectImpl?wr(I.injectImpl):null;ba(i,d,kt.Default);try{g=i[u]=I.factory(void 0,y,i,d),o.firstCreatePass&&u>=d.directiveStart&&function jl(i,o,u){const{ngOnChanges:d,ngOnInit:g,ngDoCheck:y}=o.type.prototype;if(d){const I=Qo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(i,I),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(i,I)}g&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-i,g),y&&((u.preOrderHooks||(u.preOrderHooks=[])).push(i,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(i,y))}(u,y[u],o)}finally{null!==x&&wr(x),Ea(O),I.resolving=!1,wc()}}return g}function Lr(i,o,u){return!!(u[o+(i>>Wu)]&1<<i)}function Ba(i,o){return!(i&kt.Self||i&kt.Host&&o)}class gr{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return Cr(this._tNode,this._lView,o,ye(d),u)}}function Ni(){return new gr(rn(),R())}function So(i){return ne(()=>{const o=i.prototype.constructor,u=o[vt]||xi(o),d=Object.prototype;let g=Object.getPrototypeOf(i.prototype).constructor;for(;g&&g!==d;){const y=g[vt]||xi(g);if(y&&y!==u)return y;g=Object.getPrototypeOf(g)}return y=>new y})}function xi(i){return yt(i)?()=>{const o=xi(Re(i));return o&&o()}:Gi(i)}function Ku(i){const o=i[qt],u=o.type;return 2===u?o.declTNode:1===u?i[yr]:null}function Dl(i){return function Ua(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const u=i.attrs;if(u){const d=u.length;let g=0;for(;g<d;){const y=u[g];if(zo(y))break;if(0===y)g+=2;else if("number"==typeof y)for(g++;g<d&&"string"==typeof u[g];)g++;else{if(y===o)return u[g+1];g+=2}}}return null}(rn(),i)}const eo="__parameters__";function Ia(i,o,u){return ne(()=>{const d=function Ao(i){return function(...u){if(i){const d=i(...u);for(const g in d)this[g]=d[g]}}}(o);function g(...y){if(this instanceof g)return d.apply(this,y),this;const I=new g(...y);return O.annotation=I,O;function O(x,W,X){const he=x.hasOwnProperty(eo)?x[eo]:Object.defineProperty(x,eo,{value:[]})[eo];for(;he.length<=X;)he.push(null);return(he[X]=he[X]||[]).push(I),x}}return u&&(g.prototype=Object.create(u.prototype)),g.prototype.ngMetadataName=i,g.annotationCls=g,g})}class Ur{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ft({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function no(i,o){i.forEach(u=>Array.isArray(u)?no(u,o):o(u))}function gu(i,o,u){o>=i.length?i.push(u):i.splice(o,0,u)}function T(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function S(i,o){const u=[];for(let d=0;d<i;d++)u.push(o);return u}function se(i,o,u){let d=At(i,o);return d>=0?i[1|d]=u:(d=~d,function $(i,o,u,d){let g=i.length;if(g==o)i.push(u,d);else if(1===g)i.push(d,i[0]),i[0]=u;else{for(g--,i.push(i[g-1],i[g]);g>o;)i[g]=i[g-2],g--;i[o]=u,i[o+1]=d}}(i,d,o,u)),d}function Be(i,o){const u=At(i,o);if(u>=0)return i[1|u]}function At(i,o){return function nn(i,o,u){let d=0,g=i.length>>u;for(;g!==d;){const y=d+(g-d>>1),I=i[y<<u];if(o===I)return y<<u;I>o?g=y:d=y+1}return~(g<<u)}(i,o,1)}const U=ht(Ia("Optional"),8),te=ht(Ia("SkipSelf"),4);var $r=(()=>(($r=$r||{})[$r.Important=1]="Important",$r[$r.DashCase=2]="DashCase",$r))();const em=/^>|^->|<!--|-->|--!>|<!-$/g,ef=/(<|>)/,Kl="\u200b$1\u200b";const _u=new Map;let Yd=0;const rd="__ngContext__";function os(i,o){Yr(o)?(i[rd]=o[Es],function nf(i){_u.set(i[Es],i)}(o)):i[rd]=o}let Ft;function pn(i,o){return Ft(i,o)}function nr(i){const o=i[ar];return fr(o)?o[ar]:o}function la(i){return af(i[_i])}function cl(i){return af(i[kr])}function af(i){for(;null!==i&&!fr(i);)i=i[kr];return i}function Ko(i,o,u,d,g){if(null!=d){let y,I=!1;fr(d)?y=d:Yr(d)&&(I=!0,d=d[mi]);const O=Or(d);0===i&&null!==u?null==g?ad(o,u,O):Ha(o,u,O,g||null,!0):1===i&&null!==u?Ha(o,u,O,g||null,!0):2===i?rm(o,O,I):3===i&&o.destroyNode(O),null!=y&&function $b(i,o,u,d,g){const y=u[hn];y!==Or(u)&&Ko(o,i,d,y,g);for(let O=kn;O<u.length;O++){const x=u[O];yp(x[qt],x,i,o,d,y)}}(o,i,y,u,g)}}function Qd(i,o){return i.createText(o)}function io(i,o,u){i.setValue(o,u)}function Mi(i,o){return i.createComment(function Sc(i){return i.replace(em,o=>o.replace(ef,Kl))}(o))}function Ju(i,o,u){return i.createElement(o,u)}function sd(i,o){const u=i[Xn],d=u.indexOf(o),g=o[ar];512&o[En]&&(o[En]&=-513,yl(g,-1)),u.splice(d,1)}function Xd(i,o){if(i.length<=kn)return;const u=kn+o,d=i[u];if(d){const g=d[is];null!==g&&g!==i&&sd(g,d),o>0&&(i[u-1][kr]=d[kr]);const y=T(i,kn+o);!function Qu(i,o){yp(i,o,o[_n],2,null,null),o[mi]=null,o[yr]=null}(d[qt],d);const I=y[vi];null!==I&&I.detachView(y[qt]),d[ar]=null,d[kr]=null,d[En]&=-65}return d}function od(i,o){if(!(128&o[En])){const u=o[_n];u.destroyNode&&yp(i,o,u,3,null,null),function Hi(i){let o=i[_i];if(!o)return tm(i[qt],i);for(;o;){let u=null;if(Yr(o))u=o[_i];else{const d=o[kn];d&&(u=d)}if(!u){for(;o&&!o[kr]&&o!==i;)Yr(o)&&tm(o[qt],o),o=o[ar];null===o&&(o=i),Yr(o)&&tm(o[qt],o),u=o&&o[kr]}o=u}}(o)}}function tm(i,o){if(!(128&o[En])){o[En]&=-65,o[En]|=128,function eh(i,o){let u;if(null!=i&&null!=(u=i.destroyHooks))for(let d=0;d<u.length;d+=2){const g=o[u[d]];if(!(g instanceof Je)){const y=u[d+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const O=g[y[I]],x=y[I+1];pr(4,O,x);try{x.call(O)}finally{pr(5,O,x)}}else{pr(4,g,y);try{y.call(g)}finally{pr(5,g,y)}}}}}(i,o),function iy(i,o){const u=i.cleanup,d=o[Ir];let g=-1;if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const I=u[y+3];I>=0?d[g=I]():d[g=-I].unsubscribe(),y+=2}else{const I=d[g=u[y+1]];u[y].call(I)}if(null!==d){for(let y=g+1;y<d.length;y++)(0,d[y])();o[Ir]=null}}(i,o),1===o[qt].type&&o[_n].destroy();const u=o[is];if(null!==u&&fr(o[ar])){u!==o[ar]&&sd(u,o);const d=o[vi];null!==d&&d.detachView(i)}!function rf(i){_u.delete(i[Es])}(o)}}function bu(i,o,u){return Oc(i,o.parent,u)}function Oc(i,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[mi];{const{componentOffset:g}=d;if(g>-1){const{encapsulation:y}=i.data[d.directiveStart+g];if(y===Q.None||y===Q.Emulated)return null}return oi(d,u)}}function Ha(i,o,u,d,g){i.insertBefore(o,u,d,g)}function ad(i,o,u){i.appendChild(o,u)}function Eu(i,o,u,d,g){null!==d?Ha(i,o,u,d,g):ad(i,o,u)}function Ri(i,o){return i.parentNode(o)}function sy(i,o,u){return Nc(i,o,u)}function oy(i,o,u){return 40&i.type?oi(i,u):null}let ay,sh,Xu,Du,Nc=oy;function $a(i,o){Nc=i,ay=o}function _p(i,o,u,d){const g=bu(i,d,o),y=o[_n],O=sy(d.parent||o[yr],d,o);if(null!=g)if(Array.isArray(u))for(let x=0;x<u.length;x++)Eu(y,g,u[x],O,!1);else Eu(y,g,u,O,!1);void 0!==ay&&ay(y,d,o,u,g)}function ld(i,o){if(null!==o){const u=o.type;if(3&u)return oi(o,i);if(4&u)return ql(-1,i[o.index]);if(8&u){const d=o.child;if(null!==d)return ld(i,d);{const g=i[o.index];return fr(g)?ql(-1,g):Or(g)}}if(32&u)return pn(o,i)()||Or(i[o.index]);{const d=ly(i,o);return null!==d?Array.isArray(d)?d[0]:ld(nr(i[yi]),d):ld(i,o.next)}}return null}function ly(i,o){return null!==o?i[yi][yr].projection[o.projection]:null}function ql(i,o){const u=kn+i+1;if(u<o.length){const d=o[u],g=d[qt].firstChild;if(null!==g)return ld(d,g)}return o[hn]}function rm(i,o,u){const d=Ri(i,o);d&&function mp(i,o,u,d){i.removeChild(o,u,d)}(i,d,o,u)}function th(i,o,u,d,g,y,I){for(;null!=u;){const O=d[u.index],x=u.type;if(I&&0===o&&(O&&os(Or(O),d),u.flags|=2),32!=(32&u.flags))if(8&x)th(i,o,u.child,d,g,y,!1),Ko(o,i,g,O,y);else if(32&x){const W=pn(u,d);let X;for(;X=W();)Ko(o,i,g,X,y);Ko(o,i,g,O,y)}else 16&x?ur(i,o,d,u,g,y):Ko(o,i,g,O,y);u=I?u.projectionNext:u.next}}function yp(i,o,u,d,g,y){th(u,d,i.firstChild,o,g,y,!1)}function ur(i,o,u,d,g,y){const I=u[yi],x=I[yr].projection[d.projection];if(Array.isArray(x))for(let W=0;W<x.length;W++)Ko(o,i,g,x[W],y);else th(i,o,x,I[ar],g,y,!0)}function rh(i,o,u){""===u?i.removeAttribute(o,"class"):i.setAttribute(o,"class",u)}function ih(i,o,u){const{mergedAttrs:d,classes:g,styles:y}=u;null!==d&&Zt(i,o,d),null!==g&&rh(i,o,g),null!==y&&function nh(i,o,u){i.setAttribute(o,"style",u)}(i,o,y)}function wu(i){return function uf(){if(void 0===sh&&(sh=null,mn.trustedTypes))try{sh=mn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return sh}()?.createHTML(i)||i}function Wb(i){Xu=i}function bp(i){return function vp(){if(void 0===Du&&(Du=null,mn.trustedTypes))try{Du=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Du}()?.createScriptURL(i)||i}class sm{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nt})`}}function ec(i){return i instanceof sm?i.changingThisBreaksApplicationSecurity:i}function ud(i,o){const u=function wp(i){return i instanceof sm&&i.getTypeName()||null}(i);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${Nt})`)}return u===o}class gy{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(wu(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class om{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const u=this.inertDocument.createElement("template");return u.innerHTML=wu(o),u}}const am=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Cp(i){return(i=String(i)).match(am)?i:"unsafe:"+i}function Cu(i){const o={};for(const u of i.split(","))o[u]=!0;return o}function lh(...i){const o={};for(const u of i)for(const d in u)u.hasOwnProperty(d)&&(o[d]=!0);return o}const Tu=Cu("area,br,col,hr,img,wbr"),Mc=Cu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tp=Cu("rp,rt"),lm=lh(Tu,lh(Mc,Cu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lh(Tp,Cu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lh(Tp,Mc)),Sp=Cu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uh=lh(Sp,Cu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Gs=(()=>((Gs=Gs||{})[Gs.NONE=0]="NONE",Gs[Gs.HTML=1]="HTML",Gs[Gs.STYLE=2]="STYLE",Gs[Gs.SCRIPT=3]="SCRIPT",Gs[Gs.URL=4]="URL",Gs[Gs.RESOURCE_URL=5]="RESOURCE_URL",Gs))();function Ap(i){const o=cd();return o?o.sanitize(Gs.URL,i)||"":ud(i,"URL")?ec(i):Cp(Ie(i))}function dm(i){const o=cd();if(o)return bp(o.sanitize(Gs.RESOURCE_URL,i)||"");if(ud(i,"ResourceURL"))return bp(ec(i));throw new Qe(904,!1)}function fm(i,o,u){return function E0(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?dm:Ap}(o,u)(i)}function cd(){const i=R();return i&&i[Bi]}const so=new Ur("ENVIRONMENT_INITIALIZER"),hf=new Ur("INJECTOR",-1),Op=new Ur("INJECTOR_DEF_TYPES");class Np{get(o,u=Kn){if(u===Kn){const d=new Error(`NullInjectorError: No provider for ${Pe(o)}!`);throw d.name="NullInjectorError",d}return u}}function Rc(i){return{\u0275providers:i}}function vy(...i){return{\u0275providers:by(0,i),\u0275fromNgModule:!0}}function by(i,...o){const u=[],d=new Set;let g;return no(o,y=>{const I=y;ff(I,u,[],d)&&(g||(g=[]),g.push(I))}),void 0!==g&&Mp(g,u),u}function Mp(i,o){for(let u=0;u<i.length;u++){const{providers:g}=i[u];xc(g,y=>{o.push(y)})}}function ff(i,o,u,d){if(!(i=Re(i)))return!1;let g=null,y=Vn(i);const I=!y&&$n(i);if(y||I){if(I&&!I.standalone)return!1;g=i}else{const x=i.ngModule;if(y=Vn(x),!y)return!1;g=x}const O=d.has(g);if(I){if(O)return!1;if(d.add(g),I.dependencies){const x="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const W of x)ff(W,o,u,d)}}else{if(!y)return!1;{if(null!=y.imports&&!O){let W;d.add(g);try{no(y.imports,X=>{ff(X,o,u,d)&&(W||(W=[]),W.push(X))})}finally{}void 0!==W&&Mp(W,o)}if(!O){const W=Gi(g)||(()=>new g);o.push({provide:g,useFactory:W,deps:ce},{provide:Op,useValue:g,multi:!0},{provide:so,useValue:()=>Lt(g),multi:!0})}const x=y.providers;null==x||O||xc(x,X=>{o.push(X)})}}return g!==i&&void 0!==i.providers}function xc(i,o){for(let u of i)He(u)&&(u=u.\u0275providers),Array.isArray(u)?xc(u,o):o(u)}const ch=xe({provide:String,useValue:xe});function Pc(i){return null!==i&&"object"==typeof i&&ch in i}function kc(i){return"function"==typeof i}const Rp=new Ur("Set Injector scope."),mm={},D0={};let _m;function dh(){return void 0===_m&&(_m=new Np),_m}class Tl{}class dd extends Tl{get destroyed(){return this._destroyed}constructor(o,u,d,g){super(),this.parent=u,this.source=d,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pp(o,I=>this.processProvider(I)),this.records.set(hf,gf(void 0,this)),g.has("environment")&&this.records.set(Tl,gf(void 0,this));const y=this.records.get(Rp);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Op.multi,ce,kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Ci(this),d=wr(void 0);try{return o()}finally{Ci(u),wr(d)}}get(o,u=Kn,d=kt.Default){this.assertNotDestroyed(),d=ye(d);const g=Ci(this),y=wr(void 0);try{if(!(d&kt.SkipSelf)){let O=this.records.get(o);if(void 0===O){const x=function nc(i){return"function"==typeof i||"object"==typeof i&&i instanceof Ur}(o)&&Gn(o);O=x&&this.injectableDefInScope(x)?gf(Ey(o),mm):null,this.records.set(o,O)}if(null!=O)return this.hydrate(o,O)}return(d&kt.Self?dh():this.parent).get(o,u=d&kt.Optional&&u===Kn?null:u)}catch(I){if("NullInjectorError"===I.name){if((I[In]=I[In]||[]).unshift(Pe(o)),g)throw I;return function ge(i,o,u,d){const g=i[In];throw o[Dr]&&g.unshift(o[Dr]),i.message=function pe(i,o,u,d=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Nn?i.slice(2):i;let g=Pe(o);if(Array.isArray(o))g=o.map(Pe).join(" -> ");else if("object"==typeof o){let y=[];for(let I in o)if(o.hasOwnProperty(I)){let O=o[I];y.push(I+":"+("string"==typeof O?JSON.stringify(O):Pe(O)))}g=`{${y.join(", ")}}`}return`${u}${d?"("+d+")":""}[${g}]: ${i.replace(Pr,"\n  ")}`}("\n"+i.message,g,u,d),i[or]=g,i[In]=null,i}(I,o,"R3InjectorError",this.source)}throw I}finally{wr(y),Ci(g)}}resolveInjectorInitializers(){const o=Ci(this),u=wr(void 0);try{const d=this.get(so.multi,ce,kt.Self);for(const g of d)g()}finally{Ci(o),wr(u)}}toString(){const o=[],u=this.records;for(const d of u.keys())o.push(Pe(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Qe(205,!1)}processProvider(o){let u=kc(o=Re(o))?o:Re(o&&o.provide);const d=function Qb(i){return Pc(i)?gf(void 0,i.useValue):gf(C0(i),mm)}(o);if(kc(o)||!0!==o.multi)this.records.get(u);else{let g=this.records.get(u);g||(g=gf(void 0,mm,!0),g.factory=()=>Ce(g.multi),this.records.set(u,g)),u=o,g.multi.push(o)}this.records.set(u,d)}hydrate(o,u){return u.value===mm&&(u.value=D0,u.value=u.factory()),"object"==typeof u.value&&u.value&&function hh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Re(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Ey(i){const o=Gn(i),u=null!==o?o.factory:Gi(i);if(null!==u)return u;if(i instanceof Ur)throw new Qe(204,!1);if(i instanceof Function)return function I0(i){const o=i.length;if(o>0)throw S(o,"?"),new Qe(204,!1);const u=function Wn(i){const o=i&&(i[_r]||i[en]);return o?(function Ar(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),o):null}(i);return null!==u?()=>u.factory(i):()=>new i}(i);throw new Qe(204,!1)}function C0(i,o,u){let d;if(kc(i)){const g=Re(i);return Gi(g)||Ey(g)}if(Pc(i))d=()=>Re(i.useValue);else if(function gm(i){return!(!i||!i.useFactory)}(i))d=()=>i.useFactory(...Ce(i.deps||[]));else if(function pm(i){return!(!i||!i.useExisting)}(i))d=()=>Lt(Re(i.useExisting));else{const g=Re(i&&(i.useClass||i.provide));if(!function xp(i){return!!i.deps}(i))return Gi(g)||Ey(g);d=()=>new g(...Ce(i.deps))}return d}function gf(i,o,u=!1){return{factory:i,value:o,multi:u?[]:void 0}}function Pp(i,o){for(const u of i)Array.isArray(u)?Pp(u,o):u&&He(u)?Pp(u.\u0275providers,o):o(u)}class T0{}class Yl{}class ym{resolveComponentFactory(o){throw function kp(i){const o=Error(`No component factory found for ${Pe(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Zl=(()=>{class i{}return i.NULL=new ym,i})();function Su(){return _e(rn(),R())}function _e(i,o){return new za(oi(i,o))}let za=(()=>{class i{constructor(u){this.nativeElement=u}}return i.__NG_ELEMENT_ID__=Su,i})();function wy(i){return i instanceof za?i.nativeElement:i}class mf{}let Lp=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function S0(){const i=R(),u=ai(rn().index,i);return(Yr(u)?u:i)[_n]}(),i})(),Dy=(()=>{class i{}return i.\u0275prov=ft({token:i,providedIn:"root",factory:()=>null}),i})();class Pi{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wi=new Pi("15.2.4"),rc={},fh="ngOriginalError";function ua(i){return i[fh]}class ph{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ua(o);for(;u&&ua(u);)u=ua(u);return u||null}}function Wa(i){return i instanceof Function?i():i}function _h(i,o,u){let d=i.length;for(;;){const g=i.indexOf(o,u);if(-1===g)return g;if(0===g||i.charCodeAt(g-1)<=32){const y=o.length;if(g+y===d||i.charCodeAt(g+y)<=32)return g}u=g+1}}const oo="ng-template";function Sy(i,o,u){let d=0,g=!0;for(;d<i.length;){let y=i[d++];if("string"==typeof y&&g){const I=i[d++];if(u&&"class"===y&&-1!==_h(I.toLowerCase(),o,0))return!0}else{if(1===y){for(;d<i.length&&"string"==typeof(y=i[d++]);)if(y.toLowerCase()===o)return!0;return!1}"number"==typeof y&&(g=!1)}}return!1}function Ay(i){return 4===i.type&&i.value!==oo}function Oy(i,o,u){return o===(4!==i.type||u?i.value:oo)}function O0(i,o,u){let d=4;const g=i.attrs||[],y=function Gp(i){for(let o=0;o<i.length;o++)if(zo(i[o]))return o;return i.length}(g);let I=!1;for(let O=0;O<o.length;O++){const x=o[O];if("number"!=typeof x){if(!I)if(4&d){if(d=2|1&d,""!==x&&!Oy(i,x,u)||""===x&&1===o.length){if(Sl(d))return!1;I=!0}}else{const W=8&d?x:o[++O];if(8&d&&null!==i.attrs){if(!Sy(i.attrs,W,u)){if(Sl(d))return!1;I=!0}continue}const he=pd(8&d?"class":x,g,Ay(i),u);if(-1===he){if(Sl(d))return!1;I=!0;continue}if(""!==W){let Ae;Ae=he>y?"":g[he+1].toLowerCase();const ze=8&d?Ae:null;if(ze&&-1!==_h(ze,W,0)||2&d&&W!==Ae){if(Sl(d))return!1;I=!0}}}}else{if(!I&&!Sl(d)&&!Sl(x))return!1;if(I&&Sl(x))continue;I=!1,d=x|1&d}}return Sl(d)||I}function Sl(i){return 0==(1&i)}function pd(i,o,u,d){if(null===o)return-1;let g=0;if(d||!u){let y=!1;for(;g<o.length;){const I=o[g];if(I===i)return g;if(3===I||6===I)y=!0;else{if(1===I||2===I){let O=o[++g];for(;"string"==typeof O;)O=o[++g];continue}if(4===I)break;if(0===I){g+=4;continue}}g+=y?1:2}return-1}return function wm(i,o){let u=i.indexOf(4);if(u>-1)for(u++;u<i.length;){const d=i[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,i)}function sc(i,o,u=!1){for(let d=0;d<o.length;d++)if(O0(i,o[d],u))return!0;return!1}function Au(i,o){e:for(let u=0;u<o.length;u++){const d=o[u];if(i.length===d.length){for(let g=0;g<i.length;g++)if(i[g]!==d[g])continue e;return!0}}return!1}function Dm(i,o){return i?":not("+o.trim()+")":o}function Lc(i){let o=i[0],u=1,d=2,g="",y=!1;for(;u<i.length;){let I=i[u];if("string"==typeof I)if(2&d){const O=i[++u];g+="["+I+(O.length>0?'="'+O+'"':"")+"]"}else 8&d?g+="."+I:4&d&&(g+=" "+I);else""!==g&&!Sl(I)&&(o+=Dm(y,g),g=""),d=I,y=y||!Sl(d);u++}return""!==g&&(o+=Dm(y,g)),o}const Qn={};function Ny(i){My(L(),R(),Ai()+i,!1)}function My(i,o,u,d){if(!d)if(3==(3&o[En])){const y=i.preOrderCheckHooks;null!==y&&sa(o,y,u)}else{const y=i.preOrderHooks;null!==y&&k(o,y,0,u)}ui(u)}function gd(i,o=null,u=null,d){const g=yf(i,o,u,d);return g.resolveInjectorInitializers(),g}function yf(i,o=null,u=null,d,g=new Set){const y=[u||ce,vy(i)];return d=d||("object"==typeof i?void 0:Pe(i)),new dd(y,o||dh(),d||null,g)}let oc=(()=>{class i{static create(u,d){if(Array.isArray(u))return gd({name:""},d,u,"");{const g=u.name??"";return gd({name:g},u.parent,u.providers,g)}}}return i.THROW_IF_NOT_FOUND=Kn,i.NULL=new Np,i.\u0275prov=ft({token:i,providedIn:"any",factory:()=>Lt(hf)}),i.__NG_ELEMENT_ID__=-1,i})();function md(i,o=kt.Default){const u=R();return null===u?Lt(i,o):Cr(rn(),u,Re(i),o)}function km(){throw new Error("invalid")}function Wp(i,o){const u=i.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const y=u[d+1];if(-1!==y){const I=i.data[y];va(u[d]),I.contentQueries(2,o[y],y)}}}function vo(i,o,u,d,g,y,I,O,x,W,X){const he=o.blueprint.slice();return he[mi]=g,he[En]=76|d,(null!==X||i&&1024&i[En])&&(he[En]|=1024),Xo(he),he[ar]=he[rs]=i,he[Vr]=u,he[ko]=I||i&&i[ko],he[_n]=O||i&&i[_n],he[Bi]=x||i&&i[Bi]||null,he[ri]=W||i&&i[ri]||null,he[yr]=y,he[Es]=function tf(){return Yd++}(),he[Ve]=X,he[yi]=2==o.type?i[yi]:he,he}function _d(i,o,u,d,g){let y=i.data[o];if(null===y)y=Df(i,o,u,d,g),function Ho(){return An.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=u,y.value=d,y.attrs=g;const I=Si();y.injectorIndex=null===I?-1:I.injectorIndex}return bi(y,!0),y}function Df(i,o,u,d,g){const y=Fr(),I=Qs(),x=i.data[o]=function Bm(i,o,u,d,g,y){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,u,o,d,g);return null===i.firstChild&&(i.firstChild=x),null!==y&&(I?null==y.child&&null!==x.parent&&(y.child=x):null===y.next&&(y.next=x,x.prev=y)),x}function Jl(i,o,u,d){if(0===u)return-1;const g=o.length;for(let y=0;y<u;y++)o.push(d),i.blueprint.push(d),i.data.push(null);return g}function cc(i,o,u){nl(o);try{const d=i.viewQuery;null!==d&&Vc(1,d,u);const g=i.template;null!==g&&Fm(i,o,g,1,u),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wp(i,o),i.staticViewQueries&&Vc(2,i.viewQuery,u);const y=i.components;null!==y&&function k0(i,o){for(let u=0;u<o.length;u++)$y(i,o[u])}(o,y)}catch(d){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),d}finally{o[En]&=-5,uu()}}function Eh(i,o,u,d){const g=o[En];if(128!=(128&g)){nl(o);try{Xo(o),function na(i){return An.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==u&&Fm(i,o,u,2,d);const I=3==(3&g);if(I){const W=i.preOrderCheckHooks;null!==W&&sa(o,W,null)}else{const W=i.preOrderHooks;null!==W&&k(o,W,0,null),K(o,0)}if(function Sf(i){for(let o=la(i);null!==o;o=cl(o)){if(!o[Wt])continue;const u=o[Xn];for(let d=0;d<u.length;d++){const g=u[d];512&g[En]||yl(g[ar],1),g[En]|=512}}}(o),function B0(i){for(let o=la(i);null!==o;o=cl(o))for(let u=kn;u<o.length;u++){const d=o[u],g=d[qt];Fa(d)&&Eh(g,d,g.template,d[Vr])}}(o),null!==i.contentQueries&&Wp(i,o),I){const W=i.contentCheckHooks;null!==W&&sa(o,W)}else{const W=i.contentHooks;null!==W&&k(o,W,1),K(o,1)}!function wf(i,o){const u=i.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const g=u[d];if(g<0)ui(~g);else{const y=g,I=u[++d],O=u[++d];Hu(I,y),O(2,o[y])}}}finally{ui(-1)}}(i,o);const O=i.components;null!==O&&function P0(i,o){for(let u=0;u<o.length;u++)Hy(i,o[u])}(o,O);const x=i.viewQuery;if(null!==x&&Vc(2,x,d),I){const W=i.viewCheckHooks;null!==W&&sa(o,W)}else{const W=i.viewHooks;null!==W&&k(o,W,2),K(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[En]&=-41,512&o[En]&&(o[En]&=-513,yl(o[ar],-1))}finally{uu()}}}function Fm(i,o,u,d,g){const y=Ai(),I=2&d;try{ui(-1),I&&o.length>Te&&My(i,o,Te,!1),pr(I?2:0,g),u(d,g)}finally{ui(y),pr(I?3:1,g)}}function Kp(i,o,u){if(ds(o)){const g=o.directiveEnd;for(let y=o.directiveStart;y<g;y++){const I=i.data[y];I.contentQueries&&I.contentQueries(1,u[y],y)}}}function Lm(i,o,u){Io()&&(function L0(i,o,u,d){const g=u.directiveStart,y=u.directiveEnd;hs(u)&&function jy(i,o,u){const d=oi(o,i),g=ca(u),y=i[ko],I=Qp(i,vo(i,g,null,u.onPush?32:16,d,o,y,y.createRenderer(d,u),null,null,null));i[o.index]=I}(o,u,i.data[g+u.componentOffset]),i.firstCreatePass||Fn(u,o),os(d,o);const I=u.initialInputs;for(let O=g;O<y;O++){const x=i.data[O],W=Nr(o,i,O,u);os(W,o),null!==I&&zm(0,O-g,W,x,0,I),fs(x)&&(ai(u.index,o)[Vr]=Nr(o,i,O,u))}}(i,o,u,oi(u,o)),64==(64&u.flags)&&Zp(i,o,u))}function Um(i,o,u=oi){const d=o.localNames;if(null!==d){let g=o.index+1;for(let y=0;y<d.length;y+=2){const I=d[y+1],O=-1===I?u(o,i):i[I];i[g++]=O}}}function ca(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=yd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function yd(i,o,u,d,g,y,I,O,x,W){const X=Te+d,he=X+g,Ae=function F0(i,o){const u=[];for(let d=0;d<o;d++)u.push(d<i?null:Qn);return u}(X,he),ze="function"==typeof W?W():W;return Ae[qt]={type:i,blueprint:Ae,template:u,queries:null,viewQuery:O,declTNode:o,data:Ae.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:he,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:x,consts:ze,incompleteFirstPass:!1}}function vd(i,o,u,d){const g=eg(o);null===u?g.push(d):(g.push(u),i.firstCreatePass&&Dd(i).push(d,g.length-1))}function bd(i,o,u,d){for(let g in i)if(i.hasOwnProperty(g)){u=null===u?{}:u;const y=i[g];null===d?qa(u,o,g,y):d.hasOwnProperty(g)&&qa(u,o,d[g],y)}return u}function qa(i,o,u,d){i.hasOwnProperty(u)?i[u].push(o,d):i[u]=[o,d]}function Ma(i,o,u,d,g,y,I,O){const x=oi(o,u);let X,W=o.inputs;!O&&null!=W&&(X=W[d])?(Gc(i,u,X,d,g),hs(o)&&Vm(u,o.index)):3&o.type&&(d=function If(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(d),g=null!=I?I(g,o.value||"",d):g,y.setProperty(x,d,g))}function Vm(i,o){const u=ai(o,i);16&u[En]||(u[En]|=32)}function Ql(i,o,u,d){if(Io()){const g=null===d?null:{"":-1},y=function Cf(i,o){const u=i.directiveRegistry;let d=null,g=null;if(u)for(let y=0;y<u.length;y++){const I=u[y];if(sc(o,I.selectors,!1))if(d||(d=[]),fs(I))if(null!==I.findHostDirectiveDefs){const O=[];g=g||new Map,I.findHostDirectiveDefs(I,O,g),d.unshift(...O,I),Ed(i,o,O.length)}else d.unshift(I),Ed(i,o,0);else g=g||new Map,I.findHostDirectiveDefs?.(I,d,g),d.push(I)}return null===d?null:[d,g]}(i,u);let I,O;null===y?I=O=null:[I,O]=y,null!==I&&Gm(i,o,u,I,g,O),g&&function Hm(i,o,u){if(o){const d=i.localNames=[];for(let g=0;g<o.length;g+=2){const y=u[o[g+1]];if(null==y)throw new Qe(-301,!1);d.push(o[g],y)}}}(u,d,g)}u.mergedAttrs=it(u.mergedAttrs,u.attrs)}function Gm(i,o,u,d,g,y){for(let W=0;W<d.length;W++)yn(Fn(u,o),i,d[W].type);!function Dh(i,o,u){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+u,i.providerIndexes=o}(u,i.data.length,d.length);for(let W=0;W<d.length;W++){const X=d[W];X.providersResolver&&X.providersResolver(X)}let I=!1,O=!1,x=Jl(i,o,d.length,null);for(let W=0;W<d.length;W++){const X=d[W];u.mergedAttrs=it(u.mergedAttrs,X.hostAttrs),$m(i,u,o,x,X),Gy(x,X,g),null!==X.contentQueries&&(u.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(u.flags|=64);const he=X.type.prototype;!I&&(he.ngOnChanges||he.ngOnInit||he.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(u.index),I=!0),!O&&(he.ngOnChanges||he.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(u.index),O=!0),x++}!function qp(i,o,u){const g=o.directiveEnd,y=i.data,I=o.attrs,O=[];let x=null,W=null;for(let X=o.directiveStart;X<g;X++){const he=y[X],Ae=u?u.get(he):null,_t=Ae?Ae.outputs:null;x=bd(he.inputs,X,x,Ae?Ae.inputs:null),W=bd(he.outputs,X,W,_t);const Bt=null===x||null===I||Ay(o)?null:U0(x,X,I);O.push(Bt)}null!==x&&(x.hasOwnProperty("class")&&(o.flags|=8),x.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=O,o.inputs=x,o.outputs=W}(i,u,y)}function Zp(i,o,u){const d=u.directiveStart,g=u.directiveEnd,y=u.index,I=function ya(){return An.lFrame.currentDirectiveIndex}();try{ui(y);for(let O=d;O<g;O++){const x=i.data[O],W=o[O];$o(O),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Vy(x,W)}}finally{ui(-1),$o(I)}}function Vy(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Ed(i,o,u){o.componentOffset=u,(i.components||(i.components=[])).push(o.index)}function Gy(i,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=i;fs(o)&&(u[""]=i)}}function $m(i,o,u,d,g){i.data[d]=g;const y=g.factory||(g.factory=Gi(g.type)),I=new Je(y,fs(g),md);i.blueprint[d]=I,u[d]=I,function By(i,o,u,d,g){const y=g.hostBindings;if(y){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const O=~o.index;(function jm(i){let o=i.length;for(;o>0;){const u=i[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=O&&I.push(O),I.push(u,d,y)}}(i,o,d,Jl(i,u,g.hostVars,Qn),g)}function Jp(i,o,u,d,g,y,I){if(null==y)i.removeAttribute(o,g,u);else{const O=null==I?Ie(y):I(y,d||"",g);i.setAttribute(o,g,O,u)}}function zm(i,o,u,d,g,y){const I=y[o];if(null!==I){const O=d.setInput;for(let x=0;x<I.length;){const W=I[x++],X=I[x++],he=I[x++];null!==O?d.setInput(u,he,W,X):u[X]=he}}}function U0(i,o,u){let d=null,g=0;for(;g<u.length;){const y=u[g];if(0!==y)if(5!==y){if("number"==typeof y)break;if(i.hasOwnProperty(y)){null===d&&(d=[]);const I=i[y];for(let O=0;O<I.length;O+=2)if(I[O]===o){d.push(y,I[O+1],u[g+1]);break}}g+=2}else g+=2;else g+=4}return d}function Tf(i,o,u,d){return[i,!0,!1,o,null,0,d,u,null,null]}function Hy(i,o){const u=ai(o,i);if(Fa(u)){const d=u[qt];48&u[En]?Eh(d,u,d.template,u[Vr]):u[Ui]>0&&Ih(u)}}function Ih(i){for(let d=la(i);null!==d;d=cl(d))for(let g=kn;g<d.length;g++){const y=d[g];if(Fa(y))if(512&y[En]){const I=y[qt];Eh(I,y,I.template,y[Vr])}else y[Ui]>0&&Ih(y)}const u=i[qt].components;if(null!==u)for(let d=0;d<u.length;d++){const g=ai(u[d],i);Fa(g)&&g[Ui]>0&&Ih(g)}}function $y(i,o){const u=ai(o,i),d=u[qt];(function zy(i,o){for(let u=o.length;u<i.blueprint.length;u++)o.push(i.blueprint[u])})(d,u),cc(d,u,u[Vr])}function Qp(i,o){return i[_i]?i[cs][kr]=o:i[_i]=o,i[cs]=o,o}function Xp(i){for(;i;){i[En]|=32;const o=nr(i);if(Fo(i)&&!o)return i;i=o}return null}function Ch(i,o,u,d=!0){const g=o[ko];g.begin&&g.begin();try{Eh(i,o,i.template,u)}catch(I){throw d&&tg(o,I),I}finally{g.end&&g.end()}}function Vc(i,o,u){va(0),o(i,u)}function eg(i){return i[Ir]||(i[Ir]=[])}function Dd(i){return i.cleanup||(i.cleanup=[])}function tg(i,o){const u=i[ri],d=u?u.get(ph,null):null;d&&d.handleError(o)}function Gc(i,o,u,d,g){for(let y=0;y<u.length;){const I=u[y++],O=u[y++],x=o[I],W=i.data[I];null!==W.setInput?W.setInput(x,g,d,O):x[O]=g}}function Af(i,o,u){let d=u?i.styles:null,g=u?i.classes:null,y=0;if(null!==o)for(let I=0;I<o.length;I++){const O=o[I];"number"==typeof O?y=O:1==y?g=Ge(g,O):2==y&&(d=Ge(d,O+": "+o[++I]+";"))}u?i.styles=d:i.stylesWithoutHost=d,u?i.classes=g:i.classesWithoutHost=g}function Of(i,o,u,d,g=!1){for(;null!==u;){const y=o[u.index];if(null!==y&&d.push(Or(y)),fr(y))for(let O=kn;O<y.length;O++){const x=y[O],W=x[qt].firstChild;null!==W&&Of(x[qt],x,W,d)}const I=u.type;if(8&I)Of(i,o,u.child,d);else if(32&I){const O=pn(u,o);let x;for(;x=O();)d.push(x)}else if(16&I){const O=ly(o,u);if(Array.isArray(O))d.push(...O);else{const x=nr(o[yi]);Of(x[qt],x,O,d,!0)}}u=g?u.projectionNext:u.next}return d}class Th{get rootNodes(){const o=this._lView,u=o[qt];return Of(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vr]}set context(o){this._lView[Vr]=o}get destroyed(){return 128==(128&this._lView[En])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[ar];if(fr(o)){const u=o[Mn],d=u?u.indexOf(this):-1;d>-1&&(Xd(o,d),T(u,d))}this._attachedToViewContainer=!1}od(this._lView[qt],this._lView)}onDestroy(o){vd(this._lView[qt],this._lView,null,o)}markForCheck(){Xp(this._cdRefInjectingView||this._lView)}detach(){this._lView[En]&=-65}reattach(){this._lView[En]|=64}detectChanges(){Ch(this._lView[qt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Qe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gp(i,o){yp(i,o,o[_n],2,null,null)}(this._lView[qt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Qe(902,!1);this._appRef=o}}class Wm extends Th{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ch(o[qt],o,o[Vr],!1)}checkNoChanges(){}get context(){return null}}class ng extends Zl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=$n(o);return new Ra(u,this.ngModule)}}function Nf(i){const o=[];for(let u in i)i.hasOwnProperty(u)&&o.push({propName:i[u],templateName:u});return o}class rg{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,d){d=ye(d);const g=this.injector.get(o,rc,d);return g!==rc||u===rc?g:this.parentInjector.get(o,u,d)}}class Ra extends Yl{get inputs(){return Nf(this.componentDef.inputs)}get outputs(){return Nf(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function jp(i){return i.map(Lc).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,d,g){let y=(g=g||this.ngModule)instanceof Tl?g:g?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const I=y?new rg(o,y):o,O=I.get(mf,null);if(null===O)throw new Qe(407,!1);const x=I.get(Dy,null),W=O.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",he=d?function wh(i,o,u){return i.selectRootElement(o,u===Q.ShadowDom)}(W,d,this.componentDef.encapsulation):Ju(W,X,function Ky(i){const o=i.toLowerCase();return"svg"===o?Vo:"math"===o?"math":null}(X)),Ae=this.componentDef.onPush?288:272,ze=yd(0,null,null,1,0,null,null,null,null,null),_t=vo(null,ze,null,Ae,null,null,O,W,x,I,null);let Bt,sn;nl(_t);try{const dn=this.componentDef;let Un,Gt=null;dn.findHostDirectiveDefs?(Un=[],Gt=new Map,dn.findHostDirectiveDefs(dn,Un,Gt),Un.push(dn)):Un=[dn];const Bn=function V0(i,o){const u=i[qt],d=Te;return i[d]=o,_d(u,d,2,"#host",null)}(_t,he),fi=function Zy(i,o,u,d,g,y,I,O){const x=g[qt];!function Jy(i,o,u,d){for(const g of i)o.mergedAttrs=it(o.mergedAttrs,g.hostAttrs);null!==o.mergedAttrs&&(Af(o,o.mergedAttrs,!0),null!==u&&ih(d,u,o))}(d,i,o,I);const W=y.createRenderer(o,u),X=vo(g,ca(u),null,u.onPush?32:16,g[i.index],i,y,W,O||null,null,null);return x.firstCreatePass&&Ed(x,i,d.length-1),Qp(g,X),g[i.index]=X}(Bn,he,dn,Un,_t,O,W);sn=Go(ze,Te),he&&function Xy(i,o,u,d){if(d)Zt(i,u,["ng-version",wi.full]);else{const{attrs:g,classes:y}=function xo(i){const o=[],u=[];let d=1,g=2;for(;d<i.length;){let y=i[d];if("string"==typeof y)2===g?""!==y&&o.push(y,i[++d]):8===g&&u.push(y);else{if(!Sl(g))break;g=y}d++}return{attrs:o,classes:u}}(o.selectors[0]);g&&Zt(i,u,g),y&&y.length>0&&rh(i,u,y.join(" "))}}(W,dn,he,d),void 0!==u&&function ev(i,o,u){const d=i.projection=[];for(let g=0;g<o.length;g++){const y=u[g];d.push(null!=y?Array.from(y):null)}}(sn,this.ngContentSelectors,u),Bt=function Qy(i,o,u,d,g,y){const I=rn(),O=g[qt],x=oi(I,g);Gm(O,g,I,u,null,d);for(let X=0;X<u.length;X++)os(Nr(g,O,I.directiveStart+X,I),g);Zp(O,g,I),x&&os(x,g);const W=Nr(g,O,I.directiveStart+I.componentOffset,I);if(i[Vr]=g[Vr]=W,null!==y)for(const X of y)X(W,o);return Kp(O,I,i),W}(fi,dn,Un,Gt,_t,[G0]),cc(ze,_t,null)}finally{uu()}return new qy(this.componentType,Bt,_e(sn,_t),_t,sn)}}class qy extends T0{constructor(o,u,d,g,y){super(),this.location=d,this._rootLView=g,this._tNode=y,this.instance=u,this.hostView=this.changeDetectorRef=new Wm(g),this.componentType=o}setInput(o,u){const d=this._tNode.inputs;let g;if(null!==d&&(g=d[o])){const y=this._rootLView;Gc(y[qt],y,g,o,u),Vm(y,this._tNode.index)}}get injector(){return new gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function G0(){const i=rn();il(R()[qt],i)}function Sh(i){let o=function Km(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),u=!0;const d=[i];for(;o;){let g;if(fs(i))g=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Qe(903,!1);g=o.\u0275dir}if(g){if(u){d.push(g);const I=i;I.inputs=Mf(i.inputs),I.declaredInputs=Mf(i.declaredInputs),I.outputs=Mf(i.outputs);const O=g.hostBindings;O&&Zm(i,O);const x=g.viewQuery,W=g.contentQueries;if(x&&Ym(i,x),W&&j0(i,W),Fe(i.inputs,g.inputs),Fe(i.declaredInputs,g.declaredInputs),Fe(i.outputs,g.outputs),fs(g)&&g.data.animation){const X=i.data;X.animation=(X.animation||[]).concat(g.data.animation)}}const y=g.features;if(y)for(let I=0;I<y.length;I++){const O=y[I];O&&O.ngInherit&&O(i),O===Sh&&(u=!1)}}o=Object.getPrototypeOf(o)}!function qm(i){let o=0,u=null;for(let d=i.length-1;d>=0;d--){const g=i[d];g.hostVars=o+=g.hostVars,g.hostAttrs=it(g.hostAttrs,u=it(u,g.hostAttrs))}}(d)}function Mf(i){return i===Le?{}:i===ce?[]:i}function Ym(i,o){const u=i.viewQuery;i.viewQuery=u?(d,g)=>{o(d,g),u(d,g)}:o}function j0(i,o){const u=i.contentQueries;i.contentQueries=u?(d,g,y)=>{o(d,g,y),u(d,g,y)}:o}function Zm(i,o){const u=i.hostBindings;i.hostBindings=u?(d,g)=>{o(d,g),u(d,g)}:o}function Cd(i){return!!Rf(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Rf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function da(i,o,u){return i[o]=u}function ao(i,o,u){return!Object.is(i[o],u)&&(i[o]=u,!0)}function Ol(i,o,u,d){const g=ao(i,o,u);return ao(i,o+1,d)||g}function dc(i,o,u,d){const g=R();return ao(g,ra(),o)&&(L(),function Ou(i,o,u,d,g,y){const I=oi(i,o);Jp(o[_n],I,y,i.value,u,d,g)}(ii(),g,i,o,u,d)),dc}function hc(i,o,u,d){return ao(i,ra(),u)?o+Ie(u)+d:Qn}function ag(i,o,u,d,g,y,I,O){const x=R(),W=L(),X=i+Te,he=W.firstCreatePass?function og(i,o,u,d,g,y,I,O,x){const W=o.consts,X=_d(o,i,4,I||null,ji(W,O));Ql(o,u,X,ji(W,x)),il(o,X);const he=X.tView=yd(2,X,d,g,y,o.directiveRegistry,o.pipeRegistry,null,o.schemas,W);return null!==o.queries&&(o.queries.template(o,X),he.queries=o.queries.embeddedTView(X)),X}(X,W,x,o,u,d,g,y,I):W.data[X];bi(he,!1);const Ae=x[_n].createComment("");_p(W,x,Ae,he),os(Ae,x),Qp(x,x[X]=Tf(Ae,x,Ae,he)),qi(he)&&Lm(W,x,he),null!=I&&Um(x,he,O)}function s_(i){return ys(function Cs(){return An.lFrame.contextLView}(),Te+i)}function lg(i,o,u){const d=R();return ao(d,ra(),o)&&Ma(L(),ii(),d,i,o,d[_n],u,!1),lg}function o_(i,o,u,d,g){const I=g?"class":"style";Gc(i,u,o.inputs[I],I,d)}function Mh(i,o,u,d){const g=R(),y=L(),I=Te+i,O=g[_n],x=y.firstCreatePass?function a_(i,o,u,d,g,y){const I=o.consts,x=_d(o,i,2,d,ji(I,g));return Ql(o,u,x,ji(I,y)),null!==x.attrs&&Af(x,x.attrs,!1),null!==x.mergedAttrs&&Af(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(I,y,g,o,u,d):y.data[I],W=g[I]=Ju(O,o,function El(){return An.lFrame.currentNamespace}()),X=qi(x);return bi(x,!0),ih(O,W,x),32!=(32&x.flags)&&_p(y,g,W,x),0===function ea(){return An.lFrame.elementDepthCount}()&&os(W,g),function ta(){An.lFrame.elementDepthCount++}(),X&&(Lm(y,g,x),Kp(y,x,g)),null!==d&&Um(g,x),Mh}function xl(){let i=rn();Qs()?Xs():(i=i.parent,bi(i,!1));const o=i;!function Bl(){An.lFrame.elementDepthCount--}();const u=L();return u.firstCreatePass&&(il(u,i),ds(i)&&u.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Cn(i){return 0!=(8&i.flags)}(o)&&o_(u,o,R(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zn(i){return 0!=(16&i.flags)}(o)&&o_(u,o,R(),o.stylesWithoutHost,!1),xl}function l_(i,o,u,d){return Mh(i,o,u,d),xl(),l_}function ug(i,o,u){const d=R(),g=L(),y=i+Te,I=g.firstCreatePass?function Pf(i,o,u,d,g){const y=o.consts,I=ji(y,d),O=_d(o,i,8,"ng-container",I);return null!==I&&Af(O,I,!0),Ql(o,u,O,ji(y,g)),null!==o.queries&&o.queries.elementStart(o,O),O}(y,g,d,o,u):g.data[y];bi(I,!0);const O=d[y]=d[_n].createComment("");return _p(g,d,O,I),os(O,d),qi(I)&&(Lm(g,d,I),Kp(g,I,d)),null!=u&&Um(d,I),ug}function cg(){let i=rn();const o=L();return Qs()?Xs():(i=i.parent,bi(i,!1)),o.firstCreatePass&&(il(o,i),ds(i)&&o.queries.elementEnd(i)),cg}function Od(){return R()}function kf(i){return!!i&&"function"==typeof i.then}function Ff(i){return!!i&&"function"==typeof i.subscribe}const Lf=Ff;function Rh(i,o,u,d){const g=R(),y=L(),I=rn();return function hg(i,o,u,d,g,y,I){const O=qi(d),W=i.firstCreatePass&&Dd(i),X=o[Vr],he=eg(o);let Ae=!0;if(3&d.type||I){const Bt=oi(d,o),sn=I?I(Bt):Bt,dn=he.length,Un=I?Bn=>I(Or(Bn[d.index])):d.index;let Gt=null;if(!I&&O&&(Gt=function dg(i,o,u,d){const g=i.cleanup;if(null!=g)for(let y=0;y<g.length-1;y+=2){const I=g[y];if(I===u&&g[y+1]===d){const O=o[Ir],x=g[y+2];return O.length>x?O[x]:null}"string"==typeof I&&(y+=2)}return null}(i,o,g,d.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=y,Gt.__ngLastListenerFn__=y,Ae=!1;else{y=Uf(d,o,X,y,!1);const Bn=u.listen(sn,g,y);he.push(y,Bn),W&&W.push(g,Un,dn,dn+1)}}else y=Uf(d,o,X,y,!1);const ze=d.outputs;let _t;if(Ae&&null!==ze&&(_t=ze[g])){const Bt=_t.length;if(Bt)for(let sn=0;sn<Bt;sn+=2){const fi=o[_t[sn]][_t[sn+1]].subscribe(y),xs=he.length;he.push(y,fi),W&&W.push(g,d.index,xs,-(xs+1))}}}(y,g,g[_n],I,i,o,d),Rh}function Nd(i,o,u,d){try{return pr(6,o,u),!1!==u(d)}catch(g){return tg(i,g),!1}finally{pr(7,o,u)}}function Uf(i,o,u,d,g){return function y(I){if(I===Function)return d;Xp(i.componentOffset>-1?ai(i.index,o):o);let x=Nd(o,u,d,I),W=y.__ngNextListenerFn__;for(;W;)x=Nd(o,u,W,I)&&x,W=W.__ngNextListenerFn__;return g&&!1===x&&(I.preventDefault(),I.returnValue=!1),x}}function Bf(i=1){return function Vl(i){return(An.lFrame.contextLView=function $u(i,o){for(;i>0;)o=o[rs],i--;return o}(i,An.lFrame.contextLView))[Vr]}(i)}function fg(i,o){let u=null;const d=function Em(i){const o=i.attrs;if(null!=o){const u=o.indexOf(5);if(!(1&u))return o[u+1]}return null}(i);for(let g=0;g<o.length;g++){const y=o[g];if("*"!==y){if(null===d?sc(i,y,!0):Au(d,y))return g}else u=g}return u}function Md(i){const o=R()[yi][yr];if(!o.projection){const d=o.projection=S(i?i.length:1,null),g=d.slice();let y=o.child;for(;null!==y;){const I=i?fg(y,i):0;null!==I&&(g[I]?g[I].projectionNext=y:d[I]=y,g[I]=y),y=y.next}}}function Vf(i,o=0,u){const d=R(),g=L(),y=_d(g,Te+i,16,null,u||null);null===y.projection&&(y.projection=o),Xs(),32!=(32&y.flags)&&function Hb(i,o,u){ur(o[_n],0,o,u,bu(i,u,o),sy(u.parent||o[yr],u,o))}(g,d,y)}function u_(i,o,u){return Ph(i,"",o,"",u),u_}function Ph(i,o,u,d,g){const y=R(),I=hc(y,o,u,d);return I!==Qn&&Ma(L(),ii(),y,i,I,y[_n],g,!1),Ph}function Rd(i,o){return i<<17|o<<2}function Mu(i){return i>>17&32767}function kh(i){return 2|i}function cr(i){return(131068&i)>>2}function gg(i,o){return-131069&i|o<<2}function zc(i){return 1|i}function xu(i,o,u,d,g){const y=i[u+1],I=null===o;let O=d?Mu(y):cr(y),x=!1;for(;0!==O&&(!1===x||I);){const X=i[O+1];p_(i[O],o)&&(x=!0,i[O+1]=d?zc(X):kh(X)),O=d?Mu(X):cr(X)}x&&(i[u+1]=d?kh(y):zc(y))}function p_(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&At(i,o)>=0}const Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function g_(i){return i.substring(Os.key,Os.keyEnd)}function jf(i,o){const u=Os.textEnd;return u===o?-1:(o=Os.keyEnd=function cv(i,o,u){for(;o<u&&i.charCodeAt(o)>32;)o++;return o}(i,Os.key=o,u),Hf(i,o,u))}function Hf(i,o,u){for(;o<u&&i.charCodeAt(o)<=32;)o++;return o}function mg(i,o,u){return Pl(i,o,u,!1),mg}function _g(i,o){return Pl(i,o,null,!0),_g}function pv(i){xa(se,eu,i,!0)}function eu(i,o){for(let u=function Lh(i){return function $i(i){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=i.length}(i),jf(i,Hf(i,0,Os.textEnd))}(o);u>=0;u=jf(o,u))se(i,g_(o),!0)}function Pl(i,o,u,d){const g=R(),y=L(),I=vs(2);y.firstUpdatePass&&__(y,i,I,d),o!==Qn&&ao(g,I,o)&&ki(y,y.data[Ai()],g,g[_n],i,g[I+1]=function yg(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Pe(ec(i)))),i}(o,u),d,I)}function xa(i,o,u,d){const g=L(),y=vs(2);g.firstUpdatePass&&__(g,null,y,d);const I=R();if(u!==Qn&&ao(I,y,u)){const O=g.data[Ai()];if(Wc(O,d)&&!xd(g,y)){let x=d?O.classesWithoutHost:O.stylesWithoutHost;null!==x&&(u=Ge(x,u||"")),o_(g,O,I,u,d)}else!function y_(i,o,u,d,g,y,I,O){g===Qn&&(g=ce);let x=0,W=0,X=0<g.length?g[0]:null,he=0<y.length?y[0]:null;for(;null!==X||null!==he;){const Ae=x<g.length?g[x+1]:void 0,ze=W<y.length?y[W+1]:void 0;let Bt,_t=null;X===he?(x+=2,W+=2,Ae!==ze&&(_t=he,Bt=ze)):null===he||null!==X&&X<he?(x+=2,_t=X):(W+=2,_t=he,Bt=ze),null!==_t&&ki(i,o,u,d,_t,Bt,I,O),X=x<g.length?g[x]:null,he=W<y.length?y[W]:null}}(g,O,I,I[_n],I[y+1],I[y+1]=function K0(i,o,u){if(null==u||""===u)return ce;const d=[],g=ec(u);if(Array.isArray(g))for(let y=0;y<g.length;y++)i(d,g[y],!0);else if("object"==typeof g)for(const y in g)g.hasOwnProperty(y)&&i(d,y,g[y]);else"string"==typeof g&&o(d,g);return d}(i,o,u),d,y)}}function xd(i,o){return o>=i.expandoStartIndex}function __(i,o,u,d){const g=i.data;if(null===g[u+1]){const y=g[Ai()],I=xd(i,u);Wc(y,d)&&null===o&&!I&&(o=!1),o=function Sr(i,o,u,d){const g=function La(i){const o=An.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let y=d?o.residualClasses:o.residualStyles;if(null===g)0===(d?o.classBindings:o.styleBindings)&&(u=Pd(u=hi(null,i,o,u,d),o.attrs,d),y=null);else{const I=o.directiveStylingLast;if(-1===I||i[I]!==g)if(u=hi(g,i,o,u,d),null===y){let x=function br(i,o,u){const d=u?o.classBindings:o.styleBindings;if(0!==cr(d))return i[Mu(d)]}(i,o,d);void 0!==x&&Array.isArray(x)&&(x=hi(null,i,o,x[1],d),x=Pd(x,o.attrs,d),function Mr(i,o,u,d){i[Mu(u?o.classBindings:o.styleBindings)]=d}(i,o,d,x))}else y=function Ya(i,o,u){let d;const g=o.directiveEnd;for(let y=1+o.directiveStylingLast;y<g;y++)d=Pd(d,i[y].hostAttrs,u);return Pd(d,o.attrs,u)}(i,o,d)}return void 0!==y&&(d?o.residualClasses=y:o.residualStyles=y),u}(g,y,o,d),function Yo(i,o,u,d,g,y){let I=y?o.classBindings:o.styleBindings,O=Mu(I),x=cr(I);i[d]=u;let X,W=!1;if(Array.isArray(u)?(X=u[1],(null===X||At(u,X)>0)&&(W=!0)):X=u,g)if(0!==x){const Ae=Mu(i[O+1]);i[d+1]=Rd(Ae,O),0!==Ae&&(i[Ae+1]=gg(i[Ae+1],d)),i[O+1]=function ov(i,o){return 131071&i|o<<17}(i[O+1],d)}else i[d+1]=Rd(O,0),0!==O&&(i[O+1]=gg(i[O+1],d)),O=d;else i[d+1]=Rd(x,0),0===O?O=d:i[x+1]=gg(i[x+1],d),x=d;W&&(i[d+1]=kh(i[d+1])),xu(i,X,d,!0),xu(i,X,d,!1),function Ru(i,o,u,d,g){const y=g?i.residualClasses:i.residualStyles;null!=y&&"string"==typeof o&&At(y,o)>=0&&(u[d+1]=zc(u[d+1]))}(o,X,i,d,y),I=Rd(O,x),y?o.classBindings=I:o.styleBindings=I}(g,y,o,u,I,d)}}function hi(i,o,u,d,g){let y=null;const I=u.directiveEnd;let O=u.directiveStylingLast;for(-1===O?O=u.directiveStart:O++;O<I&&(y=o[O],d=Pd(d,y.hostAttrs,g),y!==i);)O++;return null!==i&&(u.directiveStylingLast=O),d}function Pd(i,o,u){const d=u?1:2;let g=-1;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?g=I:g===d&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),se(i,I,!!u||o[++y]))}return void 0===i?null:i}function ki(i,o,u,d,g,y,I,O){if(!(3&o.type))return;const x=i.data,W=x[O+1],X=function av(i){return 1==(1&i)}(W)?Er(x,o,u,g,cr(W),I):void 0;ls(X)||(ls(y)||function f_(i){return 2==(2&i)}(W)&&(y=Er(x,null,u,g,O,I)),function im(i,o,u,d,g){if(o)g?i.addClass(u,d):i.removeClass(u,d);else{let y=-1===d.indexOf("-")?void 0:$r.DashCase;null==g?i.removeStyle(u,d,y):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),y|=$r.Important),i.setStyle(u,d,g,y))}}(d,I,ho(Ai(),u),g,y))}function Er(i,o,u,d,g,y){const I=null===o;let O;for(;g>0;){const x=i[g],W=Array.isArray(x),X=W?x[1]:x,he=null===X;let Ae=u[g+1];Ae===Qn&&(Ae=he?ce:void 0);let ze=he?Be(Ae,d):X===d?Ae:void 0;if(W&&!ls(ze)&&(ze=Be(x,d)),ls(ze)&&(O=ze,I))return O;const _t=i[g+1];g=I?Mu(_t):cr(_t)}if(null!==o){let x=y?o.residualClasses:o.residualStyles;null!=x&&(O=Be(x,d))}return O}function ls(i){return void 0!==i}function Wc(i,o){return 0!=(i.flags&(o?8:16))}function Za(i,o=""){const u=R(),d=L(),g=i+Te,y=d.firstCreatePass?_d(d,g,1,o,null):d.data[g],I=u[g]=Qd(u[_n],o);_p(d,u,I,y),bi(y,!1)}function $f(i){return vg("",i,""),$f}function vg(i,o,u){const d=R(),g=hc(d,i,o,u);return g!==Qn&&function jc(i,o,u){const d=ho(o,i);io(i[_n],d,u)}(d,Ai(),g),vg}function Bh(i,o,u,d,g){xa(se,eu,function Sd(i,o,u,d,g,y){const O=Ol(i,Ji(),u,g);return vs(2),O?o+Ie(u)+d+Ie(g)+y:Qn}(R(),i,o,u,d,g),!0)}function T_(i,o,u){const d=R();return ao(d,ra(),o)&&Ma(L(),ii(),d,i,o,d[_n],u,!0),T_}const tu=void 0;var Ld=["en",[["a","p"],["AM","PM"],tu],[["AM","PM"],tu,tu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tu,"{1} 'at' {0}",tu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Eg(i){const u=Math.floor(Math.abs(i)),d=i.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Pa={};function tr(i){const o=function Y0(i){return i.toLowerCase().replace(/_/g,"-")}(i);let u=wv(o);if(u)return u;const d=o.split("-")[0];if(u=wv(d),u)return u;if("en"===d)return Ld;throw new Qe(701,!1)}function pc(i){return tr(i)[jn.PluralCase]}function wv(i){return i in Pa||(Pa[i]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[i]),Pa[i]}var jn=(()=>((jn=jn||{})[jn.LocaleId=0]="LocaleId",jn[jn.DayPeriodsFormat=1]="DayPeriodsFormat",jn[jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",jn[jn.DaysFormat=3]="DaysFormat",jn[jn.DaysStandalone=4]="DaysStandalone",jn[jn.MonthsFormat=5]="MonthsFormat",jn[jn.MonthsStandalone=6]="MonthsStandalone",jn[jn.Eras=7]="Eras",jn[jn.FirstDayOfWeek=8]="FirstDayOfWeek",jn[jn.WeekendRange=9]="WeekendRange",jn[jn.DateFormat=10]="DateFormat",jn[jn.TimeFormat=11]="TimeFormat",jn[jn.DateTimeFormat=12]="DateTimeFormat",jn[jn.NumberSymbols=13]="NumberSymbols",jn[jn.NumberFormats=14]="NumberFormats",jn[jn.CurrencyCode=15]="CurrencyCode",jn[jn.CurrencySymbol=16]="CurrencySymbol",jn[jn.CurrencyName=17]="CurrencyName",jn[jn.Currencies=18]="Currencies",jn[jn.Directionality=19]="Directionality",jn[jn.PluralCase=20]="PluralCase",jn[jn.ExtraData=21]="ExtraData",jn))();const Dv=["zero","one","two","few","many"],Zo="en-US",kl={marker:"element"},nu={marker:"ICU"};var us=(()=>((us=us||{})[us.SHIFT=2]="SHIFT",us[us.APPEND_EAGERLY=1]="APPEND_EAGERLY",us[us.COMMENT=2]="COMMENT",us))();let Iv=Zo;function Fl(i){(function Rt(i,o){null==i&&Mt(o,i,null,"!=")})(i,"Expected localeId to be defined"),"string"==typeof i&&(Iv=i.toLowerCase().replace(/_/g,"-"))}function Cv(i,o,u){const d=o.insertBeforeIndex,g=Array.isArray(d)?d[0]:d;return null===g?oy(i,0,u):Or(u[g])}function Tv(i,o,u,d,g){const y=o.insertBeforeIndex;if(Array.isArray(y)){let I=d,O=null;if(3&o.type||(O=I,I=g),null!==I&&-1===o.componentOffset)for(let x=1;x<y.length;x++)Ha(i,I,u[y[x]],O,!1)}}function wg(i,o){if(i.push(o),i.length>1)for(let u=i.length-2;u>=0;u--){const d=i[u];Sv(d)||Dg(d,o)&&null===Av(d)&&Ig(d,o.index)}}function Sv(i){return!(64&i.type)}function Dg(i,o){return Sv(o)||i.index>o.index}function Av(i){const o=i.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function Ig(i,o){const u=i.insertBeforeIndex;Array.isArray(u)?u[0]=o:($a(Cv,Tv),i.insertBeforeIndex=o)}function Vh(i,o){const u=i.data[o];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function Gh(i,o,u){const d=Df(i,u,64,null,null);return wg(o,d),d}function gc(i,o){const u=o[i.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function jh(i){return i>>>17}function Tg(i){return(131070&i)>>>1}let Ll=0,Hh=0;function pl(i,o,u,d){const g=u[_n];let I,y=null;for(let O=0;O<o.length;O++){const x=o[O];if("string"==typeof x){const W=o[++O];null===u[W]&&(u[W]=Qd(g,x))}else if("number"==typeof x)switch(1&x){case 0:const W=jh(x);let X,he;if(null===y&&(y=W,I=Ri(g,d)),W===y?(X=d,he=I):(X=null,he=Or(u[W])),null!==he){const Bt=Tg(x);Ha(g,he,u[Bt],X,!1);const dn=Vh(i,Bt);if(null!==dn&&"object"==typeof dn){const Un=gc(dn,u);null!==Un&&pl(i,dn.create[Un],u,u[dn.anchorIdx])}}break;case 1:const ze=o[++O],_t=o[++O];Jp(g,ho(x>>>1,u),null,null,ze,_t,null)}else switch(x){case nu:const W=o[++O],X=o[++O];null===u[X]&&os(u[X]=Mi(g,W),u);break;case kl:const he=o[++O],Ae=o[++O];null===u[Ae]&&os(u[Ae]=Ju(g,he,null),u)}}}function Ag(i,o,u,d,g){for(let y=0;y<u.length;y++){const I=u[y],O=u[++y];if(I&g){let x="";for(let W=y+1;W<=y+O;W++){const X=u[W];if("string"==typeof X)x+=X;else if("number"==typeof X)if(X<0)x+=Ie(o[d-X]);else{const he=X>>>2;switch(3&X){case 1:const Ae=u[++W],ze=u[++W],_t=i.data[he];"string"==typeof _t?Jp(o[_n],o[he],null,_t,Ae,x,ze):Ma(i,_t,o,Ae,x,o[_n],ze,!1);break;case 0:const Bt=o[he];null!==Bt&&io(o[_n],Bt,x);break;case 2:Nv(i,Vh(i,he),o,x);break;case 3:Og(i,Vh(i,he),d,o)}}}}else{const x=u[y+1];if(x>0&&3==(3&x)){const X=Vh(i,x>>>2);o[X.currentCaseLViewIndex]<0&&Og(i,X,d,o)}}y+=O}}function Og(i,o,u,d){let g=d[o.currentCaseLViewIndex];if(null!==g){let y=Ll;g<0&&(g=d[o.currentCaseLViewIndex]=~g,y=-1),Ag(i,d,o.update[g],u,y)}}function Nv(i,o,u,d){const g=function $h(i,o){let u=i.cases.indexOf(o);if(-1===u)switch(i.type){case 1:{const d=function Z0(i,o){const u=pc(o)(parseInt(i,10)),d=Dv[u];return void 0!==d?d:"other"}(o,function J0(){return Iv}());u=i.cases.indexOf(d),-1===u&&"other"!==d&&(u=i.cases.indexOf("other"));break}case 0:u=i.cases.indexOf("other")}return-1===u?null:u}(o,d);if(gc(o,u)!==g&&(Ng(i,o,u),u[o.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const I=u[o.anchorIdx];I&&pl(i,o.create[g],u,I)}}function Ng(i,o,u){let d=gc(o,u);if(null!==d){const g=o.remove[d];for(let y=0;y<g.length;y++){const I=g[y];if(I>0){const O=ho(I,u);null!==O&&rm(u[_n],O)}else Ng(i,Vh(i,~I),u)}}}function Ud(){const i=[];let u,d,o=-1;function y(O,x){o=0;const W=gc(O,x);d=null!==W?O.remove[W]:ce}function I(){if(o<d.length){const O=d[o++];return O>0?u[O]:(i.push(o,d),y(u[qt].data[~O],u),I())}return 0===i.length?null:(d=i.pop(),o=i.pop(),I())}return function g(O,x){for(u=x;i.length;)i.pop();return y(O.value,x),I}}const zh=/\ufffd(\d+):?\d*\ufffd/gi,Mg=/\ufffd(\d+)\ufffd/,Bd=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,_c="\ufffd",Rg=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Zc=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,xg=/\uE500/g;function Gd(i,o,u,d,g,y,I){const O=Jl(i,d,1,null);let x=O<<us.SHIFT,W=Si();o===W&&(W=null),null===W&&(x|=us.APPEND_EAGERLY),I&&(x|=us.COMMENT,function On(i){void 0===Ft&&(Ft=i())}(Ud)),g.push(x,null===y?"":y);const X=Df(i,O,I?32:1,null===y?"":y,null);wg(u,X);const he=X.index;return bi(X,!1),null!==W&&o!==W&&function Cg(i,o){let u=i.insertBeforeIndex;null===u?($a(Cv,Tv),u=i.insertBeforeIndex=[null,o]):(function bt(i,o,u){i!=o&&Mt(u,i,o,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(o))}(W,he),X}function Pg(i,o,u,d,g,y,I){const O=I.match(zh),x=Gd(i,o,u,y,d,O?null:I,!1);O&&ru(g,I,x.index,null,0,null)}function ru(i,o,u,d,g,y){const I=i.length,O=I+1;i.push(null,null);const x=I+2,W=o.split(zh);let X=0;for(let he=0;he<W.length;he++){const Ae=W[he];if(1&he){const ze=g+parseInt(Ae,10);i.push(-1-ze),X|=A_(ze)}else""!==Ae&&i.push(Ae)}return i.push(u<<2|(d?1:0)),d&&i.push(d,y),i[I]=X,i[O]=i.length-x,X}function A_(i){return 1<<Math.min(i,31)}function yc(i){let o,y,u="",d=0,g=!1;for(;null!==(o=Rg.exec(i));)g?o[0]===`${_c}/*${y}${_c}`&&(d=o.index,g=!1):(u+=i.substring(d,o.index+o[0].length),y=o[1],g=!0);return u+=i.slice(d),u}function ep(i,o,u,d,g,y){let I=0;const O={type:g.type,currentCaseLViewIndex:Jl(i,o,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function ob(i,o,u){i.push(A_(o.mainBinding),2,-1-o.mainBinding,u<<2|2)})(u,g,y),function S_(i,o,u){const d=i.data[o];null===d?i.data[o]=u:d.value=u}(i,y,O);const x=g.values;for(let W=0;W<x.length;W++){const X=x[W],he=[];for(let Ae=0;Ae<X.length;Ae++){const ze=X[Ae];if("string"!=typeof ze){const _t=he.push(ze)-1;X[Ae]=`\x3c!--\ufffd${_t}\ufffd--\x3e`}}I=ib(i,O,o,u,d,g.cases[W],X.join(""),he)|I}I&&function ab(i,o,u){i.push(o,1,u<<2|3)}(u,I,y)}function Bu(i){const o=[],u=[];let d=1,g=0;const y=O_(i=i.replace(Bd,function(I,O,x){return d="select"===x?0:1,g=parseInt(O.slice(1),10),""}));for(let I=0;I<y.length;){let O=y[I++].trim();1===d&&(O=O.replace(/\s*(?:=)?(\w+)\s*/,"$1")),O.length&&o.push(O);const x=O_(y[I++]);o.length>u.length&&u.push(x)}return{type:d,mainBinding:g,cases:o,values:u}}function O_(i){if(!i)return[];let o=0;const u=[],d=[],g=/[{}]/g;let y;for(g.lastIndex=0;y=g.exec(i);){const O=y.index;if("}"==y[0]){if(u.pop(),0==u.length){const x=i.substring(o,O);Bd.test(x)?d.push(Bu(x)):d.push(x),o=O+1}}else{if(0==u.length){const x=i.substring(o,O);d.push(x),o=O+1}u.push("{")}}const I=i.substring(o);return d.push(I),d}function ib(i,o,u,d,g,y,I,O){const x=[],W=[],X=[];o.cases.push(y),o.create.push(x),o.remove.push(W),o.update.push(X);const Ae=function Ip(i){const o=new om(i);return function h0(){try{return!!(new window.DOMParser).parseFromString(wu(""),"text/html")}catch{return!1}}()?new gy(o):o}(function cy(){return void 0!==Xu?Xu:typeof document<"u"?document:void 0}()).getInertBodyElement(I),ze=function cm(i){return"content"in i&&function m0(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}(Ae)||Ae;return ze?Mv(i,o,u,d,x,W,X,ze,g,O,0):0}function Mv(i,o,u,d,g,y,I,O,x,W,X){let he=0,Ae=O.firstChild;for(;Ae;){const ze=Jl(i,u,1,null);switch(Ae.nodeType){case Node.ELEMENT_NODE:const _t=Ae,Bt=_t.tagName.toLowerCase();if(lm.hasOwnProperty(Bt)){tp(g,kl,Bt,x,ze),i.data[ze]=Bt;const Gt=_t.attributes;for(let Bn=0;Bn<Gt.length;Bn++){const fi=Gt.item(Bn),xs=fi.name.toLowerCase();fi.value.match(zh)?uh.hasOwnProperty(xs)&&ru(I,fi.value,ze,fi.name,0,Sp[xs]?Cp:null):Rv(g,ze,fi)}he=Mv(i,o,u,d,g,y,I,Ae,ze,W,X+1)|he,vc(y,ze,X)}break;case Node.TEXT_NODE:const sn=Ae.textContent||"",dn=sn.match(zh);tp(g,null,dn?"":sn,x,ze),vc(y,ze,X),dn&&(he=ru(I,sn,ze,null,0,null)|he);break;case Node.COMMENT_NODE:const Un=Mg.exec(Ae.textContent||"");if(Un){const Bn=W[parseInt(Un[1],10)];tp(g,nu,"",x,ze),ep(i,u,d,x,Bn,ze),sb(y,ze,X)}}Ae=Ae.nextSibling}return he}function vc(i,o,u){0===u&&i.push(o)}function sb(i,o,u){0===u&&(i.push(~o),i.push(o))}function tp(i,o,u,d,g){null!==o&&i.push(o),i.push(u,g,function Ov(i,o,u){return i|o<<17|u<<1}(0,d,g))}function Rv(i,o,u){i.push(o<<1|1,u.name,u.value)}function rp(i,o,u=-1){const d=L(),g=R(),y=Te+i,I=ji(d.consts,o),O=Si();d.firstCreatePass&&function ns(i,o,u,d,g,y){const I=Si(),O=[],x=[],W=[[]];g=function Ul(i,o){if(function Uu(i){return-1===i}(o))return yc(i);{const u=i.indexOf(`:${o}${_c}`)+2+o.toString().length,d=i.search(new RegExp(`${_c}\\/\\*\\d+:${o}${_c}`));return yc(i.substring(u,d))}}(g,y);const X=function Vd(i){return i.replace(xg," ")}(g).split(Zc);for(let he=0;he<X.length;he++){let Ae=X[he];if(1&he){const ze=47===Ae.charCodeAt(0),Bt=(Ae.charCodeAt(ze?1:0),Te+Number.parseInt(Ae.substring(ze?2:1)));if(ze)W.shift(),bi(Si(),!1);else{const sn=Gh(i,W[0],Bt);W.unshift([]),bi(sn,!0)}}else{const ze=O_(Ae);for(let _t=0;_t<ze.length;_t++){let Bt=ze[_t];if(1&_t){const sn=Bt;if("object"!=typeof sn)throw new Error(`Unable to parse ICU expression in "${g}" message.`);ep(i,u,x,o,sn,Gd(i,I,W[0],u,O,"",!0).index)}else""!==Bt&&Pg(i,I,W[0],O,x,u,Bt)}}}i.data[d]={create:O,update:x}}(d,null===O?0:O.index,g,y,I,u);const x=d.data[y],X=Oc(d,O===g[yr]?null:O,g);(function eb(i,o,u,d){const g=i[_n];for(let y=0;y<o.length;y++){const I=o[y++],O=o[y],W=(I&us.APPEND_EAGERLY)===us.APPEND_EAGERLY,X=I>>>us.SHIFT;let he=i[X];null===he&&(he=i[X]=(I&us.COMMENT)===us.COMMENT?g.createComment(O):Qd(g,O)),W&&null!==u&&Ha(g,u,he,d,!1)}})(g,x.create,X,O&&8&O.type?g[O.index]:null),_a(!0)}function ip(i,o,u){rp(i,o,u),function R_(){_a(!1)}()}function Ug(i){return function Q0(i){i&&(Ll|=1<<Math.min(Hh,31)),Hh++}(ao(R(),ra(),i)),Ug}function x_(i){!function X0(i,o,u){if(Hh>0){const d=i.data[u];Ag(i,o,Array.isArray(d)?d:d.update,Ji()-Hh-1,Ll)}Ll=0,Hh=0}(L(),R(),i+Te)}function a(i,o,u,d,g){if(i=Re(i),Array.isArray(i))for(let y=0;y<i.length;y++)a(i[y],o,u,d,g);else{const y=L(),I=R();let O=kc(i)?i:Re(i.provide),x=C0(i);const W=rn(),X=1048575&W.providerIndexes,he=W.directiveStart,Ae=W.providerIndexes>>20;if(kc(i)||!i.multi){const ze=new Je(x,g,md),_t=c(O,o,g?X:X+Ae,he);-1===_t?(yn(Fn(W,I),y,O),e(y,i,o.length),o.push(O),W.directiveStart++,W.directiveEnd++,g&&(W.providerIndexes+=1048576),u.push(ze),I.push(ze)):(u[_t]=ze,I[_t]=ze)}else{const ze=c(O,o,X+Ae,he),_t=c(O,o,X,X+Ae),sn=_t>=0&&u[_t];if(g&&!sn||!g&&!(ze>=0&&u[ze])){yn(Fn(W,I),y,O);const dn=function N(i,o,u,d,g){const y=new Je(i,u,md);return y.multi=[],y.index=o,y.componentProviders=0,r(y,g,d&&!u),y}(g?_:f,u.length,g,d,x);!g&&sn&&(u[_t].providerFactory=dn),e(y,i,o.length,0),o.push(O),W.directiveStart++,W.directiveEnd++,g&&(W.providerIndexes+=1048576),u.push(dn),I.push(dn)}else e(y,i,ze>-1?ze:_t,r(u[g?_t:ze],x,!g&&d));!g&&d&&sn&&u[_t].componentProviders++}}}function e(i,o,u,d){const g=kc(o),y=function w0(i){return!!i.useClass}(o);if(g||y){const x=(y?Re(o.useClass):o).prototype.ngOnDestroy;if(x){const W=i.destroyHooks||(i.destroyHooks=[]);if(!g&&o.multi){const X=W.indexOf(u);-1===X?W.push(u,[d,x]):W[X+1].push(d,x)}else W.push(u,x)}}}function r(i,o,u){return u&&i.componentProviders++,i.multi.push(o)-1}function c(i,o,u,d){for(let g=u;g<d;g++)if(o[g]===i)return g;return-1}function f(i,o,u,d){return w(this.multi,[])}function _(i,o,u,d){const g=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,O=Nr(u,u[qt],this.providerFactory.index,d);y=O.slice(0,I),w(g,y);for(let x=I;x<O.length;x++)y.push(O[x])}else y=[],w(g,y);return y}function w(i,o){for(let u=0;u<i.length;u++)o.push((0,i[u])());return o}function H(i,o=[]){return u=>{u.providersResolver=(d,g)=>function Fv(i,o,u){const d=L();if(d.firstCreatePass){const g=fs(i);a(u,d.data,d.blueprint,g,!0),a(o,d.data,d.blueprint,g,!1)}}(d,g?g(i):i,o)}}class q{}class ae{}function Se(i,o){return new Tt(i,o??null)}class Tt extends q{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ng(this);const d=Wi(o);this._bootstrapComponents=Wa(d.bootstrap),this._r3Injector=yf(o,u,[{provide:q,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver}],Pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Vt extends ae{constructor(o){super(),this.moduleType=o}create(o){return new Tt(this.moduleType,o)}}class ln extends q{constructor(o,u,d){super(),this.componentFactoryResolver=new ng(this),this.instance=null;const g=new dd([...o,{provide:q,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver}],u||dh(),d,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function wn(i,o,u=null){return new ln(i,o,u).injector}let Ii=(()=>{class i{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=by(0,u.type),g=d.length>0?wn([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,g)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=ft({token:i,providedIn:"environment",factory:()=>new i(Lt(Tl))}),i})();function Ms(i){i.getStandaloneInjector=o=>o.get(Ii).getOrCreateStandaloneInjector(i)}function cb(i,o,u,d){return Hd(R(),li(),i,o,u,d)}function jd(i,o,u,d,g){return function Bg(i,o,u,d,g,y,I){const O=o+u;return Ol(i,O,g,y)?da(i,O+2,I?d.call(I,g,y):d(g,y)):k_(i,O+2)}(R(),li(),i,o,u,d,g)}function P_(i,o,u,d,g,y){return function aE(i,o,u,d,g,y,I,O){const x=o+u;return function Td(i,o,u,d,g){const y=Ol(i,o,u,d);return ao(i,o+2,g)||y}(i,x,g,y,I)?da(i,x+3,O?d.call(O,g,y,I):d(g,y,I)):k_(i,x+3)}(R(),li(),i,o,u,d,g,y)}function k_(i,o){const u=i[o];return u===Qn?void 0:u}function Hd(i,o,u,d,g,y){const I=o+u;return ao(i,I,g)?da(i,I+1,y?d.call(y,g):d(g)):k_(i,I+1)}function F_(i,o){const u=L();let d;const g=i+Te;u.firstCreatePass?(d=function cE(i,o){if(o)for(let u=o.length-1;u>=0;u--){const d=o[u];if(i===d.name)return d}}(o,u.pipeRegistry),u.data[g]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(g,d.onDestroy)):d=u.data[g];const y=d.factory||(d.factory=Gi(d.type)),I=wr(md);try{const O=Ea(!1),x=y();return Ea(O),function $0(i,o,u,d){u>=i.data.length&&(i.data[u]=null,i.blueprint[u]=null),o[u]=d}(u,R(),g,x),x}finally{wr(I)}}function Vv(i,o,u){const d=i+Te,g=R(),y=ys(g,d);return function Gg(i,o){return i[qt].data[o].pure}(g,d)?Hd(g,li(),o,y.transform,u,y):y.transform(u)}function sp(i){return o=>{setTimeout(i,void 0,o)}}const iu=class hE extends b.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){let g=o,y=u||(()=>null),I=d;if(o&&"object"==typeof o){const x=o;g=x.next?.bind(x),y=x.error?.bind(x),I=x.complete?.bind(x)}this.__isAsync&&(y=sp(y),g&&(g=sp(g)),I&&(I=sp(I)));const O=super.subscribe({next:g,error:y,complete:I});return o instanceof Z.w0&&o.add(O),O}};function hb(){return this._results[Symbol.iterator]()}class L_{get changes(){return this._changes||(this._changes=new iu)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=L_.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=hb)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const g=function Qi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Ga(i,o,u){if(i.length!==o.length)return!1;for(let d=0;d<i.length;d++){let g=i[d],y=o[d];if(u&&(g=u(g),y=u(y)),y!==g)return!1}return!0}(d._results,g,u))&&(d._results=g,d.length=g.length,d.last=g[this.length-1],d.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let op=(()=>{class i{}return i.__NG_ELEMENT_ID__=Cw,i})();const Iw=op,U_=class extends Iw{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o,u){const d=this._declarationTContainer.tView,g=vo(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,u||null);g[is]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[vi];return null!==I&&(g[vi]=I.createEmbeddedView(d)),cc(d,g,o),new Th(g)}};function Cw(){return jv(rn(),R())}function jv(i,o){return 4&i.type?new U_(o,i,_e(i,o)):null}let Hv=(()=>{class i{}return i.__NG_ELEMENT_ID__=fb,i})();function fb(){return pE(rn(),R())}const pb=Hv,fE=class extends pb{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return _e(this._hostTNode,this._hostLView)}get injector(){return new gr(this._hostTNode,this._hostLView)}get parentInjector(){const o=sr(this._hostTNode,this._hostLView);if(si(o)){const u=ol(o,this._hostLView),d=Co(o);return new gr(u[qt].data[d+8],u)}return new gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=gb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-kn}createEmbeddedView(o,u,d){let g,y;"number"==typeof d?g=d:null!=d&&(g=d.index,y=d.injector);const I=o.createEmbeddedView(u||{},y);return this.insert(I,g),I}createComponent(o,u,d,g,y){const I=o&&!function to(i){return"function"==typeof i}(o);let O;if(I)O=u;else{const he=u||{};O=he.index,d=he.injector,g=he.projectableNodes,y=he.environmentInjector||he.ngModuleRef}const x=I?o:new Ra($n(o)),W=d||this.parentInjector;if(!y&&null==x.ngModule){const Ae=(I?W:this.parentInjector).get(Tl,null);Ae&&(y=Ae)}const X=x.create(W,g,void 0,y);return this.insert(X.hostView,O),X}insert(o,u){const d=o._lView,g=d[qt];if(function fo(i){return fr(i[ar])}(d)){const X=this.indexOf(o);if(-1!==X)this.detach(X);else{const he=d[ar],Ae=new fE(he,he[yr],he[ar]);Ae.detach(Ae.indexOf(o))}}const y=this._adjustIndex(u),I=this._lContainer;!function vu(i,o,u,d){const g=kn+d,y=u.length;d>0&&(u[g-1][kr]=o),d<y-kn?(o[kr]=u[g],gu(u,kn+d,o)):(u.push(o),o[kr]=null),o[ar]=u;const I=o[is];null!==I&&u!==I&&function lf(i,o){const u=i[Xn];o[yi]!==o[ar][ar][yi]&&(i[Wt]=!0),null===u?i[Xn]=[o]:u.push(o)}(I,o);const O=o[vi];null!==O&&O.insertView(i),o[En]|=64}(g,d,I,y);const O=ql(y,I),x=d[_n],W=Ri(x,I[hn]);return null!==W&&function id(i,o,u,d,g,y){d[mi]=g,d[yr]=o,yp(i,d,u,1,g,y)}(g,I[yr],x,d,W,O),o.attachToViewContainerRef(),gu(mb(I),y,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=gb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=Xd(this._lContainer,u);d&&(T(mb(this._lContainer),u),od(d[qt],d))}detach(o){const u=this._adjustIndex(o,-1),d=Xd(this._lContainer,u);return d&&null!=T(mb(this._lContainer),u)?new Th(d):null}_adjustIndex(o,u=0){return o??this.length+u}};function gb(i){return i[Mn]}function mb(i){return i[Mn]||(i[Mn]=[])}function pE(i,o){let u;const d=o[i.index];if(fr(d))u=d;else{let g;if(8&i.type)g=Or(d);else{const y=o[_n];g=y.createComment("");const I=oi(i,o);Ha(y,Ri(y,I),g,function Jr(i,o){return i.nextSibling(o)}(y,I),!1)}o[i.index]=u=Tf(d,o,g,i),Qp(o,u)}return new fE(u,i,o)}class $v{constructor(o){this.queryList=o,this.matches=null}clone(){return new $v(this.queryList)}setDirty(){this.queryList.setDirty()}}class B_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,g=[];for(let y=0;y<d;y++){const I=u.getByIndex(y);g.push(this.queries[I.indexInDeclarationView].clone())}return new B_(g)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==yb(o,u).matches&&this.queries[u].setDirty()}}class zv{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class V_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const g=null!==u?u.length:0,y=this.getByIndex(d).embeddedTView(o,g);y&&(y.indexInDeclarationView=d,null!==u?u.push(y):u=[y])}return null!==u?new V_(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class jg{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new jg(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let g=0;g<d.length;g++){const y=d[g];this.matchTNodeWithReadOption(o,u,ap(u,y)),this.matchTNodeWithReadOption(o,u,Da(u,o,y,!1,!1))}else d===op?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Da(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const g=this.metadata.read;if(null!==g)if(g===za||g===Hv||g===op&&4&u.type)this.addMatch(u.index,-2);else{const y=Da(u,o,g,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ap(i,o){const u=i.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function gE(i,o,u,d){return-1===u?function _b(i,o){return 11&i.type?_e(i,o):4&i.type?jv(i,o):null}(o,i):-2===u?function Tw(i,o,u){return u===za?_e(o,i):u===op?jv(o,i):u===Hv?pE(o,i):void 0}(i,o,d):Nr(i,i[qt],u,o)}function G_(i,o,u,d){const g=o[vi].queries[d];if(null===g.matches){const y=i.data,I=u.matches,O=[];for(let x=0;x<I.length;x+=2){const W=I[x];O.push(W<0?null:gE(o,y[W],I[x+1],u.metadata.read))}g.matches=O}return g.matches}function Wv(i,o,u,d){const g=i.queries.getByIndex(u),y=g.matches;if(null!==y){const I=G_(i,o,g,u);for(let O=0;O<y.length;O+=2){const x=y[O];if(x>0)d.push(I[O/2]);else{const W=y[O+1],X=o[-x];for(let he=kn;he<X.length;he++){const Ae=X[he];Ae[is]===Ae[ar]&&Wv(Ae[qt],Ae,W,d)}if(null!==X[Xn]){const he=X[Xn];for(let Ae=0;Ae<he.length;Ae++){const ze=he[Ae];Wv(ze[qt],ze,W,d)}}}}}return d}function mE(i){const o=R(),u=L(),d=bl();va(d+1);const g=yb(u,d);if(i.dirty&&function pa(i){return 4==(4&i[En])}(o)===(2==(2&g.metadata.flags))){if(null===g.matches)i.reset([]);else{const y=g.crossesNgTemplate?Wv(u,o,d,[]):G_(u,o,g,d);i.reset(y,wy),i.notifyOnChanges()}return!0}return!1}function Hg(i,o,u){const d=L();d.firstCreatePass&&(qv(d,new zv(i,o,u),-1),2==(2&o)&&(d.staticViewQueries=!0)),yE(d,R(),o)}function Kv(i,o,u,d){const g=L();if(g.firstCreatePass){const y=rn();qv(g,new zv(o,u,d),y.index),function Yv(i,o){const u=i.contentQueries||(i.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(i.queries.length-1,o)}(g,i),2==(2&u)&&(g.staticContentQueries=!0)}yE(g,R(),u)}function _E(){return function Sw(i,o){return i[vi].queries[o].queryList}(R(),bl())}function yE(i,o,u){const d=new L_(4==(4&u));vd(i,o,d,d.destroy),null===o[vi]&&(o[vi]=new B_),o[vi].queries.push(new $v(d))}function qv(i,o,u){null===i.queries&&(i.queries=new V_),i.queries.track(new jg(o,u))}function yb(i,o){return i.queries.getByIndex(o)}function vE(i,o){return jv(i,o)}function lp(i){return!!Wi(i)}function q_(...i){}const Qv=new Ur("Application Initializer");let Y_=(()=>{class i{constructor(u){this.appInits=u,this.resolve=q_,this.reject=q_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,g)=>{this.resolve=d,this.reject=g})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const y=this.appInits[g]();if(kf(y))u.push(y);else if(Lf(y)){const I=new Promise((O,x)=>{y.subscribe({complete:O,error:x})});u.push(I)}}Promise.all(u).then(()=>{d()}).catch(g=>{this.reject(g)}),0===u.length&&d(),this.initialized=!0}}return i.\u0275fac=function(u){return new(u||i)(Lt(Qv,8))},i.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ml=new Ur("AppId",{providedIn:"root",factory:function Z_(){return`${qg()}${qg()}${qg()}`}});function qg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ou=new Ur("Platform Initializer"),dp=new Ur("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let hp=(()=>{class i{log(u){console.log(u)}warn(u){console.warn(u)}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Xv=new Ur("LocaleId",{providedIn:"root",factory:()=>Ue(Xv,kt.Optional|kt.SkipSelf)||function ND(){return typeof $localize<"u"&&$localize.locale||Zo}()}),Vw=new Ur("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Gw{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let jw=(()=>{class i{compileModuleSync(u){return new Vt(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),y=Wa(Wi(u).declarations).reduce((I,O)=>{const x=$n(O);return x&&I.push(new Ra(x)),I},[]);return new Gw(d,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const BE=(()=>Promise.resolve(0))();function t0(i){typeof Zone>"u"?BE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ju{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new iu(!1),this.onMicrotaskEmpty=new iu(!1),this.onStable=new iu(!1),this.onError=new iu(!1),typeof Zone>"u")throw new Qe(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!d&&u,g.shouldCoalesceRunChangeDetection=d,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function Ec(){let i=mn.requestAnimationFrame,o=mn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Ww(i){const o=()=>{!function VE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(mn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Mb(i),i.isCheckStableRunning=!0,Nb(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Mb(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,g,y,I,O)=>{try{return GE(i),u.invokeTask(g,y,I,O)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||i.shouldCoalesceRunChangeDetection)&&o(),jE(i)}},onInvoke:(u,d,g,y,I,O,x)=>{try{return GE(i),u.invoke(g,y,I,O,x)}finally{i.shouldCoalesceRunChangeDetection&&o(),jE(i)}},onHasTask:(u,d,g,y)=>{u.hasTask(g,y),d===g&&("microTask"==y.change?(i._hasPendingMicrotasks=y.microTask,Mb(i),Nb(i)):"macroTask"==y.change&&(i.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,d,g,y)=>(u.handleError(g,y),i.runOutsideAngular(()=>i.onError.emit(y)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ju.isInAngularZone())throw new Qe(909,!1)}static assertNotInAngularZone(){if(ju.isInAngularZone())throw new Qe(909,!1)}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,g){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+g,o,zw,q_,q_);try{return y.runTask(I,u,d)}finally{y.cancelTask(I)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const zw={};function Nb(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Mb(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function GE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function jE(i){i._nesting--,Nb(i)}class Kw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new iu,this.onMicrotaskEmpty=new iu,this.onStable=new iu,this.onError=new iu}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,g){return o.apply(u,d)}}const HE=new Ur(""),$E=new Ur("");let Rb,qw=(()=>{class i{constructor(u,d,g){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Rb||(function Yw(i){Rb=i}(g),g.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ju.assertNotInAngularZone(),t0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())t0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,g){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:g})}whenStable(u,d,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,g){return[]}}return i.\u0275fac=function(u){return new(u||i)(Lt(ju),Lt(zE),Lt($E))},i.\u0275prov=ft({token:i,factory:i.\u0275fac}),i})(),zE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Rb?.findTestabilityInTree(this,u,d)??null}}return i.\u0275fac=function(u){return new(u||i)},i.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const $d=!1;let Yh=null;const WE=new Ur("AllowMultipleToken"),xb=new Ur("PlatformDestroyListeners"),KE=new Ur("appBootstrapListener");class Pb{constructor(o,u){this.name=o,this.token=u}}function YE(i,o,u=[]){const d=`Platform: ${o}`,g=new Ur(d);return(y=[])=>{let I=Fb();if(!I||I.injector.get(WE,!1)){const O=[...u,...y,{provide:g,useValue:!0}];i?i(O):function qE(i){if(Yh&&!Yh.get(WE,!1))throw new Qe(400,!1);Yh=i;const o=i.get(JE);(function kb(i){const o=i.get(ou,null);o&&o.forEach(u=>u())})(i)}(function ZE(i=[],o){return oc.create({name:o,providers:[{provide:Rp,useValue:"platform"},{provide:xb,useValue:new Set([()=>Yh=null])},...i]})}(O,d))}return function Xw(i){const o=Fb();if(!o)throw new Qe(401,!1);return o}()}}function Fb(){return Yh?.get(JE)??null}let JE=(()=>{class i{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const g=function Lb(i,o){let u;return u="noop"===i?new Kw:("zone.js"===i?void 0:i)||new ju(o),u}(d?.ngZone,function tD(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(d)),y=[{provide:ju,useValue:g}];return g.run(()=>{const I=oc.create({providers:y,parent:this.injector,name:u.moduleType.name}),O=u.create(I),x=O.injector.get(ph,null);if(!x)throw new Qe(402,!1);return g.runOutsideAngular(()=>{const W=g.onError.subscribe({next:X=>{x.handleError(X)}});O.onDestroy(()=>{r0(this._modules,O),W.unsubscribe()})}),function QE(i,o,u){try{const d=u();return kf(d)?d.catch(g=>{throw o.runOutsideAngular(()=>i.handleError(g)),g}):d}catch(d){throw o.runOutsideAngular(()=>i.handleError(d)),d}}(x,g,()=>{const W=O.injector.get(Y_);return W.runInitializers(),W.donePromise.then(()=>(Fl(O.injector.get(Xv,Zo)||Zo),this._moduleDoBootstrap(O),O))})})}bootstrapModule(u,d=[]){const g=XE({},d);return function Zw(i,o,u){const d=new Vt(u);return Promise.resolve(d)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,g))}_moduleDoBootstrap(u){const d=u.injector.get(n0);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(g=>d.bootstrap(g));else{if(!u.instance.ngDoBootstrap)throw new Qe(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(xb,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(u){return new(u||i)(Lt(oc))},i.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function XE(i,o){return Array.isArray(o)?o.reduce(XE,i):{...i,...o}}let n0=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,d,g){this._zone=u,this._injector=d,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new p.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),I=new p.y(O=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ju.assertNotInAngularZone(),t0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{ju.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{x.unsubscribe(),W.unsubscribe()}});this.isStable=(0,De.T)(y,I.pipe((0,Me.B)()))}bootstrap(u,d){const g=u instanceof Yl;if(!this._injector.get(Y_).done){!g&&Fi(u);throw new Qe(405,$d)}let I;I=g?u:this._injector.get(Zl).resolveComponentFactory(u),this.componentTypes.push(I.componentType);const O=function Jw(i){return i.isBoundToModule}(I)?void 0:this._injector.get(q),W=I.create(oc.NULL,[],d||I.selector,O),X=W.location.nativeElement,he=W.injector.get(HE,null);return he?.registerApplication(X),W.onDestroy(()=>{this.detachView(W.hostView),r0(this.components,W),he?.unregisterApplication(X)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new Qe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;r0(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(KE,[]);d.push(...this._bootstrapListeners),d.forEach(g=>g(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>r0(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Qe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(u){return new(u||i)(Lt(ju),Lt(Tl),Lt(ph))},i.\u0275prov=ft({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function r0(i,o){const u=i.indexOf(o);u>-1&&i.splice(u,1)}function rD(){return!1}let sD=(()=>{class i{}return i.__NG_ELEMENT_ID__=oD,i})();function oD(i){return function aD(i,o,u){if(hs(i)&&!u){const d=ai(i.index,o);return new Th(d,d)}return 47&i.type?new Th(o[yi],o):null}(rn(),R(),16==(16&i))}class rw{constructor(){}supports(o){return Cd(o)}create(o){return new iw(o)}}const hD=(i,o)=>o;class iw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||hD}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,g=0,y=null;for(;u||d;){const I=!d||u&&u.currentIndex<lw(d,g,y)?u:d,O=lw(I,g,y),x=I.currentIndex;if(I===d)g--,d=d._nextRemoved;else if(u=u._next,null==I.previousIndex)g++;else{y||(y=[]);const W=O-g,X=x-g;if(W!=X){for(let Ae=0;Ae<W;Ae++){const ze=Ae<y.length?y[Ae]:y[Ae]=0,_t=ze+Ae;X<=_t&&_t<W&&(y[Ae]=ze+1)}y[I.previousIndex]=X-W}}O!==x&&o(I,O,x)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Cd(o))throw new Qe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let g,y,I,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let O=0;O<this.length;O++)y=o[O],I=this._trackByFn(O,y),null!==u&&Object.is(u.trackById,I)?(d&&(u=this._verifyReinsertion(u,y,I,O)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,I,O),d=!0),u=u._next}else g=0,function ig(i,o){if(Array.isArray(i))for(let u=0;u<i.length;u++)o(i[u]);else{const u=i[Symbol.iterator]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,O=>{I=this._trackByFn(g,O),null!==u&&Object.is(u.trackById,I)?(d&&(u=this._verifyReinsertion(u,O,I,g)),Object.is(u.item,O)||this._addIdentityChange(u,O)):(u=this._mismatch(u,O,I,g),d=!0),u=u._next,g++}),this.length=g;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,g){let y;return null===o?y=this._itTail:(y=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,y,g)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,g))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,y,g)):o=this._addAfter(new sw(u,d),y,g),o}_verifyReinsertion(o,u,d,g){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?o=this._reinsertAfter(y,o._prev,g):o.currentIndex!=g&&(o.currentIndex=g,this._addToMoves(o,g)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const g=o._prevRemoved,y=o._nextRemoved;return null===g?this._removalsHead=y:g._nextRemoved=y,null===y?this._removalsTail=g:y._prevRemoved=g,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const g=null===u?this._itHead:u._next;return o._next=g,o._prev=u,null===g?this._itTail=o:g._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new aw),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class sw{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ow{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class aw{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new ow,this.map.set(u,d)),d.add(o)}get(o,u){const g=this.map.get(o);return g?g.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lw(i,o,u){const d=i.previousIndex;if(null===d)return d;let g=0;return u&&d<u.length&&(g=u[d]),d+o+g}class uw{constructor(){}supports(o){return o instanceof Map||Rf(o)}create(){return new cw}}class cw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Rf(o)))throw new Qe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,g)=>{if(u&&u.key===g)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(g,d);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const g=this._records.get(o);this._maybeAddToChanges(g,u);const y=g._prev,I=g._next;return y&&(y._next=I),I&&(I._prev=y),g._next=null,g._prev=null,g}const d=new fD(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class fD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dw(){return new l0([new rw])}let l0=(()=>{class i{constructor(u){this.factories=u}static create(u,d){if(null!=d){const g=d.factories.slice();u=u.concat(g)}return new i(u)}static extend(u){return{provide:i,useFactory:d=>i.create(u,d||dw()),deps:[[i,new te,new U]]}}find(u){const d=this.factories.find(g=>g.supports(u));if(null!=d)return d;throw new Qe(901,!1)}}return i.\u0275prov=ft({token:i,providedIn:"root",factory:dw}),i})();function hw(){return new Vb([new uw])}let Vb=(()=>{class i{constructor(u){this.factories=u}static create(u,d){if(d){const g=d.factories.slice();u=u.concat(g)}return new i(u)}static extend(u){return{provide:i,useFactory:d=>i.create(u,d||hw()),deps:[[i,new te,new U]]}}find(u){const d=this.factories.find(g=>g.supports(u));if(d)return d;throw new Qe(901,!1)}}return i.\u0275prov=ft({token:i,providedIn:"root",factory:hw}),i})();const mD=YE(null,"core",[]);let _D=(()=>{class i{constructor(u){}}return i.\u0275fac=function(u){return new(u||i)(Lt(n0))},i.\u0275mod=qs({type:i}),i.\u0275inj=xn({}),i})();function n(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ue(i,o){const u=$n(i),d=o.elementInjector||dh();return new Ra(u).create(d,o.projectableNodes,o.hostElement,o.environmentInjector)}},433:(Yt,Ke,V)=>{V.d(Ke,{Fj:()=>gt,NI:()=>rs,u:()=>Ja,cw:()=>Ze,sg:()=>uo,u5:()=>Io,Cf:()=>ke,JU:()=>pt,JJ:()=>qr,JL:()=>mn,UX:()=>ga,kI:()=>ct,_Y:()=>Xn});var b=V(4650),Z=V(6895),p=V(8996),De=V(9751),Me=V(4742),xe=V(8421),Fe=V(3269),Pe=V(5403),Ge=V(3268),be=V(1810),Re=V(4004);let yt=(()=>{class j{constructor(L,oe){this._renderer=L,this._elementRef=oe,this.onChange=lt=>{},this.onTouched=()=>{}}setProperty(L,oe){this._renderer.setProperty(this._elementRef.nativeElement,L,oe)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return j.\u0275fac=function(L){return new(L||j)(b.Y36(b.Qsj),b.Y36(b.SBq))},j.\u0275dir=b.lG2({type:j}),j})(),He=(()=>{class j extends yt{}return j.\u0275fac=function(){let R;return function(oe){return(R||(R=b.n5z(j)))(oe||j)}}(),j.\u0275dir=b.lG2({type:j,features:[b.qOj]}),j})();const pt=new b.OlP("NgValueAccessor"),ut={provide:pt,useExisting:(0,b.Gpc)(()=>gt),multi:!0},Et=new b.OlP("CompositionEventMode");let gt=(()=>{class j extends yt{constructor(L,oe,lt){super(L,oe),this._compositionMode=lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ie(){const j=(0,Z.q)()?(0,Z.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(L){this.setProperty("value",L??"")}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return j.\u0275fac=function(L){return new(L||j)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(Et,8))},j.\u0275dir=b.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,oe){1&L&&b.NdJ("input",function(rn){return oe._handleInput(rn.target.value)})("blur",function(){return oe.onTouched()})("compositionstart",function(){return oe._compositionStart()})("compositionend",function(rn){return oe._compositionEnd(rn.target.value)})},features:[b._Bn([ut]),b.qOj]}),j})();const rt=!1;function Ye(j){return null==j||("string"==typeof j||Array.isArray(j))&&0===j.length}function xt(j){return null!=j&&"number"==typeof j.length}const ke=new b.OlP("NgValidators"),fe=new b.OlP("NgAsyncValidators"),qe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ct{static min(R){return function bt(j){return R=>{if(Ye(R.value)||Ye(j))return null;const L=parseFloat(R.value);return!isNaN(L)&&L<j?{min:{min:j,actual:R.value}}:null}}(R)}static max(R){return function Jt(j){return R=>{if(Ye(R.value)||Ye(j))return null;const L=parseFloat(R.value);return!isNaN(L)&&L>j?{max:{max:j,actual:R.value}}:null}}(R)}static required(R){return function Pt(j){return Ye(j.value)?{required:!0}:null}(R)}static requiredTrue(R){return function We(j){return!0===j.value?null:{required:!0}}(R)}static email(R){return function st(j){return Ye(j.value)||qe.test(j.value)?null:{email:!0}}(R)}static minLength(R){return function $e(j){return R=>Ye(R.value)||!xt(R.value)?null:R.value.length<j?{minlength:{requiredLength:j,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function at(j){return R=>xt(R.value)&&R.value.length>j?{maxlength:{requiredLength:j,actualLength:R.value.length}}:null}(R)}static pattern(R){return function wt(j){if(!j)return dt;let R,L;return"string"==typeof j?(L="","^"!==j.charAt(0)&&(L+="^"),L+=j,"$"!==j.charAt(j.length-1)&&(L+="$"),R=new RegExp(L)):(L=j.toString(),R=j),oe=>{if(Ye(oe.value))return null;const lt=oe.value;return R.test(lt)?null:{pattern:{requiredPattern:L,actualValue:lt}}}}(R)}static nullValidator(R){return null}static compose(R){return bn(R)}static composeAsync(R){return Gn(R)}}function dt(j){return null}function Rt(j){return null!=j}function Mt(j){const R=(0,b.QGY)(j)?(0,p.D)(j):j;if(rt&&!(0,b.CqO)(R)){let L="Expected async validator to return Promise or Observable.";throw"object"==typeof j&&(L+=" Are you using a synchronous validator where an async validator is expected?"),new b.vHH(-1101,L)}return R}function cn(j){let R={};return j.forEach(L=>{R=null!=L?{...R,...L}:R}),0===Object.keys(R).length?null:R}function Kt(j,R){return R.map(L=>L(j))}function ft(j){return j.map(R=>function Xt(j){return!j.validate}(R)?R:L=>R.validate(L))}function bn(j){if(!j)return null;const R=j.filter(Rt);return 0==R.length?null:function(L){return cn(Kt(L,R))}}function xn(j){return null!=j?bn(ft(j)):null}function Gn(j){if(!j)return null;const R=j.filter(Rt);return 0==R.length?null:function(L){return function Ee(...j){const R=(0,Fe.jO)(j),{args:L,keys:oe}=(0,Me.D)(j),lt=new De.y(rn=>{const{length:Fr}=L;if(!Fr)return void rn.complete();const Si=new Array(Fr);let bi=Fr,Qs=Fr;for(let Xs=0;Xs<Fr;Xs++){let Cs=!1;(0,xe.Xf)(L[Xs]).subscribe((0,Pe.x)(rn,ma=>{Cs||(Cs=!0,Qs--),Si[Xs]=ma},()=>bi--,void 0,()=>{(!bi||!Cs)&&(Qs||rn.next(oe?(0,be.n)(oe,Si):Si),rn.complete())}))}});return R?lt.pipe((0,Ge.Z)(R)):lt}(Kt(L,R).map(Mt)).pipe((0,Re.U)(cn))}}function Ln(j){return null!=j?Gn(ft(j)):null}function hr(j,R){return null===j?[R]:Array.isArray(j)?[...j,R]:[j,R]}function Wn(j){return j._rawValidators}function Ar(j){return j._rawAsyncValidators}function Vn(j){return j?Array.isArray(j)?j:[j]:[]}function _r(j,R){return Array.isArray(j)?j.includes(R):j===R}function Rr(j,R){const L=Vn(R);return Vn(j).forEach(lt=>{_r(L,lt)||L.push(lt)}),L}function en(j,R){return Vn(R).filter(L=>!_r(j,L))}class Dn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=xn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Ln(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,L){return!!this.control&&this.control.hasError(R,L)}getError(R,L){return this.control?this.control.getError(R,L):null}}class kt extends Dn{get formDirective(){return null}get path(){return null}}class Zn extends Dn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let qr=(()=>{class j extends Kr{constructor(L){super(L)}}return j.\u0275fac=function(L){return new(L||j)(b.Y36(Zn,2))},j.\u0275dir=b.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,oe){2&L&&b.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)},features:[b.qOj]}),j})(),mn=(()=>{class j extends Kr{constructor(L){super(L)}}return j.\u0275fac=function(L){return new(L||j)(b.Y36(kt,10))},j.\u0275dir=b.lG2({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,oe){2&L&&b.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)("ng-submitted",oe.isSubmitted)},features:[b.qOj]}),j})();function Lt(j,R){return j?`with name: '${R}'`:`at index: ${R}`}const Ce=!1,ht="VALID",mt="INVALID",ge="PENDING",pe="DISABLED";function ne(j){return(ce(j)?j.validators:j)||null}function Q(j,R){return(ce(R)?R.asyncValidators:j)||null}function ce(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}class Oe{constructor(R,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===ht}get invalid(){return this.status===mt}get pending(){return this.status==ge}get disabled(){return this.status===pe}get enabled(){return this.status!==pe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(Rr(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(Rr(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(en(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(en(R,this._rawAsyncValidators))}hasValidator(R){return _r(this._rawValidators,R)}hasAsyncValidator(R){return _r(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=ge,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const L=this._parentMarkedDirty(R.onlySelf);this.status=pe,this.errors=null,this._forEachChild(oe=>{oe.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:L}),this._onDisabledChange.forEach(oe=>oe(!0))}enable(R={}){const L=this._parentMarkedDirty(R.onlySelf);this.status=ht,this._forEachChild(oe=>{oe.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:L}),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ht||this.status===ge)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pe:ht}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=ge,this._hasOwnPendingAsyncValidator=!0;const L=Mt(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,L={}){this.errors=R,this._updateControlsErrors(!1!==L.emitEvent)}get(R){let L=R;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((oe,lt)=>oe&&oe._find(lt),this)}getError(R,L){const oe=L?this.get(L):this;return oe&&oe.errors?oe.errors[R]:null}hasError(R,L){return!!this.getError(R,L)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?pe:this.errors?mt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ge)?ge:this._anyControlsHaveStatus(mt)?mt:ht}_anyControlsHaveStatus(R){return this._anyControls(L=>L.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){ce(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function ie(j){return Array.isArray(j)?xn(j):j||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function Le(j){return Array.isArray(j)?Ln(j):j||null}(this._rawAsyncValidators)}}class Ze extends Oe{constructor(R,L,oe){super(ne(L),Q(oe,L)),this.controls=R,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,L){return this.controls[R]?this.controls[R]:(this.controls[R]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(R,L,oe={}){this.registerControl(R,L),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(R,L={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(R,L,oe={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],L&&this.registerControl(R,L),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,L={}){(function le(j,R,L){j._forEachChild((oe,lt)=>{if(void 0===L[lt])throw new b.vHH(1002,Ce?function ye(j,R){return`Must supply a value for form control ${Lt(j,R)}`}(R,lt):"")})})(this,!0,R),Object.keys(R).forEach(oe=>{(function me(j,R,L){const oe=j.controls;if(!(R?Object.keys(oe):oe).length)throw new b.vHH(1e3,Ce?function It(j){return`\n    There are no form controls registered with this ${j?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(R):"");if(!oe[L])throw new b.vHH(1001,Ce?function Ue(j,R){return`Cannot find form control ${Lt(j,R)}`}(R,L):"")})(this,!0,oe),this.controls[oe].setValue(R[oe],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(R,L={}){null!=R&&(Object.keys(R).forEach(oe=>{const lt=this.controls[oe];lt&&lt.patchValue(R[oe],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(R={},L={}){this._forEachChild((oe,lt)=>{oe.reset(R[lt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(R,L,oe)=>(R[oe]=L.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(L,oe)=>!!oe._syncPendingControls()||L);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(L=>{const oe=this.controls[L];oe&&R(oe,L)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[L,oe]of Object.entries(this.controls))if(this.contains(L)&&R(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,oe,lt)=>((oe.enabled||this.disabled)&&(L[lt]=oe.value),L))}_reduceChildren(R,L){let oe=R;return this._forEachChild((lt,rn)=>{oe=L(oe,lt,rn)}),oe}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}const gi=new b.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ti}),Ti="always";function qs(j,R,L=Ti){Ys(j,R),R.valueAccessor.writeValue(j.value),(j.disabled||"always"===L)&&R.valueAccessor.setDisabledState?.(j.disabled),function Xr(j,R){R.valueAccessor.registerOnChange(L=>{j._pendingValue=L,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&Fi(j,R)})}(j,R),function Wi(j,R){const L=(oe,lt)=>{R.valueAccessor.writeValue(oe),lt&&R.viewToModelUpdate(oe)};j.registerOnChange(L),R._registerOnDestroy(()=>{j._unregisterOnChange(L)})}(j,R),function ei(j,R){R.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&Fi(j,R),"submit"!==j.updateOn&&j.markAsTouched()})}(j,R),function Ps(j,R){if(R.valueAccessor.setDisabledState){const L=oe=>{R.valueAccessor.setDisabledState(oe)};j.registerOnDisabledChange(L),R._registerOnDestroy(()=>{j._unregisterOnDisabledChange(L)})}}(j,R)}function Br(j,R,L=!0){const oe=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(oe),R.valueAccessor.registerOnTouched(oe)),$n(j,R),j&&(R._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function zi(j,R){j.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(R)})}function Ys(j,R){const L=Wn(j);null!==R.validator?j.setValidators(hr(L,R.validator)):"function"==typeof L&&j.setValidators([L]);const oe=Ar(j);null!==R.asyncValidator?j.setAsyncValidators(hr(oe,R.asyncValidator)):"function"==typeof oe&&j.setAsyncValidators([oe]);const lt=()=>j.updateValueAndValidity();zi(R._rawValidators,lt),zi(R._rawAsyncValidators,lt)}function $n(j,R){let L=!1;if(null!==j){if(null!==R.validator){const lt=Wn(j);if(Array.isArray(lt)&&lt.length>0){const rn=lt.filter(Fr=>Fr!==R.validator);rn.length!==lt.length&&(L=!0,j.setValidators(rn))}}if(null!==R.asyncValidator){const lt=Ar(j);if(Array.isArray(lt)&&lt.length>0){const rn=lt.filter(Fr=>Fr!==R.asyncValidator);rn.length!==lt.length&&(L=!0,j.setAsyncValidators(rn))}}}const oe=()=>{};return zi(R._rawValidators,oe),zi(R._rawAsyncValidators,oe),L}function Fi(j,R){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function _i(j,R){const L=j.indexOf(R);L>-1&&j.splice(L,1)}function cs(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const rs=class extends Oe{constructor(R=null,L,oe){super(ne(L),Q(oe,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ce(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=cs(R)?R.value:R)}setValue(R,L={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(R,L={}){this.setValue(R,L)}reset(R=this.defaultValue,L={}){this._applyFormState(R),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){_i(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){_i(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){cs(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}};let Xn=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275dir=b.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),j})(),ds=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({}),j})();const Vi=new b.OlP("NgModelWithFormControlWarning"),Lo={provide:kt,useExisting:(0,b.Gpc)(()=>uo)};let uo=(()=>{class j extends kt{constructor(L,oe,lt){super(),this.callSetDisabledState=lt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new b.vpe,this._setValidators(L),this._setAsyncValidators(oe)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($n(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const oe=this.form.get(L.path);return qs(oe,L,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),oe}getControl(L){return this.form.get(L.path)}removeControl(L){Br(L.control||null,L,!1),function Vr(j,R){const L=j.indexOf(R);L>-1&&j.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,oe){this.form.get(L.path).setValue(oe)}onSubmit(L){return this.submitted=!0,function yr(j,R){j._syncPendingControls(),R.forEach(L=>{const oe=L.control;"submit"===oe.updateOn&&oe._pendingChange&&(L.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const oe=L.control,lt=this.form.get(L.path);oe!==lt&&(Br(oe||null,L),(j=>j instanceof rs)(lt)&&(qs(lt,L,this.callSetDisabledState),L.control=lt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const oe=this.form.get(L.path);(function ir(j,R){Ys(j,R)})(oe,L),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const oe=this.form.get(L.path);oe&&function Ki(j,R){return $n(j,R)}(oe,L)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ys(this.form,this),this._oldForm&&$n(this._oldForm,this)}_checkFormPresent(){}}return j.\u0275fac=function(L){return new(L||j)(b.Y36(ke,10),b.Y36(fe,10),b.Y36(gi,8))},j.\u0275dir=b.lG2({type:j,selectors:[["","formGroup",""]],hostBindings:function(L,oe){1&L&&b.NdJ("submit",function(rn){return oe.onSubmit(rn)})("reset",function(){return oe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([Lo]),b.qOj,b.TTD]}),j})();const Ls={provide:Zn,useExisting:(0,b.Gpc)(()=>Ja)};let Ja=(()=>{class j extends Zn{set isDisabled(L){}constructor(L,oe,lt,rn,Fr){super(),this._ngModelWarningConfig=Fr,this._added=!1,this.update=new b.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(oe),this._setAsyncValidators(lt),this.valueAccessor=function Ir(j,R){if(!R)return null;let L,oe,lt;return Array.isArray(R),R.forEach(rn=>{rn.constructor===gt?L=rn:function Ui(j){return Object.getPrototypeOf(j.constructor)===He}(rn)?oe=rn:lt=rn}),lt||oe||L||null}(0,rn)}ngOnChanges(L){this._added||this._setUpControl(),function kr(j,R){if(!j.hasOwnProperty("model"))return!1;const L=j.model;return!!L.isFirstChange()||!Object.is(R,L.currentValue)}(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return function Ks(j,R){return[...R.path,j]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return j._ngModelWarningSentOnce=!1,j.\u0275fac=function(L){return new(L||j)(b.Y36(kt,13),b.Y36(ke,10),b.Y36(fe,10),b.Y36(pt,10),b.Y36(Vi,8))},j.\u0275dir=b.lG2({type:j,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[b._Bn([Ls]),b.qOj,b.TTD]}),j})(),ji=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({imports:[ds]}),j})(),Io=(()=>{class j{static withConfig(L){return{ngModule:j,providers:[{provide:gi,useValue:L.callSetDisabledState??Ti}]}}}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({imports:[ji]}),j})(),ga=(()=>{class j{static withConfig(L){return{ngModule:j,providers:[{provide:Vi,useValue:L.warnOnNgModelWithFormControl??"always"},{provide:gi,useValue:L.callSetDisabledState??Ti}]}}}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=b.oAB({type:j}),j.\u0275inj=b.cJS({imports:[ji]}),j})()},1481:(Yt,Ke,V)=>{V.d(Ke,{Dx:()=>mn,b2:()=>Zn,q6:()=>Rr});var b=V(6895),Z=V(4650);class p extends b.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends p{static makeCurrent(){(0,b.HT)(new De)}onAndCancel(me,le,Oe){return me.addEventListener(le,Oe,!1),()=>{me.removeEventListener(le,Oe,!1)}}dispatchEvent(me,le){me.dispatchEvent(le)}remove(me){me.parentNode&&me.parentNode.removeChild(me)}createElement(me,le){return(le=le||this.getDefaultDocument()).createElement(me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(me){return me.nodeType===Node.ELEMENT_NODE}isShadowRoot(me){return me instanceof DocumentFragment}getGlobalEventTarget(me,le){return"window"===le?window:"document"===le?me:"body"===le?me.body:null}getBaseHref(me){const le=function xe(){return Me=Me||document.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==le?null:function Pe(ce){Fe=Fe||document.createElement("a"),Fe.setAttribute("href",ce);const me=Fe.pathname;return"/"===me.charAt(0)?me:`/${me}`}(le)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(me){return(0,b.Mx)(document.cookie,me)}}let Fe,Me=null;const Ge=new Z.OlP("TRANSITION_ID"),Ee=[{provide:Z.ip1,useFactory:function be(ce,me,le){return()=>{le.get(Z.CZH).donePromise.then(()=>{const Oe=(0,b.q)(),Ze=me.querySelectorAll(`style[ng-transition="${ce}"]`);for(let vt=0;vt<Ze.length;vt++)Oe.remove(Ze[vt])})}},deps:[Ge,b.K0,Z.zs3],multi:!0}];let yt=(()=>{class ce{build(){return new XMLHttpRequest}}return ce.\u0275fac=function(le){return new(le||ce)},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const He=new Z.OlP("EventManagerPlugins");let pt=(()=>{class ce{constructor(le,Oe){this._zone=Oe,this._eventNameToPlugin=new Map,le.forEach(Ze=>{Ze.manager=this}),this._plugins=le.slice().reverse()}addEventListener(le,Oe,Ze){return this._findPluginFor(Oe).addEventListener(le,Oe,Ze)}addGlobalEventListener(le,Oe,Ze){return this._findPluginFor(Oe).addGlobalEventListener(le,Oe,Ze)}getZone(){return this._zone}_findPluginFor(le){const Oe=this._eventNameToPlugin.get(le);if(Oe)return Oe;const Ze=this._plugins;for(let vt=0;vt<Ze.length;vt++){const Qt=Ze[vt];if(Qt.supports(le))return this._eventNameToPlugin.set(le,Qt),Qt}throw new Error(`No event manager plugin found for event ${le}`)}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(He),Z.LFG(Z.R0b))},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})();class Nt{constructor(me){this._doc=me}addGlobalEventListener(me,le,Oe){const Ze=(0,b.q)().getGlobalEventTarget(this._doc,me);if(!Ze)throw new Error(`Unsupported event target ${Ze} for event ${le}`);return this.addEventListener(Ze,le,Oe)}}let Qe=(()=>{class ce{constructor(){this.usageCount=new Map}addStyles(le){for(const Oe of le)1===this.changeUsageCount(Oe,1)&&this.onStyleAdded(Oe)}removeStyles(le){for(const Oe of le)0===this.changeUsageCount(Oe,-1)&&this.onStyleRemoved(Oe)}onStyleRemoved(le){}onStyleAdded(le){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(le,Oe){const Ze=this.usageCount;let vt=Ze.get(le)??0;return vt+=Oe,vt>0?Ze.set(le,vt):Ze.delete(le),vt}ngOnDestroy(){for(const le of this.getAllStyles())this.onStyleRemoved(le);this.usageCount.clear()}}return ce.\u0275fac=function(le){return new(le||ce)},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})(),ut=(()=>{class ce extends Qe{constructor(le){super(),this.doc=le,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(le){for(const Oe of this.hostNodes)this.addStyleToHost(Oe,le)}onStyleRemoved(le){const Oe=this.styleRef;Oe.get(le)?.forEach(vt=>vt.remove()),Oe.delete(le)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(le){this.hostNodes.add(le);for(const Oe of this.getAllStyles())this.addStyleToHost(le,Oe)}removeHost(le){this.hostNodes.delete(le)}addStyleToHost(le,Oe){const Ze=this.doc.createElement("style");Ze.textContent=Oe,le.appendChild(Ze);const vt=this.styleRef.get(Oe);vt?vt.push(Ze):this.styleRef.set(Oe,[Ze])}resetHostNodes(){const le=this.hostNodes;le.clear(),le.add(this.doc.head)}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(b.K0))},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const Ie={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Et=/%COMP%/g,fe=new Z.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function bt(ce,me){return me.flat(100).map(le=>le.replace(Et,ce))}function Jt(ce){return me=>{if("__ngUnwrap__"===me)return ce;!1===ce(me)&&(me.preventDefault(),me.returnValue=!1)}}let Pt=(()=>{class ce{constructor(le,Oe,Ze,vt){this.eventManager=le,this.sharedStylesHost=Oe,this.appId=Ze,this.removeStylesOnCompDestory=vt,this.rendererByCompId=new Map,this.defaultRenderer=new We(le)}createRenderer(le,Oe){if(!le||!Oe)return this.defaultRenderer;const Ze=this.getOrCreateRenderer(le,Oe);return Ze instanceof Rt?Ze.applyToHost(le):Ze instanceof dt&&Ze.applyStyles(),Ze}getOrCreateRenderer(le,Oe){const Ze=this.rendererByCompId;let vt=Ze.get(Oe.id);if(!vt){const Qt=this.eventManager,Ht=this.sharedStylesHost,vn=this.removeStylesOnCompDestory;switch(Oe.encapsulation){case Z.ifc.Emulated:vt=new Rt(Qt,Ht,Oe,this.appId,vn);break;case Z.ifc.ShadowDom:return new wt(Qt,Ht,le,Oe);default:vt=new dt(Qt,Ht,Oe,vn)}vt.onDestroy=()=>Ze.delete(Oe.id),Ze.set(Oe.id,vt)}return vt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(pt),Z.LFG(ut),Z.LFG(Z.AFp),Z.LFG(fe))},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})();class We{constructor(me){this.eventManager=me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(me,le){return le?document.createElementNS(Ie[le]||le,me):document.createElement(me)}createComment(me){return document.createComment(me)}createText(me){return document.createTextNode(me)}appendChild(me,le){(at(me)?me.content:me).appendChild(le)}insertBefore(me,le,Oe){me&&(at(me)?me.content:me).insertBefore(le,Oe)}removeChild(me,le){me&&me.removeChild(le)}selectRootElement(me,le){let Oe="string"==typeof me?document.querySelector(me):me;if(!Oe)throw new Error(`The selector "${me}" did not match any elements`);return le||(Oe.textContent=""),Oe}parentNode(me){return me.parentNode}nextSibling(me){return me.nextSibling}setAttribute(me,le,Oe,Ze){if(Ze){le=Ze+":"+le;const vt=Ie[Ze];vt?me.setAttributeNS(vt,le,Oe):me.setAttribute(le,Oe)}else me.setAttribute(le,Oe)}removeAttribute(me,le,Oe){if(Oe){const Ze=Ie[Oe];Ze?me.removeAttributeNS(Ze,le):me.removeAttribute(`${Oe}:${le}`)}else me.removeAttribute(le)}addClass(me,le){me.classList.add(le)}removeClass(me,le){me.classList.remove(le)}setStyle(me,le,Oe,Ze){Ze&(Z.JOm.DashCase|Z.JOm.Important)?me.style.setProperty(le,Oe,Ze&Z.JOm.Important?"important":""):me.style[le]=Oe}removeStyle(me,le,Oe){Oe&Z.JOm.DashCase?me.style.removeProperty(le):me.style[le]=""}setProperty(me,le,Oe){me[le]=Oe}setValue(me,le){me.nodeValue=le}listen(me,le,Oe){return"string"==typeof me?this.eventManager.addGlobalEventListener(me,le,Jt(Oe)):this.eventManager.addEventListener(me,le,Jt(Oe))}}function at(ce){return"TEMPLATE"===ce.tagName&&void 0!==ce.content}class wt extends We{constructor(me,le,Oe,Ze){super(me),this.sharedStylesHost=le,this.hostEl=Oe,this.shadowRoot=Oe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const vt=bt(Ze.id,Ze.styles);for(const Qt of vt){const Ht=document.createElement("style");Ht.textContent=Qt,this.shadowRoot.appendChild(Ht)}}nodeOrShadowRoot(me){return me===this.hostEl?this.shadowRoot:me}appendChild(me,le){return super.appendChild(this.nodeOrShadowRoot(me),le)}insertBefore(me,le,Oe){return super.insertBefore(this.nodeOrShadowRoot(me),le,Oe)}removeChild(me,le){return super.removeChild(this.nodeOrShadowRoot(me),le)}parentNode(me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(me)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class dt extends We{constructor(me,le,Oe,Ze,vt=Oe.id){super(me),this.sharedStylesHost=le,this.removeStylesOnCompDestory=Ze,this.rendererUsageCount=0,this.styles=bt(vt,Oe.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Rt extends dt{constructor(me,le,Oe,Ze,vt){const Qt=Ze+"-"+Oe.id;super(me,le,Oe,vt,Qt),this.contentAttr=function qe(ce){return"_ngcontent-%COMP%".replace(Et,ce)}(Qt),this.hostAttr=function ct(ce){return"_nghost-%COMP%".replace(Et,ce)}(Qt)}applyToHost(me){this.applyStyles(),this.setAttribute(me,this.hostAttr,"")}createElement(me,le){const Oe=super.createElement(me,le);return super.setAttribute(Oe,this.contentAttr,""),Oe}}let Mt=(()=>{class ce extends Nt{constructor(le){super(le)}supports(le){return!0}addEventListener(le,Oe,Ze){return le.addEventListener(Oe,Ze,!1),()=>this.removeEventListener(le,Oe,Ze)}removeEventListener(le,Oe,Ze){return le.removeEventListener(Oe,Ze)}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(b.K0))},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const cn=["alt","control","meta","shift"],Kt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xt={alt:ce=>ce.altKey,control:ce=>ce.ctrlKey,meta:ce=>ce.metaKey,shift:ce=>ce.shiftKey};let ft=(()=>{class ce extends Nt{constructor(le){super(le)}supports(le){return null!=ce.parseEventName(le)}addEventListener(le,Oe,Ze){const vt=ce.parseEventName(Oe),Qt=ce.eventCallback(vt.fullKey,Ze,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,b.q)().onAndCancel(le,vt.domEventName,Qt))}static parseEventName(le){const Oe=le.toLowerCase().split("."),Ze=Oe.shift();if(0===Oe.length||"keydown"!==Ze&&"keyup"!==Ze)return null;const vt=ce._normalizeKey(Oe.pop());let Qt="",Ht=Oe.indexOf("code");if(Ht>-1&&(Oe.splice(Ht,1),Qt="code."),cn.forEach(gi=>{const Ti=Oe.indexOf(gi);Ti>-1&&(Oe.splice(Ti,1),Qt+=gi+".")}),Qt+=vt,0!=Oe.length||0===vt.length)return null;const vn={};return vn.domEventName=Ze,vn.fullKey=Qt,vn}static matchEventFullKeyCode(le,Oe){let Ze=Kt[le.key]||le.key,vt="";return Oe.indexOf("code.")>-1&&(Ze=le.code,vt="code."),!(null==Ze||!Ze)&&(Ze=Ze.toLowerCase()," "===Ze?Ze="space":"."===Ze&&(Ze="dot"),cn.forEach(Qt=>{Qt!==Ze&&(0,Xt[Qt])(le)&&(vt+=Qt+".")}),vt+=Ze,vt===Oe)}static eventCallback(le,Oe,Ze){return vt=>{ce.matchEventFullKeyCode(vt,le)&&Ze.runGuarded(()=>Oe(vt))}}static _normalizeKey(le){return"esc"===le?"escape":le}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(b.K0))},ce.\u0275prov=Z.Yz7({token:ce,factory:ce.\u0275fac}),ce})();const Rr=(0,Z.eFA)(Z._c5,"browser",[{provide:Z.Lbi,useValue:b.bD},{provide:Z.g9A,useValue:function Wn(){De.makeCurrent()},multi:!0},{provide:b.K0,useFactory:function Vn(){return(0,Z.RDi)(document),document},deps:[]}]),en=new Z.OlP(""),Dn=[{provide:Z.rWj,useClass:class Re{addToWindow(me){Z.dqk.getAngularTestability=(Oe,Ze=!0)=>{const vt=me.findTestabilityInTree(Oe,Ze);if(null==vt)throw new Error("Could not find testability for element.");return vt},Z.dqk.getAllAngularTestabilities=()=>me.getAllTestabilities(),Z.dqk.getAllAngularRootElements=()=>me.getAllRootElements(),Z.dqk.frameworkStabilizers||(Z.dqk.frameworkStabilizers=[]),Z.dqk.frameworkStabilizers.push(Oe=>{const Ze=Z.dqk.getAllAngularTestabilities();let vt=Ze.length,Qt=!1;const Ht=function(vn){Qt=Qt||vn,vt--,0==vt&&Oe(Qt)};Ze.forEach(function(vn){vn.whenStable(Ht)})})}findTestabilityInTree(me,le,Oe){return null==le?null:me.getTestability(le)??(Oe?(0,b.q)().isShadowRoot(le)?this.findTestabilityInTree(me,le.host,!0):this.findTestabilityInTree(me,le.parentElement,!0):null)}},deps:[]},{provide:Z.lri,useClass:Z.dDg,deps:[Z.R0b,Z.eoX,Z.rWj]},{provide:Z.dDg,useClass:Z.dDg,deps:[Z.R0b,Z.eoX,Z.rWj]}],kt=[{provide:Z.zSh,useValue:"root"},{provide:Z.qLn,useFactory:function Ar(){return new Z.qLn},deps:[]},{provide:He,useClass:Mt,multi:!0,deps:[b.K0,Z.R0b,Z.Lbi]},{provide:He,useClass:ft,multi:!0,deps:[b.K0]},{provide:Pt,useClass:Pt,deps:[pt,ut,Z.AFp,fe]},{provide:Z.FYo,useExisting:Pt},{provide:Qe,useExisting:ut},{provide:ut,useClass:ut,deps:[b.K0]},{provide:pt,useClass:pt,deps:[He,Z.R0b]},{provide:b.JF,useClass:yt,deps:[]},[]];let Zn=(()=>{class ce{constructor(le){}static withServerTransition(le){return{ngModule:ce,providers:[{provide:Z.AFp,useValue:le.appId},{provide:Ge,useExisting:Z.AFp},Ee]}}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(en,12))},ce.\u0275mod=Z.oAB({type:ce}),ce.\u0275inj=Z.cJS({providers:[...kt,...Dn],imports:[b.ez,Z.hGG]}),ce})(),mn=(()=>{class ce{constructor(le){this._doc=le}getTitle(){return this._doc.title}setTitle(le){this._doc.title=le||""}}return ce.\u0275fac=function(le){return new(le||ce)(Z.LFG(b.K0))},ce.\u0275prov=Z.Yz7({token:ce,factory:function(le){let Oe=null;return Oe=le?new le:function qr(){return new mn((0,Z.LFG)(b.K0))}(),Oe},providedIn:"root"}),ce})();typeof window<"u"&&window},4629:(Yt,Ke,V)=>{V.d(Ke,{F0:()=>sr,rH:()=>Ua,Bz:()=>ul,lC:()=>ms});var b=V(4650),Z=V(8996),p=V(9646),De=V(1135),Me=V(6805),xe=V(9841),Fe=V(7272),Pe=V(9751),Ge=V(8421);function be(T){return new Pe.y(S=>{(0,Ge.Xf)(T()).subscribe(S)})}var Ee=V(9635),Re=V(576);function yt(T,S){const D=(0,Re.m)(T)?T:()=>T,P=$=>$.error(D());return new Pe.y(S?$=>S.schedule(P,0,$):P)}var He=V(515),pt=V(727),Nt=V(4482),Qe=V(5403);function ut(){return(0,Nt.e)((T,S)=>{let D=null;T._refCount++;const P=(0,Qe.x)(S,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(D=null);const $=T._connection,J=D;D=null,$&&(!J||$===J)&&$.unsubscribe(),S.unsubscribe()});T.subscribe(P),P.closed||(D=T.connect())})}class Ie extends Pe.y{constructor(S,D){super(),this.source=S,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Nt.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new pt.w0;const D=this.getSubject();S.add(this.source.subscribe((0,Qe.x)(D,void 0,()=>{this._teardown(),D.complete()},P=>{this._teardown(),D.error(P)},()=>this._teardown()))),S.closed&&(this._connection=null,S=pt.w0.EMPTY)}return S}refCount(){return ut()(this)}}var Et=V(7579),gt=V(6895),rt=V(4004),Ye=V(3900),xt=V(5698),ke=V(8675),fe=V(9300),qe=V(5577),ct=V(590),bt=V(4351),Jt=V(8505);function Pt(T){return(0,Nt.e)((S,D)=>{let J,P=null,$=!1;P=S.subscribe((0,Qe.x)(D,void 0,void 0,se=>{J=(0,Ge.Xf)(T(se,Pt(T)(S))),P?(P.unsubscribe(),P=null,J.subscribe(D)):$=!0})),$&&(P.unsubscribe(),P=null,J.subscribe(D))})}var We=V(5026);function st(T){return T<=0?()=>He.E:(0,Nt.e)((S,D)=>{let P=[];S.subscribe((0,Qe.x)(D,$=>{P.push($),T<P.length&&P.shift()},()=>{for(const $ of P)D.next($);D.complete()},void 0,()=>{P=null}))})}var $e=V(8068),at=V(6590),wt=V(4671);function dt(T,S){const D=arguments.length>=2;return P=>P.pipe(T?(0,fe.h)(($,J)=>T($,J,P)):wt.y,st(1),D?(0,at.d)(S):(0,$e.T)(()=>new Me.K))}var Mt=V(9718);function cn(T){return(0,Nt.e)((S,D)=>{try{S.subscribe(D)}finally{D.add(T)}})}var Kt=V(8189),Xt=V(1481);const ft="primary",bn=Symbol("RouteTitle");class xn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D[0]:D}return null}getAll(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function Gn(T){return new xn(T)}function Ln(T,S,D){const P=D.path.split("/");if(P.length>T.length||"full"===D.pathMatch&&(S.hasChildren()||P.length<T.length))return null;const $={};for(let J=0;J<P.length;J++){const se=P[J],Be=T[J];if(se.startsWith(":"))$[se.substring(1)]=Be;else if(se!==Be.path)return null}return{consumed:T.slice(0,P.length),posParams:$}}function Wn(T,S){const D=T?Object.keys(T):void 0,P=S?Object.keys(S):void 0;if(!D||!P||D.length!=P.length)return!1;let $;for(let J=0;J<D.length;J++)if($=D[J],!Ar(T[$],S[$]))return!1;return!0}function Ar(T,S){if(Array.isArray(T)&&Array.isArray(S)){if(T.length!==S.length)return!1;const D=[...T].sort(),P=[...S].sort();return D.every(($,J)=>P[J]===$)}return T===S}function Vn(T){return Array.prototype.concat.apply([],T)}function _r(T){return T.length>0?T[T.length-1]:null}function en(T,S){for(const D in T)T.hasOwnProperty(D)&&S(T[D],D)}function Dn(T){return(0,b.CqO)(T)?T:(0,b.QGY)(T)?(0,Z.D)(Promise.resolve(T)):(0,p.of)(T)}const kt=!1,Zn={exact:function qr(T,S,D){if(!Pr(T.segments,S.segments)||!Hn(T.segments,S.segments,D)||T.numberOfChildren!==S.numberOfChildren)return!1;for(const P in S.children)if(!T.children[P]||!qr(T.children[P],S.children[P],D))return!1;return!0},subset:on},Kr={exact:function xr(T,S){return Wn(T,S)},subset:function mn(T,S){return Object.keys(S).length<=Object.keys(T).length&&Object.keys(S).every(D=>Ar(T[D],S[D]))},ignored:()=>!0};function wr(T,S,D){return Zn[D.paths](T.root,S.root,D.matrixParams)&&Kr[D.queryParams](T.queryParams,S.queryParams)&&!("exact"===D.fragment&&T.fragment!==S.fragment)}function on(T,S,D){return $t(T,S,S.segments,D)}function $t(T,S,D,P){if(T.segments.length>D.length){const $=T.segments.slice(0,D.length);return!(!Pr($,D)||S.hasChildren()||!Hn($,D,P))}if(T.segments.length===D.length){if(!Pr(T.segments,D)||!Hn(T.segments,D,P))return!1;for(const $ in S.children)if(!T.children[$]||!on(T.children[$],S.children[$],P))return!1;return!0}{const $=D.slice(0,T.segments.length),J=D.slice(T.segments.length);return!!(Pr(T.segments,$)&&Hn(T.segments,$,P)&&T.children[ft])&&$t(T.children[ft],S,J,P)}}function Hn(T,S,D){return S.every((P,$)=>Kr[D](T[$].parameters,P.parameters))}class Kn{constructor(S=new un([],{}),D={},P=null){this.root=S,this.queryParams=D,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gn(this.queryParams)),this._queryParamMap}toString(){return Ci.serialize(this)}}class un{constructor(S,D){this.segments=S,this.children=D,this.parent=null,en(D,(P,$)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rr(this)}}class In{constructor(S,D){this.path=S,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=Gn(this.parameters)),this._parameterMap}toString(){return ge(this)}}function Pr(T,S){return T.length===S.length&&T.every((D,P)=>D.path===S[P].path)}let Dr=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return new Pn},providedIn:"root"}),T})();class Pn{parse(S){const D=new Oe(S);return new Kn(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(S){const D=`/${Lt(S.root,!0)}`,P=function ne(T){const S=Object.keys(T).map(D=>{const P=T[D];return Array.isArray(P)?P.map($=>`${Ue(D)}=${Ue($)}`).join("&"):`${Ue(D)}=${Ue(P)}`}).filter(D=>!!D);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${D}${P}${"string"==typeof S.fragment?`#${function ye(T){return encodeURI(T)}(S.fragment)}`:""}`}}const Ci=new Pn;function rr(T){return T.segments.map(S=>ge(S)).join("/")}function Lt(T,S){if(!T.hasChildren())return rr(T);if(S){const D=T.children[ft]?Lt(T.children[ft],!1):"",P=[];return en(T.children,($,J)=>{J!==ft&&P.push(`${J}:${Lt($,!1)}`)}),P.length>0?`${D}(${P.join("//")})`:D}{const D=function Nn(T,S){let D=[];return en(T.children,(P,$)=>{$===ft&&(D=D.concat(S(P,$)))}),en(T.children,(P,$)=>{$!==ft&&(D=D.concat(S(P,$)))}),D}(T,(P,$)=>$===ft?[Lt(T.children[ft],!1)]:[`${$}:${Lt(P,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[ft]?`${rr(T)}/${D[0]}`:`${rr(T)}/(${D.join("//")})`}}function It(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ue(T){return It(T).replace(/%3B/gi,";")}function Ce(T){return It(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ht(T){return decodeURIComponent(T)}function mt(T){return ht(T.replace(/\+/g,"%20"))}function ge(T){return`${Ce(T.path)}${function pe(T){return Object.keys(T).map(S=>`;${Ce(S)}=${Ce(T[S])}`).join("")}(T.parameters)}`}const ie=/^[^\/()?;=#]+/;function Q(T){const S=T.match(ie);return S?S[0]:""}const Le=/^[^=?&#]+/,me=/^[^&#]+/;class Oe{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(S.length>0||Object.keys(D).length>0)&&(P[ft]=new un(S,D)),P}parseSegment(){const S=Q(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new b.vHH(4009,kt);return this.capture(S),new In(ht(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const D=Q(this.remaining);if(!D)return;this.capture(D);let P="";if(this.consumeOptional("=")){const $=Q(this.remaining);$&&(P=$,this.capture(P))}S[ht(D)]=ht(P)}parseQueryParam(S){const D=function ce(T){const S=T.match(Le);return S?S[0]:""}(this.remaining);if(!D)return;this.capture(D);let P="";if(this.consumeOptional("=")){const se=function le(T){const S=T.match(me);return S?S[0]:""}(this.remaining);se&&(P=se,this.capture(P))}const $=mt(D),J=mt(P);if(S.hasOwnProperty($)){let se=S[$];Array.isArray(se)||(se=[se],S[$]=se),se.push(J)}else S[$]=J}parseParens(S){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Q(this.remaining),$=this.remaining[P.length];if("/"!==$&&")"!==$&&";"!==$)throw new b.vHH(4010,kt);let J;P.indexOf(":")>-1?(J=P.slice(0,P.indexOf(":")),this.capture(J),this.capture(":")):S&&(J=ft);const se=this.parseChildren();D[J]=1===Object.keys(se).length?se[ft]:new un([],se),this.consumeOptional("//")}return D}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new b.vHH(4011,kt)}}function Ze(T){return T.segments.length>0?new un([],{[ft]:T}):T}function vt(T){const S={};for(const P of Object.keys(T.children)){const J=vt(T.children[P]);(J.segments.length>0||J.hasChildren())&&(S[P]=J)}return function Qt(T){if(1===T.numberOfChildren&&T.children[ft]){const S=T.children[ft];return new un(T.segments.concat(S.segments),S.children)}return T}(new un(T.segments,S))}function Ht(T){return T instanceof Kn}const vn=!1;function qs(T,S,D,P,$){if(0===D.length)return Ps(S.root,S.root,S.root,P,$);const J=function Xr(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new $n(!0,0,T);let S=0,D=!1;const P=T.reduce(($,J,se)=>{if("object"==typeof J&&null!=J){if(J.outlets){const Be={};return en(J.outlets,(At,an)=>{Be[an]="string"==typeof At?At.split("/"):At}),[...$,{outlets:Be}]}if(J.segmentPath)return[...$,J.segmentPath]}return"string"!=typeof J?[...$,J]:0===se?(J.split("/").forEach((Be,At)=>{0==At&&"."===Be||(0==At&&""===Be?D=!0:".."===Be?S++:""!=Be&&$.push(Be))}),$):[...$,J]},[]);return new $n(D,S,P)}(D);return J.toRoot()?Ps(S.root,S.root,new un([],{}),P,$):function se(At){const an=function Wi(T,S,D,P){if(T.isAbsolute)return new ei(S.root,!0,0);if(-1===P)return new ei(D,D===S.root,0);return function ir(T,S,D){let P=T,$=S,J=D;for(;J>$;){if(J-=$,P=P.parent,!P)throw new b.vHH(4005,vn&&"Invalid number of '../'");$=P.segments.length}return new ei(P,!1,$-J)}(D,P+(Br(T.commands[0])?0:1),T.numberOfDoubleDots)}(J,S,T.snapshot?._urlSegment,At),nn=an.processChildren?mi(an.segmentGroup,an.index,J.commands):ni(an.segmentGroup,an.index,J.commands);return Ps(S.root,an.segmentGroup,nn,P,$)}(T.snapshot?._lastPathIndex)}function Br(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function zi(T){return"object"==typeof T&&null!=T&&T.outlets}function Ps(T,S,D,P,$){let se,J={};P&&en(P,(At,an)=>{J[an]=Array.isArray(At)?At.map(nn=>`${nn}`):`${At}`}),se=T===S?D:Ys(T,S,D);const Be=Ze(vt(se));return new Kn(Be,J,$)}function Ys(T,S,D){const P={};return en(T.children,($,J)=>{P[J]=$===S?D:Ys($,S,D)}),new un(T.segments,P)}class $n{constructor(S,D,P){if(this.isAbsolute=S,this.numberOfDoubleDots=D,this.commands=P,S&&P.length>0&&Br(P[0]))throw new b.vHH(4003,vn&&"Root segment cannot have matrix parameters");const $=P.find(zi);if($&&$!==_r(P))throw new b.vHH(4004,vn&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ei{constructor(S,D,P){this.segmentGroup=S,this.processChildren=D,this.index=P}}function ni(T,S,D){if(T||(T=new un([],{})),0===T.segments.length&&T.hasChildren())return mi(T,S,D);const P=function qt(T,S,D){let P=0,$=S;const J={match:!1,pathIndex:0,commandIndex:0};for(;$<T.segments.length;){if(P>=D.length)return J;const se=T.segments[$],Be=D[P];if(zi(Be))break;const At=`${Be}`,an=P<D.length-1?D[P+1]:null;if($>0&&void 0===At)break;if(At&&an&&"object"==typeof an&&void 0===an.outlets){if(!Ui(At,an,se))return J;P+=2}else{if(!Ui(At,{},se))return J;P++}$++}return{match:!0,pathIndex:$,commandIndex:P}}(T,S,D),$=D.slice(P.commandIndex);if(P.match&&P.pathIndex<T.segments.length){const J=new un(T.segments.slice(0,P.pathIndex),{});return J.children[ft]=new un(T.segments.slice(P.pathIndex),T.children),mi(J,0,$)}return P.match&&0===$.length?new un(T.segments,{}):P.match&&!T.hasChildren()?En(T,S,D):P.match?mi(T,0,$):En(T,S,D)}function mi(T,S,D){if(0===D.length)return new un(T.segments,{});{const P=function Ki(T){return zi(T[0])?T[0].outlets:{[ft]:T}}(D),$={};return!P[ft]&&T.children[ft]&&1===T.numberOfChildren&&0===T.children[ft].segments.length?mi(T.children[ft],S,D):(en(P,(J,se)=>{"string"==typeof J&&(J=[J]),null!==J&&($[se]=ni(T.children[se],S,J))}),en(T.children,(J,se)=>{void 0===P[se]&&($[se]=J)}),new un(T.segments,$))}}function En(T,S,D){const P=T.segments.slice(0,S);let $=0;for(;$<D.length;){const J=D[$];if(zi(J)){const At=ar(J.outlets);return new un(P,At)}if(0===$&&Br(D[0])){P.push(new In(T.segments[S].path,kr(D[0]))),$++;continue}const se=zi(J)?J.outlets[ft]:`${J}`,Be=$<D.length-1?D[$+1]:null;se&&Be&&Br(Be)?(P.push(new In(se,kr(Be))),$+=2):(P.push(new In(se,{})),$++)}return new un(P,{})}function ar(T){const S={};return en(T,(D,P)=>{"string"==typeof D&&(D=[D]),null!==D&&(S[P]=En(new un([],{}),0,D))}),S}function kr(T){const S={};return en(T,(D,P)=>S[P]=`${D}`),S}function Ui(T,S,D){return T==D.path&&Wn(S,D.parameters)}const yr="imperative";class Ir{constructor(S,D){this.id=S,this.url=D}}class Vr extends Ir{constructor(S,D,P="imperative",$=null){super(S,D),this.type=0,this.navigationTrigger=P,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ri extends Ir{constructor(S,D,P){super(S,D),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ko extends Ir{constructor(S,D,P,$){super(S,D),this.reason=P,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _n extends Ir{constructor(S,D,P,$){super(S,D),this.reason=P,this.code=$,this.type=16}}class Bi extends Ir{constructor(S,D,P,$){super(S,D),this.error=P,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _i extends Ir{constructor(S,D,P,$){super(S,D),this.urlAfterRedirects=P,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cs extends Ir{constructor(S,D,P,$){super(S,D),this.urlAfterRedirects=P,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rs extends Ir{constructor(S,D,P,$,J){super(S,D),this.urlAfterRedirects=P,this.state=$,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yi extends Ir{constructor(S,D,P,$){super(S,D),this.urlAfterRedirects=P,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class is extends Ir{constructor(S,D,P,$){super(S,D),this.urlAfterRedirects=P,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vi{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Es{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Te{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xe{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ct{constructor(S,D,P){this.routerEvent=S,this.position=D,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Mn=(()=>{class T{createUrlTree(D,P,$,J,se,Be){return qs(D||P.root,$,J,se,Be)}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})(),kn=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(S){return Mn.\u0275fac(S)},providedIn:"root"}),T})();class ws{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const D=this.pathFromRoot(S);return D.length>1?D[D.length-2]:null}children(S){const D=Yr(S,this._root);return D?D.children.map(P=>P.value):[]}firstChild(S){const D=Yr(S,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(S){const D=fr(S,this._root);return D.length<2?[]:D[D.length-2].children.map($=>$.value).filter($=>$!==S)}pathFromRoot(S){return fr(S,this._root).map(D=>D.value)}}function Yr(T,S){if(T===S.value)return S;for(const D of S.children){const P=Yr(T,D);if(P)return P}return null}function fr(T,S){if(T===S.value)return[S];for(const D of S.children){const P=fr(T,D);if(P.length)return P.unshift(S),P}return[]}class ds{constructor(S,D){this.value=S,this.children=D}toString(){return`TreeNode(${this.value})`}}function hs(T){const S={};return T&&T.children.forEach(D=>S[D.value.outlet]=D),S}class qi extends ws{constructor(S,D){super(S),this.snapshot=D,ha(this,S)}toString(){return this.snapshot.toString()}}function fs(T,S){const D=function Fo(T,S){const se=new Lo([],{},{},"",{},ft,S,null,T.root,-1,{});return new uo("",new ds(se,[]))}(T,S),P=new De.X([new In("",{})]),$=new De.X({}),J=new De.X({}),se=new De.X({}),Be=new De.X(""),At=new Vi(P,$,se,Be,J,ft,S,D.root);return At.snapshot=D.root,new qi(new ds(At,[]),D)}class Vi{constructor(S,D,P,$,J,se,Be,At){this.url=S,this.params=D,this.queryParams=P,this.fragment=$,this.data=J,this.outlet=se,this.component=Be,this.title=this.data?.pipe((0,rt.U)(an=>an[bn]))??(0,p.of)(void 0),this._futureSnapshot=At}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(S=>Gn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(S=>Gn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Eo(T,S="emptyOnly"){const D=T.pathFromRoot;let P=0;if("always"!==S)for(P=D.length-1;P>=1;){const $=D[P],J=D[P-1];if($.routeConfig&&""===$.routeConfig.path)P--;else{if(J.component)break;P--}}return function ks(T){return T.reduce((S,D)=>({params:{...S.params,...D.params},data:{...S.data,...D.data},resolve:{...D.data,...S.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(P))}class Lo{get title(){return this.data?.[bn]}constructor(S,D,P,$,J,se,Be,At,an,nn,Yn){this.url=S,this.params=D,this.queryParams=P,this.fragment=$,this.data=J,this.outlet=se,this.component=Be,this.routeConfig=At,this._urlSegment=an,this._lastPathIndex=nn,this._resolve=Yn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uo extends ws{constructor(S,D){super(D),this.url=S,ha(this,D)}toString(){return wo(this._root)}}function ha(T,S){S.value._routerState=T,S.children.forEach(D=>ha(T,D))}function wo(T){const S=T.children.length>0?` { ${T.children.map(wo).join(", ")} } `:"";return`${T.value}${S}`}function ps(T){if(T.snapshot){const S=T.snapshot,D=T._futureSnapshot;T.snapshot=D,Wn(S.queryParams,D.queryParams)||T.queryParams.next(D.queryParams),S.fragment!==D.fragment&&T.fragment.next(D.fragment),Wn(S.params,D.params)||T.params.next(D.params),function hr(T,S){if(T.length!==S.length)return!1;for(let D=0;D<T.length;++D)if(!Wn(T[D],S[D]))return!1;return!0}(S.url,D.url)||T.url.next(D.url),Wn(S.data,D.data)||T.data.next(D.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function Uo(T,S){const D=Wn(T.params,S.params)&&function or(T,S){return Pr(T,S)&&T.every((D,P)=>Wn(D.parameters,S[P].parameters))}(T.url,S.url);return D&&!(!T.parent!=!S.parent)&&(!T.parent||Uo(T.parent,S.parent))}function Ls(T,S,D){if(D&&T.shouldReuseRoute(S.value,D.value.snapshot)){const P=D.value;P._futureSnapshot=S.value;const $=function Ja(T,S,D){return S.children.map(P=>{for(const $ of D.children)if(T.shouldReuseRoute(P.value,$.value.snapshot))return Ls(T,P,$);return Ls(T,P)})}(T,S,D);return new ds(P,$)}{if(T.shouldAttach(S.value)){const J=T.retrieve(S.value);if(null!==J){const se=J.route;return se.value._futureSnapshot=S.value,se.children=S.children.map(Be=>Ls(T,Be)),se}}const P=function fa(T){return new Vi(new De.X(T.url),new De.X(T.params),new De.X(T.queryParams),new De.X(T.fragment),new De.X(T.data),T.outlet,T.component,T)}(S.value),$=S.children.map(J=>Ls(T,J));return new ds(P,$)}}const Yi="ngNavigationCancelingError";function co(T,S){const{redirectTo:D,navigationBehaviorOptions:P}=Ht(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,$=gs(!1,0,S);return $.url=D,$.navigationBehaviorOptions=P,$}function gs(T,S,D){const P=new Error("NavigationCancelingError: "+(T||""));return P[Yi]=!0,P.cancellationCode=S,D&&(P.url=D),P}function Zs(T){return Bo(T)&&Ht(T.url)}function Bo(T){return T&&T[Yi]}class Qa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jr,this.attachRef=null}}let jr=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(D,P){const $=this.getOrCreateContext(D);$.outlet=P,this.contexts.set(D,$)}onChildOutletDestroyed(D){const P=this.getContext(D);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let P=this.getContext(D);return P||(P=new Qa,this.contexts.set(D,P)),P}getContext(D){return this.contexts.get(D)||null}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Gi=!1;let ms=(()=>{class T{constructor(){this.activated=null,this._activatedRoute=null,this.name=ft,this.activateEvents=new b.vpe,this.deactivateEvents=new b.vpe,this.attachEvents=new b.vpe,this.detachEvents=new b.vpe,this.parentContexts=(0,b.f3M)(jr),this.location=(0,b.f3M)(b.s_b),this.changeDetector=(0,b.f3M)(b.sBO),this.environmentInjector=(0,b.f3M)(b.lqb)}ngOnChanges(D){if(D.name){const{firstChange:P,previousValue:$}=D.name;if(P)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b.vHH(4012,Gi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b.vHH(4012,Gi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b.vHH(4012,Gi);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,P){this.activated=D,this._activatedRoute=P,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,P){if(this.isActivated)throw new b.vHH(4013,Gi);this._activatedRoute=D;const $=this.location,se=D.snapshot.component,Be=this.parentContexts.getOrCreateContext(this.name).children,At=new Ds(D,Be,$.injector);if(P&&function Qo(T){return!!T.resolveComponentFactory}(P)){const an=P.resolveComponentFactory(se);this.activated=$.createComponent(an,$.length,At)}else this.activated=$.createComponent(se,{index:$.length,injector:At,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275dir=b.lG2({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[b.TTD]}),T})();class Ds{constructor(S,D,P){this.route=S,this.childContexts=D,this.parent=P}get(S,D){return S===Vi?this.route:S===jr?this.childContexts:this.parent.get(S,D)}}let Js=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275cmp=b.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[b.jDz],decls:1,vars:0,template:function(D,P){1&D&&b._UZ(0,"router-outlet")},dependencies:[ms],encapsulation:2}),T})();function Zi(T,S){return T.providers&&!T._injector&&(T._injector=(0,b.MMx)(T.providers,S,`Route: ${T.path}`)),T._injector??S}function Or(T){const S=T.children&&T.children.map(Or),D=S?{...T,children:S}:{...T};return!D.component&&!D.loadComponent&&(S||D.loadChildren)&&D.outlet&&D.outlet!==ft&&(D.component=Js),D}function Li(T){return T.outlet||ft}function ho(T,S){const D=T.filter(P=>Li(P)===S);return D.push(...T.filter(P=>Li(P)!==S)),D}function oi(T){if(!T)return null;if(T.routeConfig?._injector)return T.routeConfig._injector;for(let S=T.parent;S;S=S.parent){const D=S.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class Go{constructor(S,D,P,$){this.routeReuseStrategy=S,this.futureState=D,this.currState=P,this.forwardEvent=$}activate(S){const D=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,P,S),ps(this.futureState.root),this.activateChildRoutes(D,P,S)}deactivateChildRoutes(S,D,P){const $=hs(D);S.children.forEach(J=>{const se=J.value.outlet;this.deactivateRoutes(J,$[se],P),delete $[se]}),en($,(J,se)=>{this.deactivateRouteAndItsChildren(J,P)})}deactivateRoutes(S,D,P){const $=S.value,J=D?D.value:null;if($===J)if($.component){const se=P.getContext($.outlet);se&&this.deactivateChildRoutes(S,D,se.children)}else this.deactivateChildRoutes(S,D,P);else J&&this.deactivateRouteAndItsChildren(D,P)}deactivateRouteAndItsChildren(S,D){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,D):this.deactivateRouteAndOutlet(S,D)}detachAndStoreRouteSubtree(S,D){const P=D.getContext(S.value.outlet),$=P&&S.value.component?P.children:D,J=hs(S);for(const se of Object.keys(J))this.deactivateRouteAndItsChildren(J[se],$);if(P&&P.outlet){const se=P.outlet.detach(),Be=P.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:se,route:S,contexts:Be})}}deactivateRouteAndOutlet(S,D){const P=D.getContext(S.value.outlet),$=P&&S.value.component?P.children:D,J=hs(S);for(const se of Object.keys(J))this.deactivateRouteAndItsChildren(J[se],$);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(S,D,P){const $=hs(D);S.children.forEach(J=>{this.activateRoutes(J,$[J.value.outlet],P),this.forwardEvent(new Xe(J.value.snapshot))}),S.children.length&&this.forwardEvent(new Ve(S.value.snapshot))}activateRoutes(S,D,P){const $=S.value,J=D?D.value:null;if(ps($),$===J)if($.component){const se=P.getOrCreateContext($.outlet);this.activateChildRoutes(S,D,se.children)}else this.activateChildRoutes(S,D,P);else if($.component){const se=P.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Be=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),se.children.onOutletReAttached(Be.contexts),se.attachRef=Be.componentRef,se.route=Be.route.value,se.outlet&&se.outlet.attach(Be.componentRef,Be.route.value),ps(Be.route.value),this.activateChildRoutes(S,null,se.children)}else{const Be=oi($.snapshot),At=Be?.get(b._Vd)??null;se.attachRef=null,se.route=$,se.resolver=At,se.injector=Be,se.outlet&&se.outlet.activateWith($,se.injector),this.activateChildRoutes(S,null,se.children)}}else this.activateChildRoutes(S,null,P)}}class ys{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class ai{constructor(S,D){this.component=S,this.route=D}}function pa(T,S,D){const P=T._root;return ji(P,S?S._root:null,D,[P.value])}function fo(T,S){const D=Symbol(),P=S.get(T,D);return P===D?"function"!=typeof T||(0,b.Z0I)(T)?S.get(T):T:P}function ji(T,S,D,P,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=hs(S);return T.children.forEach(se=>{(function Xo(T,S,D,P,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=T.value,se=S?S.value:null,Be=D?D.getContext(T.value.outlet):null;if(se&&J.routeConfig===se.routeConfig){const At=function yl(T,S,D){if("function"==typeof D)return D(T,S);switch(D){case"pathParamsChange":return!Pr(T.url,S.url);case"pathParamsOrQueryParamsChange":return!Pr(T.url,S.url)||!Wn(T.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uo(T,S)||!Wn(T.queryParams,S.queryParams);default:return!Uo(T,S)}}(se,J,J.routeConfig.runGuardsAndResolvers);At?$.canActivateChecks.push(new ys(P)):(J.data=se.data,J._resolvedData=se._resolvedData),ji(T,S,J.component?Be?Be.children:null:D,P,$),At&&Be&&Be.outlet&&Be.outlet.isActivated&&$.canDeactivateChecks.push(new ai(Be.outlet.component,se))}else se&&An(S,Be,$),$.canActivateChecks.push(new ys(P)),ji(T,null,J.component?Be?Be.children:null:D,P,$)})(se,J[se.value.outlet],D,P.concat([se.value]),$),delete J[se.value.outlet]}),en(J,(se,Be)=>An(se,D.getContext(Be),$)),$}function An(T,S,D){const P=hs(T),$=T.value;en(P,(J,se)=>{An(J,$.component?S?S.children.getContext(se):null:S,D)}),D.canDeactivateChecks.push(new ai($.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,$))}function po(T){return"function"==typeof T}function L(T){return T instanceof Me.K||"EmptyError"===T?.name}const oe=Symbol("INITIAL_VALUE");function lt(){return(0,Ye.w)(T=>(0,xe.a)(T.map(S=>S.pipe((0,xt.q)(1),(0,ke.O)(oe)))).pipe((0,rt.U)(S=>{for(const D of S)if(!0!==D){if(D===oe)return oe;if(!1===D||D instanceof Kn)return D}return!0}),(0,fe.h)(S=>S!==oe),(0,xt.q)(1)))}function li(T){return(0,Ee.z)((0,Jt.b)(S=>{if(Ht(S))throw co(0,S)}),(0,rt.U)(S=>!0===S))}const na={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ra(T,S,D,P,$){const J=vs(T,S,D);return J.matched?function Ji(T,S,D,P){const $=S.canMatch;if(!$||0===$.length)return(0,p.of)(!0);const J=$.map(se=>{const Be=fo(se,T);return Dn(function ga(T){return T&&po(T.canMatch)}(Be)?Be.canMatch(S,D):T.runInContext(()=>Be(S,D)))});return(0,p.of)(J).pipe(lt(),li())}(P=Zi(S,P),S,D).pipe((0,rt.U)(se=>!0===se?J:{...na})):(0,p.of)(J)}function vs(T,S,D){if(""===S.path)return"full"===S.pathMatch&&(T.hasChildren()||D.length>0)?{...na}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const $=(S.matcher||Ln)(D,T,S);if(!$)return{...na};const J={};en($.posParams,(Be,At)=>{J[At]=Be.path});const se=$.consumed.length>0?{...J,...$.consumed[$.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:$.consumed,remainingSegments:D.slice($.consumed.length),parameters:se,positionalParamSegments:$.posParams??{}}}function Ho(T,S,D,P){if(D.length>0&&function ya(T,S,D){return D.some(P=>La(T,S,P)&&Li(P)!==ft)}(T,D,P)){const J=new un(S,function Hu(T,S,D,P){const $={};$[ft]=P,P._sourceSegment=T,P._segmentIndexShift=S.length;for(const J of D)if(""===J.path&&Li(J)!==ft){const se=new un([],{});se._sourceSegment=T,se._segmentIndexShift=S.length,$[Li(J)]=se}return $}(T,S,P,new un(D,T.children)));return J._sourceSegment=T,J._segmentIndexShift=S.length,{segmentGroup:J,slicedSegments:[]}}if(0===D.length&&function $o(T,S,D){return D.some(P=>La(T,S,P))}(T,D,P)){const J=new un(T.segments,function _a(T,S,D,P,$){const J={};for(const se of P)if(La(T,D,se)&&!$[Li(se)]){const Be=new un([],{});Be._sourceSegment=T,Be._segmentIndexShift=S.length,J[Li(se)]=Be}return{...$,...J}}(T,S,D,P,T.children));return J._sourceSegment=T,J._segmentIndexShift=S.length,{segmentGroup:J,slicedSegments:D}}const $=new un(T.segments,T.children);return $._sourceSegment=T,$._segmentIndexShift=S.length,{segmentGroup:$,slicedSegments:D}}function La(T,S,D){return(!(T.hasChildren()||S.length>0)||"full"!==D.pathMatch)&&""===D.path}function bl(T,S,D,P){return!!(Li(T)===P||P!==ft&&La(S,D,T))&&("**"===T.path||vs(S,T,D).matched)}function va(T,S,D){return 0===S.length&&!T.children[D]}const tl=!1;class ba{constructor(S){this.segmentGroup=S||null}}class nl{constructor(S){this.urlTree=S}}function rl(T){return yt(new ba(T))}function lu(T){return yt(new nl(T))}class Vl{constructor(S,D,P,$,J){this.injector=S,this.configLoader=D,this.urlSerializer=P,this.urlTree=$,this.config=J,this.allowRedirects=!0}apply(){const S=Ho(this.urlTree.root,[],[],this.config).segmentGroup,D=new un(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,D,ft).pipe((0,rt.U)(J=>this.createUrlTree(vt(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pt(J=>{if(J instanceof nl)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof ba?this.noMatchError(J):J}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,ft).pipe((0,rt.U)($=>this.createUrlTree(vt($),S.queryParams,S.fragment))).pipe(Pt($=>{throw $ instanceof ba?this.noMatchError($):$}))}noMatchError(S){return new b.vHH(4002,tl)}createUrlTree(S,D,P){const $=Ze(S);return new Kn($,D,P)}expandSegmentGroup(S,D,P,$){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(S,D,P).pipe((0,rt.U)(J=>new un([],J))):this.expandSegment(S,P,D,P.segments,$,!0)}expandChildren(S,D,P){const $=[];for(const J of Object.keys(P.children))"primary"===J?$.unshift(J):$.push(J);return(0,Z.D)($).pipe((0,bt.b)(J=>{const se=P.children[J],Be=ho(D,J);return this.expandSegmentGroup(S,Be,se,J).pipe((0,rt.U)(At=>({segment:At,outlet:J})))}),(0,We.R)((J,se)=>(J[se.outlet]=se.segment,J),{}),dt())}expandSegment(S,D,P,$,J,se){return(0,Z.D)(P).pipe((0,bt.b)(Be=>this.expandSegmentAgainstRoute(S,D,P,Be,$,J,se).pipe(Pt(an=>{if(an instanceof ba)return(0,p.of)(null);throw an}))),(0,ct.P)(Be=>!!Be),Pt((Be,At)=>{if(L(Be))return va(D,$,J)?(0,p.of)(new un([],{})):rl(D);throw Be}))}expandSegmentAgainstRoute(S,D,P,$,J,se,Be){return bl($,D,J,se)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(S,D,$,J,se):Be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,D,P,$,J,se):rl(D):rl(D)}expandSegmentAgainstRouteUsingRedirect(S,D,P,$,J,se){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,P,$,se):this.expandRegularSegmentAgainstRouteUsingRedirect(S,D,P,$,J,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,D,P,$){const J=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?lu(J):this.lineralizeSegments(P,J).pipe((0,qe.z)(se=>{const Be=new un(se,{});return this.expandSegment(S,Be,D,se,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,D,P,$,J,se){const{matched:Be,consumedSegments:At,remainingSegments:an,positionalParamSegments:nn}=vs(D,$,J);if(!Be)return rl(D);const Yn=this.applyRedirectCommands(At,$.redirectTo,nn);return $.redirectTo.startsWith("/")?lu(Yn):this.lineralizeSegments($,Yn).pipe((0,qe.z)(ci=>this.expandSegment(S,D,P,ci.concat(an),se,!1)))}matchSegmentAgainstRoute(S,D,P,$,J){return"**"===P.path?(S=Zi(P,S),P.loadChildren?(P._loadedRoutes?(0,p.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(S,P)).pipe((0,rt.U)(Be=>(P._loadedRoutes=Be.routes,P._loadedInjector=Be.injector,new un($,{})))):(0,p.of)(new un($,{}))):ra(D,P,$,S).pipe((0,Ye.w)(({matched:se,consumedSegments:Be,remainingSegments:At})=>se?this.getChildConfig(S=P._injector??S,P,$).pipe((0,qe.z)(nn=>{const Yn=nn.injector??S,ci=nn.routes,{segmentGroup:Zr,slicedSegments:Us}=Ho(D,Be,At,ci),mo=new un(Zr.segments,Zr.children);if(0===Us.length&&mo.hasChildren())return this.expandChildren(Yn,ci,mo).pipe((0,rt.U)(Bs=>new un(Be,Bs)));if(0===ci.length&&0===Us.length)return(0,p.of)(new un(Be,{}));const _o=Li(P)===J;return this.expandSegment(Yn,mo,ci,Us,_o?ft:J,!0).pipe((0,rt.U)(di=>new un(Be.concat(di.segments),di.children)))})):rl(D)))}getChildConfig(S,D,P){return D.children?(0,p.of)({routes:D.children,injector:S}):D.loadChildren?void 0!==D._loadedRoutes?(0,p.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function vl(T,S,D,P){const $=S.canLoad;if(void 0===$||0===$.length)return(0,p.of)(!0);const J=$.map(se=>{const Be=fo(se,T);return Dn(function ea(T){return T&&po(T.canLoad)}(Be)?Be.canLoad(S,D):T.runInContext(()=>Be(S,D)))});return(0,p.of)(J).pipe(lt(),li())}(S,D,P).pipe((0,qe.z)($=>$?this.configLoader.loadChildren(S,D).pipe((0,Jt.b)(J=>{D._loadedRoutes=J.routes,D._loadedInjector=J.injector})):function wc(T){return yt(gs(tl,3))}())):(0,p.of)({routes:[],injector:S})}lineralizeSegments(S,D){let P=[],$=D.root;for(;;){if(P=P.concat($.segments),0===$.numberOfChildren)return(0,p.of)(P);if($.numberOfChildren>1||!$.children[ft])return S.redirectTo,yt(new b.vHH(4e3,tl));$=$.children[ft]}}applyRedirectCommands(S,D,P){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),S,P)}applyRedirectCreateUrlTree(S,D,P,$){const J=this.createSegmentGroup(S,D.root,P,$);return new Kn(J,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(S,D){const P={};return en(S,($,J)=>{if("string"==typeof $&&$.startsWith(":")){const Be=$.substring(1);P[J]=D[Be]}else P[J]=$}),P}createSegmentGroup(S,D,P,$){const J=this.createSegments(S,D.segments,P,$);let se={};return en(D.children,(Be,At)=>{se[At]=this.createSegmentGroup(S,Be,P,$)}),new un(J,se)}createSegments(S,D,P,$){return D.map(J=>J.path.startsWith(":")?this.findPosParam(S,J,$):this.findOrReturn(J,P))}findPosParam(S,D,P){const $=P[D.path.substring(1)];if(!$)throw new b.vHH(4001,tl);return $}findOrReturn(S,D){let P=0;for(const $ of D){if($.path===S.path)return D.splice(P),$;P++}return S}}class ui{}class Oi{constructor(S,D,P,$,J,se,Be){this.injector=S,this.rootComponentType=D,this.config=P,this.urlTree=$,this.url=J,this.paramsInheritanceStrategy=se,this.urlSerializer=Be}recognize(){const S=Ho(this.urlTree.root,[],[],this.config.filter(D=>void 0===D.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,ft).pipe((0,rt.U)(D=>{if(null===D)return null;const P=new Lo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new ds(P,D),J=new uo(this.url,$);return this.inheritParamsAndData(J._root),J}))}inheritParamsAndData(S){const D=S.value,P=Eo(D,this.paramsInheritanceStrategy);D.params=Object.freeze(P.params),D.data=Object.freeze(P.data),S.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(S,D,P,$){return 0===P.segments.length&&P.hasChildren()?this.processChildren(S,D,P):this.processSegment(S,D,P,P.segments,$)}processChildren(S,D,P){return(0,Z.D)(Object.keys(P.children)).pipe((0,bt.b)($=>{const J=P.children[$],se=ho(D,$);return this.processSegmentGroup(S,se,J,$)}),(0,We.R)(($,J)=>$&&J?($.push(...J),$):null),function Rt(T,S=!1){return(0,Nt.e)((D,P)=>{let $=0;D.subscribe((0,Qe.x)(P,J=>{const se=T(J,$++);(se||S)&&P.next(J),!se&&P.complete()}))})}($=>null!==$),(0,at.d)(null),dt(),(0,rt.U)($=>{if(null===$)return null;const J=jl($);return function zu(T){T.sort((S,D)=>S.value.outlet===ft?-1:D.value.outlet===ft?1:S.value.outlet.localeCompare(D.value.outlet))}(J),J}))}processSegment(S,D,P,$,J){return(0,Z.D)(D).pipe((0,bt.b)(se=>this.processSegmentAgainstRoute(se._injector??S,se,P,$,J)),(0,ct.P)(se=>!!se),Pt(se=>{if(L(se))return va(P,$,J)?(0,p.of)([]):(0,p.of)(null);throw se}))}processSegmentAgainstRoute(S,D,P,$,J){if(D.redirectTo||!bl(D,P,$,J))return(0,p.of)(null);let se;if("**"===D.path){const Be=$.length>0?_r($).parameters:{},At=k(P)+$.length,an=new Lo($,Be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B(D),Li(D),D.component??D._loadedComponent??null,D,sa(P),At,re(D));se=(0,p.of)({snapshot:an,consumedSegments:[],remainingSegments:[]})}else se=ra(P,D,$,S).pipe((0,rt.U)(({matched:Be,consumedSegments:At,remainingSegments:an,parameters:nn})=>{if(!Be)return null;const Yn=k(P)+At.length;return{snapshot:new Lo(At,nn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B(D),Li(D),D.component??D._loadedComponent??null,D,sa(P),Yn,re(D)),consumedSegments:At,remainingSegments:an}}));return se.pipe((0,Ye.w)(Be=>{if(null===Be)return(0,p.of)(null);const{snapshot:At,consumedSegments:an,remainingSegments:nn}=Be;S=D._injector??S;const Yn=D._loadedInjector??S,ci=function Dc(T){return T.children?T.children:T.loadChildren?T._loadedRoutes:[]}(D),{segmentGroup:Zr,slicedSegments:Us}=Ho(P,an,nn,ci.filter(_o=>void 0===_o.redirectTo));if(0===Us.length&&Zr.hasChildren())return this.processChildren(Yn,ci,Zr).pipe((0,rt.U)(_o=>null===_o?null:[new ds(At,_o)]));if(0===ci.length&&0===Us.length)return(0,p.of)([new ds(At,[])]);const mo=Li(D)===J;return this.processSegment(Yn,ci,Zr,Us,mo?ft:J).pipe((0,rt.U)(_o=>null===_o?null:[new ds(At,_o)]))}))}}function El(T){const S=T.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function jl(T){const S=[],D=new Set;for(const P of T){if(!El(P)){S.push(P);continue}const $=S.find(J=>P.value.routeConfig===J.value.routeConfig);void 0!==$?($.children.push(...P.children),D.add($)):S.push(P)}for(const P of D){const $=jl(P.children);S.push(new ds(P.value,$))}return S.filter(P=>!D.has(P))}function sa(T){let S=T;for(;S._sourceSegment;)S=S._sourceSegment;return S}function k(T){let S=T,D=S._segmentIndexShift??0;for(;S._sourceSegment;)S=S._sourceSegment,D+=S._segmentIndexShift??0;return D-1}function B(T){return T.data||{}}function re(T){return T.resolve||{}}function Cn(T){return"string"==typeof T.title||null===T.title}function zn(T){return(0,Ye.w)(S=>{const D=T(S);return D?(0,Z.D)(D).pipe((0,rt.U)(()=>S)):(0,p.of)(S)})}const jt=new b.OlP("ROUTES");let Zt=(()=>{class T{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,b.f3M)(b.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,p.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const P=Dn(D.loadComponent()).pipe((0,rt.U)(zt),(0,Jt.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=J}),cn(()=>{this.componentLoaders.delete(D)})),$=new Ie(P,()=>new Et.x).pipe(ut());return this.componentLoaders.set(D,$),$}loadChildren(D,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,p.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const J=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,rt.U)(Be=>{this.onLoadEndListener&&this.onLoadEndListener(P);let At,an,nn=!1;Array.isArray(Be)?an=Be:(At=Be.create(D).injector,an=Vn(At.get(jt,[],b.XFs.Self|b.XFs.Optional)));return{routes:an.map(Or),injector:At}}),cn(()=>{this.childrenLoaders.delete(P)})),se=new Ie(J,()=>new Et.x).pipe(ut());return this.childrenLoaders.set(P,se),se}loadModuleFactoryOrRoutes(D){return Dn(D()).pipe((0,rt.U)(zt),(0,qe.z)(P=>P instanceof b.YKP||Array.isArray(P)?(0,p.of)(P):(0,Z.D)(this.compiler.compileModuleAsync(P))))}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function zt(T){return function zo(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let Ot=(()=>{class T{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Et.x,this.configLoader=(0,b.f3M)(Zt),this.environmentInjector=(0,b.f3M)(b.lqb),this.urlSerializer=(0,b.f3M)(Dr),this.rootContexts=(0,b.f3M)(jr),this.navigationId=0,this.afterPreactivation=()=>(0,p.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new vi($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Gr($))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:P})}setupNavigations(D){return this.transitions=new De.X({id:0,targetPageId:0,currentUrlTree:D.currentUrlTree,currentRawUrl:D.currentUrlTree,extractedUrl:D.urlHandlingStrategy.extract(D.currentUrlTree),urlAfterRedirects:D.urlHandlingStrategy.extract(D.currentUrlTree),rawUrl:D.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:yr,restoredState:null,currentSnapshot:D.routerState.snapshot,targetSnapshot:null,currentRouterState:D.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,fe.h)(P=>0!==P.id),(0,rt.U)(P=>({...P,extractedUrl:D.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ye.w)(P=>{let $=!1,J=!1;return(0,p.of)(P).pipe((0,Jt.b)(se=>{this.currentNavigation={id:se.id,initialUrl:se.rawUrl,extractedUrl:se.extractedUrl,trigger:se.source,extras:se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ye.w)(se=>{const Be=D.browserUrlTree.toString(),At=!D.navigated||se.extractedUrl.toString()!==Be||Be!==D.currentUrlTree.toString();if(!At&&"reload"!==(se.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const nn="";return this.events.next(new _n(se.id,D.serializeUrl(P.rawUrl),nn,0)),D.rawUrlTree=se.rawUrl,se.resolve(null),He.E}if(D.urlHandlingStrategy.shouldProcessUrl(se.rawUrl))return si(se.source)&&(D.browserUrlTree=se.extractedUrl),(0,p.of)(se).pipe((0,Ye.w)(nn=>{const Yn=this.transitions?.getValue();return this.events.next(new Vr(nn.id,this.urlSerializer.serialize(nn.extractedUrl),nn.source,nn.restoredState)),Yn!==this.transitions?.getValue()?He.E:Promise.resolve(nn)}),function $u(T,S,D,P){return(0,Ye.w)($=>function uu(T,S,D,P,$){return new Vl(T,S,D,P,$).apply()}(T,S,D,$.extractedUrl,P).pipe((0,rt.U)(J=>({...$,urlAfterRedirects:J}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,D.config),(0,Jt.b)(nn=>{this.currentNavigation={...this.currentNavigation,finalUrl:nn.urlAfterRedirects},P.urlAfterRedirects=nn.urlAfterRedirects}),function ve(T,S,D,P,$){return(0,qe.z)(J=>function Gl(T,S,D,P,$,J,se="emptyOnly"){return new Oi(T,S,D,P,$,se,J).recognize().pipe((0,Ye.w)(Be=>null===Be?function ii(T){return new Pe.y(S=>S.error(T))}(new ui):(0,p.of)(Be)))}(T,S,D,J.urlAfterRedirects,P.serialize(J.urlAfterRedirects),P,$).pipe((0,rt.U)(se=>({...J,targetSnapshot:se}))))}(this.environmentInjector,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,Jt.b)(nn=>{if(P.targetSnapshot=nn.targetSnapshot,"eager"===D.urlUpdateStrategy){if(!nn.extras.skipLocationChange){const ci=D.urlHandlingStrategy.merge(nn.urlAfterRedirects,nn.rawUrl);D.setBrowserUrl(ci,nn)}D.browserUrlTree=nn.urlAfterRedirects}const Yn=new _i(nn.id,this.urlSerializer.serialize(nn.extractedUrl),this.urlSerializer.serialize(nn.urlAfterRedirects),nn.targetSnapshot);this.events.next(Yn)}));if(At&&D.urlHandlingStrategy.shouldProcessUrl(D.rawUrlTree)){const{id:nn,extractedUrl:Yn,source:ci,restoredState:Zr,extras:Us}=se,mo=new Vr(nn,this.urlSerializer.serialize(Yn),ci,Zr);this.events.next(mo);const _o=fs(Yn,this.rootComponentType).snapshot;return P={...se,targetSnapshot:_o,urlAfterRedirects:Yn,extras:{...Us,skipLocationChange:!1,replaceUrl:!1}},(0,p.of)(P)}{const nn="";return this.events.next(new _n(se.id,D.serializeUrl(P.extractedUrl),nn,1)),D.rawUrlTree=se.rawUrl,se.resolve(null),He.E}}),(0,Jt.b)(se=>{const Be=new cs(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot);this.events.next(Be)}),(0,rt.U)(se=>P={...se,guards:pa(se.targetSnapshot,se.currentSnapshot,this.rootContexts)}),function rn(T,S){return(0,qe.z)(D=>{const{targetSnapshot:P,currentSnapshot:$,guards:{canActivateChecks:J,canDeactivateChecks:se}}=D;return 0===se.length&&0===J.length?(0,p.of)({...D,guardsResult:!0}):function Fr(T,S,D,P){return(0,Z.D)(T).pipe((0,qe.z)($=>function ma(T,S,D,P,$){const J=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,p.of)(!0);const se=J.map(Be=>{const At=oi(S)??$,an=fo(Be,At);return Dn(function Io(T){return T&&po(T.canDeactivate)}(an)?an.canDeactivate(T,S,D,P):At.runInContext(()=>an(T,S,D,P))).pipe((0,ct.P)())});return(0,p.of)(se).pipe(lt())}($.component,$.route,D,S,P)),(0,ct.P)($=>!0!==$,!0))}(se,P,$,T).pipe((0,qe.z)(Be=>Be&&function jo(T){return"boolean"==typeof T}(Be)?function Si(T,S,D,P){return(0,Z.D)(S).pipe((0,bt.b)($=>(0,Fe.z)(function Qs(T,S){return null!==T&&S&&S(new Es(T)),(0,p.of)(!0)}($.route.parent,P),function bi(T,S){return null!==T&&S&&S(new Te(T)),(0,p.of)(!0)}($.route,P),function Cs(T,S,D){const P=S[S.length-1],J=S.slice(0,S.length-1).reverse().map(se=>function Fa(T){const S=T.routeConfig?T.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:T,guards:S}:null}(se)).filter(se=>null!==se).map(se=>be(()=>{const Be=se.guards.map(At=>{const an=oi(se.node)??D,nn=fo(At,an);return Dn(function Bl(T){return T&&po(T.canActivateChild)}(nn)?nn.canActivateChild(P,T):an.runInContext(()=>nn(P,T))).pipe((0,ct.P)())});return(0,p.of)(Be).pipe(lt())}));return(0,p.of)(J).pipe(lt())}(T,$.path,D),function Xs(T,S,D){const P=S.routeConfig?S.routeConfig.canActivate:null;if(!P||0===P.length)return(0,p.of)(!0);const $=P.map(J=>be(()=>{const se=oi(S)??D,Be=fo(J,se);return Dn(function ta(T){return T&&po(T.canActivate)}(Be)?Be.canActivate(S,T):se.runInContext(()=>Be(S,T))).pipe((0,ct.P)())}));return(0,p.of)($).pipe(lt())}(T,$.route,D))),(0,ct.P)($=>!0!==$,!0))}(P,J,T,S):(0,p.of)(Be)),(0,rt.U)(Be=>({...D,guardsResult:Be})))})}(this.environmentInjector,se=>this.events.next(se)),(0,Jt.b)(se=>{if(P.guardsResult=se.guardsResult,Ht(se.guardsResult))throw co(0,se.guardsResult);const Be=new rs(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot,!!se.guardsResult);this.events.next(Be)}),(0,fe.h)(se=>!!se.guardsResult||(D.restoreHistory(se),this.cancelNavigationTransition(se,"",3),!1)),zn(se=>{if(se.guards.canActivateChecks.length)return(0,p.of)(se).pipe((0,Jt.b)(Be=>{const At=new yi(Be.id,this.urlSerializer.serialize(Be.extractedUrl),this.urlSerializer.serialize(Be.urlAfterRedirects),Be.targetSnapshot);this.events.next(At)}),(0,Ye.w)(Be=>{let At=!1;return(0,p.of)(Be).pipe(function Je(T,S){return(0,qe.z)(D=>{const{targetSnapshot:P,guards:{canActivateChecks:$}}=D;if(!$.length)return(0,p.of)(D);let J=0;return(0,Z.D)($).pipe((0,bt.b)(se=>function St(T,S,D,P){const $=T.routeConfig,J=T._resolve;return void 0!==$?.title&&!Cn($)&&(J[bn]=$.title),function fn(T,S,D,P){const $=function vr(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===$.length)return(0,p.of)({});const J={};return(0,Z.D)($).pipe((0,qe.z)(se=>function Dt(T,S,D,P){const $=oi(S)??P,J=fo(T,$);return Dn(J.resolve?J.resolve(S,D):$.runInContext(()=>J(S,D)))}(T[se],S,D,P).pipe((0,ct.P)(),(0,Jt.b)(Be=>{J[se]=Be}))),st(1),(0,Mt.h)(J),Pt(se=>L(se)?He.E:yt(se)))}(J,T,S,P).pipe((0,rt.U)(se=>(T._resolvedData=se,T.data=Eo(T,D).resolve,$&&Cn($)&&(T.data[bn]=$.title),null)))}(se.route,P,T,S)),(0,Jt.b)(()=>J++),st(1),(0,qe.z)(se=>J===$.length?(0,p.of)(D):He.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,Jt.b)({next:()=>At=!0,complete:()=>{At||(D.restoreHistory(Be),this.cancelNavigationTransition(Be,"",2))}}))}),(0,Jt.b)(Be=>{const At=new is(Be.id,this.urlSerializer.serialize(Be.extractedUrl),this.urlSerializer.serialize(Be.urlAfterRedirects),Be.targetSnapshot);this.events.next(At)}))}),zn(se=>{const Be=At=>{const an=[];At.routeConfig?.loadComponent&&!At.routeConfig._loadedComponent&&an.push(this.configLoader.loadComponent(At.routeConfig).pipe((0,Jt.b)(nn=>{At.component=nn}),(0,rt.U)(()=>{})));for(const nn of At.children)an.push(...Be(nn));return an};return(0,xe.a)(Be(se.targetSnapshot.root)).pipe((0,at.d)(),(0,xt.q)(1))}),zn(()=>this.afterPreactivation()),(0,rt.U)(se=>{const Be=function Fs(T,S,D){const P=Ls(T,S._root,D?D._root:void 0);return new qi(P,S)}(D.routeReuseStrategy,se.targetSnapshot,se.currentRouterState);return P={...se,targetRouterState:Be}}),(0,Jt.b)(se=>{D.currentUrlTree=se.urlAfterRedirects,D.rawUrlTree=D.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),D.routerState=se.targetRouterState,"deferred"===D.urlUpdateStrategy&&(se.extras.skipLocationChange||D.setBrowserUrl(D.rawUrlTree,se),D.browserUrlTree=se.urlAfterRedirects)}),((T,S,D)=>(0,rt.U)(P=>(new Go(S,P.targetRouterState,P.currentRouterState,D).activate(T),P)))(this.rootContexts,D.routeReuseStrategy,se=>this.events.next(se)),(0,Jt.b)({next:se=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,D.navigated=!0,this.events.next(new ri(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(D.currentUrlTree))),D.titleStrategy?.updateTitle(se.targetRouterState.snapshot),se.resolve(!0)},complete:()=>{$=!0}}),cn(()=>{$||J||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Pt(se=>{if(J=!0,Bo(se)){Zs(se)||(D.navigated=!0,D.restoreHistory(P,!0));const Be=new ko(P.id,this.urlSerializer.serialize(P.extractedUrl),se.message,se.cancellationCode);if(this.events.next(Be),Zs(se)){const At=D.urlHandlingStrategy.merge(se.url,D.rawUrlTree),an={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===D.urlUpdateStrategy||si(P.source)};D.scheduleNavigation(At,yr,null,an,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{D.restoreHistory(P,!0);const Be=new Bi(P.id,this.urlSerializer.serialize(P.extractedUrl),se,P.targetSnapshot??void 0);this.events.next(Be);try{P.resolve(D.errorHandler(se))}catch(At){P.reject(At)}}return He.E}))}))}cancelNavigationTransition(D,P,$){const J=new ko(D.id,this.urlSerializer.serialize(D.extractedUrl),P,$);this.events.next(J),D.resolve(!1)}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function si(T){return T!==yr}let Co=(()=>{class T{buildTitle(D){let P,$=D.root;for(;void 0!==$;)P=this.getResolvedTitleForRoute($)??P,$=$.children.find(J=>J.outlet===ft);return P}getResolvedTitleForRoute(D){return D.data[bn]}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return(0,b.f3M)(sl)},providedIn:"root"}),T})(),sl=(()=>{class T extends Co{constructor(D){super(),this.title=D}updateTitle(D){const P=this.buildTitle(D);void 0!==P&&this.title.setTitle(P)}}return T.\u0275fac=function(D){return new(D||T)(b.LFG(Xt.Dx))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),ol=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return(0,b.f3M)(Ea)},providedIn:"root"}),T})();class al{shouldDetach(S){return!1}store(S,D){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,D){return S.routeConfig===D.routeConfig}}let Ea=(()=>{class T extends al{}return T.\u0275fac=function(){let S;return function(P){return(S||(S=b.n5z(T)))(P||T)}}(),T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const oa=new b.OlP("",{providedIn:"root",factory:()=>({})});let Wu=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:function(){return(0,b.f3M)(cu)},providedIn:"root"}),T})(),cu=(()=>{class T{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,P){return D}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function wl(T){throw T}function Fn(T,S,D){return S.parse("/")}const wa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},du={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sr=(()=>{class T{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,b.f3M)(b.c2e),this.isNgZoneEnabled=!1,this.options=(0,b.f3M)(oa,{optional:!0})||{},this.errorHandler=this.options.errorHandler||wl,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Fn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,b.f3M)(Wu),this.routeReuseStrategy=(0,b.f3M)(ol),this.urlCreationStrategy=(0,b.f3M)(kn),this.titleStrategy=(0,b.f3M)(Co),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Vn((0,b.f3M)(jt,{optional:!0})??[]),this.navigationTransitions=(0,b.f3M)(Ot),this.urlSerializer=(0,b.f3M)(Dr),this.location=(0,b.f3M)(gt.Ye),this.isNgZoneEnabled=(0,b.f3M)(b.R0b)instanceof b.R0b&&b.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(D=>{this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),yr,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const P="popstate"===D.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,P,D.state)},0)}))}navigateToSyncWithBrowser(D,P,$){const J={replaceUrl:!0},se=$?.navigationId?$:null;if($){const At={...$};delete At.navigationId,delete At.\u0275routerPageId,0!==Object.keys(At).length&&(J.state=At)}const Be=this.parseUrl(D);this.scheduleNavigation(Be,P,se,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(D){this.config=D.map(Or),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,P={}){const{relativeTo:$,queryParams:J,fragment:se,queryParamsHandling:Be,preserveFragment:At}=P,an=At?this.currentUrlTree.fragment:se;let nn=null;switch(Be){case"merge":nn={...this.currentUrlTree.queryParams,...J};break;case"preserve":nn=this.currentUrlTree.queryParams;break;default:nn=J||null}return null!==nn&&(nn=this.removeEmptyProps(nn)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,D,nn,an??null)}navigateByUrl(D,P={skipLocationChange:!1}){const $=Ht(D)?D:this.parseUrl(D),J=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(J,yr,null,P)}navigate(D,P={skipLocationChange:!1}){return function yn(T){for(let S=0;S<T.length;S++){const D=T[S];if(null==D)throw new b.vHH(4008,false)}}(D),this.navigateByUrl(this.createUrlTree(D,P),P)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let P;try{P=this.urlSerializer.parse(D)}catch($){P=this.malformedUriErrorHandler($,this.urlSerializer,D)}return P}isActive(D,P){let $;if($=!0===P?{...wa}:!1===P?{...du}:P,Ht(D))return wr(this.currentUrlTree,D,$);const J=this.parseUrl(D);return wr(this.currentUrlTree,J,$)}removeEmptyProps(D){return Object.keys(D).reduce((P,$)=>{const J=D[$];return null!=J&&(P[$]=J),P},{})}scheduleNavigation(D,P,$,J,se){if(this.disposed)return Promise.resolve(!1);let Be,At,an,nn;return se?(Be=se.resolve,At=se.reject,an=se.promise):an=new Promise((Yn,ci)=>{Be=Yn,At=ci}),nn="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:J.replaceUrl||J.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:nn,source:P,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:J,resolve:Be,reject:At,promise:an,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),an.catch(Yn=>Promise.reject(Yn))}setBrowserUrl(D,P){const $=this.urlSerializer.serialize(D),J={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo($)||P.extras.replaceUrl?this.location.replaceState($,"",J):this.location.go($,"",J)}restoreHistory(D,P=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===$?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===$&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,P){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:P}:{navigationId:D}}}return T.\u0275fac=function(D){return new(D||T)},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Ua=(()=>{class T{constructor(D,P,$,J,se,Be){this.router=D,this.route=P,this.tabIndexAttribute=$,this.renderer=J,this.el=se,this.locationStrategy=Be,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Et.x;const At=se.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===At||"area"===At,this.isAnchorElement?this.subscription=D.events.subscribe(an=>{an instanceof ri&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,b.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,b.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,b.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,P,$,J,se){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||P||$||J||se||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const D=null===this.href?null:(0,b.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(D,P){const $=this.renderer,J=this.el.nativeElement;null!==P?$.setAttribute(J,D,P):$.removeAttribute(J,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return T.\u0275fac=function(D){return new(D||T)(b.Y36(sr),b.Y36(Vi),b.$8M("tabindex"),b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(gt.S$))},T.\u0275dir=b.lG2({type:T,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,P){1&D&&b.NdJ("click",function(J){return P.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&D&&b.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[b.TTD]}),T})();class Cr{}let Da=(()=>{class T{constructor(D,P,$,J,se){this.router=D,this.injector=$,this.preloadingStrategy=J,this.loader=se}setUpPreloading(){this.subscription=this.router.events.pipe((0,fe.h)(D=>D instanceof ri),(0,bt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,P){const $=[];for(const J of P){J.providers&&!J._injector&&(J._injector=(0,b.MMx)(J.providers,D,`Route: ${J.path}`));const se=J._injector??D,Be=J._loadedInjector??se;J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent?$.push(this.preloadConfig(se,J)):(J.children||J._loadedRoutes)&&$.push(this.processRoutes(Be,J.children??J._loadedRoutes))}return(0,Z.D)($).pipe((0,Kt.J)())}preloadConfig(D,P){return this.preloadingStrategy.preload(P,()=>{let $;$=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(D,P):(0,p.of)(null);const J=$.pipe((0,qe.z)(se=>null===se?(0,p.of)(void 0):(P._loadedRoutes=se.routes,P._loadedInjector=se.injector,this.processRoutes(se.injector??D,se.routes))));if(P.loadComponent&&!P._loadedComponent){const se=this.loader.loadComponent(P);return(0,Z.D)([J,se]).pipe((0,Kt.J)())}return J})}}return T.\u0275fac=function(D){return new(D||T)(b.LFG(sr),b.LFG(b.Sil),b.LFG(b.lqb),b.LFG(Cr),b.LFG(Zt))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Nr=new b.OlP("");let hu=(()=>{class T{constructor(D,P,$,J,se={}){this.urlSerializer=D,this.transitions=P,this.viewportScroller=$,this.zone=J,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof Vr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof ri&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof Ct&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ct(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return T.\u0275fac=function(D){b.$Z()},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})();var Lr=(()=>((Lr=Lr||{})[Lr.COMPLETE=0]="COMPLETE",Lr[Lr.FAILED=1]="FAILED",Lr[Lr.REDIRECTING=2]="REDIRECTING",Lr))();const gr=!1;function xi(T,S){return{\u0275kind:T,\u0275providers:S}}const aa=new b.OlP("",{providedIn:"root",factory:()=>!1});function eo(){const T=(0,b.f3M)(b.zs3);return S=>{const D=T.get(b.z2F);if(S!==D.components[0])return;const P=T.get(sr),$=T.get(ot);1===T.get(ll)&&P.initialNavigation(),T.get(Oo,null,b.XFs.Optional)?.setUpPreloading(),T.get(Nr,null,b.XFs.Optional)?.init(),P.resetRootComponentType(D.componentTypes[0]),$.closed||($.next(),$.unsubscribe())}}const ot=new b.OlP(gr?"bootstrap done indicator":"",{factory:()=>new Et.x}),ll=new b.OlP(gr?"initial navigation":"",{providedIn:"root",factory:()=>1});function qu(){let T=[];return T=gr?[{provide:b.Xts,multi:!0,useFactory:()=>{const S=(0,b.f3M)(sr);return()=>S.events.subscribe(D=>{console.group?.(`Router Event: ${D.constructor.name}`),console.log(function Wt(T){if(!("type"in T))return`Unknown Router Event: ${T.constructor.name}`;switch(T.type){case 14:return`ActivationEnd(path: '${T.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${T.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${T.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${T.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state}, shouldActivate: ${T.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 2:return`NavigationCancel(id: ${T.id}, url: '${T.url}')`;case 16:return`NavigationSkipped(id: ${T.id}, url: '${T.url}')`;case 1:return`NavigationEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${T.id}, url: '${T.url}', error: ${T.error})`;case 0:return`NavigationStart(id: ${T.id}, url: '${T.url}')`;case 6:return`ResolveEnd(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 5:return`ResolveStart(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 10:return`RouteConfigLoadEnd(path: ${T.route.path})`;case 9:return`RouteConfigLoadStart(path: ${T.route.path})`;case 4:return`RoutesRecognized(id: ${T.id}, url: '${T.url}', urlAfterRedirects: '${T.urlAfterRedirects}', state: ${T.state})`;case 15:return`Scroll(anchor: '${T.anchor}', position: '${T.position?`${T.position[0]}, ${T.position[1]}`:null}')`}}(D)),console.log(D),console.groupEnd?.()})}}]:[],xi(1,T)}const Oo=new b.OlP(gr?"router preloader":"");function Ur(T){return xi(0,[{provide:Oo,useExisting:Da},{provide:Cr,useExisting:T}])}const Va=!1,go=new b.OlP(Va?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Qc=[gt.Ye,{provide:Dr,useClass:Pn},sr,jr,{provide:Vi,useFactory:function So(T){return T.routerState.root},deps:[sr]},Zt,Va?{provide:aa,useValue:!0}:[]];function Ca(){return new b.PXZ("Router",sr)}let ul=(()=>{class T{constructor(D){}static forRoot(D,P){return{ngModule:T,providers:[Qc,Va&&P?.enableTracing?qu().\u0275providers:[],{provide:jt,multi:!0,useValue:D},{provide:go,useFactory:to,deps:[[sr,new b.FiY,new b.tp0]]},{provide:oa,useValue:P||{}},P?.useHash?{provide:gt.S$,useClass:gt.Do}:{provide:gt.S$,useClass:gt.b0},{provide:Nr,useFactory:()=>{const T=(0,b.f3M)(gt.EM),S=(0,b.f3M)(b.R0b),D=(0,b.f3M)(oa),P=(0,b.f3M)(Ot),$=(0,b.f3M)(Dr);return D.scrollOffset&&T.setOffset(D.scrollOffset),new hu($,P,T,S,D)}},P?.preloadingStrategy?Ur(P.preloadingStrategy).\u0275providers:[],{provide:b.PXZ,multi:!0,useFactory:Ca},P?.initialNavigation?Ga(P):[],[{provide:Qi,useFactory:eo},{provide:b.tb,multi:!0,useExisting:Qi}]]}}static forChild(D){return{ngModule:T,providers:[{provide:jt,multi:!0,useValue:D}]}}}return T.\u0275fac=function(D){return new(D||T)(b.LFG(go,8))},T.\u0275mod=b.oAB({type:T}),T.\u0275inj=b.cJS({imports:[Js]}),T})();function to(T){if(Va&&T)throw new b.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ga(T){return["disabled"===T.initialNavigation?xi(3,[{provide:b.ip1,multi:!0,useFactory:()=>{const S=(0,b.f3M)(sr);return()=>{S.setUpLocationChangeListener()}}},{provide:ll,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?xi(2,[{provide:ll,useValue:0},{provide:b.ip1,multi:!0,deps:[b.zs3],useFactory:S=>{const D=S.get(gt.V_,Promise.resolve());return()=>D.then(()=>new Promise(P=>{const $=S.get(sr),J=S.get(ot);(function Ba(T,S){T.events.pipe((0,fe.h)(D=>D instanceof ri||D instanceof ko||D instanceof Bi||D instanceof _n),(0,rt.U)(D=>D instanceof ri||D instanceof _n?Lr.COMPLETE:D instanceof ko&&(0===D.code||1===D.code)?Lr.REDIRECTING:Lr.FAILED),(0,fe.h)(D=>D!==Lr.REDIRECTING),(0,xt.q)(1)).subscribe(()=>{S()})})($,()=>{P(!0)}),S.get(Ot).afterPreactivation=()=>(P(!0),J.closed?(0,p.of)(void 0):J),$.initialNavigation()}))}}]).\u0275providers:[]]}const Qi=new b.OlP(Va?"Router Initializer":"")},3942:(Yt,Ke,V)=>{V.d(Ke,{Z:()=>pt});var b=V(2090),Z=V(4859),p=V(9681),De=V(1877);class Me{constructor(Qe,ut){this._delegate=Qe,this.firebase=ut,(0,p._addComponent)(Qe,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=Qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this._delegate.automaticDataCollectionEnabled=Qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Qe=>{this._delegate.checkDestroyed(),Qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,p.deleteApp)(this._delegate)))}_getService(Qe,ut=p._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(Qe);return!Et.isInitialized()&&"EXPLICIT"===(null===(Ie=Et.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:ut})}_removeServiceInstance(Qe,ut=p._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Qe).clearInstance(ut)}_addComponent(Qe){(0,p._addComponent)(this._delegate,Qe)}_addOrOverwriteComponent(Qe){(0,p._addOrOverwriteComponent)(this._delegate,Qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fe=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function Ge(){const Nt=function Pe(Nt){const Qe={},ut={__esModule:!0,initializeApp:function gt(ke,fe={}){const qe=p.initializeApp(ke,fe);if((0,b.r3)(Qe,qe.name))return Qe[qe.name];const ct=new Nt(qe,ut);return Qe[qe.name]=ct,ct},app:Et,registerVersion:p.registerVersion,setLogLevel:p.setLogLevel,onLog:p.onLog,apps:null,SDK_VERSION:p.SDK_VERSION,INTERNAL:{registerComponent:function Ye(ke){const fe=ke.name,qe=fe.replace("-compat","");if(p._registerComponent(ke)&&"PUBLIC"===ke.type){const ct=(bt=Et())=>{if("function"!=typeof bt[qe])throw Fe.create("invalid-app-argument",{appName:fe});return bt[qe]()};void 0!==ke.serviceProps&&(0,b.ZB)(ct,ke.serviceProps),ut[qe]=ct,Nt.prototype[qe]=function(...bt){return this._getService.bind(this,fe).apply(this,ke.multipleInstances?bt:[])}}return"PUBLIC"===ke.type?ut[qe]:null},removeApp:function Ie(ke){delete Qe[ke]},useAsService:function xt(ke,fe){return"serverAuth"===fe?null:fe},modularAPIs:p}};function Et(ke){if(!(0,b.r3)(Qe,ke=ke||p._DEFAULT_ENTRY_NAME))throw Fe.create("no-app",{appName:ke});return Qe[ke]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function rt(){return Object.keys(Qe).map(ke=>Qe[ke])}}),Et.App=Nt,ut}(Me);return Nt.INTERNAL=Object.assign(Object.assign({},Nt.INTERNAL),{createFirebaseNamespace:Ge,extendNamespace:function Qe(ut){(0,b.ZB)(Nt,ut)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),Nt}(),Ee=new De.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Nt=self.firebase.SDK_VERSION;Nt&&Nt.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const pt=be;!function He(Nt){(0,p.registerVersion)("@firebase/app-compat","0.2.5",Nt)}()},9681:(Yt,Ke,V)=>{V.r(Ke),V.d(Ke,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>Wn,_DEFAULT_ENTRY_NAME:()=>wt,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Kt,_apps:()=>Rt,_clearComponents:()=>xn,_components:()=>Mt,_getProvider:()=>ft,_registerComponent:()=>Xt,_removeServiceInstance:()=>bn,deleteApp:()=>Rr,getApp:()=>Vn,getApps:()=>_r,initializeApp:()=>Ar,onLog:()=>kt,registerVersion:()=>Dn,setLogLevel:()=>Zn});var b=V(5861),Z=V(4859),p=V(1877),De=V(2090),Me=V(8766);class xe{constructor(It){this.container=It}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function Fe(Lt){return"VERSION"===Lt.getComponent()?.type}(Ue)){const ye=Ue.getImmediate();return`${ye.library}/${ye.version}`}return null}).filter(Ue=>Ue).join(" ")}}const Pe="@firebase/app",be=new p.Yd("@firebase/app"),wt="[DEFAULT]",dt={[Pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Rt=new Map,Mt=new Map;function cn(Lt,It){try{Lt.container.addComponent(It)}catch(Ue){be.debug(`Component ${It.name} failed to register with FirebaseApp ${Lt.name}`,Ue)}}function Kt(Lt,It){Lt.container.addOrOverwriteComponent(It)}function Xt(Lt){const It=Lt.name;if(Mt.has(It))return be.debug(`There were multiple attempts to register component ${It}.`),!1;Mt.set(It,Lt);for(const Ue of Rt.values())cn(Ue,Lt);return!0}function ft(Lt,It){const Ue=Lt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),Lt.container.getProvider(It)}function bn(Lt,It,Ue=wt){ft(Lt,It).clearInstance(Ue)}function xn(){Mt.clear()}const Ln=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hr{constructor(It,Ue,ye){this._isDeleted=!1,this._options=Object.assign({},It),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=ye,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(It){this.checkDestroyed(),this._automaticDataCollectionEnabled=It}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(It){this._isDeleted=It}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const Wn="9.18.0";function Ar(Lt,It={}){let Ue=Lt;"object"!=typeof It&&(It={name:It});const ye=Object.assign({name:wt,automaticDataCollectionEnabled:!1},It),Ce=ye.name;if("string"!=typeof Ce||!Ce)throw Ln.create("bad-app-name",{appName:String(Ce)});if(Ue||(Ue=(0,De.aH)()),!Ue)throw Ln.create("no-options");const ht=Rt.get(Ce);if(ht){if((0,De.vZ)(Ue,ht.options)&&(0,De.vZ)(ye,ht.config))return ht;throw Ln.create("duplicate-app",{appName:Ce})}const mt=new Z.H0(Ce);for(const pe of Mt.values())mt.addComponent(pe);const ge=new hr(Ue,ye,mt);return Rt.set(Ce,ge),ge}function Vn(Lt=wt){const It=Rt.get(Lt);if(!It&&Lt===wt)return Ar();if(!It)throw Ln.create("no-app",{appName:Lt});return It}function _r(){return Array.from(Rt.values())}function Rr(Lt){return en.apply(this,arguments)}function en(){return(en=(0,b.Z)(function*(Lt){const It=Lt.name;Rt.has(It)&&(Rt.delete(It),yield Promise.all(Lt.container.getProviders().map(Ue=>Ue.delete())),Lt.isDeleted=!0)})).apply(this,arguments)}function Dn(Lt,It,Ue){var ye;let Ce=null!==(ye=dt[Lt])&&void 0!==ye?ye:Lt;Ue&&(Ce+=`-${Ue}`);const ht=Ce.match(/\s|\//),mt=It.match(/\s|\//);if(ht||mt){const ge=[`Unable to register library "${Ce}" with version "${It}":`];return ht&&ge.push(`library name "${Ce}" contains illegal characters (whitespace or "/")`),ht&&mt&&ge.push("and"),mt&&ge.push(`version name "${It}" contains illegal characters (whitespace or "/")`),void be.warn(ge.join(" "))}Xt(new Z.wA(`${Ce}-version`,()=>({library:Ce,version:It}),"VERSION"))}function kt(Lt,It){if(null!==Lt&&"function"!=typeof Lt)throw Ln.create("invalid-log-argument");(0,p.Am)(Lt,It)}function Zn(Lt){(0,p.Ub)(Lt)}const Kr="firebase-heartbeat-database",wr=1,xr="firebase-heartbeat-store";let qr=null;function mn(){return qr||(qr=(0,Me.X3)(Kr,wr,{upgrade:(Lt,It)=>{0===It&&Lt.createObjectStore(xr)}}).catch(Lt=>{throw Ln.create("idb-open",{originalErrorMessage:Lt.message})})),qr}function $t(){return($t=(0,b.Z)(function*(Lt){try{return(yield mn()).transaction(xr).objectStore(xr).get(un(Lt))}catch(It){if(It instanceof De.ZR)be.warn(It.message);else{const Ue=Ln.create("idb-get",{originalErrorMessage:It?.message});be.warn(Ue.message)}}})).apply(this,arguments)}function Hn(Lt,It){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,b.Z)(function*(Lt,It){try{const ye=(yield mn()).transaction(xr,"readwrite");return yield ye.objectStore(xr).put(It,un(Lt)),ye.done}catch(Ue){if(Ue instanceof De.ZR)be.warn(Ue.message);else{const ye=Ln.create("idb-set",{originalErrorMessage:Ue?.message});be.warn(ye.message)}}})).apply(this,arguments)}function un(Lt){return`${Lt.name}!${Lt.options.appId}`}class Pr{constructor(It){this.container=It,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new Pn(Ue),this._heartbeatsCachePromise=this._storage.read().then(ye=>(this._heartbeatsCache=ye,ye))}triggerHeartbeat(){var It=this;return(0,b.Z)(function*(){const ye=It.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ce=Nn();if(null===It._heartbeatsCache&&(It._heartbeatsCache=yield It._heartbeatsCachePromise),It._heartbeatsCache.lastSentHeartbeatDate!==Ce&&!It._heartbeatsCache.heartbeats.some(ht=>ht.date===Ce))return It._heartbeatsCache.heartbeats.push({date:Ce,agent:ye}),It._heartbeatsCache.heartbeats=It._heartbeatsCache.heartbeats.filter(ht=>{const mt=new Date(ht.date).valueOf();return Date.now()-mt<=2592e6}),It._storage.overwrite(It._heartbeatsCache)})()}getHeartbeatsHeader(){var It=this;return(0,b.Z)(function*(){if(null===It._heartbeatsCache&&(yield It._heartbeatsCachePromise),null===It._heartbeatsCache||0===It._heartbeatsCache.heartbeats.length)return"";const Ue=Nn(),{heartbeatsToSend:ye,unsentEntries:Ce}=function Dr(Lt,It=1024){const Ue=[];let ye=Lt.slice();for(const Ce of Lt){const ht=Ue.find(mt=>mt.agent===Ce.agent);if(ht){if(ht.dates.push(Ce.date),Ci(Ue)>It){ht.dates.pop();break}}else if(Ue.push({agent:Ce.agent,dates:[Ce.date]}),Ci(Ue)>It){Ue.pop();break}ye=ye.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:ye}}(It._heartbeatsCache.heartbeats),ht=(0,De.L)(JSON.stringify({version:2,heartbeats:ye}));return It._heartbeatsCache.lastSentHeartbeatDate=Ue,Ce.length>0?(It._heartbeatsCache.heartbeats=Ce,yield It._storage.overwrite(It._heartbeatsCache)):(It._heartbeatsCache.heartbeats=[],It._storage.overwrite(It._heartbeatsCache)),ht})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(It){this.app=It,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var It=this;return(0,b.Z)(function*(){return(yield It._canUseIndexedDBPromise)&&(yield function on(Lt){return $t.apply(this,arguments)}(It.app))||{heartbeats:[]}})()}overwrite(It){var Ue=this;return(0,b.Z)(function*(){var ye;if(yield Ue._canUseIndexedDBPromise){const ht=yield Ue.read();return Hn(Ue.app,{lastSentHeartbeatDate:null!==(ye=It.lastSentHeartbeatDate)&&void 0!==ye?ye:ht.lastSentHeartbeatDate,heartbeats:It.heartbeats})}})()}add(It){var Ue=this;return(0,b.Z)(function*(){var ye;if(yield Ue._canUseIndexedDBPromise){const ht=yield Ue.read();return Hn(Ue.app,{lastSentHeartbeatDate:null!==(ye=It.lastSentHeartbeatDate)&&void 0!==ye?ye:ht.lastSentHeartbeatDate,heartbeats:[...ht.heartbeats,...It.heartbeats]})}})()}}function Ci(Lt){return(0,De.L)(JSON.stringify({version:2,heartbeats:Lt})).length}!function rr(Lt){Xt(new Z.wA("platform-logger",It=>new xe(It),"PRIVATE")),Xt(new Z.wA("heartbeat",It=>new Pr(It),"PRIVATE")),Dn(Pe,"0.9.5",Lt),Dn(Pe,"0.9.5","esm2017"),Dn("fire-js","")}("")},4859:(Yt,Ke,V)=>{V.d(Ke,{H0:()=>Pe,wA:()=>p,zt:()=>Me});var b=V(5861),Z=V(2090);class p{constructor(be,Ee,Re){this.name=be,this.instanceFactory=Ee,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const De="[DEFAULT]";class Me{constructor(be,Ee){this.name=be,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const Ee=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(Ee)){const Re=new Z.BH;if(this.instancesDeferred.set(Ee,Re),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:Ee});yt&&Re.resolve(yt)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(be){var Ee;const Re=this.normalizeInstanceIdentifier(be?.identifier),yt=null!==(Ee=be?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(He){if(yt)return null;throw He}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function Fe(Ge){return"EAGER"===Ge.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[Ee,Re]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(Ee);try{const He=this.getOrInitializeService({instanceIdentifier:yt});Re.resolve(He)}catch{}}}}clearInstance(be=De){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,b.Z)(function*(){const Ee=Array.from(be.instances.values());yield Promise.all([...Ee.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...Ee.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=De){return this.instances.has(be)}getOptions(be=De){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:Ee={}}=be,Re=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Re,options:Ee});for(const[He,pt]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(He)&&pt.resolve(yt);return yt}onInit(be,Ee){var Re;const yt=this.normalizeInstanceIdentifier(Ee),He=null!==(Re=this.onInitCallbacks.get(yt))&&void 0!==Re?Re:new Set;He.add(be),this.onInitCallbacks.set(yt,He);const pt=this.instances.get(yt);return pt&&be(pt,yt),()=>{He.delete(be)}}invokeOnInitCallbacks(be,Ee){const Re=this.onInitCallbacks.get(Ee);if(Re)for(const yt of Re)try{yt(be,Ee)}catch{}}getOrInitializeService({instanceIdentifier:be,options:Ee={}}){let Re=this.instances.get(be);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(Ge=be,Ge===De?void 0:Ge),options:Ee}),this.instances.set(be,Re),this.instancesOptions.set(be,Ee),this.invokeOnInitCallbacks(Re,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,Re)}catch{}var Ge;return Re||null}normalizeInstanceIdentifier(be=De){return this.component?this.component.multipleInstances?be:De:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pe{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const Ee=this.getProvider(be.name);if(Ee.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);Ee.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const Ee=new Me(be,this);return this.providers.set(be,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},1877:(Yt,Ke,V)=>{V.d(Ke,{Am:()=>Ge,Ub:()=>Pe,Yd:()=>Fe,in:()=>Z});const b=[];var Z=(()=>{return(be=Z||(Z={}))[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",Z;var be})();const p={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},De=Z.INFO,Me={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},xe=(be,Ee,...Re)=>{if(Ee<be.logLevel)return;const yt=(new Date).toISOString(),He=Me[Ee];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[He](`[${yt}]  ${be.name}:`,...Re)};class Fe{constructor(Ee){this.name=Ee,this._logLevel=De,this._logHandler=xe,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in Z))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?p[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...Ee),this._logHandler(this,Z.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...Ee),this._logHandler(this,Z.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...Ee),this._logHandler(this,Z.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...Ee),this._logHandler(this,Z.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...Ee),this._logHandler(this,Z.ERROR,...Ee)}}function Pe(be){b.forEach(Ee=>{Ee.setLogLevel(be)})}function Ge(be,Ee){for(const Re of b){let yt=null;Ee&&Ee.level&&(yt=p[Ee.level]),Re.userLogHandler=null===be?null:(He,pt,...Nt)=>{const Qe=Nt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");pt>=(yt??He.logLevel)&&be({level:Z[pt].toLowerCase(),message:Qe,args:Nt,type:He.name})}}}},259:(Yt,Ke,V)=>{V.d(Ke,{C6:()=>b.getApps,Mq:()=>b.getApp});var b=V(9681);(0,b.registerVersion)("firebase","9.18.0","app")},9260:(Yt,Ke,V)=>{V.d(Ke,{Z:()=>b.Z});var b=V(3942);b.Z.registerVersion("firebase","9.18.0","app-compat")},9568:(Yt,Ke,V)=>{V.r(Ke);var b=V(5861),Z=V(3942),p=V(5114),De=V(2090),Fe=(V(9681),V(1877),V(4859));function Pe(){return window}const Ge=2e3;function Ee(){return Ee=(0,b.Z)(function*(ne,ie,Q){var Le;const{BuildInfo:ce}=Pe();(0,p.ap)(ie.sessionId,"AuthEvent did not contain a session ID");const me=yield function ut(ne){return Ie.apply(this,arguments)}(ie.sessionId),le={};return(0,p.aq)()?le.ibi=ce.packageName:(0,p.ar)()?le.apn=ce.packageName:(0,p.as)(ne,"operation-not-supported-in-this-environment"),ce.displayName&&(le.appDisplayName=ce.displayName),le.sessionId=me,(0,p.at)(ne,Q,ie.type,void 0,null!==(Le=ie.eventId)&&void 0!==Le?Le:void 0,le)}),Ee.apply(this,arguments)}function yt(){return(yt=(0,b.Z)(function*(ne){const{BuildInfo:ie}=Pe(),Q={};(0,p.aq)()?Q.iosBundleId=ie.packageName:(0,p.ar)()?Q.androidPackageName=ie.packageName:(0,p.as)(ne,"operation-not-supported-in-this-environment"),yield(0,p.au)(ne,Q)})).apply(this,arguments)}function Nt(){return(Nt=(0,b.Z)(function*(ne,ie,Q){const{cordova:Le}=Pe();let ce=()=>{};try{yield new Promise((me,le)=>{let Oe=null;function Ze(){var Ht;me();const vn=null===(Ht=Le.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof vn&&vn(),"function"==typeof Q?.close&&Q.close()}function vt(){Oe||(Oe=window.setTimeout(()=>{le((0,p.aw)(ne,"redirect-cancelled-by-user"))},Ge))}function Qt(){"visible"===document?.visibilityState&&vt()}ie.addPassiveListener(Ze),document.addEventListener("resume",vt,!1),(0,p.ar)()&&document.addEventListener("visibilitychange",Qt,!1),ce=()=>{ie.removePassiveListener(Ze),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",Qt,!1),Oe&&window.clearTimeout(Oe)}})}finally{ce()}})).apply(this,arguments)}function Ie(){return(Ie=(0,b.Z)(function*(ne){const ie=function Et(ne){if((0,p.ap)(/[0-9a-zA-Z]+/.test(ne),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ne);const ie=new ArrayBuffer(ne.length),Q=new Uint8Array(ie);for(let Le=0;Le<ne.length;Le++)Q[Le]=ne.charCodeAt(Le);return Q}(ne),Q=yield crypto.subtle.digest("SHA-256",ie);return Array.from(new Uint8Array(Q)).map(ce=>ce.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const gt=20;class rt extends p.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ie=>{this.resolveInialized=ie})}addPassiveListener(ie){this.passiveListeners.add(ie)}removePassiveListener(ie){this.passiveListeners.delete(ie)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ie){return this.resolveInialized(),this.passiveListeners.forEach(Q=>Q(ie)),super.onEvent(ie)}initialized(){var ie=this;return(0,b.Z)(function*(){yield ie.initPromise})()}}function ke(ne){return fe.apply(this,arguments)}function fe(){return(fe=(0,b.Z)(function*(ne){const ie=yield bt()._get(Jt(ne));return ie&&(yield bt()._remove(Jt(ne))),ie})).apply(this,arguments)}function ct(){const ne=[],ie="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Q=0;Q<gt;Q++){const Le=Math.floor(Math.random()*ie.length);ne.push(ie.charAt(Le))}return ne.join("")}function bt(){return(0,p.az)(p.b)}function Jt(ne){return(0,p.aA)("authEvent",ne.config.apiKey,ne.name)}function st(ne){if(!ne?.includes("?"))return{};const[ie,...Q]=ne.split("?");return(0,De.zd)(Q.join("?"))}const wt=class at{constructor(){this._redirectPersistence=p.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(ie){var Q=this;return(0,b.Z)(function*(){const Le=ie._key();let ce=Q.eventManagers.get(Le);return ce||(ce=new rt(ie),Q.eventManagers.set(Le,ce),Q.attachCallbackListeners(ie,ce)),ce})()}_openPopup(ie){(0,p.as)(ie,"operation-not-supported-in-this-environment")}_openRedirect(ie,Q,Le,ce){var me=this;return(0,b.Z)(function*(){!function Qe(ne){var ie,Q,Le,ce,me,le,Oe,Ze,vt,Qt;const Ht=Pe();(0,p.ax)("function"==typeof(null===(ie=Ht?.universalLinks)||void 0===ie?void 0:ie.subscribe),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,p.ax)(typeof(null===(Q=Ht?.BuildInfo)||void 0===Q?void 0:Q.packageName)<"u",ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,p.ax)("function"==typeof(null===(me=null===(ce=null===(Le=Ht?.cordova)||void 0===Le?void 0:Le.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===me?void 0:me.openUrl),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(Ze=null===(Oe=null===(le=Ht?.cordova)||void 0===le?void 0:le.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===Ze?void 0:Ze.isAvailable),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,p.ax)("function"==typeof(null===(Qt=null===(vt=Ht?.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===Qt?void 0:Qt.open),ne,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ie);const le=yield me._initialize(ie);yield le.initialized(),le.resetRedirect(),(0,p.aD)(),yield me._originValidation(ie);const Oe=function Ye(ne,ie,Q=null){return{type:ie,eventId:Q,urlResponse:null,sessionId:ct(),postBody:null,tenantId:ne.tenantId,error:(0,p.aw)(ne,"no-auth-event")}}(ie,Le,ce);yield function xt(ne,ie){return bt()._set(Jt(ne),ie)}(ie,Oe);const Ze=yield function be(ne,ie,Q){return Ee.apply(this,arguments)}(ie,Oe,Q),vt=yield function He(ne){const{cordova:ie}=Pe();return new Promise(Q=>{ie.plugins.browsertab.isAvailable(Le=>{let ce=null;Le?ie.plugins.browsertab.openUrl(ne):ce=ie.InAppBrowser.open(ne,(0,p.av)()?"_blank":"_system","location=yes"),Q(ce)})})}(Ze);return function pt(ne,ie,Q){return Nt.apply(this,arguments)}(ie,le,vt)})()}_isIframeWebStorageSupported(ie,Q){throw new Error("Method not implemented.")}_originValidation(ie){const Q=ie._key();return this.originValidationPromises[Q]||(this.originValidationPromises[Q]=function Re(ne){return yt.apply(this,arguments)}(ie)),this.originValidationPromises[Q]}attachCallbackListeners(ie,Q){const{universalLinks:Le,handleOpenURL:ce,BuildInfo:me}=Pe(),le=setTimeout((0,b.Z)(function*(){yield ke(ie),Q.onEvent(dt())}),500),Oe=function(){var Qt=(0,b.Z)(function*(Ht){clearTimeout(le);const vn=yield ke(ie);let gi=null;vn&&Ht?.url&&(gi=function qe(ne,ie){var Q,Le;const ce=function We(ne){const ie=st(ne),Q=ie.link?decodeURIComponent(ie.link):void 0,Le=st(Q).link,ce=ie.deep_link_id?decodeURIComponent(ie.deep_link_id):void 0;return st(ce).link||ce||Le||Q||ne}(ie);if(ce.includes("/__/auth/callback")){const me=st(ce),le=me.firebaseError?function Pt(ne){try{return JSON.parse(ne)}catch{return null}}(decodeURIComponent(me.firebaseError)):null,Oe=null===(Le=null===(Q=le?.code)||void 0===Q?void 0:Q.split("auth/"))||void 0===Le?void 0:Le[1],Ze=Oe?(0,p.aw)(Oe):null;return Ze?{type:ne.type,eventId:ne.eventId,tenantId:ne.tenantId,error:Ze,urlResponse:null,sessionId:null,postBody:null}:{type:ne.type,eventId:ne.eventId,tenantId:ne.tenantId,sessionId:ne.sessionId,urlResponse:ce,postBody:null}}return null}(vn,Ht.url)),Q.onEvent(gi||dt())});return function(vn){return Qt.apply(this,arguments)}}();typeof Le<"u"&&"function"==typeof Le.subscribe&&Le.subscribe(null,Oe);const Ze=ce,vt=`${me.packageName.toLowerCase()}://`;Pe().handleOpenURL=function(){var Qt=(0,b.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(vt)&&Oe({url:Ht}),"function"==typeof Ze)try{Ze(Ht)}catch(vn){console.error(vn)}});return function(Ht){return Qt.apply(this,arguments)}}()}};function dt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,p.aw)("no-auth-event")}}const Kt=1e3;function Xt(){var ne;return(null===(ne=self?.location)||void 0===ne?void 0:ne.protocol)||null}function bn(ne=(0,De.z$)()){return!("file:"!==Xt()&&"ionic:"!==Xt()&&"capacitor:"!==Xt()||!ne.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wn(){try{const ne=self.localStorage,ie=p.aI();if(ne)return ne.setItem(ie,"1"),ne.removeItem(ie),!function hr(ne=(0,De.z$)()){return function Gn(){return(0,De.w1)()&&11===document?.documentMode}()||function Ln(ne=(0,De.z$)()){return/Edge\/\d+/.test(ne)}(ne)}()||(0,De.hl)()}catch{return Ar()&&(0,De.hl)()}return!1}function Ar(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function ft(){return"http:"===Xt()||"https:"===Xt()}()||(0,De.ru)()||bn())&&!function xn(){return(0,De.b$)()||(0,De.UG)()}()&&Wn()&&!Ar()}function _r(){return bn()&&typeof document<"u"}function en(){return(en=(0,b.Z)(function*(){return!!_r()&&new Promise(ne=>{const ie=setTimeout(()=>{ne(!1)},Kt);document.addEventListener("deviceready",()=>{clearTimeout(ie),ne(!0)})})})).apply(this,arguments)}const kt={LOCAL:"local",NONE:"none",SESSION:"session"},Zn=p.ax,Kr="persistence";function xr(ne){return qr.apply(this,arguments)}function qr(){return(qr=(0,b.Z)(function*(ne){yield ne._initializationPromise;const ie=on(),Q=p.aA(Kr,ne.config.apiKey,ne.name);ie&&ie.setItem(Q,ne._getPersistence())})).apply(this,arguments)}function on(){var ne;try{return(null===(ne=function Dn(){return typeof window<"u"?window:null}())||void 0===ne?void 0:ne.sessionStorage)||null}catch{return null}}const $t=p.ax;class Hn{constructor(){this.browserResolver=p.az(p.k),this.cordovaResolver=p.az(wt),this.underlyingResolver=null,this._redirectPersistence=p.a,this._completeRedirectFn=p.aB,this._overrideRedirectResult=p.aC}_initialize(ie){var Q=this;return(0,b.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._initialize(ie)})()}_openPopup(ie,Q,Le,ce){var me=this;return(0,b.Z)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openPopup(ie,Q,Le,ce)})()}_openRedirect(ie,Q,Le,ce){var me=this;return(0,b.Z)(function*(){return yield me.selectUnderlyingResolver(),me.assertedUnderlyingResolver._openRedirect(ie,Q,Le,ce)})()}_isIframeWebStorageSupported(ie,Q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ie,Q)}_originValidation(ie){return this.assertedUnderlyingResolver._originValidation(ie)}get _shouldInitProactively(){return _r()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ie=this;return(0,b.Z)(function*(){if(ie.underlyingResolver)return;const Q=yield function Rr(){return en.apply(this,arguments)}();ie.underlyingResolver=Q?ie.cordovaResolver:ie.browserResolver})()}}function Kn(ne){return ne.unwrap()}function In(ne){return Pr(ne)}function Pr(ne){const{_tokenResponse:ie}=ne instanceof De.ZR?ne.customData:ne;if(!ie)return null;if(!(ne instanceof De.ZR)&&"temporaryProof"in ie&&"phoneNumber"in ie)return p.P.credentialFromResult(ne);const Q=ie.providerId;if(!Q||Q===p.o.PASSWORD)return null;let Le;switch(Q){case p.o.GOOGLE:Le=p.Q;break;case p.o.FACEBOOK:Le=p.N;break;case p.o.GITHUB:Le=p.T;break;case p.o.TWITTER:Le=p.W;break;default:const{oauthIdToken:ce,oauthAccessToken:me,oauthTokenSecret:le,pendingToken:Oe,nonce:Ze}=ie;return me||le||ce||Oe?Oe?Q.startsWith("saml.")?p.aL._create(Q,Oe):p.J._fromParams({providerId:Q,signInMethod:Q,pendingToken:Oe,idToken:ce,accessToken:me}):new p.U(Q).credential({idToken:ce,accessToken:me,rawNonce:Ze}):null}return ne instanceof De.ZR?Le.credentialFromError(ne):Le.credentialFromResult(ne)}function Nn(ne,ie){return ie.catch(Q=>{throw Q instanceof De.ZR&&function or(ne,ie){var Q;const Le=null===(Q=ie.customData)||void 0===Q?void 0:Q._tokenResponse;if("auth/multi-factor-auth-required"===ie?.code)ie.resolver=new Ci(ne,p.an(ne,ie));else if(Le){const ce=Pr(ie),me=ie;ce&&(me.credential=ce,me.tenantId=Le.tenantId||void 0,me.email=Le.email||void 0,me.phoneNumber=Le.phoneNumber||void 0)}}(ne,Q),Q}).then(Q=>{const ce=Q.user;return{operationType:Q.operationType,credential:In(Q),additionalUserInfo:p.al(Q),user:rr.getOrCreate(ce)}})}function Dr(ne,ie){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,b.Z)(function*(ne,ie){const Q=yield ie;return{verificationId:Q.verificationId,confirm:Le=>Nn(ne,Q.confirm(Le))}})).apply(this,arguments)}class Ci{constructor(ie,Q){this.resolver=Q,this.auth=function un(ne){return ne.wrapped()}(ie)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ie){return Nn(Kn(this.auth),this.resolver.resolveSignIn(ie))}}class rr{constructor(ie){this._delegate=ie,this.multiFactor=p.ao(ie)}static getOrCreate(ie){return rr.USER_MAP.has(ie)||rr.USER_MAP.set(ie,new rr(ie)),rr.USER_MAP.get(ie)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ie){return this._delegate.getIdTokenResult(ie)}getIdToken(ie){return this._delegate.getIdToken(ie)}linkAndRetrieveDataWithCredential(ie){return this.linkWithCredential(ie)}linkWithCredential(ie){var Q=this;return(0,b.Z)(function*(){return Nn(Q.auth,p.Z(Q._delegate,ie))})()}linkWithPhoneNumber(ie,Q){var Le=this;return(0,b.Z)(function*(){return Dr(Le.auth,p.l(Le._delegate,ie,Q))})()}linkWithPopup(ie){var Q=this;return(0,b.Z)(function*(){return Nn(Q.auth,p.d(Q._delegate,ie,Hn))})()}linkWithRedirect(ie){var Q=this;return(0,b.Z)(function*(){return yield xr(p.aE(Q.auth)),p.g(Q._delegate,ie,Hn)})()}reauthenticateAndRetrieveDataWithCredential(ie){return this.reauthenticateWithCredential(ie)}reauthenticateWithCredential(ie){var Q=this;return(0,b.Z)(function*(){return Nn(Q.auth,p._(Q._delegate,ie))})()}reauthenticateWithPhoneNumber(ie,Q){return Dr(this.auth,p.r(this._delegate,ie,Q))}reauthenticateWithPopup(ie){return Nn(this.auth,p.e(this._delegate,ie,Hn))}reauthenticateWithRedirect(ie){var Q=this;return(0,b.Z)(function*(){return yield xr(p.aE(Q.auth)),p.h(Q._delegate,ie,Hn)})()}sendEmailVerification(ie){return p.ab(this._delegate,ie)}unlink(ie){var Q=this;return(0,b.Z)(function*(){return yield p.ak(Q._delegate,ie),Q})()}updateEmail(ie){return p.ag(this._delegate,ie)}updatePassword(ie){return p.ah(this._delegate,ie)}updatePhoneNumber(ie){return p.u(this._delegate,ie)}updateProfile(ie){return p.af(this._delegate,ie)}verifyBeforeUpdateEmail(ie,Q){return p.ac(this._delegate,ie,Q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rr.USER_MAP=new WeakMap;const Lt=p.ax;let It=(()=>{class ne{constructor(Q,Le){if(this.app=Q,Le.isInitialized())return this._delegate=Le.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ce}=Q.options;Lt(ce,"invalid-api-key",{appName:Q.name}),Lt(ce,"invalid-api-key",{appName:Q.name});const me=typeof window<"u"?Hn:void 0;this._delegate=Le.initialize({options:{persistence:ye(ce,Q.name),popupRedirectResolver:me}}),this._delegate._updateErrorMap(p.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Q){this._delegate.languageCode=Q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Q){this._delegate.tenantId=Q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Q,Le){p.G(this._delegate,Q,Le)}applyActionCode(Q){return p.a2(this._delegate,Q)}checkActionCode(Q){return p.a3(this._delegate,Q)}confirmPasswordReset(Q,Le){return p.a1(this._delegate,Q,Le)}createUserWithEmailAndPassword(Q,Le){var ce=this;return(0,b.Z)(function*(){return Nn(ce._delegate,p.a5(ce._delegate,Q,Le))})()}fetchProvidersForEmail(Q){return this.fetchSignInMethodsForEmail(Q)}fetchSignInMethodsForEmail(Q){return p.aa(this._delegate,Q)}isSignInWithEmailLink(Q){return p.a8(this._delegate,Q)}getRedirectResult(){var Q=this;return(0,b.Z)(function*(){Lt(Vn(),Q._delegate,"operation-not-supported-in-this-environment");const Le=yield p.j(Q._delegate,Hn);return Le?Nn(Q._delegate,Promise.resolve(Le)):{credential:null,user:null}})()}addFrameworkForLogging(Q){!function Rt(ne,ie){(0,p.aE)(ne)._logFramework(ie)}(this._delegate,Q)}onAuthStateChanged(Q,Le,ce){const{next:me,error:le,complete:Oe}=Ue(Q,Le,ce);return this._delegate.onAuthStateChanged(me,le,Oe)}onIdTokenChanged(Q,Le,ce){const{next:me,error:le,complete:Oe}=Ue(Q,Le,ce);return this._delegate.onIdTokenChanged(me,le,Oe)}sendSignInLinkToEmail(Q,Le){return p.a7(this._delegate,Q,Le)}sendPasswordResetEmail(Q,Le){return p.a0(this._delegate,Q,Le||void 0)}setPersistence(Q){var Le=this;return(0,b.Z)(function*(){let ce;switch(function wr(ne,ie){Zn(Object.values(kt).includes(ie),ne,"invalid-persistence-type"),(0,De.b$)()?Zn(ie!==kt.SESSION,ne,"unsupported-persistence-type"):(0,De.UG)()?Zn(ie===kt.NONE,ne,"unsupported-persistence-type"):Ar()?Zn(ie===kt.NONE||ie===kt.LOCAL&&(0,De.hl)(),ne,"unsupported-persistence-type"):Zn(ie===kt.NONE||Wn(),ne,"unsupported-persistence-type")}(Le._delegate,Q),Q){case kt.SESSION:ce=p.a;break;case kt.LOCAL:ce=(yield p.az(p.i)._isAvailable())?p.i:p.b;break;case kt.NONE:ce=p.L;break;default:return p.as("argument-error",{appName:Le._delegate.name})}return Le._delegate.setPersistence(ce)})()}signInAndRetrieveDataWithCredential(Q){return this.signInWithCredential(Q)}signInAnonymously(){return Nn(this._delegate,p.X(this._delegate))}signInWithCredential(Q){return Nn(this._delegate,p.Y(this._delegate,Q))}signInWithCustomToken(Q){return Nn(this._delegate,p.$(this._delegate,Q))}signInWithEmailAndPassword(Q,Le){return Nn(this._delegate,p.a6(this._delegate,Q,Le))}signInWithEmailLink(Q,Le){return Nn(this._delegate,p.a9(this._delegate,Q,Le))}signInWithPhoneNumber(Q,Le){return Dr(this._delegate,p.s(this._delegate,Q,Le))}signInWithPopup(Q){var Le=this;return(0,b.Z)(function*(){return Lt(Vn(),Le._delegate,"operation-not-supported-in-this-environment"),Nn(Le._delegate,p.c(Le._delegate,Q,Hn))})()}signInWithRedirect(Q){var Le=this;return(0,b.Z)(function*(){return Lt(Vn(),Le._delegate,"operation-not-supported-in-this-environment"),yield xr(Le._delegate),p.f(Le._delegate,Q,Hn)})()}updateCurrentUser(Q){return this._delegate.updateCurrentUser(Q)}verifyPasswordResetCode(Q){return p.a4(this._delegate,Q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ne.Persistence=kt,ne})();function Ue(ne,ie,Q){let Le=ne;"function"!=typeof ne&&({next:Le,error:ie,complete:Q}=ne);const ce=Le;return{next:le=>ce(le&&rr.getOrCreate(le)),error:ie,complete:Q}}function ye(ne,ie){const Q=function mn(ne,ie){const Q=on();if(!Q)return[];const Le=p.aA(Kr,ne,ie);switch(Q.getItem(Le)){case kt.NONE:return[p.L];case kt.LOCAL:return[p.i,p.a];case kt.SESSION:return[p.a];default:return[]}}(ne,ie);if(typeof self<"u"&&!Q.includes(p.i)&&Q.push(p.i),typeof window<"u")for(const Le of[p.b,p.a])Q.includes(Le)||Q.push(Le);return Q.includes(p.L)||Q.push(p.L),Q}class Ce{constructor(){this.providerId="phone",this._delegate=new p.P(Kn(Z.Z.auth()))}static credential(ie,Q){return p.P.credential(ie,Q)}verifyPhoneNumber(ie,Q){return this._delegate.verifyPhoneNumber(ie,Q)}unwrap(){return this._delegate}}Ce.PHONE_SIGN_IN_METHOD=p.P.PHONE_SIGN_IN_METHOD,Ce.PROVIDER_ID=p.P.PROVIDER_ID;const ht=p.ax;class mt{constructor(ie,Q,Le=Z.Z.app()){var ce;ht(null===(ce=Le.options)||void 0===ce?void 0:ce.apiKey,"invalid-api-key",{appName:Le.name}),this._delegate=new p.R(ie,Q,Le.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pe(ne){ne.INTERNAL.registerComponent(new Fe.wA("auth-compat",ie=>{const Q=ie.getProvider("app-compat").getImmediate(),Le=ie.getProvider("auth");return new It(Q,Le)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:p.A.EMAIL_SIGNIN,PASSWORD_RESET:p.A.PASSWORD_RESET,RECOVER_EMAIL:p.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:p.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:p.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:p.A.VERIFY_EMAIL}},EmailAuthProvider:p.M,FacebookAuthProvider:p.N,GithubAuthProvider:p.T,GoogleAuthProvider:p.Q,OAuthProvider:p.U,SAMLAuthProvider:p.V,PhoneAuthProvider:Ce,PhoneMultiFactorGenerator:p.m,RecaptchaVerifier:mt,TwitterAuthProvider:p.W,Auth:It,AuthCredential:p.H,Error:De.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ne.registerVersion("@firebase/auth-compat","0.3.5")}(Z.Z)},8766:(Yt,Ke,V)=>{V.d(Ke,{Lj:()=>gt,X3:()=>Et});var b=V(5861);const Z=(fe,qe)=>qe.some(ct=>fe instanceof ct);let p,De;const Fe=new WeakMap,Pe=new WeakMap,Ge=new WeakMap,be=new WeakMap,Ee=new WeakMap;let He={get(fe,qe,ct){if(fe instanceof IDBTransaction){if("done"===qe)return Pe.get(fe);if("objectStoreNames"===qe)return fe.objectStoreNames||Ge.get(fe);if("store"===qe)return ct.objectStoreNames[1]?void 0:ct.objectStore(ct.objectStoreNames[0])}return ut(fe[qe])},set:(fe,qe,ct)=>(fe[qe]=ct,!0),has:(fe,qe)=>fe instanceof IDBTransaction&&("done"===qe||"store"===qe)||qe in fe};function Qe(fe){return"function"==typeof fe?function Nt(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...qe){return fe.apply(Ie(this),qe),ut(Fe.get(this))}:function(...qe){return ut(fe.apply(Ie(this),qe))}:function(qe,...ct){const bt=fe.call(Ie(this),qe,...ct);return Ge.set(bt,qe.sort?qe.sort():[qe]),ut(bt)}}(fe):(fe instanceof IDBTransaction&&function yt(fe){if(Pe.has(fe))return;const qe=new Promise((ct,bt)=>{const Jt=()=>{fe.removeEventListener("complete",Pt),fe.removeEventListener("error",We),fe.removeEventListener("abort",We)},Pt=()=>{ct(),Jt()},We=()=>{bt(fe.error||new DOMException("AbortError","AbortError")),Jt()};fe.addEventListener("complete",Pt),fe.addEventListener("error",We),fe.addEventListener("abort",We)});Pe.set(fe,qe)}(fe),Z(fe,function Me(){return p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,He):fe)}function ut(fe){if(fe instanceof IDBRequest)return function Re(fe){const qe=new Promise((ct,bt)=>{const Jt=()=>{fe.removeEventListener("success",Pt),fe.removeEventListener("error",We)},Pt=()=>{ct(ut(fe.result)),Jt()},We=()=>{bt(fe.error),Jt()};fe.addEventListener("success",Pt),fe.addEventListener("error",We)});return qe.then(ct=>{ct instanceof IDBCursor&&Fe.set(ct,fe)}).catch(()=>{}),Ee.set(qe,fe),qe}(fe);if(be.has(fe))return be.get(fe);const qe=Qe(fe);return qe!==fe&&(be.set(fe,qe),Ee.set(qe,fe)),qe}const Ie=fe=>Ee.get(fe);function Et(fe,qe,{blocked:ct,upgrade:bt,blocking:Jt,terminated:Pt}={}){const We=indexedDB.open(fe,qe),st=ut(We);return bt&&We.addEventListener("upgradeneeded",$e=>{bt(ut(We.result),$e.oldVersion,$e.newVersion,ut(We.transaction))}),ct&&We.addEventListener("blocked",()=>ct()),st.then($e=>{Pt&&$e.addEventListener("close",()=>Pt()),Jt&&$e.addEventListener("versionchange",()=>Jt())}).catch(()=>{}),st}function gt(fe,{blocked:qe}={}){const ct=indexedDB.deleteDatabase(fe);return qe&&ct.addEventListener("blocked",()=>qe()),ut(ct).then(()=>{})}const rt=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],xt=new Map;function ke(fe,qe){if(!(fe instanceof IDBDatabase)||qe in fe||"string"!=typeof qe)return;if(xt.get(qe))return xt.get(qe);const ct=qe.replace(/FromIndex$/,""),bt=qe!==ct,Jt=Ye.includes(ct);if(!(ct in(bt?IDBIndex:IDBObjectStore).prototype)||!Jt&&!rt.includes(ct))return;const Pt=function(){var We=(0,b.Z)(function*(st,...$e){const at=this.transaction(st,Jt?"readwrite":"readonly");let wt=at.store;return bt&&(wt=wt.index($e.shift())),(yield Promise.all([wt[ct](...$e),Jt&&at.done]))[0]});return function($e){return We.apply(this,arguments)}}();return xt.set(qe,Pt),Pt}!function pt(fe){He=fe(He)}(fe=>({...fe,get:(qe,ct,bt)=>ke(qe,ct)||fe.get(qe,ct,bt),has:(qe,ct)=>!!ke(qe,ct)||fe.has(qe,ct)}))},5861:(Yt,Ke,V)=>{function b(p,De,Me,xe,Fe,Pe,Ge){try{var be=p[Pe](Ge),Ee=be.value}catch(Re){return void Me(Re)}be.done?De(Ee):Promise.resolve(Ee).then(xe,Fe)}function Z(p){return function(){var De=this,Me=arguments;return new Promise(function(xe,Fe){var Pe=p.apply(De,Me);function Ge(Ee){b(Pe,xe,Fe,Ge,be,"next",Ee)}function be(Ee){b(Pe,xe,Fe,Ge,be,"throw",Ee)}Ge(void 0)})}}V.d(Ke,{Z:()=>Z})}},Yt=>{Yt(Yt.s=4884)}]);